# 작업 지시서: 업무 상세 기능 개발

## 1. 개요

현재 Workly는 업무를 생성하고 목록으로 보는 기본 기능에 머물러 있습니다. 사용자가 업무의 구체적인 내용을 작성하고, 다른 업무와의 관계를 설정하며, 시간을 관리하는 등 세부적인 관리를 할 수 있는 '업무 상세' 기능의 개발이 시급합니다.

본 작업의 목표는 `WORKLY_PRD.md` 4.1.D 항에 명시된 바와 같이, 마크다운 에디터를 기반으로 한 업무 상세 화면의 핵심 기능들을 구현하는 것입니다.

## 2. 세부 요구사항

### 대상 화면
-   업무 카드 탭(클릭) 시 진입하는 **'업무 상세'** 화면

### 2.1. UI: 마크다운 에디터 도입

-   업무의 내용(content)을 작성하는 핵심 영역은 **마크다운(Markdown) 에디터**로 구현합니다.
-   사용자는 이를 통해 텍스트 서식, 링크, 이미지 첨부 등 풍부한 형식의 업무 내용을 작성할 수 있어야 합니다.
-   에디터는 직관적이어야 하며, 실시간으로 마크다운 미리보기를 제공하는 것을 권장합니다.

### 2.2. 핵심 기능 구현

#### A. 체크리스트 (하위 업무)

-   **기능**: 마크다운 에디터 내에서 사용자가 하위 체크리스트(`- [ ]`, `- [x]`)를 생성하고, 완료 상태를 직접 토글할 수 있어야 합니다.
-   **구현**: 단순 텍스트를 넘어, 체크박스가 실제로 상호작용 가능한 컴포넌트로 렌더링되어야 합니다. 체크리스트의 완료 상태는 업무의 전체 진행률에 반영될 수 있습니다.

#### B. 업무 관계 설정 (선행/후행)

-   **기능**: 다른 업무와의 의존 관계를 설정할 수 있는 기능을 구현합니다.
-   **UI**: '관계 추가' 또는 '의존성 설정'과 같은 버튼을 통해 다른 업무를 검색하고 연결할 수 있는 인터페이스를 제공해야 합니다.
-   **세부 구현**:
    -   **선행 업무**: 이 업무를 시작하기 전에 반드시 완료되어야 하는 업무를 지정합니다.
    -   **후행 업무**: 이 업무가 완료되어야만 시작할 수 있는 업무를 지정합니다.
    -   설정된 관계는 업무 상세 화면에 명확하게 표시되어야 합니다.

#### C. 위키 레퍼런스 첨부

-   **기능**: 업무 내용과 관련된 내부 위키(지식 베이스) 문서를 쉽게 참조하고 연결할 수 있는 기능을 제공합니다.
-   **구현**: 에디터 내에서 특정 키워드(예: `[[`)를 입력했을 때 위키 문서를 검색하고 첨부할 수 있는 자동 완성 기능을 구현하거나, 별도의 '위키 연결' 버튼을 통해 문서를 검색/첨부하는 방식을 고려할 수 있습니다.

#### D. 시간 추정 및 기록

-   **기능**: 업무에 소요될 시간을 계획하고, 실제 투입된 시간을 기록하는 기능을 구현합니다.
-   **UI**: 업무 상세 정보 영역에 '추정 시간'과 '기록된 시간'을 입력하고 확인할 수 있는 명확한 필드를 제공합니다.
-   **세부 구현**:
    -   **시간 추정**: 사용자가 예상 소요 시간을 시간 단위로 입력할 수 있습니다.
    -   **시간 기록**: 사용자가 실제 작업 시간을 기록할 수 있습니다. (예: 수동 입력 또는 시작/정지 타이머)

## 3. 데이터 모델 고려사항

-   `Task` 객체 모델에 다음 필드들이 추가되거나 수정되어야 합니다.
    -   `content` (String, Markdown)
    -   `dependencies` (Array of Objects: `{ type: 'precedes' | 'follows', taskId: String }`)
    -   `wikiReferences` (Array of Strings: `wikiPageId`)
    -   `estimatedHours` (Number)
    -   `loggedHours` (Number)

## 4. 결론

업무 상세 기능은 Workly를 단순한 할 일 목록 앱에서 강력한 업무 관리 도구로 발전시키는 핵심적인 단계입니다. PRD의 요구사항을 정확히 이해하고, 사용자가 업무의 모든 맥락을 한 곳에서 관리할 수 있도록 견고하게 구현해주시기 바랍니다.

This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.claude/
  commands/
    tm/
      add-dependency/
        add-dependency.md
      add-subtask/
        add-subtask.md
        convert-task-to-subtask.md
      add-task/
        add-task.md
      analyze-complexity/
        analyze-complexity.md
      clear-subtasks/
        clear-all-subtasks.md
        clear-subtasks.md
      complexity-report/
        complexity-report.md
      expand/
        expand-all-tasks.md
        expand-task.md
      fix-dependencies/
        fix-dependencies.md
      generate/
        generate-tasks.md
      init/
        init-project-quick.md
        init-project.md
      list/
        list-tasks-by-status.md
        list-tasks-with-subtasks.md
        list-tasks.md
      models/
        setup-models.md
        view-models.md
      next/
        next-task.md
      parse-prd/
        parse-prd-with-research.md
        parse-prd.md
      remove-dependency/
        remove-dependency.md
      remove-subtask/
        remove-subtask.md
      remove-task/
        remove-task.md
      set-status/
        to-cancelled.md
        to-deferred.md
        to-done.md
        to-in-progress.md
        to-pending.md
        to-review.md
      setup/
        install-taskmaster.md
        quick-install-taskmaster.md
      show/
        show-task.md
      status/
        project-status.md
      sync-readme/
        sync-readme.md
      update/
        update-single-task.md
        update-task.md
        update-tasks-from-id.md
      utils/
        analyze-project.md
      validate-dependencies/
        validate-dependencies.md
      workflows/
        auto-implement-tasks.md
        command-pipeline.md
        smart-workflow.md
      help.md
      learn.md
      tm-main.md
  settings.json
  settings.local.json
  TM_COMMANDS_GUIDE.md
.github/
  workflows/
    backend-ci.yml
    frontend-ci.yml
    monorepo-ci.yml
.taskmaster/
  docs/
    home-task-management-prd.md
    PRD.txt
  reports/
    task-complexity-report.json
  tasks/
    tasks.json
  templates/
    example_prd.txt
  CLAUDE.md
  config.json
  state.json
backend/
  src/
    config/
      auth.config.ts
      database.config.ts
    database/
      entities/
        audit-log.entity.ts
        file.entity.ts
        project-member.entity.ts
        project.entity.ts
        task-comment.entity.ts
        task-dependency.entity.ts
        task-label.entity.ts
        task.entity.ts
        time-entry.entity.ts
        user.entity.ts
      migrations/
        1706000000000-initial-schema.ts
    modules/
      admin/
        controllers/
          admin.controller.ts
          audit-logs.controller.ts
          projects-admin.controller.ts
          settings-admin.controller.ts
          users-admin.controller.ts
        decorators/
          audit-log.decorator.ts
          permissions.decorator.ts
        guards/
          admin.guard.ts
          permissions.guard.ts
        interceptors/
          audit-log.interceptor.ts
        services/
          admin.service.ts
          audit.service.ts
        admin.module.ts
      auth/
        decorators/
          current-user.decorator.ts
          public.decorator.ts
          roles.decorator.ts
        dto/
          auth.dto.ts
        guards/
          auth.guard.ts
          google-auth.guard.ts
          jwt-auth.guard.ts
          roles.guard.ts
          throttle.guard.ts
        middleware/
          audit.middleware.ts
          auth.middleware.ts
        strategies/
          google.strategy.ts
          jwt.strategy.ts
        auth.controller.ts
        auth.module.ts
        auth.service.ts
      projects/
        dto/
          project.dto.ts
        projects.controller.ts
        projects.module.ts
        projects.service.ts
      tasks/
        dto/
          task.dto.ts
        tasks.controller.ts
        tasks.module.ts
        tasks.service.ts
      users/
        dto/
          update-user.dto.ts
        users.controller.ts
        users.module.ts
        users.service.ts
      websocket/
        websocket.gateway.ts
        websocket.module.ts
    scripts/
      grant-admin-simple.ts
      grant-admin.ts
    types/
      admin.types.ts
    app.module.ts
    main.ts
  test/
    jest-e2e.json
    setup-e2e.ts
    setup.ts
  .eslintrc.js
  Dockerfile
  jest.config.js
  package.json
  tsconfig.json
docs/
  admin-api-design.md
  admin-components-design.md
  admin-implementation-guide.md
  admin-panel-design.md
  admin-rbac-design.md
  PROJECT_STRUCTURE.md
frontend/
  src/
    app/
      admin/
        audit-logs/
          page.tsx
        projects/
          page.tsx
        settings/
          page.tsx
        users/
          page.tsx
        layout.tsx
        page.tsx
      auth/
        callback/
          page.tsx
        login/
          page.tsx
        layout.tsx
      board/
        page.tsx
      goals/
        page.tsx
      inbox/
        page.tsx
      privacy/
        page.tsx
      profile/
        page.tsx
      projects/
        [id]/
          page.tsx
        page.tsx
      search/
        page.tsx
      settings/
        page.tsx
      tasks/
        page.tsx
      terms/
        page.tsx
      globals.css
      layout.tsx
      page.tsx
    components/
      admin/
        AdminButton.tsx
        AdminNavItem.tsx
        index.ts
        PermissionGuard.tsx
      auth/
        GoogleLoginButton.tsx
        LoginForm.tsx
        SocialLogin.tsx
      board/
        KnowledgeWiki.tsx
        MissionBoard.tsx
        ProjectShowcase.tsx
      home/
        HomeTaskDashboard.tsx
      inbox/
        CPERModal.tsx
        InboxModal.tsx
      layout/
        ConditionalLayout.tsx
        Header.tsx
        MainContainer.tsx
      navigation/
        LeftNavigation.tsx
        MobileNavigation.tsx
      projects/
        ProjectChatChannel.tsx
        ProjectObjectiveManager.tsx
        SlashCommandInput.tsx
      tasks/
        CollapsibleCalendar.tsx
        ResponsiveTaskCard.tsx
        TaskCard.tsx
        TaskCreationWizard.tsx
        TaskDetailModal.tsx
        TaskFilters.tsx
        TaskList.tsx
        TaskPriorityBadge.tsx
        TaskStatusBadge.tsx
        TaskStatusSelector.tsx
      ui/
        AdvancedFilterPanel.tsx
        Button.tsx
        CalendarToggleFAB.tsx
        Card.tsx
        FilterChips.tsx
        FilterManager.tsx
        Input.tsx
        LoginBanner.tsx
        MobileFilterTabs.tsx
        MobileTabs.tsx
        QuickAddInput.tsx
        SearchBar.tsx
        Select.tsx
        SimpleFilterChips.tsx
        Textarea.tsx
        TriageWizardModal.tsx
        UnifiedFilter.tsx
        WorklyFloatingActionButton.tsx
        WorklyMDXEditor.tsx
      workflow/
        ExecuteWorkflowDashboard.tsx
        PlanWorkflowModal.tsx
        ReviewWorkflowDashboard.tsx
    hooks/
      useDeviceType.ts
      useScrollVisibility.ts
    lib/
      api/
        admin-api.ts
        tasks.ts
        workly-api.ts
      hooks/
        useAdminApi.ts
      stores/
        authStore.ts
        calendarFilterStore.ts
      api.ts
      auth.ts
      utils.ts
    styles/
      scrollbar-system.md
    types/
      api.types.ts
      project.types.ts
      task.types.ts
  .eslintrc.js
  .eslintrc.json
  .gitignore
  Dockerfile
  jest.config.js
  jest.setup.js
  next-env.d.ts
  next.config.js
  package.json
  postcss.config.js
  tailwind.config.ts
  tsconfig.json
  vercel.json
instructions/
  20250725-01.md
  20250725-02.md
  20250726-repomix.md
  20250727-01.md
  20250727-02.md
  20250727-03.md
  20250728-01.md
  20250728-02.md
  20250728-03.md
  20250728-04.md
  20250801-01.md
  20250801-02.md
  20250801-03.md
  20250801-04.md
  20250801-05.md
  20250801-06.md
references/
  SuperClaude Guide.md
  superclaude_commands_guide_workly.md
  Task-master-ai Guide.md
  threads-ui-analysis.md
  WORKLY_PLAN_1.0.md
  WORKLY_PRD.md
scripts/
  deploy-production.sh
  deploy.sh
  migrate.sh
  setup.sh
shared/
  constants/
    api-endpoints.ts
    socket-events.ts
  src/
    index.ts
  types/
    admin.types.ts
    api.types.ts
    goal.types.ts
    inbox.types.ts
    index.ts
    navigation.types.ts
    socket.types.ts
    workly-core.types.ts
  utils/
    hierarchy.utils.ts
  package.json
  tsconfig.json
.env.example
.eslintrc.js
.gitignore
.prettierignore
.prettierrc
CLAUDE.md
docker-compose.yml
GEMINI.md
package.json
README.md
tsconfig.json
vercel.json
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".claude/settings.local.json">
{
  "$schema": "https://json.schemastore.org/claude-code-settings.json",
  "permissions": {
    "allow": [
      "Bash(find:*)",
      "Bash(npx create-next-app:*)",
      "Bash(rm:*)",
      "Bash(true)",
      "Bash(mv:*)",
      "Bash(mkdir:*)",
      "Bash(git init:*)",
      "Bash(git add:*)",
      "Bash(npm install)",
      "mcp__task-master-ai__get_tasks",
      "Bash(ls:*)",
      "Bash(task-master parse-prd:*)",
      "Bash(task-master:*)",
      "mcp__task-master-ai__parse_prd",
      "mcp__task-master-ai__analyze_project_complexity",
      "mcp__task-master-ai__expand_task",
      "Bash(git commit:*)",
      "mcp__task-master-ai__set_task_status",
      "mcp__task-master-ai__get_task",
      "Bash(npm run start:dev:*)",
      "Bash(npm run:*)",
      "Bash(docker:*)",
      "Bash(grep:*)",
      "Bash(code:*)",
      "Bash(claude doctor)",
      "mcp__task-master-ai__add_task",
      "mcp__task-master-ai__next_task",
      "mcp__task-master-ai__update_subtask"
    ],
    "deny": []
  },
  "enableAllProjectMcpServers": true,
  "enabledMcpjsonServers": [
    "task-master-ai"
  ]
}
</file>

<file path=".claude/commands/tm/add-dependency/add-dependency.md">
Add a dependency between tasks.

Arguments: $ARGUMENTS

Parse the task IDs to establish dependency relationship.

## Adding Dependencies

Creates a dependency where one task must be completed before another can start.

## Argument Parsing

Parse natural language or IDs:
- "make 5 depend on 3" â†’ task 5 depends on task 3
- "5 needs 3" â†’ task 5 depends on task 3
- "5 3" â†’ task 5 depends on task 3
- "5 after 3" â†’ task 5 depends on task 3

## Execution

```bash
task-master add-dependency --id=<task-id> --depends-on=<dependency-id>
```

## Validation

Before adding:
1. **Verify both tasks exist**
2. **Check for circular dependencies**
3. **Ensure dependency makes logical sense**
4. **Warn if creating complex chains**

## Smart Features

- Detect if dependency already exists
- Suggest related dependencies
- Show impact on task flow
- Update task priorities if needed

## Post-Addition

After adding dependency:
1. Show updated dependency graph
2. Identify any newly blocked tasks
3. Suggest task order changes
4. Update project timeline

## Example Flows

```
/project:tm/add-dependency 5 needs 3
â†’ Task #5 now depends on Task #3
â†’ Task #5 is now blocked until #3 completes
â†’ Suggested: Also consider if #5 needs #4
```
</file>

<file path=".claude/commands/tm/add-subtask/add-subtask.md">
Add a subtask to a parent task.

Arguments: $ARGUMENTS

Parse arguments to create a new subtask or convert existing task.

## Adding Subtasks

Creates subtasks to break down complex parent tasks into manageable pieces.

## Argument Parsing

Flexible natural language:
- "add subtask to 5: implement login form"
- "break down 5 with: setup, implement, test"
- "subtask for 5: handle edge cases"
- "5: validate user input" â†’ adds subtask to task 5

## Execution Modes

### 1. Create New Subtask
```bash
task-master add-subtask --parent=<id> --title="<title>" --description="<desc>"
```

### 2. Convert Existing Task
```bash
task-master add-subtask --parent=<id> --task-id=<existing-id>
```

## Smart Features

1. **Automatic Subtask Generation**
   - If title contains "and" or commas, create multiple
   - Suggest common subtask patterns
   - Inherit parent's context

2. **Intelligent Defaults**
   - Priority based on parent
   - Appropriate time estimates
   - Logical dependencies between subtasks

3. **Validation**
   - Check parent task complexity
   - Warn if too many subtasks
   - Ensure subtask makes sense

## Creation Process

1. Parse parent task context
2. Generate subtask with ID like "5.1"
3. Set appropriate defaults
4. Link to parent task
5. Update parent's time estimate

## Example Flows

```
/project:tm/add-subtask to 5: implement user authentication
â†’ Created subtask #5.1: "implement user authentication"
â†’ Parent task #5 now has 1 subtask
â†’ Suggested next subtasks: tests, documentation

/project:tm/add-subtask 5: setup, implement, test
â†’ Created 3 subtasks:
  #5.1: setup
  #5.2: implement  
  #5.3: test
```

## Post-Creation

- Show updated task hierarchy
- Suggest logical next subtasks
- Update complexity estimates
- Recommend subtask order
</file>

<file path=".claude/commands/tm/add-subtask/convert-task-to-subtask.md">
Convert an existing task into a subtask.

Arguments: $ARGUMENTS

Parse parent ID and task ID to convert.

## Task Conversion

Converts an existing standalone task into a subtask of another task.

## Argument Parsing

- "move task 8 under 5"
- "make 8 a subtask of 5"
- "nest 8 in 5"
- "5 8" â†’ make task 8 a subtask of task 5

## Execution

```bash
task-master add-subtask --parent=<parent-id> --task-id=<task-to-convert>
```

## Pre-Conversion Checks

1. **Validation**
   - Both tasks exist and are valid
   - No circular parent relationships
   - Task isn't already a subtask
   - Logical hierarchy makes sense

2. **Impact Analysis**
   - Dependencies that will be affected
   - Tasks that depend on converting task
   - Priority alignment needed
   - Status compatibility

## Conversion Process

1. Change task ID from "8" to "5.1" (next available)
2. Update all dependency references
3. Inherit parent's context where appropriate
4. Adjust priorities if needed
5. Update time estimates

## Smart Features

- Preserve task history
- Maintain dependencies
- Update all references
- Create conversion log

## Example

```
/project:tm/add-subtask/from-task 5 8
â†’ Converting: Task #8 becomes subtask #5.1
â†’ Updated: 3 dependency references
â†’ Parent task #5 now has 1 subtask
â†’ Note: Subtask inherits parent's priority

Before: #8 "Implement validation" (standalone)
After:  #5.1 "Implement validation" (subtask of #5)
```

## Post-Conversion

- Show new task hierarchy
- List updated dependencies
- Verify project integrity
- Suggest related conversions
</file>

<file path=".claude/commands/tm/add-task/add-task.md">
Add new tasks with intelligent parsing and context awareness.

Arguments: $ARGUMENTS

## Smart Task Addition

Parse natural language to create well-structured tasks.

### 1. **Input Understanding**

I'll intelligently parse your request:
- Natural language â†’ Structured task
- Detect priority from keywords (urgent, ASAP, important)
- Infer dependencies from context
- Suggest complexity based on description
- Determine task type (feature, bug, refactor, test, docs)

### 2. **Smart Parsing Examples**

**"Add urgent task to fix login bug"**
â†’ Title: Fix login bug
â†’ Priority: high
â†’ Type: bug
â†’ Suggested complexity: medium

**"Create task for API documentation after task 23 is done"**
â†’ Title: API documentation
â†’ Dependencies: [23]
â†’ Type: documentation
â†’ Priority: medium

**"Need to refactor auth module - depends on 12 and 15, high complexity"**
â†’ Title: Refactor auth module
â†’ Dependencies: [12, 15]
â†’ Complexity: high
â†’ Type: refactor

### 3. **Context Enhancement**

Based on current project state:
- Suggest related existing tasks
- Warn about potential conflicts
- Recommend dependencies
- Propose subtasks if complex

### 4. **Interactive Refinement**

```yaml
Task Preview:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Title: [Extracted title]
Priority: [Inferred priority]
Dependencies: [Detected dependencies]
Complexity: [Estimated complexity]

Suggestions:
- Similar task #34 exists, consider as dependency?
- This seems complex, break into subtasks?
- Tasks #45-47 work on same module
```

### 5. **Validation & Creation**

Before creating:
- Validate dependencies exist
- Check for duplicates
- Ensure logical ordering
- Verify task completeness

### 6. **Smart Defaults**

Intelligent defaults based on:
- Task type patterns
- Team conventions
- Historical data
- Current sprint/phase

Result: High-quality tasks from minimal input.
</file>

<file path=".claude/commands/tm/analyze-complexity/analyze-complexity.md">
Analyze task complexity and generate expansion recommendations.

Arguments: $ARGUMENTS

Perform deep analysis of task complexity across the project.

## Complexity Analysis

Uses AI to analyze tasks and recommend which ones need breakdown.

## Execution Options

```bash
task-master analyze-complexity [--research] [--threshold=5]
```

## Analysis Parameters

- `--research` â†’ Use research AI for deeper analysis
- `--threshold=5` â†’ Only flag tasks above complexity 5
- Default: Analyze all pending tasks

## Analysis Process

### 1. **Task Evaluation**
For each task, AI evaluates:
- Technical complexity
- Time requirements
- Dependency complexity
- Risk factors
- Knowledge requirements

### 2. **Complexity Scoring**
Assigns score 1-10 based on:
- Implementation difficulty
- Integration challenges
- Testing requirements
- Unknown factors
- Technical debt risk

### 3. **Recommendations**
For complex tasks:
- Suggest expansion approach
- Recommend subtask breakdown
- Identify risk areas
- Propose mitigation strategies

## Smart Analysis Features

1. **Pattern Recognition**
   - Similar task comparisons
   - Historical complexity accuracy
   - Team velocity consideration
   - Technology stack factors

2. **Contextual Factors**
   - Team expertise
   - Available resources
   - Timeline constraints
   - Business criticality

3. **Risk Assessment**
   - Technical risks
   - Timeline risks
   - Dependency risks
   - Knowledge gaps

## Output Format

```
Task Complexity Analysis Report
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

High Complexity Tasks (>7):
ğŸ“ #5 "Implement real-time sync" - Score: 9/10
   Factors: WebSocket complexity, state management, conflict resolution
   Recommendation: Expand into 5-7 subtasks
   Risks: Performance, data consistency

ğŸ“ #12 "Migrate database schema" - Score: 8/10
   Factors: Data migration, zero downtime, rollback strategy
   Recommendation: Expand into 4-5 subtasks
   Risks: Data loss, downtime

Medium Complexity Tasks (5-7):
ğŸ“ #23 "Add export functionality" - Score: 6/10
   Consider expansion if timeline tight

Low Complexity Tasks (<5):
âœ… 15 tasks - No expansion needed

Summary:
- Expand immediately: 2 tasks
- Consider expanding: 5 tasks
- Keep as-is: 15 tasks
```

## Actionable Output

For each high-complexity task:
1. Complexity score with reasoning
2. Specific expansion suggestions
3. Risk mitigation approaches
4. Recommended subtask structure

## Integration

Results are:
- Saved to `.taskmaster/reports/complexity-analysis.md`
- Used by expand command
- Inform sprint planning
- Guide resource allocation

## Next Steps

After analysis:
```
/project:tm/expand 5    # Expand specific task
/project:tm/expand/all  # Expand all recommended
/project:tm/complexity-report  # View detailed report
```
</file>

<file path=".claude/commands/tm/clear-subtasks/clear-all-subtasks.md">
Clear all subtasks from all tasks globally.

## Global Subtask Clearing

Remove all subtasks across the entire project. Use with extreme caution.

## Execution

```bash
task-master clear-subtasks --all
```

## Pre-Clear Analysis

1. **Project-Wide Summary**
   ```
   Global Subtask Summary
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   Total parent tasks: 12
   Total subtasks: 47
   - Completed: 15
   - In-progress: 8
   - Pending: 24
   
   Work at risk: ~120 hours
   ```

2. **Critical Warnings**
   - In-progress subtasks that will lose work
   - Completed subtasks with valuable history
   - Complex dependency chains
   - Integration test results

## Double Confirmation

```
âš ï¸  DESTRUCTIVE OPERATION WARNING âš ï¸
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
This will remove ALL 47 subtasks from your project
Including 8 in-progress and 15 completed subtasks

This action CANNOT be undone

Type 'CLEAR ALL SUBTASKS' to confirm:
```

## Smart Safeguards

- Require explicit confirmation phrase
- Create automatic backup
- Log all removed data
- Option to export first

## Use Cases

Valid reasons for global clear:
- Project restructuring
- Major pivot in approach
- Starting fresh breakdown
- Switching to different task organization

## Process

1. Full project analysis
2. Create backup file
3. Show detailed impact
4. Require confirmation
5. Execute removal
6. Generate summary report

## Alternative Suggestions

Before clearing all:
- Export subtasks to file
- Clear only pending subtasks
- Clear by task category
- Archive instead of delete

## Post-Clear Report

```
Global Subtask Clear Complete
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Removed: 47 subtasks from 12 tasks
Backup saved: .taskmaster/backup/subtasks-20240115.json
Parent tasks updated: 12
Time estimates adjusted: Yes

Next steps:
- Review updated task list
- Re-expand complex tasks as needed
- Check project timeline
```
</file>

<file path=".claude/commands/tm/clear-subtasks/clear-subtasks.md">
Clear all subtasks from a specific task.

Arguments: $ARGUMENTS (task ID)

Remove all subtasks from a parent task at once.

## Clearing Subtasks

Bulk removal of all subtasks from a parent task.

## Execution

```bash
task-master clear-subtasks --id=<task-id>
```

## Pre-Clear Analysis

1. **Subtask Summary**
   - Number of subtasks
   - Completion status of each
   - Work already done
   - Dependencies affected

2. **Impact Assessment**
   - Data that will be lost
   - Dependencies to be removed
   - Effect on project timeline
   - Parent task implications

## Confirmation Required

```
Clear Subtasks Confirmation
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Parent Task: #5 "Implement user authentication"
Subtasks to remove: 4
- #5.1 "Setup auth framework" (done)
- #5.2 "Create login form" (in-progress)
- #5.3 "Add validation" (pending)
- #5.4 "Write tests" (pending)

âš ï¸  This will permanently delete all subtask data
Continue? (y/n)
```

## Smart Features

- Option to convert to standalone tasks
- Backup task data before clearing
- Preserve completed work history
- Update parent task appropriately

## Process

1. List all subtasks for confirmation
2. Check for in-progress work
3. Remove all subtasks
4. Update parent task
5. Clean up dependencies

## Alternative Options

Suggest alternatives:
- Convert important subtasks to tasks
- Keep completed subtasks
- Archive instead of delete
- Export subtask data first

## Post-Clear

- Show updated parent task
- Recalculate time estimates
- Update task complexity
- Suggest next steps

## Example

```
/project:tm/clear-subtasks 5
â†’ Found 4 subtasks to remove
â†’ Warning: Subtask #5.2 is in-progress
â†’ Cleared all subtasks from task #5
â†’ Updated parent task estimates
â†’ Suggestion: Consider re-expanding with better breakdown
```
</file>

<file path=".claude/commands/tm/complexity-report/complexity-report.md">
Display the task complexity analysis report.

Arguments: $ARGUMENTS

View the detailed complexity analysis generated by analyze-complexity command.

## Viewing Complexity Report

Shows comprehensive task complexity analysis with actionable insights.

## Execution

```bash
task-master complexity-report [--file=<path>]
```

## Report Location

Default: `.taskmaster/reports/complexity-analysis.md`
Custom: Specify with --file parameter

## Report Contents

### 1. **Executive Summary**
```
Complexity Analysis Summary
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Analysis Date: 2024-01-15
Tasks Analyzed: 32
High Complexity: 5 (16%)
Medium Complexity: 12 (37%)
Low Complexity: 15 (47%)

Critical Findings:
- 5 tasks need immediate expansion
- 3 tasks have high technical risk
- 2 tasks block critical path
```

### 2. **Detailed Task Analysis**
For each complex task:
- Complexity score breakdown
- Contributing factors
- Specific risks identified
- Expansion recommendations
- Similar completed tasks

### 3. **Risk Matrix**
Visual representation:
```
Risk vs Complexity Matrix
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
High Risk  | #5(9) #12(8) | #23(6)
Med Risk   | #34(7)       | #45(5) #67(5)
Low Risk   | #78(8)       | [15 tasks]
           | High Complex  | Med Complex
```

### 4. **Recommendations**

**Immediate Actions:**
1. Expand task #5 - Critical path + high complexity
2. Expand task #12 - High risk + dependencies
3. Review task #34 - Consider splitting

**Sprint Planning:**
- Don't schedule multiple high-complexity tasks together
- Ensure expertise available for complex tasks
- Build in buffer time for unknowns

## Interactive Features

When viewing report:
1. **Quick Actions**
   - Press 'e' to expand a task
   - Press 'd' for task details
   - Press 'r' to refresh analysis

2. **Filtering**
   - View by complexity level
   - Filter by risk factors
   - Show only actionable items

3. **Export Options**
   - Markdown format
   - CSV for spreadsheets
   - JSON for tools

## Report Intelligence

- Compares with historical data
- Shows complexity trends
- Identifies patterns
- Suggests process improvements

## Integration

Use report for:
- Sprint planning sessions
- Resource allocation
- Risk assessment
- Team discussions
- Client updates

## Example Usage

```
/project:tm/complexity-report
â†’ Opens latest analysis

/project:tm/complexity-report --file=archived/2024-01-01.md
â†’ View historical analysis

After viewing:
/project:tm/expand 5
â†’ Expand high-complexity task
```
</file>

<file path=".claude/commands/tm/expand/expand-all-tasks.md">
Expand all pending tasks that need subtasks.

## Bulk Task Expansion

Intelligently expands all tasks that would benefit from breakdown.

## Execution

```bash
task-master expand --all
```

## Smart Selection

Only expands tasks that:
- Are marked as pending
- Have high complexity (>5)
- Lack existing subtasks
- Would benefit from breakdown

## Expansion Process

1. **Analysis Phase**
   - Identify expansion candidates
   - Group related tasks
   - Plan expansion strategy

2. **Batch Processing**
   - Expand tasks in logical order
   - Maintain consistency
   - Preserve relationships
   - Optimize for parallelism

3. **Quality Control**
   - Ensure subtask quality
   - Avoid over-decomposition
   - Maintain task coherence
   - Update dependencies

## Options

- Add `force` to expand all regardless of complexity
- Add `research` for enhanced AI analysis

## Results

After bulk expansion:
- Summary of tasks expanded
- New subtask count
- Updated complexity metrics
- Suggested task order
</file>

<file path=".claude/commands/tm/expand/expand-task.md">
Break down a complex task into subtasks.

Arguments: $ARGUMENTS (task ID)

## Intelligent Task Expansion

Analyzes a task and creates detailed subtasks for better manageability.

## Execution

```bash
task-master expand --id=$ARGUMENTS
```

## Expansion Process

1. **Task Analysis**
   - Review task complexity
   - Identify components
   - Detect technical challenges
   - Estimate time requirements

2. **Subtask Generation**
   - Create 3-7 subtasks typically
   - Each subtask 1-4 hours
   - Logical implementation order
   - Clear acceptance criteria

3. **Smart Breakdown**
   - Setup/configuration tasks
   - Core implementation
   - Testing components
   - Integration steps
   - Documentation updates

## Enhanced Features

Based on task type:
- **Feature**: Setup â†’ Implement â†’ Test â†’ Integrate
- **Bug Fix**: Reproduce â†’ Diagnose â†’ Fix â†’ Verify
- **Refactor**: Analyze â†’ Plan â†’ Refactor â†’ Validate

## Post-Expansion

After expansion:
1. Show subtask hierarchy
2. Update time estimates
3. Suggest implementation order
4. Highlight critical path
</file>

<file path=".claude/commands/tm/fix-dependencies/fix-dependencies.md">
Automatically fix dependency issues found during validation.

## Automatic Dependency Repair

Intelligently fixes common dependency problems while preserving project logic.

## Execution

```bash
task-master fix-dependencies
```

## What Gets Fixed

### 1. **Auto-Fixable Issues**
- Remove references to deleted tasks
- Break simple circular dependencies
- Remove self-dependencies
- Clean up duplicate dependencies

### 2. **Smart Resolutions**
- Reorder dependencies to maintain logic
- Suggest task merging for over-dependent tasks
- Flatten unnecessary dependency chains
- Remove redundant transitive dependencies

### 3. **Manual Review Required**
- Complex circular dependencies
- Critical path modifications
- Business logic dependencies
- High-impact changes

## Fix Process

1. **Analysis Phase**
   - Run validation check
   - Categorize issues by type
   - Determine fix strategy

2. **Execution Phase**
   - Apply automatic fixes
   - Log all changes made
   - Preserve task relationships

3. **Verification Phase**
   - Re-validate after fixes
   - Show before/after comparison
   - Highlight manual fixes needed

## Smart Features

- Preserves intended task flow
- Minimal disruption approach
- Creates fix history/log
- Suggests manual interventions

## Output Example

```
Dependency Auto-Fix Report
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Fixed Automatically:
âœ… Removed 2 references to deleted tasks
âœ… Resolved 1 self-dependency
âœ… Cleaned 3 redundant dependencies

Manual Review Needed:
âš ï¸ Complex circular dependency: #12 â†’ #15 â†’ #18 â†’ #12
  Suggestion: Make #15 not depend on #12
âš ï¸ Task #45 has 8 dependencies
  Suggestion: Break into subtasks

Run '/project:tm/validate-dependencies' to verify fixes
```

## Safety

- Preview mode available
- Rollback capability
- Change logging
- No data loss
</file>

<file path=".claude/commands/tm/generate/generate-tasks.md">
Generate individual task files from tasks.json.

## Task File Generation

Creates separate markdown files for each task, perfect for AI agents or documentation.

## Execution

```bash
task-master generate
```

## What It Creates

For each task, generates a file like `task_001.txt`:

```
Task ID: 1
Title: Implement user authentication
Status: pending
Priority: high
Dependencies: []
Created: 2024-01-15
Complexity: 7

## Description
Create a secure user authentication system with login, logout, and session management.

## Details
- Use JWT tokens for session management
- Implement secure password hashing
- Add remember me functionality
- Include password reset flow

## Test Strategy
- Unit tests for auth functions
- Integration tests for login flow
- Security testing for vulnerabilities
- Performance tests for concurrent logins

## Subtasks
1.1 Setup authentication framework (pending)
1.2 Create login endpoints (pending)
1.3 Implement session management (pending)
1.4 Add password reset (pending)
```

## File Organization

Creates structure:
```
.taskmaster/
â””â”€â”€ tasks/
    â”œâ”€â”€ task_001.txt
    â”œâ”€â”€ task_002.txt
    â”œâ”€â”€ task_003.txt
    â””â”€â”€ ...
```

## Smart Features

1. **Consistent Formatting**
   - Standardized structure
   - Clear sections
   - AI-readable format
   - Markdown compatible

2. **Contextual Information**
   - Full task details
   - Related task references
   - Progress indicators
   - Implementation notes

3. **Incremental Updates**
   - Only regenerate changed tasks
   - Preserve custom additions
   - Track generation timestamp
   - Version control friendly

## Use Cases

- **AI Context**: Provide task context to AI assistants
- **Documentation**: Standalone task documentation
- **Archival**: Task history preservation
- **Sharing**: Send specific tasks to team members
- **Review**: Easier task review process

## Generation Options

Based on arguments:
- Filter by status
- Include/exclude completed
- Custom templates
- Different formats

## Post-Generation

```
Task File Generation Complete
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Generated: 45 task files
Location: .taskmaster/tasks/
Total size: 156 KB

New files: 5
Updated files: 12
Unchanged: 28

Ready for:
- AI agent consumption
- Version control
- Team distribution
```

## Integration Benefits

- Git-trackable task history
- Easy task sharing
- AI tool compatibility
- Offline task access
- Backup redundancy
</file>

<file path=".claude/commands/tm/init/init-project-quick.md">
Quick initialization with auto-confirmation.

Arguments: $ARGUMENTS

Initialize a Task Master project without prompts, accepting all defaults.

## Quick Setup

```bash
task-master init -y
```

## What It Does

1. Creates `.taskmaster/` directory structure
2. Initializes empty `tasks.json`
3. Sets up default configuration
4. Uses directory name as project name
5. Skips all confirmation prompts

## Smart Defaults

- Project name: Current directory name
- Description: "Task Master Project"
- Model config: Existing environment vars
- Task structure: Standard format

## Next Steps

After quick init:
1. Configure AI models if needed:
   ```
   /project:tm/models/setup
   ```

2. Parse PRD if available:
   ```
   /project:tm/parse-prd <file>
   ```

3. Or create first task:
   ```
   /project:tm/add-task create initial setup
   ```

Perfect for rapid project setup!
</file>

<file path=".claude/commands/tm/init/init-project.md">
Initialize a new Task Master project.

Arguments: $ARGUMENTS

Parse arguments to determine initialization preferences.

## Initialization Process

1. **Parse Arguments**
   - PRD file path (if provided)
   - Project name
   - Auto-confirm flag (-y)

2. **Project Setup**
   ```bash
   task-master init
   ```

3. **Smart Initialization**
   - Detect existing project files
   - Suggest project name from directory
   - Check for git repository
   - Verify AI provider configuration

## Configuration Options

Based on arguments:
- `quick` / `-y` â†’ Skip confirmations
- `<file.md>` â†’ Use as PRD after init
- `--name=<name>` â†’ Set project name
- `--description=<desc>` â†’ Set description

## Post-Initialization

After successful init:
1. Show project structure created
2. Verify AI models configured
3. Suggest next steps:
   - Parse PRD if available
   - Configure AI providers
   - Set up git hooks
   - Create first tasks

## Integration

If PRD file provided:
```
/project:tm/init my-prd.md
â†’ Automatically runs parse-prd after init
```
</file>

<file path=".claude/commands/tm/list/list-tasks-by-status.md">
List tasks filtered by a specific status.

Arguments: $ARGUMENTS

Parse the status from arguments and list only tasks matching that status.

## Status Options
- `pending` - Not yet started
- `in-progress` - Currently being worked on
- `done` - Completed
- `review` - Awaiting review
- `deferred` - Postponed
- `cancelled` - Cancelled

## Execution

Based on $ARGUMENTS, run:
```bash
task-master list --status=$ARGUMENTS
```

## Enhanced Display

For the filtered results:
- Group by priority within the status
- Show time in current status
- Highlight tasks approaching deadlines
- Display blockers and dependencies
- Suggest next actions for each status group

## Intelligent Insights

Based on the status filter:
- **Pending**: Show recommended start order
- **In-Progress**: Display idle time warnings
- **Done**: Show newly unblocked tasks
- **Review**: Indicate review duration
- **Deferred**: Show reactivation criteria
- **Cancelled**: Display impact analysis
</file>

<file path=".claude/commands/tm/list/list-tasks-with-subtasks.md">
List all tasks including their subtasks in a hierarchical view.

This command shows all tasks with their nested subtasks, providing a complete project overview.

## Execution

Run the Task Master list command with subtasks flag:
```bash
task-master list --with-subtasks
```

## Enhanced Display

I'll organize the output to show:
- Parent tasks with clear indicators
- Nested subtasks with proper indentation
- Status badges for quick scanning
- Dependencies and blockers highlighted
- Progress indicators for tasks with subtasks

## Smart Filtering

Based on the task hierarchy:
- Show completion percentage for parent tasks
- Highlight blocked subtask chains
- Group by functional areas
- Indicate critical path items

This gives you a complete tree view of your project structure.
</file>

<file path=".claude/commands/tm/list/list-tasks.md">
List tasks with intelligent argument parsing.

Parse arguments to determine filters and display options:
- Status: pending, in-progress, done, review, deferred, cancelled
- Priority: high, medium, low (or priority:high)
- Special: subtasks, tree, dependencies, blocked
- IDs: Direct numbers (e.g., "1,3,5" or "1-5")
- Complex: "pending high" = pending AND high priority

Arguments: $ARGUMENTS

Let me parse your request intelligently:

1. **Detect Filter Intent**
   - If arguments contain status keywords â†’ filter by status
   - If arguments contain priority â†’ filter by priority
   - If arguments contain "subtasks" â†’ include subtasks
   - If arguments contain "tree" â†’ hierarchical view
   - If arguments contain numbers â†’ show specific tasks
   - If arguments contain "blocked" â†’ show blocked tasks only

2. **Smart Combinations**
   Examples of what I understand:
   - "pending high" â†’ pending tasks with high priority
   - "done today" â†’ tasks completed today
   - "blocked" â†’ tasks with unmet dependencies
   - "1-5" â†’ tasks 1 through 5
   - "subtasks tree" â†’ hierarchical view with subtasks

3. **Execute Appropriate Query**
   Based on parsed intent, run the most specific task-master command

4. **Enhanced Display**
   - Group by relevant criteria
   - Show most important information first
   - Use visual indicators for quick scanning
   - Include relevant metrics

5. **Intelligent Suggestions**
   Based on what you're viewing, suggest next actions:
   - Many pending? â†’ Suggest priority order
   - Many blocked? â†’ Show dependency resolution
   - Looking at specific tasks? â†’ Show related tasks
</file>

<file path=".claude/commands/tm/models/setup-models.md">
Run interactive setup to configure AI models.

## Interactive Model Configuration

Guides you through setting up AI providers for Task Master.

## Execution

```bash
task-master models --setup
```

## Setup Process

1. **Environment Check**
   - Detect existing API keys
   - Show current configuration
   - Identify missing providers

2. **Provider Selection**
   - Choose main provider (required)
   - Select research provider (recommended)
   - Configure fallback (optional)

3. **API Key Configuration**
   - Prompt for missing keys
   - Validate key format
   - Test connectivity
   - Save configuration

## Smart Recommendations

Based on your needs:
- **For best results**: Claude + Perplexity
- **Budget conscious**: GPT-3.5 + Perplexity
- **Maximum capability**: GPT-4 + Perplexity + Claude fallback

## Configuration Storage

Keys can be stored in:
1. Environment variables (recommended)
2. `.env` file in project
3. Global `.taskmaster/config`

## Post-Setup

After configuration:
- Test each provider
- Show usage examples
- Suggest next steps
- Verify parse-prd works
</file>

<file path=".claude/commands/tm/models/view-models.md">
View current AI model configuration.

## Model Configuration Display

Shows the currently configured AI providers and models for Task Master.

## Execution

```bash
task-master models
```

## Information Displayed

1. **Main Provider**
   - Model ID and name
   - API key status (configured/missing)
   - Usage: Primary task generation

2. **Research Provider**
   - Model ID and name  
   - API key status
   - Usage: Enhanced research mode

3. **Fallback Provider**
   - Model ID and name
   - API key status
   - Usage: Backup when main fails

## Visual Status

```
Task Master AI Model Configuration
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Main:     âœ… claude-3-5-sonnet (configured)
Research: âœ… perplexity-sonar (configured)  
Fallback: âš ï¸  Not configured (optional)

Available Models:
- claude-3-5-sonnet
- gpt-4-turbo
- gpt-3.5-turbo
- perplexity-sonar
```

## Next Actions

Based on configuration:
- If missing API keys â†’ Suggest setup
- If no research model â†’ Explain benefits
- If all configured â†’ Show usage tips
</file>

<file path=".claude/commands/tm/next/next-task.md">
Intelligently determine and prepare the next action based on comprehensive context.

This enhanced version of 'next' considers:
- Current task states
- Recent activity
- Time constraints
- Dependencies
- Your working patterns

Arguments: $ARGUMENTS

## Intelligent Next Action

### 1. **Context Gathering**
Let me analyze the current situation:
- Active tasks (in-progress)
- Recently completed tasks
- Blocked tasks
- Time since last activity
- Arguments provided: $ARGUMENTS

### 2. **Smart Decision Tree**

**If you have an in-progress task:**
- Has it been idle > 2 hours? â†’ Suggest resuming or switching
- Near completion? â†’ Show remaining steps
- Blocked? â†’ Find alternative task

**If no in-progress tasks:**
- Unblocked high-priority tasks? â†’ Start highest
- Complex tasks need breakdown? â†’ Suggest expansion
- All tasks blocked? â†’ Show dependency resolution

**Special arguments handling:**
- "quick" â†’ Find task < 2 hours
- "easy" â†’ Find low complexity task
- "important" â†’ Find high priority regardless of complexity
- "continue" â†’ Resume last worked task

### 3. **Preparation Workflow**

Based on selected task:
1. Show full context and history
2. Set up development environment
3. Run relevant tests
4. Open related files
5. Show similar completed tasks
6. Estimate completion time

### 4. **Alternative Suggestions**

Always provide options:
- Primary recommendation
- Quick alternative (< 1 hour)
- Strategic option (unblocks most tasks)
- Learning option (new technology/skill)

### 5. **Workflow Integration**

Seamlessly connect to:
- `/project:task-master:start [selected]` 
- `/project:workflows:auto-implement`
- `/project:task-master:expand` (if complex)
- `/project:utils:complexity-report` (if unsure)

The goal: Zero friction from decision to implementation.
</file>

<file path=".claude/commands/tm/parse-prd/parse-prd-with-research.md">
Parse PRD with enhanced research mode for better task generation.

Arguments: $ARGUMENTS (PRD file path)

## Research-Enhanced Parsing

Uses the research AI provider (typically Perplexity) for more comprehensive task generation with current best practices.

## Execution

```bash
task-master parse-prd --input=$ARGUMENTS --research
```

## Research Benefits

1. **Current Best Practices**
   - Latest framework patterns
   - Security considerations
   - Performance optimizations
   - Accessibility requirements

2. **Technical Deep Dive**
   - Implementation approaches
   - Library recommendations
   - Architecture patterns
   - Testing strategies

3. **Comprehensive Coverage**
   - Edge cases consideration
   - Error handling tasks
   - Monitoring setup
   - Deployment tasks

## Enhanced Output

Research mode typically:
- Generates more detailed tasks
- Includes industry standards
- Adds compliance considerations
- Suggests modern tooling

## When to Use

- New technology domains
- Complex requirements
- Regulatory compliance needed
- Best practices crucial
</file>

<file path=".claude/commands/tm/parse-prd/parse-prd.md">
Parse a PRD document to generate tasks.

Arguments: $ARGUMENTS (PRD file path)

## Intelligent PRD Parsing

Analyzes your requirements document and generates a complete task breakdown.

## Execution

```bash
task-master parse-prd --input=$ARGUMENTS
```

## Parsing Process

1. **Document Analysis**
   - Extract key requirements
   - Identify technical components
   - Detect dependencies
   - Estimate complexity

2. **Task Generation**
   - Create 10-15 tasks by default
   - Include implementation tasks
   - Add testing tasks
   - Include documentation tasks
   - Set logical dependencies

3. **Smart Enhancements**
   - Group related functionality
   - Set appropriate priorities
   - Add acceptance criteria
   - Include test strategies

## Options

Parse arguments for modifiers:
- Number after filename â†’ `--num-tasks`
- `research` â†’ Use research mode
- `comprehensive` â†’ Generate more tasks

## Post-Generation

After parsing:
1. Display task summary
2. Show dependency graph
3. Suggest task expansion for complex items
4. Recommend sprint planning
</file>

<file path=".claude/commands/tm/remove-dependency/remove-dependency.md">
Remove a dependency between tasks.

Arguments: $ARGUMENTS

Parse the task IDs to remove dependency relationship.

## Removing Dependencies

Removes a dependency relationship, potentially unblocking tasks.

## Argument Parsing

Parse natural language or IDs:
- "remove dependency between 5 and 3"
- "5 no longer needs 3"
- "unblock 5 from 3"
- "5 3" â†’ remove dependency of 5 on 3

## Execution

```bash
task-master remove-dependency --id=<task-id> --depends-on=<dependency-id>
```

## Pre-Removal Checks

1. **Verify dependency exists**
2. **Check impact on task flow**
3. **Warn if it breaks logical sequence**
4. **Show what will be unblocked**

## Smart Analysis

Before removing:
- Show why dependency might have existed
- Check if removal makes tasks executable
- Verify no critical path disruption
- Suggest alternative dependencies

## Post-Removal

After removing:
1. Show updated task status
2. List newly unblocked tasks
3. Update project timeline
4. Suggest next actions

## Safety Features

- Confirm if removing critical dependency
- Show tasks that become immediately actionable
- Warn about potential issues
- Keep removal history

## Example

```
/project:tm/remove-dependency 5 from 3
â†’ Removed: Task #5 no longer depends on #3
â†’ Task #5 is now UNBLOCKED and ready to start
â†’ Warning: Consider if #5 still needs #2 completed first
```
</file>

<file path=".claude/commands/tm/remove-subtask/remove-subtask.md">
Remove a subtask from its parent task.

Arguments: $ARGUMENTS

Parse subtask ID to remove, with option to convert to standalone task.

## Removing Subtasks

Remove a subtask and optionally convert it back to a standalone task.

## Argument Parsing

- "remove subtask 5.1"
- "delete 5.1"
- "convert 5.1 to task" â†’ remove and convert
- "5.1 standalone" â†’ convert to standalone

## Execution Options

### 1. Delete Subtask
```bash
task-master remove-subtask --id=<parentId.subtaskId>
```

### 2. Convert to Standalone
```bash
task-master remove-subtask --id=<parentId.subtaskId> --convert
```

## Pre-Removal Checks

1. **Validate Subtask**
   - Verify subtask exists
   - Check completion status
   - Review dependencies

2. **Impact Analysis**
   - Other subtasks that depend on it
   - Parent task implications
   - Data that will be lost

## Removal Process

### For Deletion:
1. Confirm if subtask has work done
2. Update parent task estimates
3. Remove subtask and its data
4. Clean up dependencies

### For Conversion:
1. Assign new standalone task ID
2. Preserve all task data
3. Update dependency references
4. Maintain task history

## Smart Features

- Warn if subtask is in-progress
- Show impact on parent task
- Preserve important data
- Update related estimates

## Example Flows

```
/project:tm/remove-subtask 5.1
â†’ Warning: Subtask #5.1 is in-progress
â†’ This will delete all subtask data
â†’ Parent task #5 will be updated
Confirm deletion? (y/n)

/project:tm/remove-subtask 5.1 convert
â†’ Converting subtask #5.1 to standalone task #89
â†’ Preserved: All task data and history
â†’ Updated: 2 dependency references
â†’ New task #89 is now independent
```

## Post-Removal

- Update parent task status
- Recalculate estimates
- Show updated hierarchy
- Suggest next actions
</file>

<file path=".claude/commands/tm/remove-task/remove-task.md">
Remove a task permanently from the project.

Arguments: $ARGUMENTS (task ID)

Delete a task and handle all its relationships properly.

## Task Removal

Permanently removes a task while maintaining project integrity.

## Argument Parsing

- "remove task 5"
- "delete 5"
- "5" â†’ remove task 5
- Can include "-y" for auto-confirm

## Execution

```bash
task-master remove-task --id=<id> [-y]
```

## Pre-Removal Analysis

1. **Task Details**
   - Current status
   - Work completed
   - Time invested
   - Associated data

2. **Relationship Check**
   - Tasks that depend on this
   - Dependencies this task has
   - Subtasks that will be removed
   - Blocking implications

3. **Impact Assessment**
   ```
   Task Removal Impact
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   Task: #5 "Implement authentication" (in-progress)
   Status: 60% complete (~8 hours work)
   
   Will affect:
   - 3 tasks depend on this (will be blocked)
   - Has 4 subtasks (will be deleted)
   - Part of critical path
   
   âš ï¸  This action cannot be undone
   ```

## Smart Warnings

- Warn if task is in-progress
- Show dependent tasks that will be blocked
- Highlight if part of critical path
- Note any completed work being lost

## Removal Process

1. Show comprehensive impact
2. Require confirmation (unless -y)
3. Update dependent task references
4. Remove task and subtasks
5. Clean up orphaned dependencies
6. Log removal with timestamp

## Alternative Actions

Suggest before deletion:
- Mark as cancelled instead
- Convert to documentation
- Archive task data
- Transfer work to another task

## Post-Removal

- List affected tasks
- Show broken dependencies
- Update project statistics
- Suggest dependency fixes
- Recalculate timeline

## Example Flows

```
/project:tm/remove-task 5
â†’ Task #5 is in-progress with 8 hours logged
â†’ 3 other tasks depend on this
â†’ Suggestion: Mark as cancelled instead?
Remove anyway? (y/n)

/project:tm/remove-task 5 -y
â†’ Removed: Task #5 and 4 subtasks
â†’ Updated: 3 task dependencies
â†’ Warning: Tasks #7, #8, #9 now have missing dependency
â†’ Run /project:tm/fix-dependencies to resolve
```

## Safety Features

- Confirmation required
- Impact preview
- Removal logging
- Suggest alternatives
- No cascade delete of dependents
</file>

<file path=".claude/commands/tm/set-status/to-cancelled.md">
Cancel a task permanently.

Arguments: $ARGUMENTS (task ID)

## Cancelling a Task

This status indicates a task is no longer needed and won't be completed.

## Valid Reasons for Cancellation

- Requirements changed
- Feature deprecated
- Duplicate of another task
- Strategic pivot
- Technical approach invalidated

## Pre-Cancellation Checks

1. Confirm no critical dependencies
2. Check for partial implementation
3. Verify cancellation rationale
4. Document lessons learned

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=cancelled
```

## Cancellation Impact

When cancelling:
1. **Dependency Updates**
   - Notify dependent tasks
   - Update project scope
   - Recalculate timelines

2. **Clean-up Actions**
   - Remove related branches
   - Archive any work done
   - Update documentation
   - Close related issues

3. **Learning Capture**
   - Document why cancelled
   - Note what was learned
   - Update estimation models
   - Prevent future duplicates

## Historical Preservation

- Keep for reference
- Tag with cancellation reason
- Link to replacement if any
- Maintain audit trail
</file>

<file path=".claude/commands/tm/set-status/to-deferred.md">
Defer a task for later consideration.

Arguments: $ARGUMENTS (task ID)

## Deferring a Task

This status indicates a task is valid but not currently actionable or prioritized.

## Valid Reasons for Deferral

- Waiting for external dependencies
- Reprioritized for future sprint
- Blocked by technical limitations
- Resource constraints
- Strategic timing considerations

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=deferred
```

## Deferral Management

When deferring:
1. **Document Reason**
   - Capture why it's being deferred
   - Set reactivation criteria
   - Note any partial work completed

2. **Impact Analysis**
   - Check dependent tasks
   - Update project timeline
   - Notify affected stakeholders

3. **Future Planning**
   - Set review reminders
   - Tag for specific milestone
   - Preserve context for reactivation
   - Link to blocking issues

## Smart Tracking

- Monitor deferral duration
- Alert when criteria met
- Prevent scope creep
- Regular review cycles
</file>

<file path=".claude/commands/tm/set-status/to-done.md">
Mark a task as completed.

Arguments: $ARGUMENTS (task ID)

## Completing a Task

This command validates task completion and updates project state intelligently.

## Pre-Completion Checks

1. Verify test strategy was followed
2. Check if all subtasks are complete
3. Validate acceptance criteria met
4. Ensure code is committed

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=done
```

## Post-Completion Actions

1. **Update Dependencies**
   - Identify newly unblocked tasks
   - Update sprint progress
   - Recalculate project timeline

2. **Documentation**
   - Generate completion summary
   - Update CLAUDE.md with learnings
   - Log implementation approach

3. **Next Steps**
   - Show newly available tasks
   - Suggest logical next task
   - Update velocity metrics

## Celebration & Learning

- Show impact of completion
- Display unblocked work
- Recognize achievement
- Capture lessons learned
</file>

<file path=".claude/commands/tm/set-status/to-in-progress.md">
Start working on a task by setting its status to in-progress.

Arguments: $ARGUMENTS (task ID)

## Starting Work on Task

This command does more than just change status - it prepares your environment for productive work.

## Pre-Start Checks

1. Verify dependencies are met
2. Check if another task is already in-progress
3. Ensure task details are complete
4. Validate test strategy exists

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=in-progress
```

## Environment Setup

After setting to in-progress:
1. Create/checkout appropriate git branch
2. Open relevant documentation
3. Set up test watchers if applicable
4. Display task details and acceptance criteria
5. Show similar completed tasks for reference

## Smart Suggestions

- Estimated completion time based on complexity
- Related files from similar tasks
- Potential blockers to watch for
- Recommended first steps
</file>

<file path=".claude/commands/tm/set-status/to-pending.md">
Set a task's status to pending.

Arguments: $ARGUMENTS (task ID)

## Setting Task to Pending

This moves a task back to the pending state, useful for:
- Resetting erroneously started tasks
- Deferring work that was prematurely begun
- Reorganizing sprint priorities

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=pending
```

## Validation

Before setting to pending:
- Warn if task is currently in-progress
- Check if this will block other tasks
- Suggest documenting why it's being reset
- Preserve any work already done

## Smart Actions

After setting to pending:
- Update sprint planning if needed
- Notify about freed resources
- Suggest priority reassessment
- Log the status change with context
</file>

<file path=".claude/commands/tm/set-status/to-review.md">
Set a task's status to review.

Arguments: $ARGUMENTS (task ID)

## Marking Task for Review

This status indicates work is complete but needs verification before final approval.

## When to Use Review Status

- Code complete but needs peer review
- Implementation done but needs testing
- Documentation written but needs proofreading
- Design complete but needs stakeholder approval

## Execution

```bash
task-master set-status --id=$ARGUMENTS --status=review
```

## Review Preparation

When setting to review:
1. **Generate Review Checklist**
   - Link to PR/MR if applicable
   - Highlight key changes
   - Note areas needing attention
   - Include test results

2. **Documentation**
   - Update task with review notes
   - Link relevant artifacts
   - Specify reviewers if known

3. **Smart Actions**
   - Create review reminders
   - Track review duration
   - Suggest reviewers based on expertise
   - Prepare rollback plan if needed
</file>

<file path=".claude/commands/tm/setup/install-taskmaster.md">
Check if Task Master is installed and install it if needed.

This command helps you get Task Master set up globally on your system.

## Detection and Installation Process

1. **Check Current Installation**
   ```bash
   # Check if task-master command exists
   which task-master || echo "Task Master not found"
   
   # Check npm global packages
   npm list -g task-master-ai
   ```

2. **System Requirements Check**
   ```bash
   # Verify Node.js is installed
   node --version
   
   # Verify npm is installed  
   npm --version
   
   # Check Node version (need 16+)
   ```

3. **Install Task Master Globally**
   If not installed, run:
   ```bash
   npm install -g task-master-ai
   ```

4. **Verify Installation**
   ```bash
   # Check version
   task-master --version
   
   # Verify command is available
   which task-master
   ```

5. **Initial Setup**
   ```bash
   # Initialize in current directory
   task-master init
   ```

6. **Configure AI Provider**
   Ensure you have at least one AI provider API key set:
   ```bash
   # Check current configuration
   task-master models --status
   
   # If no API keys found, guide setup
   echo "You'll need at least one API key:"
   echo "- ANTHROPIC_API_KEY for Claude"
   echo "- OPENAI_API_KEY for GPT models"
   echo "- PERPLEXITY_API_KEY for research"
   echo ""
   echo "Set them in your shell profile or .env file"
   ```

7. **Quick Test**
   ```bash
   # Create a test PRD
   echo "Build a simple hello world API" > test-prd.txt
   
   # Try parsing it
   task-master parse-prd test-prd.txt -n 3
   ```

## Troubleshooting

If installation fails:

**Permission Errors:**
```bash
# Try with sudo (macOS/Linux)
sudo npm install -g task-master-ai

# Or fix npm permissions
npm config set prefix ~/.npm-global
export PATH=~/.npm-global/bin:$PATH
```

**Network Issues:**
```bash
# Use different registry
npm install -g task-master-ai --registry https://registry.npmjs.org/
```

**Node Version Issues:**
```bash
# Install Node 18+ via nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install 18
nvm use 18
```

## Success Confirmation

Once installed, you should see:
```
âœ… Task Master v0.16.2 (or higher) installed
âœ… Command 'task-master' available globally
âœ… AI provider configured
âœ… Ready to use slash commands!

Try: /project:task-master:init your-prd.md
```

## Next Steps

After installation:
1. Run `/project:utils:check-health` to verify setup
2. Configure AI providers with `/project:task-master:models`
3. Start using Task Master commands!
</file>

<file path=".claude/commands/tm/setup/quick-install-taskmaster.md">
Quick install Task Master globally if not already installed.

Execute this streamlined installation:

```bash
# Check and install in one command
task-master --version 2>/dev/null || npm install -g task-master-ai

# Verify installation
task-master --version

# Quick setup check
task-master models --status || echo "Note: You'll need to set up an AI provider API key"
```

If you see "command not found" after installation, you may need to:
1. Restart your terminal
2. Or add npm global bin to PATH: `export PATH=$(npm bin -g):$PATH`

Once installed, you can use all the Task Master commands!

Quick test: Run `/project:help` to see all available commands.
</file>

<file path=".claude/commands/tm/show/show-task.md">
Show detailed task information with rich context and insights.

Arguments: $ARGUMENTS

## Enhanced Task Display

Parse arguments to determine what to show and how.

### 1. **Smart Task Selection**

Based on $ARGUMENTS:
- Number â†’ Show specific task with full context
- "current" â†’ Show active in-progress task(s)
- "next" â†’ Show recommended next task
- "blocked" â†’ Show all blocked tasks with reasons
- "critical" â†’ Show critical path tasks
- Multiple IDs â†’ Comparative view

### 2. **Contextual Information**

For each task, intelligently include:

**Core Details**
- Full task information (id, title, description, details)
- Current status with history
- Test strategy and acceptance criteria
- Priority and complexity analysis

**Relationships**
- Dependencies (what it needs)
- Dependents (what needs it)
- Parent/subtask hierarchy
- Related tasks (similar work)

**Time Intelligence**
- Created/updated timestamps
- Time in current status
- Estimated vs actual time
- Historical completion patterns

### 3. **Visual Enhancements**

```
ğŸ“‹ Task #45: Implement User Authentication
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Status: ğŸŸ¡ in-progress (2 hours)
Priority: ğŸ”´ High | Complexity: 73/100

Dependencies: âœ… #41, âœ… #42, â³ #43 (blocked)
Blocks: #46, #47, #52

Progress: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80% complete

Recent Activity:
- 2h ago: Status changed to in-progress
- 4h ago: Dependency #42 completed
- Yesterday: Task expanded with 3 subtasks
```

### 4. **Intelligent Insights**

Based on task analysis:
- **Risk Assessment**: Complexity vs time remaining
- **Bottleneck Analysis**: Is this blocking critical work?
- **Recommendation**: Suggested approach or concerns
- **Similar Tasks**: How others completed similar work

### 5. **Action Suggestions**

Context-aware next steps:
- If blocked â†’ Show how to unblock
- If complex â†’ Suggest expansion
- If in-progress â†’ Show completion checklist
- If done â†’ Show dependent tasks ready to start

### 6. **Multi-Task View**

When showing multiple tasks:
- Common dependencies
- Optimal completion order
- Parallel work opportunities
- Combined complexity analysis
</file>

<file path=".claude/commands/tm/status/project-status.md">
Enhanced status command with comprehensive project insights.

Arguments: $ARGUMENTS

## Intelligent Status Overview

### 1. **Executive Summary**
Quick dashboard view:
- ğŸƒ Active work (in-progress tasks)
- ğŸ“Š Progress metrics (% complete, velocity)
- ğŸš§ Blockers and risks
- â±ï¸ Time analysis (estimated vs actual)
- ğŸ¯ Sprint/milestone progress

### 2. **Contextual Analysis**

Based on $ARGUMENTS, focus on:
- "sprint" â†’ Current sprint progress and burndown
- "blocked" â†’ Dependency chains and resolution paths
- "team" â†’ Task distribution and workload
- "timeline" â†’ Schedule adherence and projections
- "risk" â†’ High complexity or overdue items

### 3. **Smart Insights**

**Workflow Health:**
- Idle tasks (in-progress > 24h without updates)
- Bottlenecks (multiple tasks waiting on same dependency)
- Quick wins (low complexity, high impact)

**Predictive Analytics:**
- Completion projections based on velocity
- Risk of missing deadlines
- Recommended task order for optimal flow

### 4. **Visual Intelligence**

Dynamic visualization based on data:
```
Sprint Progress: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80% (16/20 tasks)
Velocity Trend: â†—ï¸ +15% this week
Blocked Tasks:  ğŸ”´ 3 critical path items

Priority Distribution:
High:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 8 tasks (2 blocked)
Medium: â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 4 tasks
Low:    â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ 2 tasks
```

### 5. **Actionable Recommendations**

Based on analysis:
1. **Immediate actions** (unblock critical path)
2. **Today's focus** (optimal task sequence)
3. **Process improvements** (recurring patterns)
4. **Resource needs** (skills, time, dependencies)

### 6. **Historical Context**

Compare to previous periods:
- Velocity changes
- Pattern recognition
- Improvement areas
- Success patterns to repeat
</file>

<file path=".claude/commands/tm/sync-readme/sync-readme.md">
Export tasks to README.md with professional formatting.

Arguments: $ARGUMENTS

Generate a well-formatted README with current task information.

## README Synchronization

Creates or updates README.md with beautifully formatted task information.

## Argument Parsing

Optional filters:
- "pending" â†’ Only pending tasks
- "with-subtasks" â†’ Include subtask details
- "by-priority" â†’ Group by priority
- "sprint" â†’ Current sprint only

## Execution

```bash
task-master sync-readme [--with-subtasks] [--status=<status>]
```

## README Generation

### 1. **Project Header**
```markdown
# Project Name

## ğŸ“‹ Task Progress

Last Updated: 2024-01-15 10:30 AM

### Summary
- Total Tasks: 45
- Completed: 15 (33%)
- In Progress: 5 (11%)
- Pending: 25 (56%)
```

### 2. **Task Sections**
Organized by status or priority:
- Progress indicators
- Task descriptions
- Dependencies noted
- Time estimates

### 3. **Visual Elements**
- Progress bars
- Status badges
- Priority indicators
- Completion checkmarks

## Smart Features

1. **Intelligent Grouping**
   - By feature area
   - By sprint/milestone
   - By assigned developer
   - By priority

2. **Progress Tracking**
   - Overall completion
   - Sprint velocity
   - Burndown indication
   - Time tracking

3. **Formatting Options**
   - GitHub-flavored markdown
   - Task checkboxes
   - Collapsible sections
   - Table format available

## Example Output

```markdown
## ğŸš€ Current Sprint

### In Progress
- [ ] ğŸ”„ #5 **Implement user authentication** (60% complete)
  - Dependencies: API design (#3 âœ…)
  - Subtasks: 4 (2 completed)
  - Est: 8h / Spent: 5h

### Pending (High Priority)
- [ ] âš¡ #8 **Create dashboard UI**
  - Blocked by: #5
  - Complexity: High
  - Est: 12h
```

## Customization

Based on arguments:
- Include/exclude sections
- Detail level control
- Custom grouping
- Filter by criteria

## Post-Sync

After generation:
1. Show diff preview
2. Backup existing README
3. Write new content
4. Commit reminder
5. Update timestamp

## Integration

Works well with:
- Git workflows
- CI/CD pipelines
- Project documentation
- Team updates
- Client reports
</file>

<file path=".claude/commands/tm/update/update-single-task.md">
Update a single specific task with new information.

Arguments: $ARGUMENTS

Parse task ID and update details.

## Single Task Update

Precisely update one task with AI assistance to maintain consistency.

## Argument Parsing

Natural language updates:
- "5: add caching requirement"
- "update 5 to include error handling"
- "task 5 needs rate limiting"
- "5 change priority to high"

## Execution

```bash
task-master update-task --id=<id> --prompt="<context>"
```

## Update Types

### 1. **Content Updates**
- Enhance description
- Add requirements
- Clarify details
- Update acceptance criteria

### 2. **Metadata Updates**
- Change priority
- Adjust time estimates
- Update complexity
- Modify dependencies

### 3. **Strategic Updates**
- Revise approach
- Change test strategy
- Update implementation notes
- Adjust subtask needs

## AI-Powered Updates

The AI:
1. **Understands Context**
   - Reads current task state
   - Identifies update intent
   - Maintains consistency
   - Preserves important info

2. **Applies Changes**
   - Updates relevant fields
   - Keeps style consistent
   - Adds without removing
   - Enhances clarity

3. **Validates Results**
   - Checks coherence
   - Verifies completeness
   - Maintains relationships
   - Suggests related updates

## Example Updates

```
/project:tm/update/single 5: add rate limiting
â†’ Updating Task #5: "Implement API endpoints"

Current: Basic CRUD endpoints
Adding: Rate limiting requirements

Updated sections:
âœ“ Description: Added rate limiting mention
âœ“ Details: Added specific limits (100/min)
âœ“ Test Strategy: Added rate limit tests
âœ“ Complexity: Increased from 5 to 6
âœ“ Time Estimate: Increased by 2 hours

Suggestion: Also update task #6 (API Gateway) for consistency?
```

## Smart Features

1. **Incremental Updates**
   - Adds without overwriting
   - Preserves work history
   - Tracks what changed
   - Shows diff view

2. **Consistency Checks**
   - Related task alignment
   - Subtask compatibility
   - Dependency validity
   - Timeline impact

3. **Update History**
   - Timestamp changes
   - Track who/what updated
   - Reason for update
   - Previous versions

## Field-Specific Updates

Quick syntax for specific fields:
- "5 priority:high" â†’ Update priority only
- "5 add-time:4h" â†’ Add to time estimate
- "5 status:review" â†’ Change status
- "5 depends:3,4" â†’ Add dependencies

## Post-Update

- Show updated task
- Highlight changes
- Check related tasks
- Update suggestions
- Timeline adjustments
</file>

<file path=".claude/commands/tm/update/update-task.md">
Update tasks with intelligent field detection and bulk operations.

Arguments: $ARGUMENTS

## Intelligent Task Updates

Parse arguments to determine update intent and execute smartly.

### 1. **Natural Language Processing**

Understand update requests like:
- "mark 23 as done" â†’ Update status to done
- "increase priority of 45" â†’ Set priority to high
- "add dependency on 12 to task 34" â†’ Add dependency
- "tasks 20-25 need review" â†’ Bulk status update
- "all API tasks high priority" â†’ Pattern-based update

### 2. **Smart Field Detection**

Automatically detect what to update:
- Status keywords: done, complete, start, pause, review
- Priority changes: urgent, high, low, deprioritize
- Dependency updates: depends on, blocks, after
- Assignment: assign to, owner, responsible
- Time: estimate, spent, deadline

### 3. **Bulk Operations**

Support for multiple task updates:
```
Examples:
- "complete tasks 12, 15, 18"
- "all pending auth tasks to in-progress"
- "increase priority for tasks blocking 45"
- "defer all documentation tasks"
```

### 4. **Contextual Validation**

Before updating, check:
- Status transitions are valid
- Dependencies don't create cycles
- Priority changes make sense
- Bulk updates won't break project flow

Show preview:
```
Update Preview:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Tasks to update: #23, #24, #25
Change: status â†’ in-progress
Impact: Will unblock tasks #30, #31
Warning: Task #24 has unmet dependencies
```

### 5. **Smart Suggestions**

Based on update:
- Completing task? â†’ Show newly unblocked tasks
- Changing priority? â†’ Show impact on sprint
- Adding dependency? â†’ Check for conflicts
- Bulk update? â†’ Show summary of changes

### 6. **Workflow Integration**

After updates:
- Auto-update dependent task states
- Trigger status recalculation
- Update sprint/milestone progress
- Log changes with context

Result: Flexible, intelligent task updates with safety checks.
</file>

<file path=".claude/commands/tm/update/update-tasks-from-id.md">
Update multiple tasks starting from a specific ID.

Arguments: $ARGUMENTS

Parse starting task ID and update context.

## Bulk Task Updates

Update multiple related tasks based on new requirements or context changes.

## Argument Parsing

- "from 5: add security requirements"
- "5 onwards: update API endpoints"
- "starting at 5: change to use new framework"

## Execution

```bash
task-master update --from=<id> --prompt="<context>"
```

## Update Process

### 1. **Task Selection**
Starting from specified ID:
- Include the task itself
- Include all dependent tasks
- Include related subtasks
- Smart boundary detection

### 2. **Context Application**
AI analyzes the update context and:
- Identifies what needs changing
- Maintains consistency
- Preserves completed work
- Updates related information

### 3. **Intelligent Updates**
- Modify descriptions appropriately
- Update test strategies
- Adjust time estimates
- Revise dependencies if needed

## Smart Features

1. **Scope Detection**
   - Find natural task groupings
   - Identify related features
   - Stop at logical boundaries
   - Avoid over-updating

2. **Consistency Maintenance**
   - Keep naming conventions
   - Preserve relationships
   - Update cross-references
   - Maintain task flow

3. **Change Preview**
   ```
   Bulk Update Preview
   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   Starting from: Task #5
   Tasks to update: 8 tasks + 12 subtasks
   
   Context: "add security requirements"
   
   Changes will include:
   - Add security sections to descriptions
   - Update test strategies for security
   - Add security-related subtasks where needed
   - Adjust time estimates (+20% average)
   
   Continue? (y/n)
   ```

## Example Updates

```
/project:tm/update/from-id 5: change database to PostgreSQL
â†’ Analyzing impact starting from task #5
â†’ Found 6 related tasks to update
â†’ Updates will maintain consistency
â†’ Preview changes? (y/n)

Applied updates:
âœ“ Task #5: Updated connection logic references
âœ“ Task #6: Changed migration approach
âœ“ Task #7: Updated query syntax notes
âœ“ Task #8: Revised testing strategy
âœ“ Task #9: Updated deployment steps
âœ“ Task #12: Changed backup procedures
```

## Safety Features

- Preview all changes
- Selective confirmation
- Rollback capability
- Change logging
- Validation checks

## Post-Update

- Summary of changes
- Consistency verification
- Suggest review tasks
- Update timeline if needed
</file>

<file path=".claude/commands/tm/utils/analyze-project.md">
Advanced project analysis with actionable insights and recommendations.

Arguments: $ARGUMENTS

## Comprehensive Project Analysis

Multi-dimensional analysis based on requested focus area.

### 1. **Analysis Modes**

Based on $ARGUMENTS:
- "velocity" â†’ Sprint velocity and trends
- "quality" â†’ Code quality metrics
- "risk" â†’ Risk assessment and mitigation
- "dependencies" â†’ Dependency graph analysis
- "team" â†’ Workload and skill distribution
- "architecture" â†’ System design coherence
- Default â†’ Full spectrum analysis

### 2. **Velocity Analytics**

```
ğŸ“Š Velocity Analysis
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Current Sprint: 24 points/week â†—ï¸ +20%
Rolling Average: 20 points/week
Efficiency: 85% (17/20 tasks on time)

Bottlenecks Detected:
- Code review delays (avg 4h wait)
- Test environment availability
- Dependency on external team

Recommendations:
1. Implement parallel review process
2. Add staging environment
3. Mock external dependencies
```

### 3. **Risk Assessment**

**Technical Risks**
- High complexity tasks without backup assignee
- Single points of failure in architecture
- Insufficient test coverage in critical paths
- Technical debt accumulation rate

**Project Risks**
- Critical path dependencies
- Resource availability gaps
- Deadline feasibility analysis
- Scope creep indicators

### 4. **Dependency Intelligence**

Visual dependency analysis:
```
Critical Path: 
#12 â†’ #15 â†’ #23 â†’ #45 â†’ #50 (20 days)
         â†˜ #24 â†’ #46 â†—

Optimization: Parallelize #15 and #24
Time Saved: 3 days
```

### 5. **Quality Metrics**

**Code Quality**
- Test coverage trends
- Complexity scores
- Technical debt ratio
- Review feedback patterns

**Process Quality**
- Rework frequency
- Bug introduction rate
- Time to resolution
- Knowledge distribution

### 6. **Predictive Insights**

Based on patterns:
- Completion probability by deadline
- Resource needs projection
- Risk materialization likelihood
- Suggested interventions

### 7. **Executive Dashboard**

High-level summary with:
- Health score (0-100)
- Top 3 risks
- Top 3 opportunities
- Recommended actions
- Success probability

Result: Data-driven decisions with clear action paths.
</file>

<file path=".claude/commands/tm/validate-dependencies/validate-dependencies.md">
Validate all task dependencies for issues.

## Dependency Validation

Comprehensive check for dependency problems across the entire project.

## Execution

```bash
task-master validate-dependencies
```

## Validation Checks

1. **Circular Dependencies**
   - A depends on B, B depends on A
   - Complex circular chains
   - Self-dependencies

2. **Missing Dependencies**
   - References to non-existent tasks
   - Deleted task references
   - Invalid task IDs

3. **Logical Issues**
   - Completed tasks depending on pending
   - Cancelled tasks in dependency chains
   - Impossible sequences

4. **Complexity Warnings**
   - Over-complex dependency chains
   - Too many dependencies per task
   - Bottleneck tasks

## Smart Analysis

The validation provides:
- Visual dependency graph
- Critical path analysis
- Bottleneck identification
- Suggested optimizations

## Report Format

```
Dependency Validation Report
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… No circular dependencies found
âš ï¸  2 warnings found:
   - Task #23 has 7 dependencies (consider breaking down)
   - Task #45 blocks 5 other tasks (potential bottleneck)
âŒ 1 error found:
   - Task #67 depends on deleted task #66

Critical Path: #1 â†’ #5 â†’ #23 â†’ #45 â†’ #50 (15 days)
```

## Actionable Output

For each issue found:
- Clear description
- Impact assessment
- Suggested fix
- Command to resolve

## Next Steps

After validation:
- Run `/project:tm/fix-dependencies` to auto-fix
- Manually adjust problematic dependencies
- Rerun to verify fixes
</file>

<file path=".claude/commands/tm/workflows/auto-implement-tasks.md">
Enhanced auto-implementation with intelligent code generation and testing.

Arguments: $ARGUMENTS

## Intelligent Auto-Implementation

Advanced implementation with context awareness and quality checks.

### 1. **Pre-Implementation Analysis**

Before starting:
- Analyze task complexity and requirements
- Check codebase patterns and conventions
- Identify similar completed tasks
- Assess test coverage needs
- Detect potential risks

### 2. **Smart Implementation Strategy**

Based on task type and context:

**Feature Tasks**
1. Research existing patterns
2. Design component architecture
3. Implement with tests
4. Integrate with system
5. Update documentation

**Bug Fix Tasks**
1. Reproduce issue
2. Identify root cause
3. Implement minimal fix
4. Add regression tests
5. Verify side effects

**Refactoring Tasks**
1. Analyze current structure
2. Plan incremental changes
3. Maintain test coverage
4. Refactor step-by-step
5. Verify behavior unchanged

### 3. **Code Intelligence**

**Pattern Recognition**
- Learn from existing code
- Follow team conventions
- Use preferred libraries
- Match style guidelines

**Test-Driven Approach**
- Write tests first when possible
- Ensure comprehensive coverage
- Include edge cases
- Performance considerations

### 4. **Progressive Implementation**

Step-by-step with validation:
```
Step 1/5: Setting up component structure âœ“
Step 2/5: Implementing core logic âœ“
Step 3/5: Adding error handling âš¡ (in progress)
Step 4/5: Writing tests â³
Step 5/5: Integration testing â³

Current: Adding try-catch blocks and validation...
```

### 5. **Quality Assurance**

Automated checks:
- Linting and formatting
- Test execution
- Type checking
- Dependency validation
- Performance analysis

### 6. **Smart Recovery**

If issues arise:
- Diagnostic analysis
- Suggestion generation
- Fallback strategies
- Manual intervention points
- Learning from failures

### 7. **Post-Implementation**

After completion:
- Generate PR description
- Update documentation
- Log lessons learned
- Suggest follow-up tasks
- Update task relationships

Result: High-quality, production-ready implementations.
</file>

<file path=".claude/commands/tm/workflows/command-pipeline.md">
Execute a pipeline of commands based on a specification.

Arguments: $ARGUMENTS

## Command Pipeline Execution

Parse pipeline specification from arguments. Supported formats:

### Simple Pipeline
`init â†’ expand-all â†’ sprint-plan`

### Conditional Pipeline  
`status â†’ if:pending>10 â†’ sprint-plan â†’ else â†’ next`

### Iterative Pipeline
`for:pending-tasks â†’ expand â†’ complexity-check`

### Smart Pipeline Patterns

**1. Project Setup Pipeline**
```
init [prd] â†’ 
expand-all â†’ 
complexity-report â†’ 
sprint-plan â†’ 
show first-sprint
```

**2. Daily Work Pipeline**
```
standup â†’
if:in-progress â†’ continue â†’
else â†’ next â†’ start
```

**3. Task Completion Pipeline**
```
complete [id] â†’
git-commit â†’
if:blocked-tasks-freed â†’ show-freed â†’
next
```

**4. Quality Check Pipeline**
```
list in-progress â†’
for:each â†’ check-idle-time â†’
if:idle>1day â†’ prompt-update
```

### Pipeline Features

**Variables**
- Store results: `status â†’ $count=pending-count`
- Use in conditions: `if:$count>10`
- Pass between commands: `expand $high-priority-tasks`

**Error Handling**
- On failure: `try:complete â†’ catch:show-blockers`
- Skip on error: `optional:test-run`
- Retry logic: `retry:3:commit`

**Parallel Execution**
- Parallel branches: `[analyze | test | lint]`
- Join results: `parallel â†’ join:report`

### Execution Flow

1. Parse pipeline specification
2. Validate command sequence
3. Execute with state passing
4. Handle conditions and loops
5. Aggregate results
6. Show summary

This enables complex workflows like:
`parse-prd â†’ expand-all â†’ filter:complex>70 â†’ assign:senior â†’ sprint-plan:weighted`
</file>

<file path=".claude/commands/tm/workflows/smart-workflow.md">
Execute an intelligent workflow based on current project state and recent commands.

This command analyzes:
1. Recent commands you've run
2. Current project state
3. Time of day / day of week
4. Your working patterns

Arguments: $ARGUMENTS

## Intelligent Workflow Selection

Based on context, I'll determine the best workflow:

### Context Analysis
- Previous command executed
- Current task states
- Unfinished work from last session
- Your typical patterns

### Smart Execution

If last command was:
- `status` â†’ Likely starting work â†’ Run daily standup
- `complete` â†’ Task finished â†’ Find next task
- `list pending` â†’ Planning â†’ Suggest sprint planning
- `expand` â†’ Breaking down work â†’ Show complexity analysis
- `init` â†’ New project â†’ Show onboarding workflow

If no recent commands:
- Morning? â†’ Daily standup workflow
- Many pending tasks? â†’ Sprint planning
- Tasks blocked? â†’ Dependency resolution
- Friday? â†’ Weekly review

### Workflow Composition

I'll chain appropriate commands:
1. Analyze current state
2. Execute primary workflow
3. Suggest follow-up actions
4. Prepare environment for coding

### Learning Mode

This command learns from your patterns:
- Track command sequences
- Note time preferences
- Remember common workflows
- Adapt to your style

Example flows detected:
- Morning: standup â†’ next â†’ start
- After lunch: status â†’ continue task
- End of day: complete â†’ commit â†’ status
</file>

<file path=".claude/commands/tm/help.md">
Show help for Task Master commands.

Arguments: $ARGUMENTS

Display help for Task Master commands. If arguments provided, show specific command help.

## Task Master Command Help

### Quick Navigation

Type `/project:tm/` and use tab completion to explore all commands.

### Command Categories

#### ğŸš€ Setup & Installation
- `/project:tm/setup/install` - Comprehensive installation guide
- `/project:tm/setup/quick-install` - One-line global install

#### ğŸ“‹ Project Setup
- `/project:tm/init` - Initialize new project
- `/project:tm/init/quick` - Quick setup with auto-confirm
- `/project:tm/models` - View AI configuration
- `/project:tm/models/setup` - Configure AI providers

#### ğŸ¯ Task Generation
- `/project:tm/parse-prd` - Generate tasks from PRD
- `/project:tm/parse-prd/with-research` - Enhanced parsing
- `/project:tm/generate` - Create task files

#### ğŸ“ Task Management
- `/project:tm/list` - List tasks (natural language filters)
- `/project:tm/show <id>` - Display task details
- `/project:tm/add-task` - Create new task
- `/project:tm/update` - Update tasks naturally
- `/project:tm/next` - Get next task recommendation

#### ğŸ”„ Status Management
- `/project:tm/set-status/to-pending <id>`
- `/project:tm/set-status/to-in-progress <id>`
- `/project:tm/set-status/to-done <id>`
- `/project:tm/set-status/to-review <id>`
- `/project:tm/set-status/to-deferred <id>`
- `/project:tm/set-status/to-cancelled <id>`

#### ğŸ” Analysis & Breakdown
- `/project:tm/analyze-complexity` - Analyze task complexity
- `/project:tm/expand <id>` - Break down complex task
- `/project:tm/expand/all` - Expand all eligible tasks

#### ğŸ”— Dependencies
- `/project:tm/add-dependency` - Add task dependency
- `/project:tm/remove-dependency` - Remove dependency
- `/project:tm/validate-dependencies` - Check for issues

#### ğŸ¤– Workflows
- `/project:tm/workflows/smart-flow` - Intelligent workflows
- `/project:tm/workflows/pipeline` - Command chaining
- `/project:tm/workflows/auto-implement` - Auto-implementation

#### ğŸ“Š Utilities
- `/project:tm/utils/analyze` - Project analysis
- `/project:tm/status` - Project dashboard
- `/project:tm/learn` - Interactive learning

### Natural Language Examples

```
/project:tm/list pending high priority
/project:tm/update mark all API tasks as done
/project:tm/add-task create login system with OAuth
/project:tm/show current
```

### Getting Started

1. Install: `/project:tm/setup/quick-install`
2. Initialize: `/project:tm/init/quick`
3. Learn: `/project:tm/learn start`
4. Work: `/project:tm/workflows/smart-flow`

For detailed command info: `/project:tm/help <command-name>`
</file>

<file path=".claude/commands/tm/learn.md">
Learn about Task Master capabilities through interactive exploration.

Arguments: $ARGUMENTS

## Interactive Task Master Learning

Based on your input, I'll help you discover capabilities:

### 1. **What are you trying to do?**

If $ARGUMENTS contains:
- "start" / "begin" â†’ Show project initialization workflows
- "manage" / "organize" â†’ Show task management commands  
- "automate" / "auto" â†’ Show automation workflows
- "analyze" / "report" â†’ Show analysis tools
- "fix" / "problem" â†’ Show troubleshooting commands
- "fast" / "quick" â†’ Show efficiency shortcuts

### 2. **Intelligent Suggestions**

Based on your project state:

**No tasks yet?**
```
You'll want to start with:
1. /project:task-master:init <prd-file>
   â†’ Creates tasks from requirements
   
2. /project:task-master:parse-prd <file>
   â†’ Alternative task generation

Try: /project:task-master:init demo-prd.md
```

**Have tasks?**
Let me analyze what you might need...
- Many pending tasks? â†’ Learn sprint planning
- Complex tasks? â†’ Learn task expansion
- Daily work? â†’ Learn workflow automation

### 3. **Command Discovery**

**By Category:**
- ğŸ“‹ Task Management: list, show, add, update, complete
- ğŸ”„ Workflows: auto-implement, sprint-plan, daily-standup
- ğŸ› ï¸ Utilities: check-health, complexity-report, sync-memory
- ğŸ” Analysis: validate-deps, show dependencies

**By Scenario:**
- "I want to see what to work on" â†’ `/project:task-master:next`
- "I need to break this down" â†’ `/project:task-master:expand <id>`
- "Show me everything" â†’ `/project:task-master:status`
- "Just do it for me" â†’ `/project:workflows:auto-implement`

### 4. **Power User Patterns**

**Command Chaining:**
```
/project:task-master:next
/project:task-master:start <id>
/project:workflows:auto-implement
```

**Smart Filters:**
```
/project:task-master:list pending high
/project:task-master:list blocked
/project:task-master:list 1-5 tree
```

**Automation:**
```
/project:workflows:pipeline init â†’ expand-all â†’ sprint-plan
```

### 5. **Learning Path**

Based on your experience level:

**Beginner Path:**
1. init â†’ Create project
2. status â†’ Understand state
3. next â†’ Find work
4. complete â†’ Finish task

**Intermediate Path:**
1. expand â†’ Break down complex tasks
2. sprint-plan â†’ Organize work
3. complexity-report â†’ Understand difficulty
4. validate-deps â†’ Ensure consistency

**Advanced Path:**
1. pipeline â†’ Chain operations
2. smart-flow â†’ Context-aware automation
3. Custom commands â†’ Extend the system

### 6. **Try This Now**

Based on what you asked about, try:
[Specific command suggestion based on $ARGUMENTS]

Want to learn more about a specific command?
Type: /project:help <command-name>
</file>

<file path=".claude/commands/tm/tm-main.md">
# Task Master Command Reference

Comprehensive command structure for Task Master integration with Claude Code.

## Command Organization

Commands are organized hierarchically to match Task Master's CLI structure while providing enhanced Claude Code integration.

## Project Setup & Configuration

### `/project:tm/init`
- `init-project` - Initialize new project (handles PRD files intelligently)
- `init-project-quick` - Quick setup with auto-confirmation (-y flag)

### `/project:tm/models`
- `view-models` - View current AI model configuration
- `setup-models` - Interactive model configuration
- `set-main` - Set primary generation model
- `set-research` - Set research model
- `set-fallback` - Set fallback model

## Task Generation

### `/project:tm/parse-prd`
- `parse-prd` - Generate tasks from PRD document
- `parse-prd-with-research` - Enhanced parsing with research mode

### `/project:tm/generate`
- `generate-tasks` - Create individual task files from tasks.json

## Task Management

### `/project:tm/list`
- `list-tasks` - Smart listing with natural language filters
- `list-tasks-with-subtasks` - Include subtasks in hierarchical view
- `list-tasks-by-status` - Filter by specific status

### `/project:tm/set-status`
- `to-pending` - Reset task to pending
- `to-in-progress` - Start working on task
- `to-done` - Mark task complete
- `to-review` - Submit for review
- `to-deferred` - Defer task
- `to-cancelled` - Cancel task

### `/project:tm/sync-readme`
- `sync-readme` - Export tasks to README.md with formatting

### `/project:tm/update`
- `update-task` - Update tasks with natural language
- `update-tasks-from-id` - Update multiple tasks from a starting point
- `update-single-task` - Update specific task

### `/project:tm/add-task`
- `add-task` - Add new task with AI assistance

### `/project:tm/remove-task`
- `remove-task` - Remove task with confirmation

## Subtask Management

### `/project:tm/add-subtask`
- `add-subtask` - Add new subtask to parent
- `convert-task-to-subtask` - Convert existing task to subtask

### `/project:tm/remove-subtask`
- `remove-subtask` - Remove subtask (with optional conversion)

### `/project:tm/clear-subtasks`
- `clear-subtasks` - Clear subtasks from specific task
- `clear-all-subtasks` - Clear all subtasks globally

## Task Analysis & Breakdown

### `/project:tm/analyze-complexity`
- `analyze-complexity` - Analyze and generate expansion recommendations

### `/project:tm/complexity-report`
- `complexity-report` - Display complexity analysis report

### `/project:tm/expand`
- `expand-task` - Break down specific task
- `expand-all-tasks` - Expand all eligible tasks
- `with-research` - Enhanced expansion

## Task Navigation

### `/project:tm/next`
- `next-task` - Intelligent next task recommendation

### `/project:tm/show`
- `show-task` - Display detailed task information

### `/project:tm/status`
- `project-status` - Comprehensive project dashboard

## Dependency Management

### `/project:tm/add-dependency`
- `add-dependency` - Add task dependency

### `/project:tm/remove-dependency`
- `remove-dependency` - Remove task dependency

### `/project:tm/validate-dependencies`
- `validate-dependencies` - Check for dependency issues

### `/project:tm/fix-dependencies`
- `fix-dependencies` - Automatically fix dependency problems

## Workflows & Automation

### `/project:tm/workflows`
- `smart-workflow` - Context-aware intelligent workflow execution
- `command-pipeline` - Chain multiple commands together
- `auto-implement-tasks` - Advanced auto-implementation with code generation

## Utilities

### `/project:tm/utils`
- `analyze-project` - Deep project analysis and insights

### `/project:tm/setup`
- `install-taskmaster` - Comprehensive installation guide
- `quick-install-taskmaster` - One-line global installation

## Usage Patterns

### Natural Language
Most commands accept natural language arguments:
```
/project:tm/add-task create user authentication system
/project:tm/update mark all API tasks as high priority
/project:tm/list show blocked tasks
```

### ID-Based Commands
Commands requiring IDs intelligently parse from $ARGUMENTS:
```
/project:tm/show 45
/project:tm/expand 23
/project:tm/set-status/to-done 67
```

### Smart Defaults
Commands provide intelligent defaults and suggestions based on context.
</file>

<file path=".claude/settings.json">
{
  "permissions": {
    "allow": [
      "Bash",
      "Read",
      "Write", 
      "Edit",
      "MultiEdit",
      "Glob",
      "Grep",
      "LS",
      "TodoWrite",
      "Task",
      "WebFetch",
      "WebSearch",
      "mcp__task-master-ai__*"
    ],
    "deny": []
  },
  "enableAllProjectMcpServers": true,
  "mcpServers": {
    "task-master-ai": {
      "enabled": true
    }
  }
}
</file>

<file path=".claude/TM_COMMANDS_GUIDE.md">
# Task Master Commands for Claude Code

Complete guide to using Task Master through Claude Code's slash commands.

## Overview

All Task Master functionality is available through the `/project:tm/` namespace with natural language support and intelligent features.

## Quick Start

```bash
# Install Task Master
/project:tm/setup/quick-install

# Initialize project
/project:tm/init/quick

# Parse requirements
/project:tm/parse-prd requirements.md

# Start working
/project:tm/next
```

## Command Structure

Commands are organized hierarchically to match Task Master's CLI:
- Main commands at `/project:tm/[command]`
- Subcommands for specific operations `/project:tm/[command]/[subcommand]`
- Natural language arguments accepted throughout

## Complete Command Reference

### Setup & Configuration
- `/project:tm/setup/install` - Full installation guide
- `/project:tm/setup/quick-install` - One-line install
- `/project:tm/init` - Initialize project
- `/project:tm/init/quick` - Quick init with -y
- `/project:tm/models` - View AI config
- `/project:tm/models/setup` - Configure AI

### Task Generation
- `/project:tm/parse-prd` - Generate from PRD
- `/project:tm/parse-prd/with-research` - Enhanced parsing
- `/project:tm/generate` - Create task files

### Task Management
- `/project:tm/list` - List with natural language filters
- `/project:tm/list/with-subtasks` - Hierarchical view
- `/project:tm/list/by-status <status>` - Filter by status
- `/project:tm/show <id>` - Task details
- `/project:tm/add-task` - Create task
- `/project:tm/update` - Update tasks
- `/project:tm/remove-task` - Delete task

### Status Management
- `/project:tm/set-status/to-pending <id>`
- `/project:tm/set-status/to-in-progress <id>`
- `/project:tm/set-status/to-done <id>`
- `/project:tm/set-status/to-review <id>`
- `/project:tm/set-status/to-deferred <id>`
- `/project:tm/set-status/to-cancelled <id>`

### Task Analysis
- `/project:tm/analyze-complexity` - AI analysis
- `/project:tm/complexity-report` - View report
- `/project:tm/expand <id>` - Break down task
- `/project:tm/expand/all` - Expand all complex

### Dependencies
- `/project:tm/add-dependency` - Add dependency
- `/project:tm/remove-dependency` - Remove dependency
- `/project:tm/validate-dependencies` - Check issues
- `/project:tm/fix-dependencies` - Auto-fix

### Workflows
- `/project:tm/workflows/smart-flow` - Adaptive workflows
- `/project:tm/workflows/pipeline` - Chain commands
- `/project:tm/workflows/auto-implement` - AI implementation

### Utilities
- `/project:tm/status` - Project dashboard
- `/project:tm/next` - Next task recommendation
- `/project:tm/utils/analyze` - Project analysis
- `/project:tm/learn` - Interactive help

## Key Features

### Natural Language Support
All commands understand natural language:
```
/project:tm/list pending high priority
/project:tm/update mark 23 as done
/project:tm/add-task implement OAuth login
```

### Smart Context
Commands analyze project state and provide intelligent suggestions based on:
- Current task status
- Dependencies
- Team patterns
- Project phase

### Visual Enhancements
- Progress bars and indicators
- Status badges
- Organized displays
- Clear hierarchies

## Common Workflows

### Daily Development
```
/project:tm/workflows/smart-flow morning
/project:tm/next
/project:tm/set-status/to-in-progress <id>
/project:tm/set-status/to-done <id>
```

### Task Breakdown
```
/project:tm/show <id>
/project:tm/expand <id>
/project:tm/list/with-subtasks
```

### Sprint Planning
```
/project:tm/analyze-complexity
/project:tm/workflows/pipeline init â†’ expand/all â†’ status
```

## Migration from Old Commands

| Old | New |
|-----|-----|
| `/project:task-master:list` | `/project:tm/list` |
| `/project:task-master:complete` | `/project:tm/set-status/to-done` |
| `/project:workflows:auto-implement` | `/project:tm/workflows/auto-implement` |

## Tips

1. Use `/project:tm/` + Tab for command discovery
2. Natural language is supported everywhere
3. Commands provide smart defaults
4. Chain commands for automation
5. Check `/project:tm/learn` for interactive help
</file>

<file path=".github/workflows/backend-ci.yml">
name: Backend CI/CD

on:
  push:
    branches: [ main, develop ]
    paths:
      - 'backend/**'
      - 'shared/**'
      - '.github/workflows/backend-ci.yml'
  pull_request:
    branches: [ main ]
    paths:
      - 'backend/**'
      - 'shared/**'

jobs:
  test:
    runs-on: ubuntu-latest

    services:
      postgres:
        image: postgres:15
        env:
          POSTGRES_PASSWORD: test_password
          POSTGRES_DB: workly_test
          POSTGRES_USER: test_user
        options: >-
          --health-cmd pg_isready
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
        ports:
          - 5432:5432

    strategy:
      matrix:
        node-version: [18.x, 20.x]

    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: ${{ matrix.node-version }}
        cache: 'npm'

    - name: Install dependencies
      run: |
        npm ci
        npm run build:shared

    - name: Lint
      run: npm run lint:backend

    - name: Test
      run: npm run test:backend
      env:
        DATABASE_HOST: localhost
        DATABASE_PORT: 5432
        DATABASE_NAME: workly_test
        DATABASE_USERNAME: test_user
        DATABASE_PASSWORD: test_password
        JWT_SECRET: test-jwt-secret

    - name: E2E Test
      run: npm run test:e2e --workspace=backend
      env:
        DATABASE_HOST: localhost
        DATABASE_PORT: 5432
        DATABASE_NAME: workly_test
        DATABASE_USERNAME: test_user
        DATABASE_PASSWORD: test_password
        JWT_SECRET: test-jwt-secret

    - name: Build
      run: npm run build:backend

  security:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Run security audit
      run: npm audit --workspace=backend

    - name: Run Snyk to check for vulnerabilities
      uses: snyk/actions/node@master
      env:
        SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
      with:
        args: --file=backend/package.json

  build-and-deploy:
    needs: [test, security]
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'

    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20.x'
        cache: 'npm'

    - name: Install dependencies
      run: |
        npm ci
        npm run build:shared

    - name: Build
      run: npm run build:backend

    - name: Configure AWS credentials
      uses: aws-actions/configure-aws-credentials@v4
      if: github.event_name == 'push' && github.ref == 'refs/heads/main'
      with:
        aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
        aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
        aws-region: ${{ secrets.AWS_REGION }}

    - name: Build Docker image
      if: github.event_name == 'push' && github.ref == 'refs/heads/main'
      run: |
        docker build -t workly-backend ./backend
        docker tag workly-backend:latest ${{ secrets.AWS_ACCOUNT_ID }}.dkr.ecr.${{ secrets.AWS_REGION }}.amazonaws.com/workly-backend:latest

    - name: Login to Amazon ECR
      if: github.event_name == 'push' && github.ref == 'refs/heads/main'
      id: login-ecr
      uses: aws-actions/amazon-ecr-login@v2

    - name: Push to ECR
      if: github.event_name == 'push' && github.ref == 'refs/heads/main'
      run: |
        docker push ${{ secrets.AWS_ACCOUNT_ID }}.dkr.ecr.${{ secrets.AWS_REGION }}.amazonaws.com/workly-backend:latest

    - name: Deploy to ECS
      if: github.event_name == 'push' && github.ref == 'refs/heads/main'
      run: |
        aws ecs update-service --cluster workly-cluster --service workly-backend --force-new-deployment
</file>

<file path=".github/workflows/frontend-ci.yml">
name: Frontend CI/CD

on:
  push:
    branches: [ main, develop ]
    paths:
      - 'frontend/**'
      - 'shared/**'
      - '.github/workflows/frontend-ci.yml'
  pull_request:
    branches: [ main ]
    paths:
      - 'frontend/**'
      - 'shared/**'

jobs:
  test:
    runs-on: ubuntu-latest
    
    strategy:
      matrix:
        node-version: [18.x, 20.x]

    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: ${{ matrix.node-version }}
        cache: 'npm'

    - name: Install dependencies
      run: |
        npm ci
        npm run build:shared

    - name: Type check
      run: npm run type-check --workspace=frontend

    - name: Lint
      run: npm run lint:frontend

    - name: Test
      run: npm run test:frontend

    - name: Build
      run: npm run build:frontend

  build-and-deploy:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'

    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20.x'
        cache: 'npm'

    - name: Install dependencies
      run: |
        npm ci
        npm run build:shared

    - name: Build
      run: npm run build:frontend
      env:
        NEXT_PUBLIC_API_URL: ${{ secrets.NEXT_PUBLIC_API_URL }}

    - name: Deploy to Vercel
      uses: amondnet/vercel-action@v25
      if: github.event_name == 'push' && github.ref == 'refs/heads/main'
      with:
        vercel-token: ${{ secrets.VERCEL_TOKEN }}
        vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
        vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }}
        working-directory: ./frontend
        vercel-args: '--prod'

  storybook:
    runs-on: ubuntu-latest
    if: github.event_name == 'pull_request'

    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20.x'
        cache: 'npm'

    - name: Install dependencies
      run: |
        npm ci
        npm run build:shared

    - name: Build Storybook
      run: npm run build-storybook --workspace=frontend

    - name: Deploy Storybook to Chromatic
      uses: chromaui/action@v1
      if: github.event_name == 'pull_request'
      with:
        projectToken: ${{ secrets.CHROMATIC_PROJECT_TOKEN }}
        workingDir: frontend
</file>

<file path=".github/workflows/monorepo-ci.yml">
name: Monorepo CI

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  changes:
    runs-on: ubuntu-latest
    outputs:
      frontend: ${{ steps.changes.outputs.frontend }}
      backend: ${{ steps.changes.outputs.backend }}
      shared: ${{ steps.changes.outputs.shared }}
    steps:
    - name: Checkout
      uses: actions/checkout@v4
    
    - name: Check for changes
      uses: dorny/paths-filter@v2
      id: changes
      with:
        filters: |
          frontend:
            - 'frontend/**'
          backend:
            - 'backend/**'
          shared:
            - 'shared/**'

  shared:
    needs: changes
    if: ${{ needs.changes.outputs.shared == 'true' }}
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20.x'
        cache: 'npm'

    - name: Install dependencies
      run: npm ci

    - name: Type check shared
      run: npm run type-check --workspace=shared

    - name: Build shared
      run: npm run build:shared

  dependency-check:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20.x'
        cache: 'npm'

    - name: Install dependencies
      run: npm ci

    - name: Check for dependency vulnerabilities
      run: npm audit

    - name: Check for outdated dependencies
      run: npm outdated || true

  code-quality:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20.x'
        cache: 'npm'

    - name: Install dependencies
      run: npm ci

    - name: Run CodeQL Analysis
      uses: github/codeql-action/init@v2
      with:
        languages: javascript

    - name: Perform CodeQL Analysis
      uses: github/codeql-action/analyze@v2

  notify:
    needs: [shared, dependency-check, code-quality]
    runs-on: ubuntu-latest
    if: failure()
    
    steps:
    - name: Notify on failure
      uses: 8398a7/action-slack@v3
      if: always()
      with:
        status: ${{ job.status }}
        channel: '#dev-notifications'
        webhook_url: ${{ secrets.SLACK_WEBHOOK }}
        fields: repo,message,commit,author,action,eventName,ref,workflow
</file>

<file path=".taskmaster/docs/home-task-management-prd.md">
# í™ˆ ë° ì—…ë¬´ ê´€ë¦¬ ì‹œìŠ¤í…œ PRD (Product Requirements Document)

## ê°œìš”

ê¸°íšì„œ ì„¹ì…˜ 2ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ í™ˆ ë° ì—…ë¬´ ê´€ë¦¬ ì‹œìŠ¤í…œ ê°œë°œì„ ìœ„í•œ ìƒì„¸ ìš”êµ¬ì‚¬í•­ ì •ì˜ì„œì…ë‹ˆë‹¤. GTD(Getting Things Done) ë°©ë²•ë¡ ì„ ê¸°ë°˜ìœ¼ë¡œ í•œ ì§€ëŠ¥í˜• ì—…ë¬´ ê´€ë¦¬ì™€ ë¯¸ë‹ˆë©€í•œ UI/UXë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.

## í•µì‹¬ ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

### 1. í™ˆ ëŒ€ì‹œë³´ë“œ - ì§€ëŠ¥í˜• 'ì˜¤ëŠ˜' ë³´ê¸°

#### 1.1 ì—…ë¬´ ì¹´ë“œ í”¼ë“œ
- **ë””ìì¸**: Threads ìŠ¤íƒ€ì¼ì˜ ê¹”ë”í•œ ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•œ í”¼ë“œ
- **ì¹´ë“œ êµ¬ì„± ìš”ì†Œ**:
  - ì—…ë¬´ ì œëª© (ëŒ€ì œëª©, ëª…í™•í•œ íƒ€ì´í¬ê·¸ë˜í”¼)
  - ê´€ë ¨ í”„ë¡œì íŠ¸ (ìƒ‰ìƒ ì½”ë”©ëœ íƒœê·¸)
  - ë§ˆê°ì¼ (ë‚ ì§œ/ì‹œê°„ í‘œì‹œ)
  - ìš°ì„ ìˆœìœ„ í‘œì‹œ (ì‹œê°ì  ì¸ë””ì¼€ì´í„°)
  - ì§„í–‰ ìƒíƒœ (ì²´í¬ë°•ìŠ¤, ì§„í–‰ë¥ )

#### 1.2 ëª¨ë©˜í…€ ì ìˆ˜ ì•Œê³ ë¦¬ì¦˜
- **RICE ëª¨ë¸ ê¸°ë°˜ ì ìˆ˜ ê³„ì‚°**:
  - Reach (í”„ë¡œì íŠ¸ ì¤‘ìš”ë„): ì˜ì¡´ì„± ìˆëŠ” ì—…ë¬´/ë§ˆì¼ìŠ¤í†¤ ìˆ˜
  - Impact (ê¸´ê¸‰ì„±/ì¤‘ìš”ì„±): ë§ˆê°ì¼ + ì•„ì´ì  í•˜ì›Œ ë§¤íŠ¸ë¦­ìŠ¤
  - Confidence (ëª…í™•ì„±): ì—…ë¬´ ì •ì˜ ì™„ì„±ë„
  - Effort (ì˜ˆìƒ ì†Œìš” ì‹œê°„): ì†Œìš” ì‹œê°„ ì—­ê°€ì¤‘ì¹˜
- **ë™ì  ì •ë ¬**: ì‹¤ì‹œê°„ ì ìˆ˜ ê³„ì‚° ë° ì¬ì •ë ¬

#### 1.3 ë³´ê¸° ë° í•„í„°
- **íƒ­ ê¸°ë°˜ í•„í„°ë§**:
  - 'ì˜¤ëŠ˜' (ëª¨ë©˜í…€ ì ìˆ˜ ì •ë ¬)
  - 'ì™„ë£Œë¨' (ì™„ë£Œëœ ì—…ë¬´ ëª©ë¡)
  - 'ì „ì²´' (ëª¨ë“  ì—…ë¬´)
  - 'ë‚˜ì¤‘ì— í•  ì¼' (ë§ˆê°ì¼ ì—†ëŠ” ì—…ë¬´)
- **ê²€ìƒ‰ ê¸°ëŠ¥**: ì „ì²´ í”„ë¡œì íŠ¸ í†µí•© ê²€ìƒ‰

### 2. GTD ê¸°ë°˜ ì—…ë¬´ ìƒì„± í”Œë¡œìš°

#### 2.1 FAB (Floating Action Button) íŠ¸ë¦¬ê±°
- **ìœ„ì¹˜**: í™”ë©´ ì˜¤ë¥¸ìª½ í•˜ë‹¨, ì¸ì²´ê³µí•™ì  ì ‘ê·¼ ê°€ëŠ¥
- **ìƒí˜¸ì‘ìš©**: ìŠ¤í”¼ë“œ ë‹¤ì´ì–¼ ë©”ë‰´
  - 'ì—…ë¬´ ì¶”ê°€'
  - 'í”„ë¡œì íŠ¸ ì¶”ê°€'
  - 'ê²Œì‹œê¸€ ì¶”ê°€'
- **ìƒí™© ì¸ì‹**: í™ˆ, í”„ë¡œì íŠ¸, ê²Œì‹œíŒì—ë§Œ í‘œì‹œ

#### 2.2 ë‹¨ê³„ë³„ ì—…ë¬´ ìƒì„± í”„ë¡œì„¸ìŠ¤

##### 1ë‹¨ê³„: ìˆ˜ì§‘
- **UI**: "ë¬´ì—‡ì´ ë§ˆìŒì— ê±¸ë¦¬ë‚˜ìš”?" í”„ë¡¬í”„íŠ¸
- **ì…ë ¥**: ë‹¨ìˆœ í…ìŠ¤íŠ¸ í•„ë“œ
- **ëª©í‘œ**: ë§ˆì°° ì—†ëŠ” ë¸Œë ˆì¸ ë¤í”„

##### 2ë‹¨ê³„: ëª…ë£Œí™”
- **ì‹¤í–‰ ê°€ëŠ¥ì„± íŒë‹¨**:
  - "ì‹¤í–‰ ê°€ëŠ¥í•œ ì¼ì¸ê°€ìš”?" (Y/N)
  - ì•„ë‹ˆì˜¤ â†’ ì°¸ê³  ìë£Œ/ì–¸ì  ê°€ ëª©ë¡ ë¶„ë¥˜
- **2ë¶„ ê·œì¹™ ì ìš©**:
  - "2ë¶„ ì•ˆì— ëë‚¼ ìˆ˜ ìˆë‚˜ìš”?"
  - ì˜ˆ â†’ ì¦‰ì‹œ ì²˜ë¦¬ ê¶Œì¥
- **í”„ë¡œì íŠ¸ ì—°ê²°**:
  - "ë” í° ëª©í‘œì˜ ì¼ë¶€ì¸ê°€ìš”?"
  - ê¸°ì¡´ í”„ë¡œì íŠ¸ í• ë‹¹ ë˜ëŠ” ì‹ ê·œ ìƒì„±

##### 3ë‹¨ê³„: ì •ë¦¬
- **ì„¸ë¶€ ì •ë³´ ì…ë ¥**:
  - ë§ˆê°ì¼ ì„¤ì •
  - ìš°ì„ ìˆœìœ„ (ì•„ì´ì  í•˜ì›Œ ë§¤íŠ¸ë¦­ìŠ¤ UI)
  - ë‹´ë‹¹ì ì§€ì • (ê³µìœ  í”„ë¡œì íŠ¸)
  - ì˜ˆìƒ ì†Œìš” ì‹œê°„

##### 4ë‹¨ê³„: ì‹¤í–‰ ì¤€ë¹„
- **ìµœì¢… ê²€í† **: ì…ë ¥ëœ ì •ë³´ í™•ì¸
- **í™ˆ ë“±ë¡**: 'ì˜¤ëŠ˜' ë³´ê¸°ì— ì¦‰ì‹œ ë°˜ì˜

### 3. í”„ë¡œì íŠ¸ ì§„í–‰ë¥  í†µí•©

#### 3.1 ì‹œê°ì  ì—°ê²°
- **ì—…ë¬´ ì¹´ë“œ ë‚´ ì§„í–‰ë¥  í‘œì‹œì¤„**: ê´€ë ¨ í”„ë¡œì íŠ¸ ì§„í–‰ë¥  ë¯¸ë¬˜í•˜ê²Œ í‘œì‹œ
- **ì™„ë£Œ ì• ë‹ˆë©”ì´ì…˜**: ì—…ë¬´ ì™„ë£Œ ì‹œ ì§„í–‰ë¥  ë°” ì±„ìš°ê¸° íš¨ê³¼
- **ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸**: í”„ë¡œì íŠ¸ ì „ì²´ ì§„í–‰ë¥  ì¦‰ì‹œ ë°˜ì˜

## UI/UX ë””ìì¸ ì›ì¹™

### 1. Threads ì •ì‹ ì˜ ë¯¸ë‹ˆë©€ë¦¬ì¦˜
- **ë‹¨ìˆœì„±**: í™”ë©´ë‹¹ í•˜ë‚˜ì˜ ì£¼ìš” ëª©ì 
- **ëª…í™•ì„±**: ì¶©ë¶„í•œ ì—¬ë°±, ê°€ë…ì„± ë†’ì€ íƒ€ì´í¬ê·¸ë˜í”¼
- **ì¼ê´€ì„±**: í†µì¼ëœ ì‹œê°ì  ì–¸ì–´ (ì•„ì´ì½˜, ë²„íŠ¼, ê°„ê²©)
- **ì‹œê°ì  ê³„ì¸µ**: í¬ê¸°, ìƒ‰ìƒ, ëŒ€ë¹„ë¥¼ í†µí•œ ìš°ì„ ìˆœìœ„ í‘œí˜„

### 2. ë§ˆì´í¬ë¡œì¸í„°ë™ì…˜
- **ì¦‰ê°ì  í”¼ë“œë°±**: ëª¨ë“  ì‚¬ìš©ì í–‰ë™ì— ì‹œê°ì  ë°˜ì‘
- **ë§Œì¡±ìŠ¤ëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜**: ì—…ë¬´ ì™„ë£Œ ì²´í¬, ì¹´ë“œ ì´ë™
- **ë„í—ˆí‹° ì„ê³„ê°’**: 100ms ì´ë‚´ ì‘ë‹µ ì‹œê°„

### 3. ì ‘ê·¼ì„± ê³ ë ¤ì‚¬í•­
- **ì¶©ë¶„í•œ ìƒ‰ìƒ ëŒ€ë¹„**: WCAG ê°€ì´ë“œë¼ì¸ ì¤€ìˆ˜
- **ìŠ¤í¬ë¦° ë¦¬ë” ì§€ì›**: ì˜ë¯¸ìˆëŠ” ë¼ë²¨ë§
- **í‚¤ë³´ë“œ ë‚´ë¹„ê²Œì´ì…˜**: ëª¨ë“  ê¸°ëŠ¥ í‚¤ë³´ë“œ ì ‘ê·¼ ê°€ëŠ¥

## ê¸°ìˆ ì  êµ¬í˜„ ìš”êµ¬ì‚¬í•­

### 1. í”„ë¡ íŠ¸ì—”ë“œ ì»´í¬ë„ŒíŠ¸
- **HomeTaskDashboard**: ë©”ì¸ ëŒ€ì‹œë³´ë“œ ì»´í¬ë„ŒíŠ¸
- **TaskCard**: ê°œë³„ ì—…ë¬´ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸
- **TaskCreationWizard**: ë‹¨ê³„ë³„ ì—…ë¬´ ìƒì„± ë§ˆë²•ì‚¬
- **FloatingActionButton**: FAB ë° ìŠ¤í”¼ë“œ ë‹¤ì´ì–¼
- **TaskFilters**: í•„í„° ë° ì •ë ¬ ì»´í¬ë„ŒíŠ¸
- **MomentumScoreIndicator**: ì ìˆ˜ ì‹œê°í™” ì»´í¬ë„ŒíŠ¸

### 2. ìƒíƒœ ê´€ë¦¬
- **TaskStore**: Zustand ê¸°ë°˜ ì—…ë¬´ ìƒíƒœ ê´€ë¦¬
- **ProjectStore**: í”„ë¡œì íŠ¸ ì—°ê³„ ìƒíƒœ
- **UIStore**: í•„í„°, ì •ë ¬, ëª¨ë‹¬ ìƒíƒœ

### 3. API ì¸í„°í˜ì´ìŠ¤
- **GET /tasks**: ì‚¬ìš©ì ì—…ë¬´ ëª©ë¡ ì¡°íšŒ
- **POST /tasks**: ìƒˆ ì—…ë¬´ ìƒì„±
- **PUT /tasks/:id**: ì—…ë¬´ ìˆ˜ì •
- **DELETE /tasks/:id**: ì—…ë¬´ ì‚­ì œ
- **GET /tasks/momentum-score**: ëª¨ë©˜í…€ ì ìˆ˜ ê³„ì‚°

### 4. ë°ì´í„° ëª¨ë¸
```typescript
interface Task {
  id: string;
  title: string;
  description?: string;
  projectId?: string;
  status: TaskStatus;
  priority: TaskPriority;
  dueDate?: Date;
  estimatedHours?: number;
  assigneeId?: string;
  momentumScore: number;
  tags: string[];
  createdAt: Date;
  updatedAt: Date;
}

interface MomentumScore {
  reach: number;      // 0-10
  impact: number;     // 0-10  
  confidence: number; // 0-10
  effort: number;     // 0-10
  total: number;      // ê³„ì‚°ëœ ì´ì 
}
```

## ì„±ëŠ¥ ìš”êµ¬ì‚¬í•­

### 1. ì‘ë‹µ ì‹œê°„
- **ì´ˆê¸° ë¡œë”©**: 2ì´ˆ ì´ë‚´
- **ì—…ë¬´ ìƒì„±**: 1ì´ˆ ì´ë‚´
- **í•„í„°ë§/ì •ë ¬**: 500ms ì´ë‚´
- **ëª¨ë©˜í…€ ì ìˆ˜ ê³„ì‚°**: 300ms ì´ë‚´

### 2. ì‚¬ìš©ì„±
- **ëª¨ë°”ì¼ ìµœì í™”**: í„°ì¹˜ ì¹œí™”ì  ì¸í„°í˜ì´ìŠ¤
- **ì˜¤í”„ë¼ì¸ ì§€ì›**: ê¸°ë³¸ CRUD ì‘ì—… ìºì‹±
- **ì‹¤ì‹œê°„ ë™ê¸°í™”**: ë‹¤ì¤‘ ë””ë°”ì´ìŠ¤ ìƒíƒœ ë™ê¸°í™”

## ê²€ì¦ ë° í…ŒìŠ¤íŠ¸

### 1. ì‚¬ìš©ì í…ŒìŠ¤íŠ¸
- **ì˜¨ë³´ë”© í”Œë¡œìš°**: ì²« ì—…ë¬´ ìƒì„±ê¹Œì§€ 5ë¶„ ì´ë‚´
- **ì•„í•˜ ëª¨ë©˜íŠ¸**: ì²« ì—…ë¬´ê°€ í™ˆ í™”ë©´ ìƒë‹¨ í‘œì‹œ
- **í•™ìŠµ ê³¡ì„ **: í•µì‹¬ ê¸°ëŠ¥ 10ë¶„ ì´ë‚´ ìˆ™ë‹¬

### 2. A/B í…ŒìŠ¤íŠ¸ ì˜ì—­
- **ëª¨ë©˜í…€ ì ìˆ˜ ê°€ì¤‘ì¹˜**: ì‚¬ìš©ìë³„ ìµœì í™”
- **ì—…ë¬´ ìƒì„± ë‹¨ê³„**: ë‹¨ê³„ ìˆ˜ ìµœì í™”
- **ì¹´ë“œ ë ˆì´ì•„ì›ƒ**: ì •ë³´ í‘œì‹œ ìš°ì„ ìˆœìœ„

## ì„±ê³µ ì§€í‘œ (KPI)

### 1. ì°¸ì—¬ë„
- **ì¼ì¼ í™œì„± ì‚¬ìš©ì (DAU)**: ì‹ ê·œ ê°€ì… í›„ 7ì¼ ë‚´ 50% ì´ìƒ
- **ì—…ë¬´ ì™„ë£Œìœ¨**: ìƒì„±ëœ ì—…ë¬´ì˜ 80% ì´ìƒ ì™„ë£Œ
- **ì„¸ì…˜ ì‹œê°„**: í‰ê·  15ë¶„ ì´ìƒ

### 2. íš¨ìœ¨ì„±
- **ì—…ë¬´ ìƒì„± ì‹œê°„**: í‰ê·  2ë¶„ ì´ë‚´
- **ì™„ë£Œê¹Œì§€ ì†Œìš” ì‹œê°„**: ì˜ˆìƒ ì‹œê°„ ëŒ€ë¹„ 120% ì´ë‚´
- **ì¬ë°©ë¬¸ìœ¨**: ì£¼ê°„ 75% ì´ìƒ

## ì¶œì‹œ ë‹¨ê³„

### Phase 1: ê¸°ë³¸ êµ¬í˜„ (2ì£¼)
- í™ˆ ëŒ€ì‹œë³´ë“œ ê¸°ë³¸ UI
- ì—…ë¬´ CRUD ê¸°ëŠ¥
- ë‹¨ìˆœ ìš°ì„ ìˆœìœ„ ì •ë ¬

### Phase 2: GTD í”Œë¡œìš° (2ì£¼)
- ë‹¨ê³„ë³„ ì—…ë¬´ ìƒì„± ë§ˆë²•ì‚¬
- FAB ìŠ¤í”¼ë“œ ë‹¤ì´ì–¼
- í”„ë¡œì íŠ¸ ì—°ê³„

### Phase 3: ì§€ëŠ¥í˜• ê¸°ëŠ¥ (2ì£¼)
- ëª¨ë©˜í…€ ì ìˆ˜ ì•Œê³ ë¦¬ì¦˜
- ë™ì  ì •ë ¬ ë° í•„í„°ë§
- í”„ë¡œì íŠ¸ ì§„í–‰ë¥  í†µí•©

### Phase 4: ìµœì í™” (1ì£¼)
- ì„±ëŠ¥ ìµœì í™”
- ë§ˆì´í¬ë¡œì¸í„°ë™ì…˜ ì™„ì„±
- ì ‘ê·¼ì„± í–¥ìƒ

---

ì´ PRDëŠ” ê¸°íšì„œ ì„¹ì…˜ 2ì˜ ë¹„ì „ì„ êµ¬ì²´ì ì´ê³  ì‹¤í–‰ ê°€ëŠ¥í•œ ê°œë°œ ê³„íšìœ¼ë¡œ ë³€í™˜í•œ ê²ƒì…ë‹ˆë‹¤. ê° ë‹¨ê³„ë³„ë¡œ ì¸¡ì • ê°€ëŠ¥í•œ ëª©í‘œì™€ ëª…í™•í•œ êµ¬í˜„ ë°©í–¥ì„ ì œì‹œí•˜ì—¬ íš¨ìœ¨ì ì¸ ê°œë°œì„ ì§€ì›í•©ë‹ˆë‹¤.
</file>

<file path=".taskmaster/docs/PRD.txt">
<context>
# Overview  
ì›Œí´ë¦¬(Workly)ëŠ” ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ê¸°ë°˜ ìƒì‚°ì„± ìƒíƒœê³„ë¡œì„œ, ê°œì¸ì˜ ì—…ë¬´ ê´€ë¦¬, íŒ€ í˜‘ì—…, ì „ë¬¸ì  ì„±ì¥ì„ í•˜ë‚˜ì˜ í†µí•©ëœ í”Œë«í¼ì—ì„œ ì œê³µí•©ë‹ˆë‹¤. Threads ìŠ¤íƒ€ì¼ì˜ ë¯¸ë‹ˆë©€í•œ UI/UXë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬, GTD(Getting Things Done) ë°©ë²•ë¡ ê³¼ ê¹Šì´ ìˆëŠ” ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ì„ ê²°í•©í•´ ì‚¬ìš©ìì˜ ì§€ì†ì ì¸ ì°¸ì—¬ì™€ ì„±ì¥ì„ ìœ ë„í•©ë‹ˆë‹¤.

ì´ ì œí’ˆì€ ê¸°ì¡´ ìƒì‚°ì„± ë„êµ¬ë“¤ì˜ ê¸°ëŠ¥ì  ì ‘ê·¼ì„ ë„˜ì–´ì„œ, ì‚¬ìš©ìê°€ ìì‹ ì˜ ì „ë¬¸ì  ì—¬ì •ì„ 'í”Œë ˆì´'í•˜ë©° ì„±ì·¨ë¥¼ í†µí•´ ì„±ì¥í•  ìˆ˜ ìˆëŠ” ìƒˆë¡œìš´ íŒ¨ëŸ¬ë‹¤ì„ì„ ì œì‹œí•©ë‹ˆë‹¤. 

# Core Features  
## 1. ì§€ëŠ¥í˜• ì—…ë¬´ ê´€ë¦¬ (í™ˆ)
- **GTD ê¸°ë°˜ ì—…ë¬´ ìƒì„±**: 5ë‹¨ê³„ ìˆœì°¨ì  í”„ë¡œì„¸ìŠ¤ë¡œ ë¸Œë ˆì¸ ë¤í”„ì—ì„œ ì‹¤í–‰ê¹Œì§€
- **ëª¨ë©˜í…€ ì ìˆ˜ ì•Œê³ ë¦¬ì¦˜**: RICE ëª¨ë¸ ê¸°ë°˜ ìš°ì„ ìˆœìœ„ ìë™ ì •ë ¬
- **ìŠ¤ë§ˆíŠ¸ í•„í„°ë§**: 'ì˜¤ëŠ˜', 'ì™„ë£Œë¨', 'ì „ì²´', 'ë‚˜ì¤‘ì— í•  ì¼' ë³´ê¸°
- **ì§ê´€ì  ê²€ìƒ‰**: ì „ì²´ í”„ë¡œì íŠ¸ í†µí•© ê²€ìƒ‰

## 2. ì±„íŒ… ìš°ì„  í”„ë¡œì íŠ¸ ê´€ë¦¬
- **ì‹¤ì‹œê°„ í˜‘ì—…**: Slack ìŠ¤íƒ€ì¼ ì˜êµ¬ ì±„íŒ… ì±„ë„
- **ìŠ¬ë˜ì‹œ ëª…ë ¹ì–´**: /add-task, /delegate, /set-milestone ë“± ìƒì‚°ì„± ëª…ë ¹
- **OKR ê¸°ë°˜ ëª©í‘œ ì„¤ì •**: ëª©í‘œ-í•µì‹¬ê²°ê³¼ êµ¬ì¡°ë¡œ ëª…í™•í•œ ì„±ê³¼ ì¸¡ì •
- **íŒ€ êµ¬ì„± ì‹œìŠ¤í…œ**: Upwork ìŠ¤íƒ€ì¼ ëª¨ì§‘ ë° ê¸°ìˆ  ë§¤ì¹­

## 3. í¬ê´„ì  ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜
- **XP & ë ˆë²¨ ì‹œìŠ¤í…œ**: ëª¨ë“  ê¸ì •ì  í–‰ë™ì— ëŒ€í•œ ë³´ìƒ
- **ìŠ¤í‚¬ íŠ¸ë¦¬**: ì „ë¬¸ ë¶„ì•¼ë³„ ì—­ëŸ‰ ì‹œê°í™” ë° ì„±ì¥ ì¶”ì 
- **ì—…ì  & ë°°ì§€**: íŠ¹ì • ë§ˆì¼ìŠ¤í†¤ ë‹¬ì„± ë³´ìƒ
- **í‰íŒ ì‹œìŠ¤í…œ**: Stack Overflow ìŠ¤íƒ€ì¼ ì»¤ë®¤ë‹ˆí‹° ì‹ ë¢°ë„
- **ì‹œì¦Œì œ**: ë¶„ê¸°ë³„ í…Œë§ˆì™€ ë…ì  ë³´ìƒì´ ìˆëŠ” ì°¸ì—¬ ì£¼ê¸°

## 4. ìƒíƒœê³„ í—ˆë¸Œ (ê²Œì‹œíŒ)
- **ì§€ì‹ ìœ„í‚¤**: ì‚¬ìš©ì ìƒì„± íŠœí† ë¦¬ì–¼ ë° ëª¨ë²” ì‚¬ë¡€ ê°€ì´ë“œ
- **í”„ë¡œì íŠ¸ ì‡¼ì¼€ì´ìŠ¤**: Behance ìŠ¤íƒ€ì¼ í¬íŠ¸í´ë¦¬ì˜¤ ê³µìœ  ê³µê°„
- **ì„ë¬´ ë§ˆì¼“í”Œë ˆì´ìŠ¤**: ìœ ë£Œ í”„ë¦¬ëœìŠ¤ ì—…ë¬´ í”Œë«í¼ (í–¥í›„ êµ¬í˜„)

## 5. ì›Œí¬ìŠ¤í˜ì´ìŠ¤ (B2B)
- **íŒ€ ê´€ë¦¬**: ì¤‘ì•™ì§‘ì¤‘ì‹ ë©¤ë²„ ê´€ë¦¬ ë° ê¶Œí•œ ì„¤ì •
- **ë¹„ê³µê°œ í”„ë¡œì íŠ¸**: ì¡°ì§ ë‚´ë¶€ ì „ìš© í˜‘ì—… ê³µê°„
- **íŒ€ ë¶„ì„**: ìƒì‚°ì„± ë° ì„±ê³¼ ëŒ€ì‹œë³´ë“œ
- **ì—”í„°í”„ë¼ì´ì¦ˆ ë³´ì•ˆ**: SSO, ê°ì‚¬ ë¡œê·¸, ê·œì • ì¤€ìˆ˜

# User Experience  
## í•µì‹¬ ì‚¬ìš©ì í˜ë¥´ì†Œë‚˜
1. **ê°œì¸ ìƒì‚°ì„± ì¶”êµ¬ì**: ì—…ë¬´ ê´€ë¦¬ì™€ ê°œì¸ ì„±ì¥ì„ ì›í•˜ëŠ” ì „ë¬¸ê°€
2. **ìŠ¤íƒ€íŠ¸ì—… íŒ€**: ë¯¼ì²©í•œ í˜‘ì—…ê³¼ ë™ê¸°ë¶€ì—¬ê°€ í•„ìš”í•œ ì†Œê·œëª¨ íŒ€
3. **í”„ë¦¬ëœì„œ/í¬ë¦¬ì—ì´í„°**: í¬íŠ¸í´ë¦¬ì˜¤ êµ¬ì¶•ê³¼ ìˆ˜ìµ ì°½ì¶œ ê¸°íšŒë¥¼ ì°¾ëŠ” ê°œì¸
4. **ì—”í„°í”„ë¼ì´ì¦ˆ**: ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ìœ¼ë¡œ íŒ€ ì°¸ì—¬ë„ë¥¼ ë†’ì´ë ¤ëŠ” ì¡°ì§

## í•µì‹¬ ì‚¬ìš©ì ì—¬ì •
### ì˜¨ë³´ë”© (ì²« 5ë¶„)
1. **Google ë¡œê·¸ì¸**: ë‹¨ì¼ 'êµ¬ê¸€ë¡œ ì‹œì‘í•˜ê¸°' ë²„íŠ¼
2. **í™˜ì˜ í™”ë©´**: í•µì‹¬ ê°€ì¹˜ ì œì•ˆ ê°„ê²° ì†Œê°œ  
3. **ì²« ì—…ë¬´ ìƒì„±**: ê°€ì´ë“œëœ GTD í”„ë¡œì„¸ìŠ¤ ì²´í—˜
4. **ì•„í•˜! ëª¨ë©˜íŠ¸**: ìš°ì„ ìˆœìœ„ ì •ë ¬ëœ í™ˆ í™”ë©´ì—ì„œ ì¦‰ì‹œ ê°€ì¹˜ í™•ì¸

### ì¼ì¼ ì›Œí¬í”Œë¡œìš°
1. **í™ˆ í™”ë©´ í™•ì¸**: ëª¨ë©˜í…€ ì ìˆ˜ ê¸°ë°˜ ìš°ì„ ìˆœìœ„ ì—…ë¬´ ê²€í† 
2. **ì—…ë¬´ ì‹¤í–‰**: ì²´í¬ ì™„ë£Œ ì‹œ XP íšë“ ë° ì§„í–‰ë¥  í”¼ë“œë°±
3. **í”„ë¡œì íŠ¸ í˜‘ì—…**: ì±„íŒ…ì„ í†µí•œ ìì—°ìŠ¤ëŸ¬ìš´ íŒ€ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜
4. **ì„±ì¥ ì¶”ì **: ìŠ¤í‚¬ íŠ¸ë¦¬ ë ˆë²¨ì—… ë° ì—…ì  ë‹¬ì„± í™•ì¸

### UI/UX í•µì‹¬ ì›ì¹™
- **ì ì§„ì  ê³µê°œ**: í•µì‹¬ í–‰ë™ì€ ë‹¨ìˆœí•˜ê²Œ, ê³ ê¸‰ ê¸°ëŠ¥ì€ ì§ê´€ì ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥
- **ì¼ê´€ì„±**: í”Œë«í¼ ê´€ë¡€ ì¤€ìˆ˜ ë° í†µì¼ëœ ì‹œê°ì  ì–¸ì–´
- **ì¦‰ê°ì  í”¼ë“œë°±**: ëª¨ë“  ì‚¬ìš©ì í–‰ë™ì— ëŒ€í•œ ë§ˆì´í¬ë¡œì¸í„°ë™ì…˜
- **ëª¨ë°”ì¼ ìš°ì„ **: ì „ì²´ í™”ë©´ í™œìš© ë° í„°ì¹˜ ìµœì í™”
</context>

<PRD>
# Technical Architecture  
## ì‹œìŠ¤í…œ ì»´í¬ë„ŒíŠ¸
### Frontend
- **Framework**: Next.js 14+ (App Router)
- **ì–¸ì–´**: TypeScript (íƒ€ì… ì•ˆì „ì„±)
- **ìŠ¤íƒ€ì¼ë§**: Tailwind CSS (ìœ í‹¸ë¦¬í‹° ìš°ì„ )
- **ìƒíƒœ ê´€ë¦¬**: Zustand (ê²½ëŸ‰ ìƒíƒœ ê´€ë¦¬)
- **UI ì»´í¬ë„ŒíŠ¸**: Headless UI + ì»¤ìŠ¤í…€ ì»´í¬ë„ŒíŠ¸

### Backend  
- **Framework**: NestJS (í™•ì¥ ê°€ëŠ¥í•œ Node.js)
- **ë°ì´í„°ë² ì´ìŠ¤**: PostgreSQL (ê´€ê³„í˜• ë°ì´í„°)
- **ORM**: TypeORM (TypeScript í†µí•©)
- **ì‹¤ì‹œê°„**: Socket.io (ì±„íŒ… ë° ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸)
- **ì¸ì¦**: JWT + Google OAuth 2.0

### ì¸í”„ë¼
- **ë°°í¬**: Docker + Docker Compose (ê°œë°œ/í”„ë¡œë•ì…˜)
- **íŒŒì¼ ì €ì¥**: AWS S3 (ì´ë¯¸ì§€, ë¬¸ì„œ)
- **CDN**: CloudFront (ê¸€ë¡œë²Œ ì½˜í…ì¸  ë°°í¬)
- **ëª¨ë‹ˆí„°ë§**: Sentry (ì˜¤ë¥˜ ì¶”ì )

## ë°ì´í„° ëª¨ë¸
### í•µì‹¬ ì—”í‹°í‹°
```typescript
// ì‚¬ìš©ì
User {
  id, email, profile, xp, level, skills[], reputation, 
  workspaceId?, role, preferences, createdAt
}

// ì—…ë¬´
Task {
  id, title, description, status, priority, momentum_score,
  project_id, assignee_id, due_date, xp_reward, tags[]
}

// í”„ë¡œì íŠ¸  
Project {
  id, title, objectives[], key_results[], 
  members[], chat_messages[], privacy, workspace_id?
}

// ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜
Achievement {
  id, name, description, xp_reward, badge_icon, 
  unlock_criteria, rarity
}

SkillTree {
  user_id, skill_name, level, progress_xp, 
  total_xp_required, unlock_achievements[]
}
```

## API ì„¤ê³„
### RESTful Endpoints
```
# ì¸ì¦
POST /auth/google - Google OAuth ë¡œê·¸ì¸
GET /auth/me - í˜„ì¬ ì‚¬ìš©ì ì •ë³´

# ì—…ë¬´ ê´€ë¦¬
GET /tasks - ì‚¬ìš©ì ì—…ë¬´ ëª©ë¡ (í•„í„°ë§ ì§€ì›)
POST /tasks - ìƒˆ ì—…ë¬´ ìƒì„± (GTD ë‹¨ê³„ë³„)
PUT /tasks/:id - ì—…ë¬´ ìƒíƒœ/ë‚´ìš© ì—…ë°ì´íŠ¸
DELETE /tasks/:id - ì—…ë¬´ ì‚­ì œ

# í”„ë¡œì íŠ¸
GET /projects - ì‚¬ìš©ì ì°¸ì—¬ í”„ë¡œì íŠ¸
POST /projects - ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±
PUT /projects/:id - í”„ë¡œì íŠ¸ ì—…ë°ì´íŠ¸
GET /projects/:id/chat - ì±„íŒ… ë©”ì‹œì§€ ì¡°íšŒ

# ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜
GET /users/:id/profile - ì‚¬ìš©ì í”„ë¡œí•„ (XP, ìŠ¤í‚¬ ë“±)
POST /achievements/unlock - ì—…ì  ë‹¬ì„± ì²˜ë¦¬
GET /leaderboards - ë¦¬ë”ë³´ë“œ ì¡°íšŒ
```

### WebSocket Events
```
# ì‹¤ì‹œê°„ ì±„íŒ…
project:message - í”„ë¡œì íŠ¸ ì±„íŒ… ë©”ì‹œì§€
project:join - í”„ë¡œì íŠ¸ ì±„ë„ ì°¸ì—¬
project:leave - í”„ë¡œì íŠ¸ ì±„ë„ í‡´ì¥

# ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
task:updated - ì—…ë¬´ ìƒíƒœ ë³€ê²½
xp:gained - XP íšë“ ì•Œë¦¼
achievement:unlocked - ì—…ì  ë‹¬ì„± ì•Œë¦¼
```

## í†µí•© ìš”êµ¬ì‚¬í•­
- **Google Calendar API**: ë§ˆê°ì¼ ë™ê¸°í™”
- **Slack API**: ì•Œë¦¼ ë° ì—…ë¬´ ìƒì„± (í–¥í›„)
- **GitHub API**: ì»¤ë°‹-ì—…ë¬´ ì—°ê²° (í–¥í›„)
- **ê²°ì œ ì‹œìŠ¤í…œ**: Stripe (B2B êµ¬ë…, ì„ë¬´ ë§ˆì¼“í”Œë ˆì´ìŠ¤)

# Development Roadmap  
## Phase 1: MVP Core (3ê°œì›”)
### í•„ìˆ˜ ê¸°ëŠ¥ (Must-have)
1. **ì‚¬ìš©ì ì¸ì¦**: Google OAuth í†µí•©
2. **í™ˆ - ì—…ë¬´ ê´€ë¦¬**: 
   - GTD ê¸°ë°˜ ì—…ë¬´ ìƒì„± í”Œë¡œìš°
   - ê¸°ë³¸ ìš°ì„ ìˆœìœ„ ì •ë ¬ (ëª¨ë©˜í…€ ì ìˆ˜ v1)
   - ì™„ë£Œ/ë¯¸ì™„ë£Œ í•„í„°ë§
3. **í”„ë¡œì íŠ¸ - ê¸°ë³¸ í˜‘ì—…**:
   - í”„ë¡œì íŠ¸ ìƒì„±/ê´€ë¦¬
   - ì‹¤ì‹œê°„ ì±„íŒ… ì‹œìŠ¤í…œ
   - ê¸°ë³¸ ìŠ¬ë˜ì‹œ ëª…ë ¹ì–´ (/add-task)
4. **í”„ë¡œí•„ - ê¸°ë³¸ ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜**:
   - XP/ë ˆë²¨ ì‹œìŠ¤í…œ
   - ê¸°ë³¸ ëŒ€ì‹œë³´ë“œ
5. **ì„¤ì •**: ë‹¤í¬ëª¨ë“œ, ì–¸ì–´ ì„¤ì •, ì•Œë¦¼ ì œì–´

### ê¸°ìˆ ì  ëª©í‘œ
- ì™„ì „í•œ í’€ìŠ¤íƒ ì•„í‚¤í…ì²˜ êµ¬ì¶•
- ëª¨ë°”ì¼ ìš°ì„  ë°˜ì‘í˜• ë””ìì¸ ì™„ì„±
- ê¸°ë³¸ ì‹¤ì‹œê°„ ê¸°ëŠ¥ êµ¬í˜„
- CI/CD íŒŒì´í”„ë¼ì¸ ì„¤ì •

## Phase 2: ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ í™•ì¥ (2ê°œì›”)
### ì¶”ê°€ ê¸°ëŠ¥ (Should-have)
1. **ê³ ê¸‰ ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜**:
   - ì—…ì /ë°°ì§€ ì‹œìŠ¤í…œ
   - ìŠ¤í‚¬ íŠ¸ë¦¬ v1 (í•µì‹¬ ê¸°ìˆ  5ê°œ)
   - ê¸°ë³¸ í‰íŒ ì‹œìŠ¤í…œ
2. **ì§€ì‹ ìœ„í‚¤**:
   - ë§ˆí¬ë‹¤ìš´ ê¸°ë°˜ ë¬¸ì„œ ì‘ì„±
   - íƒœê·¸ ë° ê²€ìƒ‰ ì‹œìŠ¤í…œ
   - ê¸°ë³¸ íë ˆì´ì…˜ ê¸°ëŠ¥
3. **ì™¸ë¶€ í†µí•©**:
   - Google Calendar ë™ê¸°í™”
   - ê¸°ë³¸ ì•Œë¦¼ ì‹œìŠ¤í…œ

### ê¸°ìˆ ì  ëª©í‘œ
- ë³µí•© ì¿¼ë¦¬ ì„±ëŠ¥ ìµœì í™”
- íŒŒì¼ ì—…ë¡œë“œ ì‹œìŠ¤í…œ êµ¬ì¶•
- ê²€ìƒ‰ ì—”ì§„ í†µí•© (Elasticsearch)

## Phase 3: ì»¤ë®¤ë‹ˆí‹° & í™•ì¥ (3ê°œì›”)
### í–¥í›„ ê¸°ëŠ¥ (Could-have)
1. **í”„ë¡œì íŠ¸ ì‡¼ì¼€ì´ìŠ¤**: 
   - í¬íŠ¸í´ë¦¬ì˜¤ ê°¤ëŸ¬ë¦¬
   - ì¶”ì²œ/í‰ê°€ ì‹œìŠ¤í…œ
2. **íŒ€ ê¸°ëŠ¥ í™•ì¥**:
   - ê³ ê¸‰ í”„ë¡œì íŠ¸ í…œí”Œë¦¿
   - íŒ€ ë¶„ì„ ëŒ€ì‹œë³´ë“œ
3. **ëª¨ë°”ì¼ ì•±**: React Native ë˜ëŠ” Flutter
4. **ê³ ê¸‰ í†µí•©**: Slack, GitHub, Notion

## Phase 4: B2B & ìˆ˜ìµí™” (4ê°œì›”)
### ì—”í„°í”„ë¼ì´ì¦ˆ ê¸°ëŠ¥ (Won't-have ë‹¨ê¸°)
1. **ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì‹œìŠ¤í…œ**: 
   - íŒ€ ê´€ë¦¬ ì½˜ì†”
   - ì—­í•  ê¸°ë°˜ ê¶Œí•œ
   - íŒ€ ì „ì²´ ë¶„ì„
2. **ì„ë¬´ ë§ˆì¼“í”Œë ˆì´ìŠ¤**: 
   - í”„ë¦¬ëœìŠ¤ ì—…ë¬´ í”Œë«í¼
   - ê²°ì œ ì‹œìŠ¤í…œ í†µí•©
   - ë¶„ìŸ í•´ê²° ì‹œìŠ¤í…œ
3. **ì‹œì¦Œì œ ì‹œìŠ¤í…œ**: 
   - ë¶„ê¸°ë³„ í…Œë§ˆ
   - ì‹œì¦Œ íŒ¨ìŠ¤
   - ë¦¬ë”ë³´ë“œ

# Logical Dependency Chain
## ê°œë°œ ìˆœì„œ ë° ì¢…ì†ì„±

### Foundation Layer (Week 1-4)
**í•„ìˆ˜ ì„ í–‰ ì‘ì—… - ëª¨ë“  í›„ì† ê¸°ëŠ¥ì˜ ê¸°ë°˜**
1. **ì¸ì¦ ì‹œìŠ¤í…œ**: Google OAuth + JWT (ëª¨ë“  ê¸°ëŠ¥ì˜ ì „ì œì¡°ê±´)
2. **ê¸°ë³¸ ë°ì´í„° ëª¨ë¸**: User, Task, Project ì—”í‹°í‹° ì„¤ê³„
3. **UI ê¸°ì´ˆ**: í—¤ë”, ë„¤ë¹„ê²Œì´ì…˜, ê¸°ë³¸ ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
4. **ì‹¤ì‹œê°„ ì¸í”„ë¼**: Socket.io ê¸°ë³¸ ì„¤ì •

### Core Loop (Week 5-8)
**ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥í•œ ê°€ì¹˜ ì œê³µ**
1. **ì—…ë¬´ ê´€ë¦¬ (í™ˆ)**: 
   - ë‹¨ìˆœ CRUD â†’ GTD í”Œë¡œìš° â†’ ê¸°ë³¸ ì •ë ¬
   - ì˜ì¡´ì„±: ì¸ì¦, User/Task ëª¨ë¸
2. **ê¸°ë³¸ í”„ë¡œì íŠ¸**: 
   - í”„ë¡œì íŠ¸ ìƒì„± â†’ ë©¤ë²„ ì´ˆëŒ€ â†’ ê°„ë‹¨í•œ ì—…ë¬´ í• ë‹¹
   - ì˜ì¡´ì„±: ì—…ë¬´ ê´€ë¦¬, Project ëª¨ë¸

### Engagement Layer (Week 9-12)  
**ì‚¬ìš©ì ìœ ì§€ë¥¼ ìœ„í•œ ë™ê¸°ë¶€ì—¬ ì‹œìŠ¤í…œ**
1. **ê¸°ë³¸ ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜**:
   - XP ì ë¦½ â†’ ë ˆë²¨ ì‹œìŠ¤í…œ â†’ í”„ë¡œí•„ ëŒ€ì‹œë³´ë“œ
   - ì˜ì¡´ì„±: ì—…ë¬´ ì™„ë£Œ ì´ë²¤íŠ¸, ì‚¬ìš©ì í”„ë¡œí•„
2. **ì‹¤ì‹œê°„ ì±„íŒ…**:
   - í”„ë¡œì íŠ¸ ì±„íŒ… â†’ ìŠ¬ë˜ì‹œ ëª…ë ¹ì–´ â†’ ì•Œë¦¼
   - ì˜ì¡´ì„±: í”„ë¡œì íŠ¸ ì‹œìŠ¤í…œ, ì‹¤ì‹œê°„ ì¸í”„ë¼

### ì´í›„ ë‹¨ê³„ë³„ í™•ì¥
ê° ë‹¨ê³„ëŠ” ì´ì „ ë‹¨ê³„ì˜ ì•ˆì •ì„± í™•ë³´ í›„ ì§„í–‰:
- **Week 13-16**: ê³ ê¸‰ ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ (ì—…ì , ìŠ¤í‚¬)
- **Week 17-20**: ì»¤ë®¤ë‹ˆí‹° ê¸°ëŠ¥ (ìœ„í‚¤, ì‡¼ì¼€ì´ìŠ¤) 
- **Week 21+**: B2B ê¸°ëŠ¥ (ì›Œí¬ìŠ¤í˜ì´ìŠ¤, ë§ˆì¼“í”Œë ˆì´ìŠ¤)

## ì ì§„ì  ê°€ì¹˜ ì „ë‹¬ ì „ëµ
1. **Week 4**: ê¸°ë³¸ ì—…ë¬´ ê´€ë¦¬ ì•±ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥
2. **Week 8**: íŒ€ í˜‘ì—… ê¸°ëŠ¥ìœ¼ë¡œ ì†Œê·œëª¨ ê·¸ë£¹ ìœ ì¹˜
3. **Week 12**: ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ìœ¼ë¡œ ì¥ê¸° ì‚¬ìš©ì í™•ë³´
4. **Week 16+**: ì»¤ë®¤ë‹ˆí‹° ê¸°ëŠ¥ìœ¼ë¡œ ë„¤íŠ¸ì›Œí¬ íš¨ê³¼ ì°½ì¶œ

# Risks and Mitigations  
## ê¸°ìˆ ì  ìœ„í—˜
### 1. ì‹¤ì‹œê°„ ì„±ëŠ¥ ë¬¸ì œ
**ìœ„í—˜**: Socket.io ë™ì‹œ ì ‘ì†ì í™•ì¥ í•œê³„
**ì™„í™”**: 
- Redis ê¸°ë°˜ ë©”ì‹œì§€ ë¸Œë¡œì»¤ ë„ì…
- ìˆ˜í‰ í™•ì¥ ê°€ëŠ¥í•œ ì„œë²„ ì•„í‚¤í…ì²˜ ì„¤ê³„
- ì±„íŒ… ë©”ì‹œì§€ í˜ì´ì§€ë„¤ì´ì…˜ ë° ìºì‹±

### 2. ë°ì´í„°ë² ì´ìŠ¤ ë³µì¡ì„±
**ìœ„í—˜**: ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ë¡œì§ìœ¼ë¡œ ì¸í•œ ë³µí•© ì¿¼ë¦¬ ì„±ëŠ¥ ì €í•˜
**ì™„í™”**:
- ì½ê¸° ì „ìš© ë³µì œë³¸ìœ¼ë¡œ ì¡°íšŒ ì„±ëŠ¥ ë¶„ì‚°
- ë ˆë””ìŠ¤ ìºì‹±ìœ¼ë¡œ ë¹ˆë²ˆí•œ ê³„ì‚° ê²°ê³¼ ì €ì¥
- ë°°ì¹˜ ì‘ì—…ìœ¼ë¡œ ë¬´ê±°ìš´ ê³„ì‚° ë¹„ë™ê¸° ì²˜ë¦¬

### 3. ëª¨ë°”ì¼ ì„±ëŠ¥
**ìœ„í—˜**: ë³µì¡í•œ ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ UIë¡œ ì¸í•œ ëª¨ë°”ì¼ ì„±ëŠ¥ ì €í•˜
**ì™„í™”**:
- Progressive Web App (PWA) ìš°ì„  ê°œë°œ
- ì½”ë“œ ë¶„í•  ë° ì§€ì—° ë¡œë”©
- ë„¤ì´í‹°ë¸Œ ì•±ì€ Phase 3 ì´í›„ ê²€ì¦ëœ ê¸°ëŠ¥ë§Œ í¬íŒ…

## ì œí’ˆ/ì‹œì¥ ìœ„í—˜
### 1. MVP ë²”ìœ„ ê³¼ëŒ€ ì„¤ì •
**ìœ„í—˜**: ëª¨ë“  ê¸°ëŠ¥ì„ í•œë²ˆì— êµ¬í˜„í•˜ë ¤ë‹¤ ì¶œì‹œ ì§€ì—°
**ì™„í™”**:
- ì—„ê²©í•œ MoSCoW ìš°ì„ ìˆœìœ„ ì¤€ìˆ˜  
- 2ì£¼ ìŠ¤í”„ë¦°íŠ¸ë¡œ ì‘ì€ ë‹¨ìœ„ ê²€ì¦
- ì‚¬ìš©ì í”¼ë“œë°± ê¸°ë°˜ ìš°ì„ ìˆœìœ„ ì¬ì¡°ì •

### 2. ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ê· í˜•
**ìœ„í—˜**: ë³´ìƒ ì‹œìŠ¤í…œ ë¶ˆê· í˜•ìœ¼ë¡œ ì¸í•œ ì‚¬ìš©ì ì´íƒˆ
**ì™„í™”**:
- A/B í…ŒìŠ¤íŠ¸ë¡œ XP/ë ˆë²¨ ë°¸ëŸ°ìŠ¤ ì¡°ì •
- ì‚¬ìš©ì í–‰ë™ ë¶„ì„ìœ¼ë¡œ ì°¸ì—¬ íŒ¨í„´ ëª¨ë‹ˆí„°ë§
- ë‹¨ê³„ì  ë³´ìƒ ì‹œìŠ¤í…œìœ¼ë¡œ ì ì§„ì  ì¡°ì • ê°€ëŠ¥

### 3. ì»¤ë®¤ë‹ˆí‹° í™œì„±í™” ì‹¤íŒ¨
**ìœ„í—˜**: ìœ„í‚¤/ì‡¼ì¼€ì´ìŠ¤ ë“± UGC ê¸°ëŠ¥ ì‚¬ìš©ë¥  ì €ì¡°
**ì™„í™”**:
- ì´ˆê¸° ê³ í’ˆì§ˆ ì‹œë“œ ì½˜í…ì¸  í”Œë«í¼ ì§ì ‘ ì œê³µ
- ì–¼ë¦¬ ì–´ë‹µí„° ëŒ€ìƒ ì½˜í…ì¸  ê¸°ì—¬ ì¸ì„¼í‹°ë¸Œ
- íë ˆì´ì…˜ì„ í†µí•œ í’ˆì§ˆ ê´€ë¦¬ ë° ë°œê²¬ ê°€ëŠ¥ì„± ì¦ëŒ€

## ë¹„ì¦ˆë‹ˆìŠ¤ ìœ„í—˜
### 1. ê²½ìŸì‚¬ ëŒ€ì‘
**ìœ„í—˜**: ê¸°ì¡´ ëŒ€í˜• í”Œë«í¼ì˜ ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ê¸°ëŠ¥ ì¶”ê°€
**ì™„í™”**:
- í•µì‹¬ ì°¨ë³„ì  (GTD + ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ í†µí•©)ì— ì§‘ì¤‘
- ì»¤ë®¤ë‹ˆí‹° ê¸°ë°˜ ë°©ì–´ë§‰ êµ¬ì¶•
- ë¹ ë¥¸ í˜ì‹  ì£¼ê¸°ë¡œ ê¸°ëŠ¥ ìš°ìœ„ ìœ ì§€

### 2. ìˆ˜ìµí™” ì‹œì 
**ìœ„í—˜**: B2B ì „í™˜ ì‹œì  ì˜¤íŒìœ¼ë¡œ ì¸í•œ í˜„ê¸ˆ íë¦„ ë¬¸ì œ
**ì™„í™”**:
- ê°œì¸ ì‚¬ìš©ì MAU 10K+ ë‹¬ì„± í›„ B2B ì§„ì…
- í”„ë¦¬ë¯¸ì—„ ê°œì¸ ìš”ê¸ˆì œë¡œ ì¡°ê¸° ìˆ˜ìµí™” í…ŒìŠ¤íŠ¸
- ì‹œë“œ íˆ¬ìë¡œ ì¶©ë¶„í•œ ê°œë°œ ë²„í¼ í™•ë³´

# Appendix  
## ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ë°¸ëŸ°ìŠ¤ ì„¤ì •
### XP íšë“ ê¸°ì¤€í‘œ
- ì¼ì¼ ì—…ë¬´ ì™„ë£Œ: 10 XP
- í”„ë¡œì íŠ¸ ë§ˆì¼ìŠ¤í†¤: 100 XP  
- í”„ë¡œì íŠ¸ ì™„ë£Œ: 250 XP
- ìœ„í‚¤ ë¬¸ì„œ ì‘ì„±: 20 XP
- ì‡¼ì¼€ì´ìŠ¤ ê²Œì‹œ: 50 XP

### ë ˆë²¨ì—… ìš”êµ¬ XP (ì§€ìˆ˜ì  ì¦ê°€)
```
Level 1â†’2: 100 XP (ëˆ„ì  100)
Level 2â†’3: 150 XP (ëˆ„ì  250)  
Level 3â†’4: 225 XP (ëˆ„ì  475)
...
Level 10: ì•½ 2,500 XP (ì¼ì¼ í™œì„± ì‚¬ìš©ì ê¸°ì¤€ 3-4ê°œì›”)
```

## ê¸°ìˆ  ìŠ¤íƒ ìƒì„¸
### íŒ¨í‚¤ì§€ ì˜ì¡´ì„±
```json
{
  "frontend": {
    "next": "14.x",
    "typescript": "5.x", 
    "tailwindcss": "3.x",
    "zustand": "4.x",
    "@headlessui/react": "1.x"
  },
  "backend": {
    "@nestjs/core": "10.x",
    "typeorm": "0.3.x",
    "socket.io": "4.x",
    "@nestjs/jwt": "10.x",
    "passport-google-oauth20": "2.x"
  }
}
```

### í™˜ê²½ ì„¤ì •
```env
# ê°œë°œ í™˜ê²½
DATABASE_URL=postgresql://localhost:5432/workly_dev
GOOGLE_CLIENT_ID=xxx
GOOGLE_CLIENT_SECRET=xxx
JWT_SECRET=xxx
REDIS_URL=redis://localhost:6379

# í”„ë¡œë•ì…˜ ì¶”ê°€
AWS_ACCESS_KEY_ID=xxx
AWS_SECRET_ACCESS_KEY=xxx  
SENTRY_DSN=xxx
```

## ì‚¬ìš©ì ì—°êµ¬ ê²°ê³¼ (ì°¸ê³ )
### í•µì‹¬ ì‚¬ìš©ì ë‹ˆì¦ˆ
1. **ëª…í™•í•œ ìš°ì„ ìˆœìœ„**: "ë¬´ì—‡ì„ ë¨¼ì € í•´ì•¼ í• ì§€ ëª¨ë¥´ê² ì–´ìš”"
2. **ì„±ì·¨ê°**: "ì™„ë£Œí•´ë„ í—ˆë¬´í•´ìš”, ì„±ì¥ì´ ë³´ì´ì§€ ì•Šì•„ìš”"  
3. **íŒ€ ì†Œí†µ**: "ì—…ë¬´ì™€ ëŒ€í™”ê°€ ë”°ë¡œ ë†€ì•„ìš”"
4. **ë™ê¸° ë¶€ì—¬**: "ê³„ì† ì‚¬ìš©í•  ì´ìœ ê°€ ë¶€ì¡±í•´ìš”"

### ê²½ìŸ ë¶„ì„
- **Todoist**: ê°œì¸ ì¤‘ì‹¬, ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ë¶€ì¡±
- **Asana**: íŒ€ ì¤‘ì‹¬, ê°œì¸ ì„±ì¥ ì§€ì› ë¶€ì¡±  
- **Habitica**: ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ê°•í•˜ë‚˜ í˜‘ì—… ì•½í•¨
- **Notion**: ìœ ì—°í•˜ë‚˜ ëŸ¬ë‹ ì»¤ë¸Œ ë†’ìŒ

â†’ **ì›Œí´ë¦¬ì˜ í¬ì§€ì…˜**: "ê°œì¸ ì„±ì¥ê³¼ íŒ€ í˜‘ì—…ì„ ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ìœ¼ë¡œ ì—°ê²°í•˜ëŠ” ìœ ì¼í•œ í”Œë«í¼"
</PRD>
</file>

<file path=".taskmaster/reports/task-complexity-report.json">
{
	"meta": {
		"generatedAt": "2025-07-25T13:38:34.837Z",
		"tasksAnalyzed": 12,
		"totalTasks": 12,
		"analysisCount": 12,
		"thresholdScore": 5,
		"projectName": "Taskmaster",
		"usedResearch": true
	},
	"complexityAnalysis": [
		{
			"taskId": 1,
			"taskTitle": "Initialize Monorepo & CI/CD Pipeline",
			"complexityScore": 8,
			"recommendedSubtasks": 8,
			"expansionPrompt": "Break down the monorepo setup, Dockerization for both applications (dev/prod), and the CI/CD pipeline configuration for automated build, test, and deployment using GitHub Actions.",
			"reasoning": "This task is highly complex due to its foundational nature, involving multiple distinct technologies (monorepo tools, Docker, CI/CD) and environments (dev, prod) for two different applications. Each component requires careful configuration and integration, making it prone to environmental issues and requiring significant setup time. The recommended subtasks reflect these distinct areas."
		},
		{
			"taskId": 2,
			"taskTitle": "Implement Google OAuth & JWT Authentication",
			"complexityScore": 7,
			"recommendedSubtasks": 7,
			"expansionPrompt": "Detail the steps for implementing Google OAuth 2.0 on the NestJS backend, including JWT generation and secure storage, and integrating the login flow and protected routes on the Next.js frontend.",
			"reasoning": "Authentication is a critical and security-sensitive area. Implementing Google OAuth involves external API interaction, callback handling, and secure token management. JWT implementation requires careful consideration of generation, validation, and secure storage (e.g., HttpOnly cookies vs. local storage). The task also includes user registration/login logic and protecting API routes, which adds to the complexity."
		},
		{
			"taskId": 3,
			"taskTitle": "Design & Implement Core Data Models (PostgreSQL, TypeORM)",
			"complexityScore": 6,
			"recommendedSubtasks": 7,
			"expansionPrompt": "Outline the process for setting up PostgreSQL and TypeORM, defining the User, Task, and Project entities with their relationships, and creating initial database migrations.",
			"reasoning": "This task is foundational for the application's data layer. It involves setting up the database, configuring the ORM, and carefully designing the core data models and their relationships. While individual CRUD operations might be straightforward, ensuring correct relationships, data integrity, and a robust migration strategy adds significant complexity."
		},
		{
			"taskId": 4,
			"taskTitle": "Configure Socket.io for Real-time Updates",
			"complexityScore": 5,
			"recommendedSubtasks": 5,
			"expansionPrompt": "Detail the steps for configuring Socket.io on the NestJS backend and integrating it with the Next.js frontend, including initial event handling and client-side connection management.",
			"reasoning": "Implementing real-time communication with Socket.io involves setting up a persistent connection layer on both the backend and frontend. This requires understanding WebSocket protocols, managing connections, and handling event-driven communication, which is more complex than typical REST API interactions."
		},
		{
			"taskId": 5,
			"taskTitle": "Develop Core UI/UX & Mobile-First Layout",
			"complexityScore": 6,
			"recommendedSubtasks": 7,
			"expansionPrompt": "Break down the development of the core UI/UX, including Tailwind CSS setup, responsive layout implementation, and the creation of foundational navigation and UI components for a mobile-first design.",
			"reasoning": "This task is foundational for the entire frontend. It involves not just styling but establishing a robust, responsive, and maintainable UI architecture. Considerations like mobile-first design, component reusability, and adherence to design principles add to its complexity beyond simple styling."
		},
		{
			"taskId": 6,
			"taskTitle": "Implement User Profile & XP/Level System",
			"complexityScore": 5,
			"recommendedSubtasks": 6,
			"expansionPrompt": "Detail the implementation of the user profile page, including backend logic for XP acquisition and level progression, and frontend display of XP and level.",
			"reasoning": "This task combines backend data model updates and logic with frontend UI development. The gamification logic (XP calculation, level progression) requires careful implementation and testing to ensure correctness and prevent exploits."
		},
		{
			"taskId": 7,
			"taskTitle": "Develop GTD-based Task Management System",
			"complexityScore": 7,
			"recommendedSubtasks": 7,
			"expansionPrompt": "Break down the development of the GTD-based task management system, including the 5-step task creation flow, full CRUD operations, and smart filtering capabilities for 'Today', 'Completed', and 'All' tasks.",
			"reasoning": "This is a central feature of the application. The 'GTD 5-step sequential process' implies a more complex task creation flow than a simple form. Implementing robust CRUD operations, along with 'smart filtering' (which often involves date calculations and status management), requires significant backend logic and corresponding frontend UI."
		},
		{
			"taskId": 8,
			"taskTitle": "Implement Project Creation & Basic Collaboration",
			"complexityScore": 6,
			"recommendedSubtasks": 6,
			"expansionPrompt": "Detail the implementation of project creation and basic collaboration features, including backend CRUD operations for projects and member management, and corresponding frontend UI for creation, listing, and detail views.",
			"reasoning": "This task involves standard CRUD operations for projects. However, the 'invite/manage members' aspect introduces additional complexity related to user relationships, potential roles, and ensuring proper access control, which goes beyond simple data persistence."
		},
		{
			"taskId": 9,
			"taskTitle": "Develop Real-time Project Chat with Slash Commands",
			"complexityScore": 7,
			"recommendedSubtasks": 7,
			"expansionPrompt": "Break down the development of the real-time project chat, including Socket.io integration for message exchange, backend logic for parsing and executing slash commands like /add-task, and the frontend chat UI with message history.",
			"reasoning": "This task builds upon existing Socket.io infrastructure but adds significant complexity. Real-time chat requires robust message handling, history management, and efficient UI updates. The addition of slash commands introduces parsing logic and cross-feature integration (e.g., with the task service), making it a multi-faceted and challenging feature."
		},
		{
			"taskId": 10,
			"taskTitle": "Implement Momentum Score & Advanced Task Filtering",
			"complexityScore": 6,
			"recommendedSubtasks": 7,
			"expansionPrompt": "Detail the implementation of the momentum score using the RICE model, including backend calculation and integration, and the development of advanced task filtering ('Later') and global search functionalities.",
			"reasoning": "This task involves implementing a specific algorithm (RICE model) for task prioritization, which requires careful calculation and integration into task updates. Additionally, advanced filtering and global search capabilities necessitate efficient database queries and robust frontend UI to handle dynamic data display."
		},
		{
			"taskId": 11,
			"taskTitle": "Integrate Google Calendar for Due Date Sync",
			"complexityScore": 7,
			"recommendedSubtasks": 6,
			"expansionPrompt": "Break down the integration with Google Calendar API for due date synchronization, including backend setup for event creation/update and frontend UI for connecting the calendar and managing sync.",
			"reasoning": "Integrating with an external API like Google Calendar is inherently complex. It involves managing OAuth 2.0 for specific scopes, handling API rate limits, implementing robust error handling, and ensuring reliable one-way synchronization of events based on task due dates."
		},
		{
			"taskId": 12,
			"taskTitle": "Establish Comprehensive Testing & Monitoring",
			"complexityScore": 7,
			"recommendedSubtasks": 7,
			"expansionPrompt": "Detail the establishment of a comprehensive testing suite, including unit, integration, and end-to-end tests, and the setup of Sentry for error tracking and basic application performance monitoring.",
			"reasoning": "This task is crucial for application quality and stability. It involves setting up and configuring multiple testing frameworks (unit, integration, E2E) for both frontend and backend, which requires distinct configurations and test writing strategies. Additionally, integrating a monitoring solution like Sentry adds another layer of complexity for error tracking and observability."
		}
	]
}
</file>

<file path=".taskmaster/templates/example_prd.txt">
<context>
# Overview  
[Provide a high-level overview of your product here. Explain what problem it solves, who it's for, and why it's valuable.]

# Core Features  
[List and describe the main features of your product. For each feature, include:
- What it does
- Why it's important
- How it works at a high level]

# User Experience  
[Describe the user journey and experience. Include:
- User personas
- Key user flows
- UI/UX considerations]
</context>
<PRD>
# Technical Architecture  
[Outline the technical implementation details:
- System components
- Data models
- APIs and integrations
- Infrastructure requirements]

# Development Roadmap  
[Break down the development process into phases:
- MVP requirements
- Future enhancements
- Do not think about timelines whatsoever -- all that matters is scope and detailing exactly what needs to be build in each phase so it can later be cut up into tasks]

# Logical Dependency Chain
[Define the logical order of development:
- Which features need to be built first (foundation)
- Getting as quickly as possible to something usable/visible front end that works
- Properly pacing and scoping each feature so it is atomic but can also be built upon and improved as development approaches]

# Risks and Mitigations  
[Identify potential risks and how they'll be addressed:
- Technical challenges
- Figuring out the MVP that we can build upon
- Resource constraints]

# Appendix  
[Include any additional information:
- Research findings
- Technical specifications]
</PRD>
</file>

<file path=".taskmaster/CLAUDE.md">
# Task Master AI - Agent Integration Guide

## Essential Commands

### Core Workflow Commands

```bash
# Project Setup
task-master init                                    # Initialize Task Master in current project
task-master parse-prd .taskmaster/docs/prd.txt      # Generate tasks from PRD document
task-master models --setup                        # Configure AI models interactively

# Daily Development Workflow
task-master list                                   # Show all tasks with status
task-master next                                   # Get next available task to work on
task-master show <id>                             # View detailed task information (e.g., task-master show 1.2)
task-master set-status --id=<id> --status=done    # Mark task complete

# Task Management
task-master add-task --prompt="description" --research        # Add new task with AI assistance
task-master expand --id=<id> --research --force              # Break task into subtasks
task-master update-task --id=<id> --prompt="changes"         # Update specific task
task-master update --from=<id> --prompt="changes"            # Update multiple tasks from ID onwards
task-master update-subtask --id=<id> --prompt="notes"        # Add implementation notes to subtask

# Analysis & Planning
task-master analyze-complexity --research          # Analyze task complexity
task-master complexity-report                      # View complexity analysis
task-master expand --all --research               # Expand all eligible tasks

# Dependencies & Organization
task-master add-dependency --id=<id> --depends-on=<id>       # Add task dependency
task-master move --from=<id> --to=<id>                       # Reorganize task hierarchy
task-master validate-dependencies                            # Check for dependency issues
task-master generate                                         # Update task markdown files (usually auto-called)
```

## Key Files & Project Structure

### Core Files

- `.taskmaster/tasks/tasks.json` - Main task data file (auto-managed)
- `.taskmaster/config.json` - AI model configuration (use `task-master models` to modify)
- `.taskmaster/docs/prd.txt` - Product Requirements Document for parsing
- `.taskmaster/tasks/*.txt` - Individual task files (auto-generated from tasks.json)
- `.env` - API keys for CLI usage

### Claude Code Integration Files

- `CLAUDE.md` - Auto-loaded context for Claude Code (this file)
- `.claude/settings.json` - Claude Code tool allowlist and preferences
- `.claude/commands/` - Custom slash commands for repeated workflows
- `.mcp.json` - MCP server configuration (project-specific)

### Directory Structure

```
project/
â”œâ”€â”€ .taskmaster/
â”‚   â”œâ”€â”€ tasks/              # Task files directory
â”‚   â”‚   â”œâ”€â”€ tasks.json      # Main task database
â”‚   â”‚   â”œâ”€â”€ task-1.md      # Individual task files
â”‚   â”‚   â””â”€â”€ task-2.md
â”‚   â”œâ”€â”€ docs/              # Documentation directory
â”‚   â”‚   â”œâ”€â”€ prd.txt        # Product requirements
â”‚   â”œâ”€â”€ reports/           # Analysis reports directory
â”‚   â”‚   â””â”€â”€ task-complexity-report.json
â”‚   â”œâ”€â”€ templates/         # Template files
â”‚   â”‚   â””â”€â”€ example_prd.txt  # Example PRD template
â”‚   â””â”€â”€ config.json        # AI models & settings
â”œâ”€â”€ .claude/
â”‚   â”œâ”€â”€ settings.json      # Claude Code configuration
â”‚   â””â”€â”€ commands/         # Custom slash commands
â”œâ”€â”€ .env                  # API keys
â”œâ”€â”€ .mcp.json            # MCP configuration
â””â”€â”€ CLAUDE.md            # This file - auto-loaded by Claude Code
```

## MCP Integration

Task Master provides an MCP server that Claude Code can connect to. Configure in `.mcp.json`:

```json
{
  "mcpServers": {
    "task-master-ai": {
      "command": "npx",
      "args": ["-y", "--package=task-master-ai", "task-master-ai"],
      "env": {
        "ANTHROPIC_API_KEY": "your_key_here",
        "PERPLEXITY_API_KEY": "your_key_here",
        "OPENAI_API_KEY": "OPENAI_API_KEY_HERE",
        "GOOGLE_API_KEY": "GOOGLE_API_KEY_HERE",
        "XAI_API_KEY": "XAI_API_KEY_HERE",
        "OPENROUTER_API_KEY": "OPENROUTER_API_KEY_HERE",
        "MISTRAL_API_KEY": "MISTRAL_API_KEY_HERE",
        "AZURE_OPENAI_API_KEY": "AZURE_OPENAI_API_KEY_HERE",
        "OLLAMA_API_KEY": "OLLAMA_API_KEY_HERE"
      }
    }
  }
}
```

### Essential MCP Tools

```javascript
help; // = shows available taskmaster commands
// Project setup
initialize_project; // = task-master init
parse_prd; // = task-master parse-prd

// Daily workflow
get_tasks; // = task-master list
next_task; // = task-master next
get_task; // = task-master show <id>
set_task_status; // = task-master set-status

// Task management
add_task; // = task-master add-task
expand_task; // = task-master expand
update_task; // = task-master update-task
update_subtask; // = task-master update-subtask
update; // = task-master update

// Analysis
analyze_project_complexity; // = task-master analyze-complexity
complexity_report; // = task-master complexity-report
```

## Claude Code Workflow Integration

### Standard Development Workflow

#### 1. Project Initialization

```bash
# Initialize Task Master
task-master init

# Create or obtain PRD, then parse it
task-master parse-prd .taskmaster/docs/prd.txt

# Analyze complexity and expand tasks
task-master analyze-complexity --research
task-master expand --all --research
```

If tasks already exist, another PRD can be parsed (with new information only!) using parse-prd with --append flag. This will add the generated tasks to the existing list of tasks..

#### 2. Daily Development Loop

```bash
# Start each session
task-master next                           # Find next available task
task-master show <id>                     # Review task details

# During implementation, check in code context into the tasks and subtasks
task-master update-subtask --id=<id> --prompt="implementation notes..."

# Complete tasks
task-master set-status --id=<id> --status=done
```

#### 3. Multi-Claude Workflows

For complex projects, use multiple Claude Code sessions:

```bash
# Terminal 1: Main implementation
cd project && claude

# Terminal 2: Testing and validation
cd project-test-worktree && claude

# Terminal 3: Documentation updates
cd project-docs-worktree && claude
```

### Custom Slash Commands

Create `.claude/commands/taskmaster-next.md`:

```markdown
Find the next available Task Master task and show its details.

Steps:

1. Run `task-master next` to get the next task
2. If a task is available, run `task-master show <id>` for full details
3. Provide a summary of what needs to be implemented
4. Suggest the first implementation step
```

Create `.claude/commands/taskmaster-complete.md`:

```markdown
Complete a Task Master task: $ARGUMENTS

Steps:

1. Review the current task with `task-master show $ARGUMENTS`
2. Verify all implementation is complete
3. Run any tests related to this task
4. Mark as complete: `task-master set-status --id=$ARGUMENTS --status=done`
5. Show the next available task with `task-master next`
```

## Tool Allowlist Recommendations

Add to `.claude/settings.json`:

```json
{
  "allowedTools": [
    "Edit",
    "Bash(task-master *)",
    "Bash(git commit:*)",
    "Bash(git add:*)",
    "Bash(npm run *)",
    "mcp__task_master_ai__*"
  ]
}
```

## Configuration & Setup

### API Keys Required

At least **one** of these API keys must be configured:

- `ANTHROPIC_API_KEY` (Claude models) - **Recommended**
- `PERPLEXITY_API_KEY` (Research features) - **Highly recommended**
- `OPENAI_API_KEY` (GPT models)
- `GOOGLE_API_KEY` (Gemini models)
- `MISTRAL_API_KEY` (Mistral models)
- `OPENROUTER_API_KEY` (Multiple models)
- `XAI_API_KEY` (Grok models)

An API key is required for any provider used across any of the 3 roles defined in the `models` command.

### Model Configuration

```bash
# Interactive setup (recommended)
task-master models --setup

# Set specific models
task-master models --set-main claude-3-5-sonnet-20241022
task-master models --set-research perplexity-llama-3.1-sonar-large-128k-online
task-master models --set-fallback gpt-4o-mini
```

## Task Structure & IDs

### Task ID Format

- Main tasks: `1`, `2`, `3`, etc.
- Subtasks: `1.1`, `1.2`, `2.1`, etc.
- Sub-subtasks: `1.1.1`, `1.1.2`, etc.

### Task Status Values

- `pending` - Ready to work on
- `in-progress` - Currently being worked on
- `done` - Completed and verified
- `deferred` - Postponed
- `cancelled` - No longer needed
- `blocked` - Waiting on external factors

### Task Fields

```json
{
  "id": "1.2",
  "title": "Implement user authentication",
  "description": "Set up JWT-based auth system",
  "status": "pending",
  "priority": "high",
  "dependencies": ["1.1"],
  "details": "Use bcrypt for hashing, JWT for tokens...",
  "testStrategy": "Unit tests for auth functions, integration tests for login flow",
  "subtasks": []
}
```

## Claude Code Best Practices with Task Master

### Context Management

- Use `/clear` between different tasks to maintain focus
- This CLAUDE.md file is automatically loaded for context
- Use `task-master show <id>` to pull specific task context when needed

### Iterative Implementation

1. `task-master show <subtask-id>` - Understand requirements
2. Explore codebase and plan implementation
3. `task-master update-subtask --id=<id> --prompt="detailed plan"` - Log plan
4. `task-master set-status --id=<id> --status=in-progress` - Start work
5. Implement code following logged plan
6. `task-master update-subtask --id=<id> --prompt="what worked/didn't work"` - Log progress
7. `task-master set-status --id=<id> --status=done` - Complete task

### Complex Workflows with Checklists

For large migrations or multi-step processes:

1. Create a markdown PRD file describing the new changes: `touch task-migration-checklist.md` (prds can be .txt or .md)
2. Use Taskmaster to parse the new prd with `task-master parse-prd --append` (also available in MCP)
3. Use Taskmaster to expand the newly generated tasks into subtasks. Consdier using `analyze-complexity` with the correct --to and --from IDs (the new ids) to identify the ideal subtask amounts for each task. Then expand them.
4. Work through items systematically, checking them off as completed
5. Use `task-master update-subtask` to log progress on each task/subtask and/or updating/researching them before/during implementation if getting stuck

### Git Integration

Task Master works well with `gh` CLI:

```bash
# Create PR for completed task
gh pr create --title "Complete task 1.2: User authentication" --body "Implements JWT auth system as specified in task 1.2"

# Reference task in commits
git commit -m "feat: implement JWT auth (task 1.2)"
```

### Parallel Development with Git Worktrees

```bash
# Create worktrees for parallel task development
git worktree add ../project-auth feature/auth-system
git worktree add ../project-api feature/api-refactor

# Run Claude Code in each worktree
cd ../project-auth && claude    # Terminal 1: Auth work
cd ../project-api && claude     # Terminal 2: API work
```

## Troubleshooting

### AI Commands Failing

```bash
# Check API keys are configured
cat .env                           # For CLI usage

# Verify model configuration
task-master models

# Test with different model
task-master models --set-fallback gpt-4o-mini
```

### MCP Connection Issues

- Check `.mcp.json` configuration
- Verify Node.js installation
- Use `--mcp-debug` flag when starting Claude Code
- Use CLI as fallback if MCP unavailable

### Task File Sync Issues

```bash
# Regenerate task files from tasks.json
task-master generate

# Fix dependency issues
task-master fix-dependencies
```

DO NOT RE-INITIALIZE. That will not do anything beyond re-adding the same Taskmaster core files.

## Important Notes

### AI-Powered Operations

These commands make AI calls and may take up to a minute:

- `parse_prd` / `task-master parse-prd`
- `analyze_project_complexity` / `task-master analyze-complexity`
- `expand_task` / `task-master expand`
- `expand_all` / `task-master expand --all`
- `add_task` / `task-master add-task`
- `update` / `task-master update`
- `update_task` / `task-master update-task`
- `update_subtask` / `task-master update-subtask`

### File Management

- Never manually edit `tasks.json` - use commands instead
- Never manually edit `.taskmaster/config.json` - use `task-master models`
- Task markdown files in `tasks/` are auto-generated
- Run `task-master generate` after manual changes to tasks.json

### Claude Code Session Management

- Use `/clear` frequently to maintain focused context
- Create custom slash commands for repeated Task Master workflows
- Configure tool allowlist to streamline permissions
- Use headless mode for automation: `claude -p "task-master next"`

### Multi-Task Updates

- Use `update --from=<id>` to update multiple future tasks
- Use `update-task --id=<id>` for single task updates
- Use `update-subtask --id=<id>` for implementation logging

### Research Mode

- Add `--research` flag for research-based AI enhancement
- Requires a research model API key like Perplexity (`PERPLEXITY_API_KEY`) in environment
- Provides more informed task creation and updates
- Recommended for complex technical tasks

---

_This guide ensures Claude Code has immediate access to Task Master's essential functionality for agentic development workflows._
</file>

<file path=".taskmaster/config.json">
{
  "models": {
    "main": {
      "provider": "gemini-cli",
      "modelId": "gemini-2.5-pro",
      "maxTokens": 65536,
      "temperature": 0.2
    },
    "research": {
      "provider": "gemini-cli",
      "modelId": "gemini-2.5-flash",
      "maxTokens": 65536,
      "temperature": 0.1
    },
    "fallback": {
      "provider": "gemini-cli",
      "modelId": "gemini-2.5-pro",
      "maxTokens": 65536,
      "temperature": 0.2
    }
  },
  "global": {
    "logLevel": "info",
    "debug": false,
    "defaultNumTasks": 10,
    "defaultSubtasks": 5,
    "defaultPriority": "medium",
    "projectName": "Taskmaster",
    "ollamaBaseURL": "http://localhost:11434/api",
    "bedrockBaseURL": "https://bedrock.us-east-1.amazonaws.com",
    "responseLanguage": "í•œêµ­ì–´",
    "defaultTag": "master",
    "azureOpenaiBaseURL": "https://your-endpoint.openai.azure.com/",
    "userId": "1234567890"
  },
  "claudeCode": {}
}
</file>

<file path=".taskmaster/state.json">
{
  "currentTag": "master",
  "lastSwitched": "2025-07-25T13:17:16.956Z",
  "branchTagMapping": {},
  "migrationNoticeShown": false
}
</file>

<file path="backend/src/database/entities/audit-log.entity.ts">
import {
  Entity,
  PrimaryGeneratedColumn,
  Column,
  CreateDateColumn,
  Index,
} from 'typeorm';

@Entity('audit_logs')
@Index(['adminId'])
@Index(['action'])
@Index(['targetType'])
@Index(['timestamp'])
export class AuditLog {
  @PrimaryGeneratedColumn('uuid')
  id: string;

  @Column('uuid')
  adminId: string;

  @Column()
  adminName: string;

  @Column()
  action: string;

  @Column()
  targetType: string;

  @Column({ nullable: true })
  targetId?: string;

  @Column({ nullable: true })
  targetName?: string;

  @Column('jsonb', { nullable: true })
  changes?: {
    before?: Record<string, any>;
    after?: Record<string, any>;
  };

  @Column()
  ipAddress: string;

  @Column()
  userAgent: string;

  @CreateDateColumn()
  timestamp: Date;

  @Column({ default: true })
  success: boolean;

  @Column({ nullable: true })
  errorMessage?: string;
}
</file>

<file path="backend/src/database/entities/task-comment.entity.ts">
import {
  Entity,
  PrimaryGeneratedColumn,
  Column,
  CreateDateColumn,
  UpdateDateColumn,
  ManyToOne,
  OneToMany,
  Index,
} from 'typeorm';
import { Task } from './task.entity';
import { User } from './user.entity';

@Entity('task_comments')
@Index(['taskId'])
@Index(['authorId'])
@Index(['parentId'])
@Index(['createdAt'])
@Index(['isInternal'])
export class TaskComment {
  @PrimaryGeneratedColumn('uuid')
  id: string;

  @Column('text')
  content: string;

  @Column()
  taskId: string;

  @Column()
  authorId: string;

  @Column({ nullable: true })
  parentId?: string;

  @Column({ default: false })
  isInternal: boolean;

  @Column({ default: false })
  isEdited: boolean;

  @CreateDateColumn()
  createdAt: Date;

  @UpdateDateColumn()
  updatedAt: Date;

  // ê´€ê³„ ì„¤ì •
  @ManyToOne(() => Task, task => task.comments, {
    onDelete: 'CASCADE'
  })
  task: Task;

  @ManyToOne(() => User, { eager: true })
  author: User;

  @ManyToOne(() => TaskComment, comment => comment.replies, {
    onDelete: 'CASCADE'
  })
  parent?: TaskComment;

  @OneToMany(() => TaskComment, comment => comment.parent)
  replies: TaskComment[];

  // ë‹µê¸€ì¸ì§€ í™•ì¸
  isReply(): boolean {
    return this.parentId !== null;
  }

  // ë‹µê¸€ì´ ìˆëŠ”ì§€ í™•ì¸
  hasReplies(): boolean {
    return this.replies && this.replies.length > 0;
  }

  // ë‚´ìš© ì—…ë°ì´íŠ¸
  updateContent(content: string): void {
    this.content = content;
    this.isEdited = true;
  }

  // ë‚´ë¶€ ëŒ“ê¸€ë¡œ ì„¤ì •
  markAsInternal(): void {
    this.isInternal = true;
  }

  // ê³µê°œ ëŒ“ê¸€ë¡œ ì„¤ì •
  markAsPublic(): void {
    this.isInternal = false;
  }

  // ì‘ì„±ì í™•ì¸
  isAuthoredBy(userId: string): boolean {
    return this.authorId === userId;
  }

  // í¸ì§‘ ê°€ëŠ¥í•œì§€ í™•ì¸
  canEdit(userId: string): boolean {
    return this.isAuthoredBy(userId);
  }

  // ì‚­ì œ ê°€ëŠ¥í•œì§€ í™•ì¸
  canDelete(userId: string): boolean {
    return this.isAuthoredBy(userId);
  }
}
</file>

<file path="backend/src/database/entities/task-label.entity.ts">
import {
  Entity,
  PrimaryGeneratedColumn,
  Column,
  CreateDateColumn,
  UpdateDateColumn,
  ManyToOne,
  ManyToMany,
  Index,
} from 'typeorm';
import { Task } from './task.entity';
import { Project } from './project.entity';

@Entity('task_labels')
@Index(['name'])
@Index(['projectId'])
export class TaskLabel {
  @PrimaryGeneratedColumn('uuid')
  id: string;

  @Column()
  name: string;

  @Column({ length: 7 })
  color: string;

  @Column('text', { nullable: true })
  description?: string;

  @Column({ nullable: true })
  projectId?: string;

  @CreateDateColumn()
  createdAt: Date;

  @UpdateDateColumn()
  updatedAt: Date;

  // ê´€ê³„ ì„¤ì •
  @ManyToOne(() => Project, {
    onDelete: 'CASCADE'
  })
  project?: Project;

  @ManyToMany(() => Task, task => task.labels)
  tasks: Task[];

  // ì „ì—­ ë¼ë²¨ì¸ì§€ í™•ì¸
  isGlobal(): boolean {
    return this.projectId === null;
  }

  // í”„ë¡œì íŠ¸ë³„ ë¼ë²¨ì¸ì§€ í™•ì¸
  isProjectSpecific(): boolean {
    return this.projectId !== null;
  }
}
</file>

<file path="backend/src/database/migrations/1706000000000-initial-schema.ts">
import { MigrationInterface, QueryRunner } from 'typeorm';

export class InitialSchema1706000000000 implements MigrationInterface {
  name = 'InitialSchema1706000000000';

  public async up(queryRunner: QueryRunner): Promise<void> {
    // Users í…Œì´ë¸” ìƒì„±
    await queryRunner.query(`
      CREATE TABLE "users" (
        "id" uuid NOT NULL DEFAULT uuid_generate_v4(),
        "email" character varying NOT NULL,
        "password" character varying NOT NULL,
        "name" character varying NOT NULL,
        "avatar" character varying,
        "role" "public"."users_role_enum" NOT NULL DEFAULT 'member',
        "status" "public"."users_status_enum" NOT NULL DEFAULT 'pending_verification',
        "profile" jsonb NOT NULL,
        "preferences" jsonb NOT NULL,
        "lastLoginAt" TIMESTAMP,
        "emailVerifiedAt" TIMESTAMP,
        "googleId" character varying,
        "resetPasswordToken" character varying,
        "resetPasswordExpiresAt" TIMESTAMP,
        "emailVerificationToken" character varying,
        "createdAt" TIMESTAMP NOT NULL DEFAULT now(),
        "updatedAt" TIMESTAMP NOT NULL DEFAULT now(),
        CONSTRAINT "UQ_users_email" UNIQUE ("email"),
        CONSTRAINT "PK_users_id" PRIMARY KEY ("id")
      )
    `);

    // Users ì¸ë±ìŠ¤ ìƒì„±
    await queryRunner.query(`CREATE INDEX "IDX_users_email" ON "users" ("email")`);
    await queryRunner.query(`CREATE INDEX "IDX_users_googleId" ON "users" ("googleId")`);
    await queryRunner.query(`CREATE INDEX "IDX_users_status" ON "users" ("status")`);
    await queryRunner.query(`CREATE INDEX "IDX_users_role" ON "users" ("role")`);
    await queryRunner.query(`CREATE INDEX "IDX_users_createdAt" ON "users" ("createdAt")`);
    await queryRunner.query(`CREATE INDEX "IDX_users_lastLoginAt" ON "users" ("lastLoginAt")`);

    // Projects í…Œì´ë¸” ìƒì„±
    await queryRunner.query(`
      CREATE TABLE "projects" (
        "id" uuid NOT NULL DEFAULT uuid_generate_v4(),
        "title" character varying NOT NULL,
        "description" text,
        "status" "public"."projects_status_enum" NOT NULL DEFAULT 'planning',
        "priority" "public"."projects_priority_enum" NOT NULL DEFAULT 'medium',
        "startDate" date,
        "endDate" date,
        "progress" integer NOT NULL DEFAULT 0,
        "budget" numeric(12,2),
        "currency" character varying(3),
        "tags" text array NOT NULL DEFAULT '{}',
        "isArchived" boolean NOT NULL DEFAULT false,
        "isTemplate" boolean NOT NULL DEFAULT false,
        "templateId" character varying,
        "color" character varying(7),
        "icon" character varying,
        "visibility" "public"."projects_visibility_enum" NOT NULL DEFAULT 'private',
        "settings" jsonb NOT NULL,
        "ownerId" uuid NOT NULL,
        "createdAt" TIMESTAMP NOT NULL DEFAULT now(),
        "updatedAt" TIMESTAMP NOT NULL DEFAULT now(),
        CONSTRAINT "PK_projects_id" PRIMARY KEY ("id"),
        CONSTRAINT "FK_projects_ownerId" FOREIGN KEY ("ownerId") REFERENCES "users"("id") ON DELETE CASCADE
      )
    `);

    // Projects ì¸ë±ìŠ¤ ìƒì„±
    await queryRunner.query(`CREATE INDEX "IDX_projects_title" ON "projects" ("title")`);
    await queryRunner.query(`CREATE INDEX "IDX_projects_status" ON "projects" ("status")`);
    await queryRunner.query(`CREATE INDEX "IDX_projects_priority" ON "projects" ("priority")`);
    await queryRunner.query(`CREATE INDEX "IDX_projects_ownerId" ON "projects" ("ownerId")`);
    await queryRunner.query(`CREATE INDEX "IDX_projects_createdAt" ON "projects" ("createdAt")`);
    await queryRunner.query(`CREATE INDEX "IDX_projects_startDate" ON "projects" ("startDate")`);
    await queryRunner.query(`CREATE INDEX "IDX_projects_endDate" ON "projects" ("endDate")`);
    await queryRunner.query(`CREATE INDEX "IDX_projects_isArchived" ON "projects" ("isArchived")`);

    // Project Members í…Œì´ë¸” ìƒì„±
    await queryRunner.query(`
      CREATE TABLE "project_members" (
        "id" uuid NOT NULL DEFAULT uuid_generate_v4(),
        "projectId" uuid NOT NULL,
        "userId" uuid NOT NULL,
        "role" "public"."project_members_role_enum" NOT NULL DEFAULT 'member',
        "permissions" text array NOT NULL,
        "joinedAt" TIMESTAMP NOT NULL DEFAULT now(),
        CONSTRAINT "UQ_project_members_projectId_userId" UNIQUE ("projectId", "userId"),
        CONSTRAINT "PK_project_members_id" PRIMARY KEY ("id"),
        CONSTRAINT "FK_project_members_projectId" FOREIGN KEY ("projectId") REFERENCES "projects"("id") ON DELETE CASCADE,
        CONSTRAINT "FK_project_members_userId" FOREIGN KEY ("userId") REFERENCES "users"("id") ON DELETE CASCADE
      )
    `);

    // Project Members ì¸ë±ìŠ¤ ìƒì„±
    await queryRunner.query(`CREATE INDEX "IDX_project_members_projectId" ON "project_members" ("projectId")`);
    await queryRunner.query(`CREATE INDEX "IDX_project_members_userId" ON "project_members" ("userId")`);
    await queryRunner.query(`CREATE INDEX "IDX_project_members_role" ON "project_members" ("role")`);

    // Task Labels í…Œì´ë¸” ìƒì„±
    await queryRunner.query(`
      CREATE TABLE "task_labels" (
        "id" uuid NOT NULL DEFAULT uuid_generate_v4(),
        "name" character varying NOT NULL,
        "color" character varying(7) NOT NULL,
        "description" text,
        "projectId" uuid,
        "createdAt" TIMESTAMP NOT NULL DEFAULT now(),
        "updatedAt" TIMESTAMP NOT NULL DEFAULT now(),
        CONSTRAINT "PK_task_labels_id" PRIMARY KEY ("id"),
        CONSTRAINT "FK_task_labels_projectId" FOREIGN KEY ("projectId") REFERENCES "projects"("id") ON DELETE CASCADE
      )
    `);

    // Task Labels ì¸ë±ìŠ¤ ìƒì„±
    await queryRunner.query(`CREATE INDEX "IDX_task_labels_name" ON "task_labels" ("name")`);
    await queryRunner.query(`CREATE INDEX "IDX_task_labels_projectId" ON "task_labels" ("projectId")`);

    // Tasks í…Œì´ë¸” ìƒì„±
    await queryRunner.query(`
      CREATE TABLE "tasks" (
        "id" uuid NOT NULL DEFAULT uuid_generate_v4(),
        "title" character varying NOT NULL,
        "description" text,
        "status" "public"."tasks_status_enum" NOT NULL DEFAULT 'todo',
        "priority" "public"."tasks_priority_enum" NOT NULL DEFAULT 'medium',
        "type" "public"."tasks_type_enum" NOT NULL DEFAULT 'task',
        "dueDate" TIMESTAMP,
        "startDate" TIMESTAMP,
        "completedAt" TIMESTAMP,
        "projectId" uuid,
        "assigneeId" uuid,
        "reporterId" uuid NOT NULL,
        "parentTaskId" uuid,
        "estimatedHours" numeric(8,2),
        "actualHours" numeric(8,2) NOT NULL DEFAULT 0,
        "progress" integer NOT NULL DEFAULT 0,
        "workflowStageId" character varying,
        "tags" text array NOT NULL DEFAULT '{}',
        "customFields" jsonb NOT NULL DEFAULT '{}',
        "createdAt" TIMESTAMP NOT NULL DEFAULT now(),
        "updatedAt" TIMESTAMP NOT NULL DEFAULT now(),
        CONSTRAINT "PK_tasks_id" PRIMARY KEY ("id"),
        CONSTRAINT "FK_tasks_projectId" FOREIGN KEY ("projectId") REFERENCES "projects"("id") ON DELETE CASCADE,
        CONSTRAINT "FK_tasks_assigneeId" FOREIGN KEY ("assigneeId") REFERENCES "users"("id") ON DELETE SET NULL,
        CONSTRAINT "FK_tasks_reporterId" FOREIGN KEY ("reporterId") REFERENCES "users"("id") ON DELETE CASCADE,
        CONSTRAINT "FK_tasks_parentTaskId" FOREIGN KEY ("parentTaskId") REFERENCES "tasks"("id") ON DELETE CASCADE
      )
    `);

    // Tasks ì¸ë±ìŠ¤ ìƒì„±
    await queryRunner.query(`CREATE INDEX "IDX_tasks_title" ON "tasks" ("title")`);
    await queryRunner.query(`CREATE INDEX "IDX_tasks_status" ON "tasks" ("status")`);
    await queryRunner.query(`CREATE INDEX "IDX_tasks_priority" ON "tasks" ("priority")`);
    await queryRunner.query(`CREATE INDEX "IDX_tasks_type" ON "tasks" ("type")`);
    await queryRunner.query(`CREATE INDEX "IDX_tasks_projectId" ON "tasks" ("projectId")`);
    await queryRunner.query(`CREATE INDEX "IDX_tasks_assigneeId" ON "tasks" ("assigneeId")`);
    await queryRunner.query(`CREATE INDEX "IDX_tasks_reporterId" ON "tasks" ("reporterId")`);
    await queryRunner.query(`CREATE INDEX "IDX_tasks_parentTaskId" ON "tasks" ("parentTaskId")`);
    await queryRunner.query(`CREATE INDEX "IDX_tasks_dueDate" ON "tasks" ("dueDate")`);
    await queryRunner.query(`CREATE INDEX "IDX_tasks_createdAt" ON "tasks" ("createdAt")`);
    await queryRunner.query(`CREATE INDEX "IDX_tasks_workflowStageId" ON "tasks" ("workflowStageId")`);

    // Task Labels Mapping í…Œì´ë¸” ìƒì„± (ë‹¤ëŒ€ë‹¤ ê´€ê³„)
    await queryRunner.query(`
      CREATE TABLE "task_labels_mapping" (
        "taskId" uuid NOT NULL,
        "labelId" uuid NOT NULL,
        CONSTRAINT "PK_task_labels_mapping" PRIMARY KEY ("taskId", "labelId"),
        CONSTRAINT "FK_task_labels_mapping_taskId" FOREIGN KEY ("taskId") REFERENCES "tasks"("id") ON DELETE CASCADE,
        CONSTRAINT "FK_task_labels_mapping_labelId" FOREIGN KEY ("labelId") REFERENCES "task_labels"("id") ON DELETE CASCADE
      )
    `);

    // Task Watchers í…Œì´ë¸” ìƒì„± (ë‹¤ëŒ€ë‹¤ ê´€ê³„)
    await queryRunner.query(`
      CREATE TABLE "task_watchers" (
        "taskId" uuid NOT NULL,
        "userId" uuid NOT NULL,
        CONSTRAINT "PK_task_watchers" PRIMARY KEY ("taskId", "userId"),
        CONSTRAINT "FK_task_watchers_taskId" FOREIGN KEY ("taskId") REFERENCES "tasks"("id") ON DELETE CASCADE,
        CONSTRAINT "FK_task_watchers_userId" FOREIGN KEY ("userId") REFERENCES "users"("id") ON DELETE CASCADE
      )
    `);

    // Task Comments í…Œì´ë¸” ìƒì„±
    await queryRunner.query(`
      CREATE TABLE "task_comments" (
        "id" uuid NOT NULL DEFAULT uuid_generate_v4(),
        "content" text NOT NULL,
        "taskId" uuid NOT NULL,
        "authorId" uuid NOT NULL,
        "parentId" uuid,
        "isInternal" boolean NOT NULL DEFAULT false,
        "isEdited" boolean NOT NULL DEFAULT false,
        "createdAt" TIMESTAMP NOT NULL DEFAULT now(),
        "updatedAt" TIMESTAMP NOT NULL DEFAULT now(),
        CONSTRAINT "PK_task_comments_id" PRIMARY KEY ("id"),
        CONSTRAINT "FK_task_comments_taskId" FOREIGN KEY ("taskId") REFERENCES "tasks"("id") ON DELETE CASCADE,
        CONSTRAINT "FK_task_comments_authorId" FOREIGN KEY ("authorId") REFERENCES "users"("id") ON DELETE CASCADE,
        CONSTRAINT "FK_task_comments_parentId" FOREIGN KEY ("parentId") REFERENCES "task_comments"("id") ON DELETE CASCADE
      )
    `);

    // Task Comments ì¸ë±ìŠ¤ ìƒì„±
    await queryRunner.query(`CREATE INDEX "IDX_task_comments_taskId" ON "task_comments" ("taskId")`);
    await queryRunner.query(`CREATE INDEX "IDX_task_comments_authorId" ON "task_comments" ("authorId")`);
    await queryRunner.query(`CREATE INDEX "IDX_task_comments_parentId" ON "task_comments" ("parentId")`);
    await queryRunner.query(`CREATE INDEX "IDX_task_comments_createdAt" ON "task_comments" ("createdAt")`);
    await queryRunner.query(`CREATE INDEX "IDX_task_comments_isInternal" ON "task_comments" ("isInternal")`);

    // Task Dependencies í…Œì´ë¸” ìƒì„±
    await queryRunner.query(`
      CREATE TABLE "task_dependencies" (
        "id" uuid NOT NULL DEFAULT uuid_generate_v4(),
        "dependentTaskId" uuid NOT NULL,
        "dependsOnTaskId" uuid NOT NULL,
        "type" "public"."task_dependencies_type_enum" NOT NULL DEFAULT 'blocks',
        "createdAt" TIMESTAMP NOT NULL DEFAULT now(),
        CONSTRAINT "UQ_task_dependencies_dependentTaskId_dependsOnTaskId" UNIQUE ("dependentTaskId", "dependsOnTaskId"),
        CONSTRAINT "PK_task_dependencies_id" PRIMARY KEY ("id"),
        CONSTRAINT "FK_task_dependencies_dependentTaskId" FOREIGN KEY ("dependentTaskId") REFERENCES "tasks"("id") ON DELETE CASCADE,
        CONSTRAINT "FK_task_dependencies_dependsOnTaskId" FOREIGN KEY ("dependsOnTaskId") REFERENCES "tasks"("id") ON DELETE CASCADE
      )
    `);

    // Task Dependencies ì¸ë±ìŠ¤ ìƒì„±
    await queryRunner.query(`CREATE INDEX "IDX_task_dependencies_dependentTaskId" ON "task_dependencies" ("dependentTaskId")`);
    await queryRunner.query(`CREATE INDEX "IDX_task_dependencies_dependsOnTaskId" ON "task_dependencies" ("dependsOnTaskId")`);
    await queryRunner.query(`CREATE INDEX "IDX_task_dependencies_type" ON "task_dependencies" ("type")`);

    // Time Entries í…Œì´ë¸” ìƒì„±
    await queryRunner.query(`
      CREATE TABLE "time_entries" (
        "id" uuid NOT NULL DEFAULT uuid_generate_v4(),
        "description" text,
        "duration" integer NOT NULL,
        "startTime" TIMESTAMP NOT NULL,
        "endTime" TIMESTAMP,
        "taskId" uuid NOT NULL,
        "userId" uuid NOT NULL,
        "billable" boolean NOT NULL DEFAULT false,
        "approved" boolean NOT NULL DEFAULT false,
        "approvedBy" uuid,
        "approvedAt" TIMESTAMP,
        "createdAt" TIMESTAMP NOT NULL DEFAULT now(),
        "updatedAt" TIMESTAMP NOT NULL DEFAULT now(),
        CONSTRAINT "PK_time_entries_id" PRIMARY KEY ("id"),
        CONSTRAINT "FK_time_entries_taskId" FOREIGN KEY ("taskId") REFERENCES "tasks"("id") ON DELETE CASCADE,
        CONSTRAINT "FK_time_entries_userId" FOREIGN KEY ("userId") REFERENCES "users"("id") ON DELETE CASCADE,
        CONSTRAINT "FK_time_entries_approvedBy" FOREIGN KEY ("approvedBy") REFERENCES "users"("id") ON DELETE SET NULL
      )
    `);

    // Time Entries ì¸ë±ìŠ¤ ìƒì„±
    await queryRunner.query(`CREATE INDEX "IDX_time_entries_taskId" ON "time_entries" ("taskId")`);
    await queryRunner.query(`CREATE INDEX "IDX_time_entries_userId" ON "time_entries" ("userId")`);
    await queryRunner.query(`CREATE INDEX "IDX_time_entries_startTime" ON "time_entries" ("startTime")`);
    await queryRunner.query(`CREATE INDEX "IDX_time_entries_billable" ON "time_entries" ("billable")`);
    await queryRunner.query(`CREATE INDEX "IDX_time_entries_approved" ON "time_entries" ("approved")`);
    await queryRunner.query(`CREATE INDEX "IDX_time_entries_createdAt" ON "time_entries" ("createdAt")`);

    // Files í…Œì´ë¸” ìƒì„±
    await queryRunner.query(`
      CREATE TABLE "files" (
        "id" uuid NOT NULL DEFAULT uuid_generate_v4(),
        "filename" character varying NOT NULL,
        "originalName" character varying NOT NULL,
        "mimetype" character varying NOT NULL,
        "size" bigint NOT NULL,
        "path" character varying NOT NULL,
        "url" character varying NOT NULL,
        "thumbnailUrl" character varying,
        "uploaderId" uuid NOT NULL,
        "entityType" character varying,
        "entityId" character varying,
        "isPublic" boolean NOT NULL DEFAULT false,
        "isProcessed" boolean NOT NULL DEFAULT false,
        "tags" text array NOT NULL DEFAULT '{}',
        "createdAt" TIMESTAMP NOT NULL DEFAULT now(),
        "updatedAt" TIMESTAMP NOT NULL DEFAULT now(),
        CONSTRAINT "PK_files_id" PRIMARY KEY ("id"),
        CONSTRAINT "FK_files_uploaderId" FOREIGN KEY ("uploaderId") REFERENCES "users"("id") ON DELETE CASCADE
      )
    `);

    // Files ì¸ë±ìŠ¤ ìƒì„±
    await queryRunner.query(`CREATE INDEX "IDX_files_filename" ON "files" ("filename")`);
    await queryRunner.query(`CREATE INDEX "IDX_files_mimetype" ON "files" ("mimetype")`);
    await queryRunner.query(`CREATE INDEX "IDX_files_uploaderId" ON "files" ("uploaderId")`);
    await queryRunner.query(`CREATE INDEX "IDX_files_createdAt" ON "files" ("createdAt")`);
    await queryRunner.query(`CREATE INDEX "IDX_files_entityType_entityId" ON "files" ("entityType", "entityId")`);
  }

  public async down(queryRunner: QueryRunner): Promise<void> {
    // í…Œì´ë¸” ì‚­ì œ (ì™¸ë˜í‚¤ ì¢…ì†ì„± ìˆœì„œëŒ€ë¡œ)
    await queryRunner.query(`DROP TABLE IF EXISTS "files"`);
    await queryRunner.query(`DROP TABLE IF EXISTS "time_entries"`);
    await queryRunner.query(`DROP TABLE IF EXISTS "task_dependencies"`);
    await queryRunner.query(`DROP TABLE IF EXISTS "task_comments"`);
    await queryRunner.query(`DROP TABLE IF EXISTS "task_watchers"`);
    await queryRunner.query(`DROP TABLE IF EXISTS "task_labels_mapping"`);
    await queryRunner.query(`DROP TABLE IF EXISTS "tasks"`);
    await queryRunner.query(`DROP TABLE IF EXISTS "task_labels"`);
    await queryRunner.query(`DROP TABLE IF EXISTS "project_members"`);
    await queryRunner.query(`DROP TABLE IF EXISTS "projects"`);
    await queryRunner.query(`DROP TABLE IF EXISTS "users"`);
  }
}
</file>

<file path="backend/src/modules/admin/controllers/admin.controller.ts">
import { 
  Controller, 
  Get, 
  UseGuards, 
  UseInterceptors,
  Req,
} from '@nestjs/common';
import { AdminGuard } from '../guards/admin.guard';
import { PermissionsGuard } from '../guards/permissions.guard';
import { RequirePermissions } from '../decorators/permissions.decorator';
import { AuditLog } from '../decorators/audit-log.decorator';
import { AuditLogInterceptor } from '../interceptors/audit-log.interceptor';
import { AdminService } from '../services/admin.service';

@Controller('api/admin')
@UseGuards(AdminGuard, PermissionsGuard)
@UseInterceptors(AuditLogInterceptor)
export class AdminController {
  constructor(private adminService: AdminService) {}

  @Get('dashboard')
  @RequirePermissions('admin:dashboard:read')
  @AuditLog('ëŒ€ì‹œë³´ë“œ ì¡°íšŒ')
  async getDashboard(@Req() req: any) {
    const stats = await this.adminService.getDashboardStats();
    
    return {
      success: true,
      data: {
        stats,
        adminInfo: {
          id: req.user.id,
          name: req.user.name,
          role: req.user.adminRole,
          permissions: req.user.adminPermissions,
          lastAdminLogin: req.user.lastAdminLogin,
        },
      },
    };
  }

  @Get('profile')
  @RequirePermissions('admin:profile:read')
  async getAdminProfile(@Req() req: any) {
    return {
      success: true,
      data: {
        id: req.user.id,
        name: req.user.name,
        email: req.user.email,
        role: req.user.adminRole,
        permissions: req.user.adminPermissions,
        lastAdminLogin: req.user.lastAdminLogin,
        twoFactorEnabled: req.user.twoFactorEnabled,
        allowedIPs: req.user.allowedIPs,
      },
    };
  }
}
</file>

<file path="backend/src/modules/admin/controllers/audit-logs.controller.ts">
import { 
  Controller, 
  Get,
  Query,
  UseGuards, 
  UseInterceptors,
} from '@nestjs/common';
import { AdminGuard } from '../guards/admin.guard';
import { PermissionsGuard } from '../guards/permissions.guard';
import { RequirePermissions } from '../decorators/permissions.decorator';
import { AuditLog } from '../decorators/audit-log.decorator';
import { AuditLogInterceptor } from '../interceptors/audit-log.interceptor';
import { AuditService } from '../services/audit.service';

@Controller('api/admin/audit-logs')
@UseGuards(AdminGuard, PermissionsGuard)
@UseInterceptors(AuditLogInterceptor)
export class AuditLogsController {
  constructor(private auditService: AuditService) {}

  @Get()
  @RequirePermissions('admin:audit:read')
  @AuditLog('ê°ì‚¬ ë¡œê·¸ ì¡°íšŒ')
  async getAuditLogs(
    @Query('page') page?: number,
    @Query('limit') limit?: number,
    @Query('adminId') adminId?: string,
    @Query('action') action?: string,
    @Query('targetType') targetType?: string,
    @Query('startDate') startDate?: string,
    @Query('endDate') endDate?: string,
    @Query('success') success?: string,
  ) {
    const dateRange = startDate && endDate ? {
      start: new Date(startDate),
      end: new Date(endDate),
    } : undefined;

    const result = await this.auditService.getAuditLogs({
      page: page ? Number(page) : 1,
      limit: limit ? Number(limit) : 50,
      adminId,
      action,
      targetType,
      dateRange,
      success: success ? success === 'true' : undefined,
    });

    return {
      success: true,
      data: result.data,
      pagination: {
        total: result.total,
        page: result.page,
        limit: result.limit,
        totalPages: Math.ceil(result.total / result.limit),
      },
    };
  }

  @Get('recent')
  @RequirePermissions('admin:audit:read')
  async getRecentAuditLogs(
    @Query('adminId') adminId?: string,
    @Query('hours') hours?: number,
  ) {
    const logs = await this.auditService.getRecentActions(
      adminId || '',
      hours ? Number(hours) : 24,
    );

    return {
      success: true,
      data: logs,
    };
  }
}
</file>

<file path="backend/src/modules/admin/controllers/projects-admin.controller.ts">
import { 
  Controller, 
  Get, 
  Delete,
  Param,
  Query,
  UseGuards, 
  UseInterceptors,
  ParseUUIDPipe,
} from '@nestjs/common';
import { AdminGuard } from '../guards/admin.guard';
import { PermissionsGuard } from '../guards/permissions.guard';
import { RequirePermissions } from '../decorators/permissions.decorator';
import { AuditLog } from '../decorators/audit-log.decorator';
import { AuditLogInterceptor } from '../interceptors/audit-log.interceptor';
import { AdminService } from '../services/admin.service';

@Controller('api/admin/projects')
@UseGuards(AdminGuard, PermissionsGuard)
@UseInterceptors(AuditLogInterceptor)
export class ProjectsAdminController {
  constructor(private adminService: AdminService) {}

  @Get()
  @RequirePermissions('admin:projects:read')
  @AuditLog('í”„ë¡œì íŠ¸ ëª©ë¡ ì¡°íšŒ')
  async getAllProjects(
    @Query('page') page?: number,
    @Query('limit') limit?: number,
    @Query('search') search?: string,
    @Query('status') status?: string,
  ) {
    const result = await this.adminService.getAllProjects({
      page: page ? Number(page) : 1,
      limit: limit ? Number(limit) : 20,
      search,
      status,
    });

    return {
      success: true,
      data: result.data,
      pagination: {
        total: result.total,
        page: result.page,
        limit: result.limit,
        totalPages: result.totalPages,
      },
    };
  }

  @Get(':id')
  @RequirePermissions('admin:projects:read')
  @AuditLog('í”„ë¡œì íŠ¸ ìƒì„¸ ì¡°íšŒ')
  async getProjectById(@Param('id', ParseUUIDPipe) id: string) {
    const project = await this.adminService.getProjectById(id);

    return {
      success: true,
      data: project,
    };
  }

  @Delete(':id')
  @RequirePermissions('admin:projects:delete')
  @AuditLog('í”„ë¡œì íŠ¸ ì‚­ì œ')
  async deleteProject(@Param('id', ParseUUIDPipe) id: string) {
    await this.adminService.deleteProject(id);

    return {
      success: true,
      message: 'í”„ë¡œì íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤',
    };
  }
}
</file>

<file path="backend/src/modules/admin/controllers/settings-admin.controller.ts">
import { 
  Controller, 
  Get, 
  Put,
  Body,
  UseGuards, 
  UseInterceptors,
} from '@nestjs/common';
import { AdminGuard } from '../guards/admin.guard';
import { PermissionsGuard } from '../guards/permissions.guard';
import { RequirePermissions } from '../decorators/permissions.decorator';
import { AuditLog } from '../decorators/audit-log.decorator';
import { AuditLogInterceptor } from '../interceptors/audit-log.interceptor';
import { AdminService } from '../services/admin.service';

class UpdateSystemSettingsDto {
  maintenanceMode?: boolean;
  registrationEnabled?: boolean;
  maxUsersPerProject?: number;
  maxProjectsPerUser?: number;
  emailNotifications?: boolean;
}

@Controller('api/admin/settings')
@UseGuards(AdminGuard, PermissionsGuard)
@UseInterceptors(AuditLogInterceptor)
export class SettingsAdminController {
  constructor(private adminService: AdminService) {}

  @Get()
  @RequirePermissions('admin:settings:read')
  @AuditLog('ì‹œìŠ¤í…œ ì„¤ì • ì¡°íšŒ')
  async getSystemSettings() {
    const settings = await this.adminService.getSystemSettings();

    return {
      success: true,
      data: settings,
    };
  }

  @Put()
  @RequirePermissions('admin:settings:update')
  @AuditLog('ì‹œìŠ¤í…œ ì„¤ì • ë³€ê²½')
  async updateSystemSettings(@Body() updateSettingsDto: UpdateSystemSettingsDto) {
    const settings = await this.adminService.updateSystemSettings(updateSettingsDto);

    return {
      success: true,
      data: settings,
      message: 'ì‹œìŠ¤í…œ ì„¤ì •ì´ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤',
    };
  }
}
</file>

<file path="backend/src/modules/admin/decorators/audit-log.decorator.ts">
import { SetMetadata } from '@nestjs/common';

export const AuditLog = (action: string) =>
  SetMetadata('auditAction', action);

export const AUDIT_ACTION_KEY = 'auditAction';
</file>

<file path="backend/src/modules/admin/decorators/permissions.decorator.ts">
import { SetMetadata } from '@nestjs/common';

export const RequirePermissions = (...permissions: string[]) =>
  SetMetadata('permissions', permissions);

export const PERMISSIONS_KEY = 'permissions';
</file>

<file path="backend/src/modules/admin/interceptors/audit-log.interceptor.ts">
import {
  Injectable,
  NestInterceptor,
  ExecutionContext,
  CallHandler,
} from '@nestjs/common';
import { Reflector } from '@nestjs/core';
import { Observable } from 'rxjs';
import { tap, catchError } from 'rxjs/operators';
import { AuditService } from '../services/audit.service';
import { AUDIT_ACTION_KEY } from '../decorators/audit-log.decorator';

@Injectable()
export class AuditLogInterceptor implements NestInterceptor {
  constructor(
    private reflector: Reflector,
    private auditService: AuditService,
  ) {}

  intercept(context: ExecutionContext, next: CallHandler): Observable<any> {
    const action = this.reflector.get<string>(AUDIT_ACTION_KEY, context.getHandler());
    
    if (!action) {
      return next.handle();
    }

    const request = context.switchToHttp().getRequest();
    const user = request.user;
    
    if (!user || !user.isAdminUser()) {
      return next.handle();
    }

    const targetType = this.extractTargetType(context);
    const targetId = this.extractTargetId(request);
    const beforeData = this.extractBeforeData(request);

    return next.handle().pipe(
      tap((result) => {
        this.auditService.log({
          adminId: user.id,
          adminName: user.name,
          action,
          targetType,
          targetId,
          targetName: this.extractTargetName(result),
          changes: {
            before: beforeData,
            after: this.extractAfterData(result),
          },
          ipAddress: this.getClientIp(request),
          userAgent: request.get('User-Agent') || '',
          success: true,
        }).catch(error => {
          console.error('ê°ì‚¬ ë¡œê·¸ ì €ì¥ ì‹¤íŒ¨:', error);
        });
      }),
      catchError((error) => {
        this.auditService.log({
          adminId: user.id,
          adminName: user.name,
          action,
          targetType,
          targetId,
          ipAddress: this.getClientIp(request),
          userAgent: request.get('User-Agent') || '',
          success: false,
          errorMessage: error.message,
        }).catch(logError => {
          console.error('ê°ì‚¬ ë¡œê·¸ ì €ì¥ ì‹¤íŒ¨:', logError);
        });
        throw error;
      })
    );
  }

  private extractTargetType(context: ExecutionContext): string {
    const controllerName = context.getClass().name;
    
    if (controllerName.includes('Users')) return 'user';
    if (controllerName.includes('Projects')) return 'project';
    if (controllerName.includes('Tasks')) return 'task';
    if (controllerName.includes('Settings')) return 'settings';
    
    return 'system';
  }

  private extractTargetId(request: any): string | undefined {
    return request.params?.id;
  }

  private extractTargetName(result: any): string | undefined {
    if (result?.data?.name) return result.data.name;
    if (result?.data?.title) return result.data.title;
    if (result?.data?.email) return result.data.email;
    return undefined;
  }

  private extractBeforeData(request: any): Record<string, any> | undefined {
    // ì—…ë°ì´íŠ¸ ìš”ì²­ì¸ ê²½ìš°, ê¸°ì¡´ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì•¼ í•˜ì§€ë§Œ 
    // ì—¬ê¸°ì„œëŠ” ê°„ë‹¨íˆ ìš”ì²­ ë°”ë””ë¥¼ ë°˜í™˜
    return request.body;
  }

  private extractAfterData(result: any): Record<string, any> | undefined {
    return result?.data;
  }

  private getClientIp(request: any): string {
    return (
      request.headers['x-forwarded-for'] ||
      request.connection.remoteAddress ||
      request.socket.remoteAddress ||
      request.ip ||
      'unknown'
    );
  }
}
</file>

<file path="backend/src/modules/admin/services/audit.service.ts">
import { Injectable } from '@nestjs/common';
import { InjectRepository } from '@nestjs/typeorm';
import { Repository } from 'typeorm';
import { AuditLog } from '../../../database/entities/audit-log.entity';

export interface AuditLogData {
  adminId: string;
  adminName: string;
  action: string;
  targetType: string;
  targetId?: string;
  targetName?: string;
  changes?: {
    before?: Record<string, any>;
    after?: Record<string, any>;
  };
  ipAddress: string;
  userAgent: string;
  success: boolean;
  errorMessage?: string;
}

@Injectable()
export class AuditService {
  constructor(
    @InjectRepository(AuditLog)
    private auditLogRepository: Repository<AuditLog>,
  ) {}

  async log(data: AuditLogData): Promise<AuditLog> {
    const auditLog = this.auditLogRepository.create({
      ...data,
      timestamp: new Date(),
    });

    return this.auditLogRepository.save(auditLog);
  }

  async getRecentActions(adminId: string, hours: number): Promise<AuditLog[]> {
    const since = new Date();
    since.setHours(since.getHours() - hours);

    return this.auditLogRepository.find({
      where: {
        adminId,
        timestamp: since as any, // TypeORM MoreThanOrEqual ì‚¬ìš© ì‹œ
      },
      order: {
        timestamp: 'DESC',
      },
    });
  }

  async getAuditLogs(options: {
    page?: number;
    limit?: number;
    adminId?: string;
    action?: string;
    targetType?: string;
    dateRange?: { start: Date; end: Date };
    success?: boolean;
  }): Promise<{
    data: AuditLog[];
    total: number;
    page: number;
    limit: number;
  }> {
    const { page = 1, limit = 20 } = options;
    const skip = (page - 1) * limit;

    const queryBuilder = this.auditLogRepository.createQueryBuilder('audit');

    if (options.adminId) {
      queryBuilder.andWhere('audit.adminId = :adminId', { adminId: options.adminId });
    }

    if (options.action) {
      queryBuilder.andWhere('audit.action LIKE :action', { action: `%${options.action}%` });
    }

    if (options.targetType) {
      queryBuilder.andWhere('audit.targetType = :targetType', { targetType: options.targetType });
    }

    if (options.dateRange) {
      queryBuilder.andWhere('audit.timestamp >= :start AND audit.timestamp <= :end', {
        start: options.dateRange.start,
        end: options.dateRange.end,
      });
    }

    if (options.success !== undefined) {
      queryBuilder.andWhere('audit.success = :success', { success: options.success });
    }

    queryBuilder
      .orderBy('audit.timestamp', 'DESC')
      .skip(skip)
      .take(limit);

    const [data, total] = await queryBuilder.getManyAndCount();

    return {
      data,
      total,
      page,
      limit,
    };
  }
}
</file>

<file path="backend/src/modules/admin/admin.module.ts">
import { Module } from '@nestjs/common';
import { TypeOrmModule } from '@nestjs/typeorm';
import { AdminController } from './controllers/admin.controller';
import { AdminService } from './services/admin.service';
import { AuditService } from './services/audit.service';
import { UsersAdminController } from './controllers/users-admin.controller';
import { ProjectsAdminController } from './controllers/projects-admin.controller';
import { SettingsAdminController } from './controllers/settings-admin.controller';
import { AuditLogsController } from './controllers/audit-logs.controller';
import { User } from '../../database/entities/user.entity';
import { Project } from '../../database/entities/project.entity';
import { Task } from '../../database/entities/task.entity';
import { AuditLog } from '../../database/entities/audit-log.entity';

@Module({
  imports: [
    TypeOrmModule.forFeature([
      User,
      Project, 
      Task,
      AuditLog,
    ]),
  ],
  controllers: [
    AdminController,
    UsersAdminController,
    ProjectsAdminController,
    SettingsAdminController,
    AuditLogsController,
  ],
  providers: [
    AdminService,
    AuditService,
  ],
  exports: [AdminService, AuditService],
})
export class AdminModule {}
</file>

<file path="backend/src/modules/auth/decorators/current-user.decorator.ts">
import { createParamDecorator, ExecutionContext } from '@nestjs/common';
import { User } from '../../../database/entities/user.entity';

export const CurrentUser = createParamDecorator(
  (data: keyof User | undefined, ctx: ExecutionContext) => {
    const request = ctx.switchToHttp().getRequest();
    const user = request.user;

    return data ? user?.[data] : user;
  },
);
</file>

<file path="backend/src/modules/auth/decorators/public.decorator.ts">
import { SetMetadata } from '@nestjs/common';

export const IS_PUBLIC_KEY = 'isPublic';
export const Public = () => SetMetadata(IS_PUBLIC_KEY, true);
</file>

<file path="backend/src/modules/auth/dto/auth.dto.ts">
import {
  IsEmail,
  IsString,
  MinLength,
  MaxLength,
  IsBoolean,
  IsOptional,
  Matches,
} from 'class-validator';
import { ApiProperty } from '@nestjs/swagger';

export class LoginDto {
  @ApiProperty({
    description: 'ì‚¬ìš©ì ì´ë©”ì¼',
    example: 'user@example.com',
  })
  @IsEmail({}, { message: 'ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.' })
  email: string;

  @ApiProperty({
    description: 'ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸',
    example: 'password123',
    minLength: 8,
  })
  @IsString()
  @MinLength(8, { message: 'ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.' })
  password: string;

  @ApiProperty({
    description: 'ë¡œê·¸ì¸ ìœ ì§€ ì—¬ë¶€',
    example: false,
    required: false,
  })
  @IsBoolean()
  @IsOptional()
  rememberMe?: boolean;
}

export class RegisterDto {
  @ApiProperty({
    description: 'ì‚¬ìš©ì ì´ë©”ì¼',
    example: 'user@example.com',
  })
  @IsEmail({}, { message: 'ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.' })
  email: string;

  @ApiProperty({
    description: 'ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸',
    example: 'password123',
    minLength: 8,
  })
  @IsString()
  @MinLength(8, { message: 'ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.' })
  @Matches(
    /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/,
    {
      message: 'ë¹„ë°€ë²ˆí˜¸ëŠ” ëŒ€ì†Œë¬¸ì, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ìë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.',
    }
  )
  password: string;

  @ApiProperty({
    description: 'ì‚¬ìš©ì ì´ë¦„ (ì„±)',
    example: 'í™',
  })
  @IsString()
  @MinLength(1, { message: 'ì„±ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.' })
  @MaxLength(50, { message: 'ì„±ì€ 50ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  firstName: string;

  @ApiProperty({
    description: 'ì‚¬ìš©ì ì´ë¦„ (ì´ë¦„)',
    example: 'ê¸¸ë™',
  })
  @IsString()
  @MinLength(1, { message: 'ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.' })
  @MaxLength(50, { message: 'ì´ë¦„ì€ 50ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  lastName: string;

  @ApiProperty({
    description: 'ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€ ë™ì˜',
    example: true,
  })
  @IsBoolean()
  agreeToTerms: boolean;

  @ApiProperty({
    description: 'ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨ ë™ì˜',
    example: true,
  })
  @IsBoolean()
  agreeToPrivacy: boolean;
}

export class GoogleAuthDto {
  @ApiProperty({
    description: 'Google OAuth ì¸ì¦ ì½”ë“œ',
    example: 'google_auth_code_here',
  })
  @IsString()
  code: string;

  @ApiProperty({
    description: 'OAuth ë¦¬ë‹¤ì´ë ‰íŠ¸ URI',
    example: 'http://localhost:3000/auth/google/callback',
  })
  @IsString()
  redirectUri: string;
}

export class RefreshTokenDto {
  @ApiProperty({
    description: 'ë¦¬í”„ë ˆì‹œ í† í°',
    example: 'refresh_token_here',
  })
  @IsString()
  refreshToken: string;
}

export class ChangePasswordDto {
  @ApiProperty({
    description: 'í˜„ì¬ ë¹„ë°€ë²ˆí˜¸',
    example: 'current_password',
  })
  @IsString()
  currentPassword: string;

  @ApiProperty({
    description: 'ìƒˆ ë¹„ë°€ë²ˆí˜¸',
    example: 'new_password123',
    minLength: 8,
  })
  @IsString()
  @MinLength(8, { message: 'ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.' })
  @Matches(
    /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/,
    {
      message: 'ë¹„ë°€ë²ˆí˜¸ëŠ” ëŒ€ì†Œë¬¸ì, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ìë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.',
    }
  )
  newPassword: string;

  @ApiProperty({
    description: 'ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸',
    example: 'new_password123',
  })
  @IsString()
  confirmPassword: string;
}

export class ForgotPasswordDto {
  @ApiProperty({
    description: 'ì‚¬ìš©ì ì´ë©”ì¼',
    example: 'user@example.com',
  })
  @IsEmail({}, { message: 'ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.' })
  email: string;
}

export class ResetPasswordDto {
  @ApiProperty({
    description: 'ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • í† í°',
    example: 'reset_token_here',
  })
  @IsString()
  token: string;

  @ApiProperty({
    description: 'ìƒˆ ë¹„ë°€ë²ˆí˜¸',
    example: 'new_password123',
    minLength: 8,
  })
  @IsString()
  @MinLength(8, { message: 'ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.' })
  @Matches(
    /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/,
    {
      message: 'ë¹„ë°€ë²ˆí˜¸ëŠ” ëŒ€ì†Œë¬¸ì, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ìë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.',
    }
  )
  newPassword: string;

  @ApiProperty({
    description: 'ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸',
    example: 'new_password123',
  })
  @IsString()
  confirmPassword: string;
}

export class VerifyEmailDto {
  @ApiProperty({
    description: 'ì´ë©”ì¼ ì¸ì¦ í† í°',
    example: 'verification_token_here',
  })
  @IsString()
  token: string;
}

export class ResendVerificationDto {
  @ApiProperty({
    description: 'ì‚¬ìš©ì ì´ë©”ì¼',
    example: 'user@example.com',
  })
  @IsEmail({}, { message: 'ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.' })
  email: string;
}
</file>

<file path="backend/src/modules/auth/guards/auth.guard.ts">
import {
  Injectable,
  CanActivate,
  ExecutionContext,
  UnauthorizedException,
} from '@nestjs/common';
import { Reflector } from '@nestjs/core';
import { JwtService } from '@nestjs/jwt';
import { ConfigService } from '@nestjs/config';
import { Request } from 'express';
import { IS_PUBLIC_KEY } from '../decorators/public.decorator';
import { getAuthConfig } from '../../../config/auth.config';

@Injectable()
export class AuthGuard implements CanActivate {
  constructor(
    private jwtService: JwtService,
    private configService: ConfigService,
    private reflector: Reflector,
  ) {}

  async canActivate(context: ExecutionContext): Promise<boolean> {
    // Public ë°ì½”ë ˆì´í„°ê°€ ìˆëŠ” ê²½ìš° ì¸ì¦ ê±´ë„ˆë›°ê¸°
    const isPublic = this.reflector.getAllAndOverride<boolean>(IS_PUBLIC_KEY, [
      context.getHandler(),
      context.getClass(),
    ]);

    if (isPublic) {
      return true;
    }

    const request = context.switchToHttp().getRequest();
    const token = this.extractTokenFromHeader(request);

    if (!token) {
      throw new UnauthorizedException('Access token is required');
    }

    try {
      const authConfig = getAuthConfig(this.configService);
      const payload = await this.jwtService.verifyAsync(token, {
        secret: authConfig.jwt.secret,
      });

      // ìš”ì²­ì— ì‚¬ìš©ì ì •ë³´ ì²¨ë¶€
      request['user'] = payload;
    } catch {
      throw new UnauthorizedException('Invalid or expired token');
    }

    return true;
  }

  private extractTokenFromHeader(request: Request): string | undefined {
    const [type, token] = request.headers.authorization?.split(' ') ?? [];
    return type === 'Bearer' ? token : undefined;
  }
}
</file>

<file path="backend/src/modules/auth/guards/google-auth.guard.ts">
import { Injectable } from '@nestjs/common';
import { AuthGuard } from '@nestjs/passport';

@Injectable()
export class GoogleAuthGuard extends AuthGuard('google') {}
</file>

<file path="backend/src/modules/auth/guards/jwt-auth.guard.ts">
import { Injectable } from '@nestjs/common';
import { AuthGuard } from '@nestjs/passport';

@Injectable()
export class JwtAuthGuard extends AuthGuard('jwt') {}
</file>

<file path="backend/src/modules/auth/middleware/auth.middleware.ts">
import { Injectable, NestMiddleware, UnauthorizedException } from '@nestjs/common';
import { Request, Response, NextFunction } from 'express';
import { JwtService } from '@nestjs/jwt';
import { ConfigService } from '@nestjs/config';
import { getAuthConfig } from '../../../config/auth.config';

@Injectable()
export class AuthMiddleware implements NestMiddleware {
  constructor(
    private jwtService: JwtService,
    private configService: ConfigService,
  ) {}

  async use(req: Request, res: Response, next: NextFunction) {
    try {
      const token = this.extractTokenFromHeader(req);
      
      if (token) {
        const authConfig = getAuthConfig(this.configService);
        const payload = await this.jwtService.verifyAsync(token, {
          secret: authConfig.jwt.secret,
        });
        
        // ìš”ì²­ì— ì‚¬ìš©ì ì •ë³´ ì²¨ë¶€
        req['user'] = payload;
      }
    } catch (error) {
      // í† í°ì´ ìœ íš¨í•˜ì§€ ì•Šì€ ê²½ìš°, ì‚¬ìš©ì ì •ë³´ë¥¼ ì²¨ë¶€í•˜ì§€ ì•Šê³  ê³„ì† ì§„í–‰
      // ì‹¤ì œ ì¸ì¦ì´ í•„ìš”í•œ ê²½ìš°ëŠ” ê°€ë“œì—ì„œ ì²˜ë¦¬
    }

    next();
  }

  private extractTokenFromHeader(request: Request): string | undefined {
    const [type, token] = request.headers.authorization?.split(' ') ?? [];
    return type === 'Bearer' ? token : undefined;
  }
}
</file>

<file path="backend/src/modules/auth/strategies/google.strategy.ts">
import { Injectable } from '@nestjs/common';
import { ConfigService } from '@nestjs/config';
import { PassportStrategy } from '@nestjs/passport';
import { Strategy, VerifyCallback } from 'passport-google-oauth20';
import { AuthService } from '../auth.service';
import { getAuthConfig } from '../../../config/auth.config';

@Injectable()
export class GoogleStrategy extends PassportStrategy(Strategy, 'google') {
  constructor(
    private configService: ConfigService,
    private authService: AuthService,
  ) {
    const authConfig = getAuthConfig(configService);
    
    super({
      clientID: authConfig.google.clientId,
      clientSecret: authConfig.google.clientSecret,
      callbackURL: authConfig.google.callbackUrl,
      scope: ['email', 'profile'],
    });
  }

  async validate(
    accessToken: string,
    refreshToken: string,
    profile: any,
    done: VerifyCallback,
  ): Promise<any> {
    try {
      const { id, name, emails, photos } = profile;
      
      // Google í”„ë¡œí•„ì—ì„œ ì‚¬ìš©ì ì •ë³´ ì¶”ì¶œ
      const googleUser = {
        googleId: id,
        email: emails[0].value,
        firstName: name.givenName,
        lastName: name.familyName,
        avatar: photos[0]?.value || null,
        emailVerified: emails[0].verified,
      };

      // ê¸°ì¡´ ì‚¬ìš©ì ì°¾ê±°ë‚˜ ìƒˆë¡œ ìƒì„±
      const user = await this.authService.validateGoogleUser(googleUser);
      
      done(null, user);
    } catch (error) {
      done(error, false);
    }
  }
}
</file>

<file path="backend/src/modules/projects/projects.module.ts">
import { Module } from '@nestjs/common';
import { TypeOrmModule } from '@nestjs/typeorm';
import { ProjectsService } from './projects.service';
import { ProjectsController } from './projects.controller';
import { Project } from '../../database/entities/project.entity';
import { ProjectMember } from '../../database/entities/project-member.entity';
import { User } from '../../database/entities/user.entity';

@Module({
  imports: [
    TypeOrmModule.forFeature([
      Project,
      ProjectMember,
      User,
    ])
  ],
  controllers: [ProjectsController],
  providers: [ProjectsService],
  exports: [ProjectsService],
})
export class ProjectsModule {}
</file>

<file path="backend/src/modules/tasks/tasks.module.ts">
import { Module } from '@nestjs/common';
import { TypeOrmModule } from '@nestjs/typeorm';
import { TasksService } from './tasks.service';
import { TasksController } from './tasks.controller';
import { Task } from '../../database/entities/task.entity';
import { TaskLabel } from '../../database/entities/task-label.entity';
import { TaskComment } from '../../database/entities/task-comment.entity';
import { TaskDependency } from '../../database/entities/task-dependency.entity';
import { TimeEntry } from '../../database/entities/time-entry.entity';
import { Project } from '../../database/entities/project.entity';

@Module({
  imports: [
    TypeOrmModule.forFeature([
      Task,
      TaskLabel,
      TaskComment,
      TaskDependency,
      TimeEntry,
      Project,
    ])
  ],
  controllers: [TasksController],
  providers: [TasksService],
  exports: [TasksService],
})
export class TasksModule {}
</file>

<file path="backend/src/modules/users/users.module.ts">
import { Module } from '@nestjs/common';
import { TypeOrmModule } from '@nestjs/typeorm';
import { UsersService } from './users.service';
import { UsersController } from './users.controller';
import { User } from '../../database/entities/user.entity';

@Module({
  imports: [TypeOrmModule.forFeature([User])],
  controllers: [UsersController],
  providers: [UsersService],
  exports: [UsersService],
})
export class UsersModule {}
</file>

<file path="backend/src/modules/users/users.service.ts">
import { Injectable, NotFoundException } from '@nestjs/common';
import { InjectRepository } from '@nestjs/typeorm';
import { Repository } from 'typeorm';
import { User } from '../../database/entities/user.entity';
import { UpdateUserDto } from './dto/update-user.dto';

@Injectable()
export class UsersService {
  constructor(
    @InjectRepository(User)
    private usersRepository: Repository<User>,
  ) {}

  async findAll(): Promise<User[]> {
    return this.usersRepository.find();
  }

  async findOne(id: string): Promise<User> {
    const user = await this.usersRepository.findOne({
      where: { id },
    });

    if (!user) {
      throw new NotFoundException('ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
    }

    return user;
  }

  async findByEmail(email: string): Promise<User | null> {
    return this.usersRepository.findOne({
      where: { email },
    });
  }

  async update(id: string, updateUserDto: UpdateUserDto): Promise<User> {
    const user = await this.findOne(id);

    Object.assign(user, updateUserDto);
    return this.usersRepository.save(user);
  }

  async remove(id: string): Promise<void> {
    const user = await this.findOne(id);
    await this.usersRepository.remove(user);
  }
}
</file>

<file path="backend/src/scripts/grant-admin-simple.ts">
import { DataSource } from 'typeorm';
import * as dotenv from 'dotenv';

// .env íŒŒì¼ ë¡œë“œ
dotenv.config({ path: '../../.env' });

async function grantAdminAccess() {
  const dataSource = new DataSource({
    type: 'postgres',
    host: process.env.DATABASE_HOST || 'localhost',
    port: parseInt(process.env.DATABASE_PORT || '5432'),
    username: process.env.DATABASE_USER || 'workly',
    password: process.env.DATABASE_PASSWORD || 'workly123',
    database: process.env.DATABASE_NAME || 'workly',
    entities: [],
    synchronize: false,
  });

  try {
    await dataSource.initialize();
    console.log('ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„±ê³µ');

    // ì‚¬ìš©ì ì •ë³´ í™•ì¸
    const user = await dataSource.query(
      'SELECT id, email, name, role, "adminRole", "adminPermissions", status FROM users WHERE email = $1',
      ['abveo5@gmail.com']
    );

    if (user.length === 0) {
      console.log('âŒ ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: abveo5@gmail.com');
      return;
    }

    console.log('âœ… ì‚¬ìš©ì ì°¾ìŒ:', user[0]);

    // ìŠˆí¼ ì–´ë“œë¯¼ ê¶Œí•œ ë¶€ì—¬
    await dataSource.query(
      'UPDATE users SET "adminRole" = $1, "adminPermissions" = $2 WHERE email = $3',
      ['super_admin', ['*'], 'abveo5@gmail.com']
    );

    // ê²°ê³¼ í™•ì¸
    const updatedUser = await dataSource.query(
      'SELECT id, email, name, role, "adminRole", "adminPermissions", status FROM users WHERE email = $1',
      ['abveo5@gmail.com']
    );

    console.log('ğŸ‰ ì–´ë“œë¯¼ ê¶Œí•œì´ ì„±ê³µì ìœ¼ë¡œ ë¶€ì—¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
    console.log('ì—…ë°ì´íŠ¸ëœ ì‚¬ìš©ì ì •ë³´:', updatedUser[0]);

  } catch (error) {
    console.error('âŒ ì˜¤ë¥˜ ë°œìƒ:', error);
  } finally {
    await dataSource.destroy();
    console.log('ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì¢…ë£Œ');
  }
}

// ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
grantAdminAccess();
</file>

<file path="backend/src/scripts/grant-admin.ts">
import { DataSource } from 'typeorm';
import { User } from '../database/entities/user.entity';

enum AdminRole {
  SUPER_ADMIN = 'super_admin',
  ADMIN = 'admin',
  MODERATOR = 'moderator',
  SUPPORT = 'support'
}

async function grantAdminAccess() {
  const dataSource = new DataSource({
    type: 'postgres',
    host: process.env.DB_HOST || 'localhost',
    port: parseInt(process.env.DB_PORT || '5432'),
    username: process.env.DB_USERNAME || 'workly_user',
    password: process.env.DB_PASSWORD || 'workly_password',
    database: process.env.DB_NAME || 'workly_db',
    entities: [User],
    synchronize: false,
  });

  try {
    await dataSource.initialize();
    console.log('ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„±ê³µ');

    const userRepository = dataSource.getRepository(User);
    
    // abveo5@gmail.com ì‚¬ìš©ì ì°¾ê¸°
    const user = await userRepository.findOne({
      where: { email: 'abveo5@gmail.com' }
    });

    if (!user) {
      console.log('âŒ ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: abveo5@gmail.com');
      return;
    }

    console.log('âœ… ì‚¬ìš©ì ì°¾ìŒ:', user.email, user.name);
    console.log('í˜„ì¬ adminRole:', user.adminRole);
    console.log('í˜„ì¬ adminPermissions:', user.adminPermissions);

    // ìŠˆí¼ ì–´ë“œë¯¼ ê¶Œí•œ ë¶€ì—¬
    user.adminRole = AdminRole.SUPER_ADMIN;
    user.adminPermissions = ['*']; // ëª¨ë“  ê¶Œí•œ
    
    await userRepository.save(user);
    
    console.log('ğŸ‰ ì–´ë“œë¯¼ ê¶Œí•œì´ ì„±ê³µì ìœ¼ë¡œ ë¶€ì—¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
    console.log('ìƒˆë¡œìš´ adminRole:', user.adminRole);
    console.log('ìƒˆë¡œìš´ adminPermissions:', user.adminPermissions);

  } catch (error) {
    console.error('âŒ ì˜¤ë¥˜ ë°œìƒ:', error);
  } finally {
    await dataSource.destroy();
    console.log('ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì¢…ë£Œ');
  }
}

// ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
grantAdminAccess();
</file>

<file path="backend/src/types/admin.types.ts">
/**
 * ì›Œí´ë¦¬ ì–´ë“œë¯¼ íŒ¨ë„ íƒ€ì… ì •ì˜ (ë°±ì—”ë“œ ì „ìš©)
 */

export enum AdminRole {
  SUPER_ADMIN = 'super_admin',    // ëª¨ë“  ê¶Œí•œ
  ADMIN = 'admin',                // ì‚¬ìš©ì/ì½˜í…ì¸  ê´€ë¦¬
  MODERATOR = 'moderator',        // ì½˜í…ì¸  ëª¨ë”ë ˆì´ì…˜ë§Œ
  SUPPORT = 'support',            // ì‚¬ìš©ì ì§€ì› (ì½ê¸° ì „ìš© + ê¸°ë³¸ ì‚¬ìš©ì ê´€ë¦¬)
}

export enum TaskStatus {
  TODO = 'todo',
  IN_PROGRESS = 'in-progress',
  IN_REVIEW = 'in-review',
  BLOCKED = 'blocked',
  COMPLETED = 'completed',
  CANCELLED = 'cancelled'
}
</file>

<file path="backend/test/jest-e2e.json">
{
  "moduleFileExtensions": ["js", "json", "ts"],
  "rootDir": ".",
  "testEnvironment": "node",
  "testRegex": ".e2e-spec.ts$",
  "transform": {
    "^.+\\.(t|j)s$": "ts-jest"
  },
  "collectCoverageFrom": [
    "src/**/*.(t|j)s",
    "!src/**/*.d.ts",
    "!**/node_modules/**",
    "!**/main.ts",
    "!**/*.module.ts"
  ],
  "coverageDirectory": "./coverage-e2e",
  "moduleNameMapping": {
    "^@/(.*)$": "<rootDir>/src/$1",
    "^@shared/(.*)$": "<rootDir>/../shared/$1"
  },
  "setupFilesAfterEnv": ["<rootDir>/test/setup-e2e.ts"]
}
</file>

<file path="backend/test/setup-e2e.ts">
import { Test, TestingModule } from '@nestjs/testing';
import { INestApplication } from '@nestjs/common';
import { TypeOrmModule } from '@nestjs/typeorm';
import { testDatabaseConfig } from './setup';

let app: INestApplication;

beforeAll(async () => {
  const moduleFixture: TestingModule = await Test.createTestingModule({
    imports: [
      TypeOrmModule.forRoot(testDatabaseConfig),
      // Add your app modules here
    ],
  }).compile();

  app = moduleFixture.createNestApplication();
  await app.init();
});

afterAll(async () => {
  if (app) {
    await app.close();
  }
});

export { app };
</file>

<file path="backend/test/setup.ts">
import { Test } from '@nestjs/testing';
import { TypeOrmModule } from '@nestjs/typeorm';

// Test Database Configuration
export const testDatabaseConfig = {
  type: 'postgres' as const,
  host: process.env.DATABASE_HOST || 'localhost',
  port: parseInt(process.env.DATABASE_PORT || '5432'),
  username: process.env.DATABASE_USERNAME || 'test_user',
  password: process.env.DATABASE_PASSWORD || 'test_password',
  database: process.env.DATABASE_NAME || 'workly_test',
  entities: [__dirname + '/../src/**/*.entity{.ts,.js}'],
  synchronize: true,
  dropSchema: true,
  logging: false,
};

// Global test setup
beforeAll(async () => {
  // Setup test database connection
});

afterAll(async () => {
  // Cleanup after all tests
});

beforeEach(async () => {
  // Setup before each test
});

afterEach(async () => {
  // Cleanup after each test
});
</file>

<file path="backend/.eslintrc.js">
module.exports = {
  extends: [
    '../.eslintrc.js',
    '@nestjs',
    'plugin:@typescript-eslint/recommended',
    'prettier',
  ],
  env: {
    node: true,
    jest: true,
  },
  parser: '@typescript-eslint/parser',
  parserOptions: {
    project: 'tsconfig.json',
    tsconfigRootDir: __dirname,
    sourceType: 'module',
  },
  plugins: ['@typescript-eslint/eslint-plugin'],
  rules: {
    '@typescript-eslint/interface-name-prefix': 'off',
    '@typescript-eslint/explicit-function-return-type': 'off',
    '@typescript-eslint/explicit-module-boundary-types': 'off',
    '@typescript-eslint/no-explicit-any': 'warn',
    '@typescript-eslint/no-unused-vars': ['error', { argsIgnorePattern: '^_' }],
    '@typescript-eslint/no-empty-function': 'warn',
    '@typescript-eslint/ban-types': 'warn',
    'prefer-const': 'error',
    'no-var': 'error',
    'no-console': 'off', // Backendì—ì„œëŠ” console ì‚¬ìš© í—ˆìš©
    'no-debugger': 'warn',
  },
  overrides: [
    {
      files: ['**/*.spec.ts', '**/*.e2e-spec.ts'],
      rules: {
        '@typescript-eslint/no-explicit-any': 'off',
      },
    },
  ],
};
</file>

<file path="backend/jest.config.js">
module.exports = {
  moduleFileExtensions: ['js', 'json', 'ts'],
  rootDir: 'src',
  testRegex: '.*\\.spec\\.ts$',
  transform: {
    '^.+\\.(t|j)s$': 'ts-jest',
  },
  collectCoverageFrom: [
    '**/*.(t|j)s',
    '!**/*.d.ts',
    '!**/node_modules/**',
    '!**/main.ts',
    '!**/*.module.ts',
  ],
  coverageDirectory: '../coverage',
  testEnvironment: 'node',
  moduleNameMapping: {
    '^@/(.*)$': '<rootDir>/$1',
    '^@shared/(.*)$': '<rootDir>/../../shared/$1',
  },
  setupFilesAfterEnv: ['<rootDir>/../test/setup.ts'],
  coverageThreshold: {
    global: {
      branches: 75,
      functions: 75,
      lines: 75,
      statements: 75,
    },
  },
};
</file>

<file path="docs/admin-api-design.md">
# ì›Œí´ë¦¬ ì–´ë“œë¯¼ API ì„¤ê³„

## ê°œìš”

ì›Œí´ë¦¬ ì–´ë“œë¯¼ íŒ¨ë„ì„ ìœ„í•œ RESTful API ì„¤ê³„ ë¬¸ì„œì…ë‹ˆë‹¤. ê¸°ì¡´ NestJS ë°±ì—”ë“œ êµ¬ì¡°ë¥¼ í™•ì¥í•˜ì—¬ ê´€ë¦¬ì ì „ìš© ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

## ê¸°ë³¸ êµ¬ì¡°

### API ë² ì´ìŠ¤ ê²½ë¡œ
```
/api/admin/*  - ëª¨ë“  ê´€ë¦¬ì API
```

### ì¸ì¦ ë° ê¶Œí•œ
- **ì¸ì¦**: JWT í† í° ê¸°ë°˜ (ê¸°ì¡´ê³¼ ë™ì¼)
- **ê¶Œí•œ**: Role-based Access Control (RBAC)
- **ë¯¸ë“¤ì›¨ì–´**: AdminGuard, PermissionGuard

## API ì—”ë“œí¬ì¸íŠ¸ ì„¤ê³„

### 1. ëŒ€ì‹œë³´ë“œ API

#### GET /api/admin/dashboard
**ëª©ì **: ëŒ€ì‹œë³´ë“œ ë©”ì¸ ë°ì´í„° ì¡°íšŒ

**ê¶Œí•œ**: `admin:read`

**ì‘ë‹µ**:
```typescript
{
  "success": true,
  "data": {
    "kpis": {
      "totalUsers": 1245,
      "activeUsers": 892,
      "newUsersThisWeek": 47,
      "totalProjects": 156,
      "activeProjects": 89,
      "completedProjects": 67,
      "totalTasks": 2341,
      "completedTasks": 1876,
      "systemHealth": "healthy",
      "lastUpdated": "2025-08-04T10:30:00Z"
    },
    "charts": {
      "userGrowth": [...],
      "taskCompletion": [...],
      "projectStatus": [...],
      "serverMetrics": {...}
    },
    "recentActivity": [...]
  }
}
```

#### GET /api/admin/dashboard/kpis
**ëª©ì **: KPI ë°ì´í„°ë§Œ ê°œë³„ ì¡°íšŒ (ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ìš©)

#### GET /api/admin/dashboard/activity
**ëª©ì **: ìµœê·¼ í™œë™ ë¡œê·¸ ì¡°íšŒ

**ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°**:
- `limit`: ì¡°íšŒí•  ê°œìˆ˜ (ê¸°ë³¸: 20)
- `type`: í™œë™ íƒ€ì… í•„í„°
- `since`: íŠ¹ì • ì‹œì  ì´í›„ í™œë™

### 2. ì‚¬ìš©ì ê´€ë¦¬ API

#### GET /api/admin/users
**ëª©ì **: ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ (í˜ì´ì§€ë„¤ì´ì…˜, í•„í„°ë§, ê²€ìƒ‰)

**ê¶Œí•œ**: `users:read`

**ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°**:
```typescript
{
  page?: number;
  limit?: number;
  search?: string;           // ì´ë¦„, ì´ë©”ì¼ ê²€ìƒ‰
  role?: string[];          // ì—­í•  í•„í„°
  status?: string[];        // ìƒíƒœ í•„í„°
  registrationDate?: {      // ê°€ì…ì¼ ë²”ìœ„
    start: string;
    end: string;
  };
  lastActivity?: {          // ë§ˆì§€ë§‰ í™œë™ì¼ ë²”ìœ„
    start: string;
    end: string;
  };
  sortBy?: 'name' | 'email' | 'createdAt' | 'lastLoginAt';
  sortOrder?: 'asc' | 'desc';
}
```

**ì‘ë‹µ**:
```typescript
{
  "success": true,
  "data": UserWithStats[],
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 1245,
    "totalPages": 63,
    "hasNext": true,
    "hasPrev": false
  }
}
```

#### GET /api/admin/users/:id
**ëª©ì **: íŠ¹ì • ì‚¬ìš©ì ìƒì„¸ ì •ë³´ ì¡°íšŒ

**ê¶Œí•œ**: `users:read`

#### PUT /api/admin/users/:id
**ëª©ì **: ì‚¬ìš©ì ì •ë³´ ìˆ˜ì •

**ê¶Œí•œ**: `users:update`

**ìš”ì²­ ë°”ë””**:
```typescript
{
  name?: string;
  email?: string;
  role?: UserRole;
  status?: UserStatus;
  profile?: Partial<UserProfile>;
  preferences?: Partial<UserPreferences>;
}
```

#### DELETE /api/admin/users/:id
**ëª©ì **: ì‚¬ìš©ì ê³„ì • ì‚­ì œ (soft delete)

**ê¶Œí•œ**: `users:delete`

#### POST /api/admin/users/bulk-action
**ëª©ì **: ì„ íƒëœ ì‚¬ìš©ìë“¤ì— ëŒ€í•œ ì¼ê´„ ì‘ì—…

**ê¶Œí•œ**: `users:update`

**ìš”ì²­ ë°”ë””**:
```typescript
{
  userIds: string[];
  action: 'activate' | 'deactivate' | 'suspend' | 'delete' | 'send_email';
  params?: {
    emailTemplate?: string;
    suspensionReason?: string;
    duration?: number;
  };
}
```

#### GET /api/admin/users/stats
**ëª©ì **: ì‚¬ìš©ì ê´€ë ¨ í†µê³„ ë°ì´í„°

**ì‘ë‹µ**:
```typescript
{
  "success": true,
  "data": {
    "totalUsers": 1245,
    "activeUsers": 892,
    "usersByRole": {
      "admin": 3,
      "manager": 12,
      "member": 1230
    },
    "usersByStatus": {
      "active": 892,
      "inactive": 245,
      "suspended": 8
    },
    "growthTrend": TimeSeriesData[],
    "registrationSources": {
      "email": 67,
      "google": 33
    }
  }
}
```

### 3. í”„ë¡œì íŠ¸ ê´€ë¦¬ API

#### GET /api/admin/projects
**ëª©ì **: í”„ë¡œì íŠ¸ ëª©ë¡ ì¡°íšŒ

**ê¶Œí•œ**: `projects:read`

**ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°**:
```typescript
{
  page?: number;
  limit?: number;
  search?: string;
  status?: string[];
  ownerId?: string;
  createdDate?: { start: string; end: string; };
  minMembers?: number;
  maxMembers?: number;
  hasRiskFlags?: boolean;
  sortBy?: 'name' | 'createdAt' | 'progress' | 'memberCount';
  sortOrder?: 'asc' | 'desc';
}
```

#### GET /api/admin/projects/:id
**ëª©ì **: í”„ë¡œì íŠ¸ ìƒì„¸ ì •ë³´ ì¡°íšŒ

#### PUT /api/admin/projects/:id
**ëª©ì **: í”„ë¡œì íŠ¸ ì •ë³´ ìˆ˜ì • (ê´€ë¦¬ì ê°œì…)

**ê¶Œí•œ**: `projects:moderate`

#### POST /api/admin/projects/:id/close
**ëª©ì **: í”„ë¡œì íŠ¸ ê°•ì œ ì¢…ë£Œ

**ê¶Œí•œ**: `projects:moderate`

#### GET /api/admin/projects/analytics
**ëª©ì **: í”„ë¡œì íŠ¸ ë¶„ì„ ë°ì´í„°

**ì‘ë‹µ**:
```typescript
{
  "success": true,
  "data": {
    "successRate": 73.5,
    "averageCompletionTime": 45.2,
    "popularSkills": [...],
    "teamSizeDistribution": [...],
    "monthlyTrends": {...}
  }
}
```

### 4. ì—…ë¬´ ê´€ë¦¬ API

#### GET /api/admin/tasks
**ëª©ì **: ì—…ë¬´ ëª©ë¡ ì¡°íšŒ

**ê¶Œí•œ**: `tasks:read`

#### GET /api/admin/tasks/categories
**ëª©ì **: ì—…ë¬´ ì¹´í…Œê³ ë¦¬ë³„ í†µê³„

#### GET /api/admin/tasks/automation
**ëª©ì **: ìë™í™” ì„¤ì • ì¡°íšŒ

#### PUT /api/admin/tasks/automation
**ëª©ì **: ìë™í™” ì„¤ì • ë³€ê²½

### 5. ì½˜í…ì¸  ê´€ë¦¬ API

#### GET /api/admin/content/reports
**ëª©ì **: ì½˜í…ì¸  ì‹ ê³  ëª©ë¡ ì¡°íšŒ

**ê¶Œí•œ**: `content:read`

**ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°**:
```typescript
{
  page?: number;
  limit?: number;
  status?: 'pending' | 'reviewed' | 'resolved' | 'dismissed';
  contentType?: 'project' | 'task' | 'comment' | 'message';
  reason?: ReportReason;
  reportedDate?: { start: string; end: string; };
  sortBy?: 'createdAt' | 'status' | 'reason';
  sortOrder?: 'asc' | 'desc';
}
```

#### GET /api/admin/content/reports/:id
**ëª©ì **: íŠ¹ì • ì‹ ê³  ìƒì„¸ ì¡°íšŒ

#### POST /api/admin/content/reports/:id/action
**ëª©ì **: ì‹ ê³ ì— ëŒ€í•œ ì¡°ì¹˜ ì‹¤í–‰

**ê¶Œí•œ**: `content:moderate`

**ìš”ì²­ ë°”ë””**:
```typescript
{
  action: 'dismiss' | 'warn_user' | 'remove_content' | 'suspend_user';
  reason: string;
  duration?: number;        // ì •ì§€ ê¸°ê°„ (ì¼)
  notifyUser: boolean;
}
```

### 6. ì‹œìŠ¤í…œ ì„¤ì • API

#### GET /api/admin/settings
**ëª©ì **: ì‹œìŠ¤í…œ ì„¤ì • ì „ì²´ ì¡°íšŒ

**ê¶Œí•œ**: `system:read`

#### PUT /api/admin/settings
**ëª©ì **: ì‹œìŠ¤í…œ ì„¤ì • ì—…ë°ì´íŠ¸

**ê¶Œí•œ**: `system:configure`

#### GET /api/admin/settings/email-templates
**ëª©ì **: ì´ë©”ì¼ í…œí”Œë¦¿ ëª©ë¡ ì¡°íšŒ

#### POST /api/admin/settings/email-templates
**ëª©ì **: ìƒˆ ì´ë©”ì¼ í…œí”Œë¦¿ ìƒì„±

#### PUT /api/admin/settings/email-templates/:id
**ëª©ì **: ì´ë©”ì¼ í…œí”Œë¦¿ ìˆ˜ì •

#### POST /api/admin/settings/test-email
**ëª©ì **: í…ŒìŠ¤íŠ¸ ì´ë©”ì¼ ë°œì†¡

### 7. ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§ API

#### GET /api/admin/monitoring/metrics
**ëª©ì **: ì‹¤ì‹œê°„ ì‹œìŠ¤í…œ ë©”íŠ¸ë¦­ ì¡°íšŒ

**ê¶Œí•œ**: `system:monitoring`

**ì‘ë‹µ**:
```typescript
{
  "success": true,
  "data": {
    "server": ServerMetrics,
    "database": DatabaseMetrics,
    "api": APIMetrics,
    "timestamp": "2025-08-04T10:30:00Z"
  }
}
```

#### GET /api/admin/monitoring/errors
**ëª©ì **: ì˜¤ë¥˜ ë¡œê·¸ ì¡°íšŒ

**ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°**:
```typescript
{
  page?: number;
  limit?: number;
  level?: 'error' | 'warning' | 'info';
  since?: string;
  resolved?: boolean;
  search?: string;
}
```

#### POST /api/admin/monitoring/errors/:id/resolve
**ëª©ì **: ì˜¤ë¥˜ í•´ê²° í‘œì‹œ

#### GET /api/admin/monitoring/alerts
**ëª©ì **: í™œì„± ì•Œë¦¼ ëª©ë¡ ì¡°íšŒ

#### POST /api/admin/monitoring/alerts/:id/acknowledge
**ëª©ì **: ì•Œë¦¼ í™•ì¸ ì²˜ë¦¬

### 8. ê°ì‚¬ ë¡œê·¸ API

#### GET /api/admin/audit-logs
**ëª©ì **: ê°ì‚¬ ë¡œê·¸ ì¡°íšŒ

**ê¶Œí•œ**: `system:read`

**ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°**:
```typescript
{
  page?: number;
  limit?: number;
  adminId?: string;
  action?: string;
  targetType?: 'user' | 'project' | 'task' | 'system' | 'settings';
  dateRange?: { start: string; end: string; };
  success?: boolean;
}
```

#### GET /api/admin/audit-logs/export
**ëª©ì **: ê°ì‚¬ ë¡œê·¸ ë‚´ë³´ë‚´ê¸° (CSV/Excel)

## ë³´ì•ˆ ë° ê¶Œí•œ ê´€ë¦¬

### ì¸ì¦ ë¯¸ë“¤ì›¨ì–´
```typescript
@Controller('admin')
@UseGuards(JwtAuthGuard, AdminGuard)
export class AdminController {
  // ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ì— JWT ì¸ì¦ + ê´€ë¦¬ì ê¶Œí•œ í•„ìš”
}
```

### ê¶Œí•œ ë°ì½”ë ˆì´í„°
```typescript
@Get('users')
@RequirePermissions('users:read')
async getUsers() {
  // users:read ê¶Œí•œì´ ìˆëŠ” ê´€ë¦¬ìë§Œ ì ‘ê·¼ ê°€ëŠ¥
}

@Put('users/:id')
@RequirePermissions('users:update')
async updateUser() {
  // users:update ê¶Œí•œì´ ìˆëŠ” ê´€ë¦¬ìë§Œ ì ‘ê·¼ ê°€ëŠ¥
}
```

### ê°ì‚¬ ë¡œê·¸ ë°ì½”ë ˆì´í„°
```typescript
@Put('users/:id')
@AuditLog('user_updated')
async updateUser(@Param('id') id: string, @Body() updateData: any) {
  // ëª¨ë“  ë³€ê²½ ì‚¬í•­ì´ ìë™ìœ¼ë¡œ ê°ì‚¬ ë¡œê·¸ì— ê¸°ë¡ë¨
}
```

## ì—ëŸ¬ ì²˜ë¦¬

### í‘œì¤€ ì—ëŸ¬ ì‘ë‹µ
```typescript
{
  "success": false,
  "message": "ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",
  "code": "USER_NOT_FOUND",
  "errors": [
    {
      "field": "userId",
      "message": "ìœ íš¨í•˜ì§€ ì•Šì€ ì‚¬ìš©ì IDì…ë‹ˆë‹¤."
    }
  ]
}
```

### HTTP ìƒíƒœ ì½”ë“œ
- `200`: ì„±ê³µ
- `201`: ìƒì„± ì„±ê³µ
- `400`: ì˜ëª»ëœ ìš”ì²­
- `401`: ì¸ì¦ ì‹¤íŒ¨
- `403`: ê¶Œí•œ ì—†ìŒ
- `404`: ë¦¬ì†ŒìŠ¤ ì—†ìŒ
- `409`: ì¶©ëŒ (ì¤‘ë³µ ë“±)
- `422`: ê²€ì¦ ì‹¤íŒ¨
- `500`: ì„œë²„ ì˜¤ë¥˜

## ì„±ëŠ¥ ìµœì í™”

### ìºì‹± ì „ëµ
- **Redis**: KPI ë°ì´í„°, í†µê³„ ì •ë³´ (5ë¶„ ìºì‹œ)
- **ë©”ëª¨ë¦¬**: ì‹œìŠ¤í…œ ì„¤ì • (1ë¶„ ìºì‹œ)
- **HTTP**: ì •ì  ë°ì´í„° (24ì‹œê°„ ìºì‹œ)

### í˜ì´ì§€ë„¤ì´ì…˜
```typescript
// ëª¨ë“  ëª©ë¡ APIì— ê¸°ë³¸ í˜ì´ì§€ë„¤ì´ì…˜ ì ìš©
{
  page: 1,        // ê¸°ë³¸ê°’
  limit: 20,      // ê¸°ë³¸ê°’, ìµœëŒ€ 100
}
```

### ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”
- ì¸ë±ìŠ¤: ìì£¼ í•„í„°ë§ë˜ëŠ” ì»¬ëŸ¼ì— ë³µí•© ì¸ë±ìŠ¤
- ì¡°ì¸: í•„ìš”í•œ ê²½ìš°ë§Œ ê´€ë ¨ ë°ì´í„° í¬í•¨
- ì§‘ê³„: ë³µì¡í•œ í†µê³„ëŠ” ë°°ê²½ ì‘ì—…ìœ¼ë¡œ ë¯¸ë¦¬ ê³„ì‚°

## API ë¬¸ì„œí™”

### Swagger ì„¤ì •
```typescript
@ApiTags('Admin - Users')
@ApiOperation({ summary: 'ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ' })
@ApiQuery({ name: 'page', required: false, type: Number })
@ApiQuery({ name: 'limit', required: false, type: Number })
@ApiResponse({ status: 200, description: 'ì„±ê³µ', type: PaginatedUsersResponse })
@ApiResponse({ status: 403, description: 'ê¶Œí•œ ì—†ìŒ' })
```

### API ë²„ì „ ê´€ë¦¬
- í˜„ì¬: `/api/admin/v1/*`
- í–¥í›„ ë²„ì „ ì¶”ê°€ ì‹œ: `/api/admin/v2/*`

---

*ì´ API ì„¤ê³„ëŠ” ì›Œí´ë¦¬ ì–´ë“œë¯¼ íŒ¨ë„ì˜ ë°±ì—”ë“œ êµ¬í˜„ì„ ìœ„í•œ ëª…ì„¸ì„œì…ë‹ˆë‹¤. ì‹¤ì œ êµ¬í˜„ ê³¼ì •ì—ì„œ ì„±ëŠ¥ê³¼ ë³´ì•ˆ ìš”êµ¬ì‚¬í•­ì— ë”°ë¼ ì¡°ì •ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.*
</file>

<file path="docs/admin-components-design.md">
# ì›Œí´ë¦¬ ì–´ë“œë¯¼ UI ì»´í¬ë„ŒíŠ¸ ì„¤ê³„

## ê°œìš”

ì›Œí´ë¦¬ ì–´ë“œë¯¼ íŒ¨ë„ì„ ìœ„í•œ UI ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ê³„ì…ë‹ˆë‹¤. ê¸°ì¡´ ì›Œí´ë¦¬ ë””ìì¸ ì‹œìŠ¤í…œì„ ê³„ìŠ¹í•˜ë˜, ê´€ë¦¬ ë„êµ¬ì˜ íŠ¹ì„±ì— ë§ê²Œ í™•ì¥ëœ ì»´í¬ë„ŒíŠ¸ë“¤ì„ ì •ì˜í•©ë‹ˆë‹¤.

## ì»´í¬ë„ŒíŠ¸ ì•„í‚¤í…ì²˜

### ê³„ì¸µ êµ¬ì¡°
```
Admin Components
â”œâ”€â”€ Layouts (í˜ì´ì§€ ë ˆì´ì•„ì›ƒ)
â”œâ”€â”€ Navigation (ë„¤ë¹„ê²Œì´ì…˜)
â”œâ”€â”€ DataDisplay (ë°ì´í„° í‘œì‹œ)
â”œâ”€â”€ Forms (ì–‘ì‹ ì…ë ¥)
â”œâ”€â”€ Feedback (í”¼ë“œë°±)
â”œâ”€â”€ Charts (ë°ì´í„° ì‹œê°í™”)
â””â”€â”€ Common (ê³µí†µ ì»´í¬ë„ŒíŠ¸)
```

### ë„¤ì´ë° ì»¨ë²¤ì…˜
- ì–´ë“œë¯¼ ì „ìš© ì»´í¬ë„ŒíŠ¸: `Admin` ì ‘ë‘ì‚¬ (`AdminTable`, `AdminCard`)
- ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸ í™•ì¥: `Enhanced` ì ‘ë‘ì‚¬ (`EnhancedCard`, `EnhancedModal`)
- ë°ì´í„° ì‹œê°í™”: `Chart` ì ‘ë¯¸ì‚¬ (`UserGrowthChart`, `MetricsChart`)

## 1. ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸

### AdminLayout
```typescript
interface AdminLayoutProps {
  children: React.ReactNode;
  title?: string;
  subtitle?: string;
  breadcrumbs?: BreadcrumbItem[];
  actions?: React.ReactNode;
  sidebar?: boolean;
}

const AdminLayout: React.FC<AdminLayoutProps> = ({
  children,
  title,
  subtitle,
  breadcrumbs,
  actions,
  sidebar = true
}) => {
  return (
    <div className="min-h-screen bg-gray-50">
      <AdminHeader />
      <div className="flex">
        {sidebar && <AdminSidebar />}
        <main className="flex-1 p-6">
          <AdminPageHeader 
            title={title}
            subtitle={subtitle}
            breadcrumbs={breadcrumbs}
            actions={actions}
          />
          <div className="mt-6">
            {children}
          </div>
        </main>
      </div>
    </div>
  );
};
```

### AdminSidebar
```typescript
interface AdminSidebarProps {
  collapsed?: boolean;
  onToggle?: () => void;
}

const AdminSidebar: React.FC<AdminSidebarProps> = ({
  collapsed = false,
  onToggle
}) => {
  const menuItems = [
    { icon: ChartBarIcon, label: 'ëŒ€ì‹œë³´ë“œ', href: '/admin' },
    { icon: UsersIcon, label: 'ì‚¬ìš©ì ê´€ë¦¬', href: '/admin/users' },
    { icon: FolderIcon, label: 'í”„ë¡œì íŠ¸ ê´€ë¦¬', href: '/admin/projects' },
    { icon: CheckSquareIcon, label: 'ì—…ë¬´ ê´€ë¦¬', href: '/admin/tasks' },
    { icon: ShieldCheckIcon, label: 'ì½˜í…ì¸  ê´€ë¦¬', href: '/admin/content' },
    { icon: CogIcon, label: 'ì‹œìŠ¤í…œ ì„¤ì •', href: '/admin/settings' },
    { icon: ServerIcon, label: 'ëª¨ë‹ˆí„°ë§', href: '/admin/monitoring' },
  ];

  return (
    <aside className={cn(
      "bg-white border-r border-gray-200 transition-all duration-300",
      collapsed ? "w-16" : "w-64"
    )}>
      {/* ì‚¬ì´ë“œë°” ë‚´ìš© */}
    </aside>
  );
};
```

## 2. ë°ì´í„° í‘œì‹œ ì»´í¬ë„ŒíŠ¸

### AdminTable
```typescript
interface AdminTableColumn<T> {
  key: keyof T;
  title: string;
  width?: string;
  sortable?: boolean;
  filterable?: boolean;
  render?: (value: any, record: T) => React.ReactNode;
}

interface AdminTableProps<T> {
  data: T[];
  columns: AdminTableColumn<T>[];
  loading?: boolean;
  pagination?: PaginationProps;
  selection?: {
    selectedRows: string[];
    onSelect: (keys: string[]) => void;
    bulkActions?: BulkAction[];
  };
  filters?: FilterConfig[];
  sorting?: SortConfig;
  onSort?: (field: string, direction: 'asc' | 'desc') => void;
}

const AdminTable = <T extends { id: string }>({
  data,
  columns,
  loading,
  pagination,
  selection,
  filters,
  sorting,
  onSort
}: AdminTableProps<T>) => {
  return (
    <div className="bg-white rounded-lg border border-gray-200">
      {/* í…Œì´ë¸” í—¤ë” (í•„í„°, ê²€ìƒ‰, ì•¡ì…˜) */}
      <div className="p-4 border-b border-gray-200">
        <div className="flex justify-between items-center">
          <div className="flex items-center space-x-4">
            {filters && <AdminTableFilters filters={filters} />}
            <AdminTableSearch onSearch={onSearch} />
          </div>
          {selection?.bulkActions && (
            <AdminBulkActions 
              selectedCount={selection.selectedRows.length}
              actions={selection.bulkActions}
            />
          )}
        </div>
      </div>
      
      {/* í…Œì´ë¸” ë³¸ì²´ */}
      <div className="overflow-x-auto">
        <table className="w-full">
          <thead className="bg-gray-50">
            <tr>
              {selection && (
                <th className="px-4 py-3 text-left">
                  <Checkbox 
                    checked={selection.selectedRows.length === data.length}
                    onChange={handleSelectAll}
                  />
                </th>
              )}
              {columns.map((column) => (
                <th key={column.key as string} className="px-4 py-3 text-left">
                  <div className="flex items-center space-x-2">
                    <span className="text-sm font-medium text-gray-900">
                      {column.title}
                    </span>
                    {column.sortable && (
                      <SortButton 
                        field={column.key as string}
                        current={sorting}
                        onSort={onSort}
                      />
                    )}
                  </div>
                </th>
              ))}
            </tr>
          </thead>
          <tbody className="divide-y divide-gray-200">
            {data.map((record) => (
              <AdminTableRow 
                key={record.id}
                record={record}
                columns={columns}
                selected={selection?.selectedRows.includes(record.id)}
                onSelect={() => handleRowSelect(record.id)}
              />
            ))}
          </tbody>
        </table>
      </div>
      
      {/* í˜ì´ì§€ë„¤ì´ì…˜ */}
      {pagination && (
        <div className="px-4 py-3 border-t border-gray-200">
          <AdminPagination {...pagination} />
        </div>
      )}
    </div>
  );
};
```

### KPICard
```typescript
interface KPICardProps {
  title: string;
  value: number | string;
  subtitle?: string;
  trend?: {
    value: number;
    direction: 'up' | 'down' | 'neutral';
    period: string;
  };
  icon?: React.ComponentType<any>;
  color?: 'blue' | 'green' | 'yellow' | 'red' | 'purple';
  loading?: boolean;
}

const KPICard: React.FC<KPICardProps> = ({
  title,
  value,
  subtitle,
  trend,
  icon: Icon,
  color = 'blue',
  loading
}) => {
  const colorClasses = {
    blue: 'text-blue-600 bg-blue-100',
    green: 'text-green-600 bg-green-100',
    yellow: 'text-yellow-600 bg-yellow-100',
    red: 'text-red-600 bg-red-100',
    purple: 'text-purple-600 bg-purple-100',
  };

  if (loading) {
    return <KPICardSkeleton />;
  }

  return (
    <div className="bg-white rounded-lg border border-gray-200 p-6">
      <div className="flex items-center justify-between">
        <div className="flex-1">
          <p className="text-sm font-medium text-gray-600">{title}</p>
          <p className="text-3xl font-bold text-gray-900 mt-2">{value}</p>
          {subtitle && (
            <p className="text-sm text-gray-500 mt-1">{subtitle}</p>
          )}
        </div>
        {Icon && (
          <div className={cn("p-3 rounded-lg", colorClasses[color])}>
            <Icon className="w-6 h-6" />
          </div>
        )}
      </div>
      
      {trend && (
        <div className="mt-4 flex items-center">
          <div className={cn(
            "flex items-center text-sm font-medium",
            trend.direction === 'up' ? 'text-green-600' : 
            trend.direction === 'down' ? 'text-red-600' : 'text-gray-600'
          )}>
            {trend.direction === 'up' && <ArrowUpIcon className="w-4 h-4 mr-1" />}
            {trend.direction === 'down' && <ArrowDownIcon className="w-4 h-4 mr-1" />}
            {Math.abs(trend.value)}%
          </div>
          <span className="text-sm text-gray-500 ml-2">
            vs {trend.period}
          </span>
        </div>
      )}
    </div>
  );
};
```

### StatusBadge
```typescript
interface StatusBadgeProps {
  status: string;
  variant?: 'default' | 'outline';
  size?: 'sm' | 'md' | 'lg';
}

const StatusBadge: React.FC<StatusBadgeProps> = ({
  status,
  variant = 'default',
  size = 'md'
}) => {
  const getStatusConfig = (status: string) => {
    const configs = {
      active: { color: 'green', label: 'í™œì„±' },
      inactive: { color: 'gray', label: 'ë¹„í™œì„±' },
      pending: { color: 'yellow', label: 'ë³´ë¥˜' },
      suspended: { color: 'red', label: 'ì •ì§€' },
      completed: { color: 'green', label: 'ì™„ë£Œ' },
      in_progress: { color: 'blue', label: 'ì§„í–‰ì¤‘' },
      cancelled: { color: 'red', label: 'ì·¨ì†Œ' },
    };
    return configs[status] || { color: 'gray', label: status };
  };

  const config = getStatusConfig(status);
  
  return (
    <span className={cn(
      "inline-flex items-center font-medium rounded-full",
      {
        'px-2 py-1 text-xs': size === 'sm',
        'px-3 py-1 text-sm': size === 'md',
        'px-4 py-2 text-base': size === 'lg',
      },
      variant === 'default' ? [
        `bg-${config.color}-100 text-${config.color}-800`
      ] : [
        `border border-${config.color}-200 text-${config.color}-600`
      ]
    )}>
      {config.label}
    </span>
  );
};
```

## 3. ì°¨íŠ¸ ì»´í¬ë„ŒíŠ¸

### BaseChart
```typescript
interface BaseChartProps {
  title?: string;
  subtitle?: string;
  data: any[];
  loading?: boolean;
  error?: string;
  height?: number;
  className?: string;
}

const BaseChart: React.FC<BaseChartProps & { children: React.ReactNode }> = ({
  title,
  subtitle,
  loading,
  error,
  height = 300,
  className,
  children
}) => {
  return (
    <div className={cn("bg-white rounded-lg border border-gray-200 p-6", className)}>
      {(title || subtitle) && (
        <div className="mb-4">
          {title && <h3 className="text-lg font-semibold text-gray-900">{title}</h3>}
          {subtitle && <p className="text-sm text-gray-600 mt-1">{subtitle}</p>}
        </div>
      )}
      
      <div style={{ height }}>
        {loading ? (
          <ChartSkeleton height={height} />
        ) : error ? (
          <ChartError message={error} />
        ) : (
          children
        )}
      </div>
    </div>
  );
};
```

### UserGrowthChart
```typescript
interface UserGrowthChartProps {
  data: TimeSeriesData[];
  period: 'daily' | 'weekly' | 'monthly';
  title?: string;
}

const UserGrowthChart: React.FC<UserGrowthChartProps> = ({
  data,
  period,
  title = "ì‚¬ìš©ì ì¦ê°€ ì¶”ì´"
}) => {
  return (
    <BaseChart title={title} data={data}>
      <ResponsiveContainer width="100%" height="100%">
        <LineChart data={data}>
          <CartesianGrid strokeDasharray="3 3" stroke="#f0f0f0" />
          <XAxis 
            dataKey="date" 
            stroke="#6b7280"
            fontSize={12}
            tickFormatter={(value) => formatDate(value, period)}
          />
          <YAxis stroke="#6b7280" fontSize={12} />
          <Tooltip
            content={<CustomTooltip />}
            cursor={{ stroke: '#2563eb', strokeWidth: 1 }}
          />
          <Line
            type="monotone"
            dataKey="value"
            stroke="#2563eb"
            strokeWidth={2}
            dot={{ fill: '#2563eb', strokeWidth: 2, r: 4 }}
            activeDot={{ r: 6, fill: '#1d4ed8' }}
          />
        </LineChart>
      </ResponsiveContainer>
    </BaseChart>
  );
};
```

### MetricsChart
```typescript
interface MetricsChartProps {
  data: MetricsData;
  title?: string;
}

const MetricsChart: React.FC<MetricsChartProps> = ({
  data,
  title = "ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤"
}) => {
  const chartData = [
    { name: 'CPU', value: data.cpu, color: '#2563eb' },
    { name: 'Memory', value: data.memory, color: '#7c3aed' },
    { name: 'Disk', value: data.disk, color: '#059669' },
  ];

  return (
    <BaseChart title={title} data={chartData}>
      <ResponsiveContainer width="100%" height="100%">
        <BarChart data={chartData}>
          <CartesianGrid strokeDasharray="3 3" stroke="#f0f0f0" />
          <XAxis dataKey="name" stroke="#6b7280" fontSize={12} />
          <YAxis stroke="#6b7280" fontSize={12} domain={[0, 100]} />
          <Tooltip 
            content={<CustomTooltip formatter={(value) => `${value}%`} />}
          />
          <Bar dataKey="value" fill="#2563eb" radius={[4, 4, 0, 0]} />
        </BarChart>
      </ResponsiveContainer>
    </BaseChart>
  );
};
```

## 4. í¼ ì»´í¬ë„ŒíŠ¸

### AdminForm
```typescript
interface AdminFormProps {
  title?: string;
  onSubmit: (data: any) => void;
  loading?: boolean;
  children: React.ReactNode;
  actions?: React.ReactNode;
}

const AdminForm: React.FC<AdminFormProps> = ({
  title,
  onSubmit,
  loading,
  children,
  actions
}) => {
  return (
    <div className="bg-white rounded-lg border border-gray-200">
      {title && (
        <div className="px-6 py-4 border-b border-gray-200">
          <h3 className="text-lg font-semibold text-gray-900">{title}</h3>
        </div>
      )}
      
      <form onSubmit={onSubmit} className="p-6 space-y-6">
        {children}
        
        <div className="flex justify-end space-x-3 pt-6 border-t border-gray-200">
          {actions || (
            <>
              <Button variant="outline" type="button">
                ì·¨ì†Œ
              </Button>
              <Button type="submit" loading={loading}>
                ì €ì¥
              </Button>
            </>
          )}
        </div>
      </form>
    </div>
  );
};
```

### BulkActionBar
```typescript
interface BulkActionBarProps {
  selectedCount: number;
  actions: Array<{
    key: string;
    label: string;
    icon?: React.ComponentType<any>;
    variant?: 'default' | 'danger';
    onClick: () => void;
  }>;
  onClearSelection: () => void;
}

const BulkActionBar: React.FC<BulkActionBarProps> = ({
  selectedCount,
  actions,
  onClearSelection
}) => {
  return (
    <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
      <div className="flex items-center justify-between">
        <div className="flex items-center">
          <CheckCircleIcon className="w-5 h-5 text-blue-600 mr-2" />
          <span className="text-sm text-blue-800">
            {selectedCount}ê°œ í•­ëª©ì´ ì„ íƒë¨
          </span>
          <button
            onClick={onClearSelection}
            className="ml-2 text-sm text-blue-600 hover:text-blue-700"
          >
            ì„ íƒ í•´ì œ
          </button>
        </div>
        
        <div className="flex items-center space-x-2">
          {actions.map((action) => (
            <Button
              key={action.key}
              variant={action.variant || 'default'}
              size="sm"
              onClick={action.onClick}
              icon={action.icon}
            >
              {action.label}
            </Button>
          ))}
        </div>
      </div>
    </div>
  );
};
```

## 5. í”¼ë“œë°± ì»´í¬ë„ŒíŠ¸

### AdminAlert
```typescript
interface AdminAlertProps {
  type: 'info' | 'success' | 'warning' | 'error';
  title?: string;
  message: string;
  actions?: React.ReactNode;
  onClose?: () => void;
  className?: string;
}

const AdminAlert: React.FC<AdminAlertProps> = ({
  type,
  title,
  message,
  actions,
  onClose,
  className
}) => {
  const configs = {
    info: { 
      icon: InformationCircleIcon, 
      bgColor: 'bg-blue-50', 
      textColor: 'text-blue-800',
      iconColor: 'text-blue-400'
    },
    success: { 
      icon: CheckCircleIcon, 
      bgColor: 'bg-green-50', 
      textColor: 'text-green-800',
      iconColor: 'text-green-400'
    },
    warning: { 
      icon: ExclamationTriangleIcon, 
      bgColor: 'bg-yellow-50', 
      textColor: 'text-yellow-800',
      iconColor: 'text-yellow-400'
    },
    error: { 
      icon: XCircleIcon, 
      bgColor: 'bg-red-50', 
      textColor: 'text-red-800',
      iconColor: 'text-red-400'
    },
  };

  const config = configs[type];
  const Icon = config.icon;

  return (
    <div className={cn(
      "rounded-lg p-4",
      config.bgColor,
      className
    )}>
      <div className="flex">
        <Icon className={cn("w-5 h-5 mt-0.5 mr-3", config.iconColor)} />
        <div className="flex-1">
          {title && (
            <h3 className={cn("text-sm font-medium", config.textColor)}>
              {title}
            </h3>
          )}
          <p className={cn("text-sm", config.textColor, title ? "mt-1" : "")}>
            {message}
          </p>
          {actions && (
            <div className="mt-3">
              {actions}
            </div>
          )}
        </div>
        {onClose && (
          <button
            onClick={onClose}
            className={cn("ml-3", config.iconColor, "hover:opacity-75")}
          >
            <XMarkIcon className="w-5 h-5" />
          </button>
        )}
      </div>
    </div>
  );
};
```

### LoadingSpinner
```typescript
interface LoadingSpinnerProps {
  size?: 'sm' | 'md' | 'lg';
  text?: string;
  className?: string;
}

const LoadingSpinner: React.FC<LoadingSpinnerProps> = ({
  size = 'md',
  text,
  className
}) => {
  const sizeClasses = {
    sm: 'w-4 h-4',
    md: 'w-6 h-6',
    lg: 'w-8 h-8'
  };

  return (
    <div className={cn("flex items-center justify-center", className)}>
      <div className="flex flex-col items-center">
        <div className={cn(
          "animate-spin rounded-full border-2 border-gray-300 border-t-blue-600",
          sizeClasses[size]
        )} />
        {text && (
          <p className="text-sm text-gray-600 mt-2">{text}</p>
        )}
      </div>
    </div>
  );
};
```

## 6. ë„¤ë¹„ê²Œì´ì…˜ ì»´í¬ë„ŒíŠ¸

### Breadcrumbs
```typescript
interface BreadcrumbItem {
  label: string;
  href?: string;
  icon?: React.ComponentType<any>;
}

interface BreadcrumbsProps {
  items: BreadcrumbItem[];
}

const Breadcrumbs: React.FC<BreadcrumbsProps> = ({ items }) => {
  return (
    <nav className="flex" aria-label="Breadcrumb">
      <ol className="flex items-center space-x-2">
        {items.map((item, index) => (
          <li key={index} className="flex items-center">
            {index > 0 && (
              <ChevronRightIcon className="w-4 h-4 text-gray-400 mx-2" />
            )}
            {item.href ? (
              <Link
                href={item.href}
                className="flex items-center text-sm text-blue-600 hover:text-blue-700"
              >
                {item.icon && <item.icon className="w-4 h-4 mr-1" />}
                {item.label}
              </Link>
            ) : (
              <span className="flex items-center text-sm text-gray-600">
                {item.icon && <item.icon className="w-4 h-4 mr-1" />}
                {item.label}
              </span>
            )}
          </li>
        ))}
      </ol>
    </nav>
  );
};
```

## ìŠ¤íƒ€ì¼ë§ ê°€ì´ë“œ

### CSS í´ë˜ìŠ¤ íŒ¨í„´
```css
/* ì–´ë“œë¯¼ ì „ìš© ìƒ‰ìƒ í™•ì¥ */
.admin-primary { @apply bg-admin-primary text-white; }
.admin-danger { @apply bg-red-600 text-white; }
.admin-warning { @apply bg-yellow-500 text-white; }
.admin-success { @apply bg-green-600 text-white; }

/* ì •ë³´ ë°€ë„ ë†’ì€ í…Œì´ë¸” */
.admin-table-dense td { @apply py-2 px-3; }
.admin-table-dense th { @apply py-3 px-3; }

/* ëŒ€ì‹œë³´ë“œ ê·¸ë¦¬ë“œ */
.admin-grid { @apply grid gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4; }
.admin-grid-2 { @apply grid gap-6 grid-cols-1 lg:grid-cols-2; }

/* ìƒíƒœ í‘œì‹œ */
.status-active { @apply bg-green-100 text-green-800; }
.status-inactive { @apply bg-gray-100 text-gray-800; }
.status-warning { @apply bg-yellow-100 text-yellow-800; }
.status-error { @apply bg-red-100 text-red-800; }
```

### ë°˜ì‘í˜• ë””ìì¸
```typescript
const responsiveClasses = {
  mobile: 'block md:hidden',
  desktop: 'hidden md:block',
  sidebar: 'w-full md:w-64 lg:w-72',
  content: 'w-full md:pl-64 lg:pl-72',
  grid: 'grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4'
};
```

---

*ì´ ì»´í¬ë„ŒíŠ¸ ì„¤ê³„ëŠ” ì›Œí´ë¦¬ ì–´ë“œë¯¼ íŒ¨ë„ì˜ UI ì¼ê´€ì„±ê³¼ ì‚¬ìš©ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•œ ê°€ì´ë“œë¼ì¸ì…ë‹ˆë‹¤. ì‹¤ì œ êµ¬í˜„ ì‹œ ì ‘ê·¼ì„±(a11y)ê³¼ ì„±ëŠ¥ì„ ê³ ë ¤í•˜ì—¬ ìµœì í™”ë©ë‹ˆë‹¤.*
</file>

<file path="docs/admin-implementation-guide.md">
# ì›Œí´ë¦¬ ì–´ë“œë¯¼ íŒ¨ë„ êµ¬í˜„ ê°€ì´ë“œ

## ê°œìš”

ì›Œí´ë¦¬ ì–´ë“œë¯¼ íŒ¨ë„ì˜ ì „ì²´ êµ¬í˜„ í”„ë¡œì„¸ìŠ¤ë¥¼ ë‹¨ê³„ë³„ë¡œ ì•ˆë‚´í•˜ëŠ” ê°€ì´ë“œì…ë‹ˆë‹¤. ì´ ë¬¸ì„œëŠ” ê°œë°œìê°€ ì‹¤ì œë¡œ ì–´ë“œë¯¼ íŒ¨ë„ì„ êµ¬í˜„í•  ë•Œ í•„ìš”í•œ ëª¨ë“  ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

## ğŸ“‹ êµ¬í˜„ ì¤€ë¹„ì‚¬í•­

### í•„ìˆ˜ ë„êµ¬ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬
```json
{
  "frontend": {
    "framework": "Next.js 14+",
    "language": "TypeScript",
    "styling": "Tailwind CSS",
    "charts": "recharts",
    "forms": "react-hook-form",
    "state": "zustand",
    "http": "axios"
  },
  "backend": {
    "framework": "NestJS",
    "database": "PostgreSQL + TypeORM",
    "auth": "JWT + Passport",
    "cache": "Redis",
    "validation": "class-validator"
  },
  "devops": {
    "docker": "Docker & Docker Compose",
    "monitoring": "Prometheus + Grafana (ì„ íƒì‚¬í•­)"
  }
}
```

### í”„ë¡œì íŠ¸ êµ¬ì¡°
```
workly/
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”‚   â”œâ”€â”€ admin/           # ì–´ë“œë¯¼ íŒ¨ë„ í˜ì´ì§€
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx     # ëŒ€ì‹œë³´ë“œ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ users/       # ì‚¬ìš©ì ê´€ë¦¬
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ projects/    # í”„ë¡œì íŠ¸ ê´€ë¦¬
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ content/     # ì½˜í…ì¸  ê´€ë¦¬
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ settings/    # ì‹œìŠ¤í…œ ì„¤ì •
â”‚   â”‚   â”‚   â””â”€â”€ (auth)/          # ê¸°ì¡´ ì‚¬ìš©ì ì•±
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ admin/           # ì–´ë“œë¯¼ ì „ìš© ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â””â”€â”€ ui/              # ê³µí†µ UI ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â””â”€â”€ lib/
â”‚   â”‚       â”œâ”€â”€ admin-api.ts     # ì–´ë“œë¯¼ API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚       â””â”€â”€ permissions.ts   # ê¶Œí•œ ê´€ë¦¬
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ modules/
â”‚   â”‚   â”‚   â”œâ”€â”€ admin/           # ì–´ë“œë¯¼ ëª¨ë“ˆ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ guards/
â”‚   â”‚   â”‚   â””â”€â”€ auth/            # ê¸°ì¡´ ì¸ì¦ ëª¨ë“ˆ í™•ì¥
â”‚   â”‚   â””â”€â”€ database/
â”‚   â”‚       â””â”€â”€ entities/        # ê´€ë¦¬ì ê´€ë ¨ ì—”í‹°í‹°
â””â”€â”€ shared/
    â””â”€â”€ types/
        â””â”€â”€ admin.types.ts       # ì–´ë“œë¯¼ íƒ€ì… ì •ì˜
```

## ğŸš€ Phase 1: ê¸°ë³¸ ì¸í”„ë¼ êµ¬ì¶• (1ì£¼)

### 1.1 ë°±ì—”ë“œ ê¶Œí•œ ì‹œìŠ¤í…œ êµ¬í˜„

#### User ì—”í‹°í‹° í™•ì¥
```typescript
// backend/src/database/entities/user.entity.ts
export class User {
  // ê¸°ì¡´ í•„ë“œë“¤...
  
  @Column({
    type: 'enum',
    enum: UserRole,
    default: UserRole.MEMBER,
  })
  role: UserRole;

  @Column('simple-array', { nullable: true })
  adminPermissions?: string[];

  @Column({ nullable: true })
  lastAdminLogin?: Date;

  @Column({ default: false })
  twoFactorEnabled: boolean;

  @Column('simple-array', { nullable: true })
  allowedIPs?: string[];

  // ê¶Œí•œ í™•ì¸ ë©”ì„œë“œë“¤ ì¶”ê°€
  isAdmin(): boolean {
    return ['SUPER_ADMIN', 'ADMIN', 'MODERATOR', 'SUPPORT'].includes(this.role);
  }

  hasAdminPermission(permission: string): boolean {
    if (this.role === 'SUPER_ADMIN') return true;
    return this.adminPermissions?.includes(permission) || false;
  }
}
```

#### ê´€ë¦¬ì ê°€ë“œ êµ¬í˜„
```typescript
// backend/src/modules/admin/guards/admin.guard.ts
@Injectable()
export class AdminGuard implements CanActivate {
  canActivate(context: ExecutionContext): boolean {
    const request = context.switchToHttp().getRequest();
    const user = request.user;
    
    if (!user?.isAdmin()) {
      throw new ForbiddenException('ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤');
    }
    
    return true;
  }
}

// backend/src/modules/admin/guards/permissions.guard.ts
@Injectable()
export class PermissionsGuard implements CanActivate {
  constructor(private reflector: Reflector) {}

  canActivate(context: ExecutionContext): boolean {
    const requiredPermissions = this.reflector.get<string[]>(
      'permissions',
      context.getHandler()
    );

    if (!requiredPermissions) return true;

    const request = context.switchToHttp().getRequest();
    const user = request.user;

    return requiredPermissions.every(permission =>
      user.hasAdminPermission(permission)
    );
  }
}
```

### 1.2 í”„ë¡ íŠ¸ì—”ë“œ ë¼ìš°íŒ… ë° ë ˆì´ì•„ì›ƒ

#### ì–´ë“œë¯¼ ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
```typescript
// frontend/src/components/admin/AdminLayout.tsx
'use client';

import { useAuth } from '@/hooks/useAuth';
import { usePermissions } from '@/hooks/usePermissions';
import { redirect } from 'next/navigation';

interface AdminLayoutProps {
  children: React.ReactNode;
}

export default function AdminLayout({ children }: AdminLayoutProps) {
  const { user, loading } = useAuth();
  
  if (loading) return <AdminLoadingSpinner />;
  
  if (!user?.isAdmin()) {
    redirect('/auth/login');
  }

  return (
    <div className="min-h-screen bg-gray-50">
      <AdminHeader />
      <div className="flex">
        <AdminSidebar />
        <main className="flex-1 p-6">
          {children}
        </main>
      </div>
    </div>
  );
}
```

#### ì–´ë“œë¯¼ ë£¨íŠ¸ í˜ì´ì§€
```typescript
// frontend/src/app/admin/page.tsx
import { Metadata } from 'next';
import AdminDashboard from '@/components/admin/AdminDashboard';
import { ProtectedRoute } from '@/components/admin/ProtectedRoute';

export const metadata: Metadata = {
  title: 'ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ - Workly',
  description: 'Workly ê´€ë¦¬ì íŒ¨ë„',
};

export default function AdminPage() {
  return (
    <ProtectedRoute permissions={[]}>
      <AdminDashboard />
    </ProtectedRoute>
  );
}
```

### 1.3 API í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„

```typescript
// frontend/src/lib/admin-api.ts
import axios from 'axios';
import { getAuthToken } from '@/lib/auth';

const adminApi = axios.create({
  baseURL: process.env.NEXT_PUBLIC_API_URL + '/admin',
  timeout: 10000,
});

// ì¸í„°ì…‰í„° ì„¤ì •
adminApi.interceptors.request.use((config) => {
  const token = getAuthToken();
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

adminApi.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.status === 401) {
      // í† í° ë§Œë£Œ ë˜ëŠ” ê¶Œí•œ ì—†ìŒ
      window.location.href = '/auth/login';
    }
    return Promise.reject(error);
  }
);

// API ë©”ì„œë“œë“¤
export const adminApiService = {
  // ëŒ€ì‹œë³´ë“œ
  getDashboard: () => adminApi.get('/dashboard'),
  
  // ì‚¬ìš©ì ê´€ë¦¬
  getUsers: (params: any) => adminApi.get('/users', { params }),
  getUser: (id: string) => adminApi.get(`/users/${id}`),
  updateUser: (id: string, data: any) => adminApi.put(`/users/${id}`, data),
  deleteUser: (id: string) => adminApi.delete(`/users/${id}`),
  bulkUserAction: (data: any) => adminApi.post('/users/bulk-action', data),
  
  // í”„ë¡œì íŠ¸ ê´€ë¦¬
  getProjects: (params: any) => adminApi.get('/projects', { params }),
  getProject: (id: string) => adminApi.get(`/projects/${id}`),
  
  // ì‹œìŠ¤í…œ ì„¤ì •
  getSettings: () => adminApi.get('/settings'),
  updateSettings: (data: any) => adminApi.put('/settings', data),
};
```

## ğŸ”§ Phase 2: í•µì‹¬ ê´€ë¦¬ ê¸°ëŠ¥ (3ì£¼)

### 2.1 ì‚¬ìš©ì ê´€ë¦¬ êµ¬í˜„

#### ë°±ì—”ë“œ ì»¨íŠ¸ë¡¤ëŸ¬
```typescript
// backend/src/modules/admin/controllers/users.controller.ts
@Controller('admin/users')
@UseGuards(JwtAuthGuard, AdminGuard, PermissionsGuard)
export class AdminUsersController {
  constructor(private usersService: AdminUsersService) {}

  @Get()
  @RequirePermissions('users:read')
  async getUsers(@Query() query: GetUsersQueryDto) {
    return this.usersService.getUsers(query);
  }

  @Get(':id')
  @RequirePermissions('users:read')
  async getUser(@Param('id') id: string) {
    return this.usersService.getUserById(id);
  }

  @Put(':id')
  @RequirePermissions('users:update')
  @AuditLog('user_updated')
  async updateUser(
    @Param('id') id: string,
    @Body() updateData: UpdateUserDto
  ) {
    return this.usersService.updateUser(id, updateData);
  }

  @Delete(':id')
  @RequirePermissions('users:delete')
  @AuditLog('user_deleted')
  async deleteUser(@Param('id') id: string) {
    return this.usersService.softDeleteUser(id);
  }

  @Post('bulk-action')
  @RequirePermissions('users:update')
  @AuditLog('users_bulk_action')
  async bulkAction(@Body() actionData: BulkUserActionDto) {
    return this.usersService.performBulkAction(actionData);
  }
}
```

#### í”„ë¡ íŠ¸ì—”ë“œ ì‚¬ìš©ì ëª©ë¡ í˜ì´ì§€
```typescript
// frontend/src/app/admin/users/page.tsx
'use client';

import { useState, useEffect } from 'react';
import { AdminTable } from '@/components/admin/AdminTable';
import { UserFilters } from '@/components/admin/UserFilters';
import { BulkActionBar } from '@/components/admin/BulkActionBar';
import { adminApiService } from '@/lib/admin-api';

export default function AdminUsersPage() {
  const [users, setUsers] = useState([]);
  const [loading, setLoading] = useState(true);
  const [pagination, setPagination] = useState({
    page: 1,
    limit: 20,
    total: 0
  });
  const [selectedUsers, setSelectedUsers] = useState<string[]>([]);
  const [filters, setFilters] = useState({});

  useEffect(() => {
    loadUsers();
  }, [pagination.page, pagination.limit, filters]);

  const loadUsers = async () => {
    try {
      setLoading(true);
      const response = await adminApiService.getUsers({
        page: pagination.page,
        limit: pagination.limit,
        ...filters
      });
      
      setUsers(response.data.data);
      setPagination(prev => ({
        ...prev,
        total: response.data.pagination.total
      }));
    } catch (error) {
      console.error('ì‚¬ìš©ì ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleBulkAction = async (action: string) => {
    try {
      await adminApiService.bulkUserAction({
        userIds: selectedUsers,
        action
      });
      
      setSelectedUsers([]);
      loadUsers();
    } catch (error) {
      console.error('ì¼ê´„ ì‘ì—… ì‹¤íŒ¨:', error);
    }
  };

  const columns = [
    {
      key: 'name',
      title: 'ì´ë¦„',
      sortable: true,
      render: (value: string, record: any) => (
        <div className="flex items-center">
          <img
            src={record.avatar || '/default-avatar.png'}
            alt={value}
            className="w-8 h-8 rounded-full mr-3"
          />
          <div>
            <div className="font-medium">{value}</div>
            <div className="text-sm text-gray-500">{record.email}</div>
          </div>
        </div>
      )
    },
    {
      key: 'role',
      title: 'ì—­í• ',
      render: (value: string) => (
        <StatusBadge status={value} />
      )
    },
    {
      key: 'status',
      title: 'ìƒíƒœ',
      render: (value: string) => (
        <StatusBadge status={value} />
      )
    },
    {
      key: 'lastLoginAt',
      title: 'ë§ˆì§€ë§‰ ë¡œê·¸ì¸',
      render: (value: string) => (
        value ? new Date(value).toLocaleDateString() : 'ì—†ìŒ'
      )
    },
    {
      key: 'actions',
      title: 'ì‘ì—…',
      render: (value: any, record: any) => (
        <UserActions user={record} onUpdate={loadUsers} />
      )
    }
  ];

  const bulkActions = [
    {
      key: 'activate',
      label: 'í™œì„±í™”',
      icon: CheckIcon,
      onClick: () => handleBulkAction('activate')
    },
    {
      key: 'deactivate',
      label: 'ë¹„í™œì„±í™”',
      icon: XMarkIcon,
      onClick: () => handleBulkAction('deactivate')
    },
    {
      key: 'send_email',
      label: 'ì´ë©”ì¼ ë°œì†¡',
      icon: EnvelopeIcon,
      onClick: () => handleBulkAction('send_email')
    }
  ];

  return (
    <div className="space-y-6">
      <div className="flex justify-between items-center">
        <h1 className="text-2xl font-bold text-gray-900">ì‚¬ìš©ì ê´€ë¦¬</h1>
        <PermissionGate permissions="users:create">
          <Button onClick={() => setShowCreateModal(true)}>
            ì‚¬ìš©ì ìƒì„±
          </Button>
        </PermissionGate>
      </div>

      <UserFilters 
        filters={filters}
        onChange={setFilters}
        onReset={() => setFilters({})}
      />

      {selectedUsers.length > 0 && (
        <BulkActionBar
          selectedCount={selectedUsers.length}
          actions={bulkActions}
          onClearSelection={() => setSelectedUsers([])}
        />
      )}

      <AdminTable
        data={users}
        columns={columns}
        loading={loading}
        pagination={{
          ...pagination,
          onChange: (page, limit) => setPagination(prev => ({ ...prev, page, limit }))
        }}
        selection={{
          selectedRows: selectedUsers,
          onSelect: setSelectedUsers,
          bulkActions
        }}
      />
    </div>
  );
}
```

### 2.2 ëŒ€ì‹œë³´ë“œ êµ¬í˜„

#### ëŒ€ì‹œë³´ë“œ ì»´í¬ë„ŒíŠ¸
```typescript
// frontend/src/components/admin/AdminDashboard.tsx
'use client';

import { useState, useEffect } from 'react';
import { KPICard } from '@/components/admin/KPICard';
import { UserGrowthChart } from '@/components/admin/charts/UserGrowthChart';
import { MetricsChart } from '@/components/admin/charts/MetricsChart';
import { RecentActivity } from '@/components/admin/RecentActivity';
import { adminApiService } from '@/lib/admin-api';

export default function AdminDashboard() {
  const [dashboardData, setDashboardData] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    loadDashboardData();
    
    // 5ë¶„ë§ˆë‹¤ KPI ë°ì´í„° ìë™ ìƒˆë¡œê³ ì¹¨
    const interval = setInterval(loadKPIs, 5 * 60 * 1000);
    return () => clearInterval(interval);
  }, []);

  const loadDashboardData = async () => {
    try {
      const response = await adminApiService.getDashboard();
      setDashboardData(response.data);
    } catch (error) {
      console.error('ëŒ€ì‹œë³´ë“œ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
    } finally {
      setLoading(false);
    }
  };

  const loadKPIs = async () => {
    try {
      const response = await adminApiService.getDashboardKPIs();
      setDashboardData(prev => ({ ...prev, kpis: response.data }));
    } catch (error) {
      console.error('KPI ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
    }
  };

  if (loading) {
    return <DashboardSkeleton />;
  }

  return (
    <div className="space-y-6">
      <div className="flex justify-between items-center">
        <h1 className="text-2xl font-bold text-gray-900">ëŒ€ì‹œë³´ë“œ</h1>
        <div className="text-sm text-gray-500">
          ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: {new Date(dashboardData.kpis.lastUpdated).toLocaleTimeString()}
        </div>
      </div>

      {/* KPI ì¹´ë“œë“¤ */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        <KPICard
          title="ì´ ì‚¬ìš©ì"
          value={dashboardData.kpis.totalUsers.toLocaleString()}
          trend={{
            value: 12,
            direction: 'up',
            period: 'ì§€ë‚œ ì£¼'
          }}
          icon={UsersIcon}
          color="blue"
        />
        <KPICard
          title="í™œì„± ì‚¬ìš©ì"
          value={dashboardData.kpis.activeUsers.toLocaleString()}
          trend={{
            value: 8,
            direction: 'up',
            period: 'ì§€ë‚œ ì£¼'
          }}
          icon={UserCheckIcon}
          color="green"
        />
        <KPICard
          title="ì§„í–‰ ì¤‘ì¸ í”„ë¡œì íŠ¸"
          value={dashboardData.kpis.activeProjects.toLocaleString()}
          trend={{
            value: 3,
            direction: 'down',
            period: 'ì§€ë‚œ ì£¼'
          }}
          icon={FolderIcon}
          color="purple"
        />
        <KPICard
          title="ì‹œìŠ¤í…œ ìƒíƒœ"
          value={dashboardData.kpis.systemHealth === 'healthy' ? 'ì •ìƒ' : 'ê²½ê³ '}
          icon={ServerIcon}
          color={dashboardData.kpis.systemHealth === 'healthy' ? 'green' : 'yellow'}
        />
      </div>

      {/* ì°¨íŠ¸ ì„¹ì…˜ */}
      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <UserGrowthChart
          data={dashboardData.charts.userGrowth}
          period="daily"
        />
        <MetricsChart
          data={dashboardData.charts.serverMetrics}
        />
      </div>

      {/* ìµœê·¼ í™œë™ */}
      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <div className="lg:col-span-2">
          <div className="bg-white rounded-lg border border-gray-200">
            <div className="p-6 border-b border-gray-200">
              <h3 className="text-lg font-semibold text-gray-900">í”„ë¡œì íŠ¸ í˜„í™©</h3>
            </div>
            <div className="p-6">
              <ProjectStatusChart data={dashboardData.charts.projectStatus} />
            </div>
          </div>
        </div>
        
        <RecentActivity activities={dashboardData.recentActivity} />
      </div>
    </div>
  );
}
```

## ğŸ¨ Phase 3: ê³ ê¸‰ ê¸°ëŠ¥ (2ì£¼)

### 3.1 ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§

#### WebSocket ì—°ê²°
```typescript
// frontend/src/hooks/useRealTimeMonitoring.ts
import { useEffect, useState } from 'react';
import { io, Socket } from 'socket.io-client';

export const useRealTimeMonitoring = () => {
  const [socket, setSocket] = useState<Socket | null>(null);
  const [metrics, setMetrics] = useState(null);
  const [alerts, setAlerts] = useState([]);

  useEffect(() => {
    const newSocket = io(process.env.NEXT_PUBLIC_WEBSOCKET_URL + '/admin', {
      auth: {
        token: getAuthToken()
      }
    });

    newSocket.on('metrics-update', (data) => {
      setMetrics(data);
    });

    newSocket.on('new-alert', (alert) => {
      setAlerts(prev => [alert, ...prev]);
    });

    setSocket(newSocket);

    return () => {
      newSocket.close();
    };
  }, []);

  return { metrics, alerts };
};
```

### 3.2 ë°ì´í„° ì‹œê°í™” ê³ ë„í™”

#### ê³ ê¸‰ ì°¨íŠ¸ ì»´í¬ë„ŒíŠ¸
```typescript
// frontend/src/components/admin/charts/AdvancedMetricsChart.tsx
interface AdvancedMetricsChartProps {
  data: any[];
  metrics: string[];
  timeRange: 'hour' | 'day' | 'week' | 'month';
}

export const AdvancedMetricsChart: React.FC<AdvancedMetricsChartProps> = ({
  data,
  metrics,
  timeRange
}) => {
  const [selectedMetrics, setSelectedMetrics] = useState(metrics);

  return (
    <BaseChart title="ì‹œìŠ¤í…œ ë©”íŠ¸ë¦­ìŠ¤" data={data}>
      <div className="mb-4 flex flex-wrap gap-2">
        {metrics.map(metric => (
          <Button
            key={metric}
            size="sm"
            variant={selectedMetrics.includes(metric) ? 'default' : 'outline'}
            onClick={() => toggleMetric(metric)}
          >
            {metric}
          </Button>
        ))}
      </div>
      
      <ResponsiveContainer width="100%" height={400}>
        <LineChart data={data}>
          <CartesianGrid strokeDasharray="3 3" />
          <XAxis 
            dataKey="timestamp"
            tickFormatter={(value) => formatTime(value, timeRange)}
          />
          <YAxis />
          <Tooltip content={<MultiMetricTooltip />} />
          <Legend />
          
          {selectedMetrics.map((metric, index) => (
            <Line
              key={metric}
              type="monotone"
              dataKey={metric}
              stroke={CHART_COLORS[index]}
              strokeWidth={2}
              dot={false}
            />
          ))}
        </LineChart>
      </ResponsiveContainer>
    </BaseChart>
  );
};
```

## âš¡ Phase 4: ìµœì í™” ë° í…ŒìŠ¤íŠ¸ (1ì£¼)

### 4.1 ì„±ëŠ¥ ìµœì í™”

#### ë°ì´í„° ë¡œë”© ìµœì í™”
```typescript
// frontend/src/hooks/useAdminData.ts
import { useQuery, useQueryClient } from '@tanstack/react-query';
import { adminApiService } from '@/lib/admin-api';

export const useAdminUsers = (params: any) => {
  return useQuery({
    queryKey: ['admin-users', params],
    queryFn: () => adminApiService.getUsers(params),
    staleTime: 5 * 60 * 1000, // 5ë¶„
    cacheTime: 10 * 60 * 1000, // 10ë¶„
  });
};

export const useAdminDashboard = () => {
  return useQuery({
    queryKey: ['admin-dashboard'],
    queryFn: () => adminApiService.getDashboard(),
    refetchInterval: 5 * 60 * 1000, // 5ë¶„ë§ˆë‹¤ ìë™ ìƒˆë¡œê³ ì¹¨
  });
};
```

#### ë¬´í•œ ìŠ¤í¬ë¡¤ êµ¬í˜„
```typescript
// frontend/src/hooks/useInfiniteAdminData.ts
import { useInfiniteQuery } from '@tanstack/react-query';

export const useInfiniteAdminUsers = (filters: any) => {
  return useInfiniteQuery({
    queryKey: ['admin-users-infinite', filters],
    queryFn: ({ pageParam = 1 }) =>
      adminApiService.getUsers({ ...filters, page: pageParam }),
    getNextPageParam: (lastPage) =>
      lastPage.pagination.hasNext ? lastPage.pagination.page + 1 : undefined,
  });
};
```

### 4.2 ë³´ì•ˆ ê°•í™”

#### CSP í—¤ë” ì„¤ì •
```typescript
// frontend/next.config.js
const nextConfig = {
  async headers() {
    return [
      {
        source: '/admin/:path*',
        headers: [
          {
            key: 'Content-Security-Policy',
            value: `
              default-src 'self';
              script-src 'self' 'unsafe-eval' 'unsafe-inline';
              style-src 'self' 'unsafe-inline';
              img-src 'self' data: https:;
              connect-src 'self' ${process.env.NEXT_PUBLIC_API_URL};
            `.replace(/\s+/g, ' ').trim()
          },
          {
            key: 'X-Frame-Options',
            value: 'DENY'
          },
          {
            key: 'X-Content-Type-Options',
            value: 'nosniff'
          }
        ]
      }
    ];
  }
};
```

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì „ëµ

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
```typescript
// frontend/src/components/admin/__tests__/AdminTable.test.tsx
import { render, screen, fireEvent } from '@testing-library/react';
import { AdminTable } from '../AdminTable';

describe('AdminTable', () => {
  const mockData = [
    { id: '1', name: 'Test User', email: 'test@test.com', role: 'MEMBER' }
  ];

  const mockColumns = [
    { key: 'name', title: 'ì´ë¦„' },
    { key: 'email', title: 'ì´ë©”ì¼' },
    { key: 'role', title: 'ì—­í• ' }
  ];

  it('ë°ì´í„°ë¥¼ ì˜¬ë°”ë¥´ê²Œ ë Œë”ë§í•œë‹¤', () => {
    render(<AdminTable data={mockData} columns={mockColumns} />);
    
    expect(screen.getByText('Test User')).toBeInTheDocument();
    expect(screen.getByText('test@test.com')).toBeInTheDocument();
  });

  it('ì •ë ¬ ê¸°ëŠ¥ì´ ë™ì‘í•œë‹¤', () => {
    const onSort = jest.fn();
    render(
      <AdminTable 
        data={mockData} 
        columns={mockColumns} 
        onSort={onSort}
      />
    );
    
    fireEvent.click(screen.getByText('ì´ë¦„'));
    expect(onSort).toHaveBeenCalledWith('name', 'asc');
  });
});
```

### E2E í…ŒìŠ¤íŠ¸
```typescript
// e2e/admin.spec.ts
import { test, expect } from '@playwright/test';

test.describe('Admin Panel', () => {
  test.beforeEach(async ({ page }) => {
    // ê´€ë¦¬ìë¡œ ë¡œê·¸ì¸
    await page.goto('/auth/login');
    await page.fill('input[type="email"]', 'admin@workly.com');
    await page.fill('input[type="password"]', 'adminpassword');
    await page.click('button[type="submit"]');
    await page.waitForURL('/admin');
  });

  test('ëŒ€ì‹œë³´ë“œê°€ ì˜¬ë°”ë¥´ê²Œ ë¡œë“œëœë‹¤', async ({ page }) => {
    await expect(page.locator('h1')).toContainText('ëŒ€ì‹œë³´ë“œ');
    await expect(page.locator('[data-testid="kpi-cards"]')).toBeVisible();
    await expect(page.locator('[data-testid="user-growth-chart"]')).toBeVisible();
  });

  test('ì‚¬ìš©ì ëª©ë¡ì„ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤', async ({ page }) => {
    await page.click('a[href="/admin/users"]');
    await page.waitForURL('/admin/users');
    
    await expect(page.locator('h1')).toContainText('ì‚¬ìš©ì ê´€ë¦¬');
    await expect(page.locator('[data-testid="users-table"]')).toBeVisible();
  });

  test('ì‚¬ìš©ì ì •ë³´ë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤', async ({ page }) => {
    await page.goto('/admin/users');
    await page.click('[data-testid="user-edit-button"]:first-child');
    
    await page.fill('input[name="name"]', 'Updated Name');
    await page.click('button[type="submit"]');
    
    await expect(page.locator('.success-message')).toBeVisible();
  });
});
```

## ğŸ“Š ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼

### ë¡œê¹… ì„¤ì •
```typescript
// backend/src/modules/admin/admin.module.ts
import { Logger } from '@nestjs/common';

@Module({
  // ...
  providers: [
    {
      provide: 'ADMIN_LOGGER',
      useValue: new Logger('AdminModule')
    },
    // ...
  ]
})
export class AdminModule {}
```

### ìŠ¬ë™ ì•Œë¦¼ ì—°ë™
```typescript
// backend/src/modules/admin/services/notification.service.ts
@Injectable()
export class AdminNotificationService {
  private readonly slackWebhook = process.env.SLACK_WEBHOOK_URL;

  async sendAdminAlert(alert: {
    type: string;
    message: string;
    severity: 'low' | 'medium' | 'high' | 'critical';
    adminId?: string;
  }) {
    if (!this.slackWebhook) return;

    const color = {
      low: '#36a64f',
      medium: '#ff9800',
      high: '#f44336',
      critical: '#9c27b0'
    }[alert.severity];

    const payload = {
      attachments: [{
        color,
        title: `ğŸš¨ Admin Alert: ${alert.type}`,
        text: alert.message,
        fields: [
          {
            title: 'Severity',
            value: alert.severity.toUpperCase(),
            short: true
          },
          {
            title: 'Time',
            value: new Date().toISOString(),
            short: true
          }
        ]
      }]
    };

    try {
      await axios.post(this.slackWebhook, payload);
    } catch (error) {
      console.error('Slack ì•Œë¦¼ ì „ì†¡ ì‹¤íŒ¨:', error);
    }
  }
}
```

## ğŸš€ ë°°í¬ ê°€ì´ë“œ

### Docker ì»¨í…Œì´ë„ˆí™”
```dockerfile
# ì–´ë“œë¯¼ íŒ¨ë„ìš© Dockerfile
FROM node:18-alpine AS builder

WORKDIR /app
COPY frontend/package*.json ./
RUN npm ci --only=production

COPY frontend/ .
RUN npm run build

FROM node:18-alpine AS runner
WORKDIR /app

COPY --from=builder /app/.next/standalone ./
COPY --from=builder /app/.next/static ./.next/static
COPY --from=builder /app/public ./public

EXPOSE 3000
CMD ["node", "server.js"]
```

### í™˜ê²½ë³€ìˆ˜ ì„¤ì •
```bash
# .env.production
NEXT_PUBLIC_API_URL=https://api.workly.com
NEXT_PUBLIC_WEBSOCKET_URL=wss://api.workly.com

# ë°±ì—”ë“œ í™˜ê²½ë³€ìˆ˜
ADMIN_JWT_SECRET=super-secure-admin-secret
ADMIN_SESSION_TIMEOUT=1800000
ADMIN_ALLOWED_IPS=192.168.1.0/24,10.0.0.0/8
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/...
```

## ğŸ“ˆ ì„±ê³µ ì§€í‘œ ë° ëª¨ë‹ˆí„°ë§

### í•µì‹¬ ì§€í‘œ
- **ì‘ë‹µ ì‹œê°„**: API ì‘ë‹µ < 200ms, í˜ì´ì§€ ë¡œë“œ < 2ì´ˆ
- **ê°€ìš©ì„±**: 99.9% ì—…íƒ€ì„
- **ë³´ì•ˆ**: ë¬´ë‹¨ ì ‘ê·¼ ì‹œë„ 0ê±´, ëª¨ë“  ê´€ë¦¬ ì‘ì—… ê°ì‚¬ ë¡œê·¸ 100%
- **ì‚¬ìš©ì„±**: ê´€ë¦¬ ì‘ì—… ì™„ë£Œ ì‹œê°„ 50% ë‹¨ì¶•

### ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ
- **Grafana**: ì‹œìŠ¤í…œ ë©”íŠ¸ë¦­ìŠ¤, API ì„±ëŠ¥, ì‚¬ìš©ì í™œë™
- **Sentry**: ì˜¤ë¥˜ ì¶”ì  ë° ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
- **CloudWatch**: AWS ì¸í”„ë¼ ëª¨ë‹ˆí„°ë§ (ë°°í¬ ì‹œ)

---

*ì´ êµ¬í˜„ ê°€ì´ë“œëŠ” ì›Œí´ë¦¬ ì–´ë“œë¯¼ íŒ¨ë„ì˜ ì „ì²´ ê°œë°œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì•ˆë‚´í•©ë‹ˆë‹¤. ê° ë‹¨ê³„ë¥¼ ìˆœì„œëŒ€ë¡œ ë”°ë¼í•˜ë©´ ì™„ì „í•œ ê¸°ëŠ¥ì˜ ì–´ë“œë¯¼ íŒ¨ë„ì„ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.*
</file>

<file path="docs/admin-panel-design.md">
# ì›Œí´ë¦¬ ì–´ë“œë¯¼ íŒ¨ë„ ì„¤ê³„ ë¬¸ì„œ

## ğŸ“‹ ê°œìš”

ì›Œí´ë¦¬ ì•±ì˜ ê´€ë¦¬ìë¥¼ ìœ„í•œ ì›¹ ê¸°ë°˜ ì–´ë“œë¯¼ íŒ¨ë„ ì„¤ê³„ ë¬¸ì„œì…ë‹ˆë‹¤. ê¸°ì¡´ ì›Œí´ë¦¬ ì•±ì˜ ë””ìì¸ ì‹œìŠ¤í…œê³¼ ì•„í‚¤í…ì²˜ë¥¼ ê³„ìŠ¹í•˜ì—¬ ì¼ê´€ì„± ìˆëŠ” ê´€ë¦¬ ë„êµ¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

## ğŸ¯ ëª©ì  ë° ëª©í‘œ

### í•µì‹¬ ëª©ì 
- **íš¨ìœ¨ì ì¸ ì‚¬ìš©ì ê´€ë¦¬**: íšŒì› ê°€ì…ë¶€í„° ê³„ì • ê´€ë¦¬ê¹Œì§€ ì›ìŠ¤í†± ê´€ë¦¬
- **ì½˜í…ì¸  í’ˆì§ˆ ê´€ë¦¬**: í”„ë¡œì íŠ¸, ì—…ë¬´, ëª©í‘œ ë°ì´í„°ì˜ í’ˆì§ˆ ìœ ì§€
- **ì‹œìŠ¤í…œ ìš´ì˜ ì§€ì›**: ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§, ì˜¤ë¥˜ ì¶”ì , ì‹œìŠ¤í…œ ì„¤ì •
- **ë¹„ì¦ˆë‹ˆìŠ¤ ì¸ì‚¬ì´íŠ¸**: ì‚¬ìš©ì í–‰ë™ ë¶„ì„, ì„œë¹„ìŠ¤ ì„±ì¥ ì§€í‘œ ì œê³µ

### ì£¼ìš” ì‚¬ìš©ì
- **ì‹œìŠ¤í…œ ê´€ë¦¬ì**: ì „ì²´ ì‹œìŠ¤í…œ ê´€ë¦¬ ê¶Œí•œ
- **ì„œë¹„ìŠ¤ ë§¤ë‹ˆì €**: ì½˜í…ì¸  ë° ì‚¬ìš©ì ê´€ë¦¬ ê¶Œí•œ
- **ê³ ê° ì§€ì›íŒ€**: ì‚¬ìš©ì ë¬¸ì˜ ì²˜ë¦¬ ë° ê³„ì • ê´€ë¦¬

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì „ì²´ êµ¬ì¡°
```
ì›Œí´ë¦¬ ìƒíƒœê³„
â”œâ”€â”€ ë©”ì¸ ì•± (/)
â”‚   â”œâ”€â”€ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤
â”‚   â”œâ”€â”€ í”„ë¡œì íŠ¸ í˜‘ì—… ë„êµ¬
â”‚   â””â”€â”€ ê°œì¸ ìƒì‚°ì„± ë„êµ¬
â”œâ”€â”€ ì–´ë“œë¯¼ íŒ¨ë„ (/admin)
â”‚   â”œâ”€â”€ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ
â”‚   â”œâ”€â”€ ì‚¬ìš©ì ê´€ë¦¬ ë„êµ¬
â”‚   â”œâ”€â”€ ì½˜í…ì¸  ê´€ë¦¬ ì‹œìŠ¤í…œ
â”‚   â””â”€â”€ ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§
â””â”€â”€ API ë°±ì—”ë“œ
    â”œâ”€â”€ ê³µí†µ API (/api/v1/*)
    â”œâ”€â”€ ê´€ë¦¬ì API (/api/admin/*)
    â””â”€â”€ ê¶Œí•œ ê¸°ë°˜ ì ‘ê·¼ ì œì–´
```

### ê¸°ìˆ  ìŠ¤íƒ
- **í”„ë¡ íŠ¸ì—”ë“œ**: Next.js 14 + TypeScript + Tailwind CSS
- **ë°±ì—”ë“œ**: NestJS + TypeORM + PostgreSQL (ê¸°ì¡´ êµ¬ì¡° í™•ì¥)
- **ì¸ì¦**: JWT + Role-based Access Control
- **ë°ì´í„° ì‹œê°í™”**: Chart.js / Recharts
- **ìƒíƒœ ê´€ë¦¬**: Zustand (ê¸°ì¡´ê³¼ ë™ì¼)

## ğŸ¨ ë””ìì¸ ì‹œìŠ¤í…œ

### ê¸°ë³¸ ì›ì¹™
ì›Œí´ë¦¬ì˜ í•µì‹¬ ë””ìì¸ ì›ì¹™ì„ ê³„ìŠ¹í•˜ë˜, ê´€ë¦¬ ë„êµ¬ì˜ íŠ¹ì„±ì„ ë°˜ì˜:

1. **ê·¹ë„ì˜ ê°„ê²°í•¨**: ì •ë³´ ë°€ë„ëŠ” ë†’ì´ë˜ ì‹œê°ì  ë³µì¡ì„±ì€ ìµœì†Œí™”
2. **ë‹¨ì¼ ì»¬ëŸ¬ ì‹œìŠ¤í…œ**: Primary Blue (#2563eb) ê¸°ë°˜ í™•ì¥
3. **ë°ì´í„° ì¤‘ì‹¬**: ì°¨íŠ¸, í…Œì´ë¸”, ì§€í‘œê°€ í•µì‹¬ì¸ ì¸í„°í˜ì´ìŠ¤

### í™•ì¥ëœ ì»¬ëŸ¬ íŒ”ë ˆíŠ¸
```css
/* ê¸°ì¡´ ì›Œí´ë¦¬ ì»¬ëŸ¬ */
--primary: #2563eb;        /* Primary Blue */
--primary-hover: #1d4ed8;  /* Primary Hover */
--primary-light: #dbeafe; /* Primary Light */

/* ì–´ë“œë¯¼ ì „ìš© í™•ì¥ ì»¬ëŸ¬ */
--admin-primary: #1e40af;   /* ë” ì§„í•œ ë¸”ë£¨ (ê¶Œìœ„ê°) */
--success: #059669;         /* ì„±ê³µ/ìŠ¹ì¸ */
--warning: #d97706;         /* ê²½ê³ /ëŒ€ê¸° */
--danger: #dc2626;          /* ì˜¤ë¥˜/ê±°ë¶€ */
--info: #0284c7;           /* ì •ë³´/ì•Œë¦¼ */

/* ë°ì´í„° ì‹œê°í™” */
--chart-1: #2563eb;
--chart-2: #7c3aed;
--chart-3: #dc2626;
--chart-4: #059669;
--chart-5: #d97706;
```

### ë ˆì´ì•„ì›ƒ ì‹œìŠ¤í…œ
```
Desktop (>= 1024px)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Header (h-16): ë¡œê³  + ë„¤ë¹„ + ì‚¬ìš©ì ë©”ë‰´           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Sidebar     â”‚ Main Content                      â”‚
â”‚ (w-64)      â”‚ (flex-1)                         â”‚
â”‚             â”‚                                   â”‚
â”‚ - Dashboard â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ - Users     â”‚ â”‚ Page Header                     â”‚ â”‚
â”‚ - Projects  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ - Tasks     â”‚ â”‚                                 â”‚ â”‚
â”‚ - Content   â”‚ â”‚ Page Content                    â”‚ â”‚
â”‚ - Settings  â”‚ â”‚ (cards, tables, charts)         â”‚ â”‚
â”‚ - System    â”‚ â”‚                                 â”‚ â”‚
â”‚             â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Tablet (768px - 1023px)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Header + Mobile Menu Toggle                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Overlay Sidebar (collapsed by default)           â”‚
â”‚ Main Content (full width)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“± í™”ë©´ë³„ ìƒì„¸ ì„¤ê³„

### 1. ëŒ€ì‹œë³´ë“œ (/)
**ëª©ì **: ì‹œìŠ¤í…œ ì „ë°˜ì˜ ìƒíƒœë¥¼ í•œëˆˆì— íŒŒì•…

```typescript
interface DashboardData {
  kpis: {
    totalUsers: number;
    activeUsers: number;
    totalProjects: number;
    completedTasks: number;
    systemHealth: 'healthy' | 'warning' | 'critical';
  };
  charts: {
    userGrowth: TimeSeriesData[];
    taskCompletion: TimeSeriesData[];
    projectStatus: PieChartData[];
    serverMetrics: MetricsData;
  };
  recentActivity: ActivityLog[];
}
```

**í•µì‹¬ ì»´í¬ë„ŒíŠ¸**:
- **KPI Cards**: 4x1 ê·¸ë¦¬ë“œë¡œ ì£¼ìš” ì§€í‘œ ìš”ì•½
- **Growth Chart**: ì‚¬ìš©ì/í”„ë¡œì íŠ¸ ì¦ê°€ ì¶”ì´ (ë¼ì¸ ì°¨íŠ¸)
- **Task Completion**: ì—…ë¬´ ì™„ë£Œìœ¨ íŠ¸ë Œë“œ (ì˜ì—­ ì°¨íŠ¸)
- **System Status**: ì„œë²„ ìƒíƒœ, API ì‘ë‹µì‹œê°„ (ì‹¤ì‹œê°„)
- **Recent Activity**: ìµœê·¼ 24ì‹œê°„ ì£¼ìš” í™œë™ ë¡œê·¸

### 2. ì‚¬ìš©ì ê´€ë¦¬ (/users)
**ëª©ì **: ëª¨ë“  ì‚¬ìš©ì ê³„ì •ì˜ ìƒì„±, ìˆ˜ì •, ì‚­ì œ, ê¶Œí•œ ê´€ë¦¬

```typescript
interface UserManagement {
  users: PaginatedList<UserWithStats>;
  filters: {
    role: UserRole[];
    status: UserStatus[];
    registrationDate: DateRange;
    lastActivity: DateRange;
  };
  bulkActions: {
    changeStatus: (userIds: string[], status: UserStatus) => void;
    sendEmail: (userIds: string[], template: EmailTemplate) => void;
    exportData: (userIds: string[]) => void;
  };
}
```

**í•µì‹¬ ê¸°ëŠ¥**:
- **ì‚¬ìš©ì ëª©ë¡**: ê²€ìƒ‰, ë‹¤ì¤‘ í•„í„°, ì •ë ¬, í˜ì´ì§€ë„¤ì´ì…˜
- **ì‚¬ìš©ì ìƒì„¸**: í”„ë¡œí•„ í¸ì§‘, ê¶Œí•œ ë³€ê²½, í™œë™ ì´ë ¥
- **ì¼ê´„ ì‘ì—…**: ì„ íƒëœ ì‚¬ìš©ìë“¤ì— ëŒ€í•œ ìƒíƒœ ë³€ê²½, ì´ë©”ì¼ ë°œì†¡
- **í†µê³„**: ê°€ì… ì¶”ì´, í™œì„±ë„ ë¶„ì„, ê¶Œí•œë³„ ë¶„í¬
- **ë‚´ë³´ë‚´ê¸°**: Excel/CSV í˜•íƒœë¡œ ì‚¬ìš©ì ë°ì´í„° ë‚´ë³´ë‚´ê¸°

### 3. í”„ë¡œì íŠ¸ ê´€ë¦¬ (/projects)
**ëª©ì **: ëª¨ë“  í”„ë¡œì íŠ¸ì˜ í˜„í™© íŒŒì•… ë° í’ˆì§ˆ ê´€ë¦¬

```typescript
interface ProjectManagement {
  projects: PaginatedList<ProjectWithMetrics>;
  analytics: {
    successRate: number;
    averageCompletionTime: number;
    popularSkills: SkillStats[];
    teamSizeDistribution: number[];
  };
  moderation: {
    reportedProjects: ProjectReport[];
    pendingApproval: Project[];
  };
}
```

**í•µì‹¬ ê¸°ëŠ¥**:
- **í”„ë¡œì íŠ¸ ëª©ë¡**: ìƒíƒœë³„ í•„í„°ë§, ì§„í–‰ë¥  ì‹œê°í™”
- **í”„ë¡œì íŠ¸ ìƒì„¸**: ë©¤ë²„ ê´€ë¦¬, ì—…ë¬´ í˜„í™©, ì±„íŒ… ë¡œê·¸ ê²€í† 
- **í’ˆì§ˆ ê´€ë¦¬**: ì‹ ê³ ëœ í”„ë¡œì íŠ¸ ê²€í† , ìŠ¹ì¸ ëŒ€ê¸° í”„ë¡œì íŠ¸
- **ë¶„ì„**: ì„±ê³µë¥ , ì™„ë£Œ ì‹œê°„, ì¸ê¸° ìŠ¤í‚¬ í†µê³„
- **ê°œì… ë„êµ¬**: í”„ë¡œì íŠ¸ ì¤‘ë‹¨, ë©¤ë²„ ì œì¬, ê³µì§€ì‚¬í•­ ì „ì†¡

### 4. ì—…ë¬´ ê´€ë¦¬ (/tasks)
**ëª©ì **: í”Œë«í¼ ë‚´ ëª¨ë“  ì—…ë¬´ì˜ í’ˆì§ˆê³¼ ë¶„ë¥˜ ê´€ë¦¬

```typescript
interface TaskManagement {
  tasks: PaginatedList<TaskWithContext>;
  categories: {
    uncategorized: number;
    blocked: number;
    overdue: number;
    highPriority: number;
  };
  automation: {
    autoLabeling: boolean;
    duplicateDetection: boolean;
    spamFilter: boolean;
  };
}
```

**í•µì‹¬ ê¸°ëŠ¥**:
- **ì—…ë¬´ ëª©ë¡**: í”„ë¡œì íŠ¸ë³„, ì‚¬ìš©ìë³„, ìƒíƒœë³„ í•„í„°ë§
- **ì—…ë¬´ ìƒì„¸**: ë‚´ìš© ê²€í† , ë¼ë²¨ë§, ì¤‘ë³µ ì²´í¬
- **ìë™í™” ê´€ë¦¬**: AI ê¸°ë°˜ ìë™ ë¶„ë¥˜, ìŠ¤íŒ¸ í•„í„°ë§
- **í’ˆì§ˆ ì§€í‘œ**: ì™„ë£Œìœ¨, í‰ê·  ì²˜ë¦¬ ì‹œê°„, ë‚œì´ë„ ë¶„í¬
- **ì´ìŠˆ ê´€ë¦¬**: ì‹ ê³ ëœ ì—…ë¬´, ì°¨ë‹¨ëœ ì—…ë¬´ ì²˜ë¦¬

### 5. ì½˜í…ì¸  ê´€ë¦¬ (/content)
**ëª©ì **: ì•± ë‚´ ëª¨ë“  ì‚¬ìš©ì ìƒì„± ì½˜í…ì¸ ì˜ ëª¨ë”ë ˆì´ì…˜

```typescript
interface ContentManagement {
  content: {
    posts: PaginatedList<PostWithFlags>;
    comments: PaginatedList<CommentWithFlags>;
    files: PaginatedList<FileWithMetadata>;
  };
  moderation: {
    reported: ContentReport[];
    flagged: FlaggedContent[];
    pending: PendingContent[];
  };
  policies: ContentPolicy[];
}
```

**í•µì‹¬ ê¸°ëŠ¥**:
- **ì½˜í…ì¸  ëª©ë¡**: íƒ€ì…ë³„, ìƒíƒœë³„ ì½˜í…ì¸  ë¸Œë¼ìš°ì§•
- **ëª¨ë”ë ˆì´ì…˜ í**: ì‹ ê³ ëœ ì½˜í…ì¸  ê²€í†  ë° ì²˜ë¦¬
- **ìë™ í•„í„°ë§**: ë¶€ì ì ˆí•œ ì½˜í…ì¸  ìë™ íƒì§€
- **ì •ì±… ê´€ë¦¬**: ì»¤ë®¤ë‹ˆí‹° ê°€ì´ë“œë¼ì¸ ë° ì •ì±… ì„¤ì •
- **í†µê³„**: ì½˜í…ì¸  ìƒì„± ì¶”ì´, ì‹ ê³  íŒ¨í„´ ë¶„ì„

### 6. ì‹œìŠ¤í…œ ì„¤ì • (/settings)
**ëª©ì **: ì•± ì „ë°˜ì˜ ì„¤ì •ê³¼ ê¸°ëŠ¥ í† ê¸€ ê´€ë¦¬

```typescript
interface SystemSettings {
  app: {
    maintenanceMode: boolean;
    newUserRegistration: boolean;
    projectCreation: boolean;
    fileUpload: boolean;
    maxFileSize: number;
  };
  notifications: {
    templates: EmailTemplate[];
    pushSettings: PushNotificationConfig;
    frequencies: NotificationFrequency[];
  };
  integrations: {
    googleOAuth: OAuthConfig;
    emailService: EmailServiceConfig;
    fileStorage: StorageConfig;
  };
}
```

**í•µì‹¬ ê¸°ëŠ¥**:
- **ì•± ì„¤ì •**: ê¸°ëŠ¥ í™œì„±í™”/ë¹„í™œì„±í™”, ì œí•œê°’ ì„¤ì •
- **ì•Œë¦¼ ê´€ë¦¬**: ì´ë©”ì¼/í‘¸ì‹œ í…œí”Œë¦¿ í¸ì§‘, ë°œì†¡ ìŠ¤ì¼€ì¤„
- **í†µí•© ì„œë¹„ìŠ¤**: OAuth, ì´ë©”ì¼, íŒŒì¼ ìŠ¤í† ë¦¬ì§€ ì„¤ì •
- **ë³´ì•ˆ ì„¤ì •**: ë¹„ë°€ë²ˆí˜¸ ì •ì±…, ì„¸ì…˜ ë§Œë£Œ, 2FA ì„¤ì •
- **ë°±ì—… & ë³µêµ¬**: ë°ì´í„° ë°±ì—… ìŠ¤ì¼€ì¤„, ë³µêµ¬ ì§€ì  ê´€ë¦¬

### 7. ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§ (/system)
**ëª©ì **: ì„œë²„ ìƒíƒœ, ì„±ëŠ¥, ì˜¤ë¥˜ ëª¨ë‹ˆí„°ë§

```typescript
interface SystemMonitoring {
  metrics: {
    server: ServerMetrics;
    database: DatabaseMetrics;
    api: APIMetrics;
    errors: ErrorLog[];
  };
  alerts: {
    active: Alert[];
    history: AlertHistory[];
    rules: AlertRule[];
  };
  logs: {
    application: ApplicationLog[];
    security: SecurityLog[];
    audit: AuditLog[];
  };
}
```

**í•µì‹¬ ê¸°ëŠ¥**:
- **ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§**: CPU, ë©”ëª¨ë¦¬, ë””ìŠ¤í¬, ë„¤íŠ¸ì›Œí¬ ì‚¬ìš©ë¥ 
- **API ì„±ëŠ¥**: ì‘ë‹µ ì‹œê°„, ì²˜ë¦¬ëŸ‰, ì˜¤ë¥˜ìœ¨
- **ë°ì´í„°ë² ì´ìŠ¤**: ì¿¼ë¦¬ ì„±ëŠ¥, ì—°ê²° ìƒíƒœ, ìš©ëŸ‰ ì‚¬ìš©ë¥ 
- **ì˜¤ë¥˜ ì¶”ì **: ì˜¤ë¥˜ ë¡œê·¸, ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤, ë°œìƒ ë¹ˆë„
- **ì•Œë¦¼ ì„¤ì •**: ì„ê³„ê°’ ê¸°ë°˜ ìë™ ì•Œë¦¼, ì—ìŠ¤ì»¬ë ˆì´ì…˜ ê·œì¹™

## ğŸ” ê¶Œí•œ ë° ë³´ì•ˆ

### ê¶Œí•œ ì²´ê³„
```typescript
enum AdminRole {
  SUPER_ADMIN = 'super_admin',    // ëª¨ë“  ê¶Œí•œ
  ADMIN = 'admin',                // ì‚¬ìš©ì/ì½˜í…ì¸  ê´€ë¦¬
  MODERATOR = 'moderator',        // ì½˜í…ì¸  ëª¨ë”ë ˆì´ì…˜ë§Œ
  SUPPORT = 'support',            // ì‚¬ìš©ì ì§€ì› (ì½ê¸° ì „ìš© + ê¸°ë³¸ ì‚¬ìš©ì ê´€ë¦¬)
}

interface AdminPermissions {
  users: {
    read: boolean;
    create: boolean;
    update: boolean;
    delete: boolean;
    changeRole: boolean;
  };
  content: {
    read: boolean;
    moderate: boolean;
    delete: boolean;
  };
  system: {
    read: boolean;
    configure: boolean;
    maintenance: boolean;
  };
}
```

### ë³´ì•ˆ ì¡°ì¹˜
- **2FA í•„ìˆ˜**: ëª¨ë“  ê´€ë¦¬ì ê³„ì •ì€ 2ë‹¨ê³„ ì¸ì¦ í•„ìˆ˜
- **IP ì œí•œ**: í—ˆìš©ëœ IP ëŒ€ì—­ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥
- **ì„¸ì…˜ ê´€ë¦¬**: 30ë¶„ ë¬´í™œë™ ì‹œ ìë™ ë¡œê·¸ì•„ì›ƒ
- **ê°ì‚¬ ë¡œê·¸**: ëª¨ë“  ê´€ë¦¬ ì‘ì—… ë¡œê·¸ ê¸°ë¡ ë° ì¶”ì 
- **ë°ì´í„° ë§ˆìŠ¤í‚¹**: ë¯¼ê°í•œ ê°œì¸ì •ë³´ ë§ˆìŠ¤í‚¹ ì²˜ë¦¬

## ğŸ“Š ë°ì´í„° ëª¨ë¸

### ê´€ë¦¬ì ì „ìš© ì—”í‹°í‹°
```typescript
// ê´€ë¦¬ì ê³„ì • (ê¸°ì¡´ User ì—”í‹°í‹° í™•ì¥)
interface AdminUser extends User {
  adminRole: AdminRole;
  permissions: AdminPermissions;
  lastAdminLogin: Date;
  failedLoginAttempts: number;
  twoFactorEnabled: boolean;
  ipWhitelist: string[];
}

// ê°ì‚¬ ë¡œê·¸
interface AuditLog {
  id: string;
  adminId: string;
  action: string;
  targetType: 'user' | 'project' | 'task' | 'system';
  targetId?: string;
  changes: Record<string, any>;
  ipAddress: string;
  userAgent: string;
  timestamp: Date;
}

// ì‹œìŠ¤í…œ ì„¤ì •
interface SystemConfig {
  id: string;
  key: string;
  value: any;
  type: 'boolean' | 'string' | 'number' | 'json';
  description: string;
  category: string;
  updatedBy: string;
  updatedAt: Date;
}

// ì½˜í…ì¸  ì‹ ê³ 
interface ContentReport {
  id: string;
  reporterId: string;
  contentType: 'project' | 'task' | 'comment';
  contentId: string;
  reason: ReportReason;
  description: string;
  status: 'pending' | 'reviewed' | 'resolved' | 'dismissed';
  reviewedBy?: string;
  reviewedAt?: Date;
  action?: 'no_action' | 'warning' | 'content_removed' | 'user_suspended';
  createdAt: Date;
}
```

## ğŸš€ êµ¬í˜„ ë¡œë“œë§µ

### Phase 1: ê¸°ë³¸ ì¸í”„ë¼ (2ì£¼)
- [x] ê¶Œí•œ ê¸°ë°˜ ë¼ìš°íŒ… ì‹œìŠ¤í…œ
- [x] ê´€ë¦¬ì ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
- [x] ëŒ€ì‹œë³´ë“œ ê¸°ë³¸ êµ¬ì¡°
- [x] ì‚¬ìš©ì ëª©ë¡/ìƒì„¸ í™”ë©´

### Phase 2: í•µì‹¬ ê´€ë¦¬ ê¸°ëŠ¥ (3ì£¼)
- [ ] í”„ë¡œì íŠ¸ ê´€ë¦¬ í™”ë©´
- [ ] ì—…ë¬´ ê´€ë¦¬ ì‹œìŠ¤í…œ
- [ ] ì½˜í…ì¸  ëª¨ë”ë ˆì´ì…˜ ë„êµ¬
- [ ] ì‹œìŠ¤í…œ ì„¤ì • ì¸í„°í˜ì´ìŠ¤

### Phase 3: ê³ ê¸‰ ê¸°ëŠ¥ (2ì£¼)
- [ ] ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ
- [ ] ë°ì´í„° ì‹œê°í™” ë° ë¶„ì„
- [ ] ì•Œë¦¼ ë° ìë™í™” ì‹œìŠ¤í…œ
- [ ] ê°ì‚¬ ë¡œê·¸ ë° ë³´ì•ˆ ê°•í™”

### Phase 4: ìµœì í™” ë° í…ŒìŠ¤íŠ¸ (1ì£¼)
- [ ] ì„±ëŠ¥ ìµœì í™”
- [ ] ì‚¬ìš©ì„± í…ŒìŠ¤íŠ¸
- [ ] ë³´ì•ˆ ê²€í† 
- [ ] ë¬¸ì„œí™” ì™„ë£Œ

## ğŸ“ˆ ì„±ê³µ ì§€í‘œ

### ìš´ì˜ íš¨ìœ¨ì„±
- **ê´€ë¦¬ ì‘ì—… ì²˜ë¦¬ ì‹œê°„**: 50% ë‹¨ì¶•
- **ì˜¤ë¥˜ ëŒ€ì‘ ì‹œê°„**: 24ì‹œê°„ â†’ 2ì‹œê°„
- **ì‚¬ìš©ì ë¬¸ì˜ í•´ê²°ë¥ **: 95% ì´ìƒ

### ì‹œìŠ¤í…œ ì•ˆì •ì„±
- **ì„œë²„ ê°€ë™ë¥ **: 99.9% ì´ìƒ
- **API ì‘ë‹µ ì‹œê°„**: í‰ê·  200ms ì´í•˜
- **ë³´ì•ˆ ì¸ì‹œë˜íŠ¸**: 0ê±´

### ë°ì´í„° í’ˆì§ˆ
- **ë¶€ì ì ˆí•œ ì½˜í…ì¸  íƒì§€ìœ¨**: 95% ì´ìƒ
- **ìŠ¤íŒ¸ í•„í„°ë§ ì •í™•ë„**: 98% ì´ìƒ
- **ì‚¬ìš©ì ë§Œì¡±ë„**: 4.5/5.0 ì´ìƒ

---

*ì´ ë¬¸ì„œëŠ” ì›Œí´ë¦¬ ì–´ë“œë¯¼ íŒ¨ë„ì˜ ì„¤ê³„ ëª…ì„¸ì„œì…ë‹ˆë‹¤. êµ¬í˜„ ê³¼ì •ì—ì„œ ì‚¬ìš©ì í”¼ë“œë°±ê³¼ ê¸°ìˆ ì  ì œì•½ì‚¬í•­ì— ë”°ë¼ ì¡°ì •ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.*
</file>

<file path="docs/admin-rbac-design.md">
# ì›Œí´ë¦¬ ì–´ë“œë¯¼ ê¶Œí•œ ê´€ë¦¬ ì‹œìŠ¤í…œ (RBAC) ì„¤ê³„

## ê°œìš”

ì›Œí´ë¦¬ ì–´ë“œë¯¼ íŒ¨ë„ì˜ Role-Based Access Control (RBAC) ì‹œìŠ¤í…œ ì„¤ê³„ì…ë‹ˆë‹¤. ì„¸ë¶„í™”ëœ ê¶Œí•œ ê´€ë¦¬ë¥¼ í†µí•´ ë³´ì•ˆì„±ê³¼ ìš´ì˜ íš¨ìœ¨ì„±ì„ ë™ì‹œì— í™•ë³´í•©ë‹ˆë‹¤.

## ê¶Œí•œ ì²´ê³„ êµ¬ì¡°

### 1. ì—­í•  ê³„ì¸µ êµ¬ì¡°
```
SUPER_ADMIN (ìµœê³  ê´€ë¦¬ì)
â”œâ”€â”€ ëª¨ë“  ê¶Œí•œ ë³´ìœ 
â”œâ”€â”€ ë‹¤ë¥¸ ê´€ë¦¬ì ê³„ì • ìƒì„±/ì‚­ì œ
â””â”€â”€ ì‹œìŠ¤í…œ ì„¤ì • ë³€ê²½

ADMIN (ê´€ë¦¬ì)  
â”œâ”€â”€ ì‚¬ìš©ì ê´€ë¦¬ (ìƒì„±/ìˆ˜ì •/ì‚­ì œ)
â”œâ”€â”€ ì½˜í…ì¸  ê´€ë¦¬ (ëª¨ë“  í”„ë¡œì íŠ¸/ì—…ë¬´)
â”œâ”€â”€ ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§ (ì½ê¸°)
â””â”€â”€ ë³´ê³ ì„œ ìƒì„±

MODERATOR (ëª¨ë”ë ˆì´í„°)
â”œâ”€â”€ ì½˜í…ì¸  ê²€í†  ë° ìŠ¹ì¸
â”œâ”€â”€ ì‹ ê³  ì²˜ë¦¬
â”œâ”€â”€ ì‚¬ìš©ì ê²½ê³ /ì œì¬
â””â”€â”€ ì»¤ë®¤ë‹ˆí‹° ê°€ì´ë“œë¼ì¸ ê´€ë¦¬

SUPPORT (ê³ ê° ì§€ì›)
â”œâ”€â”€ ì‚¬ìš©ì ë¬¸ì˜ ì²˜ë¦¬
â”œâ”€â”€ ê³„ì • ë¬¸ì œ í•´ê²° (ì œí•œì )
â”œâ”€â”€ ë°ì´í„° ì¡°íšŒ (ì½ê¸° ì „ìš©)
â””â”€â”€ ê¸°ë³¸ ì‚¬ìš©ì ê´€ë¦¬
```

### 2. ê¶Œí•œ ë§¤íŠ¸ë¦­ìŠ¤
```typescript
interface PermissionMatrix {
  [role: string]: {
    users: {
      read: boolean;
      create: boolean;
      update: boolean;
      delete: boolean;
      changeRole: boolean;
      viewSensitive: boolean;
    };
    content: {
      read: boolean;
      moderate: boolean;
      delete: boolean;
      featured: boolean;
    };
    projects: {
      read: boolean;
      moderate: boolean;
      close: boolean;
      featured: boolean;
      viewPrivate: boolean;
    };
    system: {
      read: boolean;
      configure: boolean;
      maintenance: boolean;
      monitoring: boolean;
      backup: boolean;
    };
    reports: {
      view: boolean;
      export: boolean;
      create: boolean;
    };
    audit: {
      view: boolean;
      export: boolean;
    };
  };
}

const PERMISSION_MATRIX: PermissionMatrix = {
  SUPER_ADMIN: {
    users: { read: true, create: true, update: true, delete: true, changeRole: true, viewSensitive: true },
    content: { read: true, moderate: true, delete: true, featured: true },
    projects: { read: true, moderate: true, close: true, featured: true, viewPrivate: true },
    system: { read: true, configure: true, maintenance: true, monitoring: true, backup: true },
    reports: { view: true, export: true, create: true },
    audit: { view: true, export: true }
  },
  ADMIN: {
    users: { read: true, create: true, update: true, delete: true, changeRole: false, viewSensitive: true },
    content: { read: true, moderate: true, delete: true, featured: true },
    projects: { read: true, moderate: true, close: true, featured: true, viewPrivate: true },
    system: { read: true, configure: false, maintenance: false, monitoring: true, backup: false },
    reports: { view: true, export: true, create: true },
    audit: { view: true, export: false }
  },
  MODERATOR: {
    users: { read: true, create: false, update: true, delete: false, changeRole: false, viewSensitive: false },
    content: { read: true, moderate: true, delete: true, featured: false },
    projects: { read: true, moderate: true, close: false, featured: false, viewPrivate: false },
    system: { read: false, configure: false, maintenance: false, monitoring: false, backup: false },
    reports: { view: true, export: false, create: false },
    audit: { view: false, export: false }
  },
  SUPPORT: {
    users: { read: true, create: false, update: true, delete: false, changeRole: false, viewSensitive: false },
    content: { read: true, moderate: false, delete: false, featured: false },
    projects: { read: true, moderate: false, close: false, featured: false, viewPrivate: false },
    system: { read: false, configure: false, maintenance: false, monitoring: false, backup: false },
    reports: { view: true, export: false, create: false },
    audit: { view: false, export: false }
  }
};
```

## ë°±ì—”ë“œ êµ¬í˜„

### 1. ê¶Œí•œ ê²€ì¦ ë°ì½”ë ˆì´í„°
```typescript
// permissions.decorator.ts
export const RequirePermissions = (...permissions: string[]) =>
  SetMetadata('permissions', permissions);

// permissions.guard.ts
@Injectable()
export class PermissionsGuard implements CanActivate {
  constructor(private reflector: Reflector) {}

  canActivate(context: ExecutionContext): boolean {
    const requiredPermissions = this.reflector.get<string[]>(
      'permissions',
      context.getHandler()
    );

    if (!requiredPermissions) {
      return true;
    }

    const request = context.switchToHttp().getRequest();
    const user = request.user;

    return this.hasPermissions(user, requiredPermissions);
  }

  private hasPermissions(user: any, permissions: string[]): boolean {
    const userPermissions = this.getUserPermissions(user.role);
    
    return permissions.every(permission => {
      const [resource, action] = permission.split(':');
      return userPermissions[resource]?.[action] === true;
    });
  }

  private getUserPermissions(role: string) {
    return PERMISSION_MATRIX[role] || {};
  }
}
```

### 2. ê´€ë¦¬ì ì¸ì¦ ê°€ë“œ
```typescript
// admin.guard.ts
@Injectable()
export class AdminGuard implements CanActivate {
  canActivate(context: ExecutionContext): boolean {
    const request = context.switchToHttp().getRequest();
    const user = request.user;

    // ê¸°ë³¸ ì‚¬ìš©ìëŠ” ì–´ë“œë¯¼ íŒ¨ë„ ì ‘ê·¼ ë¶ˆê°€
    const adminRoles = ['SUPER_ADMIN', 'ADMIN', 'MODERATOR', 'SUPPORT'];
    return adminRoles.includes(user.role);
  }
}
```

### 3. ì»¨íŠ¸ë¡¤ëŸ¬ ì ìš© ì˜ˆì‹œ
```typescript
@Controller('admin/users')
@UseGuards(JwtAuthGuard, AdminGuard, PermissionsGuard)
export class AdminUsersController {
  @Get()
  @RequirePermissions('users:read')
  async getUsers(@Query() query: GetUsersDto) {
    return this.usersService.getUsers(query);
  }

  @Post()
  @RequirePermissions('users:create')
  async createUser(@Body() createUserDto: CreateUserDto) {
    return this.usersService.createUser(createUserDto);
  }

  @Put(':id')
  @RequirePermissions('users:update')
  async updateUser(
    @Param('id') id: string,
    @Body() updateUserDto: UpdateUserDto
  ) {
    return this.usersService.updateUser(id, updateUserDto);
  }

  @Delete(':id')
  @RequirePermissions('users:delete')
  async deleteUser(@Param('id') id: string) {
    return this.usersService.deleteUser(id);
  }

  @Put(':id/role')
  @RequirePermissions('users:changeRole')
  async changeUserRole(
    @Param('id') id: string,
    @Body() changeRoleDto: ChangeRoleDto
  ) {
    return this.usersService.changeUserRole(id, changeRoleDto.role);
  }
}
```

### 4. ê°ì‚¬ ë¡œê·¸ ë°ì½”ë ˆì´í„°
```typescript
// audit-log.decorator.ts
export const AuditLog = (action: string) =>
  SetMetadata('auditAction', action);

// audit-log.interceptor.ts
@Injectable()
export class AuditLogInterceptor implements NestInterceptor {
  constructor(private auditService: AuditService) {}

  intercept(context: ExecutionContext, next: CallHandler): Observable<any> {
    const action = this.reflector.get<string>('auditAction', context.getHandler());
    
    if (!action) {
      return next.handle();
    }

    const request = context.switchToHttp().getRequest();
    const user = request.user;
    
    return next.handle().pipe(
      tap((result) => {
        this.auditService.log({
          adminId: user.id,
          adminName: user.name,
          action,
          targetType: this.extractTargetType(context),
          targetId: this.extractTargetId(request),
          changes: this.extractChanges(request, result),
          ipAddress: request.ip,
          userAgent: request.get('User-Agent'),
          timestamp: new Date(),
          success: true
        });
      }),
      catchError((error) => {
        this.auditService.log({
          adminId: user.id,
          adminName: user.name,
          action,
          targetType: this.extractTargetType(context),
          targetId: this.extractTargetId(request),
          ipAddress: request.ip,
          userAgent: request.get('User-Agent'),
          timestamp: new Date(),
          success: false,
          errorMessage: error.message
        });
        throw error;
      })
    );
  }
}
```

## í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„

### 1. ê¶Œí•œ ì»¨í…ìŠ¤íŠ¸
```typescript
// hooks/usePermissions.ts
interface PermissionsContextType {
  permissions: AdminPermissions;
  hasPermission: (permission: string) => boolean;
  hasAnyPermission: (permissions: string[]) => boolean;
  hasAllPermissions: (permissions: string[]) => boolean;
}

const PermissionsContext = createContext<PermissionsContextType | null>(null);

export const PermissionsProvider: React.FC<{ children: React.ReactNode }> = ({ 
  children 
}) => {
  const { user } = useAuth();
  const permissions = getUserPermissions(user?.role);

  const hasPermission = useCallback((permission: string) => {
    const [resource, action] = permission.split(':');
    return permissions[resource]?.[action] === true;
  }, [permissions]);

  const hasAnyPermission = useCallback((perms: string[]) => {
    return perms.some(hasPermission);
  }, [hasPermission]);

  const hasAllPermissions = useCallback((perms: string[]) => {
    return perms.every(hasPermission);
  }, [hasPermission]);

  return (
    <PermissionsContext.Provider value={{
      permissions,
      hasPermission,
      hasAnyPermission,
      hasAllPermissions
    }}>
      {children}
    </PermissionsContext.Provider>
  );
};

export const usePermissions = () => {
  const context = useContext(PermissionsContext);
  if (!context) {
    throw new Error('usePermissions must be used within PermissionsProvider');
  }
  return context;
};
```

### 2. ê¶Œí•œ ê¸°ë°˜ ì»´í¬ë„ŒíŠ¸
```typescript
// components/PermissionGate.tsx
interface PermissionGateProps {
  permissions: string | string[];
  require?: 'any' | 'all';
  fallback?: React.ReactNode;
  children: React.ReactNode;
}

export const PermissionGate: React.FC<PermissionGateProps> = ({
  permissions,
  require = 'any',
  fallback = null,
  children
}) => {
  const { hasPermission, hasAnyPermission, hasAllPermissions } = usePermissions();

  const permissionArray = Array.isArray(permissions) ? permissions : [permissions];
  
  let hasAccess = false;
  if (require === 'all') {
    hasAccess = hasAllPermissions(permissionArray);
  } else {
    hasAccess = hasAnyPermission(permissionArray);
  }

  return hasAccess ? <>{children}</> : <>{fallback}</>;
};

// ì‚¬ìš© ì˜ˆì‹œ
<PermissionGate permissions="users:create">
  <Button onClick={handleCreateUser}>
    ì‚¬ìš©ì ìƒì„±
  </Button>
</PermissionGate>

<PermissionGate 
  permissions={['users:update', 'users:delete']}
  require="any"
  fallback={<span>ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤</span>}
>
  <UserActions user={user} />
</PermissionGate>
```

### 3. ë³´í˜¸ëœ ë¼ìš°íŠ¸
```typescript
// components/ProtectedRoute.tsx
interface ProtectedRouteProps {
  permissions: string | string[];
  require?: 'any' | 'all';
  children: React.ReactNode;
}

export const ProtectedRoute: React.FC<ProtectedRouteProps> = ({
  permissions,
  require = 'any',
  children
}) => {
  const { hasPermission, hasAnyPermission, hasAllPermissions } = usePermissions();
  const router = useRouter();

  const permissionArray = Array.isArray(permissions) ? permissions : [permissions];
  
  let hasAccess = false;
  if (require === 'all') {
    hasAccess = hasAllPermissions(permissionArray);
  } else {
    hasAccess = hasAnyPermission(permissionArray);
  }

  if (!hasAccess) {
    return (
      <div className="flex items-center justify-center min-h-[400px]">
        <div className="text-center">
          <XCircleIcon className="w-16 h-16 text-red-400 mx-auto mb-4" />
          <h2 className="text-xl font-semibold text-gray-900 mb-2">
            ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤
          </h2>
          <p className="text-gray-600 mb-4">
            ì´ í˜ì´ì§€ì— ì ‘ê·¼í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.
          </p>
          <Button onClick={() => router.back()}>
            ì´ì „ í˜ì´ì§€ë¡œ
          </Button>
        </div>
      </div>
    );
  }

  return <>{children}</>;
};
```

### 4. ë„¤ë¹„ê²Œì´ì…˜ í•„í„°ë§
```typescript
// components/AdminSidebar.tsx
const AdminSidebar: React.FC = () => {
  const { hasPermission } = usePermissions();

  const menuItems = [
    { 
      icon: ChartBarIcon, 
      label: 'ëŒ€ì‹œë³´ë“œ', 
      href: '/admin',
      permissions: [] // ëª¨ë“  ê´€ë¦¬ì ì ‘ê·¼ ê°€ëŠ¥
    },
    { 
      icon: UsersIcon, 
      label: 'ì‚¬ìš©ì ê´€ë¦¬', 
      href: '/admin/users',
      permissions: ['users:read']
    },
    { 
      icon: FolderIcon, 
      label: 'í”„ë¡œì íŠ¸ ê´€ë¦¬', 
      href: '/admin/projects',
      permissions: ['projects:read']
    },
    { 
      icon: ShieldCheckIcon, 
      label: 'ì½˜í…ì¸  ê´€ë¦¬', 
      href: '/admin/content',
      permissions: ['content:read']
    },
    { 
      icon: CogIcon, 
      label: 'ì‹œìŠ¤í…œ ì„¤ì •', 
      href: '/admin/settings',
      permissions: ['system:configure']
    },
    { 
      icon: ServerIcon, 
      label: 'ëª¨ë‹ˆí„°ë§', 
      href: '/admin/monitoring',
      permissions: ['system:monitoring']
    }
  ];

  const filteredMenuItems = menuItems.filter(item => 
    item.permissions.length === 0 || 
    item.permissions.some(permission => hasPermission(permission))
  );

  return (
    <aside className="w-64 bg-white border-r border-gray-200">
      <nav className="mt-8">
        {filteredMenuItems.map((item) => (
          <SidebarItem key={item.href} {...item} />
        ))}
      </nav>
    </aside>
  );
};
```

## ë³´ì•ˆ ê°•í™” ì¡°ì¹˜

### 1. ì„¸ì…˜ ê´€ë¦¬
```typescript
// ê´€ë¦¬ì ì„¸ì…˜ì€ ë” ì§§ì€ ë§Œë£Œ ì‹œê°„
const ADMIN_SESSION_TIMEOUT = 30 * 60 * 1000; // 30ë¶„

// ë¯¼ê°í•œ ì‘ì—… ì‹œ ì¬ì¸ì¦ ìš”êµ¬
interface SensitiveActionProps {
  onConfirm: () => void;
  action: string;
}

const SensitiveActionConfirm: React.FC<SensitiveActionProps> = ({
  onConfirm,
  action
}) => {
  const [password, setPassword] = useState('');
  const [loading, setLoading] = useState(false);

  const handleConfirm = async () => {
    setLoading(true);
    try {
      await verifyAdminPassword(password);
      onConfirm();
    } catch (error) {
      // ì˜¤ë¥˜ ì²˜ë¦¬
    } finally {
      setLoading(false);
    }
  };

  return (
    <Modal title="ì‘ì—… í™•ì¸">
      <p className="mb-4">
        <strong>{action}</strong> ì‘ì—…ì„ ìˆ˜í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?
      </p>
      <Input
        type="password"
        placeholder="í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
        value={password}
        onChange={setPassword}
      />
      <div className="flex justify-end space-x-2 mt-4">
        <Button variant="outline">ì·¨ì†Œ</Button>
        <Button onClick={handleConfirm} loading={loading}>
          í™•ì¸
        </Button>
      </div>
    </Modal>
  );
};
```

### 2. IP ì œí•œ
```typescript
// ip-restriction.guard.ts
@Injectable()
export class IpRestrictionGuard implements CanActivate {
  private readonly allowedIPs = process.env.ADMIN_ALLOWED_IPS?.split(',') || [];

  canActivate(context: ExecutionContext): boolean {
    if (this.allowedIPs.length === 0) {
      return true; // IP ì œí•œ ë¹„í™œì„±í™”
    }

    const request = context.switchToHttp().getRequest();
    const clientIp = this.getClientIp(request);

    return this.allowedIPs.some(allowedIp => 
      this.isIpInRange(clientIp, allowedIp)
    );
  }

  private getClientIp(request: any): string {
    return request.headers['x-forwarded-for'] || 
           request.connection.remoteAddress || 
           request.socket.remoteAddress;
  }

  private isIpInRange(ip: string, range: string): boolean {
    // IP ë²”ìœ„ ê²€ì¦ ë¡œì§
    if (range.includes('/')) {
      // CIDR í‘œê¸°ë²• ì²˜ë¦¬
      return this.isIpInCidr(ip, range);
    }
    return ip === range;
  }
}
```

### 3. 2FA (Two-Factor Authentication)
```typescript
// 2FA í•„ìˆ˜ ì²´í¬
@Injectable()
export class TwoFactorGuard implements CanActivate {
  canActivate(context: ExecutionContext): boolean {
    const request = context.switchToHttp().getRequest();
    const user = request.user;

    // SUPER_ADMINê³¼ ADMINì€ 2FA í•„ìˆ˜
    const requiresTwoFactor = ['SUPER_ADMIN', 'ADMIN'].includes(user.role);
    
    if (requiresTwoFactor && !user.twoFactorEnabled) {
      throw new UnauthorizedException('2ë‹¨ê³„ ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤');
    }

    return true;
  }
}
```

## ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼

### 1. ê¶Œí•œ ë³€ê²½ ì•Œë¦¼
```typescript
// ê¶Œí•œ ë³€ê²½ ì‹œ ìë™ ì•Œë¦¼
@EventPattern('admin.role.changed')
async handleRoleChanged(data: { userId: string; oldRole: string; newRole: string; changedBy: string }) {
  // ìŠ¬ë™, ì´ë©”ì¼ ë“±ìœ¼ë¡œ ì•Œë¦¼
  await this.notificationService.sendAdminAlert({
    type: 'role_changed',
    message: `ì‚¬ìš©ì ${data.userId}ì˜ ê¶Œí•œì´ ${data.oldRole}ì—ì„œ ${data.newRole}ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.`,
    changedBy: data.changedBy,
    severity: 'high'
  });
}
```

### 2. ë¹„ì •ìƒ ì ‘ê·¼ íƒì§€
```typescript
// ë¹„ì •ìƒ ì ‘ê·¼ íŒ¨í„´ ê°ì§€
@Injectable()
export class AnomalyDetectionService {
  async detectSuspiciousActivity(adminId: string, action: string, context: any) {
    const recentActions = await this.auditService.getRecentActions(adminId, 24); // 24ì‹œê°„
    
    // ë‹¨ì‹œê°„ ë‚´ ëŒ€ëŸ‰ ì‘ì—…
    if (recentActions.length > 100) {
      await this.alertService.sendAlert({
        type: 'bulk_actions',
        adminId,
        message: '24ì‹œê°„ ë‚´ 100íšŒ ì´ìƒì˜ ê´€ë¦¬ ì‘ì—…ì´ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.'
      });
    }
    
    // ë¹„ì •ìƒ ì‹œê°„ëŒ€ ì ‘ê·¼
    const hour = new Date().getHours();
    if (hour < 6 || hour > 22) {
      await this.alertService.sendAlert({
        type: 'off_hours_access',
        adminId,
        message: 'ì—…ë¬´ ì‹œê°„ ì™¸ ê´€ë¦¬ì ì ‘ê·¼ì´ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.'
      });
    }
  }
}
```

---

*ì´ RBAC ì‹œìŠ¤í…œì€ ì›Œí´ë¦¬ ì–´ë“œë¯¼ íŒ¨ë„ì˜ ë³´ì•ˆê³¼ ìš´ì˜ íš¨ìœ¨ì„±ì„ ë³´ì¥í•˜ëŠ” í•µì‹¬ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. ëª¨ë“  ê´€ë¦¬ ì‘ì—…ì€ ì ì ˆí•œ ê¶Œí•œ ê²€ì¦ê³¼ ê°ì‚¬ ë¡œê·¸ë¥¼ í†µí•´ ì¶”ì  ê°€ëŠ¥í•©ë‹ˆë‹¤.*
</file>

<file path="docs/PROJECT_STRUCTURE.md">
# ì›Œí´ë¦¬ í’€ìŠ¤íƒ í”„ë¡œì íŠ¸ êµ¬ì¡°

## ì „ì²´ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
Workly/
â”œâ”€â”€ ğŸ“ frontend/                    # Next.js í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ ğŸ“ src/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ app/                 # Next.js App Router
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ (auth)/          # ì¸ì¦ ê´€ë ¨ í˜ì´ì§€ ê·¸ë£¹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ register/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ (dashboard)/     # ëŒ€ì‹œë³´ë“œ í˜ì´ì§€ ê·¸ë£¹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx        # í™ˆ(ì—…ë¬´) í˜ì´ì§€
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ projects/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ board/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ activity/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ profile/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ api/             # API ë¼ìš°íŠ¸ (ë°±ì—”ë“œ í”„ë¡ì‹œ)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ proxy/
â”‚   â”‚   â”‚   â”œâ”€â”€ globals.css
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â”‚   â””â”€â”€ loading.tsx
â”‚   â”‚   â”œâ”€â”€ ğŸ“ components/          # ì¬ì‚¬ìš© ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ ui/              # ê¸°ë³¸ UI ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ card.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ modal.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ input.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ navigation/      # ë„¤ë¹„ê²Œì´ì…˜ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LeftNavigation.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ MobileNavigation.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ layout/          # ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Sidebar.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ dashboard/       # ëŒ€ì‹œë³´ë“œ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ WorkDashboard.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StatCard.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ TaskList.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ project/         # í”„ë¡œì íŠ¸ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectCard.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectForm.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ProjectDetail.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ board/           # ê²Œì‹œíŒ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PostCard.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PostForm.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CommentSection.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ auth/            # ì¸ì¦ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚       â”œâ”€â”€ LoginForm.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ GoogleAuth.tsx
â”‚   â”‚   â”‚       â””â”€â”€ ProtectedRoute.tsx
â”‚   â”‚   â”œâ”€â”€ ğŸ“ hooks/               # ì»¤ìŠ¤í…€ í›…
â”‚   â”‚   â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useSocket.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useProjects.ts
â”‚   â”‚   â”‚   â””â”€â”€ useTasks.ts
â”‚   â”‚   â”œâ”€â”€ ğŸ“ services/            # API ì„œë¹„ìŠ¤
â”‚   â”‚   â”‚   â”œâ”€â”€ api.ts              # ê¸°ë³¸ API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ project.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ task.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ board.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ socket.service.ts
â”‚   â”‚   â”œâ”€â”€ ğŸ“ stores/              # ìƒíƒœ ê´€ë¦¬ (Zustand)
â”‚   â”‚   â”‚   â”œâ”€â”€ authStore.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ projectStore.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ taskStore.ts
â”‚   â”‚   â”‚   â””â”€â”€ socketStore.ts
â”‚   â”‚   â”œâ”€â”€ ğŸ“ types/               # TypeScript íƒ€ì… ì •ì˜
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.types.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ project.types.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ task.types.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ board.types.ts
â”‚   â”‚   â”‚   â””â”€â”€ common.types.ts
â”‚   â”‚   â””â”€â”€ ğŸ“ utils/               # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â”‚       â”œâ”€â”€ constants.ts
â”‚   â”‚       â”œâ”€â”€ validation.ts
â”‚   â”‚       â”œâ”€â”€ helpers.ts
â”‚   â”‚       â””â”€â”€ socket-client.ts
â”‚   â”œâ”€â”€ ğŸ“ public/                  # ì •ì  íŒŒì¼
â”‚   â”‚   â”œâ”€â”€ icons/
â”‚   â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â””â”€â”€ favicon.ico
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ next.config.js
â”‚   â”œâ”€â”€ tailwind.config.ts
â”‚   â””â”€â”€ tsconfig.json
â”‚
â”œâ”€â”€ ğŸ“ backend/                     # NestJS ë°±ì—”ë“œ
â”‚   â”œâ”€â”€ ğŸ“ src/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ app/                 # ì•± ì§„ì…ì 
â”‚   â”‚   â”‚   â”œâ”€â”€ app.controller.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ app.module.ts
â”‚   â”‚   â”‚   â””â”€â”€ app.service.ts
â”‚   â”‚   â”œâ”€â”€ ğŸ“ config/              # ì„¤ì • íŒŒì¼
â”‚   â”‚   â”‚   â”œâ”€â”€ database.config.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.config.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ storage.config.ts
â”‚   â”‚   â”‚   â””â”€â”€ socket.config.ts
â”‚   â”‚   â”œâ”€â”€ ğŸ“ common/              # ê³µí†µ ëª¨ë“ˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ decorators/      # ì»¤ìŠ¤í…€ ë°ì½”ë ˆì´í„°
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ guards/          # ê°€ë“œ (ì¸ì¦, ê¶Œí•œ)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ jwt-auth.guard.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ google-auth.guard.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ roles.guard.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ interceptors/    # ì¸í„°ì…‰í„°
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ pipes/           # íŒŒì´í”„ (ê²€ì¦)
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ filters/         # ì˜ˆì™¸ í•„í„°
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ middleware/      # ë¯¸ë“¤ì›¨ì–´
â”‚   â”‚   â”œâ”€â”€ ğŸ“ database/            # ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ entities/        # TypeORM ì—”í‹°í‹°
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user.entity.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ project.entity.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ task.entity.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ board.entity.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ comment.entity.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ file.entity.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ migrations/      # ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ seeds/           # ì´ˆê¸° ë°ì´í„°
â”‚   â”‚   â”‚   â””â”€â”€ database.module.ts
â”‚   â”‚   â”œâ”€â”€ ğŸ“ modules/             # ê¸°ëŠ¥ë³„ ëª¨ë“ˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ auth/            # ì¸ì¦ ëª¨ë“ˆ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.controller.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.module.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ strategies/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ jwt.strategy.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ google.strategy.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ dto/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ login.dto.ts
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ register.dto.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ users/           # ì‚¬ìš©ì ëª¨ë“ˆ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ users.controller.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ users.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ users.module.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ dto/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ create-user.dto.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ projects/        # í”„ë¡œì íŠ¸ ëª¨ë“ˆ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ projects.controller.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ projects.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ projects.module.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ dto/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ create-project.dto.ts
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ update-project.dto.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ tasks/           # ì—…ë¬´ ëª¨ë“ˆ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ tasks.controller.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ tasks.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ tasks.module.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ dto/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ create-task.dto.ts
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ update-task.dto.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ board/           # ê²Œì‹œíŒ ëª¨ë“ˆ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ board.controller.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ board.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ board.module.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ dto/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ create-post.dto.ts
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ create-comment.dto.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ files/           # íŒŒì¼ ê´€ë¦¬ ëª¨ë“ˆ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ files.controller.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ files.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ files.module.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ storage/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ local.storage.ts
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ s3.storage.ts
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ notifications/   # ì•Œë¦¼ ëª¨ë“ˆ
â”‚   â”‚   â”‚       â”œâ”€â”€ notifications.controller.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ notifications.service.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ notifications.module.ts
â”‚   â”‚   â”‚       â””â”€â”€ notifications.gateway.ts
â”‚   â”‚   â”œâ”€â”€ ğŸ“ websockets/          # Socket.io ê´€ë ¨
â”‚   â”‚   â”‚   â”œâ”€â”€ websockets.gateway.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ websockets.module.ts
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ events/
â”‚   â”‚   â”‚       â”œâ”€â”€ task.events.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ project.events.ts
â”‚   â”‚   â”‚       â””â”€â”€ notification.events.ts
â”‚   â”‚   â””â”€â”€ main.ts                 # ì•± ì§„ì…ì 
â”‚   â”œâ”€â”€ ğŸ“ uploads/                 # ë¡œì»¬ íŒŒì¼ ì—…ë¡œë“œ (ê°œë°œìš©)
â”‚   â”œâ”€â”€ ğŸ“ test/                    # í…ŒìŠ¤íŠ¸ íŒŒì¼
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ nest-cli.json
â”‚   â””â”€â”€ tsconfig.json
â”‚
â”œâ”€â”€ ğŸ“ shared/                      # ê³µìœ  ë¼ì´ë¸ŒëŸ¬ë¦¬
â”‚   â”œâ”€â”€ ğŸ“ types/                   # ê³µí†µ íƒ€ì… ì •ì˜
â”‚   â”‚   â”œâ”€â”€ api.types.ts
â”‚   â”‚   â”œâ”€â”€ socket.types.ts
â”‚   â”‚   â””â”€â”€ common.types.ts
â”‚   â”œâ”€â”€ ğŸ“ constants/               # ê³µí†µ ìƒìˆ˜
â”‚   â”‚   â”œâ”€â”€ api-endpoints.ts
â”‚   â”‚   â”œâ”€â”€ socket-events.ts
â”‚   â”‚   â””â”€â”€ app-constants.ts
â”‚   â””â”€â”€ ğŸ“ utils/                   # ê³µí†µ ìœ í‹¸ë¦¬í‹°
â”‚       â”œâ”€â”€ validation.ts
â”‚       â””â”€â”€ helpers.ts
â”‚
â”œâ”€â”€ ğŸ“ docs/                        # í”„ë¡œì íŠ¸ ë¬¸ì„œ
â”‚   â”œâ”€â”€ ğŸ“ api/                     # API ë¬¸ì„œ
â”‚   â”œâ”€â”€ ğŸ“ database/                # ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
â”‚   â””â”€â”€ ğŸ“ deployment/              # ë°°í¬ ê°€ì´ë“œ
â”‚
â”œâ”€â”€ ğŸ“ scripts/                     # ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ setup.sh                    # ì´ˆê¸° ì„¤ì • ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ migrate.sh                  # ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
â”‚   â””â”€â”€ deploy.sh                   # ë°°í¬ ìŠ¤í¬ë¦½íŠ¸
â”‚
â”œâ”€â”€ ğŸ“ .github/                     # GitHub Actions
â”‚   â””â”€â”€ ğŸ“ workflows/
â”‚       â”œâ”€â”€ frontend-ci.yml
â”‚       â””â”€â”€ backend-ci.yml
â”‚
â”œâ”€â”€ docker-compose.yml              # ê°œë°œ í™˜ê²½ Docker
â”œâ”€â”€ docker-compose.prod.yml         # í”„ë¡œë•ì…˜ í™˜ê²½ Docker
â”œâ”€â”€ .env.example                    # í™˜ê²½ ë³€ìˆ˜ ì˜ˆì‹œ
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
â””â”€â”€ CLAUDE.md                       # Claude Code ì„¤ì •
```

## ì£¼ìš” ê¸°ìˆ  ìŠ¤íƒë³„ í´ë” ì„¤ëª…

### ğŸ¨ Frontend (Next.js + TypeScript + Tailwind)
- **App Router êµ¬ì¡°**: í˜ì´ì§€ ê·¸ë£¹í•‘ìœ¼ë¡œ ê´€ë ¨ ê¸°ëŠ¥ ë¶„ë¦¬
- **ì»´í¬ë„ŒíŠ¸ ê³„ì¸µí™”**: ui â†’ layout â†’ feature ìˆœì„œ
- **ìƒíƒœ ê´€ë¦¬**: Zustand ê¸°ë°˜ ëª¨ë“ˆë³„ ìŠ¤í† ì–´
- **API í†µì‹ **: ì„œë¹„ìŠ¤ ë ˆì´ì–´ íŒ¨í„´

### ğŸ”§ Backend (NestJS + TypeORM + PostgreSQL)
- **ëª¨ë“ˆ ê¸°ë°˜ êµ¬ì¡°**: ê¸°ëŠ¥ë³„ ë…ë¦½ ëª¨ë“ˆ
- **ê³„ì¸µí™” ì•„í‚¤í…ì²˜**: Controller â†’ Service â†’ Repository
- **ê³µí†µ ëª¨ë“ˆ**: ì¸ì¦, ê¶Œí•œ, ê²€ì¦ ë“±
- **ë°ì´í„°ë² ì´ìŠ¤**: ì—”í‹°í‹°, ë§ˆì´ê·¸ë ˆì´ì…˜, ì‹œë“œ ë¶„ë¦¬

### ğŸ” Authentication (JWT + Google OAuth)
- **ì „ëµ íŒ¨í„´**: JWT/Google ì¸ì¦ ì „ëµ ë¶„ë¦¬
- **ê°€ë“œ ì‹œìŠ¤í…œ**: ë¼ìš°íŠ¸ ë³´í˜¸ ë° ê¶Œí•œ ì²´í¬
- **í† í° ê´€ë¦¬**: ë¦¬í”„ë ˆì‹œ í† í° í¬í•¨ ì™„ì „í•œ ì¸ì¦ í”Œë¡œìš°

### âš¡ Real-time (Socket.io)
- **Gateway íŒ¨í„´**: ì‹¤ì‹œê°„ ì´ë²¤íŠ¸ ì²˜ë¦¬
- **ì´ë²¤íŠ¸ ë¶„ë¦¬**: ëª¨ë“ˆë³„ ì´ë²¤íŠ¸ íƒ€ì… ì •ì˜
- **í´ë¼ì´ì–¸íŠ¸ ì—°ë™**: í”„ë¡ íŠ¸ì—”ë“œ ì†Œì¼“ ì„œë¹„ìŠ¤

### ğŸ“ File Storage (Local/AWS S3)
- **ì „ëµ íŒ¨í„´**: ë¡œì»¬/í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€ ì¶”ìƒí™”
- **íŒŒì¼ ê´€ë¦¬**: ì—…ë¡œë“œ, ë‹¤ìš´ë¡œë“œ, ì‚­ì œ í†µí•© API
- **ë³´ì•ˆ**: ì¸ì¦ëœ ì‚¬ìš©ìë§Œ íŒŒì¼ ì ‘ê·¼ ê°€ëŠ¥

## ê°œë°œ í™˜ê²½ ì„¤ì •

### Frontend ì„¤ì •
```bash
cd frontend
npm install
npm run dev
```

### Backend ì„¤ì •
```bash
cd backend
npm install
npm run start:dev
```

### Database ì„¤ì •
```bash
docker-compose up -d postgres
cd backend
npm run migration:run
npm run seed:run
```

## API í†µì‹  êµ¬ì¡°

### REST API
- `/api/auth/*` - ì¸ì¦ ê´€ë ¨
- `/api/users/*` - ì‚¬ìš©ì ê´€ë¦¬
- `/api/projects/*` - í”„ë¡œì íŠ¸ ê´€ë¦¬
- `/api/tasks/*` - ì—…ë¬´ ê´€ë¦¬
- `/api/board/*` - ê²Œì‹œíŒ
- `/api/files/*` - íŒŒì¼ ê´€ë¦¬

### WebSocket Events
- `task:created` - ìƒˆ ì—…ë¬´ ìƒì„±
- `task:updated` - ì—…ë¬´ ìƒíƒœ ë³€ê²½
- `project:joined` - í”„ë¡œì íŠ¸ ì°¸ì—¬
- `notification:new` - ìƒˆ ì•Œë¦¼

## ë°°í¬ ì „ëµ

### ê°œë°œ í™˜ê²½
- Docker Composeë¡œ ë¡œì»¬ ê°œë°œ í™˜ê²½ êµ¬ì„±
- í•« ë¦¬ë¡œë“œ ì§€ì›

### í”„ë¡œë•ì…˜ í™˜ê²½
- Frontend: Vercel ë˜ëŠ” Netlify
- Backend: AWS EC2 + RDS
- íŒŒì¼ ìŠ¤í† ë¦¬ì§€: AWS S3
- ì‹¤ì‹œê°„ í†µì‹ : Redis Adapter
</file>

<file path="frontend/src/app/admin/audit-logs/page.tsx">
'use client';

import { useState, useEffect } from 'react';
import { 
  MagnifyingGlassIcon,
  CheckCircleIcon,
  XCircleIcon,
  ClockIcon,
} from '@heroicons/react/24/outline';

interface AuditLog {
  id: string;
  adminId: string;
  adminName: string;
  action: string;
  targetType: string;
  targetId?: string;
  targetName?: string;
  changes?: {
    before?: Record<string, any>;
    after?: Record<string, any>;
  };
  ipAddress: string;
  userAgent: string;
  timestamp: string;
  success: boolean;
  errorMessage?: string;
}

interface AuditFilters {
  search: string;
  adminId: string;
  action: string;
  targetType: string;
  success: string;
  dateRange: {
    start: string;
    end: string;
  };
}

export default function AuditLogsManagement() {
  const [auditLogs, setAuditLogs] = useState<AuditLog[]>([]);
  const [filteredLogs, setFilteredLogs] = useState<AuditLog[]>([]);
  const [isLoading, setIsLoading] = useState(true);
  const [filters, setFilters] = useState<AuditFilters>({
    search: '',
    adminId: '',
    action: '',
    targetType: '',
    success: '',
    dateRange: {
      start: '',
      end: '',
    },
  });

  // ì„ì‹œ ë°ì´í„°
  useEffect(() => {
    const fetchAuditLogs = async () => {
      try {
        // ì‹¤ì œë¡œëŠ” API í˜¸ì¶œ
        // const response = await fetch('/api/admin/audit-logs');
        // const data = await response.json();
        
        // ì„ì‹œ ë°ì´í„°
        const mockLogs: AuditLog[] = [
          {
            id: '1',
            adminId: '1',
            adminName: 'ì‹œìŠ¤í…œ ê´€ë¦¬ì',
            action: 'ì‚¬ìš©ì ì—­í•  ë³€ê²½',
            targetType: 'user',
            targetId: '2',
            targetName: 'ê¹€ì‚¬ìš©ì',
            changes: {
              before: { role: 'MEMBER' },
              after: { role: 'MANAGER' },
            },
            ipAddress: '192.168.1.100',
            userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
            timestamp: '2024-01-15T10:30:00Z',
            success: true,
          },
          {
            id: '2',
            adminId: '2',
            adminName: 'ì´ê´€ë¦¬ì',
            action: 'í”„ë¡œì íŠ¸ ì‚­ì œ',
            targetType: 'project',
            targetId: '5',
            targetName: 'í…ŒìŠ¤íŠ¸ í”„ë¡œì íŠ¸',
            ipAddress: '192.168.1.101',
            userAgent: 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36',
            timestamp: '2024-01-15T09:15:00Z',
            success: true,
          },
          {
            id: '3',
            adminId: '1',
            adminName: 'ì‹œìŠ¤í…œ ê´€ë¦¬ì',
            action: 'ì‹œìŠ¤í…œ ì„¤ì • ë³€ê²½',
            targetType: 'settings',
            changes: {
              before: { maintenanceMode: false },
              after: { maintenanceMode: true },
            },
            ipAddress: '192.168.1.100',
            userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
            timestamp: '2024-01-15T08:45:00Z',
            success: false,
            errorMessage: 'ê¶Œí•œì´ ë¶€ì¡±í•©ë‹ˆë‹¤',
          },
          {
            id: '4',
            adminId: '3',
            adminName: 'ë°•ëª¨ë”ë ˆì´í„°',
            action: 'ëŒ€ì‹œë³´ë“œ ì¡°íšŒ',
            targetType: 'system',
            ipAddress: '192.168.1.102',
            userAgent: 'Mozilla/5.0 (iPhone; CPU iPhone OS 14_7_1 like Mac OS X) AppleWebKit/605.1.15',
            timestamp: '2024-01-15T07:20:00Z',
            success: true,
          },
          {
            id: '5',
            adminId: '1',
            adminName: 'ì‹œìŠ¤í…œ ê´€ë¦¬ì',
            action: 'ì‚¬ìš©ì ê³„ì • ì •ì§€',
            targetType: 'user',
            targetId: '10',
            targetName: 'ìŠ¤íŒ¸ì‚¬ìš©ì',
            changes: {
              before: { status: 'ACTIVE' },
              after: { status: 'SUSPENDED' },
            },
            ipAddress: '192.168.1.100',
            userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
            timestamp: '2024-01-14T16:30:00Z',
            success: true,
          },
        ];
        
        setAuditLogs(mockLogs);
        setFilteredLogs(mockLogs);
      } catch (error) {
        console.error('ê°ì‚¬ ë¡œê·¸ ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:', error);
      } finally {
        setIsLoading(false);
      }
    };

    fetchAuditLogs();
  }, []);

  // í•„í„°ë§ íš¨ê³¼
  useEffect(() => {
    let filtered = auditLogs;

    if (filters.search) {
      filtered = filtered.filter(log =>
        log.adminName.toLowerCase().includes(filters.search.toLowerCase()) ||
        log.action.toLowerCase().includes(filters.search.toLowerCase()) ||
        log.targetName?.toLowerCase().includes(filters.search.toLowerCase())
      );
    }

    if (filters.adminId) {
      filtered = filtered.filter(log => log.adminId === filters.adminId);
    }

    if (filters.action) {
      filtered = filtered.filter(log => log.action.includes(filters.action));
    }

    if (filters.targetType) {
      filtered = filtered.filter(log => log.targetType === filters.targetType);
    }

    if (filters.success !== '') {
      filtered = filtered.filter(log => log.success.toString() === filters.success);
    }

    if (filters.dateRange.start) {
      filtered = filtered.filter(log => 
        new Date(log.timestamp) >= new Date(filters.dateRange.start)
      );
    }

    if (filters.dateRange.end) {
      filtered = filtered.filter(log => 
        new Date(log.timestamp) <= new Date(filters.dateRange.end)
      );
    }

    setFilteredLogs(filtered);
  }, [filters, auditLogs]);

  const handleFilterChange = (key: string, value: string) => {
    if (key.includes('.')) {
      const [parent, child] = key.split('.');
      setFilters(prev => ({
        ...prev,
        [parent]: {
          ...(prev[parent as keyof AuditFilters] as any),
          [child]: value,
        },
      }));
    } else {
      setFilters(prev => ({ ...prev, [key]: value }));
    }
  };

  const getSuccessBadge = (success: boolean) => {
    return success ? (
      <span className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
        <CheckCircleIcon className="w-3 h-3 mr-1" />
        ì„±ê³µ
      </span>
    ) : (
      <span className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
        <XCircleIcon className="w-3 h-3 mr-1" />
        ì‹¤íŒ¨
      </span>
    );
  };

  const getTargetTypeBadge = (targetType: string) => {
    const badges = {
      user: 'bg-blue-100 text-blue-800',
      project: 'bg-purple-100 text-purple-800',
      task: 'bg-orange-100 text-orange-800',
      settings: 'bg-gray-100 text-gray-800',
      system: 'bg-indigo-100 text-indigo-800',
    };
    
    const labels = {
      user: 'ì‚¬ìš©ì',
      project: 'í”„ë¡œì íŠ¸',
      task: 'ì—…ë¬´',
      settings: 'ì„¤ì •',
      system: 'ì‹œìŠ¤í…œ',
    };

    return (
      <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${badges[targetType as keyof typeof badges] || 'bg-gray-100 text-gray-800'}`}>
        {labels[targetType as keyof typeof labels] || targetType}
      </span>
    );
  };

  const formatTimestamp = (timestamp: string) => {
    const date = new Date(timestamp);
    return date.toLocaleString('ko-KR', {
      year: 'numeric',
      month: '2-digit',  
      day: '2-digit',
      hour: '2-digit',
      minute: '2-digit',
    });
  };

  if (isLoading) {
    return (
      <div className="flex items-center justify-center h-64">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"></div>
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* í˜ì´ì§€ í—¤ë” */}
      <div className="border-b border-gray-200 pb-4">
        <h1 className="text-2xl font-bold text-gray-900">ê°ì‚¬ ë¡œê·¸</h1>
        <p className="mt-1 text-sm text-gray-600">
          ê´€ë¦¬ì í™œë™ ê¸°ë¡ì„ í™•ì¸í•˜ê³  ê°ì‚¬í•˜ì„¸ìš”
        </p>
      </div>

      {/* í†µê³„ ì¹´ë“œ */}
      <div className="grid grid-cols-1 md:grid-cols-4 gap-6">
        <div className="bg-white rounded-lg shadow p-6">
          <div className="flex items-center">
            <div className="flex-shrink-0">
              <ClockIcon className="h-8 w-8 text-blue-500" />
            </div>
            <div className="ml-3">
              <p className="text-sm font-medium text-gray-600">ì´ ë¡œê·¸</p>
              <p className="text-2xl font-bold text-gray-900">{auditLogs.length}</p>
            </div>
          </div>
        </div>

        <div className="bg-white rounded-lg shadow p-6">
          <div className="flex items-center">
            <div className="flex-shrink-0">
              <CheckCircleIcon className="h-8 w-8 text-green-500" />
            </div>
            <div className="ml-3">
              <p className="text-sm font-medium text-gray-600">ì„±ê³µ</p>
              <p className="text-2xl font-bold text-gray-900">
                {auditLogs.filter(log => log.success).length}
              </p>
            </div>
          </div>
        </div>

        <div className="bg-white rounded-lg shadow p-6">
          <div className="flex items-center">
            <div className="flex-shrink-0">
              <XCircleIcon className="h-8 w-8 text-red-500" />
            </div>
            <div className="ml-3">
              <p className="text-sm font-medium text-gray-600">ì‹¤íŒ¨</p>
              <p className="text-2xl font-bold text-gray-900">
                {auditLogs.filter(log => !log.success).length}
              </p>
            </div>
          </div>
        </div>

        <div className="bg-white rounded-lg shadow p-6">
          <div className="flex items-center">
            <div className="flex-shrink-0">
              <div className="h-8 w-8 bg-purple-500 rounded-full flex items-center justify-center">
                <span className="text-white font-bold text-sm">
                  {new Set(auditLogs.map(log => log.adminId)).size}
                </span>
              </div>
            </div>
            <div className="ml-3">
              <p className="text-sm font-medium text-gray-600">í™œì„± ê´€ë¦¬ì</p>
              <p className="text-2xl font-bold text-gray-900">
                {new Set(auditLogs.map(log => log.adminId)).size}
              </p>
            </div>
          </div>
        </div>
      </div>

      {/* í•„í„° ì˜ì—­ */}
      <div className="bg-white rounded-lg shadow p-6">
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          {/* ê²€ìƒ‰ */}
          <div className="lg:col-span-1">
            <label className="block text-sm font-medium text-gray-700 mb-1">
              ê²€ìƒ‰
            </label>
            <div className="relative">
              <MagnifyingGlassIcon className="absolute left-3 top-3 h-4 w-4 text-gray-400" />
              <input
                type="text"
                placeholder="ê´€ë¦¬ìëª…, ì•¡ì…˜, ëŒ€ìƒ ê²€ìƒ‰"
                value={filters.search}
                onChange={(e) => handleFilterChange('search', e.target.value)}
                className="pl-10 w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
              />
            </div>
          </div>

          {/* ëŒ€ìƒ ìœ í˜• í•„í„° */}
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">
              ëŒ€ìƒ ìœ í˜•
            </label>
            <select
              value={filters.targetType}
              onChange={(e) => handleFilterChange('targetType', e.target.value)}
              className="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
            >
              <option value="">ì „ì²´</option>
              <option value="user">ì‚¬ìš©ì</option>
              <option value="project">í”„ë¡œì íŠ¸</option>
              <option value="task">ì—…ë¬´</option>
              <option value="settings">ì„¤ì •</option>
              <option value="system">ì‹œìŠ¤í…œ</option>
            </select>
          </div>

          {/* ì„±ê³µ/ì‹¤íŒ¨ í•„í„° */}
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">
              ê²°ê³¼
            </label>
            <select
              value={filters.success}
              onChange={(e) => handleFilterChange('success', e.target.value)}
              className="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
            >
              <option value="">ì „ì²´</option>
              <option value="true">ì„±ê³µ</option>
              <option value="false">ì‹¤íŒ¨</option>
            </select>
          </div>

          {/* ì‹œì‘ ë‚ ì§œ */}
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">
              ì‹œì‘ ë‚ ì§œ
            </label>
            <input
              type="date"
              value={filters.dateRange.start}
              onChange={(e) => handleFilterChange('dateRange.start', e.target.value)}
              className="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
            />
          </div>

          {/* ì¢…ë£Œ ë‚ ì§œ */}
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">
              ì¢…ë£Œ ë‚ ì§œ
            </label>
            <input
              type="date"
              value={filters.dateRange.end}
              onChange={(e) => handleFilterChange('dateRange.end', e.target.value)}
              className="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
            />
          </div>
        </div>
      </div>

      {/* ê°ì‚¬ ë¡œê·¸ ëª©ë¡ */}
      <div className="bg-white rounded-lg shadow overflow-hidden">
        <div className="px-6 py-4 border-b border-gray-200">
          <div className="flex items-center justify-between">
            <h2 className="text-lg font-semibold text-gray-900">
              ê°ì‚¬ ë¡œê·¸ ({filteredLogs.length}ê°œ)
            </h2>
          </div>
        </div>

        <div className="overflow-x-auto">
          <table className="min-w-full divide-y divide-gray-200">
            <thead className="bg-gray-50">
              <tr>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                  ì‹œê°„
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                  ê´€ë¦¬ì
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                  ì•¡ì…˜
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                  ëŒ€ìƒ
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                  ê²°ê³¼
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                  IP ì£¼ì†Œ
                </th>
              </tr>
            </thead>
            <tbody className="bg-white divide-y divide-gray-200">
              {filteredLogs.map((log) => (
                <tr key={log.id} className="hover:bg-gray-50">
                  <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                    {formatTimestamp(log.timestamp)}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <div className="text-sm font-medium text-gray-900">{log.adminName}</div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <div className="text-sm text-gray-900">{log.action}</div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <div className="space-y-1">
                      {getTargetTypeBadge(log.targetType)}
                      {log.targetName && (
                        <div className="text-xs text-gray-500">{log.targetName}</div>
                      )}
                    </div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <div className="space-y-1">
                      {getSuccessBadge(log.success)}
                      {log.errorMessage && (
                        <div className="text-xs text-red-600">{log.errorMessage}</div>
                      )}
                    </div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                    {log.ipAddress}
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>

        {filteredLogs.length === 0 && (
          <div className="text-center py-12">
            <ClockIcon className="mx-auto h-12 w-12 text-gray-400" />
            <h3 className="mt-2 text-sm font-medium text-gray-900">ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
            <p className="mt-1 text-sm text-gray-500">í•„í„° ì¡°ê±´ì„ ë³€ê²½í•´ë³´ì„¸ìš”.</p>
          </div>
        )}
      </div>
    </div>
  );
}
</file>

<file path="frontend/src/app/admin/projects/page.tsx">
'use client';

import { useState, useEffect } from 'react';
import { 
  MagnifyingGlassIcon,
  FolderIcon,
  UsersIcon,
  ClipboardDocumentListIcon,
  TrashIcon,
  EyeIcon,
} from '@heroicons/react/24/outline';

interface Project {
  id: string;
  name: string;
  description?: string;
  status: string;
  progress: number;
  memberCount: number;
  taskCount: number;
  completedTaskCount: number;
  createdAt: string;
  updatedAt: string;
  ownerId: string;
  ownerName: string;
}

interface ProjectFilters {
  search: string;
  status: string;
}

export default function ProjectsManagement() {
  const [projects, setProjects] = useState<Project[]>([]);
  const [filteredProjects, setFilteredProjects] = useState<Project[]>([]);
  const [isLoading, setIsLoading] = useState(true);
  const [filters, setFilters] = useState<ProjectFilters>({
    search: '',
    status: '',
  });

  // ì„ì‹œ ë°ì´í„°
  useEffect(() => {
    const fetchProjects = async () => {
      try {
        // ì‹¤ì œë¡œëŠ” API í˜¸ì¶œ
        // const response = await fetch('/api/admin/projects');
        // const data = await response.json();
        
        // ì„ì‹œ ë°ì´í„°
        const mockProjects: Project[] = [
          {
            id: '1',
            name: 'ì›Œí´ë¦¬ ì›¹ í”Œë«í¼ ê°œë°œ',
            description: 'CPER ì›Œí¬í”Œë¡œìš° ê¸°ë°˜ ì—…ë¬´ ê´€ë¦¬ í”Œë«í¼',
            status: 'IN_PROGRESS',
            progress: 75,
            memberCount: 5,
            taskCount: 32,
            completedTaskCount: 24,
            createdAt: '2024-01-01T00:00:00Z',
            updatedAt: '2024-01-15T10:30:00Z',
            ownerId: '1',
            ownerName: 'ê¹€í”„ë¡œì íŠ¸',
          },
          {
            id: '2',
            name: 'ëª¨ë°”ì¼ ì•± ë¦¬ë‰´ì–¼',
            description: 'ì‚¬ìš©ì ê²½í—˜ ê°œì„ ì„ ìœ„í•œ UI/UX ë¦¬ë‰´ì–¼',
            status: 'COMPLETED',
            progress: 100,
            memberCount: 3,
            taskCount: 18,
            completedTaskCount: 18,
            createdAt: '2023-12-01T00:00:00Z',
            updatedAt: '2024-01-10T15:22:00Z',
            ownerId: '2',
            ownerName: 'ì´ë””ìì¸',
          },
          {
            id: '3',
            name: 'ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜',
            description: 'ë ˆê±°ì‹œ ì‹œìŠ¤í…œì—ì„œ ìƒˆ í”Œë«í¼ìœ¼ë¡œ ë°ì´í„° ì´ì „',
            status: 'PLANNING',
            progress: 25,
            memberCount: 2,
            taskCount: 8,
            completedTaskCount: 2,
            createdAt: '2024-01-10T00:00:00Z',
            updatedAt: '2024-01-14T09:15:00Z',
            ownerId: '3',
            ownerName: 'ë°•ë°ì´í„°',
          },
          {
            id: '4',
            name: 'ë³´ì•ˆ ê°•í™” í”„ë¡œì íŠ¸',
            description: 'ì‹œìŠ¤í…œ ë³´ì•ˆ ì·¨ì•½ì  ì ê²€ ë° ê°œì„ ',
            status: 'ON_HOLD',
            progress: 10,
            memberCount: 4,
            taskCount: 15,
            completedTaskCount: 1,
            createdAt: '2023-12-15T00:00:00Z',
            updatedAt: '2024-01-05T12:00:00Z',
            ownerId: '4',
            ownerName: 'ìµœë³´ì•ˆ',
          },
        ];
        
        setProjects(mockProjects);
        setFilteredProjects(mockProjects);
      } catch (error) {
        console.error('í”„ë¡œì íŠ¸ ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:', error);
      } finally {
        setIsLoading(false);
      }
    };

    fetchProjects();
  }, []);

  // í•„í„°ë§ íš¨ê³¼
  useEffect(() => {
    let filtered = projects;

    if (filters.search) {
      filtered = filtered.filter(project =>
        project.name.toLowerCase().includes(filters.search.toLowerCase()) ||
        project.description?.toLowerCase().includes(filters.search.toLowerCase()) ||
        project.ownerName.toLowerCase().includes(filters.search.toLowerCase())
      );
    }

    if (filters.status) {
      filtered = filtered.filter(project => project.status === filters.status);
    }

    setFilteredProjects(filtered);
  }, [filters, projects]);

  const handleFilterChange = (key: keyof ProjectFilters, value: string) => {
    setFilters(prev => ({ ...prev, [key]: value }));
  };

  const getStatusBadge = (status: string) => {
    const badges = {
      PLANNING: 'bg-blue-100 text-blue-800',
      IN_PROGRESS: 'bg-yellow-100 text-yellow-800',
      COMPLETED: 'bg-green-100 text-green-800',
      ON_HOLD: 'bg-gray-100 text-gray-800',
      CANCELLED: 'bg-red-100 text-red-800',
    };
    
    const labels = {
      PLANNING: 'ê³„íšì¤‘',
      IN_PROGRESS: 'ì§„í–‰ì¤‘',
      COMPLETED: 'ì™„ë£Œ',
      ON_HOLD: 'ë³´ë¥˜',
      CANCELLED: 'ì·¨ì†Œ',
    };

    return (
      <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${badges[status as keyof typeof badges] || 'bg-gray-100 text-gray-800'}`}>
        {labels[status as keyof typeof labels] || status}
      </span>
    );
  };

  const getProgressBar = (progress: number) => {
    const colorClass = progress === 100 ? 'bg-green-500' : progress >= 75 ? 'bg-blue-500' : progress >= 50 ? 'bg-yellow-500' : 'bg-gray-500';
    
    return (
      <div className="w-full bg-gray-200 rounded-full h-2">
        <div
          className={`h-2 rounded-full ${colorClass}`}
          style={{ width: `${progress}%` }}
        />
      </div>
    );
  };

  if (isLoading) {
    return (
      <div className="flex items-center justify-center h-64">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"></div>
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* í˜ì´ì§€ í—¤ë” */}
      <div className="border-b border-gray-200 pb-4">
        <h1 className="text-2xl font-bold text-gray-900">í”„ë¡œì íŠ¸ ê´€ë¦¬</h1>
        <p className="mt-1 text-sm text-gray-600">
          ì „ì²´ í”„ë¡œì íŠ¸ ëª©ë¡ì„ í™•ì¸í•˜ê³  ê´€ë¦¬í•˜ì„¸ìš”
        </p>
      </div>

      {/* í†µê³„ ì¹´ë“œ */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        <div className="bg-white rounded-lg shadow p-6">
          <div className="flex items-center">
            <div className="flex-shrink-0">
              <FolderIcon className="h-8 w-8 text-blue-500" />
            </div>
            <div className="ml-3">
              <p className="text-sm font-medium text-gray-600">ì „ì²´ í”„ë¡œì íŠ¸</p>
              <p className="text-2xl font-bold text-gray-900">{projects.length}</p>
            </div>
          </div>
        </div>

        <div className="bg-white rounded-lg shadow p-6">
          <div className="flex items-center">
            <div className="flex-shrink-0">
              <div className="h-8 w-8 bg-yellow-500 rounded-full flex items-center justify-center">
                <span className="text-white font-bold text-sm">
                  {projects.filter(p => p.status === 'IN_PROGRESS').length}
                </span>
              </div>
            </div>
            <div className="ml-3">
              <p className="text-sm font-medium text-gray-600">ì§„í–‰ì¤‘</p>
              <p className="text-2xl font-bold text-gray-900">
                {projects.filter(p => p.status === 'IN_PROGRESS').length}
              </p>
            </div>
          </div>
        </div>

        <div className="bg-white rounded-lg shadow p-6">
          <div className="flex items-center">
            <div className="flex-shrink-0">
              <div className="h-8 w-8 bg-green-500 rounded-full flex items-center justify-center">
                <span className="text-white font-bold text-sm">
                  {projects.filter(p => p.status === 'COMPLETED').length}
                </span>
              </div>
            </div>
            <div className="ml-3">
              <p className="text-sm font-medium text-gray-600">ì™„ë£Œ</p>
              <p className="text-2xl font-bold text-gray-900">
                {projects.filter(p => p.status === 'COMPLETED').length}
              </p>
            </div>
          </div>
        </div>

        <div className="bg-white rounded-lg shadow p-6">
          <div className="flex items-center">
            <div className="flex-shrink-0">
              <UsersIcon className="h-8 w-8 text-purple-500" />
            </div>
            <div className="ml-3">
              <p className="text-sm font-medium text-gray-600">í‰ê·  íŒ€ì› ìˆ˜</p>
              <p className="text-2xl font-bold text-gray-900">
                {projects.length > 0 ? Math.round(projects.reduce((sum, p) => sum + p.memberCount, 0) / projects.length) : 0}
              </p>
            </div>
          </div>
        </div>
      </div>

      {/* í•„í„° ì˜ì—­ */}
      <div className="bg-white rounded-lg shadow p-6">
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          {/* ê²€ìƒ‰ */}
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">
              ê²€ìƒ‰
            </label>
            <div className="relative">
              <MagnifyingGlassIcon className="absolute left-3 top-3 h-4 w-4 text-gray-400" />
              <input
                type="text"
                placeholder="í”„ë¡œì íŠ¸ëª…, ì„¤ëª…, ì†Œìœ ì ê²€ìƒ‰"
                value={filters.search}
                onChange={(e) => handleFilterChange('search', e.target.value)}
                className="pl-10 w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
              />
            </div>
          </div>

          {/* ìƒíƒœ í•„í„° */}
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">
              ìƒíƒœ
            </label>
            <select
              value={filters.status}
              onChange={(e) => handleFilterChange('status', e.target.value)}
              className="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
            >
              <option value="">ì „ì²´</option>
              <option value="PLANNING">ê³„íšì¤‘</option>
              <option value="IN_PROGRESS">ì§„í–‰ì¤‘</option>
              <option value="COMPLETED">ì™„ë£Œ</option>
              <option value="ON_HOLD">ë³´ë¥˜</option>
              <option value="CANCELLED">ì·¨ì†Œ</option>
            </select>
          </div>
        </div>
      </div>

      {/* í”„ë¡œì íŠ¸ ëª©ë¡ */}
      <div className="bg-white rounded-lg shadow overflow-hidden">
        <div className="px-6 py-4 border-b border-gray-200">
          <div className="flex items-center justify-between">
            <h2 className="text-lg font-semibold text-gray-900">
              í”„ë¡œì íŠ¸ ëª©ë¡ ({filteredProjects.length}ê°œ)
            </h2>
          </div>
        </div>

        <div className="overflow-x-auto">
          <table className="min-w-full divide-y divide-gray-200">
            <thead className="bg-gray-50">
              <tr>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                  í”„ë¡œì íŠ¸
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                  ì†Œìœ ì
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                  ìƒíƒœ
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                  ì§„í–‰ë¥ 
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                  íŒ€/ì—…ë¬´
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                  ìƒì„±ì¼
                </th>
                <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                  ì‘ì—…
                </th>
              </tr>
            </thead>
            <tbody className="bg-white divide-y divide-gray-200">
              {filteredProjects.map((project) => (
                <tr key={project.id} className="hover:bg-gray-50">
                  <td className="px-6 py-4">
                    <div>
                      <div className="text-sm font-medium text-gray-900">{project.name}</div>
                      {project.description && (
                        <div className="text-sm text-gray-500 truncate max-w-xs">
                          {project.description}
                        </div>
                      )}
                    </div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <div className="text-sm text-gray-900">{project.ownerName}</div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    {getStatusBadge(project.status)}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <div className="flex items-center">
                      <div className="w-16 mr-2">
                        {getProgressBar(project.progress)}
                      </div>
                      <span className="text-sm text-gray-900">{project.progress}%</span>
                    </div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <div className="flex items-center space-x-4 text-sm text-gray-900">
                      <div className="flex items-center">
                        <UsersIcon className="h-4 w-4 text-gray-400 mr-1" />
                        {project.memberCount}
                      </div>
                      <div className="flex items-center">
                        <ClipboardDocumentListIcon className="h-4 w-4 text-gray-400 mr-1" />
                        {project.completedTaskCount}/{project.taskCount}
                      </div>
                    </div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                    {new Date(project.createdAt).toLocaleDateString('ko-KR')}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                    <div className="flex items-center justify-end space-x-2">
                      <button className="text-indigo-600 hover:text-indigo-900">
                        <EyeIcon className="h-4 w-4" />
                      </button>
                      <button className="text-red-600 hover:text-red-900">
                        <TrashIcon className="h-4 w-4" />
                      </button>
                    </div>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>

        {filteredProjects.length === 0 && (
          <div className="text-center py-12">
            <FolderIcon className="mx-auto h-12 w-12 text-gray-400" />
            <h3 className="mt-2 text-sm font-medium text-gray-900">í”„ë¡œì íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
            <p className="mt-1 text-sm text-gray-500">í•„í„° ì¡°ê±´ì„ ë³€ê²½í•´ë³´ì„¸ìš”.</p>
          </div>
        )}
      </div>
    </div>
  );
}
</file>

<file path="frontend/src/app/admin/settings/page.tsx">
'use client';

import { useState, useEffect } from 'react';
import { 
  Cog6ToothIcon,
  BellIcon,
  ShieldCheckIcon,
  GlobeAltIcon,
  CloudIcon,
  ExclamationTriangleIcon,
} from '@heroicons/react/24/outline';

interface SystemSettings {
  app: {
    maintenanceMode: boolean;
    newUserRegistration: boolean;
    projectCreation: boolean;
    fileUpload: boolean;
    maxFileSize: number;
    maxProjectMembers: number;
    taskDeadlineWarningDays: number;
  };
  notifications: {
    emailEnabled: boolean;
    pushEnabled: boolean;
    dailyDigestEnabled: boolean;
    weeklyReportEnabled: boolean;
  };
  security: {
    passwordMinLength: number;
    passwordRequireSpecialChar: boolean;
    sessionTimeoutMinutes: number;
    maxLoginAttempts: number;
    twoFactorRequired: boolean;
  };
  features: {
    realTimeChat: boolean;
    fileSharing: boolean;
    integrations: boolean;
    analytics: boolean;
    apiAccess: boolean;
  };
}

export default function SystemSettings() {
  const [settings, setSettings] = useState<SystemSettings | null>(null);
  const [isLoading, setIsLoading] = useState(true);
  const [isSaving, setIsSaving] = useState(false);
  const [activeTab, setActiveTab] = useState('app');

  // ì„ì‹œ ë°ì´í„°
  useEffect(() => {
    const fetchSettings = async () => {
      try {
        // ì‹¤ì œë¡œëŠ” API í˜¸ì¶œ
        // const response = await fetch('/api/admin/settings');
        // const data = await response.json();
        
        // ì„ì‹œ ë°ì´í„°
        const mockSettings: SystemSettings = {
          app: {
            maintenanceMode: false,
            newUserRegistration: true,
            projectCreation: true,
            fileUpload: true,
            maxFileSize: 10,
            maxProjectMembers: 50,
            taskDeadlineWarningDays: 3,
          },
          notifications: {
            emailEnabled: true,
            pushEnabled: true,
            dailyDigestEnabled: true,
            weeklyReportEnabled: true,
          },
          security: {
            passwordMinLength: 8,
            passwordRequireSpecialChar: true,
            sessionTimeoutMinutes: 120,
            maxLoginAttempts: 5,
            twoFactorRequired: false,
          },
          features: {
            realTimeChat: true,
            fileSharing: true,
            integrations: false,
            analytics: true,
            apiAccess: false,
          },
        };
        
        setSettings(mockSettings);
      } catch (error) {
        console.error('ì„¤ì • ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:', error);
      } finally {
        setIsLoading(false);
      }
    };

    fetchSettings();
  }, []);

  const handleSaveSettings = async () => {
    if (!settings) return;

    setIsSaving(true);
    try {
      // ì‹¤ì œë¡œëŠ” API í˜¸ì¶œ
      // const response = await fetch('/api/admin/settings', {
      //   method: 'PUT',
      //   headers: { 'Content-Type': 'application/json' },
      //   body: JSON.stringify(settings),
      // });
      
      // ì„ì‹œë¡œ 2ì´ˆë§Œ ê¸°ë‹¤ë¦¬ê¸°
      await new Promise(resolve => setTimeout(resolve, 2000));
      
      alert('ì„¤ì •ì´ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
    } catch (error) {
      console.error('ì„¤ì • ì €ì¥ ì˜¤ë¥˜:', error);
      alert('ì„¤ì • ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    } finally {
      setIsSaving(false);
    }
  };

  const updateSetting = (section: keyof SystemSettings, key: string, value: any) => {
    if (!settings) return;
    
    setSettings(prev => ({
      ...prev!,
      [section]: {
        ...prev![section],
        [key]: value,
      },
    }));
  };

  const tabs = [
    { id: 'app', name: 'ì• í”Œë¦¬ì¼€ì´ì…˜', icon: Cog6ToothIcon },
    { id: 'notifications', name: 'ì•Œë¦¼', icon: BellIcon },
    { id: 'security', name: 'ë³´ì•ˆ', icon: ShieldCheckIcon },
    { id: 'features', name: 'ê¸°ëŠ¥', icon: GlobeAltIcon },
  ];

  if (isLoading) {
    return (
      <div className="flex items-center justify-center h-64">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"></div>
      </div>
    );
  }

  if (!settings) {
    return (
      <div className="text-center py-12">
        <ExclamationTriangleIcon className="mx-auto h-12 w-12 text-red-400" />
        <h3 className="mt-2 text-sm font-medium text-gray-900">ì„¤ì •ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</h3>
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* í˜ì´ì§€ í—¤ë” */}
      <div className="border-b border-gray-200 pb-4">
        <h1 className="text-2xl font-bold text-gray-900">ì‹œìŠ¤í…œ ì„¤ì •</h1>
        <p className="mt-1 text-sm text-gray-600">
          ì›Œí´ë¦¬ ì‹œìŠ¤í…œì˜ ì „ë°˜ì ì¸ ì„¤ì •ì„ ê´€ë¦¬í•˜ì„¸ìš”
        </p>
      </div>

      <div className="flex">
        {/* ì‚¬ì´ë“œë°” íƒ­ */}
        <div className="w-64 bg-white rounded-lg shadow p-4 h-fit">
          <nav className="space-y-2">
            {tabs.map((tab) => {
              const Icon = tab.icon;
              return (
                <button
                  key={tab.id}
                  onClick={() => setActiveTab(tab.id)}
                  className={`w-full flex items-center px-3 py-2 text-sm font-medium rounded-md ${
                    activeTab === tab.id
                      ? 'bg-indigo-100 text-indigo-700'
                      : 'text-gray-700 hover:bg-gray-100'
                  }`}
                >
                  <Icon className="mr-3 h-5 w-5" />
                  {tab.name}
                </button>
              );
            })}
          </nav>
        </div>

        {/* ë©”ì¸ ì½˜í…ì¸  */}
        <div className="flex-1 ml-6">
          <div className="bg-white rounded-lg shadow">
            {/* ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì • */}
            {activeTab === 'app' && (
              <div className="p-6">
                <h2 className="text-lg font-semibold text-gray-900 mb-6">ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •</h2>
                
                {/* ìœ ì§€ë³´ìˆ˜ ëª¨ë“œ */}
                <div className="mb-6 p-4 border border-yellow-200 bg-yellow-50 rounded-lg">
                  <div className="flex items-center justify-between">
                    <div>
                      <h3 className="text-sm font-medium text-yellow-800">ìœ ì§€ë³´ìˆ˜ ëª¨ë“œ</h3>
                      <p className="text-sm text-yellow-700">ì‹œìŠ¤í…œì„ ì¼ì‹œì ìœ¼ë¡œ ì‚¬ìš© ì¤‘ë‹¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
                    </div>
                    <label className="relative inline-flex items-center cursor-pointer">
                      <input
                        type="checkbox"
                        checked={settings.app.maintenanceMode}
                        onChange={(e) => updateSetting('app', 'maintenanceMode', e.target.checked)}
                        className="sr-only peer"
                      />
                      <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-yellow-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-600"></div>
                    </label>
                  </div>
                </div>

                <div className="space-y-6">
                  {/* ì‚¬ìš©ì ë“±ë¡ */}
                  <div className="flex items-center justify-between">
                    <div>
                      <h3 className="text-sm font-medium text-gray-900">ì‹ ê·œ ì‚¬ìš©ì ë“±ë¡ í—ˆìš©</h3>
                      <p className="text-sm text-gray-500">ìƒˆë¡œìš´ ì‚¬ìš©ìì˜ íšŒì›ê°€ì…ì„ í—ˆìš©í•©ë‹ˆë‹¤</p>
                    </div>
                    <label className="relative inline-flex items-center cursor-pointer">
                      <input
                        type="checkbox"
                        checked={settings.app.newUserRegistration}
                        onChange={(e) => updateSetting('app', 'newUserRegistration', e.target.checked)}
                        className="sr-only peer"
                      />
                      <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                    </label>
                  </div>

                  {/* í”„ë¡œì íŠ¸ ìƒì„± */}
                  <div className="flex items-center justify-between">
                    <div>
                      <h3 className="text-sm font-medium text-gray-900">í”„ë¡œì íŠ¸ ìƒì„± í—ˆìš©</h3>
                      <p className="text-sm text-gray-500">ì‚¬ìš©ìì˜ ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±ì„ í—ˆìš©í•©ë‹ˆë‹¤</p>
                    </div>
                    <label className="relative inline-flex items-center cursor-pointer">
                      <input
                        type="checkbox"
                        checked={settings.app.projectCreation}
                        onChange={(e) => updateSetting('app', 'projectCreation', e.target.checked)}
                        className="sr-only peer"
                      />
                      <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                    </label>
                  </div>

                  {/* íŒŒì¼ ì—…ë¡œë“œ */}
                  <div className="flex items-center justify-between">
                    <div>
                      <h3 className="text-sm font-medium text-gray-900">íŒŒì¼ ì—…ë¡œë“œ í—ˆìš©</h3>
                      <p className="text-sm text-gray-500">ì‚¬ìš©ìì˜ íŒŒì¼ ì—…ë¡œë“œë¥¼ í—ˆìš©í•©ë‹ˆë‹¤</p>
                    </div>
                    <label className="relative inline-flex items-center cursor-pointer">
                      <input
                        type="checkbox"
                        checked={settings.app.fileUpload}
                        onChange={(e) => updateSetting('app', 'fileUpload', e.target.checked)}
                        className="sr-only peer"
                      />
                      <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                    </label>
                  </div>

                  {/* ìµœëŒ€ íŒŒì¼ í¬ê¸° */}
                  <div>
                    <label className="block text-sm font-medium text-gray-900 mb-1">
                      ìµœëŒ€ íŒŒì¼ í¬ê¸° (MB)
                    </label>
                    <input
                      type="number"
                      min="1"
                      max="100"
                      value={settings.app.maxFileSize}
                      onChange={(e) => updateSetting('app', 'maxFileSize', parseInt(e.target.value))}
                      className="w-32 border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                    />
                  </div>

                  {/* ìµœëŒ€ í”„ë¡œì íŠ¸ ë©¤ë²„ ìˆ˜ */}
                  <div>
                    <label className="block text-sm font-medium text-gray-900 mb-1">
                      í”„ë¡œì íŠ¸ë‹¹ ìµœëŒ€ ë©¤ë²„ ìˆ˜
                    </label>
                    <input
                      type="number"
                      min="1"
                      max="1000"
                      value={settings.app.maxProjectMembers}
                      onChange={(e) => updateSetting('app', 'maxProjectMembers', parseInt(e.target.value))}
                      className="w-32 border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                    />
                  </div>

                  {/* ì—…ë¬´ ë§ˆê°ì¼ ê²½ê³  */}
                  <div>
                    <label className="block text-sm font-medium text-gray-900 mb-1">
                      ì—…ë¬´ ë§ˆê°ì¼ ê²½ê³  (ì¼ ì „)
                    </label>
                    <input
                      type="number"
                      min="1"
                      max="30"
                      value={settings.app.taskDeadlineWarningDays}
                      onChange={(e) => updateSetting('app', 'taskDeadlineWarningDays', parseInt(e.target.value))}
                      className="w-32 border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                    />
                  </div>
                </div>
              </div>
            )}

            {/* ì•Œë¦¼ ì„¤ì • */}
            {activeTab === 'notifications' && (
              <div className="p-6">
                <h2 className="text-lg font-semibold text-gray-900 mb-6">ì•Œë¦¼ ì„¤ì •</h2>
                
                <div className="space-y-6">
                  <div className="flex items-center justify-between">
                    <div>
                      <h3 className="text-sm font-medium text-gray-900">ì´ë©”ì¼ ì•Œë¦¼</h3>
                      <p className="text-sm text-gray-500">ì´ë©”ì¼ì„ í†µí•œ ì•Œë¦¼ì„ í™œì„±í™”í•©ë‹ˆë‹¤</p>
                    </div>
                    <label className="relative inline-flex items-center cursor-pointer">
                      <input
                        type="checkbox"
                        checked={settings.notifications.emailEnabled}
                        onChange={(e) => updateSetting('notifications', 'emailEnabled', e.target.checked)}
                        className="sr-only peer"
                      />
                      <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                    </label>
                  </div>

                  <div className="flex items-center justify-between">
                    <div>
                      <h3 className="text-sm font-medium text-gray-900">í‘¸ì‹œ ì•Œë¦¼</h3>
                      <p className="text-sm text-gray-500">ë¸Œë¼ìš°ì € í‘¸ì‹œ ì•Œë¦¼ì„ í™œì„±í™”í•©ë‹ˆë‹¤</p>
                    </div>
                    <label className="relative inline-flex items-center cursor-pointer">
                      <input
                        type="checkbox"
                        checked={settings.notifications.pushEnabled}
                        onChange={(e) => updateSetting('notifications', 'pushEnabled', e.target.checked)}
                        className="sr-only peer"
                      />
                      <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                    </label>
                  </div>

                  <div className="flex items-center justify-between">
                    <div>
                      <h3 className="text-sm font-medium text-gray-900">ì¼ì¼ ìš”ì•½</h3>
                      <p className="text-sm text-gray-500">ë§¤ì¼ í™œë™ ìš”ì•½ì„ ë°œì†¡í•©ë‹ˆë‹¤</p>
                    </div>
                    <label className="relative inline-flex items-center cursor-pointer">
                      <input
                        type="checkbox"
                        checked={settings.notifications.dailyDigestEnabled}
                        onChange={(e) => updateSetting('notifications', 'dailyDigestEnabled', e.target.checked)}
                        className="sr-only peer"
                      />
                      <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                    </label>
                  </div>

                  <div className="flex items-center justify-between">
                    <div>
                      <h3 className="text-sm font-medium text-gray-900">ì£¼ê°„ ë¦¬í¬íŠ¸</h3>
                      <p className="text-sm text-gray-500">ë§¤ì£¼ ì„±ê³¼ ë¦¬í¬íŠ¸ë¥¼ ë°œì†¡í•©ë‹ˆë‹¤</p>
                    </div>
                    <label className="relative inline-flex items-center cursor-pointer">
                      <input
                        type="checkbox"
                        checked={settings.notifications.weeklyReportEnabled}
                        onChange={(e) => updateSetting('notifications', 'weeklyReportEnabled', e.target.checked)}
                        className="sr-only peer"
                      />
                      <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                    </label>
                  </div>
                </div>
              </div>
            )}

            {/* ë³´ì•ˆ ì„¤ì • */}
            {activeTab === 'security' && (
              <div className="p-6">
                <h2 className="text-lg font-semibold text-gray-900 mb-6">ë³´ì•ˆ ì„¤ì •</h2>
                
                <div className="space-y-6">
                  <div>
                    <label className="block text-sm font-medium text-gray-900 mb-1">
                      ìµœì†Œ ë¹„ë°€ë²ˆí˜¸ ê¸¸ì´
                    </label>
                    <input
                      type="number"
                      min="6"
                      max="32"
                      value={settings.security.passwordMinLength}
                      onChange={(e) => updateSetting('security', 'passwordMinLength', parseInt(e.target.value))}
                      className="w-32 border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                    />
                  </div>

                  <div className="flex items-center justify-between">
                    <div>
                      <h3 className="text-sm font-medium text-gray-900">íŠ¹ìˆ˜ë¬¸ì í¬í•¨ í•„ìˆ˜</h3>
                      <p className="text-sm text-gray-500">ë¹„ë°€ë²ˆí˜¸ì— íŠ¹ìˆ˜ë¬¸ìë¥¼ í¬í•¨í•˜ë„ë¡ ê°•ì œí•©ë‹ˆë‹¤</p>
                    </div>
                    <label className="relative inline-flex items-center cursor-pointer">
                      <input
                        type="checkbox"
                        checked={settings.security.passwordRequireSpecialChar}
                        onChange={(e) => updateSetting('security', 'passwordRequireSpecialChar', e.target.checked)}
                        className="sr-only peer"
                      />
                      <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                    </label>
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-900 mb-1">
                      ì„¸ì…˜ íƒ€ì„ì•„ì›ƒ (ë¶„)
                    </label>
                    <input
                      type="number"
                      min="15"
                      max="480"
                      value={settings.security.sessionTimeoutMinutes}
                      onChange={(e) => updateSetting('security', 'sessionTimeoutMinutes', parseInt(e.target.value))}
                      className="w-32 border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                    />
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-900 mb-1">
                      ìµœëŒ€ ë¡œê·¸ì¸ ì‹œë„ íšŸìˆ˜
                    </label>
                    <input
                      type="number"
                      min="3"
                      max="10"
                      value={settings.security.maxLoginAttempts}
                      onChange={(e) => updateSetting('security', 'maxLoginAttempts', parseInt(e.target.value))}
                      className="w-32 border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                    />
                  </div>

                  <div className="flex items-center justify-between">
                    <div>
                      <h3 className="text-sm font-medium text-gray-900">2ë‹¨ê³„ ì¸ì¦ í•„ìˆ˜</h3>
                      <p className="text-sm text-gray-500">ëª¨ë“  ì‚¬ìš©ìì—ê²Œ 2ë‹¨ê³„ ì¸ì¦ì„ ê°•ì œí•©ë‹ˆë‹¤</p>
                    </div>
                    <label className="relative inline-flex items-center cursor-pointer">
                      <input
                        type="checkbox"
                        checked={settings.security.twoFactorRequired}
                        onChange={(e) => updateSetting('security', 'twoFactorRequired', e.target.checked)}
                        className="sr-only peer"
                      />
                      <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                    </label>
                  </div>
                </div>
              </div>
            )}

            {/* ê¸°ëŠ¥ ì„¤ì • */}
            {activeTab === 'features' && (
              <div className="p-6">
                <h2 className="text-lg font-semibold text-gray-900 mb-6">ê¸°ëŠ¥ ì„¤ì •</h2>
                
                <div className="space-y-6">
                  <div className="flex items-center justify-between">
                    <div>
                      <h3 className="text-sm font-medium text-gray-900">ì‹¤ì‹œê°„ ì±„íŒ…</h3>
                      <p className="text-sm text-gray-500">í”„ë¡œì íŠ¸ ë‚´ ì‹¤ì‹œê°„ ì±„íŒ… ê¸°ëŠ¥ì„ í™œì„±í™”í•©ë‹ˆë‹¤</p>
                    </div>
                    <label className="relative inline-flex items-center cursor-pointer">
                      <input
                        type="checkbox"
                        checked={settings.features.realTimeChat}
                        onChange={(e) => updateSetting('features', 'realTimeChat', e.target.checked)}
                        className="sr-only peer"
                      />
                      <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                    </label>
                  </div>

                  <div className="flex items-center justify-between">
                    <div>
                      <h3 className="text-sm font-medium text-gray-900">íŒŒì¼ ê³µìœ </h3>
                      <p className="text-sm text-gray-500">í”„ë¡œì íŠ¸ ë‚´ íŒŒì¼ ê³µìœ  ê¸°ëŠ¥ì„ í™œì„±í™”í•©ë‹ˆë‹¤</p>
                    </div>
                    <label className="relative inline-flex items-center cursor-pointer">
                      <input
                        type="checkbox"
                        checked={settings.features.fileSharing}
                        onChange={(e) => updateSetting('features', 'fileSharing', e.target.checked)}
                        className="sr-only peer"
                      />
                      <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                    </label>
                  </div>

                  <div className="flex items-center justify-between">
                    <div>
                      <h3 className="text-sm font-medium text-gray-900">ì™¸ë¶€ í†µí•©</h3>
                      <p className="text-sm text-gray-500">Slack, Notion ë“± ì™¸ë¶€ ì„œë¹„ìŠ¤ í†µí•©ì„ í™œì„±í™”í•©ë‹ˆë‹¤</p>
                    </div>
                    <label className="relative inline-flex items-center cursor-pointer">
                      <input
                        type="checkbox"
                        checked={settings.features.integrations}
                        onChange={(e) => updateSetting('features', 'integrations', e.target.checked)}
                        className="sr-only peer"
                      />
                      <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                    </label>
                  </div>

                  <div className="flex items-center justify-between">
                    <div>
                      <h3 className="text-sm font-medium text-gray-900">ë¶„ì„ ê¸°ëŠ¥</h3>
                      <p className="text-sm text-gray-500">ì‚¬ìš©ì í™œë™ ë¶„ì„ ë° í†µê³„ ê¸°ëŠ¥ì„ í™œì„±í™”í•©ë‹ˆë‹¤</p>
                    </div>
                    <label className="relative inline-flex items-center cursor-pointer">
                      <input
                        type="checkbox"
                        checked={settings.features.analytics}
                        onChange={(e) => updateSetting('features', 'analytics', e.target.checked)}
                        className="sr-only peer"
                      />
                      <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                    </label>
                  </div>

                  <div className="flex items-center justify-between">
                    <div>
                      <h3 className="text-sm font-medium text-gray-900">API ì ‘ê·¼</h3>
                      <p className="text-sm text-gray-500">ì™¸ë¶€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ API ì ‘ê·¼ì„ í—ˆìš©í•©ë‹ˆë‹¤</p>
                    </div>
                    <label className="relative inline-flex items-center cursor-pointer">
                      <input
                        type="checkbox"
                        checked={settings.features.apiAccess}
                        onChange={(e) => updateSetting('features', 'apiAccess', e.target.checked)}
                        className="sr-only peer"
                      />
                      <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"></div>
                    </label>
                  </div>
                </div>
              </div>
            )}

            {/* ì €ì¥ ë²„íŠ¼ */}
            <div className="px-6 py-4 bg-gray-50 border-t border-gray-200 rounded-b-lg">
              <div className="flex justify-end">
                <button
                  onClick={handleSaveSettings}
                  disabled={isSaving}
                  className="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50"
                >
                  {isSaving ? (
                    <>
                      <CloudIcon className="mr-2 h-4 w-4 animate-spin" />
                      ì €ì¥ ì¤‘...
                    </>
                  ) : (
                    <>
                      <CloudIcon className="mr-2 h-4 w-4" />
                      ì„¤ì • ì €ì¥
                    </>
                  )}
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="frontend/src/app/admin/layout.tsx">
'use client';

import { useRouter } from 'next/navigation';
import { useEffect, useState } from 'react';
import { useAuthStore } from '@/lib/stores/authStore';
import { 
  HomeIcon, 
  UsersIcon, 
  FolderIcon, 
  Cog6ToothIcon,
  ChartBarIcon,
  DocumentTextIcon,
  ShieldCheckIcon,
  ExclamationTriangleIcon,
} from '@heroicons/react/24/outline';
import { AdminNavItem, ADMIN_PERMISSIONS } from '@/components/admin';

interface AdminLayoutProps {
  children: React.ReactNode;
}

export default function AdminLayout({ children }: AdminLayoutProps) {
  const router = useRouter();
  const { user, checkAuth } = useAuthStore();
  const [isLoading, setIsLoading] = useState(true);

  useEffect(() => {
    const initAuth = async () => {
      await checkAuth();
      setIsLoading(false);
    };
    initAuth();
  }, [checkAuth]);

  // ë¡œë”© ì¤‘ì´ê±°ë‚˜ ì¸ì¦ ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” ì¤‘
  if (isLoading) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <div className="animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-600"></div>
      </div>
    );
  }

  // ì–´ë“œë¯¼ ê¶Œí•œì´ ì—†ëŠ” ê²½ìš°
  if (!user?.adminRole) {
    return (
      <div className="min-h-screen flex items-center justify-center bg-gray-50">
        <div className="max-w-md w-full bg-white shadow-lg rounded-lg p-6 text-center">
          <ExclamationTriangleIcon className="h-16 w-16 text-red-500 mx-auto mb-4" />
          <h1 className="text-2xl font-bold text-gray-900 mb-2">ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤</h1>
          <p className="text-gray-600 mb-4">ì–´ë“œë¯¼ íŒ¨ë„ì— ì ‘ê·¼í•˜ë ¤ë©´ ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
          <button
            onClick={() => router.push('/')}
            className="w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 transition-colors"
          >
            í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°
          </button>
        </div>
      </div>
    );
  }

  const navigationItems = [
    {
      name: 'ëŒ€ì‹œë³´ë“œ',
      href: '/admin',
      icon: HomeIcon,
      permissions: ADMIN_PERMISSIONS.DASHBOARD_READ,
      exact: true,
    },
    {
      name: 'ì‚¬ìš©ì ê´€ë¦¬',
      href: '/admin/users',
      icon: UsersIcon,
      permissions: ADMIN_PERMISSIONS.USERS_READ,
    },
    {
      name: 'í”„ë¡œì íŠ¸ ê´€ë¦¬',
      href: '/admin/projects',
      icon: FolderIcon,
      permissions: ADMIN_PERMISSIONS.PROJECTS_READ,
    },
    {
      name: 'í†µê³„ ë¶„ì„',
      href: '/admin/analytics',
      icon: ChartBarIcon,
      permissions: ADMIN_PERMISSIONS.DASHBOARD_READ,
    },
    {
      name: 'ê°ì‚¬ ë¡œê·¸',
      href: '/admin/audit-logs',
      icon: DocumentTextIcon,
      permissions: ADMIN_PERMISSIONS.AUDIT_READ,
    },
    {
      name: 'ì‹œìŠ¤í…œ ì„¤ì •',
      href: '/admin/settings',
      icon: Cog6ToothIcon,
      permissions: ADMIN_PERMISSIONS.SETTINGS_READ,
    },
  ];

  return (
    <div className="min-h-screen bg-gray-50">
      {/* ì‚¬ì´ë“œë°” */}
      <div className="fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg">
        {/* ë¡œê³  ì˜ì—­ */}
        <div className="flex items-center justify-center h-16 px-4 border-b border-gray-200">
          <div className="flex items-center">
            <ShieldCheckIcon className="h-8 w-8 text-indigo-600" />
            <span className="ml-2 text-xl font-bold text-gray-900">ì›Œí´ë¦¬ ì–´ë“œë¯¼</span>
          </div>
        </div>

        {/* ê´€ë¦¬ì ì •ë³´ */}
        <div className="p-4 border-b border-gray-200">
          <div className="flex items-center">
            <div className="flex-shrink-0">
              <div className="h-10 w-10 rounded-full bg-indigo-600 flex items-center justify-center">
                <span className="text-sm font-medium text-white">
                  {user?.name?.charAt(0) || 'A'}
                </span>
              </div>
            </div>
            <div className="ml-3">
              <p className="text-sm font-medium text-gray-900">{user?.name}</p>
              <p className="text-xs text-gray-500">
                {user?.adminRole === 'super_admin' && 'ìŠˆí¼ ê´€ë¦¬ì'}
                {user?.adminRole === 'admin' && 'ê´€ë¦¬ì'}
                {user?.adminRole === 'moderator' && 'ëª¨ë”ë ˆì´í„°'}
                {user?.adminRole === 'support' && 'ì§€ì›íŒ€'}
              </p>
            </div>
          </div>
        </div>

        {/* ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ */}
        <nav className="mt-4 px-4 space-y-2">
          {navigationItems.map((item, index) => (
            <AdminNavItem
              key={index}
              href={item.href}
              permissions={item.permissions}
              icon={item.icon}
              exact={item.exact}
            >
              {item.name}
            </AdminNavItem>
          ))}
        </nav>

        {/* í•˜ë‹¨ ë¡œê·¸ì•„ì›ƒ */}
        <div className="absolute bottom-0 w-full p-4 border-t border-gray-200">
          <button
            onClick={() => {
              // ë¡œê·¸ì•„ì›ƒ ë¡œì§
              router.push('/');
            }}
            className="w-full flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-700 hover:bg-gray-100 hover:text-gray-900 transition-colors"
          >
            <span>ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</span>
          </button>
        </div>
      </div>

      {/* ë©”ì¸ ì½˜í…ì¸  */}
      <div className="pl-64">
        <main className="py-6">
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            {children}
          </div>
        </main>
      </div>
    </div>
  );
}
</file>

<file path="frontend/src/app/auth/layout.tsx">
import type { Metadata } from 'next'

export const metadata: Metadata = {
  title: 'ì¸ì¦ - ì›Œí´ë¦¬',
  description: 'ì›Œí´ë¦¬ ë¡œê·¸ì¸ ë° ì¸ì¦',
}

export default function AuthLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <div className="min-h-screen bg-background">
      {children}
    </div>
  )
}
</file>

<file path="frontend/src/app/goals/page.tsx">
'use client'

export const dynamic = 'force-dynamic'

import { useState, useEffect } from 'react'
import { useRouter, useSearchParams } from 'next/navigation'
import { 
  PlusIcon, 
  FlagIcon, 
  CheckCircleIcon, 
  ClockIcon, 
  ChartBarIcon,
  CalendarIcon,
  UsersIcon
} from '@heroicons/react/24/outline'
import Header from '@/components/layout/Header'
import MainContainer from '@/components/layout/MainContainer'
import FilterManager from '@/components/ui/FilterManager'
import WorklyFloatingActionButton from '@/components/ui/WorklyFloatingActionButton'
import LoginBanner from '@/components/ui/LoginBanner'
import { isAuthenticated } from '@/lib/auth'
import { 
  Goal, 
  GoalStatus, 
  GoalPriority, 
  GoalType, 
  GoalTimeframe,
  CreateGoalDto 
} from '@/shared/types/goal.types'

// ëª©ì—… ëª©í‘œ ë°ì´í„°
const mockGoals: Goal[] = [
  {
    id: '1',
    title: 'ì›Œí´ë¦¬ í”Œë«í¼ ì™„ì„±',
    description: 'ì‚¬ìš©ìë“¤ì´ ëª©í‘œë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” í”Œë«í¼ êµ¬ì¶•',
    status: GoalStatus.ACTIVE,
    priority: GoalPriority.HIGH,
    type: GoalType.ORGANIZATIONAL,
    timeframe: GoalTimeframe.MEDIUM_TERM,
    startDate: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString(),
    targetDate: new Date(Date.now() + 150 * 24 * 60 * 60 * 1000).toISOString(),
    progress: 75,
    metrics: [
      {
        id: 'm1',
        name: 'ì‚¬ìš©ì ë“±ë¡ ìˆ˜',
        targetValue: 1000,
        currentValue: 750,
        unit: 'ëª…',
        description: 'ë² íƒ€ í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì í™•ë³´'
      },
      {
        id: 'm2',
        name: 'ê¸°ëŠ¥ ì™„ì„±ë„',
        targetValue: 100,
        currentValue: 85,
        unit: '%',
        description: 'í•µì‹¬ ê¸°ëŠ¥ ê°œë°œ ì™„ë£Œ'
      }
    ],
    tags: ['í”Œë«í¼', 'MVP', 'ì‚¬ì—…'],
    color: '#3B82F6',
    icon: 'ğŸš€',
    ownerId: 'user1',
    owner: { id: 'user1', name: 'ê¹€ì›Œí´ë¦¬', email: 'workly@example.com' },
    projectCount: 3,
    completedProjectCount: 2,
    createdAt: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString(),
    updatedAt: new Date().toISOString(),
    isOverdue: false,
    isDueSoon: false
  },
  {
    id: '2',
    title: 'ê°œì¸ ì—­ëŸ‰ ê°•í™”',
    description: 'ìƒˆë¡œìš´ ê¸°ìˆ  ìŠ¤íƒ ìŠµë“ ë° ì „ë¬¸ì„± í–¥ìƒ',
    status: GoalStatus.ACTIVE,
    priority: GoalPriority.MEDIUM,
    type: GoalType.PERSONAL,
    timeframe: GoalTimeframe.LONG_TERM,
    startDate: new Date(Date.now() - 60 * 24 * 60 * 60 * 1000).toISOString(),
    targetDate: new Date(Date.now() + 300 * 24 * 60 * 60 * 1000).toISOString(),
    progress: 45,
    metrics: [
      {
        id: 'm3',
        name: 'í•™ìŠµ ì‹œê°„',
        targetValue: 200,
        currentValue: 90,
        unit: 'ì‹œê°„',
        description: 'ì˜¨ë¼ì¸ ê°•ì˜ ë° ì‹¤ìŠµ'
      }
    ],
    tags: ['í•™ìŠµ', 'ì—­ëŸ‰ê°œë°œ', 'ê°œì¸ì„±ì¥'],
    color: '#10B981',
    icon: 'ğŸ“š',
    ownerId: 'user1',
    owner: { id: 'user1', name: 'ê¹€ì›Œí´ë¦¬', email: 'workly@example.com' },
    projectCount: 2,
    completedProjectCount: 0,
    createdAt: new Date(Date.now() - 60 * 24 * 60 * 60 * 1000).toISOString(),
    updatedAt: new Date().toISOString(),
    isOverdue: false,
    isDueSoon: false
  },
  {
    id: '3',
    title: 'ê±´ê°•í•œ ë¼ì´í”„ ìŠ¤íƒ€ì¼',
    description: 'ê·œì¹™ì ì¸ ìš´ë™ê³¼ ê±´ê°•í•œ ì‹ìŠµê´€ ìœ ì§€',
    status: GoalStatus.COMPLETED,
    priority: GoalPriority.HIGH,
    type: GoalType.PERSONAL,
    timeframe: GoalTimeframe.SHORT_TERM,
    startDate: new Date(Date.now() - 90 * 24 * 60 * 60 * 1000).toISOString(),
    targetDate: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),
    completedAt: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),
    progress: 100,
    metrics: [
      {
        id: 'm4',
        name: 'ìš´ë™ ì¼ìˆ˜',
        targetValue: 60,
        currentValue: 65,
        unit: 'ì¼',
        description: '3ê°œì›”ê°„ ìš´ë™ ì§€ì†'
      }
    ],
    tags: ['ê±´ê°•', 'ìš´ë™', 'ìŠµê´€'],
    color: '#8B5CF6',
    icon: 'ğŸ’ª',
    ownerId: 'user1',
    owner: { id: 'user1', name: 'ê¹€ì›Œí´ë¦¬', email: 'workly@example.com' },
    projectCount: 1,
    completedProjectCount: 1,
    createdAt: new Date(Date.now() - 90 * 24 * 60 * 60 * 1000).toISOString(),
    updatedAt: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),
    isOverdue: false,
    isDueSoon: false
  }
]

// ëª©í‘œ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸
function GoalCard({ goal, onClick }: { goal: Goal; onClick: () => void }) {
  const getStatusColor = (status: GoalStatus) => {
    switch (status) {
      case GoalStatus.ACTIVE: return 'text-blue-600 bg-blue-100'
      case GoalStatus.COMPLETED: return 'text-green-600 bg-green-100'
      case GoalStatus.ON_HOLD: return 'text-yellow-600 bg-yellow-100'
      case GoalStatus.CANCELLED: return 'text-red-600 bg-red-100'
      default: return 'text-gray-600 bg-gray-100'
    }
  }

  const getStatusLabel = (status: GoalStatus) => {
    switch (status) {
      case GoalStatus.ACTIVE: return 'ì§„í–‰ ì¤‘'
      case GoalStatus.COMPLETED: return 'ì™„ë£Œ'
      case GoalStatus.ON_HOLD: return 'ë³´ë¥˜'
      case GoalStatus.CANCELLED: return 'ì·¨ì†Œ'
      case GoalStatus.DRAFT: return 'ì´ˆì•ˆ'
      default: return 'ì•Œ ìˆ˜ ì—†ìŒ'
    }
  }

  const getPriorityColor = (priority: GoalPriority) => {
    switch (priority) {
      case GoalPriority.URGENT: return 'text-red-600'
      case GoalPriority.HIGH: return 'text-orange-600'
      case GoalPriority.MEDIUM: return 'text-blue-600'
      case GoalPriority.LOW: return 'text-gray-600'
      default: return 'text-gray-600'
    }
  }

  return (
    <div 
      className="p-6 hover:bg-gray-50 transition-all duration-200 cursor-pointer group border-l-4"
      style={{ borderLeftColor: goal.color }}
      onClick={onClick}
    >
      {/* ëª©í‘œ í—¤ë” */}
      <div className="flex items-start justify-between mb-4">
        <div className="flex items-center space-x-3 flex-1">
          <div 
            className="w-12 h-12 rounded-lg flex items-center justify-center text-white font-semibold text-lg"
            style={{ backgroundColor: goal.color }}
          >
            {goal.icon}
          </div>
          <div className="flex-1">
            <div className="flex items-center space-x-2 mb-1">
              <h3 className="font-semibold text-gray-900 group-hover:text-gray-700">
                {goal.title}
              </h3>
              <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(goal.status)}`}>
                {getStatusLabel(goal.status)}
              </span>
            </div>
            <p className="text-sm text-gray-500 line-clamp-2">{goal.description}</p>
          </div>
        </div>
        <div className={`text-sm font-medium ${getPriorityColor(goal.priority)}`}>
          {goal.priority.toUpperCase()}
        </div>
      </div>

      {/* ì§„í–‰ë¥  */}
      <div className="mb-4">
        <div className="flex items-center justify-between text-sm mb-2">
          <span className="text-gray-600">ëª©í‘œ ë‹¬ì„±ë¥ </span>
          <span className="font-medium">{goal.progress}%</span>
        </div>
        <div className="w-full bg-gray-200 rounded-full h-2">
          <div 
            className="h-2 rounded-full transition-all duration-300"
            style={{ 
              width: `${goal.progress}%`,
              backgroundColor: goal.color 
            }}
          />
        </div>
      </div>

      {/* ë©”íŠ¸ë¦­ ì •ë³´ */}
      {goal.metrics.length > 0 && (
        <div className="mb-4">
          <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
            {goal.metrics.slice(0, 2).map((metric) => (
              <div key={metric.id} className="bg-gray-50 rounded-lg p-3">
                <div className="flex items-center justify-between">
                  <span className="text-sm text-gray-600">{metric.name}</span>
                  <span className="text-sm font-medium">
                    {metric.currentValue}/{metric.targetValue} {metric.unit}
                  </span>
                </div>
                <div className="w-full bg-gray-200 rounded-full h-1 mt-2">
                  <div 
                    className="h-1 rounded-full bg-blue-500 transition-all duration-300"
                    style={{ width: `${Math.min((metric.currentValue / metric.targetValue) * 100, 100)}%` }}
                  />
                </div>
              </div>
            ))}
          </div>
        </div>
      )}

      {/* í”„ë¡œì íŠ¸ ë° ì¼ì • ì •ë³´ */}
      <div className="flex items-center justify-between text-sm text-gray-500">
        <div className="flex items-center space-x-4">
          <div className="flex items-center space-x-1">
            <UsersIcon className="w-4 h-4" />
            <span>{goal.completedProjectCount}/{goal.projectCount} í”„ë¡œì íŠ¸</span>
          </div>
          {goal.targetDate && (
            <div className="flex items-center space-x-1">
              <CalendarIcon className="w-4 h-4" />
              <span>
                {new Date(goal.targetDate).toLocaleDateString('ko-KR')}ê¹Œì§€
              </span>
            </div>
          )}
        </div>
        <div className="flex items-center space-x-1">
          <ChartBarIcon className="w-4 h-4 text-green-600" />
          <span className="text-green-600">ìˆœì¡°ë¡­ê²Œ ì§„í–‰</span>
        </div>
      </div>

      {/* íƒœê·¸ */}
      {goal.tags.length > 0 && (
        <div className="flex flex-wrap gap-1 mt-3">
          {goal.tags.slice(0, 3).map((tag, index) => (
            <span
              key={index}
              className="inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full"
            >
              {tag}
            </span>
          ))}
          {goal.tags.length > 3 && (
            <span className="inline-block px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-full">
              +{goal.tags.length - 3}
            </span>
          )}
        </div>
      )}
    </div>
  )
}

export default function GoalsPage() {
  const router = useRouter()
  const searchParams = useSearchParams()
  const [goals, setGoals] = useState<Goal[]>(mockGoals)
  const [isLoading, setIsLoading] = useState(false)
  const [activeFilter, setActiveFilter] = useState('ì „ì²´ ëª©í‘œ')
  const [isLoggedIn, setIsLoggedIn] = useState(false)

  // í•„í„° ì„¤ì • ìƒíƒœ
  const [showOnlyMyGoals, setShowOnlyMyGoals] = useState(false)
  const [goalSortOrder, setGoalSortOrder] = useState('progress')
  const [progressRange, setProgressRange] = useState<[number, number]>([0, 100])
  const [timeframeFilter, setTimeframeFilter] = useState<string[]>([])
  const [statusFilter, setStatusFilter] = useState('all')

  // ë¡œê·¸ì¸ ìƒíƒœ ì´ˆê¸°í™”
  useEffect(() => {
    setIsLoggedIn(isAuthenticated())
  }, [])

  // ê¸°ë³¸ í•„í„° ì¹©ë“¤
  const defaultChips = [
    { 
      id: 'all',
      label: 'ì „ì²´ ëª©í‘œ', 
      isDefault: true,
      conditions: [],
      count: goals.length,
      icon: <FlagIcon className="w-4 h-4" />,
      color: 'gray' as const
    },
    { 
      id: 'active',
      label: 'ì§„í–‰ ì¤‘', 
      isDefault: true,
      conditions: [{ key: 'status', operator: 'equals' as const, value: GoalStatus.ACTIVE, label: 'ìƒíƒœ: ì§„í–‰ ì¤‘' }],
      count: goals.filter(g => g.status === GoalStatus.ACTIVE).length,
      icon: <ClockIcon className="w-4 h-4" />,
      color: 'blue' as const
    },
    { 
      id: 'completed',
      label: 'ì™„ë£Œë¨', 
      isDefault: true,
      conditions: [{ key: 'status', operator: 'equals' as const, value: GoalStatus.COMPLETED, label: 'ìƒíƒœ: ì™„ë£Œ' }],
      count: goals.filter(g => g.status === GoalStatus.COMPLETED).length,
      icon: <CheckCircleIcon className="w-4 h-4" />,
      color: 'green' as const
    },
    { 
      id: 'high-priority',
      label: 'ì¤‘ìš” ëª©í‘œ', 
      isDefault: true,
      conditions: [{ key: 'priority', operator: 'in' as const, value: [GoalPriority.HIGH, GoalPriority.URGENT], label: 'ìš°ì„ ìˆœìœ„: ë†’ìŒ+ê¸´ê¸‰' }],
      count: goals.filter(g => g.priority === GoalPriority.HIGH || g.priority === GoalPriority.URGENT).length,
      icon: <ChartBarIcon className="w-4 h-4" />,
      color: 'orange' as const
    },
  ]

  // í•„í„°ë§ëœ ëª©í‘œ ëª©ë¡
  const filteredGoals = goals.filter(goal => {
    switch (activeFilter) {
      case 'ì§„í–‰ ì¤‘':
        return goal.status === GoalStatus.ACTIVE
      case 'ì™„ë£Œë¨':
        return goal.status === GoalStatus.COMPLETED
      case 'ì¤‘ìš” ëª©í‘œ':
        return goal.priority === GoalPriority.HIGH || goal.priority === GoalPriority.URGENT
      case 'ì „ì²´ ëª©í‘œ':
      default:
        return true
    }
  })


  const handleGoalClick = (goal: Goal) => {
    router.push(`/goals/${goal.id}`)
  }

  return (
    <div className="min-h-screen bg-gray-50 pb-20">
      {/* í—¤ë” */}
      <Header title="ëª©í‘œ" />
      
      {/* ë¡œê·¸ì¸ ë°°ë„ˆ (í—¤ë” ë°”ê¹¥) */}
      <LoginBanner />
      
      {/* ë©”ì¸ ì½˜í…ì¸  */}
      <MainContainer>
        {/* í•„í„° ê´€ë¦¬ì - ë¡œê·¸ì¸ëœ ì‚¬ìš©ìë§Œ í‘œì‹œ */}
        {isLoggedIn && (
          <div className="mb-0">
            <FilterManager
            defaultChips={defaultChips}
            activeChipId={activeFilter}
            onChipChange={setActiveFilter}
            settingsTitle="ëª©í‘œ í•„í„° ì„¤ì •"
            settings={[
              {
                key: 'myOnly',
                label: 'ë‚´ ëª©í‘œë§Œ',
                type: 'toggle',
                value: showOnlyMyGoals,
                onChange: setShowOnlyMyGoals
              },
              {
                key: 'progress',
                label: 'ë‹¬ì„±ë¥  ë²”ìœ„',
                type: 'range',
                value: progressRange,
                onChange: setProgressRange
              },
              {
                key: 'timeframe',
                label: 'ì‹œê°„ ë²”ìœ„',
                type: 'tag-selector',
                value: timeframeFilter,
                options: ['short_term', 'medium_term', 'long_term'],
                onChange: setTimeframeFilter
              },
              {
                key: 'status',
                label: 'ìƒíƒœ',
                type: 'select',
                value: statusFilter,
                options: ['all', 'active', 'completed', 'on_hold'],
                onChange: setStatusFilter
              },
              {
                key: 'sort',
                label: 'ì •ë ¬ ê¸°ì¤€',
                type: 'select',
                value: goalSortOrder,
                options: ['progress', 'deadline', 'priority', 'created'],
                onChange: setGoalSortOrder
              }
            ]}
            getChipCount={(conditions) => {
              let filteredGoals = goals
              
              conditions.forEach(condition => {
                switch (condition.key) {
                  case 'status':
                    filteredGoals = filteredGoals.filter(g => g.status === condition.value)
                    break
                  case 'priority':
                    if (Array.isArray(condition.value)) {
                      filteredGoals = filteredGoals.filter(g => condition.value.includes(g.priority))
                    }
                    break
                }
              })
              
              return filteredGoals.length
            }}
            />
          </div>
        )}

        {/* ëª©í‘œ ëª©ë¡ */}
        <div className="bg-white border border-gray-200 overflow-hidden">
          {isLoading ? (
            <div className="p-8 text-center">
              <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"></div>
              <p className="text-gray-500 mt-2">ëª©í‘œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
            </div>
          ) : filteredGoals.length === 0 ? (
            <div className="p-8 text-center">
              <FlagIcon className="w-16 h-16 text-gray-400 mx-auto mb-4" />
              <h3 className="text-lg font-medium text-gray-600 mb-1">ëª©í‘œê°€ ì—†ìŠµë‹ˆë‹¤</h3>
              <p className="text-gray-500 text-sm mb-4">ìš°ì¸¡ í•˜ë‹¨ì˜ ìˆ˜ì§‘í•¨ ë²„íŠ¼(+)ì„ ëˆŒëŸ¬ ëª©í‘œë¥¼ ì¶”ê°€í•´ë³´ì„¸ìš”!</p>
            </div>
          ) : (
            <div className="divide-y divide-gray-100">
              {filteredGoals.map((goal) => (
                <GoalCard
                  key={goal.id}
                  goal={goal}
                  onClick={() => handleGoalClick(goal)}
                />
              ))}
            </div>
          )}
        </div>
      </MainContainer>
      
      {/* ì›Œí´ë¦¬ í”Œë¡œíŒ… ì•¡ì…˜ ë²„íŠ¼ */}
      <WorklyFloatingActionButton 
        onTaskCreated={(task) => {
          console.log('CPER ì—…ë¬´ ìƒì„±:', task)
          // TODO: ëª©í‘œ ê´€ë ¨ ì—…ë¬´ ìƒì„± ë¡œì§ êµ¬í˜„
        }}
        onInboxItemCreated={(inboxItem) => {
          console.log('ë¹ ë¥¸ ìˆ˜ì§‘:', inboxItem)
          // TODO: ëª©í‘œ ê´€ë ¨ ì•„ì´ë””ì–´ ìˆ˜ì§‘ ë¡œì§ êµ¬í˜„
        }}
      />
    </div>
  )
}
</file>

<file path="frontend/src/app/inbox/page.tsx">
'use client'

export const dynamic = 'force-dynamic'

import { useState, useEffect } from 'react'
import { useRouter, useSearchParams } from 'next/navigation'
import { 
  PlusIcon, 
  InboxIcon, 
  ClockIcon, 
  CheckCircleIcon, 
  ExclamationTriangleIcon,
  DocumentTextIcon,
  LightBulbIcon,
  LinkIcon,
  MicrophoneIcon,
  CalendarIcon
} from '@heroicons/react/24/outline'
import Header from '@/components/layout/Header'
import MainContainer from '@/components/layout/MainContainer'
import FilterManager from '@/components/ui/FilterManager'
import WorklyFloatingActionButton from '@/components/ui/WorklyFloatingActionButton'
import LoginBanner from '@/components/ui/LoginBanner'
import PlanWorkflowModal from '@/components/workflow/PlanWorkflowModal'
import { isAuthenticated } from '@/lib/auth'
import { 
  InboxItem, 
  InboxItemType, 
  InboxItemStatus, 
  InboxItemPriority,
  QuickCaptureDto 
} from '@/shared/types/inbox.types'

// ëª©ì—… ìˆ˜ì§‘í•¨ ë°ì´í„° (CPER ì›Œí¬í”Œë¡œìš°ì˜ 'ìˆ˜ì§‘' ë‹¨ê³„)
const mockInboxItems: InboxItem[] = [
  {
    id: '1',
    title: 'ì‚¬ìš©ì í”¼ë“œë°± ì •ë¦¬',
    content: 'ë² íƒ€ í…ŒìŠ¤íŠ¸ ì‚¬ìš©ìë“¤ë¡œë¶€í„° ë°›ì€ í”¼ë“œë°±ì„ ì •ë¦¬í•˜ê³  ê°œì„  ë°©í–¥ ìˆ˜ë¦½',
    type: InboxItemType.TASK_IDEA,
    status: InboxItemStatus.CAPTURED,
    priority: InboxItemPriority.HIGH,
    source: 'manual',
    captureContext: {
      timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString()
    },
    attachments: [],
    relatedUrls: [],
    tags: ['í”¼ë“œë°±', 'ê°œì„ ', 'UX'],
    userId: 'user1',
    user: { id: 'user1', name: 'ê¹€ì›Œí´ë¦¬', email: 'workly@example.com' },
    createdAt: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),
    updatedAt: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),
    daysSinceCapture: 0
  },
  {
    id: '2',
    title: 'ìƒˆë¡œìš´ ë””ìì¸ ì‹œìŠ¤í…œ ì•„ì´ë””ì–´',
    content: 'ë” ì¼ê´€ì„± ìˆëŠ” UIë¥¼ ìœ„í•œ ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ ë””ìì¸ ì‹œìŠ¤í…œ êµ¬ì¶• ì•„ì´ë””ì–´',
    type: InboxItemType.PROJECT_IDEA,
    status: InboxItemStatus.CLARIFIED,
    priority: InboxItemPriority.MEDIUM,
    source: 'web_clipper',
    captureContext: {
      url: 'https://example.com/design-systems',
      timestamp: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString()
    },
    attachments: [],
    relatedUrls: ['https://example.com/design-systems'],
    tags: ['ë””ìì¸', 'ì‹œìŠ¤í…œ', 'UI'],
    scheduledFor: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),
    userId: 'user1',
    user: { id: 'user1', name: 'ê¹€ì›Œí´ë¦¬', email: 'workly@example.com' },
    createdAt: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(),
    updatedAt: new Date(Date.now() - 12 * 60 * 60 * 1000).toISOString(),
    daysSinceCapture: 1
  },
  {
    id: '3',
    title: 'íŒ€ íšŒì˜ ë©”ëª¨',
    content: 'ì£¼ê°„ ìŠ¤í”„ë¦°íŠ¸ íšŒì˜ì—ì„œ ë…¼ì˜ëœ ì£¼ìš” ì´ìŠˆë“¤ê³¼ ì•¡ì…˜ ì•„ì´í…œ',
    type: InboxItemType.MEETING_NOTE,
    status: InboxItemStatus.ORGANIZED,
    priority: InboxItemPriority.MEDIUM,
    source: 'mobile_app',
    captureContext: {
      deviceType: 'iPhone',
      timestamp: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString()
    },
    attachments: [],
    relatedUrls: [],
    tags: ['íšŒì˜', 'ìŠ¤í”„ë¦°íŠ¸', 'ì•¡ì…˜ì•„ì´í…œ'],
    processedInto: {
      type: 'task',
      id: 'task-123',
      title: 'ìŠ¤í”„ë¦°íŠ¸ ë°±ë¡œê·¸ ì—…ë°ì´íŠ¸'
    },
    processedAt: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000).toISOString(),
    userId: 'user1',
    user: { id: 'user1', name: 'ê¹€ì›Œí´ë¦¬', email: 'workly@example.com' },
    createdAt: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(),
    updatedAt: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000).toISOString(),
    daysSinceCapture: 3
  },
  {
    id: '4',
    title: 'ì˜ê°ì„ ì£¼ëŠ” ì•„í‹°í´',
    content: 'ìƒì‚°ì„± ì•±ì˜ ë¯¸ë˜ì— ëŒ€í•œ í¥ë¯¸ë¡œìš´ ê´€ì ',
    type: InboxItemType.INSPIRATION,
    status: InboxItemStatus.DEFERRED,
    priority: InboxItemPriority.LOW,
    source: 'web_clipper',
    captureContext: {
      url: 'https://example.com/productivity-future',
      timestamp: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString()
    },
    attachments: [],
    relatedUrls: ['https://example.com/productivity-future'],
    tags: ['ì˜ê°', 'ë¯¸ë˜', 'ìƒì‚°ì„±'],
    scheduledFor: new Date(Date.now() + 14 * 24 * 60 * 60 * 1000).toISOString(),
    userId: 'user1',
    user: { id: 'user1', name: 'ê¹€ì›Œí´ë¦¬', email: 'workly@example.com' },
    createdAt: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),
    updatedAt: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),
    daysSinceCapture: 5
  }
]

// íƒ€ì…ë³„ ì•„ì´ì½˜ ë§¤í•‘
const getTypeIcon = (type: InboxItemType) => {
  switch (type) {
    case InboxItemType.QUICK_NOTE: return DocumentTextIcon
    case InboxItemType.TASK_IDEA: return CheckCircleIcon
    case InboxItemType.PROJECT_IDEA: return LightBulbIcon
    case InboxItemType.GOAL_IDEA: return LightBulbIcon
    case InboxItemType.MEETING_NOTE: return DocumentTextIcon
    case InboxItemType.FEEDBACK: return ExclamationTriangleIcon
    case InboxItemType.INSPIRATION: return LightBulbIcon
    case InboxItemType.REMINDER: return ClockIcon
    case InboxItemType.LINK: return LinkIcon
    case InboxItemType.FILE: return DocumentTextIcon
    default: return DocumentTextIcon
  }
}

// ìƒíƒœë³„ ìƒ‰ìƒ ë° ë¼ë²¨
const getStatusInfo = (status: InboxItemStatus) => {
  switch (status) {
    case InboxItemStatus.CAPTURED:
      return { color: 'text-blue-600 bg-blue-100', label: 'ìˆ˜ì§‘ë¨' }
    case InboxItemStatus.CLARIFIED:
      return { color: 'text-yellow-600 bg-yellow-100', label: 'ëª…í™•í™”ë¨' }
    case InboxItemStatus.ORGANIZED:
      return { color: 'text-green-600 bg-green-100', label: 'ì •ë¦¬ë¨' }
    case InboxItemStatus.DEFERRED:
      return { color: 'text-purple-600 bg-purple-100', label: 'ë¯¸ë£¨ì–´ì§' }
    default:
      return { color: 'text-gray-600 bg-gray-100', label: 'ì•Œ ìˆ˜ ì—†ìŒ' }
  }
}

// ìš°ì„ ìˆœìœ„ ìƒ‰ìƒ
const getPriorityColor = (priority: InboxItemPriority) => {
  switch (priority) {
    case InboxItemPriority.URGENT: return 'text-red-600'
    case InboxItemPriority.HIGH: return 'text-orange-600'
    case InboxItemPriority.MEDIUM: return 'text-blue-600'
    case InboxItemPriority.LOW: return 'text-gray-600'
    default: return 'text-gray-600'
  }
}

// ìˆ˜ì§‘í•¨ ì•„ì´í…œ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸
function InboxItemCard({ item, onClick }: { item: InboxItem; onClick: () => void }) {
  const TypeIcon = getTypeIcon(item.type)
  const statusInfo = getStatusInfo(item.status)
  
  return (
    <div 
      className="p-6 hover:bg-gray-50 transition-all duration-200 cursor-pointer group"
      onClick={onClick}
    >
      {/* ì•„ì´í…œ í—¤ë” */}
      <div className="flex items-start justify-between mb-3">
        <div className="flex items-center space-x-3 flex-1">
          <div className="w-10 h-10 rounded-lg bg-amber-100 flex items-center justify-center">
            <TypeIcon className="w-5 h-5 text-amber-600" />
          </div>
          <div className="flex-1">
            <div className="flex items-center space-x-2 mb-1">
              <h3 className="font-medium text-gray-900 group-hover:text-gray-700">
                {item.title}
              </h3>
              <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${statusInfo.color}`}>
                {statusInfo.label}
              </span>
            </div>
            <p className="text-sm text-gray-500 line-clamp-2">{item.content}</p>
          </div>
        </div>
        <div className={`text-xs font-medium ${getPriorityColor(item.priority)}`}>
          {item.priority.toUpperCase()}
        </div>
      </div>

      {/* ì²˜ë¦¬ ê²°ê³¼ (ì •ë¦¬ëœ í•­ëª©ë§Œ) */}
      {item.processedInto && (
        <div className="mb-3 p-3 bg-green-50 rounded-lg border border-green-200">
          <div className="flex items-center space-x-2">
            <CheckCircleIcon className="w-4 h-4 text-green-600" />
            <span className="text-sm text-green-800">
              <span className="font-medium">{item.processedInto.type === 'task' ? 'ì—…ë¬´' : item.processedInto.type === 'project' ? 'í”„ë¡œì íŠ¸' : 'ëª©í‘œ'}</span>ë¡œ ì „í™˜: 
              <span className="ml-1">{item.processedInto.title}</span>
            </span>
          </div>
        </div>
      )}

      {/* ìŠ¤ì¼€ì¤„ ì •ë³´ */}
      {item.scheduledFor && (
        <div className="mb-3 flex items-center space-x-2 text-sm text-gray-600">
          <CalendarIcon className="w-4 h-4" />
          <span>
            {new Date(item.scheduledFor).toLocaleDateString('ko-KR')}ì— ë‹¤ì‹œ ê²€í† 
          </span>
        </div>
      )}

      {/* ë©”íƒ€ ì •ë³´ */}
      <div className="flex items-center justify-between text-sm text-gray-500">
        <div className="flex items-center space-x-4">
          <span>{item.daysSinceCapture}ì¼ ì „ ìˆ˜ì§‘</span>
          <span className="capitalize">{item.source.replace('_', ' ')}</span>
          {item.relatedUrls.length > 0 && (
            <div className="flex items-center space-x-1">
              <LinkIcon className="w-4 h-4" />
              <span>{item.relatedUrls.length}ê°œ ë§í¬</span>
            </div>
          )}
        </div>
        <div className="text-xs">
          {new Date(item.createdAt).toLocaleTimeString('ko-KR', { 
            hour: '2-digit', 
            minute: '2-digit' 
          })}
        </div>
      </div>

      {/* íƒœê·¸ */}
      {item.tags.length > 0 && (
        <div className="flex flex-wrap gap-1 mt-3">
          {item.tags.slice(0, 3).map((tag, index) => (
            <span
              key={index}
              className="inline-block px-2 py-1 text-xs bg-amber-100 text-amber-800 rounded-full"
            >
              {tag}
            </span>
          ))}
          {item.tags.length > 3 && (
            <span className="inline-block px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-full">
              +{item.tags.length - 3}
            </span>
          )}
        </div>
      )}
    </div>
  )
}

export default function InboxPage() {
  const router = useRouter()
  const searchParams = useSearchParams()
  const [inboxItems, setInboxItems] = useState<InboxItem[]>(mockInboxItems)
  const [isLoading, setIsLoading] = useState(false)
  const [activeFilter, setActiveFilter] = useState('ëª¨ë“  í•­ëª©')
  const [isQuickCaptureOpen, setIsQuickCaptureOpen] = useState(false)
  const [quickCaptureText, setQuickCaptureText] = useState('')
  const [selectedItemForPlan, setSelectedItemForPlan] = useState<InboxItem | null>(null)
  const [isPlanModalOpen, setIsPlanModalOpen] = useState(false)
  const [isLoggedIn, setIsLoggedIn] = useState(false)

  // í•„í„° ì„¤ì • ìƒíƒœ
  const [showOnlyPending, setShowOnlyPending] = useState(false)
  const [sortOrder, setSortOrder] = useState('recent')
  const [typeFilter, setTypeFilter] = useState<string[]>([])
  const [priorityFilter, setPriorityFilter] = useState<string[]>([])

  // ë¡œê·¸ì¸ ìƒíƒœ ì´ˆê¸°í™”
  useEffect(() => {
    setIsLoggedIn(isAuthenticated())
  }, [])

  // ê¸°ë³¸ í•„í„° ì¹©ë“¤ (CPER ì›Œí¬í”Œë¡œìš° ê¸°ë°˜)
  const defaultChips = [
    { 
      id: 'all',
      label: 'ëª¨ë“  í•­ëª©', 
      isDefault: true,
      conditions: [],
      count: inboxItems.length,
      icon: <InboxIcon className="w-4 h-4" />,
      color: 'gray' as const
    },
    { 
      id: 'captured',
      label: 'ìˆ˜ì§‘ë¨', 
      isDefault: true,
      conditions: [{ key: 'status', operator: 'equals' as const, value: InboxItemStatus.CAPTURED, label: 'ìƒíƒœ: ìˆ˜ì§‘ë¨' }],
      count: inboxItems.filter(i => i.status === InboxItemStatus.CAPTURED).length,
      icon: <InboxIcon className="w-4 h-4" />,
      color: 'blue' as const
    },
    { 
      id: 'clarified',
      label: 'ëª…í™•í™”ë¨', 
      isDefault: true,
      conditions: [{ key: 'status', operator: 'equals' as const, value: InboxItemStatus.CLARIFIED, label: 'ìƒíƒœ: ëª…í™•í™”ë¨' }],
      count: inboxItems.filter(i => i.status === InboxItemStatus.CLARIFIED).length,
      icon: <ClockIcon className="w-4 h-4" />,
      color: 'orange' as const
    },
    { 
      id: 'organized',
      label: 'ì •ë¦¬ë¨', 
      isDefault: true,
      conditions: [{ key: 'status', operator: 'equals' as const, value: InboxItemStatus.ORGANIZED, label: 'ìƒíƒœ: ì •ë¦¬ë¨' }],
      count: inboxItems.filter(i => i.status === InboxItemStatus.ORGANIZED).length,
      icon: <CheckCircleIcon className="w-4 h-4" />,
      color: 'green' as const
    },
    { 
      id: 'urgent',
      label: 'ê¸´ê¸‰', 
      isDefault: true,
      conditions: [{ key: 'priority', operator: 'equals' as const, value: InboxItemPriority.URGENT, label: 'ìš°ì„ ìˆœìœ„: ê¸´ê¸‰' }],
      count: inboxItems.filter(i => i.priority === InboxItemPriority.URGENT).length,
      icon: <ExclamationTriangleIcon className="w-4 h-4" />,
      color: 'red' as const
    },
  ]

  // í•„í„°ë§ëœ ìˆ˜ì§‘í•¨ í•­ëª©
  const filteredItems = inboxItems.filter(item => {
    switch (activeFilter) {
      case 'ìˆ˜ì§‘ë¨':
        return item.status === InboxItemStatus.CAPTURED
      case 'ëª…í™•í™”ë¨':
        return item.status === InboxItemStatus.CLARIFIED
      case 'ì •ë¦¬ë¨':
        return item.status === InboxItemStatus.ORGANIZED
      case 'ê¸´ê¸‰':
        return item.priority === InboxItemPriority.URGENT
      case 'ëª¨ë“  í•­ëª©':
      default:
        return true
    }
  })

  // ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì²˜ë¦¬
  useEffect(() => {
    const action = searchParams.get('action')
    if (action === 'quick-capture') {
      setIsQuickCaptureOpen(true)
      router.replace('/inbox')
    }
  }, [searchParams, router])

  const handleQuickCapture = () => {
    setIsQuickCaptureOpen(true)
  }

  const handleSubmitQuickCapture = () => {
    if (!quickCaptureText.trim()) return

    // ìƒˆ í•­ëª© ìƒì„± (ëª©ì—…)
    const newItem: InboxItem = {
      id: Date.now().toString(),
      title: quickCaptureText.trim(),
      content: quickCaptureText.trim(),
      type: InboxItemType.QUICK_NOTE,
      status: InboxItemStatus.CAPTURED,
      priority: InboxItemPriority.MEDIUM,
      source: 'manual',
      captureContext: {
        timestamp: new Date().toISOString()
      },
      attachments: [],
      relatedUrls: [],
      tags: [],
      userId: 'user1',
      user: { id: 'user1', name: 'ê¹€ì›Œí´ë¦¬', email: 'workly@example.com' },
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString(),
      daysSinceCapture: 0
    }

    setInboxItems(prev => [newItem, ...prev])
    setQuickCaptureText('')
    setIsQuickCaptureOpen(false)
  }

  const handleItemClick = (item: InboxItem) => {
    if (item.status === InboxItemStatus.CAPTURED || item.status === InboxItemStatus.CLARIFIED) {
      // ê³„íš ëª¨ë‹¬ ì—´ê¸°
      setSelectedItemForPlan(item)
      setIsPlanModalOpen(true)
    } else {
      router.push(`/inbox/${item.id}`)
    }
  }

  const handlePlanComplete = (processedItem: InboxItem) => {
    setInboxItems(prev => prev.map(item => 
      item.id === processedItem.id ? processedItem : item
    ))
    setSelectedItemForPlan(null)
    setIsPlanModalOpen(false)
  }

  return (
    <div className="min-h-screen bg-gray-50 pb-20">
      {/* í—¤ë” */}
      <Header title="ìˆ˜ì§‘í•¨" />
      
      {/* ë¡œê·¸ì¸ ë°°ë„ˆ (í—¤ë” ë°”ê¹¥) */}
      <LoginBanner />
      
      {/* CPER ì›Œí¬í”Œë¡œìš° ì¸ë””ì¼€ì´í„° */}
      <div className="bg-gradient-to-r from-amber-500 to-orange-500 text-white px-6 py-3">
        <div className="flex items-center justify-between">
          <div className="flex items-center space-x-3">
            <InboxIcon className="w-5 h-5" />
            <span className="font-medium">CPER ì›Œí¬í”Œë¡œìš° - ìˆ˜ì§‘(Capture) ë‹¨ê³„</span>
          </div>
          <button
            onClick={handleQuickCapture}
            className="flex items-center space-x-2 px-3 py-1 bg-white bg-opacity-20 rounded-lg hover:bg-opacity-30 transition-colors"
          >
            <PlusIcon className="w-4 h-4" />
            <span className="text-sm">ë¹ ë¥¸ ìˆ˜ì§‘</span>
          </button>
        </div>
      </div>
      
      {/* ë©”ì¸ ì½˜í…ì¸  */}
      <MainContainer>
        {/* í•„í„° ê´€ë¦¬ì - ë¡œê·¸ì¸ëœ ì‚¬ìš©ìë§Œ í‘œì‹œ */}
        {isLoggedIn && (
          <div className="mb-0">
            <FilterManager
            defaultChips={defaultChips}
            activeChipId={activeFilter}
            onChipChange={setActiveFilter}
            settingsTitle="ìˆ˜ì§‘í•¨ í•„í„° ì„¤ì •"
            settings={[
              {
                key: 'pendingOnly',
                label: 'ì²˜ë¦¬ ëŒ€ê¸° í•­ëª©ë§Œ',
                type: 'toggle',
                value: showOnlyPending,
                onChange: setShowOnlyPending
              },
              {
                key: 'type',
                label: 'í•­ëª© ìœ í˜•',
                type: 'tag-selector',
                value: typeFilter,
                options: ['quick_note', 'task_idea', 'project_idea', 'meeting_note', 'inspiration'],
                onChange: setTypeFilter
              },
              {
                key: 'priority',
                label: 'ìš°ì„ ìˆœìœ„',
                type: 'tag-selector',
                value: priorityFilter,
                options: ['urgent', 'high', 'medium', 'low'],
                onChange: setPriorityFilter
              },
              {
                key: 'sort',
                label: 'ì •ë ¬ ê¸°ì¤€',
                type: 'select',
                value: sortOrder,
                options: ['recent', 'priority', 'type', 'status'],
                onChange: setSortOrder
              }
            ]}
            getChipCount={(conditions) => {
              let filteredItems = inboxItems
              
              conditions.forEach(condition => {
                switch (condition.key) {
                  case 'status':
                    filteredItems = filteredItems.filter(i => i.status === condition.value)
                    break
                  case 'priority':
                    filteredItems = filteredItems.filter(i => i.priority === condition.value)
                    break
                }
              })
              
              return filteredItems.length
            }}
            />
          </div>
        )}

        {/* ìˆ˜ì§‘í•¨ í•­ëª© ëª©ë¡ */}
        <div className="bg-white border border-gray-200 overflow-hidden">
          {isLoading ? (
            <div className="p-8 text-center">
              <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mx-auto"></div>
              <p className="text-gray-500 mt-2">ìˆ˜ì§‘í•¨ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
            </div>
          ) : filteredItems.length === 0 ? (
            <div className="p-8 text-center">
              <InboxIcon className="w-16 h-16 text-gray-400 mx-auto mb-4" />
              <h3 className="text-lg font-medium text-gray-600 mb-1">ìˆ˜ì§‘í•¨ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤</h3>
              <p className="text-gray-500 text-sm mb-4">ì•„ì´ë””ì–´ë‚˜ í•  ì¼ì„ ë¹ ë¥´ê²Œ ìˆ˜ì§‘í•´ë³´ì„¸ìš”!</p>
              <button
                onClick={handleQuickCapture}
                className="inline-flex items-center space-x-2 px-4 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600"
              >
                <PlusIcon className="w-4 h-4" />
                <span>ë¹ ë¥¸ ìˆ˜ì§‘</span>
              </button>
            </div>
          ) : (
            <div className="divide-y divide-gray-100">
              {filteredItems.map((item) => (
                <InboxItemCard
                  key={item.id}
                  item={item}
                  onClick={() => handleItemClick(item)}
                />
              ))}
            </div>
          )}
        </div>
      </MainContainer>
      
      {/* ì›Œí´ë¦¬ í”Œë¡œíŒ… ì•¡ì…˜ ë²„íŠ¼ */}
      <WorklyFloatingActionButton 
        onTaskCreated={(task) => {
          console.log('CPER ì—…ë¬´ ìƒì„±:', task)
          // TODO: ìˆ˜ì§‘í•¨ì—ì„œ ì—…ë¬´ ìƒì„± ë¡œì§ êµ¬í˜„
        }}
        onInboxItemCreated={(inboxItem) => {
          console.log('ë¹ ë¥¸ ìˆ˜ì§‘:', inboxItem)
          // ìˆ˜ì§‘í•¨ í˜ì´ì§€ì—ì„œëŠ” ë¹ ë¥¸ ìˆ˜ì§‘ì´ ë°”ë¡œ ëª©ë¡ì— ì¶”ê°€ë˜ì–´ì•¼ í•¨
          setInboxItems(prev => [inboxItem, ...prev])
        }}
      />

      {/* ë¹ ë¥¸ ìˆ˜ì§‘ ëª¨ë‹¬ */}
      {isQuickCaptureOpen && (
        <div className="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-25">
          <div className="bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <div className="flex items-center space-x-2 mb-4">
              <InboxIcon className="w-5 h-5 text-amber-600" />
              <h3 className="text-lg font-semibold">ë¹ ë¥¸ ìˆ˜ì§‘</h3>
            </div>
            <textarea
              value={quickCaptureText}
              onChange={(e) => setQuickCaptureText(e.target.value)}
              placeholder="ë– ì˜¤ë¥¸ ì•„ì´ë””ì–´ë‚˜ í•  ì¼ì„ ì…ë ¥í•˜ì„¸ìš”..."
              className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent resize-none"
              rows={4}
              autoFocus
            />
            <div className="flex justify-end space-x-3 mt-4">
              <button
                onClick={() => setIsQuickCaptureOpen(false)}
                className="px-4 py-2 text-gray-600 hover:text-gray-800"
              >
                ì·¨ì†Œ
              </button>
              <button
                onClick={handleSubmitQuickCapture}
                disabled={!quickCaptureText.trim()}
                className="px-4 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed"
              >
                ìˆ˜ì§‘í•˜ê¸°
              </button>
            </div>
          </div>
        </div>
      )}

      {/* ê³„íš ì›Œí¬í”Œë¡œìš° ëª¨ë‹¬ */}
      {selectedItemForPlan && (
        <PlanWorkflowModal
          isOpen={isPlanModalOpen}
          onClose={() => {
            setIsPlanModalOpen(false)
            setSelectedItemForPlan(null)
          }}
          inboxItem={selectedItemForPlan}
          onProcessComplete={handlePlanComplete}
        />
      )}
    </div>
  )
}
</file>

<file path="frontend/src/app/profile/page.tsx">
'use client'

import { useState } from 'react'
import { 
  UserIcon,
  ChartBarIcon,
  StarIcon,
  TrophyIcon,
  FireIcon,
  UsersIcon,
  ChevronRightIcon,
  ClockIcon,
  FolderIcon,
  DocumentTextIcon
} from '@heroicons/react/24/outline'
import {
  TrophyIcon as TrophyIconSolid,
  StarIcon as StarIconSolid
} from '@heroicons/react/24/solid'
import Header from '@/components/layout/Header'
import MainContainer from '@/components/layout/MainContainer'
import WorklyFloatingActionButton from '@/components/ui/WorklyFloatingActionButton'
import LoginBanner from '@/components/ui/LoginBanner'
import ReviewWorkflowDashboard from '@/components/workflow/ReviewWorkflowDashboard'

// ëª©ì—… ì‚¬ìš©ì ë°ì´í„°
const mockUser = {
  id: 'user1',
  name: 'ê¹€ì›Œí´ë¦¬',
  email: 'workly@example.com',
  avatar: null,
  joinedAt: new Date(Date.now() - 365 * 24 * 60 * 60 * 1000).toISOString(),
  worklyMethodologyAdoption: '85%',
  cperCyclesCompleted: 24,
  totalTasksCompleted: 156,
  currentStreak: 7,
  // ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ë°ì´í„°
  level: 12,
  currentXP: 2850,
  nextLevelXP: 3200,
  reputation: 1425,
  totalBadges: 8,
  currentSeason: 'Q4 - ë¹„ì „ê°€ ì‹œì¦Œ',
  seasonRank: 156,
  totalUsers: 2847,
  followers: 23,
  following: 18
}

// ëª©ì—… ì—…ì /ë°°ì§€ ë°ì´í„°
const mockBadges = [
  { id: 1, name: 'ì²« ê±¸ìŒ', description: 'ì²« ë²ˆì§¸ ì—…ë¬´ ì™„ë£Œ', icon: 'ğŸ¯', rarity: 'common', earned: true },
  { id: 2, name: 'ì—°ì† ë„ì „ì', description: '7ì¼ ì—°ì† ì—…ë¬´ ì™„ë£Œ', icon: 'ğŸ”¥', rarity: 'rare', earned: true },
  { id: 3, name: 'í˜‘ì—…ì˜ ë‹¬ì¸', description: '10ê°œ í”„ë¡œì íŠ¸ ì™„ë£Œ', icon: 'ğŸ¤', rarity: 'epic', earned: true },
  { id: 4, name: 'ì§€ì‹ ë‚˜ëˆ”ì´', description: 'ìœ„í‚¤ ë¬¸ì„œ 5ê°œ ì‘ì„±', icon: 'ğŸ“š', rarity: 'rare', earned: false }
]

// ëª©ì—… ìŠ¤í‚¬ ë°ì´í„°
const mockSkills = [
  { name: 'UX ë””ìì¸', level: 8, progress: 75, category: 'Design' },
  { name: 'í”„ë¡œì íŠ¸ ê´€ë¦¬', level: 6, progress: 40, category: 'Management' },
  { name: 'React ê°œë°œ', level: 9, progress: 20, category: 'Development' },
  { name: 'ë°ì´í„° ë¶„ì„', level: 4, progress: 85, category: 'Analysis' }
]

// ëª©ì—… ìµœê·¼ í™œë™ ë°ì´í„°
const mockRecentActivities = [
  { id: 1, type: 'task', title: 'ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ë¦¬ë·° ì™„ë£Œ', time: '2ì‹œê°„ ì „', xp: 50 },
  { id: 2, type: 'project', title: 'ì›Œí´ë¦¬ í”„ë¡ íŠ¸ì—”ë“œ í”„ë¡œì íŠ¸ ì°¸ì—¬', time: '1ì¼ ì „', xp: 100 },
  { id: 3, type: 'badge', title: 'í˜‘ì—…ì˜ ë‹¬ì¸ ë°°ì§€ íšë“', time: '3ì¼ ì „', xp: 200 },
  { id: 4, type: 'wiki', title: 'React ìµœì í™” ê°€ì´ë“œ ì‘ì„±', time: '1ì£¼ ì „', xp: 75 }
]

// í”„ë¡œí•„ í˜ì´ì§€ëŠ” í™œë™ ê¸°ëŠ¥ì— ì§‘ì¤‘

export default function ProfilePage() {
  const [showReviewDashboard, setShowReviewDashboard] = useState(false)

  const handleLogout = () => {
    console.log('ë¡œê·¸ì•„ì›ƒ')
    // TODO: ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬
  }

  if (showReviewDashboard) {
    return (
      <div className="min-h-screen bg-gray-50">
        <Header title="ì£¼ê°„ ë¦¬ë·°" />
        <LoginBanner />
        <MainContainer>
          <div className="mb-4">
            <button
              onClick={() => setShowReviewDashboard(false)}
              className="px-3 py-1 text-sm bg-gray-600 text-white rounded-lg hover:bg-gray-700"
            >
              â† í”„ë¡œí•„ë¡œ ëŒì•„ê°€ê¸°
            </button>
          </div>
          <ReviewWorkflowDashboard />
        </MainContainer>
      </div>
    )
  }

  return (
    <div className="min-h-screen bg-gray-50 pb-20">
      {/* í—¤ë” */}
      <Header title="í”„ë¡œí•„" />
      
      {/* ë¡œê·¸ì¸ ë°°ë„ˆ (í—¤ë” ë°”ê¹¥) */}
      <LoginBanner />
      
      {/* ë©”ì¸ ì½˜í…ì¸  */}
      <MainContainer>
        {/* ì‚¬ìš©ì ì •ë³´ ì¹´ë“œ */}
        <div className="bg-white rounded-lg border p-6 mb-6">
          <div className="flex items-center space-x-4 mb-4">
            <div className="w-16 h-16 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center">
              {mockUser.avatar ? (
                <img 
                  src={mockUser.avatar} 
                  alt={mockUser.name}
                  className="w-16 h-16 rounded-full object-cover"
                />
              ) : (
                <UserIcon className="w-8 h-8 text-white" />
              )}
            </div>
            <div>
              <h2 className="text-xl font-bold text-gray-900">{mockUser.name}</h2>
              <p className="text-gray-600">{mockUser.email}</p>
              <p className="text-sm text-gray-500">
                {new Date(mockUser.joinedAt).toLocaleDateString('ko-KR')}ë¶€í„° ì›Œí´ë¦¬ ì‚¬ìš©
              </p>
            </div>
          </div>
          
          {/* ì›Œí´ë¦¬ ë°©ë²•ë¡  í†µê³„ */}
          <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mt-6">
            <div className="text-center">
              <div className="text-2xl font-bold text-blue-600">{mockUser.worklyMethodologyAdoption}</div>
              <div className="text-sm text-gray-500">ë°©ë²•ë¡  í™œìš©ë„</div>
            </div>
            <div className="text-center">
              <div className="text-2xl font-bold text-green-600">{mockUser.cperCyclesCompleted}</div>
              <div className="text-sm text-gray-500">CPER ì‚¬ì´í´</div>
            </div>
            <div className="text-center">
              <div className="text-2xl font-bold text-purple-600">{mockUser.totalTasksCompleted}</div>
              <div className="text-sm text-gray-500">ì™„ë£Œí•œ ì—…ë¬´</div>
            </div>
            <div className="text-center">
              <div className="text-2xl font-bold text-amber-600">{mockUser.currentStreak}</div>
              <div className="text-sm text-gray-500">ì—°ì† ì‹¤í–‰ ì¼</div>
            </div>
          </div>
        </div>

        {/* CPER ë¦¬ë·° ì„¹ì…˜ */}
        <div className="bg-white rounded-lg border p-6 mb-6">
          <div className="flex items-center justify-between mb-4">
            <div>
              <h3 className="text-lg font-semibold text-gray-900">CPER ì›Œí¬í”Œë¡œìš° ë¦¬ë·°</h3>
              <p className="text-gray-600 text-sm">ì£¼ê°„ ì„±ê³¼ë¥¼ ë¶„ì„í•˜ê³  ê°œì„ ì ì„ ì°¾ì•„ë³´ì„¸ìš”</p>
            </div>
            <button
              onClick={() => setShowReviewDashboard(true)}
              className="flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700"
            >
              <ChartBarIcon className="w-4 h-4" />
              <span>ë¦¬ë·° ì‹œì‘</span>
            </button>
          </div>
          
          {/* ê°„ë‹¨í•œ ë¯¸ë¦¬ë³´ê¸° */}
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div className="bg-blue-50 rounded-lg p-4">
              <div className="text-blue-600 font-semibold text-sm mb-1">ì´ë²ˆ ì£¼ ì™„ë£Œìœ¨</div>
              <div className="text-2xl font-bold text-blue-900">78%</div>
            </div>
            <div className="bg-green-50 rounded-lg p-4">
              <div className="text-green-600 font-semibold text-sm mb-1">ì§‘ì¤‘ ì‹œê°„</div>
              <div className="text-2xl font-bold text-green-900">18.2h</div>
            </div>
            <div className="bg-purple-50 rounded-lg p-4">
              <div className="text-purple-600 font-semibold text-sm mb-1">ìƒì‚°ì„± ì§€ìˆ˜</div>
              <div className="text-2xl font-bold text-purple-900">85</div>
            </div>
          </div>
        </div>

        {/* ì„±ì¥ ì‹œìŠ¤í…œ ëŒ€ì‹œë³´ë“œ */}
        <div className="bg-white rounded-lg border p-6 mb-6">
          <div className="flex items-center justify-between mb-4">
            <div>
              <h3 className="text-lg font-semibold text-gray-900">ì„±ì¥ ì‹œìŠ¤í…œ</h3>
              <p className="text-gray-600 text-sm">ë ˆë²¨, ê²½í—˜ì¹˜, ì—…ì ì„ í™•ì¸í•˜ì„¸ìš”</p>
            </div>
            <div className="flex items-center space-x-2 text-amber-600">
              <TrophyIconSolid className="w-5 h-5" />
              <span className="font-bold">Level {mockUser.level}</span>
            </div>
          </div>
          
          {/* XP ì§„í–‰ë¥  ë°” */}
          <div className="mb-6">
            <div className="flex justify-between items-center mb-2">
              <span className="text-sm font-medium text-gray-600">ê²½í—˜ì¹˜ (XP)</span>
              <span className="text-sm text-gray-500">{mockUser.currentXP} / {mockUser.nextLevelXP}</span>
            </div>
            <div className="w-full bg-gray-200 rounded-full h-3">
              <div 
                className="bg-gradient-to-r from-blue-400 to-blue-600 h-3 rounded-full transition-all duration-300"
                style={{ width: `${(mockUser.currentXP / mockUser.nextLevelXP) * 100}%` }}
              ></div>
            </div>
            <p className="text-xs text-gray-500 mt-1">ë‹¤ìŒ ë ˆë²¨ê¹Œì§€ {mockUser.nextLevelXP - mockUser.currentXP} XP</p>
          </div>

          {/* í•µì‹¬ ì§€í‘œ */}
          <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
            <div className="text-center p-3 bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg">
              <div className="flex items-center justify-center mb-2">
                <StarIconSolid className="w-6 h-6 text-purple-600" />
              </div>
              <div className="text-xl font-bold text-purple-700">{mockUser.reputation}</div>
              <div className="text-xs text-purple-600">í‰íŒ ì ìˆ˜</div>
            </div>
            <div className="text-center p-3 bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg">
              <div className="flex items-center justify-center mb-2">
                <TrophyIconSolid className="w-6 h-6 text-amber-600" />
              </div>
              <div className="text-xl font-bold text-amber-700">{mockUser.totalBadges}</div>
              <div className="text-xs text-amber-600">íšë“ ë°°ì§€</div>
            </div>
            <div className="text-center p-3 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg">
              <div className="flex items-center justify-center mb-2">
                <FireIcon className="w-6 h-6 text-blue-600" />
              </div>
              <div className="text-xl font-bold text-blue-700">{mockUser.seasonRank}</div>
              <div className="text-xs text-blue-600">ì‹œì¦Œ ìˆœìœ„</div>
            </div>
            <div className="text-center p-3 bg-gradient-to-br from-green-50 to-green-100 rounded-lg">
              <div className="flex items-center justify-center mb-2">
                <UsersIcon className="w-6 h-6 text-green-600" />
              </div>
              <div className="text-xl font-bold text-green-700">{mockUser.followers}</div>
              <div className="text-xs text-green-600">íŒ”ë¡œì›Œ</div>
            </div>
          </div>
        </div>

        {/* ì—…ì  ë° ë°°ì§€ */}
        <div className="bg-white rounded-lg border p-6 mb-6">
          <div className="flex items-center justify-between mb-4">
            <div>
              <h3 className="text-lg font-semibold text-gray-900">ì—…ì  ë° ë°°ì§€</h3>
              <p className="text-gray-600 text-sm">ë‹¬ì„±í•œ ì—…ì ê³¼ íšë“í•œ ë°°ì§€ë¥¼ í™•ì¸í•˜ì„¸ìš”</p>
            </div>
            <button className="text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center">
              ì „ì²´ ë³´ê¸°
              <ChevronRightIcon className="w-4 h-4 ml-1" />
            </button>
          </div>
          
          <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
            {mockBadges.map((badge) => (
              <div 
                key={badge.id}
                className={`p-4 rounded-lg border-2 transition-all ${
                  badge.earned 
                    ? 'border-gray-200 bg-white shadow-sm' 
                    : 'border-dashed border-gray-300 bg-gray-50 opacity-60'
                }`}
              >
                <div className="text-center">
                  <div className="text-3xl mb-2">{badge.icon}</div>
                  <div className={`font-semibold text-sm ${badge.earned ? 'text-gray-900' : 'text-gray-500'}`}>
                    {badge.name}
                  </div>
                  <div className={`text-xs mt-1 ${badge.earned ? 'text-gray-600' : 'text-gray-400'}`}>
                    {badge.description}
                  </div>
                  <div className={`inline-block px-2 py-1 mt-2 rounded-full text-xs font-medium ${
                    badge.rarity === 'epic' ? 'bg-purple-100 text-purple-700' :
                    badge.rarity === 'rare' ? 'bg-blue-100 text-blue-700' :
                    'bg-gray-100 text-gray-700'
                  }`}>
                    {badge.rarity === 'epic' ? 'ì „ì„¤' : badge.rarity === 'rare' ? 'í¬ê·€' : 'ì¼ë°˜'}
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>

        {/* ìŠ¤í‚¬ íŠ¸ë¦¬ */}
        <div className="bg-white rounded-lg border p-6 mb-6">
          <div className="flex items-center justify-between mb-4">
            <div>
              <h3 className="text-lg font-semibold text-gray-900">ìŠ¤í‚¬ íŠ¸ë¦¬</h3>
              <p className="text-gray-600 text-sm">ì „ë¬¸ ë¶„ì•¼ë³„ ì—­ëŸ‰ ê°œë°œ í˜„í™©</p>
            </div>
            <button className="text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center">
              ìƒì„¸ ë³´ê¸°
              <ChevronRightIcon className="w-4 h-4 ml-1" />
            </button>
          </div>
          
          <div className="space-y-4">
            {mockSkills.map((skill, index) => (
              <div key={index} className="border rounded-lg p-4">
                <div className="flex items-center justify-between mb-2">
                  <div>
                    <span className="font-semibold text-gray-900">{skill.name}</span>
                    <span className="ml-2 px-2 py-1 bg-gray-100 rounded-full text-xs text-gray-600">
                      {skill.category}
                    </span>
                  </div>
                  <div className="text-right">
                    <div className="text-lg font-bold text-blue-600">Lv.{skill.level}</div>
                  </div>
                </div>
                <div className="flex items-center">
                  <div className="flex-1 bg-gray-200 rounded-full h-2 mr-3">
                    <div 
                      className="bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300"
                      style={{ width: `${skill.progress}%` }}
                    ></div>
                  </div>
                  <span className="text-sm text-gray-500 w-12">{skill.progress}%</span>
                </div>
              </div>
            ))}
          </div>
        </div>

        {/* ì‹œì¦Œ ë° ë¦¬ë”ë³´ë“œ */}
        <div className="bg-white rounded-lg border p-6 mb-6">
          <div className="flex items-center justify-between mb-4">
            <div>
              <h3 className="text-lg font-semibold text-gray-900">í˜„ì¬ ì‹œì¦Œ</h3>
              <p className="text-gray-600 text-sm">{mockUser.currentSeason}</p>
            </div>
            <div className="text-right">
              <div className="text-2xl font-bold text-indigo-600">#{mockUser.seasonRank}</div>
              <div className="text-xs text-gray-500">/ {mockUser.totalUsers}ëª…</div>
            </div>
          </div>
          
          <div className="bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-4">
            <div className="flex items-center justify-between">
              <div>
                <div className="font-semibold text-indigo-900">ë¹„ì „ê°€ ì‹œì¦Œ ë„ì „ê³¼ì œ</div>
                <div className="text-sm text-indigo-700 mt-1">íšŒê³ ì™€ ì¥ê¸° ëª©í‘œ ì„¤ì •ì— ì§‘ì¤‘í•˜ì„¸ìš”</div>
              </div>
              <div className="text-3xl">ğŸŒŸ</div>
            </div>
          </div>
        </div>

        {/* ìµœê·¼ í™œë™ */}
        <div className="bg-white rounded-lg border p-6 mb-6">
          <div className="flex items-center justify-between mb-4">
            <div>
              <h3 className="text-lg font-semibold text-gray-900">ìµœê·¼ í™œë™</h3>
              <p className="text-gray-600 text-sm">ìµœê·¼ ì™„ë£Œí•œ ì—…ë¬´ì™€ ì°¸ì—¬í•œ í™œë™ë“¤</p>
            </div>
            <button className="text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center">
              ì „ì²´ íˆìŠ¤í† ë¦¬
              <ChevronRightIcon className="w-4 h-4 ml-1" />
            </button>
          </div>
          
          <div className="space-y-3">
            {mockRecentActivities.map((activity) => (
              <div key={activity.id} className="flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg transition-colors">
                <div className="flex items-center space-x-3">
                  <div className={`w-8 h-8 rounded-full flex items-center justify-center ${
                    activity.type === 'task' ? 'bg-blue-100' :
                    activity.type === 'project' ? 'bg-green-100' :
                    activity.type === 'badge' ? 'bg-purple-100' :
                    'bg-amber-100'
                  }`}>
                    {activity.type === 'task' && <ClockIcon className="w-4 h-4 text-blue-600" />}
                    {activity.type === 'project' && <FolderIcon className="w-4 h-4 text-green-600" />}
                    {activity.type === 'badge' && <TrophyIcon className="w-4 h-4 text-purple-600" />}
                    {activity.type === 'wiki' && <DocumentTextIcon className="w-4 h-4 text-amber-600" />}
                  </div>
                  <div>
                    <div className="font-medium text-gray-900">{activity.title}</div>
                    <div className="text-sm text-gray-500">{activity.time}</div>
                  </div>
                </div>
                <div className="text-right">
                  <div className="text-sm font-semibold text-amber-600">+{activity.xp} XP</div>
                </div>
              </div>
            ))}
          </div>
        </div>

        {/* ì†Œì…œ ë„¤íŠ¸ì›Œí¬ */}
        <div className="bg-white rounded-lg border p-6 mb-6">
          <div className="flex items-center justify-between mb-4">
            <div>
              <h3 className="text-lg font-semibold text-gray-900">ë„¤íŠ¸ì›Œí¬</h3>
              <p className="text-gray-600 text-sm">íŒ”ë¡œì›Œì™€ íŒ”ë¡œì‰ í˜„í™©</p>
            </div>
          </div>
          
          <div className="grid grid-cols-2 gap-4">
            <div className="text-center p-4 bg-blue-50 rounded-lg">
              <div className="text-2xl font-bold text-blue-600">{mockUser.followers}</div>
              <div className="text-sm text-blue-700">íŒ”ë¡œì›Œ</div>
            </div>
            <div className="text-center p-4 bg-green-50 rounded-lg">
              <div className="text-2xl font-bold text-green-600">{mockUser.following}</div>
              <div className="text-sm text-green-700">íŒ”ë¡œì‰</div>
            </div>
          </div>
        </div>
      </MainContainer>
      
      {/* ì›Œí´ë¦¬ í”Œë¡œíŒ… ì•¡ì…˜ ë²„íŠ¼ */}
      <WorklyFloatingActionButton 
        onAddTask={() => console.log('ì—…ë¬´ ì¶”ê°€')}
        onAddProject={() => console.log('í”„ë¡œì íŠ¸ ì¶”ê°€')}
        onAddGoal={() => console.log('ëª©í‘œ ì¶”ê°€')}
      />
    </div>
  )
}
</file>

<file path="frontend/src/components/admin/AdminButton.tsx">
'use client';

import { ReactNode, ButtonHTMLAttributes } from 'react';
import PermissionGuard from './PermissionGuard';

interface AdminButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {
  /**
   * í•„ìš”í•œ ê¶Œí•œ ëª©ë¡
   */
  permissions: string | string[];
  
  /**
   * ê¶Œí•œ í™•ì¸ ëª¨ë“œ
   */
  mode?: 'all' | 'any';
  
  /**
   * ìœ„í—˜í•œ ì•¡ì…˜ì„ì„ ë‚˜íƒ€ë‚´ëŠ” ìŠ¤íƒ€ì¼ ì ìš©
   */
  variant?: 'primary' | 'secondary' | 'danger';
  
  /**
   * ë²„íŠ¼ í¬ê¸°
   */
  size?: 'sm' | 'md' | 'lg';
  
  /**
   * ë¡œë”© ìƒíƒœ
   */
  loading?: boolean;
  
  /**
   * ê¶Œí•œì´ ì—†ì„ ë•Œ ë³´ì—¬ì¤„ ë‚´ìš© (ê¸°ë³¸: ìˆ¨ê¹€)
   */
  fallback?: ReactNode;
  
  children: ReactNode;
}

/**
 * ê¶Œí•œ ê¸°ë°˜ ì–´ë“œë¯¼ ë²„íŠ¼ ì»´í¬ë„ŒíŠ¸
 * ì‚¬ìš©ìì˜ ê¶Œí•œì— ë”°ë¼ ë²„íŠ¼ì„ í‘œì‹œ/ìˆ¨ê¹€ ì²˜ë¦¬
 * 
 * @example
 * <AdminButton 
 *   permissions="admin:users:delete"
 *   variant="danger"
 *   onClick={handleDeleteUser}
 * >
 *   ì‚¬ìš©ì ì‚­ì œ
 * </AdminButton>
 */
export default function AdminButton({
  permissions,
  mode = 'all',
  variant = 'primary',
  size = 'md',
  loading = false,
  fallback,
  className = '',
  children,
  disabled,
  ...props
}: AdminButtonProps) {
  // ê¸°ë³¸ ìŠ¤íƒ€ì¼ í´ë˜ìŠ¤
  const baseClasses = [
    'inline-flex items-center justify-center font-medium rounded-md',
    'focus:outline-none focus:ring-2 focus:ring-offset-2',
    'transition-colors duration-200',
    'disabled:opacity-50 disabled:cursor-not-allowed',
  ];

  // í¬ê¸°ë³„ í´ë˜ìŠ¤
  const sizeClasses = {
    sm: 'px-3 py-1.5 text-sm',
    md: 'px-4 py-2 text-sm',
    lg: 'px-6 py-3 text-base',
  };

  // ë³€í˜•ë³„ í´ë˜ìŠ¤
  const variantClasses = {
    primary: [
      'bg-indigo-600 text-white',
      'hover:bg-indigo-700',
      'focus:ring-indigo-500',
      'disabled:bg-indigo-300',
    ].join(' '),
    secondary: [
      'bg-white text-gray-700 border border-gray-300',
      'hover:bg-gray-50',
      'focus:ring-indigo-500',
      'disabled:bg-gray-100',
    ].join(' '),
    danger: [
      'bg-red-600 text-white',
      'hover:bg-red-700',
      'focus:ring-red-500',
      'disabled:bg-red-300',
    ].join(' '),
  };

  // ìµœì¢… í´ë˜ìŠ¤ ì¡°í•©
  const buttonClasses = [
    ...baseClasses,
    sizeClasses[size],
    variantClasses[variant],
    className,
  ].join(' ');

  const buttonContent = (
    <button
      {...props}
      className={buttonClasses}
      disabled={disabled || loading}
    >
      {loading && (
        <svg
          className={`animate-spin -ml-1 mr-2 ${size === 'sm' ? 'h-3 w-3' : size === 'lg' ? 'h-5 w-5' : 'h-4 w-4'} text-current`}
          fill="none"
          viewBox="0 0 24 24"
        >
          <circle
            className="opacity-25"
            cx="12"
            cy="12"
            r="10"
            stroke="currentColor"
            strokeWidth="4"
          />
          <path
            className="opacity-75"
            fill="currentColor"
            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
          />
        </svg>
      )}
      {children}
    </button>
  );

  return (
    <PermissionGuard 
      permissions={permissions} 
      mode={mode}
      fallback={fallback}
    >
      {buttonContent}
    </PermissionGuard>
  );
}

/**
 * ì‚¬ìš©ì ì‚­ì œ ì „ìš© ë²„íŠ¼
 */
export function DeleteUserButton({
  onClick,
  loading,
  children = 'ì‚­ì œ',
  ...props
}: Omit<AdminButtonProps, 'permissions' | 'variant'> & {
  onClick?: () => void;
}) {
  return (
    <AdminButton
      permissions="admin:users:delete"
      variant="danger"
      size="sm"
      onClick={onClick}
      loading={loading}
      {...props}
    >
      {children}
    </AdminButton>
  );
}

/**
 * ì‚¬ìš©ì í¸ì§‘ ì „ìš© ë²„íŠ¼
 */
export function EditUserButton({
  onClick,
  loading,
  children = 'í¸ì§‘',
  ...props
}: Omit<AdminButtonProps, 'permissions' | 'variant'> & {
  onClick?: () => void;
}) {
  return (
    <AdminButton
      permissions="admin:users:update"
      variant="secondary"
      size="sm"
      onClick={onClick}
      loading={loading}
      {...props}
    >
      {children}
    </AdminButton>
  );
}

/**
 * í”„ë¡œì íŠ¸ ì‚­ì œ ì „ìš© ë²„íŠ¼
 */
export function DeleteProjectButton({
  onClick,
  loading,
  children = 'ì‚­ì œ',
  ...props
}: Omit<AdminButtonProps, 'permissions' | 'variant'> & {
  onClick?: () => void;
}) {
  return (
    <AdminButton
      permissions="admin:projects:delete"
      variant="danger"
      size="sm"
      onClick={onClick}
      loading={loading}
      {...props}
    >
      {children}
    </AdminButton>
  );
}
</file>

<file path="frontend/src/components/admin/AdminNavItem.tsx">
'use client';

import Link from 'next/link';
import { usePathname } from 'next/navigation';
import { ReactNode } from 'react';
import PermissionGuard from './PermissionGuard';

interface AdminNavItemProps {
  /**
   * ë§í¬ ê²½ë¡œ
   */
  href: string;
  
  /**
   * í•„ìš”í•œ ê¶Œí•œ
   */
  permissions: string | string[];
  
  /**
   * ê¶Œí•œ í™•ì¸ ëª¨ë“œ
   */
  mode?: 'all' | 'any';
  
  /**
   * ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸
   */
  icon?: React.ComponentType<{ className?: string }>;
  
  /**
   * ë±ƒì§€ í‘œì‹œ (ì•Œë¦¼ ê°œìˆ˜ ë“±)
   */
  badge?: number | string;
  
  /**
   * ì™¸ë¶€ ë§í¬ ì—¬ë¶€
   */
  external?: boolean;
  
  /**
   * ì •í™•í•œ ê²½ë¡œ ë§¤ì¹­ ì—¬ë¶€ (ê¸°ë³¸: false)
   */
  exact?: boolean;
  
  children: ReactNode;
}

/**
 * ê¶Œí•œ ê¸°ë°˜ ì–´ë“œë¯¼ ë„¤ë¹„ê²Œì´ì…˜ ì•„ì´í…œ ì»´í¬ë„ŒíŠ¸
 * ì‚¬ìš©ìì˜ ê¶Œí•œì— ë”°ë¼ ë„¤ë¹„ê²Œì´ì…˜ ì•„ì´í…œì„ í‘œì‹œ/ìˆ¨ê¹€ ì²˜ë¦¬
 * 
 * @example
 * <AdminNavItem 
 *   href="/admin/users"
 *   permissions="admin:users:read"
 *   icon={UsersIcon}
 * >
 *   ì‚¬ìš©ì ê´€ë¦¬
 * </AdminNavItem>
 */
export default function AdminNavItem({
  href,
  permissions,
  mode = 'all',
  icon: Icon,
  badge,
  external = false,
  exact = false,
  children,
}: AdminNavItemProps) {
  const pathname = usePathname();
  
  // í™œì„± ìƒíƒœ í™•ì¸
  const isActive = exact 
    ? pathname === href
    : pathname.startsWith(href);

  // ê¸°ë³¸ ìŠ¤íƒ€ì¼ í´ë˜ìŠ¤
  const baseClasses = [
    'group flex items-center px-3 py-2 text-sm font-medium rounded-md',
    'transition-colors duration-200',
  ];

  // í™œì„±/ë¹„í™œì„± ìƒíƒœ í´ë˜ìŠ¤
  const stateClasses = isActive
    ? 'bg-indigo-100 text-indigo-700'
    : 'text-gray-700 hover:bg-gray-100 hover:text-gray-900';

  // ìµœì¢… í´ë˜ìŠ¤ ì¡°í•©
  const linkClasses = [...baseClasses, stateClasses].join(' ');

  // ì•„ì´ì½˜ í´ë˜ìŠ¤
  const iconClasses = [
    'mr-3 h-5 w-5',
    isActive 
      ? 'text-indigo-500' 
      : 'text-gray-400 group-hover:text-gray-500'
  ].join(' ');

  const linkContent = (
    <div className="flex items-center justify-between w-full">
      <div className="flex items-center">
        {Icon && <Icon className={iconClasses} />}
        <span>{children}</span>
      </div>
      {badge && (
        <span className={`ml-2 inline-flex items-center justify-center px-2 py-0.5 rounded-full text-xs font-medium ${
          isActive 
            ? 'bg-indigo-200 text-indigo-800' 
            : 'bg-gray-200 text-gray-800'
        }`}>
          {badge}
        </span>
      )}
    </div>
  );

  const LinkComponent = external ? 'a' : Link;
  const linkProps = external 
    ? { href, target: '_blank', rel: 'noopener noreferrer' }
    : { href };

  return (
    <PermissionGuard permissions={permissions} mode={mode}>
      <LinkComponent {...linkProps} className={linkClasses}>
        {linkContent}
      </LinkComponent>
    </PermissionGuard>
  );
}

/**
 * ì–´ë“œë¯¼ ë„¤ë¹„ê²Œì´ì…˜ ê·¸ë£¹ ì»´í¬ë„ŒíŠ¸
 * ê´€ë ¨ëœ ë„¤ë¹„ê²Œì´ì…˜ ì•„ì´í…œë“¤ì„ ê·¸ë£¹í™”
 */
interface AdminNavGroupProps {
  /**
   * ê·¸ë£¹ ì œëª©
   */
  title: string;
  
  /**
   * ê·¸ë£¹ ì „ì²´ì— ì ìš©í•  ê¶Œí•œ (ì„ íƒì )
   */
  permissions?: string | string[];
  
  /**
   * ê¶Œí•œ í™•ì¸ ëª¨ë“œ
   */
  mode?: 'all' | 'any';
  
  /**
   * ì ‘í ìˆ˜ ìˆëŠ” ê·¸ë£¹ ì—¬ë¶€
   */
  collapsible?: boolean;
  
  /**
   * ì´ˆê¸° ì ‘í˜ ìƒíƒœ (collapsibleì´ trueì¼ ë•Œë§Œ ì ìš©)
   */
  defaultCollapsed?: boolean;
  
  children: ReactNode;
}

export function AdminNavGroup({
  title,
  permissions,
  mode = 'all',
  collapsible = false,
  defaultCollapsed = false,
  children,
}: AdminNavGroupProps) {
  const [isCollapsed, setIsCollapsed] = React.useState(defaultCollapsed);

  const groupContent = (
    <div className="mb-4">
      <div className="flex items-center justify-between mb-2">
        <h3 className="px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider">
          {title}
        </h3>
        {collapsible && (
          <button
            onClick={() => setIsCollapsed(!isCollapsed)}
            className="p-1 text-gray-400 hover:text-gray-600"
          >
            <svg
              className={`h-4 w-4 transform transition-transform ${
                isCollapsed ? 'rotate-0' : 'rotate-180'
              }`}
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                strokeLinecap="round"
                strokeLinejoin="round"
                strokeWidth={2}
                d="M19 9l-7 7-7-7"
              />
            </svg>
          </button>
        )}
      </div>
      {(!collapsible || !isCollapsed) && (
        <div className="space-y-1">
          {children}
        </div>
      )}
    </div>
  );

  return permissions ? (
    <PermissionGuard permissions={permissions} mode={mode}>
      {groupContent}
    </PermissionGuard>
  ) : (
    groupContent
  );
}

// React import for useState
import React from 'react';
</file>

<file path="frontend/src/components/admin/index.ts">
// ì–´ë“œë¯¼ ì»´í¬ë„ŒíŠ¸ í†µí•© ë‚´ë³´ë‚´ê¸°
export { default as PermissionGuard, usePermissions } from './PermissionGuard';
export { 
  default as AdminButton,
  DeleteUserButton,
  EditUserButton,
  DeleteProjectButton,
} from './AdminButton';
export { 
  default as AdminNavItem,
  AdminNavGroup,
} from './AdminNavItem';

// ê¶Œí•œ ìƒìˆ˜ë“¤
export const ADMIN_PERMISSIONS = {
  // ì‚¬ìš©ì ê´€ë¦¬
  USERS_READ: 'admin:users:read',
  USERS_CREATE: 'admin:users:create',
  USERS_UPDATE: 'admin:users:update',
  USERS_DELETE: 'admin:users:delete',
  
  // ì—­í•  ê´€ë¦¬
  ROLES_MANAGE: 'admin:roles:manage',
  
  // í”„ë¡œì íŠ¸ ê´€ë¦¬
  PROJECTS_READ: 'admin:projects:read',
  PROJECTS_CREATE: 'admin:projects:create',
  PROJECTS_UPDATE: 'admin:projects:update',
  PROJECTS_DELETE: 'admin:projects:delete',
  
  // ì—…ë¬´ ê´€ë¦¬
  TASKS_READ: 'admin:tasks:read',
  TASKS_CREATE: 'admin:tasks:create',
  TASKS_UPDATE: 'admin:tasks:update',
  TASKS_DELETE: 'admin:tasks:delete',
  
  // ì‹œìŠ¤í…œ ì„¤ì •
  SETTINGS_READ: 'admin:settings:read',
  SETTINGS_UPDATE: 'admin:settings:update',
  
  // ê°ì‚¬ ë¡œê·¸
  AUDIT_READ: 'admin:audit:read',
  
  // ëŒ€ì‹œë³´ë“œ
  DASHBOARD_READ: 'admin:dashboard:read',
  
  // í”„ë¡œí•„ ê´€ë¦¬
  PROFILE_READ: 'admin:profile:read',
  PROFILE_UPDATE: 'admin:profile:update',
} as const;

// ì—­í• ë³„ ê¸°ë³¸ ê¶Œí•œ ê·¸ë£¹ (ì½ê¸° ì „ìš©)
export const ROLE_PERMISSION_GROUPS = {
  SUPER_ADMIN: Object.values(ADMIN_PERMISSIONS),
  
  ADMIN: [
    ADMIN_PERMISSIONS.USERS_READ,
    ADMIN_PERMISSIONS.USERS_CREATE,
    ADMIN_PERMISSIONS.USERS_UPDATE,
    ADMIN_PERMISSIONS.PROJECTS_READ,
    ADMIN_PERMISSIONS.PROJECTS_CREATE,
    ADMIN_PERMISSIONS.PROJECTS_UPDATE,
    ADMIN_PERMISSIONS.PROJECTS_DELETE,
    ADMIN_PERMISSIONS.TASKS_READ,
    ADMIN_PERMISSIONS.TASKS_CREATE,
    ADMIN_PERMISSIONS.TASKS_UPDATE,
    ADMIN_PERMISSIONS.TASKS_DELETE,
    ADMIN_PERMISSIONS.SETTINGS_READ,
    ADMIN_PERMISSIONS.AUDIT_READ,
    ADMIN_PERMISSIONS.DASHBOARD_READ,
    ADMIN_PERMISSIONS.PROFILE_READ,
    ADMIN_PERMISSIONS.PROFILE_UPDATE,
  ],
  
  MODERATOR: [
    ADMIN_PERMISSIONS.USERS_READ,
    ADMIN_PERMISSIONS.USERS_UPDATE,
    ADMIN_PERMISSIONS.PROJECTS_READ,
    ADMIN_PERMISSIONS.PROJECTS_UPDATE,
    ADMIN_PERMISSIONS.TASKS_READ,
    ADMIN_PERMISSIONS.TASKS_UPDATE,
    ADMIN_PERMISSIONS.DASHBOARD_READ,
    ADMIN_PERMISSIONS.PROFILE_READ,
    ADMIN_PERMISSIONS.PROFILE_UPDATE,
  ],
  
  SUPPORT: [
    ADMIN_PERMISSIONS.USERS_READ,
    ADMIN_PERMISSIONS.PROJECTS_READ,
    ADMIN_PERMISSIONS.TASKS_READ,
    ADMIN_PERMISSIONS.DASHBOARD_READ,
    ADMIN_PERMISSIONS.PROFILE_READ,
  ],
} as const;

// ê¶Œí•œ ê·¸ë£¹ ìœ í‹¸ë¦¬í‹°
export const PERMISSION_GROUPS = {
  USER_MANAGEMENT: [
    ADMIN_PERMISSIONS.USERS_READ,
    ADMIN_PERMISSIONS.USERS_CREATE,
    ADMIN_PERMISSIONS.USERS_UPDATE,
    ADMIN_PERMISSIONS.USERS_DELETE,
    ADMIN_PERMISSIONS.ROLES_MANAGE,
  ],
  
  PROJECT_MANAGEMENT: [
    ADMIN_PERMISSIONS.PROJECTS_READ,
    ADMIN_PERMISSIONS.PROJECTS_CREATE,
    ADMIN_PERMISSIONS.PROJECTS_UPDATE,
    ADMIN_PERMISSIONS.PROJECTS_DELETE,
  ],
  
  TASK_MANAGEMENT: [
    ADMIN_PERMISSIONS.TASKS_READ,
    ADMIN_PERMISSIONS.TASKS_CREATE,
    ADMIN_PERMISSIONS.TASKS_UPDATE,
    ADMIN_PERMISSIONS.TASKS_DELETE,
  ],
  
  SYSTEM_ADMINISTRATION: [
    ADMIN_PERMISSIONS.SETTINGS_READ,
    ADMIN_PERMISSIONS.SETTINGS_UPDATE,
    ADMIN_PERMISSIONS.AUDIT_READ,
  ],
  
  BASIC_ACCESS: [
    ADMIN_PERMISSIONS.DASHBOARD_READ,
    ADMIN_PERMISSIONS.PROFILE_READ,
    ADMIN_PERMISSIONS.PROFILE_UPDATE,
  ],
} as const;
</file>

<file path="frontend/src/components/admin/PermissionGuard.tsx">
'use client';

import { ReactNode } from 'react';
import { useAuthStore } from '@/lib/stores/authStore';

interface PermissionGuardProps {
  /**
   * í•„ìš”í•œ ê¶Œí•œ ëª©ë¡
   * ë°°ì—´ë¡œ ì „ë‹¬í•˜ë©´ AND ì¡°ê±´ (ëª¨ë“  ê¶Œí•œ í•„ìš”)
   * ë¬¸ìì—´ë¡œ ì „ë‹¬í•˜ë©´ í•´ë‹¹ ê¶Œí•œë§Œ í™•ì¸
   */
  permissions: string | string[];
  
  /**
   * ê¶Œí•œ í™•ì¸ ëª¨ë“œ
   * 'all': ëª¨ë“  ê¶Œí•œì´ ìˆì–´ì•¼ í•¨ (ê¸°ë³¸ê°’)
   * 'any': í•˜ë‚˜ ì´ìƒì˜ ê¶Œí•œì´ ìˆìœ¼ë©´ ë¨
   */
  mode?: 'all' | 'any';
  
  /**
   * ê¶Œí•œì´ ì—†ì„ ë•Œ ë³´ì—¬ì¤„ ì»´í¬ë„ŒíŠ¸
   * ê¸°ë³¸ì ìœ¼ë¡œ ì•„ë¬´ê²ƒë„ ë Œë”ë§í•˜ì§€ ì•ŠìŒ
   */
  fallback?: ReactNode;
  
  /**
   * ìŠˆí¼ ê´€ë¦¬ìëŠ” ëª¨ë“  ê¶Œí•œì„ ê°€ì§„ ê²ƒìœ¼ë¡œ ì²˜ë¦¬í• ì§€ ì—¬ë¶€
   */
  allowSuperAdmin?: boolean;
  
  children: ReactNode;
}

/**
 * ì‚¬ìš©ìì˜ ê¶Œí•œì— ë”°ë¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ì¡°ê±´ë¶€ë¡œ ë Œë”ë§í•˜ëŠ” ê°€ë“œ ì»´í¬ë„ŒíŠ¸
 * 
 * @example
 * // ë‹¨ì¼ ê¶Œí•œ í™•ì¸
 * <PermissionGuard permissions="admin:users:read">
 *   <UserList />
 * </PermissionGuard>
 * 
 * @example
 * // ì—¬ëŸ¬ ê¶Œí•œ í™•ì¸ (ëª¨ë“  ê¶Œí•œ í•„ìš”)
 * <PermissionGuard permissions={["admin:users:read", "admin:users:update"]}>
 *   <UserEditForm />
 * </PermissionGuard>
 * 
 * @example
 * // ì—¬ëŸ¬ ê¶Œí•œ ì¤‘ í•˜ë‚˜ë§Œ ìˆìœ¼ë©´ ë¨
 * <PermissionGuard 
 *   permissions={["admin:users:read", "admin:projects:read"]} 
 *   mode="any"
 * >
 *   <Dashboard />
 * </PermissionGuard>
 * 
 * @example
 * // ê¶Œí•œì´ ì—†ì„ ë•Œ ëŒ€ì²´ ì»´í¬ë„ŒíŠ¸ í‘œì‹œ
 * <PermissionGuard 
 *   permissions="admin:users:delete"
 *   fallback={<span className="text-gray-400">ê¶Œí•œ ì—†ìŒ</span>}
 * >
 *   <DeleteButton />
 * </PermissionGuard>
 */
export default function PermissionGuard({
  permissions,
  mode = 'all',
  fallback = null,
  allowSuperAdmin = true,
  children,
}: PermissionGuardProps) {
  const { user } = useAuthStore();

  // ë¡œê·¸ì¸í•˜ì§€ ì•Šì•˜ê±°ë‚˜ ì–´ë“œë¯¼ ê¶Œí•œì´ ì—†ëŠ” ê²½ìš°
  if (!user || !user.adminRole) {
    return <>{fallback}</>;
  }

  // ìŠˆí¼ ê´€ë¦¬ìëŠ” ëª¨ë“  ê¶Œí•œì„ ê°€ì§„ ê²ƒìœ¼ë¡œ ì²˜ë¦¬
  if (allowSuperAdmin && user.adminRole === 'super_admin') {
    return <>{children}</>;
  }

  // ê¶Œí•œ ëª©ë¡ì„ ë°°ì—´ë¡œ ì •ê·œí™”
  const requiredPermissions = Array.isArray(permissions) ? permissions : [permissions];
  
  // ì‚¬ìš©ìì˜ ê¶Œí•œ ëª©ë¡
  const userPermissions = user.adminPermissions || [];

  // ê¶Œí•œ í™•ì¸ ë¡œì§
  const hasPermission = mode === 'all'
    ? requiredPermissions.every(permission => userPermissions.includes(permission))
    : requiredPermissions.some(permission => userPermissions.includes(permission));

  return hasPermission ? <>{children}</> : <>{fallback}</>;
}

/**
 * ê¶Œí•œ í™•ì¸ì„ ìœ„í•œ ìœ í‹¸ë¦¬í‹° í›…
 * ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œ ê¶Œí•œì„ í™•ì¸í•´ì•¼ í•  ë•Œ ì‚¬ìš©
 */
export function usePermissions() {
  const { user } = useAuthStore();

  const hasPermission = (
    permissions: string | string[],
    mode: 'all' | 'any' = 'all'
  ): boolean => {
    // ë¡œê·¸ì¸í•˜ì§€ ì•Šì•˜ê±°ë‚˜ ì–´ë“œë¯¼ ê¶Œí•œì´ ì—†ëŠ” ê²½ìš°
    if (!user || !user.adminRole) {
      return false;
    }

    // ìŠˆí¼ ê´€ë¦¬ìëŠ” ëª¨ë“  ê¶Œí•œì„ ê°€ì§„ ê²ƒìœ¼ë¡œ ì²˜ë¦¬
    if (user.adminRole === 'super_admin') {
      return true;
    }

    // ê¶Œí•œ ëª©ë¡ì„ ë°°ì—´ë¡œ ì •ê·œí™”
    const requiredPermissions = Array.isArray(permissions) ? permissions : [permissions];
    
    // ì‚¬ìš©ìì˜ ê¶Œí•œ ëª©ë¡
    const userPermissions = user.adminPermissions || [];

    // ê¶Œí•œ í™•ì¸ ë¡œì§
    return mode === 'all'
      ? requiredPermissions.every(permission => userPermissions.includes(permission))
      : requiredPermissions.some(permission => userPermissions.includes(permission));
  };

  const hasAnyPermission = (permissions: string[]): boolean => {
    return hasPermission(permissions, 'any');
  };

  const hasAllPermissions = (permissions: string[]): boolean => {
    return hasPermission(permissions, 'all');
  };

  const isAdmin = (): boolean => {
    return user?.adminRole !== undefined;
  };

  const isSuperAdmin = (): boolean => {
    return user?.adminRole === 'super_admin';
  };

  const getAdminRoleLabel = (): string => {
    switch (user?.adminRole) {
      case 'super_admin':
        return 'ìŠˆí¼ ê´€ë¦¬ì';
      case 'admin':
        return 'ê´€ë¦¬ì';
      case 'moderator':
        return 'ëª¨ë”ë ˆì´í„°';
      case 'support':
        return 'ì§€ì›íŒ€';
      default:
        return 'ê¶Œí•œ ì—†ìŒ';
    }
  };

  return {
    hasPermission,
    hasAnyPermission,
    hasAllPermissions,
    isAdmin,
    isSuperAdmin,
    getAdminRoleLabel,
    adminRole: user?.adminRole,
    adminPermissions: user?.adminPermissions || [],
  };
}
</file>

<file path="frontend/src/components/auth/GoogleLoginButton.tsx">
'use client';

import React from 'react';

interface GoogleLoginButtonProps {
  onLogin?: () => void;
  isLoading?: boolean;
  disabled?: boolean;
  text?: string;
}

export default function GoogleLoginButton({ 
  onLogin, 
  isLoading = false, 
  disabled = false,
  text = 'Googleë¡œ ë¡œê·¸ì¸'
}: GoogleLoginButtonProps) {
  const handleGoogleLogin = () => {
    if (onLogin) {
      onLogin();
    } else {
      // ê¸°ë³¸ Google OAuth ë¡œê·¸ì¸ ì²˜ë¦¬
      const backendUrl = process.env.NEXT_PUBLIC_BACKEND_URL || 'http://localhost:3001';
      window.location.href = `${backendUrl}/auth/google`;
    }
  };

  return (
    <button
      type="button"
      onClick={handleGoogleLogin}
      disabled={isLoading || disabled}
      className="w-full flex justify-center items-center px-4 py-3 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
    >
      {isLoading ? (
        <>
          <svg className="animate-spin -ml-1 mr-3 h-5 w-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
            <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
          ë¡œê·¸ì¸ ì¤‘...
        </>
      ) : (
        <>
          {/* Google ë¡œê³  SVG */}
          <svg
            className="w-5 h-5 mr-3"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill="#4285F4"
              d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"
            />
            <path
              fill="#34A853"
              d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"
            />
            <path
              fill="#FBBC05"
              d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"
            />
            <path
              fill="#EA4335"
              d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"
            />
          </svg>
          {text}
        </>
      )}
    </button>
  );
}
</file>

<file path="frontend/src/components/auth/LoginForm.tsx">
'use client';

import React, { useState } from 'react';
import { useRouter } from 'next/navigation';
import Link from 'next/link';
import { Eye, EyeOff, Mail, Lock, LogIn } from 'lucide-react';

interface LoginFormData {
  email: string;
  password: string;
  rememberMe: boolean;
}

interface LoginFormProps {
  onSubmit?: (data: LoginFormData) => Promise<void>;
  isLoading?: boolean;
}

export default function LoginForm({ onSubmit, isLoading = false }: LoginFormProps) {
  const router = useRouter();
  const [formData, setFormData] = useState<LoginFormData>({
    email: '',
    password: '',
    rememberMe: false,
  });
  const [showPassword, setShowPassword] = useState(false);
  const [errors, setErrors] = useState<Partial<LoginFormData>>({});

  const validateForm = (): boolean => {
    const newErrors: Partial<LoginFormData> = {};

    if (!formData.email) {
      newErrors.email = 'ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”';
    } else if (!/\S+@\S+\.\S+/.test(formData.email)) {
      newErrors.email = 'ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤';
    }

    if (!formData.password) {
      newErrors.password = 'ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”';
    } else if (formData.password.length < 8) {
      newErrors.password = 'ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤';
    }

    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    
    if (!validateForm()) return;

    try {
      if (onSubmit) {
        await onSubmit(formData);
      } else {
        // ê¸°ë³¸ ë¡œê·¸ì¸ ì²˜ë¦¬
        console.log('ë¡œê·¸ì¸ ë°ì´í„°:', formData);
        router.push('/dashboard');
      }
    } catch (error) {
      console.error('ë¡œê·¸ì¸ ì˜¤ë¥˜:', error);
    }
  };

  const handleInputChange = (field: keyof LoginFormData, value: string | boolean) => {
    setFormData(prev => ({
      ...prev,
      [field]: value
    }));
    
    // ì—ëŸ¬ ìƒíƒœ ì´ˆê¸°í™”
    if (errors[field]) {
      setErrors(prev => ({
        ...prev,
        [field]: undefined
      }));
    }
  };

  return (
    <div className="w-full max-w-md mx-auto">
      <div className="bg-white rounded-2xl shadow-xl p-8">
        {/* í—¤ë” */}
        <div className="text-center mb-8">
          <div className="inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4">
            <LogIn className="w-8 h-8 text-blue-600" />
          </div>
          <h1 className="text-2xl font-bold text-gray-900 mb-2">ì›Œí´ë¦¬ì— ë¡œê·¸ì¸</h1>
          <p className="text-gray-600">ê³„ì •ì— ë¡œê·¸ì¸í•˜ì—¬ ì—…ë¬´ë¥¼ ì‹œì‘í•˜ì„¸ìš”</p>
        </div>

        {/* ë¡œê·¸ì¸ í¼ */}
        <form onSubmit={handleSubmit} className="space-y-6">
          {/* ì´ë©”ì¼ ì…ë ¥ */}
          <div>
            <label htmlFor="email" className="block text-sm font-medium text-gray-700 mb-2">
              ì´ë©”ì¼
            </label>
            <div className="relative">
              <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <Mail className="h-5 w-5 text-gray-400" />
              </div>
              <input
                type="email"
                id="email"
                value={formData.email}
                onChange={(e) => handleInputChange('email', e.target.value)}
                className={`block w-full pl-10 pr-3 py-3 border rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${
                  errors.email ? 'border-red-300' : 'border-gray-300'
                }`}
                placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”"
                disabled={isLoading}
              />
            </div>
            {errors.email && (
              <p className="mt-1 text-sm text-red-600">{errors.email}</p>
            )}
          </div>

          {/* ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ */}
          <div>
            <label htmlFor="password" className="block text-sm font-medium text-gray-700 mb-2">
              ë¹„ë°€ë²ˆí˜¸
            </label>
            <div className="relative">
              <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <Lock className="h-5 w-5 text-gray-400" />
              </div>
              <input
                type={showPassword ? 'text' : 'password'}
                id="password"
                value={formData.password}
                onChange={(e) => handleInputChange('password', e.target.value)}
                className={`block w-full pl-10 pr-12 py-3 border rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${
                  errors.password ? 'border-red-300' : 'border-gray-300'
                }`}
                placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                disabled={isLoading}
              />
              <button
                type="button"
                className="absolute inset-y-0 right-0 pr-3 flex items-center"
                onClick={() => setShowPassword(!showPassword)}
                disabled={isLoading}
              >
                {showPassword ? (
                  <EyeOff className="h-5 w-5 text-gray-400 hover:text-gray-600" />
                ) : (
                  <Eye className="h-5 w-5 text-gray-400 hover:text-gray-600" />
                )}
              </button>
            </div>
            {errors.password && (
              <p className="mt-1 text-sm text-red-600">{errors.password}</p>
            )}
          </div>

          {/* ë¡œê·¸ì¸ ìœ ì§€ & ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° */}
          <div className="flex items-center justify-between">
            <div className="flex items-center">
              <input
                id="remember-me"
                type="checkbox"
                checked={formData.rememberMe}
                onChange={(e) => handleInputChange('rememberMe', e.target.checked)}
                className="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                disabled={isLoading}
              />
              <label htmlFor="remember-me" className="ml-2 block text-sm text-gray-700">
                ë¡œê·¸ì¸ ìœ ì§€
              </label>
            </div>
            <Link
              href="/auth/forgot-password"
              className="text-sm text-blue-600 hover:text-blue-500 font-medium"
            >
              ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°
            </Link>
          </div>

          {/* ë¡œê·¸ì¸ ë²„íŠ¼ */}
          <button
            type="submit"
            disabled={isLoading}
            className="w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
          >
            {isLoading ? (
              <>
                <svg className="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                  <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                  <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                ë¡œê·¸ì¸ ì¤‘...
              </>
            ) : (
              'ë¡œê·¸ì¸'
            )}
          </button>
        </form>

        {/* íšŒì›ê°€ì… ë§í¬ */}
        <div className="mt-8 text-center">
          <p className="text-sm text-gray-600">
            ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”?{' '}
            <Link
              href="/auth/register"
              className="font-medium text-blue-600 hover:text-blue-500"
            >
              íšŒì›ê°€ì…
            </Link>
          </p>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="frontend/src/components/auth/SocialLogin.tsx">
'use client';

import React from 'react';
import GoogleLoginButton from './GoogleLoginButton';

interface SocialLoginProps {
  isLoading?: boolean;
  showDivider?: boolean;
  dividerText?: string;
}

export default function SocialLogin({ 
  isLoading = false, 
  showDivider = true, 
  dividerText = 'ë˜ëŠ”' 
}: SocialLoginProps) {
  const handleGoogleLogin = () => {
    console.log('Google ë¡œê·¸ì¸ ì‹œì‘');
    // Google OAuth ë¡œê·¸ì¸ ë¡œì§ êµ¬í˜„
  };

  return (
    <div className="w-full">
      {/* êµ¬ë¶„ì„  */}
      {showDivider && (
        <div className="relative my-6">
          <div className="absolute inset-0 flex items-center">
            <div className="w-full border-t border-gray-300" />
          </div>
          <div className="relative flex justify-center text-sm">
            <span className="px-4 bg-white text-gray-500 font-medium">{dividerText}</span>
          </div>
        </div>
      )}

      {/* ì†Œì…œ ë¡œê·¸ì¸ ë²„íŠ¼ë“¤ */}
      <div className="space-y-3">
        {/* Google ë¡œê·¸ì¸ */}
        <GoogleLoginButton
          onLogin={handleGoogleLogin}
          isLoading={isLoading}
          text="Googleë¡œ ê³„ì†í•˜ê¸°"
        />

        {/* ì¶”í›„ ë‹¤ë¥¸ ì†Œì…œ ë¡œê·¸ì¸ ì¶”ê°€ ì˜ˆì • */}
        {/* 
        <button
          type="button"
          className="w-full flex justify-center items-center px-4 py-3 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
          disabled={isLoading}
        >
          <span className="mr-3">ğŸ</span>
          Appleë¡œ ê³„ì†í•˜ê¸°
        </button>

        <button
          type="button"
          className="w-full flex justify-center items-center px-4 py-3 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
          disabled={isLoading}
        >
          <span className="mr-3">ğŸ’¼</span>
          Microsoftë¡œ ê³„ì†í•˜ê¸°
        </button>
        */}
      </div>

      {/* ë³´ì•ˆ ì•ˆë‚´ */}
      <div className="mt-6 text-center">
        <p className="text-xs text-gray-500">
          ì†Œì…œ ë¡œê·¸ì¸ì„ ì‚¬ìš©í•˜ë©´{' '}
          <a href="/terms" className="text-blue-600 hover:text-blue-500 underline">
            ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€
          </a>
          {' '}ë°{' '}
          <a href="/privacy" className="text-blue-600 hover:text-blue-500 underline">
            ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨
          </a>
          ì— ë™ì˜í•˜ëŠ” ê²ƒìœ¼ë¡œ ê°„ì£¼ë©ë‹ˆë‹¤.
        </p>
      </div>
    </div>
  );
}
</file>

<file path="frontend/src/components/board/KnowledgeWiki.tsx">
'use client'

import { useState } from 'react'
import { Search, BookOpen, User, Eye, ThumbsUp, Clock, Tag, Star, FileText, Plus, TrendingUp } from 'lucide-react'
import { Card } from '@/components/ui/Card'
import { Button } from '@/components/ui/Button'

interface KnowledgeWikiProps {
  searchQuery: string
}

interface WikiArticle {
  id: string
  title: string
  summary: string
  content: string
  author: {
    name: string
    avatar: string
    reputation: number
  }
  category: string
  tags: string[]
  views: number
  likes: number
  createdAt: string
  updatedAt: string
  difficulty: 'beginner' | 'intermediate' | 'advanced'
  readTime: number
  isFeatured: boolean
}

// ì„ì‹œ ë°ì´í„°
const mockArticles: WikiArticle[] = [
  {
    id: '1',
    title: 'React Hook ì™„ë²½ ê°€ì´ë“œ',
    summary: 'React Hookì˜ ê¸°ë³¸ ê°œë…ë¶€í„° ê³ ê¸‰ íŒ¨í„´ê¹Œì§€ ìƒì„¸íˆ ì„¤ëª…í•©ë‹ˆë‹¤. useState, useEffect, useContext ë“± í•µì‹¬ Hookë“¤ì˜ ì‹¤ì „ ì‚¬ìš©ë²•ì„ ë‹¤ë£¹ë‹ˆë‹¤.',
    content: '# React Hook ì™„ë²½ ê°€ì´ë“œ\n\nReact Hookì€...',
    author: {
      name: 'ê¹€ê°œë°œ',
      avatar: '/avatars/kim.jpg',
      reputation: 1250
    },
    category: 'Frontend',
    tags: ['React', 'JavaScript', 'Hook', 'Frontend'],
    views: 1542,
    likes: 89,
    createdAt: '2024-01-15',
    updatedAt: '2024-01-20',
    difficulty: 'intermediate',
    readTime: 12,
    isFeatured: true
  },
  {
    id: '2',
    title: 'TypeScript íƒ€ì… ì‹œìŠ¤í…œ ì‹¬í™”',
    summary: 'TypeScriptì˜ ê³ ê¸‰ íƒ€ì… ì‹œìŠ¤í…œì„ í™œìš©í•œ íƒ€ì… ì•ˆì „ì„± í–¥ìƒ ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤. ì œë„¤ë¦­, ìœ ë‹ˆì˜¨ íƒ€ì…, ì¡°ê±´ë¶€ íƒ€ì… ë“±ì„ ë‹¤ë£¹ë‹ˆë‹¤.',
    content: '# TypeScript íƒ€ì… ì‹œìŠ¤í…œ ì‹¬í™”\n\níƒ€ì… ì‹œìŠ¤í…œì€...',
    author: {
      name: 'ë°•íƒ€ì…',
      avatar: '/avatars/park.jpg',
      reputation: 2100
    },
    category: 'Programming',
    tags: ['TypeScript', 'Types', 'Programming', 'JavaScript'],
    views: 892,
    likes: 67,
    createdAt: '2024-01-10',
    updatedAt: '2024-01-18',
    difficulty: 'advanced',
    readTime: 18,
    isFeatured: false
  },
  {
    id: '3',
    title: 'UX ë””ìì¸ ê¸°ì´ˆ: ì‚¬ìš©ì ì¤‘ì‹¬ ì„¤ê³„',
    summary: 'ì‚¬ìš©ì ê²½í—˜ ë””ìì¸ì˜ ê¸°ë³¸ ì›ì¹™ê³¼ ë°©ë²•ë¡ ì„ ì†Œê°œí•©ë‹ˆë‹¤. ì‚¬ìš©ì ì¡°ì‚¬, ì™€ì´ì–´í”„ë ˆì„, í”„ë¡œí† íƒ€ì´í•‘ê¹Œì§€ ì „ì²´ ê³¼ì •ì„ ë‹¤ë£¹ë‹ˆë‹¤.',
    content: '# UX ë””ìì¸ ê¸°ì´ˆ\n\nì‚¬ìš©ì ì¤‘ì‹¬ ì„¤ê³„ëŠ”...',
    author: {
      name: 'ì´ë””ìì¸',
      avatar: '/avatars/lee.jpg',
      reputation: 1680
    },
    category: 'Design',
    tags: ['UX', 'Design', 'User Research', 'Prototyping'],
    views: 2156,
    likes: 134,
    createdAt: '2024-01-08',
    updatedAt: '2024-01-16',
    difficulty: 'beginner',
    readTime: 15,
    isFeatured: true
  }
]

const categories = ['ì „ì²´', 'Frontend', 'Backend', 'Design', 'Programming', 'DevOps', 'Marketing']
const difficulties = [
  { key: 'all', label: 'ì „ì²´ ìˆ˜ì¤€' },
  { key: 'beginner', label: 'ì´ˆê¸‰' },
  { key: 'intermediate', label: 'ì¤‘ê¸‰' },
  { key: 'advanced', label: 'ê³ ê¸‰' }
]

const difficultyColors = {
  beginner: 'bg-green-100 text-green-800',
  intermediate: 'bg-yellow-100 text-yellow-800',
  advanced: 'bg-red-100 text-red-800'
}

const difficultyLabels = {
  beginner: 'ì´ˆê¸‰',
  intermediate: 'ì¤‘ê¸‰',
  advanced: 'ê³ ê¸‰'
}

export default function KnowledgeWiki({ searchQuery }: KnowledgeWikiProps) {
  const [selectedCategory, setSelectedCategory] = useState('ì „ì²´')
  const [selectedDifficulty, setSelectedDifficulty] = useState('all')
  const [sortBy, setSortBy] = useState<'latest' | 'popular' | 'likes'>('latest')

  const filteredArticles = mockArticles.filter(article => {
    const matchesSearch = article.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                         article.summary.toLowerCase().includes(searchQuery.toLowerCase()) ||
                         article.tags.some(tag => tag.toLowerCase().includes(searchQuery.toLowerCase()))
    
    const matchesCategory = selectedCategory === 'ì „ì²´' || article.category === selectedCategory
    const matchesDifficulty = selectedDifficulty === 'all' || article.difficulty === selectedDifficulty
    
    return matchesSearch && matchesCategory && matchesDifficulty
  }).sort((a, b) => {
    switch (sortBy) {
      case 'popular':
        return b.views - a.views
      case 'likes':
        return b.likes - a.likes
      case 'latest':
      default:
        return new Date(b.updatedAt).getTime() - new Date(a.updatedAt).getTime()
    }
  })

  const featuredArticles = mockArticles.filter(article => article.isFeatured)

  const formatDate = (dateString: string) => {
    return new Date(dateString).toLocaleDateString('ko-KR', {
      year: 'numeric',
      month: 'long',
      day: 'numeric'
    })
  }

  return (
    <div className="space-y-4">


      {/* ìœ„í‚¤ ë¬¸ì„œ ëª©ë¡ */}
      <div className="bg-white border border-gray-200 rounded-lg overflow-hidden">

        {filteredArticles.length === 0 ? (
          <div className="p-8 text-center">
            <BookOpen className="w-8 h-8 text-gray-400 mx-auto mb-3" />
            <h3 className="text-base font-medium text-gray-900 mb-1">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
            <p className="text-sm text-gray-500">ë‹¤ë¥¸ ì¡°ê±´ìœ¼ë¡œ ê²€ìƒ‰í•´ë³´ì„¸ìš”.</p>
          </div>
        ) : (
          <div className="divide-y divide-gray-100">
            {filteredArticles.map((article, index) => (
              <div key={article.id} className={`p-4 hover:bg-gray-50 transition-colors cursor-pointer ${index === filteredArticles.length - 1 ? '' : ''}`}>
                <div className="flex justify-between items-start mb-3">
                  <div className="flex-1">
                    <div className="flex items-center gap-2 mb-2">
                      <h3 className="text-base font-medium text-gray-900">{article.title}</h3>
                      <span className={`px-2 py-1 text-xs font-medium rounded-full ${difficultyColors[article.difficulty]}`}>
                        {difficultyLabels[article.difficulty]}
                      </span>
                      <span className="px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded-full">
                        {article.category}
                      </span>
                    </div>
                    
                    <p className="text-sm text-gray-600 mb-3 line-clamp-2">{article.summary}</p>
                    
                    {/* íƒœê·¸ */}
                    <div className="flex flex-wrap gap-1 mb-3">
                      {article.tags.slice(0, 3).map((tag, index) => (
                        <span key={index} className="px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded flex items-center gap-1">
                          <Tag className="w-3 h-3" />
                          {tag}
                        </span>
                      ))}
                      {article.tags.length > 3 && (
                        <span className="px-2 py-1 text-xs text-gray-500">+{article.tags.length - 3}</span>
                      )}
                    </div>
                  </div>
                  
                  <div className="text-right ml-4">
                    <div className="flex items-center text-xs text-gray-500 mb-2">
                      <Clock className="w-3 h-3 mr-1" />
                      {article.readTime}ë¶„ ì½ê¸°
                    </div>
                  </div>
                </div>

                <div className="flex items-center justify-between text-xs text-gray-500 border-t border-gray-100 pt-3">
                  <div className="flex items-center gap-3">
                    <div className="flex items-center gap-2">
                      <User className="w-3 h-3" />
                      <span>{article.author.name}</span>
                      <span className="text-xs text-gray-600">í‰íŒ {article.author.reputation}</span>
                    </div>
                    <div className="flex items-center gap-1">
                      <Eye className="w-3 h-3" />
                      {article.views.toLocaleString()}íšŒ
                    </div>
                    <div className="flex items-center gap-1">
                      <ThumbsUp className="w-3 h-3" />
                      {article.likes}
                    </div>
                  </div>
                  
                  <div className="flex items-center gap-2">
                    <span className="text-xs text-gray-400">
                      ì—…ë°ì´íŠ¸: {formatDate(article.updatedAt)}
                    </span>
                    <Button variant="outline" size="sm">
                      <FileText className="w-3 h-3 mr-1" />
                      ì½ê¸°
                    </Button>
                  </div>
                </div>
              </div>
            ))}
          </div>
        )}
      </div>

      {/* í†µê³„ ì„¹ì…˜ */}
      <div className="bg-white border border-gray-200 rounded-lg p-4">
        <div className="flex items-center gap-2 mb-3">
          <TrendingUp className="w-4 h-4 text-green-500" />
          <h3 className="text-sm font-medium text-gray-900">ìœ„í‚¤ í†µê³„</h3>
        </div>
        
        <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
          <div className="text-center">
            <div className="text-xl font-semibold text-gray-900">{mockArticles.length}</div>
            <div className="text-xs text-gray-500">ì´ ë¬¸ì„œ ìˆ˜</div>
          </div>
          <div className="text-center">
            <div className="text-xl font-semibold text-gray-900">
              {mockArticles.reduce((sum, article) => sum + article.views, 0).toLocaleString()}
            </div>
            <div className="text-xs text-gray-500">ì´ ì¡°íšŒìˆ˜</div>
          </div>
          <div className="text-center">
            <div className="text-xl font-semibold text-gray-900">
              {mockArticles.reduce((sum, article) => sum + article.likes, 0)}
            </div>
            <div className="text-xs text-gray-500">ì´ ì¢‹ì•„ìš”</div>
          </div>
          <div className="text-center">
            <div className="text-xl font-semibold text-gray-900">{categories.length - 1}</div>
            <div className="text-xs text-gray-500">ì¹´í…Œê³ ë¦¬ ìˆ˜</div>
          </div>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="frontend/src/components/board/MissionBoard.tsx">
'use client'

import { useState } from 'react'
import { Search, MapPin, Clock, DollarSign, User, Briefcase, Star, Filter } from 'lucide-react'
import { Card } from '@/components/ui/Card'
import { Button } from '@/components/ui/Button'

interface MissionBoardProps {
  searchQuery: string
}

interface Mission {
  id: string
  title: string
  description: string
  client: string
  budget: {
    type: 'fixed' | 'hourly'
    amount: number
  }
  deadline: string
  location: string
  skills: string[]
  proposals: number
  rating: number
  postedAt: string
  category: 'development' | 'design' | 'marketing' | 'writing' | 'consulting'
}

// ì„ì‹œ ë°ì´í„°
const mockMissions: Mission[] = [
  {
    id: '1',
    title: 'React ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ',
    description: 'ì‚¬ìš©ì ê´€ë¦¬ ì‹œìŠ¤í…œì´ í¬í•¨ëœ React ê¸°ë°˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•´ì£¼ì‹¤ ê°œë°œìë¥¼ ì°¾ìŠµë‹ˆë‹¤. TypeScriptì™€ Next.js ê²½í—˜ì´ ìˆìœ¼ì‹œë©´ ë”ìš± ì¢‹ìŠµë‹ˆë‹¤.',
    client: 'TechCorp',
    budget: { type: 'fixed', amount: 3000000 },
    deadline: '2024-03-15',
    location: 'ì›ê²©',
    skills: ['React', 'TypeScript', 'Next.js', 'Node.js'],
    proposals: 12,
    rating: 4.8,
    postedAt: '2024-01-10',
    category: 'development'
  },
  {
    id: '2',
    title: 'UX/UI ë””ìì¸ ë¦¬ë‰´ì–¼',
    description: 'ê¸°ì¡´ ëª¨ë°”ì¼ ì•±ì˜ UX/UIë¥¼ ëª¨ë˜í•˜ê³  ì‚¬ìš©ì ì¹œí™”ì ìœ¼ë¡œ ë¦¬ë””ìì¸í•´ì£¼ì‹¤ ë””ìì´ë„ˆë¥¼ ì°¾ìŠµë‹ˆë‹¤.',
    client: 'StartupA',
    budget: { type: 'hourly', amount: 50000 },
    deadline: '2024-02-28',
    location: 'ì„œìš¸',
    skills: ['Figma', 'UX Design', 'UI Design', 'Prototyping'],
    proposals: 8,
    rating: 4.9,
    postedAt: '2024-01-12',
    category: 'design'
  },
  {
    id: '3',
    title: 'ë§ˆì¼€íŒ… ì „ëµ ìˆ˜ë¦½ ë° ì‹¤í–‰',
    description: 'ì‹ ì œí’ˆ ëŸ°ì¹­ì„ ìœ„í•œ ì¢…í•©ì ì¸ ë””ì§€í„¸ ë§ˆì¼€íŒ… ì „ëµì„ ìˆ˜ë¦½í•˜ê³  ì‹¤í–‰í•´ì£¼ì‹¤ ë§ˆì¼€í„°ë¥¼ ì°¾ìŠµë‹ˆë‹¤.',
    client: 'BrandCo',
    budget: { type: 'fixed', amount: 2500000 },
    deadline: '2024-04-01',
    location: 'ë¶€ì‚°',
    skills: ['Digital Marketing', 'SEO', 'Social Media', 'Analytics'],
    proposals: 15,
    rating: 4.7,
    postedAt: '2024-01-08',
    category: 'marketing'
  }
]

const categoryLabels = {
  development: 'ê°œë°œ',
  design: 'ë””ìì¸',
  marketing: 'ë§ˆì¼€íŒ…',
  writing: 'ë¼ì´íŒ…',
  consulting: 'ì»¨ì„¤íŒ…'
}

export default function MissionBoard({ searchQuery }: MissionBoardProps) {
  const [selectedCategory, setSelectedCategory] = useState<string>('all')
  const [budgetFilter, setBudgetFilter] = useState<string>('all')
  const [locationFilter, setLocationFilter] = useState<string>('all')

  const categories = ['all', 'development', 'design', 'marketing', 'writing', 'consulting']

  const filteredMissions = mockMissions.filter(mission => {
    const matchesSearch = mission.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                         mission.description.toLowerCase().includes(searchQuery.toLowerCase()) ||
                         mission.skills.some(skill => skill.toLowerCase().includes(searchQuery.toLowerCase()))
    
    const matchesCategory = selectedCategory === 'all' || mission.category === selectedCategory
    
    let matchesBudget = true
    if (budgetFilter !== 'all') {
      const amount = mission.budget.amount
      switch (budgetFilter) {
        case '1000000-':
          matchesBudget = amount < 1000000
          break
        case '1000000-3000000':
          matchesBudget = amount >= 1000000 && amount <= 3000000
          break
        case '3000000+':
          matchesBudget = amount > 3000000
          break
      }
    }
    
    const matchesLocation = locationFilter === 'all' || mission.location === locationFilter
    
    return matchesSearch && matchesCategory && matchesBudget && matchesLocation
  })

  const formatBudget = (budget: Mission['budget']) => {
    const formattedAmount = new Intl.NumberFormat('ko-KR').format(budget.amount)
    return budget.type === 'fixed' 
      ? `${formattedAmount}ì› (ê³ ì •)`
      : `${formattedAmount}ì›/ì‹œê°„`
  }

  const formatDate = (dateString: string) => {
    return new Date(dateString).toLocaleDateString('ko-KR', {
      year: 'numeric',
      month: 'long',
      day: 'numeric'
    })
  }

  return (
    <div className="space-y-4">

      {/* ì„ë¬´ ëª©ë¡ */}
      <div className="bg-white border border-gray-200 rounded-lg overflow-hidden">

        {filteredMissions.length === 0 ? (
          <div className="p-8 text-center">
            <Briefcase className="w-8 h-8 text-gray-400 mx-auto mb-3" />
            <h3 className="text-base font-medium text-gray-900 mb-1">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
            <p className="text-sm text-gray-500">ë‹¤ë¥¸ ì¡°ê±´ìœ¼ë¡œ ê²€ìƒ‰í•´ë³´ì„¸ìš”.</p>
          </div>
        ) : (
          <div className="divide-y divide-gray-100">
            {filteredMissions.map((mission, index) => (
              <div key={mission.id} className={`p-4 hover:bg-gray-50 transition-colors cursor-pointer ${index === filteredMissions.length - 1 ? '' : ''}`}>
                <div className="flex justify-between items-start mb-3">
                  <div className="flex-1">
                    <div className="flex items-center gap-2 mb-2">
                      <h3 className="text-base font-medium text-gray-900">{mission.title}</h3>
                      <span className="px-2 py-1 text-xs font-medium bg-gray-100 text-gray-700 rounded-full">
                        {categoryLabels[mission.category]}
                      </span>
                    </div>
                    <p className="text-sm text-gray-600 mb-3 line-clamp-2">{mission.description}</p>
                    
                    {/* ìŠ¤í‚¬ íƒœê·¸ */}
                    <div className="flex flex-wrap gap-1 mb-3">
                      {mission.skills.slice(0, 3).map((skill, index) => (
                        <span key={index} className="px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded">
                          {skill}
                        </span>
                      ))}
                      {mission.skills.length > 3 && (
                        <span className="px-2 py-1 text-xs text-gray-500">+{mission.skills.length - 3}</span>
                      )}
                    </div>
                  </div>
                  
                  <div className="text-right ml-4">
                    <div className="text-base font-semibold text-gray-900 mb-1">
                      {formatBudget(mission.budget)}
                    </div>
                    <div className="flex items-center text-xs text-gray-500">
                      <Star className="w-3 h-3 text-yellow-400 mr-1" />
                      {mission.rating}
                    </div>
                  </div>
                </div>

                <div className="flex items-center justify-between text-xs text-gray-500 border-t border-gray-100 pt-3">
                  <div className="flex items-center gap-3">
                    <div className="flex items-center gap-1">
                      <User className="w-3 h-3" />
                      {mission.client}
                    </div>
                    <div className="flex items-center gap-1">
                      <MapPin className="w-3 h-3" />
                      {mission.location}
                    </div>
                    <div className="flex items-center gap-1">
                      <Clock className="w-3 h-3" />
                      ë§ˆê°: {formatDate(mission.deadline)}
                    </div>
                  </div>
                  
                  <div className="flex items-center gap-2">
                    <span className="text-xs text-gray-600 font-medium">{mission.proposals}ê°œ ì œì•ˆ</span>
                  </div>
                </div>
              </div>
            ))}
          </div>
        )}
      </div>
    </div>
  )
}
</file>

<file path="frontend/src/components/board/ProjectShowcase.tsx">
'use client'

import { useState } from 'react'
import { Search, Heart, Eye, MessageCircle, User, Calendar, Tag, ExternalLink, Image, Video, Github, Globe, Award, TrendingUp } from 'lucide-react'
import { Card } from '@/components/ui/Card'
import { Button } from '@/components/ui/Button'

interface ProjectShowcaseProps {
  searchQuery: string
}

interface ShowcaseProject {
  id: string
  title: string
  description: string
  author: {
    name: string
    avatar: string
    level: number
    reputation: number
  }
  category: string
  tags: string[]
  images: string[]
  videoUrl?: string
  links: {
    demo?: string
    github?: string
    website?: string
  }
  stats: {
    views: number
    likes: number
    comments: number
  }
  createdAt: string
  isFeatured: boolean
  challenges: string[]
  solutions: string[]
  lessons: string[]
  technologies: string[]
  teamMembers?: {
    name: string
    role: string
    avatar: string
  }[]
}

// ì„ì‹œ ë°ì´í„°
const mockProjects: ShowcaseProject[] = [
  {
    id: '1',
    title: 'ì‹¤ì‹œê°„ í˜‘ì—… í™”ì´íŠ¸ë³´ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜',
    description: 'íŒ€ì´ ì‹¤ì‹œê°„ìœ¼ë¡œ í•¨ê»˜ ì‘ì—…í•  ìˆ˜ ìˆëŠ” í™”ì´íŠ¸ë³´ë“œ ì•±ì„ ê°œë°œí–ˆìŠµë‹ˆë‹¤. Socket.ioë¥¼ í™œìš©í•œ ì‹¤ì‹œê°„ ë™ê¸°í™”ì™€ Canvas APIë¥¼ ì´ìš©í•œ ë“œë¡œì‰ ê¸°ëŠ¥ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.',
    author: {
      name: 'ê¹€í˜‘ì—…',
      avatar: '/avatars/kim.jpg',
      level: 15,
      reputation: 2340
    },
    category: 'ì›¹ ê°œë°œ',
    tags: ['React', 'Socket.io', 'Canvas', 'TypeScript', 'Node.js'],
    images: [
      '/projects/whiteboard-1.jpg',
      '/projects/whiteboard-2.jpg',
      '/projects/whiteboard-3.jpg'
    ],
    videoUrl: '/projects/whiteboard-demo.mp4',
    links: {
      demo: 'https://whiteboard-demo.com',
      github: 'https://github.com/user/whiteboard',
      website: 'https://whiteboard-app.com'
    },
    stats: {
      views: 1234,
      likes: 89,
      comments: 23
    },
    createdAt: '2024-01-15',
    isFeatured: true,
    challenges: [
      'ì‹¤ì‹œê°„ ë°ì´í„° ë™ê¸°í™”ì˜ ì„±ëŠ¥ ìµœì í™”',
      'ë‹¤ì–‘í•œ ë¸Œë¼ìš°ì €ì—ì„œì˜ Canvas í˜¸í™˜ì„±',
      'ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬'
    ],
    solutions: [
      'WebSocket ì—°ê²° í’€ë§ê³¼ ë°ì´í„° ì••ì¶•ìœ¼ë¡œ ì„±ëŠ¥ ê°œì„ ',
      'Fabric.js ë¼ì´ë¸ŒëŸ¬ë¦¬ ë„ì…ìœ¼ë¡œ ë¸Œë¼ìš°ì € í˜¸í™˜ì„± í•´ê²°',
      'Virtual scrollingê³¼ lazy loading ì ìš©'
    ],
    lessons: [
      'ì‹¤ì‹œê°„ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œì˜ ìƒíƒœ ê´€ë¦¬ ì¤‘ìš”ì„±',
      'ì‚¬ìš©ì ê²½í—˜ì„ ìœ„í•œ ì˜¤í”„ë¼ì¸ ëª¨ë“œ í•„ìš”ì„±',
      'í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜ ì„¤ê³„ì˜ ì¤‘ìš”ì„±'
    ],
    technologies: ['React', 'TypeScript', 'Socket.io', 'Canvas API', 'Node.js', 'MongoDB'],
    teamMembers: [
      { name: 'ê¹€í˜‘ì—…', role: 'Frontend Developer', avatar: '/avatars/kim.jpg' },
      { name: 'ë°•ì‹¤ì‹œê°„', role: 'Backend Developer', avatar: '/avatars/park.jpg' },
      { name: 'ì´ë””ìì¸', role: 'UI/UX Designer', avatar: '/avatars/lee.jpg' }
    ]
  },
  {
    id: '2',
    title: 'AI ê¸°ë°˜ ê°œì¸ í•™ìŠµ ë„ìš°ë¯¸',
    description: 'OpenAI APIë¥¼ í™œìš©í•˜ì—¬ ê°œì¸í™”ëœ í•™ìŠµ ê²½í—˜ì„ ì œê³µí•˜ëŠ” ëª¨ë°”ì¼ ì•±ì„ ê°œë°œí–ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ìì˜ í•™ìŠµ íŒ¨í„´ì„ ë¶„ì„í•˜ê³  ë§ì¶¤í˜• ì½˜í…ì¸ ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤.',
    author: {
      name: 'ë°•AI',
      avatar: '/avatars/park.jpg',
      level: 12,
      reputation: 1890
    },
    category: 'ëª¨ë°”ì¼ ì•±',
    tags: ['React Native', 'AI', 'Machine Learning', 'OpenAI', 'Firebase'],
    images: [
      '/projects/ai-tutor-1.jpg',
      '/projects/ai-tutor-2.jpg'
    ],
    links: {
      demo: 'https://ai-tutor-demo.com',
      github: 'https://github.com/user/ai-tutor'
    },
    stats: {
      views: 867,
      likes: 56,
      comments: 18
    },
    createdAt: '2024-01-12',
    isFeatured: false,
    challenges: [
      'AI ì‘ë‹µì˜ ì •í™•ì„±ê³¼ ê´€ë ¨ì„± í™•ë³´',
      'ì‚¬ìš©ì ê°œì¸ì •ë³´ ë³´í˜¸',
      'ëª¨ë°”ì¼ í™˜ê²½ì—ì„œì˜ ì„±ëŠ¥ ìµœì í™”'
    ],
    solutions: [
      'Prompt engineeringê³¼ fine-tuningìœ¼ë¡œ ì‘ë‹µ í’ˆì§ˆ ê°œì„ ',
      'ë¡œì»¬ ë°ì´í„° ì²˜ë¦¬ì™€ ì•”í˜¸í™”ë¡œ í”„ë¼ì´ë²„ì‹œ ë³´í˜¸',
      'ìºì‹±ê³¼ ì••ì¶•ìœ¼ë¡œ ë°ì´í„° ì‚¬ìš©ëŸ‰ ìµœì†Œí™”'
    ],
    lessons: [
      'AI ì„œë¹„ìŠ¤ì—ì„œì˜ ì‚¬ìš©ì ì‹ ë¢° êµ¬ì¶• ì¤‘ìš”ì„±',
      'ì ì§„ì  ê¸°ëŠ¥ ê°œì„ ì˜ íš¨ê³¼',
      'ì‚¬ìš©ì í”¼ë“œë°± ìˆ˜ì§‘ì˜ ì¤‘ìš”ì„±'
    ],
    technologies: ['React Native', 'OpenAI API', 'Firebase', 'TensorFlow Lite'],
    teamMembers: [
      { name: 'ë°•AI', role: 'Full Stack Developer', avatar: '/avatars/park.jpg' },
      { name: 'ìµœML', role: 'ML Engineer', avatar: '/avatars/choi.jpg' }
    ]
  },
  {
    id: '3',
    title: 'ì§€ì†ê°€ëŠ¥í•œ íŒ¨ì…˜ í”Œë«í¼',
    description: 'ì¹œí™˜ê²½ íŒ¨ì…˜ ë¸Œëœë“œë“¤ì„ ì—°ê²°í•˜ëŠ” ì´ì»¤ë¨¸ìŠ¤ í”Œë«í¼ì„ ë””ìì¸í•˜ê³  ê°œë°œí–ˆìŠµë‹ˆë‹¤. ì§€ì†ê°€ëŠ¥ì„± ì§€í‘œì™€ ë¸Œëœë“œ ìŠ¤í† ë¦¬ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ í•œ ë…íŠ¹í•œ UXë¥¼ ì œê³µí•©ë‹ˆë‹¤.',
    author: {
      name: 'ì´ê·¸ë¦°',
      avatar: '/avatars/lee.jpg',
      level: 8,
      reputation: 1245
    },
    category: 'ì´ì»¤ë¨¸ìŠ¤',
    tags: ['Next.js', 'Tailwind CSS', 'Stripe', 'Sustainability', 'E-commerce'],
    images: [
      '/projects/eco-fashion-1.jpg',
      '/projects/eco-fashion-2.jpg',
      '/projects/eco-fashion-3.jpg'
    ],
    links: {
      demo: 'https://eco-fashion-demo.com',
      website: 'https://green-fashion.com'
    },
    stats: {
      views: 654,
      likes: 42,
      comments: 12
    },
    createdAt: '2024-01-08',
    isFeatured: true,
    challenges: [
      'ë³µì¡í•œ ì§€ì†ê°€ëŠ¥ì„± ë°ì´í„°ì˜ ì‹œê°í™”',
      'ë‹¤ì–‘í•œ ë¸Œëœë“œ ìš”êµ¬ì‚¬í•­ í†µí•©',
      'ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ê²°ì œ ì‹œìŠ¤í…œ êµ¬ì¶•'
    ],
    solutions: [
      'ì¸í„°ë™í‹°ë¸Œ ì°¨íŠ¸ì™€ ì¸í¬ê·¸ë˜í”½ìœ¼ë¡œ ë°ì´í„° í‘œí˜„',
      'ëª¨ë“ˆì‹ ì•„í‚¤í…ì²˜ë¡œ í™•ì¥ì„± í™•ë³´',
      'Stripe Connectë¥¼ í™œìš©í•œ ë©€í‹°ë²¤ë” ê²°ì œ'
    ],
    lessons: [
      'ì‚¬íšŒì  ê°€ì¹˜ì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ëª¨ë¸ì˜ ì¡°í™”',
      'ì‚¬ìš©ì êµìœ¡ì˜ ì¤‘ìš”ì„±',
      'ìŠ¤í† ë¦¬í…”ë§ì´ ì£¼ëŠ” ë¸Œëœë“œ ì°¨ë³„í™” íš¨ê³¼'
    ],
    technologies: ['Next.js', 'Tailwind CSS', 'Stripe', 'PostgreSQL', 'Vercel']
  }
]

const categories = ['ì „ì²´', 'ì›¹ ê°œë°œ', 'ëª¨ë°”ì¼ ì•±', 'ì´ì»¤ë¨¸ìŠ¤', 'ê²Œì„', 'ë””ìì¸', 'ë°ì´í„° ê³¼í•™']
const sortOptions = [
  { key: 'latest', label: 'ìµœì‹ ìˆœ' },
  { key: 'popular', label: 'ì¸ê¸°ìˆœ' },
  { key: 'likes', label: 'ì¢‹ì•„ìš”ìˆœ' },
  { key: 'views', label: 'ì¡°íšŒìˆ˜ìˆœ' }
]

export default function ProjectShowcase({ searchQuery }: ProjectShowcaseProps) {
  const [selectedCategory, setSelectedCategory] = useState('ì „ì²´')
  const [sortBy, setSortBy] = useState<'latest' | 'popular' | 'likes' | 'views'>('latest')

  const filteredProjects = mockProjects.filter(project => {
    const matchesSearch = project.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                         project.description.toLowerCase().includes(searchQuery.toLowerCase()) ||
                         project.tags.some(tag => tag.toLowerCase().includes(searchQuery.toLowerCase()))
    
    const matchesCategory = selectedCategory === 'ì „ì²´' || project.category === selectedCategory
    
    return matchesSearch && matchesCategory
  }).sort((a, b) => {
    switch (sortBy) {
      case 'popular':
        return (b.stats.views + b.stats.likes) - (a.stats.views + a.stats.likes)
      case 'likes':
        return b.stats.likes - a.stats.likes
      case 'views':
        return b.stats.views - a.stats.views
      case 'latest':
      default:
        return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
    }
  })

  const featuredProjects = mockProjects.filter(project => project.isFeatured)

  const formatDate = (dateString: string) => {
    return new Date(dateString).toLocaleDateString('ko-KR', {
      year: 'numeric',
      month: 'long',
      day: 'numeric'
    })
  }

  return (
    <div className="space-y-4">


      {/* í”„ë¡œì íŠ¸ ëª©ë¡ */}
      <div className="bg-white border border-gray-200 rounded-lg overflow-hidden">

        {filteredProjects.length === 0 ? (
          <div className="p-8 text-center">
            <Image className="w-8 h-8 text-gray-400 mx-auto mb-3" />
            <h3 className="text-base font-medium text-gray-900 mb-1">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
            <p className="text-sm text-gray-500">ë‹¤ë¥¸ ì¡°ê±´ìœ¼ë¡œ ê²€ìƒ‰í•´ë³´ì„¸ìš”.</p>
          </div>
        ) : (
          <div className="divide-y divide-gray-100">
            {filteredProjects.map((project, index) => (
              <div key={project.id} className={`p-4 hover:bg-gray-50 transition-colors cursor-pointer ${index === filteredProjects.length - 1 ? '' : ''}`}>
                <div className="flex justify-between items-start mb-3">
                  <div className="flex-1">
                    <div className="flex items-center gap-2 mb-2">
                      <h3 className="text-base font-medium text-gray-900">{project.title}</h3>
                      <span className="px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded-full">
                        {project.category}
                      </span>
                      {project.isFeatured && (
                        <Award className="w-4 h-4 text-yellow-500" />
                      )}
                    </div>
                    
                    <p className="text-sm text-gray-600 mb-3 line-clamp-2">{project.description}</p>
                    
                    {/* ê¸°ìˆ  ìŠ¤íƒ */}
                    <div className="flex flex-wrap gap-1 mb-3">
                      {project.technologies.slice(0, 4).map((tech, index) => (
                        <span key={index} className="px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded">
                          {tech}
                        </span>
                      ))}
                      {project.technologies.length > 4 && (
                        <span className="px-2 py-1 text-xs text-gray-500">+{project.technologies.length - 4}</span>
                      )}
                    </div>

                    {/* íŒ€ ë©¤ë²„ */}
                    {project.teamMembers && (
                      <div className="mb-3">
                        <div className="flex items-center gap-2 text-xs text-gray-600">
                          <User className="w-3 h-3" />
                          <span>íŒ€:</span>
                          {project.teamMembers.slice(0, 3).map((member, index) => (
                            <span key={index}>{member.name}{index < 2 && index < project.teamMembers!.length - 1 ? ', ' : ''}</span>
                          ))}
                          {project.teamMembers.length > 3 && (
                            <span>ì™¸ {project.teamMembers.length - 3}ëª…</span>
                          )}
                        </div>
                      </div>
                    )}
                  </div>
                  
                  {/* í”„ë¡œì íŠ¸ ì¸ë„¤ì¼ */}
                  <div className="w-20 h-16 bg-gray-100 rounded border border-gray-200 ml-4 flex items-center justify-center">
                    {project.videoUrl ? (
                      <Video className="w-4 h-4 text-gray-400" />
                    ) : (
                      <Image className="w-4 h-4 text-gray-400" />
                    )}
                  </div>
                </div>

                {/* ë„ì „ê³¼ì œì™€ í•´ê²°ì±… */}
                <div className="grid grid-cols-1 md:grid-cols-2 gap-3 mb-3 p-3 bg-gray-50 rounded-lg">
                  <div>
                    <h5 className="text-xs font-medium text-gray-700 mb-1">ì£¼ìš” ë„ì „ê³¼ì œ</h5>
                    <ul className="text-xs text-gray-600 space-y-1">
                      {project.challenges.slice(0, 1).map((challenge, index) => (
                        <li key={index} className="flex items-start gap-1">
                          <span className="text-red-500 mt-0.5">â€¢</span>
                          <span className="line-clamp-1">{challenge}</span>
                        </li>
                      ))}
                    </ul>
                  </div>
                  <div>
                    <h5 className="text-xs font-medium text-gray-700 mb-1">í•µì‹¬ í•´ê²°ì±…</h5>
                    <ul className="text-xs text-gray-600 space-y-1">
                      {project.solutions.slice(0, 1).map((solution, index) => (
                        <li key={index} className="flex items-start gap-1">
                          <span className="text-green-500 mt-0.5">â€¢</span>
                          <span className="line-clamp-1">{solution}</span>
                        </li>
                      ))}
                    </ul>
                  </div>
                </div>

                <div className="flex items-center justify-between text-xs text-gray-500 border-t border-gray-100 pt-3">
                  <div className="flex items-center gap-3">
                    <div className="flex items-center gap-2">
                      <User className="w-3 h-3" />
                      <span>{project.author.name}</span>
                      <span className="text-xs text-gray-600">Lv.{project.author.level}</span>
                    </div>
                    <div className="flex items-center gap-1">
                      <Eye className="w-3 h-3" />
                      {project.stats.views.toLocaleString()}íšŒ
                    </div>
                    <div className="flex items-center gap-1">
                      <Heart className="w-3 h-3" />
                      {project.stats.likes}
                    </div>
                  </div>
                  
                  <div className="flex items-center gap-2">
                    <span className="text-xs text-gray-400">
                      {formatDate(project.createdAt)}
                    </span>
                    <Button variant="outline" size="sm">
                      <ExternalLink className="w-3 h-3 mr-1" />
                      ë³´ê¸°
                    </Button>
                  </div>
                </div>
              </div>
            ))}
          </div>
        )}
      </div>

      {/* í†µê³„ ì„¹ì…˜ */}
      <div className="bg-white border border-gray-200 rounded-lg p-4">
        <div className="flex items-center gap-2 mb-3">
          <TrendingUp className="w-4 h-4 text-green-500" />
          <h3 className="text-sm font-medium text-gray-900">ì‡¼ì¼€ì´ìŠ¤ í†µê³„</h3>
        </div>
        
        <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
          <div className="text-center">
            <div className="text-xl font-semibold text-gray-900">{mockProjects.length}</div>
            <div className="text-xs text-gray-500">ì´ í”„ë¡œì íŠ¸</div>
          </div>
          <div className="text-center">
            <div className="text-xl font-semibold text-gray-900">
              {mockProjects.reduce((sum, project) => sum + project.stats.views, 0).toLocaleString()}
            </div>
            <div className="text-xs text-gray-500">ì´ ì¡°íšŒìˆ˜</div>
          </div>
          <div className="text-center">
            <div className="text-xl font-semibold text-gray-900">
              {mockProjects.reduce((sum, project) => sum + project.stats.likes, 0)}
            </div>
            <div className="text-xs text-gray-500">ì´ ì¢‹ì•„ìš”</div>
          </div>
          <div className="text-center">
            <div className="text-xl font-semibold text-gray-900">{categories.length - 1}</div>
            <div className="text-xs text-gray-500">ì¹´í…Œê³ ë¦¬ ìˆ˜</div>
          </div>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="frontend/src/components/home/HomeTaskDashboard.tsx">
'use client'

import React, { useState, useEffect, useMemo } from 'react'
import { GTDTask, HomeDashboardFilter, TaskStatus, MomentumScore } from '@/types/task.types'
import TaskCard from '@/components/tasks/TaskCard'
import { Search, Filter, Plus } from 'lucide-react'

interface HomeTaskDashboardProps {
  tasks: GTDTask[]
  onTaskToggle?: (taskId: string) => void
  onTaskEdit?: (task: GTDTask) => void
  onCreateTask?: () => void
  isLoading?: boolean
}

export default function HomeTaskDashboard({
  tasks,
  onTaskToggle,
  onTaskEdit,
  onCreateTask,
  isLoading = false
}: HomeTaskDashboardProps) {
  const [activeFilter, setActiveFilter] = useState<HomeDashboardFilter>('today')
  const [searchQuery, setSearchQuery] = useState('')
  const [showSearch, setShowSearch] = useState(false)

  // ëª¨ë©˜í…€ ì ìˆ˜ ê³„ì‚° í•¨ìˆ˜
  const calculateMomentumScore = (task: GTDTask): MomentumScore => {
    let reach = 5 // ê¸°ë³¸ê°’
    let impact = 5
    let confidence = task.clarified ? 8 : 4
    let effort = 5

    // Reach: í”„ë¡œì íŠ¸ ì¤‘ìš”ë„ (í”„ë¡œì íŠ¸ê°€ ìˆìœ¼ë©´ +2)
    if (task.projectId) {
      reach += 2
    }

    // Impact: ë§ˆê°ì¼ê³¼ ìš°ì„ ìˆœìœ„ ê¸°ë°˜
    if (task.dueDate) {
      const dueDate = new Date(task.dueDate)
      const now = new Date()
      const daysDiff = Math.ceil((dueDate.getTime() - now.getTime()) / (1000 * 3600 * 24))
      
      if (daysDiff < 0) impact = 10 // ì§€ë‚œ ì—…ë¬´
      else if (daysDiff === 0) impact = 9 // ì˜¤ëŠ˜ ë§ˆê°
      else if (daysDiff === 1) impact = 8 // ë‚´ì¼ ë§ˆê°
      else if (daysDiff <= 3) impact = 7 // 3ì¼ ì´ë‚´
      else if (daysDiff <= 7) impact = 6 // ì¼ì£¼ì¼ ì´ë‚´
      else impact = 4 // ê·¸ ì´í›„
    }

    // ìš°ì„ ìˆœìœ„ ë³´ë„ˆìŠ¤
    switch (task.priority) {
      case 'urgent': impact += 3; break
      case 'high': impact += 2; break
      case 'medium': impact += 1; break
      case 'low': break
    }

    // Effort: ì˜ˆìƒ ì‹œê°„ ì—­ê°€ì¤‘ì¹˜
    if (task.estimatedHours) {
      if (task.estimatedHours <= 1) effort = 9
      else if (task.estimatedHours <= 2) effort = 8
      else if (task.estimatedHours <= 4) effort = 6
      else if (task.estimatedHours <= 8) effort = 4
      else effort = 2
    }

    // 2ë¶„ ê·œì¹™ ë³´ë„ˆìŠ¤
    if (task.canComplete2Minutes) {
      effort = 10
      confidence = 10
    }

    // ì ìˆ˜ ì •ê·œí™” (0-10)
    reach = Math.min(10, Math.max(0, reach))
    impact = Math.min(10, Math.max(0, impact))
    confidence = Math.min(10, Math.max(0, confidence))
    effort = Math.min(10, Math.max(0, effort))

    // ì´ì  ê³„ì‚° (ê°€ì¤‘ í‰ê· )
    const total = (reach * 0.2 + impact * 0.4 + confidence * 0.2 + effort * 0.2)

    return { reach, impact, confidence, effort, total }
  }

  // ì—…ë¬´ ëª©ë¡ í•„í„°ë§ ë° ì •ë ¬
  const filteredAndSortedTasks = useMemo(() => {
    let filtered = tasks

    // ê²€ìƒ‰ í•„í„°ë§
    if (searchQuery.trim()) {
      const query = searchQuery.toLowerCase()
      filtered = filtered.filter(task => 
        task.title.toLowerCase().includes(query) ||
        task.description?.toLowerCase().includes(query) ||
        task.project?.name.toLowerCase().includes(query)
      )
    }

    // ìƒíƒœë³„ í•„í„°ë§
    switch (activeFilter) {
      case 'today':
        filtered = filtered.filter(task => 
          task.status !== TaskStatus.DONE && 
          task.status !== TaskStatus.CANCELLED &&
          task.gtdContext === 'next'
        )
        break
      case 'completed':
        filtered = filtered.filter(task => 
          task.status === TaskStatus.DONE
        )
        break
      case 'someday':
        filtered = filtered.filter(task => 
          task.gtdContext === 'someday'
        )
        break
      case 'all':
        // ëª¨ë“  ì—…ë¬´ í‘œì‹œ
        break
    }

    // ëª¨ë©˜í…€ ì ìˆ˜ ê³„ì‚° ë° ì—…ë°ì´íŠ¸
    const tasksWithScore = filtered.map(task => ({
      ...task,
      momentumScore: calculateMomentumScore(task)
    }))

    // ì •ë ¬: ì™„ë£Œëœ ì—…ë¬´ëŠ” ë³„ë„, ë‚˜ë¨¸ì§€ëŠ” ëª¨ë©˜í…€ ì ìˆ˜ìˆœ
    if (activeFilter === 'completed') {
      return tasksWithScore.sort((a, b) => 
        new Date(b.completedAt || b.updatedAt).getTime() - 
        new Date(a.completedAt || a.updatedAt).getTime()
      )
    } else {
      return tasksWithScore.sort((a, b) => 
        b.momentumScore.total - a.momentumScore.total
      )
    }
  }, [tasks, activeFilter, searchQuery])

  // í•„í„° ì˜µì…˜
  const filterOptions = [
    { key: 'today' as const, label: 'ì˜¤ëŠ˜', count: filteredAndSortedTasks.length },
    { key: 'completed' as const, label: 'ì™„ë£Œë¨', count: tasks.filter(t => t.status === TaskStatus.DONE).length },
    { key: 'all' as const, label: 'ì „ì²´', count: tasks.length },
    { key: 'someday' as const, label: 'ë‚˜ì¤‘ì—', count: tasks.filter(t => t.gtdContext === 'someday').length },
  ]

  const renderFilterTabs = () => (
    <div className="flex items-center gap-1 p-1 bg-gray-100 rounded-lg mb-4">
      {filterOptions.map(option => (
        <button
          key={option.key}
          onClick={() => setActiveFilter(option.key)}
          className={`px-3 py-2 rounded-md text-sm font-medium transition-colors flex-1 ${
            activeFilter === option.key
              ? 'bg-white text-gray-900 shadow-sm'
              : 'text-gray-600 hover:text-gray-900 hover:bg-gray-50'
          }`}
        >
          {option.label}
          {option.count > 0 && (
            <span className={`ml-1 text-xs ${
              activeFilter === option.key ? 'text-gray-600' : 'text-gray-400'
            }`}>
              {option.count}
            </span>
          )}
        </button>
      ))}
    </div>
  )

  const renderSearchBar = () => (
    <div className={`transition-all duration-300 overflow-hidden ${
      showSearch ? 'max-h-20 mb-4' : 'max-h-0'
    }`}>
      <div className="relative">
        <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4" />
        <input
          type="text"
          placeholder="ì—…ë¬´, í”„ë¡œì íŠ¸ ê²€ìƒ‰..."
          value={searchQuery}
          onChange={(e) => setSearchQuery(e.target.value)}
          className="w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg 
                   focus:ring-2 focus:ring-blue-500 focus:border-transparent 
                   bg-white text-sm"
          autoFocus={showSearch}
        />
      </div>
    </div>
  )

  const renderTopSection = () => (
    <div className="p-4 border-b border-gray-100">
      {/* í—¤ë” */}
      <div className="flex items-center justify-between mb-4">
        <h1 className="text-lg font-semibold text-gray-900">
          ë‚´ ì—…ë¬´
        </h1>
        <div className="flex items-center gap-2">
          <button
            onClick={() => setShowSearch(!showSearch)}
            className={`p-2 rounded-lg transition-colors ${
              showSearch ? 'bg-blue-100 text-blue-600' : 'hover:bg-gray-100'
            }`}
            aria-label="ê²€ìƒ‰"
          >
            <Search className="w-5 h-5" />
          </button>
          <button
            onClick={onCreateTask}
            className="p-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition-colors"
            aria-label="ì—…ë¬´ ì¶”ê°€"
          >
            <Plus className="w-5 h-5" />
          </button>
        </div>
      </div>

      {/* ê²€ìƒ‰ë°” */}
      {renderSearchBar()}

      {/* í•„í„° íƒ­ */}
      {renderFilterTabs()}
    </div>
  )

  const renderTaskList = () => {
    if (isLoading) {
      return (
        <div className="p-8 text-center">
          <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"></div>
          <p className="text-gray-500 mt-2">ì—…ë¬´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
        </div>
      )
    }

    if (filteredAndSortedTasks.length === 0) {
      return (
        <div className="p-8 text-center">
          <div className="text-gray-400 mb-2">
            {activeFilter === 'today' && 'ğŸ“‹'}
            {activeFilter === 'completed' && 'âœ…'}
            {activeFilter === 'someday' && 'ğŸ”®'}
            {activeFilter === 'all' && 'ğŸ“'}
          </div>
          <h3 className="text-lg font-medium text-gray-600 mb-1">
            {searchQuery ? 'ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤' : 
             activeFilter === 'today' ? 'ì˜¤ëŠ˜ í•  ì—…ë¬´ê°€ ì—†ìŠµë‹ˆë‹¤' :
             activeFilter === 'completed' ? 'ì™„ë£Œëœ ì—…ë¬´ê°€ ì—†ìŠµë‹ˆë‹¤' :
             activeFilter === 'someday' ? 'ë‚˜ì¤‘ì— í•  ì—…ë¬´ê°€ ì—†ìŠµë‹ˆë‹¤' :
             'ì—…ë¬´ê°€ ì—†ìŠµë‹ˆë‹¤'}
          </h3>
          <p className="text-gray-500 text-sm">
            {!searchQuery && activeFilter === 'today' && 'ìƒˆë¡œìš´ ì—…ë¬´ë¥¼ ì¶”ê°€í•´ë³´ì„¸ìš”!'}
          </p>
        </div>
      )
    }

    return (
      <div className="divide-y divide-gray-100">
        {filteredAndSortedTasks.map((task, index) => (
          <TaskCard
            key={task.id}
            task={task}
            isLast={index === filteredAndSortedTasks.length - 1}
            onToggleComplete={onTaskToggle}
            onEdit={onTaskEdit}
            showMomentumScore={activeFilter === 'today'}
          />
        ))}
      </div>
    )
  }

  return (
    <div className="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
      {renderTopSection()}
      {renderTaskList()}
    </div>
  )
}
</file>

<file path="frontend/src/components/inbox/CPERModal.tsx">
'use client'

import { useState, useEffect, useRef } from 'react'
import { 
  XMarkIcon,
  InboxIcon,
  ArrowRightIcon,
  ArrowLeftIcon,
  CheckCircleIcon,
  LightBulbIcon,
  ClipboardDocumentIcon,
  FolderPlusIcon,
  FlagIcon,
  ClockIcon,
  PlayIcon,
  ChartBarIcon
} from '@heroicons/react/24/outline'
import { HierarchyType, CPERStage, WorklyTask, HierarchyChoice } from '@/shared/types/workly-core.types'

// CPER ëª¨ë‹¬ Props
interface CPERModalProps {
  isOpen: boolean
  onClose: () => void
  initialContent?: string
  onTaskCreated?: (task: WorklyTask) => void
  onInboxItemCreated?: (inboxItem: any) => void
}

// CPER ë‹¨ê³„ ì •ì˜
enum CPERStep {
  CAPTURE = 0,
  PLAN = 1,
  EXECUTE = 2,
  REVIEW = 3
}

// ê³„íš ë‹¨ê³„ì˜ í•˜ìœ„ ë‹¨ê³„
enum PlanSubStep {
  CLARIFY = 0,
  ORGANIZE = 1,
  DETAIL = 2
}

// ìˆ˜ì§‘ íƒ€ì…
const captureTypes = [
  {
    id: 'idea' as const,
    label: 'ì•„ì´ë””ì–´',
    description: 'ë– ì˜¤ë¥¸ ìƒê°ì´ë‚˜ ì˜ê°ì„ ìˆ˜ì§‘',
    icon: LightBulbIcon,
    color: 'text-amber-600 bg-amber-100',
    borderColor: 'border-amber-200'
  },
  {
    id: 'task' as const,
    label: 'ì—…ë¬´',
    description: 'í•´ì•¼ í•  ì‘ì—…ì´ë‚˜ í•  ì¼',
    icon: ClipboardDocumentIcon,
    color: 'text-blue-600 bg-blue-100',
    borderColor: 'border-blue-200'
  },
  {
    id: 'project' as const,
    label: 'í”„ë¡œì íŠ¸',
    description: 'í° ëª©í‘œë‚˜ ì—¬ëŸ¬ ì—…ë¬´ì˜ ë¬¶ìŒ',
    icon: FolderPlusIcon,
    color: 'text-green-600 bg-green-100',
    borderColor: 'border-green-200'
  },
  {
    id: 'goal' as const,
    label: 'ëª©í‘œ',
    description: 'ì¥ê¸°ì ì¸ ëª©í‘œë‚˜ ì„±ê³¼ì§€í‘œ',
    icon: FlagIcon,
    color: 'text-purple-600 bg-purple-100',
    borderColor: 'border-purple-200'
  }
]

// ë‹¨ê³„ë³„ í…Œë§ˆ ìƒ‰ìƒ
const stageThemes = {
  [CPERStep.CAPTURE]: {
    primary: 'blue',
    bg: 'bg-blue-50',
    border: 'border-blue-200',
    text: 'text-blue-900',
    button: 'bg-blue-500 hover:bg-blue-600'
  },
  [CPERStep.PLAN]: {
    primary: 'green',
    bg: 'bg-green-50',
    border: 'border-green-200', 
    text: 'text-green-900',
    button: 'bg-green-500 hover:bg-green-600'
  },
  [CPERStep.EXECUTE]: {
    primary: 'amber',
    bg: 'bg-amber-50',
    border: 'border-amber-200',
    text: 'text-amber-900',
    button: 'bg-amber-500 hover:bg-amber-600'
  },
  [CPERStep.REVIEW]: {
    primary: 'purple',
    bg: 'bg-purple-50',
    border: 'border-purple-200',
    text: 'text-purple-900',
    button: 'bg-purple-500 hover:bg-purple-600'
  }
}

export default function CPERModal({
  isOpen,
  onClose,
  initialContent = '',
  onTaskCreated,
  onInboxItemCreated
}: CPERModalProps) {
  // ë‹¨ê³„ ìƒíƒœ
  const [currentStep, setCurrentStep] = useState<CPERStep>(CPERStep.CAPTURE)
  const [planSubStep, setPlanSubStep] = useState<PlanSubStep>(PlanSubStep.CLARIFY)
  
  // ìˆ˜ì§‘ ë‹¨ê³„ ë°ì´í„°
  const [captureData, setCaptureData] = useState({
    type: 'idea' as const,
    title: '',
    content: initialContent,
    tags: [] as string[]
  })

  // ê³„íš ë‹¨ê³„ ë°ì´í„°
  const [planData, setPlanData] = useState({
    // ëª…í™•í™”
    isActionable: false,
    canComplete2Minutes: false,
    nextAction: '',
    timeEstimate: 30, // ë¶„ ë‹¨ìœ„
    
    // êµ¬ì¡°í™”
    hierarchyChoice: {
      type: HierarchyType.INDEPENDENT,
      projectId: undefined,
      goalId: undefined
    } as HierarchyChoice,
    
    // ìƒì„¸ ê³„íš
    priority: 'medium' as const,
    dueDate: '',
    description: '',
    finalTitle: ''
  })

  // ì‹¤í–‰ ë‹¨ê³„ ë°ì´í„°
  const [executeData, setExecuteData] = useState({
    isToday: false,
    isFocused: false,
    startImmediately: false
  })

  // UI ìƒíƒœ
  const [isTransitioning, setIsTransitioning] = useState(false)
  const modalRef = useRef<HTMLDivElement>(null)

  // ESC í‚¤ ì²˜ë¦¬
  useEffect(() => {
    const handleEsc = (e: KeyboardEvent) => {
      if (e.key === 'Escape') onClose()
    }
    if (isOpen) {
      document.addEventListener('keydown', handleEsc)
      return () => document.removeEventListener('keydown', handleEsc)
    }
  }, [isOpen, onClose])

  // ëª¨ë‹¬ ì´ˆê¸°í™”
  useEffect(() => {
    if (isOpen) {
      setCurrentStep(CPERStep.CAPTURE)
      setPlanSubStep(PlanSubStep.CLARIFY)
      setCaptureData({
        type: 'idea',
        title: '',
        content: initialContent,
        tags: []
      })
      setPlanData({
        isActionable: false,
        canComplete2Minutes: false,
        nextAction: '',
        timeEstimate: 30,
        hierarchyChoice: {
          type: HierarchyType.INDEPENDENT
        },
        priority: 'medium',
        dueDate: '',
        description: '',
        finalTitle: ''
      })
      setExecuteData({
        isToday: false,
        isFocused: false,
        startImmediately: false
      })
    }
  }, [isOpen, initialContent])

  // ë‹¨ê³„ ì „í™˜
  const handleStepTransition = async (newStep: CPERStep) => {
    setIsTransitioning(true)
    
    // ì• ë‹ˆë©”ì´ì…˜ ë”œë ˆì´
    setTimeout(() => {
      setCurrentStep(newStep)
      setIsTransitioning(false)
    }, 150)
  }

  // ë¹ ë¥¸ ìˆ˜ì§‘ (1ë‹¨ê³„ë§Œ ìˆ˜í–‰)
  const handleQuickCapture = async () => {
    if (!captureData.content.trim()) return

    const inboxItem = {
      id: Date.now().toString(),
      title: captureData.title || captureData.content.substring(0, 50),
      content: captureData.content,
      type: captureData.type,
      status: 'captured',
      priority: 'medium',
      tags: captureData.tags,
      createdAt: new Date().toISOString()
    }

    onInboxItemCreated?.(inboxItem)
    onClose()
  }

  // ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰
  const handleNextStep = () => {
    if (currentStep === CPERStep.CAPTURE) {
      handleStepTransition(CPERStep.PLAN)
    } else if (currentStep === CPERStep.PLAN) {
      if (planSubStep < PlanSubStep.DETAIL) {
        setPlanSubStep(planSubStep + 1)
      } else {
        handleStepTransition(CPERStep.EXECUTE)
      }
    } else if (currentStep === CPERStep.EXECUTE) {
      handleCreateTask()
    }
  }

  // ì´ì „ ë‹¨ê³„ë¡œ ì´ë™
  const handlePreviousStep = () => {
    if (currentStep === CPERStep.EXECUTE) {
      handleStepTransition(CPERStep.PLAN)
      setPlanSubStep(PlanSubStep.DETAIL)
    } else if (currentStep === CPERStep.PLAN) {
      if (planSubStep > PlanSubStep.CLARIFY) {
        setPlanSubStep(planSubStep - 1)
      } else {
        handleStepTransition(CPERStep.CAPTURE)
      }
    }
  }

  // ìµœì¢… ì—…ë¬´ ìƒì„±
  const handleCreateTask = async () => {
    const task: WorklyTask = {
      id: Date.now().toString(),
      title: planData.finalTitle || captureData.title || captureData.content.substring(0, 50),
      description: planData.description || captureData.content,
      status: 'todo' as any,
      priority: planData.priority as any,
      type: 'task' as any,
      
      hierarchyType: planData.hierarchyChoice.type,
      projectId: planData.hierarchyChoice.projectId,
      goalId: planData.hierarchyChoice.goalId,
      
      cperWorkflow: {
        stage: CPERStage.PLANNED,
        capturedAt: new Date().toISOString(),
        plannedAt: new Date().toISOString(),
        planningData: {
          isActionable: planData.isActionable,
          canComplete2Minutes: planData.canComplete2Minutes,
          timeEstimate: planData.timeEstimate,
          priorityReasoning: `ì‚¬ìš©ìê°€ ${planData.priority} ìš°ì„ ìˆœìœ„ë¡œ ì„¤ì •`,
          hierarchyChoice: planData.hierarchyChoice,
          nextAction: planData.nextAction
        }
      },
      
      isToday: executeData.isToday,
      isFocused: executeData.isFocused,
      nextAction: planData.nextAction,
      estimatedMinutes: planData.timeEstimate,
      actualMinutes: 0,
      
      assigneeId: 'user1', // TODO: ì‹¤ì œ ì‚¬ìš©ì ID
      assignee: {
        id: 'user1',
        name: 'ê¹€ì›Œí´ë¦¬',
        email: 'workly@example.com'
      },
      
      tags: captureData.tags,
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString()
    }

    onTaskCreated?.(task)
    
    if (executeData.startImmediately) {
      // TODO: ì¦‰ì‹œ ì‹¤í–‰ ëª¨ë“œë¡œ ì „í™˜
      console.log('ì¦‰ì‹œ ì‹¤í–‰ ëª¨ë“œ ì‹œì‘:', task.title)
    }
    
    onClose()
  }

  // í˜„ì¬ ë‹¨ê³„ì˜ í…Œë§ˆ
  const currentTheme = stageThemes[currentStep]

  // ë‹¤ìŒ ë‹¨ê³„ ì§„í–‰ ê°€ëŠ¥ ì—¬ë¶€
  const canProceed = () => {
    if (currentStep === CPERStep.CAPTURE) {
      return captureData.content.trim().length > 0
    } else if (currentStep === CPERStep.PLAN) {
      if (planSubStep === PlanSubStep.CLARIFY) {
        return planData.nextAction.trim().length > 0
      } else if (planSubStep === PlanSubStep.ORGANIZE) {
        return true // ê³„ì¸µêµ¬ì¡°ëŠ” ê¸°ë³¸ê°’ ì‚¬ìš© ê°€ëŠ¥
      } else {
        return (planData.finalTitle || captureData.title || captureData.content).trim().length > 0
      }
    } else if (currentStep === CPERStep.EXECUTE) {
      return true
    }
    return false
  }

  if (!isOpen) return null

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-25">
      <div 
        ref={modalRef}
        className={`bg-white rounded-2xl shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden transition-all duration-300 ${
          isTransitioning ? 'scale-95 opacity-75' : 'scale-100 opacity-100'
        }`}
      >
        {/* í—¤ë” */}
        <div className={`flex items-center justify-between p-6 border-b-2 ${currentTheme.border} ${currentTheme.bg}`}>
          <div className="flex items-center space-x-4">
            {/* ë‹¨ê³„ ì•„ì´ì½˜ */}
            <div className={`w-12 h-12 rounded-xl ${currentTheme.button} flex items-center justify-center text-white`}>
              {currentStep === CPERStep.CAPTURE && <InboxIcon className="w-6 h-6" />}
              {currentStep === CPERStep.PLAN && <LightBulbIcon className="w-6 h-6" />}
              {currentStep === CPERStep.EXECUTE && <PlayIcon className="w-6 h-6" />}
              {currentStep === CPERStep.REVIEW && <ChartBarIcon className="w-6 h-6" />}
            </div>
            
            {/* ë‹¨ê³„ ì •ë³´ */}
            <div>
              <h2 className={`text-xl font-bold ${currentTheme.text}`}>
                {currentStep === CPERStep.CAPTURE && 'Capture - ìˆ˜ì§‘'}
                {currentStep === CPERStep.PLAN && 'Plan - ê³„íš'}
                {currentStep === CPERStep.EXECUTE && 'Execute - ì‹¤í–‰'}
                {currentStep === CPERStep.REVIEW && 'Review - ê²€í† '}
              </h2>
              <p className="text-sm text-gray-600">
                {currentStep === CPERStep.CAPTURE && 'ì•„ì´ë””ì–´ë‚˜ í•  ì¼ì„ ë¹ ë¥´ê²Œ ìˆ˜ì§‘í•˜ì„¸ìš”'}
                {currentStep === CPERStep.PLAN && 'ìˆ˜ì§‘ëœ ë‚´ìš©ì„ êµ¬ì²´ì ìœ¼ë¡œ ê³„íší•˜ì„¸ìš”'}
                {currentStep === CPERStep.EXECUTE && 'ì‹¤í–‰ ì¤€ë¹„ë¥¼ ì™„ë£Œí•˜ì„¸ìš”'}
                {currentStep === CPERStep.REVIEW && 'ê²°ê³¼ë¥¼ ê²€í† í•˜ê³  ê°œì„ ì ì„ ì°¾ìœ¼ì„¸ìš”'}
              </p>
            </div>
          </div>

          {/* ì§„í–‰ë¥  í‘œì‹œ */}
          <div className="flex items-center space-x-3">
            <div className="flex space-x-1">
              {[0, 1, 2, 3].map((step) => (
                <div
                  key={step}
                  className={`w-3 h-3 rounded-full transition-all duration-200 ${
                    step <= currentStep 
                      ? currentTheme.button.replace('hover:', '').replace('bg-', 'bg-').split(' ')[0]
                      : 'bg-gray-200'
                  }`}
                />
              ))}
            </div>
            <span className="text-sm text-gray-500">{currentStep + 1}/4</span>
          </div>

          {/* ë‹«ê¸° ë²„íŠ¼ */}
          <button
            onClick={onClose}
            className="w-8 h-8 rounded-lg hover:bg-gray-100 flex items-center justify-center transition-colors"
          >
            <XMarkIcon className="w-5 h-5 text-gray-500" />
          </button>
        </div>

        {/* ì»¨í…ì¸  ì˜ì—­ */}
        <div className="p-6 max-h-[60vh] overflow-y-auto">
          {/* 1ë‹¨ê³„: Capture */}
          {currentStep === CPERStep.CAPTURE && (
            <CaptureStep
              data={captureData}
              onChange={setCaptureData}
              onQuickCapture={handleQuickCapture}
            />
          )}

          {/* 2ë‹¨ê³„: Plan */}
          {currentStep === CPERStep.PLAN && (
            <PlanStep
              captureData={captureData}
              planData={planData}
              subStep={planSubStep}
              onChange={setPlanData}
            />
          )}

          {/* 3ë‹¨ê³„: Execute */}
          {currentStep === CPERStep.EXECUTE && (
            <ExecuteStep
              captureData={captureData}
              planData={planData}
              executeData={executeData}
              onChange={setExecuteData}
            />
          )}
        </div>

        {/* í•˜ë‹¨ ì•¡ì…˜ ë²„íŠ¼ */}
        <div className={`px-6 py-4 border-t ${currentTheme.border} ${currentTheme.bg} flex justify-between`}>
          <div className="flex space-x-3">
            {currentStep > CPERStep.CAPTURE && (
              <button
                onClick={handlePreviousStep}
                className="flex items-center space-x-2 px-4 py-2 text-gray-600 hover:text-gray-800 font-medium transition-colors"
              >
                <ArrowLeftIcon className="w-4 h-4" />
                <span>ì´ì „</span>
              </button>
            )}

            {currentStep === CPERStep.CAPTURE && (
              <button
                onClick={handleQuickCapture}
                disabled={!captureData.content.trim()}
                className="px-4 py-2 text-gray-600 hover:text-gray-800 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
              >
                ë¹ ë¥¸ ìˆ˜ì§‘ë§Œ
              </button>
            )}
          </div>

          <div className="flex space-x-3">
            <button
              onClick={onClose}
              className="px-6 py-2 text-gray-600 hover:text-gray-800 font-medium transition-colors"
            >
              ì·¨ì†Œ
            </button>
            
            <button
              onClick={handleNextStep}
              disabled={!canProceed()}
              className={`px-6 py-2 rounded-lg font-medium text-white transition-all flex items-center space-x-2 ${
                canProceed() 
                  ? currentTheme.button
                  : 'bg-gray-300 cursor-not-allowed'
              }`}
            >
              <span>
                {currentStep === CPERStep.CAPTURE && 'ê³„íší•˜ê¸°'}
                {currentStep === CPERStep.PLAN && planSubStep < PlanSubStep.DETAIL && 'ë‹¤ìŒ'}
                {currentStep === CPERStep.PLAN && planSubStep === PlanSubStep.DETAIL && 'ì‹¤í–‰ ì¤€ë¹„'}
                {currentStep === CPERStep.EXECUTE && 'ì—…ë¬´ ìƒì„±'}
              </span>
              <ArrowRightIcon className="w-4 h-4" />
            </button>
          </div>
        </div>
      </div>
    </div>
  )
}

// 1ë‹¨ê³„: Capture ì»´í¬ë„ŒíŠ¸
interface CaptureStepProps {
  data: any
  onChange: (data: any) => void
  onQuickCapture: () => void
}

function CaptureStep({ data, onChange, onQuickCapture }: CaptureStepProps) {
  const handleTypeSelect = (type: string) => {
    onChange({ ...data, type })
  }

  return (
    <div className="space-y-6">
      {/* íƒ€ì… ì„ íƒ */}
      <div>
        <h3 className="text-lg font-semibold text-gray-900 mb-4">ë¬´ì—‡ì„ ìˆ˜ì§‘í•˜ì‹œê² ì–´ìš”?</h3>
        <div className="grid grid-cols-2 gap-3">
          {captureTypes.map((type) => {
            const Icon = type.icon
            const isSelected = data.type === type.id
            
            return (
              <button
                key={type.id}
                onClick={() => handleTypeSelect(type.id)}
                className={`p-4 rounded-xl border-2 transition-all text-left ${
                  isSelected
                    ? `${type.borderColor} ${type.color.split(' ')[1]} ring-2 ring-opacity-20`
                    : 'border-gray-200 hover:border-gray-300'
                }`}
              >
                <div className="flex items-center space-x-3 mb-2">
                  <div className={`w-8 h-8 rounded-lg ${type.color} flex items-center justify-center`}>
                    <Icon className="w-5 h-5" />
                  </div>
                  <span className="font-medium text-gray-900">{type.label}</span>
                </div>
                <p className="text-xs text-gray-500">{type.description}</p>
              </button>
            )
          })}
        </div>
      </div>

      {/* ë‚´ìš© ì…ë ¥ */}
      <div>
        <label className="block text-sm font-medium text-gray-700 mb-2">
          ë– ì˜¤ë¥¸ ìƒê°ì„ ììœ ë¡­ê²Œ ì ì–´ë³´ì„¸ìš”
        </label>
        <textarea
          value={data.content}
          onChange={(e) => onChange({ ...data, content: e.target.value })}
          placeholder="ì˜ˆ: ì‚¬ìš©ì í”¼ë“œë°±ì„ ì •ë¦¬í•´ì„œ ê°œì„ ì‚¬í•­ì„ ë„ì¶œí•´ì•¼ê² ë‹¤..."
          className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"
          rows={6}
          autoFocus
        />
      </div>

      {/* ì œëª© (ì„ íƒì ) */}
      <div>
        <label className="block text-sm font-medium text-gray-700 mb-2">
          ì œëª© (ì„ íƒì‚¬í•­)
        </label>
        <input
          type="text"
          value={data.title}
          onChange={(e) => onChange({ ...data, title: e.target.value })}
          placeholder="ê°„ë‹¨í•œ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”"
          className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"
        />
      </div>

      {/* ë¹ ë¥¸ ìˆ˜ì§‘ ì•ˆë‚´ */}
      <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
        <div className="flex items-center space-x-2 text-blue-800">
          <CheckCircleIcon className="w-5 h-5" />
          <span className="font-medium">ë¹ ë¥¸ ìˆ˜ì§‘ íŒ</span>
        </div>
        <p className="text-sm text-blue-700 mt-1">
          ì§€ê¸ˆ ë°”ë¡œ ì €ì¥í•˜ê³  ì‹¶ë‹¤ë©´ "ë¹ ë¥¸ ìˆ˜ì§‘ë§Œ" ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”. 
          ë‚˜ì¤‘ì— ìˆ˜ì§‘í•¨ì—ì„œ ë‹¤ì‹œ ì •ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        </p>
      </div>
    </div>
  )
}

// 2ë‹¨ê³„: Plan ì»´í¬ë„ŒíŠ¸ (ë³„ë„ íŒŒì¼ë¡œ ë¶„ë¦¬ ì˜ˆì •)
interface PlanStepProps {
  captureData: any
  planData: any
  subStep: PlanSubStep
  onChange: (data: any) => void
}

function PlanStep({ captureData, planData, subStep, onChange }: PlanStepProps) {
  // ëª…í™•í™” ë‹¨ê³„
  if (subStep === PlanSubStep.CLARIFY) {
    return (
      <div className="space-y-6">
        <h3 className="text-lg font-semibold text-gray-900">ìˆ˜ì§‘í•œ ë‚´ìš©ì„ ëª…í™•íˆ í•´ë³´ì„¸ìš”</h3>
        
        {/* ì‹¤í–‰ ê°€ëŠ¥ì„± í™•ì¸ */}
        <div className="bg-green-50 border border-green-200 rounded-lg p-4">
          <h4 className="font-medium text-green-900 mb-3">ì‹¤í–‰ ê°€ëŠ¥ì„± í™•ì¸</h4>
          
          <div className="space-y-3">
            <label className="flex items-center space-x-3">
              <input
                type="checkbox"
                checked={planData.isActionable}
                onChange={(e) => onChange({ ...planData, isActionable: e.target.checked })}
                className="w-5 h-5 text-green-600 rounded focus:ring-green-500"
              />
              <span className="text-sm text-green-800">ì§€ê¸ˆ ë°”ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” êµ¬ì²´ì ì¸ í–‰ë™ì¸ê°€ìš”?</span>
            </label>
            
            <label className="flex items-center space-x-3">
              <input
                type="checkbox"
                checked={planData.canComplete2Minutes}
                onChange={(e) => onChange({ ...planData, canComplete2Minutes: e.target.checked })}
                className="w-5 h-5 text-green-600 rounded focus:ring-green-500"
              />
              <span className="text-sm text-green-800">2ë¶„ ì•ˆì— ì™„ë£Œí•  ìˆ˜ ìˆë‚˜ìš”?</span>
            </label>
          </div>
        </div>

        {/* ë‹¤ìŒ ì•¡ì…˜ ì •ì˜ */}
        <div>
          <label className="block text-sm font-medium text-gray-700 mb-2">
            ì²« ë²ˆì§¸ë¡œ í•´ì•¼ í•  êµ¬ì²´ì ì¸ í–‰ë™ì€ ë¬´ì—‡ì¸ê°€ìš”? *
          </label>
          <input
            type="text"
            value={planData.nextAction}
            onChange={(e) => onChange({ ...planData, nextAction: e.target.value })}
            placeholder="ì˜ˆ: êµ¬ê¸€ ë“œë¼ì´ë¸Œì—ì„œ í”¼ë“œë°± íŒŒì¼ ì°¾ê¸°"
            className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent"
          />
        </div>

        {/* ì‹œê°„ ì¶”ì • */}
        <div>
          <label className="block text-sm font-medium text-gray-700 mb-2">
            ì˜ˆìƒ ì†Œìš” ì‹œê°„ (ë¶„)
          </label>
          <input
            type="number"
            value={planData.timeEstimate}
            onChange={(e) => onChange({ ...planData, timeEstimate: parseInt(e.target.value) || 30 })}
            min="5"
            max="480"
            className="w-32 px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent"
          />
        </div>
      </div>
    )
  }

  // êµ¬ì¡°í™” ë‹¨ê³„
  if (subStep === PlanSubStep.ORGANIZE) {
    return (
      <div className="space-y-6">
        <h3 className="text-lg font-semibold text-gray-900">ì´ ì—…ë¬´ë¥¼ ì–´ë–»ê²Œ ê´€ë¦¬í•˜ì‹œê² ì–´ìš”?</h3>
        
        {/* ê³„ì¸µêµ¬ì¡° ì„ íƒ */}
        <div className="space-y-4">
          {Object.values(HierarchyType).map((type) => (
            <label
              key={type}
              className={`flex items-start space-x-3 p-4 border-2 rounded-xl cursor-pointer transition-all ${
                planData.hierarchyChoice.type === type
                  ? 'border-green-300 bg-green-50'
                  : 'border-gray-200 hover:border-gray-300'
              }`}
            >
              <input
                type="radio"
                name="hierarchy"
                value={type}
                checked={planData.hierarchyChoice.type === type}
                onChange={(e) => onChange({
                  ...planData,
                  hierarchyChoice: { ...planData.hierarchyChoice, type: e.target.value as HierarchyType }
                })}
                className="w-5 h-5 text-green-600 mt-0.5"
              />
              <div>
                <div className="font-medium text-gray-900">
                  {type === HierarchyType.INDEPENDENT && 'ë…ë¦½ì  ì—…ë¬´'}
                  {type === HierarchyType.PROJECT_ONLY && 'í”„ë¡œì íŠ¸ì˜ ì¼ë¶€'}
                  {type === HierarchyType.GOAL_DIRECT && 'ëª©í‘œì˜ ì¼ë¶€'}
                  {type === HierarchyType.FULL_HIERARCHY && 'í”„ë¡œì íŠ¸ â†’ ëª©í‘œ'}
                </div>
                <div className="text-sm text-gray-600 mt-1">
                  {type === HierarchyType.INDEPENDENT && 'ê°„ë‹¨í•˜ê³  ë¹ ë¥´ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì—…ë¬´'}
                  {type === HierarchyType.PROJECT_ONLY && 'íŠ¹ì • í”„ë¡œì íŠ¸ì— ì†í•˜ì§€ë§Œ ìƒìœ„ ëª©í‘œëŠ” ì—†ìŒ'}
                  {type === HierarchyType.GOAL_DIRECT && 'ëª©í‘œì— ì§ì ‘ ì—°ê²°ë˜ëŠ” ì¤‘ìš”í•œ ì—…ë¬´'}
                  {type === HierarchyType.FULL_HIERARCHY && 'í”„ë¡œì íŠ¸ë¥¼ í†µí•´ ëª©í‘œì— ê¸°ì—¬í•˜ëŠ” ì—…ë¬´'}
                </div>
              </div>
            </label>
          ))}
        </div>

        {/* í”„ë¡œì íŠ¸/ëª©í‘œ ì„ íƒ UI (í•„ìš”ì‹œ) */}
        {planData.hierarchyChoice.type !== HierarchyType.INDEPENDENT && (
          <div className="bg-amber-50 border border-amber-200 rounded-lg p-4">
            <p className="text-sm text-amber-800">
              ğŸ’¡ í”„ë¡œì íŠ¸ë‚˜ ëª©í‘œ ì„ íƒì€ ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </p>
          </div>
        )}
      </div>
    )
  }

  // ìƒì„¸ ê³„íš ë‹¨ê³„
  return (
    <div className="space-y-6">
      <h3 className="text-lg font-semibold text-gray-900">ë§ˆì§€ë§‰ìœ¼ë¡œ ì„¸ë¶€ì‚¬í•­ì„ ì •ë¦¬í•´ë³´ì„¸ìš”</h3>
      
      {/* ìµœì¢… ì œëª© */}
      <div>
        <label className="block text-sm font-medium text-gray-700 mb-2">
          ì—…ë¬´ ì œëª© *
        </label>
        <input
          type="text"
          value={planData.finalTitle}
          onChange={(e) => onChange({ ...planData, finalTitle: e.target.value })}
          placeholder={captureData.title || captureData.content.substring(0, 50)}
          className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent"
        />
      </div>

      {/* ìš°ì„ ìˆœìœ„ */}
      <div>
        <label className="block text-sm font-medium text-gray-700 mb-2">
          ìš°ì„ ìˆœìœ„
        </label>
        <select
          value={planData.priority}
          onChange={(e) => onChange({ ...planData, priority: e.target.value })}
          className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent"
        >
          <option value="low">ë‚®ìŒ</option>
          <option value="medium">ë³´í†µ</option>
          <option value="high">ë†’ìŒ</option>
          <option value="urgent">ê¸´ê¸‰</option>
        </select>
      </div>

      {/* ë§ˆê°ì¼ */}
      <div>
        <label className="block text-sm font-medium text-gray-700 mb-2">
          ë§ˆê°ì¼ (ì„ íƒì‚¬í•­)
        </label>
        <input
          type="date"
          value={planData.dueDate}
          onChange={(e) => onChange({ ...planData, dueDate: e.target.value })}
          className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent"
        />
      </div>

      {/* ìƒì„¸ ì„¤ëª… */}
      <div>
        <label className="block text-sm font-medium text-gray-700 mb-2">
          ìƒì„¸ ì„¤ëª… (ì„ íƒì‚¬í•­)
        </label>
        <textarea
          value={planData.description}
          onChange={(e) => onChange({ ...planData, description: e.target.value })}
          placeholder="ì¶”ê°€ì ì¸ ì„¤ëª…ì´ë‚˜ ì°¸ê³ ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”"
          className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent resize-none"
          rows={3}
        />
      </div>
    </div>
  )
}

// 3ë‹¨ê³„: Execute ì»´í¬ë„ŒíŠ¸
interface ExecuteStepProps {
  captureData: any
  planData: any
  executeData: any
  onChange: (data: any) => void
}

function ExecuteStep({ captureData, planData, executeData, onChange }: ExecuteStepProps) {
  return (
    <div className="space-y-6">
      <h3 className="text-lg font-semibold text-gray-900">ì‹¤í–‰ ì¤€ë¹„ë¥¼ ì™„ë£Œí•˜ì„¸ìš”</h3>
      
      {/* ì—…ë¬´ ìš”ì•½ */}
      <div className="bg-amber-50 border border-amber-200 rounded-lg p-4">
        <h4 className="font-medium text-amber-900 mb-2">ìƒì„±ë  ì—…ë¬´</h4>
        <div className="space-y-1 text-sm text-amber-800">
          <div><span className="font-medium">ì œëª©:</span> {planData.finalTitle || captureData.title || captureData.content.substring(0, 50)}</div>
          <div><span className="font-medium">ë‹¤ìŒ ì•¡ì…˜:</span> {planData.nextAction}</div>
          <div><span className="font-medium">ì˜ˆìƒ ì‹œê°„:</span> {planData.timeEstimate}ë¶„</div>
          <div><span className="font-medium">ìš°ì„ ìˆœìœ„:</span> {planData.priority}</div>
          <div><span className="font-medium">ê´€ë¦¬ ë°©ì‹:</span> {
            planData.hierarchyChoice.type === HierarchyType.INDEPENDENT ? 'ë…ë¦½ì  ì—…ë¬´' :
            planData.hierarchyChoice.type === HierarchyType.PROJECT_ONLY ? 'í”„ë¡œì íŠ¸ì˜ ì¼ë¶€' :
            planData.hierarchyChoice.type === HierarchyType.GOAL_DIRECT ? 'ëª©í‘œì˜ ì¼ë¶€' : 'í”„ë¡œì íŠ¸ â†’ ëª©í‘œ'
          }</div>
        </div>
      </div>

      {/* ì‹¤í–‰ ì˜µì…˜ */}
      <div className="space-y-4">
        <h4 className="font-medium text-gray-900">ì‹¤í–‰ ì˜µì…˜</h4>
        
        <label className="flex items-center space-x-3">
          <input
            type="checkbox"
            checked={executeData.isToday}
            onChange={(e) => onChange({ ...executeData, isToday: e.target.checked })}
            className="w-5 h-5 text-amber-600 rounded focus:ring-amber-500"
          />
          <div>
            <span className="font-medium text-gray-900">ì˜¤ëŠ˜ í•  ì¼ë¡œ ì„¤ì •</span>
            <p className="text-sm text-gray-600">í™ˆí™”ë©´ì˜ "ì˜¤ëŠ˜ í•  ì¼" ëª©ë¡ì— í‘œì‹œë©ë‹ˆë‹¤</p>
          </div>
        </label>
        
        <label className="flex items-center space-x-3">
          <input
            type="checkbox"
            checked={executeData.isFocused}
            onChange={(e) => onChange({ ...executeData, isFocused: e.target.checked })}
            className="w-5 h-5 text-amber-600 rounded focus:ring-amber-500"
          />
          <div>
            <span className="font-medium text-gray-900">ì§‘ì¤‘ ì—…ë¬´ë¡œ ì„¤ì •</span>
            <p className="text-sm text-gray-600">ê°€ì¥ ì¤‘ìš”í•œ ì—…ë¬´ë¡œ í•˜ì´ë¼ì´íŠ¸ í‘œì‹œë©ë‹ˆë‹¤</p>
          </div>
        </label>
        
        <label className="flex items-center space-x-3">
          <input
            type="checkbox"
            checked={executeData.startImmediately}
            onChange={(e) => onChange({ ...executeData, startImmediately: e.target.checked })}
            className="w-5 h-5 text-amber-600 rounded focus:ring-amber-500"
          />
          <div>
            <span className="font-medium text-gray-900">ì§€ê¸ˆ ë°”ë¡œ ì‹œì‘</span>
            <p className="text-sm text-gray-600">ì—…ë¬´ ìƒì„± í›„ ì¦‰ì‹œ ì‹¤í–‰ ëª¨ë“œë¡œ ì „í™˜ë©ë‹ˆë‹¤</p>
          </div>
        </label>
      </div>

      {/* ì‹œê°„ ê´€ë¦¬ íŒ */}
      <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
        <div className="flex items-center space-x-2 text-blue-800 mb-2">
          <ClockIcon className="w-5 h-5" />
          <span className="font-medium">ì‹œê°„ ê´€ë¦¬ íŒ</span>
        </div>
        <p className="text-sm text-blue-700">
          {planData.canComplete2Minutes 
            ? '2ë¶„ ì•ˆì— ì™„ë£Œí•  ìˆ˜ ìˆëŠ” ì—…ë¬´ë¼ë©´ ì§€ê¸ˆ ë°”ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.'
            : `${planData.timeEstimate}ë¶„ ì˜ˆìƒ ì†Œìš” ì‹œê°„ì„ ê³ ë ¤í•˜ì—¬ ì ì ˆí•œ ì‹œê°„ëŒ€ì— ì‹¤í–‰í•˜ì„¸ìš”.`
          }
        </p>
      </div>
    </div>
  )
}
</file>

<file path="frontend/src/components/inbox/InboxModal.tsx">
'use client'

import { useState, useEffect } from 'react'
import { 
  XMarkIcon,
  InboxIcon,
  ClipboardDocumentIcon,
  FolderPlusIcon,
  FlagIcon,
  PlusIcon,
  CheckCircleIcon
} from '@heroicons/react/24/outline'

interface InboxModalProps {
  isOpen: boolean
  onClose: () => void
  onAddTask?: (title: string, content: string) => void
  onAddProject?: (title: string, content: string) => void  
  onAddGoal?: (title: string, content: string) => void
  onQuickCapture?: (content: string) => void
}

interface CaptureItem {
  id: string
  type: 'task' | 'project' | 'goal' | 'idea'
  title: string
  content: string
  icon: any
  color: string
}

export default function InboxModal({
  isOpen,
  onClose,
  onAddTask,
  onAddProject,
  onAddGoal,
  onQuickCapture
}: InboxModalProps) {
  const [captureText, setCaptureText] = useState('')
  const [selectedType, setSelectedType] = useState<'task' | 'project' | 'goal' | 'idea'>('idea')
  const [title, setTitle] = useState('')
  const [showTitleInput, setShowTitleInput] = useState(false)

  // ESC í‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸°
  useEffect(() => {
    const handleEsc = (e: KeyboardEvent) => {
      if (e.key === 'Escape') onClose()
    }
    if (isOpen) {
      document.addEventListener('keydown', handleEsc)
      return () => document.removeEventListener('keydown', handleEsc)
    }
  }, [isOpen, onClose])

  // ëª¨ë‹¬ì´ ì—´ë¦´ ë•Œ ìƒíƒœ ì´ˆê¸°í™”
  useEffect(() => {
    if (isOpen) {
      setCaptureText('')
      setTitle('')
      setShowTitleInput(false)
      setSelectedType('idea')
    }
  }, [isOpen])

  const captureTypes = [
    {
      id: 'idea' as const,
      label: 'ì•„ì´ë””ì–´',
      description: 'ë– ì˜¤ë¥¸ ìƒê°ì´ë‚˜ ì˜ê°ì„ ìˆ˜ì§‘',
      icon: InboxIcon,
      color: 'text-amber-600 bg-amber-100',
      borderColor: 'border-amber-200'
    },
    {
      id: 'task' as const,
      label: 'ì—…ë¬´',
      description: 'í•´ì•¼ í•  ì‘ì—…ì´ë‚˜ í•  ì¼',
      icon: ClipboardDocumentIcon,
      color: 'text-blue-600 bg-blue-100',
      borderColor: 'border-blue-200'
    },
    {
      id: 'project' as const,
      label: 'í”„ë¡œì íŠ¸',
      description: 'í° ëª©í‘œë‚˜ ì—¬ëŸ¬ ì—…ë¬´ì˜ ë¬¶ìŒ',
      icon: FolderPlusIcon,
      color: 'text-green-600 bg-green-100',
      borderColor: 'border-green-200'
    },
    {
      id: 'goal' as const,
      label: 'ëª©í‘œ',
      description: 'ì¥ê¸°ì ì¸ ëª©í‘œë‚˜ ì„±ê³¼ì§€í‘œ',
      icon: FlagIcon,
      color: 'text-purple-600 bg-purple-100',
      borderColor: 'border-purple-200'
    }
  ]

  const selectedTypeInfo = captureTypes.find(type => type.id === selectedType)

  const handleSubmit = () => {
    if (!captureText.trim()) return

    const finalTitle = title.trim() || captureText.trim().split('\n')[0].substring(0, 50)
    const content = captureText.trim()

    switch (selectedType) {
      case 'task':
        onAddTask?.(finalTitle, content)
        break
      case 'project':
        onAddProject?.(finalTitle, content)
        break
      case 'goal':
        onAddGoal?.(finalTitle, content)
        break
      case 'idea':
      default:
        onQuickCapture?.(content)
        break
    }

    onClose()
  }

  const handleTypeSelect = (type: typeof selectedType) => {
    setSelectedType(type)
    setShowTitleInput(type !== 'idea')
  }

  if (!isOpen) return null

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-25">
      <div className="bg-white rounded-2xl shadow-2xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden">
        {/* í—¤ë” */}
        <div className="flex items-center justify-between p-6 border-b border-gray-200">
          <div className="flex items-center space-x-3">
            <div className="w-10 h-10 rounded-xl bg-gradient-to-r from-amber-500 to-orange-500 flex items-center justify-center">
              <InboxIcon className="w-6 h-6 text-white" />
            </div>
            <div>
              <h2 className="text-xl font-bold text-gray-900">ìˆ˜ì§‘í•¨</h2>
              <p className="text-sm text-gray-500">CPER ì›Œí¬í”Œë¡œìš°ì˜ í•µì‹¬ ìƒì„± ê¸°ëŠ¥</p>
            </div>
          </div>
          <button
            onClick={onClose}
            className="w-8 h-8 rounded-lg hover:bg-gray-100 flex items-center justify-center transition-colors"
          >
            <XMarkIcon className="w-5 h-5 text-gray-500" />
          </button>
        </div>

        {/* íƒ€ì… ì„ íƒ */}
        <div className="p-6 border-b border-gray-200">
          <h3 className="text-sm font-medium text-gray-700 mb-3">ë¬´ì—‡ì„ ìƒì„±í•˜ì‹œê² ì–´ìš”?</h3>
          <div className="grid grid-cols-2 gap-3">
            {captureTypes.map((type) => {
              const Icon = type.icon
              const isSelected = selectedType === type.id
              
              return (
                <button
                  key={type.id}
                  onClick={() => handleTypeSelect(type.id)}
                  className={`p-4 rounded-xl border-2 transition-all text-left ${
                    isSelected
                      ? `${type.borderColor} ${type.color.split(' ')[1]} ring-2 ring-opacity-20`
                      : 'border-gray-200 hover:border-gray-300'
                  }`}
                >
                  <div className="flex items-center space-x-3 mb-2">
                    <div className={`w-8 h-8 rounded-lg ${type.color} flex items-center justify-center`}>
                      <Icon className="w-5 h-5" />
                    </div>
                    <span className="font-medium text-gray-900">{type.label}</span>
                  </div>
                  <p className="text-xs text-gray-500">{type.description}</p>
                </button>
              )
            })}
          </div>
        </div>

        {/* ë‚´ìš© ì…ë ¥ */}
        <div className="p-6">
          {showTitleInput && (
            <div className="mb-4">
              <label className="block text-sm font-medium text-gray-700 mb-2">
                ì œëª©
              </label>
              <input
                type="text"
                value={title}
                onChange={(e) => setTitle(e.target.value)}
                placeholder={`${selectedTypeInfo?.label} ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”`}
                className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent"
              />
            </div>
          )}

          <div className="mb-6">
            <label className="block text-sm font-medium text-gray-700 mb-2">
              {selectedType === 'idea' ? 'ë‚´ìš©' : 'ìƒì„¸ ë‚´ìš©'}
            </label>
            <textarea
              value={captureText}
              onChange={(e) => setCaptureText(e.target.value)}
              placeholder={`${selectedTypeInfo?.label}ì— ëŒ€í•´ ìì„¸íˆ ì„¤ëª…í•´ì£¼ì„¸ìš”...`}
              className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent resize-none"
              rows={6}
              autoFocus
            />
          </div>

          {/* ì•¡ì…˜ ë²„íŠ¼ */}
          <div className="flex justify-end space-x-3">
            <button
              onClick={onClose}
              className="px-6 py-3 text-gray-600 hover:text-gray-800 font-medium transition-colors"
            >
              ì·¨ì†Œ
            </button>
            <button
              onClick={handleSubmit}
              disabled={!captureText.trim()}
              className={`px-6 py-3 rounded-xl font-medium transition-all flex items-center space-x-2 ${
                captureText.trim()
                  ? `${selectedTypeInfo?.color.split(' ')[1].replace('bg-', 'bg-').replace('-100', '-500')} text-white hover:${selectedTypeInfo?.color.split(' ')[1].replace('bg-', 'bg-').replace('-100', '-600')}`
                  : 'bg-gray-200 text-gray-400 cursor-not-allowed'
              }`}
            >
              <PlusIcon className="w-5 h-5" />
              <span>{selectedTypeInfo?.label} ìƒì„±</span>
            </button>
          </div>
        </div>

        {/* í•˜ë‹¨ ì•ˆë‚´ */}
        <div className="px-6 py-4 bg-gray-50 border-t border-gray-200">
          <div className="flex items-center space-x-2 text-sm text-gray-600">
            <CheckCircleIcon className="w-4 h-4" />
            <span>ìˆ˜ì§‘ëœ í•­ëª©ì€ CPER ì›Œí¬í”Œë¡œìš°ì— ë”°ë¼ ê³„íš ë‹¨ê³„ë¡œ ì´ë™ë©ë‹ˆë‹¤</span>
          </div>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="frontend/src/components/projects/ProjectObjectiveManager.tsx">
'use client'

import React, { useState } from 'react'
import { Target, Plus, CheckCircle, Edit2, Trash2, Calendar, BarChart3, TrendingUp } from 'lucide-react'
import { Project, ProjectObjective, ProjectKeyResult } from '@/types/project.types'

interface ProjectObjectiveManagerProps {
  project: Project
  onObjectiveUpdate?: (objectiveId: string, data: Partial<ProjectObjective>) => void
  onKeyResultUpdate?: (keyResultId: string, data: Partial<ProjectKeyResult>) => void
  onObjectiveCreate?: (data: Omit<ProjectObjective, 'id'>) => void
  onKeyResultCreate?: (objectiveId: string, data: Omit<ProjectKeyResult, 'id' | 'objectiveId'>) => void
}

export default function ProjectObjectiveManager({
  project,
  onObjectiveUpdate,
  onKeyResultUpdate,
  onObjectiveCreate,
  onKeyResultCreate
}: ProjectObjectiveManagerProps) {
  const [isAddingObjective, setIsAddingObjective] = useState(false)
  const [editingObjective, setEditingObjective] = useState<string | null>(null)
  const [addingKeyResultTo, setAddingKeyResultTo] = useState<string | null>(null)
  const [newObjective, setNewObjective] = useState({ title: '', description: '' })
  const [newKeyResult, setNewKeyResult] = useState({ 
    title: '', 
    description: '', 
    targetValue: 0, 
    currentValue: 0, 
    unit: '' 
  })

  // ëª©í‘œ ì¶”ê°€
  const handleAddObjective = () => {
    if (!newObjective.title.trim()) return

    onObjectiveCreate?.({
      title: newObjective.title,
      description: newObjective.description || undefined,
      completed: false
    })

    setNewObjective({ title: '', description: '' })
    setIsAddingObjective(false)
  }

  // í•µì‹¬ ê²°ê³¼ ì¶”ê°€
  const handleAddKeyResult = (objectiveId: string) => {
    if (!newKeyResult.title.trim()) return

    onKeyResultCreate?.(objectiveId, {
      title: newKeyResult.title,
      description: newKeyResult.description || undefined,
      targetValue: newKeyResult.targetValue,
      currentValue: newKeyResult.currentValue,
      unit: newKeyResult.unit,
      completed: false
    })

    setNewKeyResult({ title: '', description: '', targetValue: 0, currentValue: 0, unit: '' })
    setAddingKeyResultTo(null)
  }

  // ëª©í‘œ ì™„ë£Œ í† ê¸€
  const handleToggleObjective = (objective: ProjectObjective) => {
    onObjectiveUpdate?.(objective.id, {
      completed: !objective.completed,
      completedAt: !objective.completed ? new Date().toISOString() : undefined
    })
  }

  // í•µì‹¬ ê²°ê³¼ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
  const handleUpdateKeyResultProgress = (keyResult: ProjectKeyResult, currentValue: number) => {
    const completed = currentValue >= keyResult.targetValue
    onKeyResultUpdate?.(keyResult.id, {
      currentValue,
      completed,
      completedAt: completed ? new Date().toISOString() : undefined
    })
  }

  // ì§„í–‰ë¥  ê³„ì‚°
  const calculateProgress = (current: number, target: number) => {
    if (target === 0) return 0
    return Math.min((current / target) * 100, 100)
  }

  // ì „ì²´ í”„ë¡œì íŠ¸ ì§„í–‰ë¥  ê³„ì‚°
  const calculateOverallProgress = () => {
    if (project.objectives.length === 0) return 0
    
    const totalKeyResults = project.keyResults.length
    if (totalKeyResults === 0) return 0
    
    const completedKeyResults = project.keyResults.filter(kr => kr.completed).length
    return Math.round((completedKeyResults / totalKeyResults) * 100)
  }

  return (
    <div className="bg-white rounded-lg border border-gray-200 p-6">
      {/* í—¤ë” */}
      <div className="flex items-center justify-between mb-6">
        <div className="flex items-center space-x-3">
          <Target className="w-6 h-6 text-blue-600" />
          <div>
            <h3 className="text-lg font-semibold text-gray-900">ëª©í‘œ ë° í•µì‹¬ ê²°ê³¼ (OKR)</h3>
            <p className="text-sm text-gray-500">í”„ë¡œì íŠ¸ì˜ ëª©í‘œì™€ ì¸¡ì • ê°€ëŠ¥í•œ ê²°ê³¼ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤</p>
          </div>
        </div>
        <div className="flex items-center space-x-3">
          <div className="text-right">
            <div className="text-2xl font-bold text-blue-600">{calculateOverallProgress()}%</div>
            <div className="text-xs text-gray-500">ì „ì²´ ì§„í–‰ë¥ </div>
          </div>
          <button
            onClick={() => setIsAddingObjective(true)}
            className="flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
          >
            <Plus className="w-4 h-4" />
            <span>ëª©í‘œ ì¶”ê°€</span>
          </button>
        </div>
      </div>

      {/* ì „ì²´ ì§„í–‰ë¥  ì‹œê°í™” */}
      <div className="mb-6 p-4 bg-gray-50 rounded-lg">
        <div className="flex items-center justify-between text-sm mb-2">
          <span className="text-gray-600">í”„ë¡œì íŠ¸ ì „ì²´ ì§„í–‰ë¥ </span>
          <span className="font-medium">{calculateOverallProgress()}%</span>
        </div>
        <div className="w-full bg-gray-200 rounded-full h-3">
          <div 
            className="bg-blue-600 h-3 rounded-full transition-all duration-300"
            style={{ width: `${calculateOverallProgress()}%` }}
          />
        </div>
        <div className="flex items-center justify-between text-xs text-gray-500 mt-2">
          <span>{project.keyResults.filter(kr => kr.completed).length} / {project.keyResults.length} ì™„ë£Œ</span>
          <span>{project.objectives.filter(obj => obj.completed).length} / {project.objectives.length} ëª©í‘œ ë‹¬ì„±</span>
        </div>
      </div>

      {/* ìƒˆ ëª©í‘œ ì¶”ê°€ í¼ */}
      {isAddingObjective && (
        <div className="mb-6 p-4 border border-blue-200 rounded-lg bg-blue-50">
          <h4 className="font-medium text-gray-900 mb-3">ìƒˆ ëª©í‘œ ì¶”ê°€</h4>
          <div className="space-y-3">
            <input
              type="text"
              value={newObjective.title}
              onChange={(e) => setNewObjective(prev => ({ ...prev, title: e.target.value }))}
              placeholder="ëª©í‘œ ì œëª© (ì˜ˆ: ìƒˆë¡œìš´ ë§ˆì¼€íŒ… ì›¹ì‚¬ì´íŠ¸ ëŸ°ì¹­)"
              className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            />
            <textarea
              value={newObjective.description}
              onChange={(e) => setNewObjective(prev => ({ ...prev, description: e.target.value }))}
              placeholder="ëª©í‘œ ì„¤ëª… (ì„ íƒì‚¬í•­)"
              rows={2}
              className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            />
            <div className="flex space-x-3">
              <button
                onClick={handleAddObjective}
                className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
              >
                ëª©í‘œ ì¶”ê°€
              </button>
              <button
                onClick={() => setIsAddingObjective(false)}
                className="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50"
              >
                ì·¨ì†Œ
              </button>
            </div>
          </div>
        </div>
      )}

      {/* ëª©í‘œ ëª©ë¡ */}
      <div className="space-y-6">
        {project.objectives.map((objective) => {
          const objectiveKeyResults = project.keyResults.filter(kr => kr.objectiveId === objective.id)
          const completedKRs = objectiveKeyResults.filter(kr => kr.completed).length
          const objectiveProgress = objectiveKeyResults.length > 0 
            ? Math.round((completedKRs / objectiveKeyResults.length) * 100) 
            : 0

          return (
            <div key={objective.id} className="border border-gray-200 rounded-lg p-4">
              {/* ëª©í‘œ í—¤ë” */}
              <div className="flex items-start justify-between mb-4">
                <div className="flex items-start space-x-3 flex-1">
                  <button
                    onClick={() => handleToggleObjective(objective)}
                    className={`mt-1 ${objective.completed ? 'text-green-600' : 'text-gray-400'}`}
                  >
                    <CheckCircle className="w-5 h-5" />
                  </button>
                  <div className="flex-1">
                    <h4 className={`font-medium ${objective.completed ? 'line-through text-gray-500' : 'text-gray-900'}`}>
                      {objective.title}
                    </h4>
                    {objective.description && (
                      <p className="text-sm text-gray-600 mt-1">{objective.description}</p>
                    )}
                    <div className="flex items-center space-x-4 mt-2">
                      <div className="flex items-center space-x-1 text-sm text-gray-500">
                        <BarChart3 className="w-4 h-4" />
                        <span>{objectiveProgress}% ì™„ë£Œ</span>
                      </div>
                      <div className="flex items-center space-x-1 text-sm text-gray-500">
                        <TrendingUp className="w-4 h-4" />
                        <span>{completedKRs}/{objectiveKeyResults.length} KR</span>
                      </div>
                    </div>
                  </div>
                </div>
                <div className="flex items-center space-x-2">
                  <button
                    onClick={() => setAddingKeyResultTo(objective.id)}
                    className="p-2 hover:bg-gray-100 rounded-lg"
                    title="í•µì‹¬ ê²°ê³¼ ì¶”ê°€"
                  >
                    <Plus className="w-4 h-4 text-gray-500" />
                  </button>
                  <button
                    onClick={() => setEditingObjective(objective.id)}
                    className="p-2 hover:bg-gray-100 rounded-lg"
                    title="ëª©í‘œ í¸ì§‘"
                  >
                    <Edit2 className="w-4 h-4 text-gray-500" />
                  </button>
                </div>
              </div>

              {/* ëª©í‘œ ì§„í–‰ë¥  ë°” */}
              <div className="mb-4">
                <div className="w-full bg-gray-200 rounded-full h-2">
                  <div 
                    className={`h-2 rounded-full transition-all duration-300 ${
                      objective.completed ? 'bg-green-600' : 'bg-blue-600'
                    }`}
                    style={{ width: `${objectiveProgress}%` }}
                  />
                </div>
              </div>

              {/* í•µì‹¬ ê²°ê³¼ ì¶”ê°€ í¼ */}
              {addingKeyResultTo === objective.id && (
                <div className="mb-4 p-3 border border-green-200 rounded-lg bg-green-50">
                  <h5 className="font-medium text-gray-900 mb-3">ìƒˆ í•µì‹¬ ê²°ê³¼ ì¶”ê°€</h5>
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <input
                      type="text"
                      value={newKeyResult.title}
                      onChange={(e) => setNewKeyResult(prev => ({ ...prev, title: e.target.value }))}
                      placeholder="í•µì‹¬ ê²°ê³¼ ì œëª©"
                      className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"
                    />
                    <input
                      type="text"
                      value={newKeyResult.unit}
                      onChange={(e) => setNewKeyResult(prev => ({ ...prev, unit: e.target.value }))}
                      placeholder="ë‹¨ìœ„ (ì˜ˆ: ëª…, %, ê±´)"
                      className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"
                    />
                    <input
                      type="number"
                      value={newKeyResult.targetValue}
                      onChange={(e) => setNewKeyResult(prev => ({ ...prev, targetValue: Number(e.target.value) }))}
                      placeholder="ëª©í‘œê°’"
                      className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"
                    />
                    <input
                      type="number"
                      value={newKeyResult.currentValue}
                      onChange={(e) => setNewKeyResult(prev => ({ ...prev, currentValue: Number(e.target.value) }))}
                      placeholder="í˜„ì¬ê°’"
                      className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"
                    />
                  </div>
                  <div className="flex space-x-3 mt-3">
                    <button
                      onClick={() => handleAddKeyResult(objective.id)}
                      className="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700"
                    >
                      í•µì‹¬ ê²°ê³¼ ì¶”ê°€
                    </button>
                    <button
                      onClick={() => setAddingKeyResultTo(null)}
                      className="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50"
                    >
                      ì·¨ì†Œ
                    </button>
                  </div>
                </div>
              )}

              {/* í•µì‹¬ ê²°ê³¼ ëª©ë¡ */}
              <div className="space-y-3">
                {objectiveKeyResults.map((keyResult) => {
                  const progress = calculateProgress(keyResult.currentValue, keyResult.targetValue)
                  
                  return (
                    <div key={keyResult.id} className="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg">
                      <CheckCircle className={`w-4 h-4 ${keyResult.completed ? 'text-green-600' : 'text-gray-400'}`} />
                      <div className="flex-1">
                        <div className="flex items-center justify-between mb-1">
                          <span className={`text-sm font-medium ${keyResult.completed ? 'line-through text-gray-500' : 'text-gray-900'}`}>
                            {keyResult.title}
                          </span>
                          <span className="text-sm text-gray-600">
                            {keyResult.currentValue} / {keyResult.targetValue} {keyResult.unit}
                          </span>
                        </div>
                        <div className="flex items-center space-x-2">
                          <div className="flex-1 bg-gray-200 rounded-full h-1.5">
                            <div 
                              className={`h-1.5 rounded-full transition-all duration-300 ${
                                keyResult.completed ? 'bg-green-600' : 'bg-blue-600'
                              }`}
                              style={{ width: `${progress}%` }}
                            />
                          </div>
                          <span className="text-xs text-gray-500 w-12">{Math.round(progress)}%</span>
                        </div>
                      </div>
                      <div className="flex items-center space-x-1">
                        <input
                          type="number"
                          value={keyResult.currentValue}
                          onChange={(e) => handleUpdateKeyResultProgress(keyResult, Number(e.target.value))}
                          className="w-16 px-2 py-1 text-xs border border-gray-300 rounded focus:ring-1 focus:ring-blue-500"
                        />
                        <span className="text-xs text-gray-500">/{keyResult.targetValue}</span>
                      </div>
                    </div>
                  )
                })}
                
                {objectiveKeyResults.length === 0 && (
                  <div className="text-center py-4 text-gray-500">
                    <Target className="w-8 h-8 text-gray-400 mx-auto mb-2" />
                    <p className="text-sm">ì•„ì§ í•µì‹¬ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</p>
                    <button
                      onClick={() => setAddingKeyResultTo(objective.id)}
                      className="text-sm text-blue-600 hover:text-blue-800 mt-1"
                    >
                      ì²« ë²ˆì§¸ í•µì‹¬ ê²°ê³¼ ì¶”ê°€í•˜ê¸°
                    </button>
                  </div>
                )}
              </div>
            </div>
          )
        })}

        {project.objectives.length === 0 && (
          <div className="text-center py-8 text-gray-500">
            <Target className="w-12 h-12 text-gray-400 mx-auto mb-3" />
            <h4 className="font-medium text-gray-900 mb-2">ì•„ì§ ëª©í‘œê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤</h4>
            <p className="text-sm mb-4">í”„ë¡œì íŠ¸ì˜ ì²« ë²ˆì§¸ ëª©í‘œë¥¼ ì„¤ì •í•´ë³´ì„¸ìš”</p>
            <button
              onClick={() => setIsAddingObjective(true)}
              className="inline-flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
            >
              <Plus className="w-4 h-4" />
              <span>ëª©í‘œ ì¶”ê°€í•˜ê¸°</span>
            </button>
          </div>
        )}
      </div>
    </div>
  )
}
</file>

<file path="frontend/src/components/projects/SlashCommandInput.tsx">
'use client'

import React, { useState, useEffect } from 'react'
import { Calendar, User, Target, BookOpen, Command } from 'lucide-react'
import { ProjectMember } from '@/types/project.types'

interface SlashCommand {
  command: string
  description: string
  parameters: SlashCommandParameter[]
  example: string
  icon: React.ReactNode
}

interface SlashCommandParameter {
  name: string
  type: 'text' | 'user' | 'date' | 'select'
  required: boolean
  description: string
  options?: string[]
}

interface SlashCommandInputProps {
  input: string
  onCommandExecute: (command: string, params: any) => void
  onCancel: () => void
  members: ProjectMember[]
}

export default function SlashCommandInput({
  input,
  onCommandExecute,
  onCancel,
  members
}: SlashCommandInputProps) {
  const [selectedCommand, setSelectedCommand] = useState<SlashCommand | null>(null)
  const [parameters, setParameters] = useState<{ [key: string]: any }>({})
  const [currentParameterIndex, setCurrentParameterIndex] = useState(0)

  // ì‚¬ìš© ê°€ëŠ¥í•œ ìŠ¬ë˜ì‹œ ëª…ë ¹ì–´ ì •ì˜
  const availableCommands: SlashCommand[] = [
    {
      command: 'add-task',
      description: 'ìƒˆ ì—…ë¬´ë¥¼ ìƒì„±í•˜ê³  ë‹´ë‹¹ìë¥¼ ì§€ì •í•©ë‹ˆë‹¤',
      icon: <Target className="w-4 h-4" />,
      parameters: [
        {
          name: 'title',
          type: 'text',
          required: true,
          description: 'ì—…ë¬´ ì œëª©'
        },
        {
          name: 'assignee',
          type: 'user',
          required: true,
          description: 'ë‹´ë‹¹ì'
        },
        {
          name: 'dueDate',
          type: 'date',
          required: false,
          description: 'ë§ˆê°ì¼'
        },
        {
          name: 'priority',
          type: 'select',
          required: false,
          description: 'ìš°ì„ ìˆœìœ„',
          options: ['low', 'medium', 'high', 'urgent']
        }
      ],
      example: '/add-task UI ë””ìì¸ ì™„ë£Œ @ê¹€ë””ìì´ë„ˆ 2024-01-30'
    },
    {
      command: 'delegate',
      description: 'ê¸°ì¡´ ì—…ë¬´ë¥¼ ë‹¤ë¥¸ ë©¤ë²„ì—ê²Œ ì¬í• ë‹¹í•©ë‹ˆë‹¤',
      icon: <User className="w-4 h-4" />,
      parameters: [
        {
          name: 'taskId',
          type: 'text',
          required: true,
          description: 'ì—…ë¬´ ID ë˜ëŠ” ì œëª©'
        },
        {
          name: 'toUser',
          type: 'user',
          required: true,
          description: 'ìƒˆ ë‹´ë‹¹ì'
        }
      ],
      example: '/delegate #123 @ë°•ê°œë°œì'
    },
    {
      command: 'set-milestone',
      description: 'ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ ë§ˆì¼ìŠ¤í†¤ì„ ì„¤ì •í•©ë‹ˆë‹¤',
      icon: <Target className="w-4 h-4" />,
      parameters: [
        {
          name: 'name',
          type: 'text',
          required: true,
          description: 'ë§ˆì¼ìŠ¤í†¤ ì´ë¦„'
        },
        {
          name: 'dueDate',
          type: 'date',
          required: true,
          description: 'ë§ˆê°ì¼'
        },
        {
          name: 'description',
          type: 'text',
          required: false,
          description: 'ìƒì„¸ ì„¤ëª…'
        }
      ],
      example: '/set-milestone "Beta ë²„ì „ ì¶œì‹œ" 2024-02-15'
    },
    {
      command: 'link-wiki',
      description: 'ê²Œì‹œíŒì˜ ìœ„í‚¤ ë¬¸ì„œë¥¼ ì±„íŒ…ì— ì—°ê²°í•©ë‹ˆë‹¤',
      icon: <BookOpen className="w-4 h-4" />,
      parameters: [
        {
          name: 'documentName',
          type: 'text',
          required: true,
          description: 'ìœ„í‚¤ ë¬¸ì„œëª…'
        }
      ],
      example: '/link-wiki "React ì»´í¬ë„ŒíŠ¸ ê°€ì´ë“œ"'
    }
  ]

  // ì…ë ¥ê°’ì—ì„œ ëª…ë ¹ì–´ íŒŒì‹±
  useEffect(() => {
    if (!input.startsWith('/')) {
      setSelectedCommand(null)
      setParameters({})
      setCurrentParameterIndex(0)
      return
    }

    const commandText = input.slice(1).split(' ')[0]
    const command = availableCommands.find(cmd => cmd.command === commandText)
    
    if (command && command !== selectedCommand) {
      setSelectedCommand(command)
      setParameters({})
      setCurrentParameterIndex(0)
    }

    // ê¸°ë³¸ íŒŒë¼ë¯¸í„° íŒŒì‹± (ê°„ë‹¨í•œ êµ¬í˜„)
    if (command) {
      const args = input.slice(1).split(' ').slice(1)
      const newParams: { [key: string]: any } = {}
      
      args.forEach((arg, index) => {
        if (command.parameters[index]) {
          const param = command.parameters[index]
          if (param.type === 'user' && arg.startsWith('@')) {
            newParams[param.name] = arg.slice(1)
          } else {
            newParams[param.name] = arg
          }
        }
      })
      
      setParameters(newParams)
    }
  }, [input, selectedCommand])

  // ëª…ë ¹ì–´ ì‹¤í–‰
  const handleExecuteCommand = () => {
    if (!selectedCommand) return

    // í•„ìˆ˜ íŒŒë¼ë¯¸í„° ê²€ì¦
    const missingRequired = selectedCommand.parameters
      .filter(param => param.required && !parameters[param.name])
      .map(param => param.name)

    if (missingRequired.length > 0) {
      console.warn('í•„ìˆ˜ íŒŒë¼ë¯¸í„° ëˆ„ë½:', missingRequired)
      return
    }

    onCommandExecute(selectedCommand.command, parameters)
  }

  // íŒŒë¼ë¯¸í„° ê°’ ì—…ë°ì´íŠ¸
  const handleParameterChange = (paramName: string, value: any) => {
    setParameters(prev => ({
      ...prev,
      [paramName]: value
    }))
  }

  // ëª…ë ¹ì–´ ëª©ë¡ í‘œì‹œ
  if (!selectedCommand) {
    const filteredCommands = availableCommands.filter(cmd =>
      cmd.command.toLowerCase().includes(input.slice(1).toLowerCase())
    )

    return (
      <div className="p-4 bg-white border-b border-gray-200">
        <div className="flex items-center space-x-2 mb-3">
          <Command className="w-4 h-4 text-gray-500" />
          <span className="text-sm font-medium text-gray-700">ì‚¬ìš© ê°€ëŠ¥í•œ ëª…ë ¹ì–´</span>
        </div>
        
        <div className="space-y-2">
          {filteredCommands.map((command) => (
            <div
              key={command.command}
              className="flex items-start space-x-3 p-3 hover:bg-gray-50 rounded-lg cursor-pointer"
              onClick={() => setSelectedCommand(command)}
            >
              <div className="text-blue-600 mt-0.5">
                {command.icon}
              </div>
              <div className="flex-1">
                <div className="flex items-center space-x-2">
                  <span className="font-mono text-sm font-medium text-blue-600">
                    /{command.command}
                  </span>
                </div>
                <p className="text-sm text-gray-600 mt-1">{command.description}</p>
                <p className="text-xs text-gray-500 mt-1 font-mono">
                  ì˜ˆì‹œ: {command.example}
                </p>
              </div>
            </div>
          ))}
        </div>

        <div className="mt-3 pt-3 border-t border-gray-100">
          <button
            onClick={onCancel}
            className="text-sm text-gray-500 hover:text-gray-700"
          >
            ESCë¥¼ ëˆŒëŸ¬ ì·¨ì†Œ
          </button>
        </div>
      </div>
    )
  }

  // ì„ íƒëœ ëª…ë ¹ì–´ì˜ íŒŒë¼ë¯¸í„° ì…ë ¥ í¼
  return (
    <div className="p-4 bg-white border-b border-gray-200">
      <div className="flex items-center space-x-2 mb-4">
        <div className="text-blue-600">
          {selectedCommand.icon}
        </div>
        <span className="font-mono text-sm font-medium text-blue-600">
          /{selectedCommand.command}
        </span>
        <span className="text-sm text-gray-600">- {selectedCommand.description}</span>
      </div>

      <div className="space-y-3">
        {selectedCommand.parameters.map((param, index) => (
          <div key={param.name} className="flex items-center space-x-3">
            <div className="w-20 text-sm text-gray-600 text-right">
              {param.name}
              {param.required && <span className="text-red-500 ml-1">*</span>}
            </div>
            
            <div className="flex-1">
              {param.type === 'text' && (
                <input
                  type="text"
                  value={parameters[param.name] || ''}
                  onChange={(e) => handleParameterChange(param.name, e.target.value)}
                  placeholder={param.description}
                  className="w-full px-3 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                />
              )}
              
              {param.type === 'user' && (
                <select
                  value={parameters[param.name] || ''}
                  onChange={(e) => handleParameterChange(param.name, e.target.value)}
                  className="w-full px-3 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                >
                  <option value="">ë‹´ë‹¹ì ì„ íƒ...</option>
                  {members.map((member) => (
                    <option key={member.id} value={member.user.name}>
                      {member.user.name}
                    </option>
                  ))}
                </select>
              )}
              
              {param.type === 'date' && (
                <input
                  type="date"
                  value={parameters[param.name] || ''}
                  onChange={(e) => handleParameterChange(param.name, e.target.value)}
                  className="w-full px-3 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                />
              )}
              
              {param.type === 'select' && param.options && (
                <select
                  value={parameters[param.name] || ''}
                  onChange={(e) => handleParameterChange(param.name, e.target.value)}
                  className="w-full px-3 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                >
                  <option value="">{param.description} ì„ íƒ...</option>
                  {param.options.map((option) => (
                    <option key={option} value={option}>
                      {option === 'low' ? 'ë‚®ìŒ' :
                       option === 'medium' ? 'ë³´í†µ' :
                       option === 'high' ? 'ë†’ìŒ' :
                       option === 'urgent' ? 'ê¸´ê¸‰' : option}
                    </option>
                  ))}
                </select>
              )}
            </div>
          </div>
        ))}
      </div>

      <div className="flex items-center justify-between mt-4 pt-3 border-t border-gray-100">
        <button
          onClick={onCancel}
          className="text-sm text-gray-500 hover:text-gray-700"
        >
          ì·¨ì†Œ
        </button>
        
        <div className="flex items-center space-x-3">
          <span className="text-xs text-gray-500">
            Enter í‚¤ë¡œ ì‹¤í–‰
          </span>
          <button
            onClick={handleExecuteCommand}
            className="px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 disabled:opacity-50"
            disabled={selectedCommand.parameters.some(param => 
              param.required && !parameters[param.name]
            )}
          >
            ì‹¤í–‰
          </button>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="frontend/src/components/tasks/ResponsiveTaskCard.tsx">
'use client'

import { useState, useRef, useCallback, useEffect } from 'react'
import { createPortal } from 'react-dom'
import { 
  CheckCircleIcon, 
  FlagIcon,
  TrashIcon,
  UserGroupIcon,
  PauseIcon,
  RectangleStackIcon,
  EllipsisHorizontalIcon,
  CalendarIcon
} from '@heroicons/react/24/outline'
import { TaskStatus, TaskPriority } from '@/types/task.types'
import { useIsTouch } from '@/hooks/useDeviceType'

// ì›Œí´ë¦¬ ì—…ë¬´ ì¸í„°í˜ì´ìŠ¤
interface WorklyTask {
  id: string
  title: string
  description?: string
  status: TaskStatus
  priority: TaskPriority
  goalId?: string
  projectId?: string
  assigneeId: string
  assignee: {
    id: string
    name: string
    email: string
  }
  dueDate?: string
  scheduledDate?: string
  tags: string[]
  createdAt: string
  updatedAt: string
  isToday?: boolean
  isFocused?: boolean
}

interface ResponsiveTaskCardProps {
  task: WorklyTask
  onClick: () => void
  onDelete: (taskId: string) => void
  onDelegate: (taskId: string) => void
  onDefer: (taskId: string) => void
  onConvertToProject: (taskId: string) => void
  onDragStart?: (taskId: string) => void
  onDragEnd?: () => void
  isDragMode?: boolean
  onSetDueDate?: (taskId: string, date: string) => void
  onDueDateUpdated?: (taskId: string, date: string) => void
  keepCalendarOpen?: boolean
}

export default function ResponsiveTaskCard({
  task,
  onClick,
  onDelete,
  onDelegate,
  onDefer,
  onConvertToProject,
  onDragStart,
  onDragEnd,
  isDragMode = false,
  onSetDueDate,
  onDueDateUpdated,
  keepCalendarOpen = false
}: ResponsiveTaskCardProps) {
  const isTouch = useIsTouch()
  
  // í„°ì¹˜ ë””ë°”ì´ìŠ¤ìš© ìƒíƒœ
  const [swipeState, setSwipeState] = useState<'idle' | 'left' | 'right'>('idle')
  const [dragOffset, setDragOffset] = useState(0)
  const [isLongPressing, setIsLongPressing] = useState(false)
  const [isDragging, setIsDragging] = useState(false)
  
  // ë°ìŠ¤í¬í†±ìš© ìƒíƒœ
  const [isHovered, setIsHovered] = useState(false)
  const [showActionMenu, setShowActionMenu] = useState(false)
  const [menuPosition, setMenuPosition] = useState<{top: number, right: number} | null>(null)
  const [isDesktopDragging, setIsDesktopDragging] = useState(false)
  
  const cardRef = useRef<HTMLDivElement>(null)
  const menuButtonRef = useRef<HTMLButtonElement>(null)
  const startXRef = useRef<number>(0)
  const startYRef = useRef<number>(0)
  const longPressTimerRef = useRef<NodeJS.Timeout | null>(null)
  const isDragDetectedRef = useRef(false)
  const prevDueDateRef = useRef<string | undefined>(task.dueDate)

  // ë©”ë‰´ ì™¸ë¶€ í´ë¦­ ê°ì§€
  useEffect(() => {
    const handleClickOutside = (event: MouseEvent) => {
      if (showActionMenu && menuButtonRef.current && !menuButtonRef.current.contains(event.target as Node)) {
        setShowActionMenu(false)
      }
    }

    if (showActionMenu) {
      // ì•½ê°„ì˜ ì§€ì—° í›„ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ (ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ì™€ ì¶©ëŒ ë°©ì§€)
      const timer = setTimeout(() => {
        document.addEventListener('mousedown', handleClickOutside)
      }, 100)
      
      return () => {
        clearTimeout(timer)
        document.removeEventListener('mousedown', handleClickOutside)
      }
    }
  }, [showActionMenu])

  // ë‚ ì§œ ì—…ë°ì´íŠ¸ ê°ì§€
  useEffect(() => {
    if (prevDueDateRef.current !== task.dueDate && task.dueDate) {
      onDueDateUpdated?.(task.id, task.dueDate)
      
      // ref ì—…ë°ì´íŠ¸
      prevDueDateRef.current = task.dueDate
    }
    
    prevDueDateRef.current = task.dueDate
  }, [task.dueDate, task.id, onDueDateUpdated])

  // PRD ì¤€ìˆ˜: Primary Blue ì¤‘ì‹¬ì˜ ë§ˆê°ì¼ ì‹œê°í™”
  const getDueDateVisualization = (dueDate?: string) => {
    if (!dueDate) return { 
      color: 'bg-gray-200', 
      topText: 'ë¬´ê¸°í•œ',
      bottomText: '',
      textColor: 'text-gray-600'
    }
    
    const today = new Date()
    const due = new Date(dueDate)
    const diffDays = Math.ceil((due.getTime() - today.getTime()) / (1000 * 3600 * 24))
    
    if (diffDays < 0) return { 
      color: 'bg-red-500', 
      topText: `${Math.abs(diffDays)}ì¼`,
      bottomText: 'ì§€ë‚¨',
      textColor: 'text-white'
    }
    if (diffDays === 0) return { 
      color: 'bg-blue-600',
      topText: 'ì˜¤ëŠ˜',
      bottomText: 'ë§ˆê°',
      textColor: 'text-white'
    }
    if (diffDays <= 3) return { 
      color: 'bg-blue-500', 
      topText: `${diffDays}ì¼`,
      bottomText: 'ë‚¨ìŒ',
      textColor: 'text-white'
    }
    if (diffDays <= 7) return { 
      color: 'bg-blue-400', 
      topText: `${diffDays}ì¼`,
      bottomText: 'ë‚¨ìŒ',
      textColor: 'text-white'
    }
    if (diffDays <= 30) return { 
      color: 'bg-blue-300', 
      topText: `${diffDays}ì¼`,
      bottomText: 'ë‚¨ìŒ',
      textColor: 'text-blue-900'
    }
    
    return { 
      color: 'bg-gray-100', 
      topText: due.toLocaleDateString('ko-KR', { month: 'short', day: 'numeric' }),
      bottomText: 'ë§ˆê°',
      textColor: 'text-gray-700'
    }
  }

  // ì²´í¬ë°•ìŠ¤ í´ë¦­ ì²˜ë¦¬
  const handleCheckboxClick = (e: React.MouseEvent) => {
    e.stopPropagation()
    console.log('Toggle task status:', task.id)
  }

  // === í„°ì¹˜ ë””ë°”ì´ìŠ¤ìš© ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ===
  const handlePointerDown = useCallback((e: React.PointerEvent) => {
    if (!isTouch || isDragMode) return
    
    // ì´ë²¤íŠ¸ ì „íŒŒ ì¤‘ë‹¨ - ë‹¬ë ¥ ì™¸ë¶€ í´ë¦­ ê°ì§€ ë°©ì§€
    e.stopPropagation()
    
    startXRef.current = e.clientX
    startYRef.current = e.clientY
    isDragDetectedRef.current = false

    // 0.5ì´ˆ í›„ ë“œë˜ê·¸ ëª¨ë“œ í™œì„±í™”
    longPressTimerRef.current = setTimeout(() => {
      if (!isDragDetectedRef.current) {
        setIsLongPressing(true)
        setIsDragging(true)
        
        if ('vibrate' in navigator) {
          navigator.vibrate(50)
        }
        
        onDragStart?.(task.id)
      }
    }, 500)

    if (cardRef.current) {
      cardRef.current.setPointerCapture(e.pointerId)
    }
  }, [isTouch, isDragMode, onDragStart, task.id])

  const handlePointerMove = useCallback((e: React.PointerEvent) => {
    if (!isTouch || isDragMode || isLongPressing) return

    const deltaX = e.clientX - startXRef.current
    const deltaY = e.clientY - startYRef.current
    
    if (Math.abs(deltaY) > Math.abs(deltaX) && Math.abs(deltaY) > 10) {
      if (longPressTimerRef.current) {
        clearTimeout(longPressTimerRef.current)
        longPressTimerRef.current = null
      }
      return
    }

    if (Math.abs(deltaX) > 30) {
      isDragDetectedRef.current = true
      
      if (longPressTimerRef.current) {
        clearTimeout(longPressTimerRef.current)
        longPressTimerRef.current = null
      }

      setDragOffset(deltaX)
      
      if (deltaX < -80) {
        setSwipeState('left')
      } else if (deltaX > 80) {
        setSwipeState('right')
      } else {
        setSwipeState('idle')
      }
    }
  }, [isTouch, isDragMode, isLongPressing])

  const handlePointerUp = useCallback((e: React.PointerEvent) => {
    if (!isTouch) return

    if (longPressTimerRef.current) {
      clearTimeout(longPressTimerRef.current)
      longPressTimerRef.current = null
    }

    if (isDragging) {
      setIsDragging(false)
      setIsLongPressing(false)
      onDragEnd?.()
      return
    }

    if (swipeState === 'left' && Math.abs(dragOffset) > 120) {
      onDelete(task.id)
    } else if (swipeState === 'right' && dragOffset > 120) {
      console.log('Show action menu for task:', task.id)
    } else if (!isDragDetectedRef.current && Math.abs(dragOffset) < 10) {
      onClick()
    }

    setSwipeState('idle')
    setDragOffset(0)
    setIsLongPressing(false)

    if (cardRef.current) {
      cardRef.current.releasePointerCapture(e.pointerId)
    }
  }, [isTouch, isDragging, swipeState, dragOffset, onDragEnd, onDelete, task.id, onClick])

  // === ë°ìŠ¤í¬í†±ìš© ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ===
  const handleMouseEnter = () => {
    if (!isTouch) {
      setIsHovered(true)
    }
  }

  const handleMouseLeave = () => {
    if (!isTouch) {
      setIsHovered(false)
      setShowActionMenu(false)
    }
  }

  const handleDesktopClick = () => {
    if (!isTouch) {
      onClick()
    }
  }

  const handleActionMenuToggle = (e: React.MouseEvent) => {
    e.stopPropagation()
    
    if (!showActionMenu && menuButtonRef.current) {
      const rect = menuButtonRef.current.getBoundingClientRect()
      setMenuPosition({
        top: rect.bottom + 5,
        right: window.innerWidth - rect.right
      })
      
      // ë‹¤ìŒ tickì—ì„œ ë©”ë‰´ ìƒíƒœ ë³€ê²½ (ì´ë²¤íŠ¸ ì „íŒŒ ë°©ì§€)
      setTimeout(() => {
        setShowActionMenu(true)
      }, 0)
    } else {
      setShowActionMenu(false)
    }
  }

  // === ë°ìŠ¤í¬í†± ë“œë˜ê·¸ ì•¤ ë“œë¡­ í•¸ë“¤ëŸ¬ ===
  const handleDragStart = (e: React.DragEvent) => {
    if (isTouch) return
    
    // ì´ë²¤íŠ¸ ì „íŒŒ ì¤‘ë‹¨ - ë‹¬ë ¥ ì™¸ë¶€ í´ë¦­ ê°ì§€ ë°©ì§€
    e.stopPropagation()
    
    e.dataTransfer.setData('text/plain', task.id)
    e.dataTransfer.effectAllowed = 'move'
    
    // ë“œë˜ê·¸ ì´ë¯¸ì§€ë¥¼ ì‘ì€ í¬ê¸°ë¡œ ì„¤ì •
    const dragImage = document.createElement('div')
    dragImage.className = 'w-12 h-12 bg-blue-100 border-2 border-blue-300 rounded-lg flex items-center justify-center text-xs font-medium text-blue-700 shadow-lg'
    dragImage.style.position = 'absolute'
    dragImage.style.top = '-1000px'
    dragImage.innerHTML = task.title.substring(0, 2).toUpperCase()
    document.body.appendChild(dragImage)
    
    e.dataTransfer.setDragImage(dragImage, 24, 24)
    
    // ì •ë¦¬
    setTimeout(() => {
      document.body.removeChild(dragImage)
    }, 0)
    
    setIsDesktopDragging(true)
    onDragStart?.(task.id)
  }

  const handleDragEnd = (e: React.DragEvent) => {
    if (isTouch) return
    
    setIsDesktopDragging(false)
    
    // keepCalendarOpenì´ trueì´ë©´ ë‹¬ë ¥ì„ ì—´ì–´ë‘” ì±„ë¡œ onDragEnd í˜¸ì¶œ
    onDragEnd?.()
    
    // ë“œë˜ê·¸ê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆì„ ë•Œì˜ ì¶”ê°€ ë¡œì§
    if (e.dataTransfer.dropEffect === 'move') {
      // ë“œë¡­ì´ ì„±ê³µí–ˆì„ ë•Œ ë‹¬ë ¥ ìœ ì§€ ì‹ í˜¸ ì „ì†¡
      console.log('ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì„±ê³µ - ë‹¬ë ¥ ìœ ì§€')
    }
  }

  const handleDateSelect = (e: React.MouseEvent) => {
    e.stopPropagation()
    
    // ê°„ë‹¨í•œ ë‚ ì§œ ì„ íƒì„ ìœ„í•œ í”„ë¡¬í”„íŠ¸ (í–¥í›„ ë‹¬ë ¥ ì»´í¬ë„ŒíŠ¸ë¡œ ëŒ€ì²´ ê°€ëŠ¥)
    const dateInput = prompt('ë§ˆê°ì¼ì„ ì…ë ¥í•˜ì„¸ìš” (YYYY-MM-DD í˜•ì‹):')
    if (dateInput && onSetDueDate) {
      const date = new Date(dateInput)
      if (!isNaN(date.getTime())) {
        onSetDueDate(task.id, dateInput)
      } else {
        alert('ì˜¬ë°”ë¥¸ ë‚ ì§œ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤. YYYY-MM-DD í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.')
      }
    }
    setShowActionMenu(false)
  }

  const dueDateInfo = getDueDateVisualization(task.dueDate)
  const isCompleted = task.status === TaskStatus.DONE

  return (
    <div className="relative overflow-hidden">
      {/* í„°ì¹˜ ë””ë°”ì´ìŠ¤: ìŠ¤ì™€ì´í”„ ë°±ê·¸ë¼ìš´ë“œ ì•¡ì…˜ë“¤ */}
      {isTouch && swipeState !== 'idle' && (
        <>
          {swipeState === 'left' && (
            <div className="absolute inset-y-0 right-0 flex items-center justify-center w-20 bg-red-500">
              <TrashIcon className="w-6 h-6 text-white" />
            </div>
          )}
          
          {swipeState === 'right' && (
            <div className="absolute inset-y-0 left-0 flex items-center gap-2 px-4 bg-blue-100">
              <button
                onClick={() => onDelegate(task.id)}
                className="flex items-center justify-center w-12 h-12 bg-blue-500 text-white rounded-full"
              >
                <UserGroupIcon className="w-5 h-5" />
              </button>
              <button
                onClick={() => onDefer(task.id)}
                className="flex items-center justify-center w-12 h-12 bg-gray-500 text-white rounded-full"
              >
                <PauseIcon className="w-5 h-5" />
              </button>
              <button
                onClick={() => onConvertToProject(task.id)}
                className="flex items-center justify-center w-12 h-12 bg-green-500 text-white rounded-full"
              >
                <RectangleStackIcon className="w-5 h-5" />
              </button>
            </div>
          )}
        </>
      )}

      {/* ë©”ì¸ ì¹´ë“œ */}
      <div 
        ref={cardRef}
        className={`
          p-4 bg-white transition-all duration-300 cursor-pointer group
          ${task.isToday ? 'bg-blue-50/30' : ''}
          ${task.isFocused ? 'ring-2 ring-blue-200' : ''}
          ${isCompleted ? 'opacity-60' : ''}
          ${isTouch && isLongPressing ? 'scale-105 shadow-lg ring-2 ring-blue-300' : 'hover:bg-gray-50'}
          ${isDragging ? 'z-50 shadow-xl' : ''}
          ${isDesktopDragging ? 'scale-110 rotate-2 shadow-2xl z-50 opacity-90' : ''}
        `}
        style={isTouch ? {
          transform: `translateX(${dragOffset}px)`,
          transition: isDragDetectedRef.current ? 'none' : 'transform 0.2s ease-out'
        } : isDesktopDragging ? {
          transform: 'scale(1.1) rotate(2deg)',
          transition: 'all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)'
        } : {
          transition: 'all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)'
        }}
        draggable={!isTouch && !isCompleted}
        onDragStart={handleDragStart}
        onDragEnd={handleDragEnd}
        onPointerDown={handlePointerDown}
        onPointerMove={handlePointerMove}
        onPointerUp={handlePointerUp}
        onPointerLeave={handlePointerUp}
        onMouseEnter={handleMouseEnter}
        onMouseLeave={handleMouseLeave}
        onClick={handleDesktopClick}
      >
        <div className="flex items-center gap-4 min-h-[60px]">
          {/* ì¢Œì¸¡: í° ì²´í¬ë°•ìŠ¤ */}
          <div className="flex-shrink-0 flex items-center justify-center">
            <button
              onClick={handleCheckboxClick}
              className={`w-7 h-7 rounded border-2 flex items-center justify-center transition-all ${
                isCompleted 
                  ? 'bg-green-500 border-green-500 text-white' 
                  : 'border-gray-300 hover:border-blue-500 hover:bg-blue-50'
              }`}
            >
              {isCompleted && (
                <CheckCircleIcon className="w-4 h-4" />
              )}
            </button>
          </div>

          {/* ì¤‘ì•™: ì½˜í…ì¸  ì˜ì—­ */}
          <div className="flex-1 min-w-0 py-1">
            <h3 className={`workly-card-title mb-1 ${
              isCompleted ? 'line-through text-gray-500' : 'group-hover:text-gray-700'
            }`}>
              {task.title}
            </h3>
            
            {task.description && (
              <p className={`workly-caption line-clamp-2 mb-2 ${
                isCompleted ? 'text-gray-400' : ''
              }`}>
                {task.description}
              </p>
            )}
            
            <div className="flex flex-wrap gap-1">
              {(task.goalId || task.projectId) && (
                <span className="inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-blue-700 bg-blue-100 rounded-full">
                  <FlagIcon className="w-3 h-3" />
                  {task.goalId ? 'ëª©í‘œ' : 'í”„ë¡œì íŠ¸'}
                </span>
              )}
              
              {task.tags.slice(0, 2).map((tag, index) => (
                <span
                  key={index}
                  className="inline-block px-2 py-1 text-xs text-gray-600 bg-gray-100 rounded-full"
                >
                  {tag}
                </span>
              ))}
              
              {task.tags.length > 2 && (
                <span className="inline-block px-2 py-1 text-xs text-gray-500">
                  +{task.tags.length - 2}
                </span>
              )}
            </div>
          </div>

          {/* ìš°ì¸¡: ë§ˆê°ì¼ + ë°ìŠ¤í¬í†± ë”ë³´ê¸° ë²„íŠ¼ */}
          <div className="flex-shrink-0 flex items-center gap-3">
            {/* ë§ˆê°ì¼ ì‹œê°í™” */}
            <div className={`w-12 h-12 rounded-full ${dueDateInfo.color} flex flex-col items-center justify-center transition-all duration-300`}>
              <span className={`font-bold text-xs leading-tight ${dueDateInfo.textColor}`}>
                {dueDateInfo.topText}
              </span>
              {dueDateInfo.bottomText && (
                <span className={`font-medium text-xs leading-tight ${dueDateInfo.textColor}`}>
                  {dueDateInfo.bottomText}
                </span>
              )}
            </div>

            {/* ë°ìŠ¤í¬í†±: ë”ë³´ê¸° ë²„íŠ¼ (í•­ìƒ ë³´ì„) */}
            {!isTouch && (
              <button
                ref={menuButtonRef}
                onClick={handleActionMenuToggle}
                className="w-9 h-9 flex items-center justify-center text-gray-500 hover:bg-gray-50 rounded-md transition-colors"
                title="ë” ë§ì€ ì•¡ì…˜"
              >
                <EllipsisHorizontalIcon className="w-5 h-5" />
              </button>
            )}
          </div>
        </div>
      </div>

      {/* í„°ì¹˜ ë””ë°”ì´ìŠ¤: ë“œë˜ê·¸ ëª¨ë“œ ì‹œ ì‹œê°ì  í”¼ë“œë°± */}
      {isTouch && isLongPressing && (
        <div className="absolute inset-x-0 bottom-0 h-1 bg-blue-500 animate-pulse"></div>
      )}

      {/* Portalë¡œ ë Œë”ë§ë˜ëŠ” ë”ë³´ê¸° ë©”ë‰´ */}
      {!isTouch && showActionMenu && menuPosition && typeof window !== 'undefined' && createPortal(
        <div 
          className="fixed w-36 bg-white border border-gray-200 rounded-lg shadow-xl z-[999]"
          style={{
            top: menuPosition.top,
            right: menuPosition.right
          }}
          onClick={(e) => e.stopPropagation()}
        >
            <button
              onClick={handleDateSelect}
              className="w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 first:rounded-t-lg flex items-center gap-2"
            >
              <CalendarIcon className="w-4 h-4" />
              ë‚ ì§œ ì„¤ì •
            </button>
            <button
              onClick={(e) => {
                e.stopPropagation()
                onDelegate(task.id)
                setShowActionMenu(false)
              }}
              className="w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2"
            >
              <UserGroupIcon className="w-4 h-4" />
              ìœ„ì„
            </button>
            <button
              onClick={(e) => {
                e.stopPropagation()
                onDefer(task.id)
                setShowActionMenu(false)
              }}
              className="w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2"
            >
              <PauseIcon className="w-4 h-4" />
              ë³´ë¥˜
            </button>
            <button
              onClick={(e) => {
                e.stopPropagation()
                onConvertToProject(task.id)
                setShowActionMenu(false)
              }}
              className="w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2"
            >
              <RectangleStackIcon className="w-4 h-4" />
              í”„ë¡œì íŠ¸ë¡œ ì „í™˜
            </button>
            <button
              onClick={(e) => {
                e.stopPropagation()
                if (window.confirm('ì •ë§ë¡œ ì´ ì—…ë¬´ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                  onDelete(task.id)
                }
                setShowActionMenu(false)
              }}
              className="w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50 last:rounded-b-lg flex items-center gap-2"
            >
              <TrashIcon className="w-4 h-4" />
              ì‚­ì œ
            </button>
        </div>,
        document.body
      )}

    </div>
  )
}
</file>

<file path="frontend/src/components/tasks/TaskDetailModal.tsx">
'use client'

import { useState, useRef, useEffect, useCallback } from 'react'
import dynamic from 'next/dynamic'
import { 
  XMarkIcon, 
  ArrowsPointingOutIcon,
  ArrowsPointingInIcon,
  CalendarDaysIcon,
  ClockIcon,
  LinkIcon,
  CheckCircleIcon,
  PlusIcon,
  DocumentTextIcon,
  PencilIcon,
  TrashIcon,
  MagnifyingGlassIcon,
  ArrowRightIcon,
  ArrowLeftIcon,
  ArrowsRightLeftIcon,
  PlayIcon,
  StopIcon,
  ClockIcon as ClockSolidIcon,
  ArrowTopRightOnSquareIcon,
  BookOpenIcon,
  GlobeAltIcon,
  DocumentIcon,
  FilmIcon,
  PhotoIcon
} from '@heroicons/react/24/outline'
import { TaskDetail, ChecklistItem, TaskRelationship, WikiReference, TaskStatus, TaskPriority } from '@/types/task.types'
import { worklyApi } from '@/lib/api/workly-api'

// WorklyMDXEditorë¥¼ ë™ì ìœ¼ë¡œ ë¡œë“œ (SSR ë°©ì§€)
const WorklyMDXEditor = dynamic(
  () => import('../ui/WorklyMDXEditor'),
  { 
    ssr: false,
    loading: () => <div className="h-64 bg-gray-50 rounded-lg animate-pulse flex items-center justify-center">
      <p className="text-gray-500">ì—ë””í„° ë¡œë”© ì¤‘...</p>
    </div>
  }
)

interface TaskDetailModalProps {
  task: TaskDetail | null
  isOpen: boolean
  onClose: () => void
  onSave: (taskDetail: TaskDetail) => void
}

export default function TaskDetailModal({
  task,
  isOpen,
  onClose,
  onSave
}: TaskDetailModalProps) {
  const [isFullScreen, setIsFullScreen] = useState(false)
  const [localTask, setLocalTask] = useState<TaskDetail | null>(null)
  const [editingChecklistId, setEditingChecklistId] = useState<string | null>(null)
  const [showTaskSearch, setShowTaskSearch] = useState(false)
  const [taskSearchQuery, setTaskSearchQuery] = useState('')
  const [isTimerRunning, setIsTimerRunning] = useState(false)
  const [timerStartTime, setTimerStartTime] = useState<Date | null>(null)
  const [currentSessionTime, setCurrentSessionTime] = useState(0)
  const [showWikiForm, setShowWikiForm] = useState(false)
  const [newWikiTitle, setNewWikiTitle] = useState('')
  const [newWikiUrl, setNewWikiUrl] = useState('')
  const [newWikiDescription, setNewWikiDescription] = useState('')
  const [urlValidation, setUrlValidation] = useState<{ isValid: boolean; message: string } | null>(null)
  const [editingWikiId, setEditingWikiId] = useState<string | null>(null)
  const [isSaving, setIsSaving] = useState(false)
  const modalRef = useRef<HTMLDivElement>(null)
  const titleRef = useRef<HTMLInputElement>(null)
  const timerIntervalRef = useRef<NodeJS.Timeout | null>(null)
  const saveTimeoutRef = useRef<NodeJS.Timeout | null>(null)

  // ëª¨ë‹¬ì´ ì—´ë¦´ ë•Œ ë¡œì»¬ ìƒíƒœ ì´ˆê¸°í™”
  useEffect(() => {
    if (isOpen && task) {
      setLocalTask({ ...task })
      // ì œëª© ì…ë ¥ í•„ë“œì— í¬ì»¤ìŠ¤ (ì•½ê°„ì˜ ì§€ì—° í›„)
      setTimeout(() => {
        titleRef.current?.focus()
      }, 100)
    }
  }, [isOpen, task])

  // ESC í‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸°
  useEffect(() => {
    const handleKeyDown = (e: KeyboardEvent) => {
      if (e.key === 'Escape' && isOpen) {
        onClose()
      }
    }

    if (isOpen) {
      document.addEventListener('keydown', handleKeyDown)
      document.body.style.overflow = 'hidden'
      
      return () => {
        document.removeEventListener('keydown', handleKeyDown)
        document.body.style.overflow = 'unset'
      }
    }
  }, [isOpen, onClose])

  // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ìœ¼ë¡œ ë‹«ê¸° (ì „ì²´í™”ë©´ì´ ì•„ë‹ ë•Œë§Œ)
  useEffect(() => {
    const handleClickOutside = (event: MouseEvent) => {
      if (!isFullScreen && modalRef.current && !modalRef.current.contains(event.target as Node)) {
        onClose()
      }
    }

    if (isOpen && !isFullScreen) {
      document.addEventListener('mousedown', handleClickOutside)
      return () => document.removeEventListener('mousedown', handleClickOutside)
    }
  }, [isOpen, isFullScreen, onClose])

  // Debounced ì €ì¥ í•¨ìˆ˜
  const debouncedSave = useCallback((taskData: TaskDetail) => {
    if (saveTimeoutRef.current) {
      clearTimeout(saveTimeoutRef.current)
    }

    saveTimeoutRef.current = setTimeout(async () => {
      try {
        setIsSaving(true)
        await worklyApi.tasks.updateDetail(taskData.id, {
          title: taskData.title,
          description: taskData.description,
          descriptionMarkdown: taskData.descriptionMarkdown,
          status: taskData.status,
          priority: taskData.priority,
          dueDate: taskData.dueDate,
          checklist: taskData.checklist,
          relationships: taskData.relationships,
          wikiReferences: taskData.wikiReferences,
          estimatedTimeMinutes: taskData.estimatedTimeMinutes,
          loggedTimeMinutes: taskData.loggedTimeMinutes,
          tags: taskData.tags,
          customFields: taskData.customFields
        })
      } catch (error) {
        console.error('ìë™ ì €ì¥ ì‹¤íŒ¨:', error)
      } finally {
        setIsSaving(false)
      }
    }, 1500) // 1.5ì´ˆ í›„ ì €ì¥
  }, [])

  // ë¡œì»¬ ì—…ë¬´ ì—…ë°ì´íŠ¸
  const updateLocalTask = (updates: Partial<TaskDetail>) => {
    if (!localTask) return
    const updatedTask = { ...localTask, ...updates }
    setLocalTask(updatedTask)
    
    // ìë™ ì €ì¥ (debounced)
    debouncedSave(updatedTask)
  }

  // ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ íƒ€ì´ë¨¸ ì •ë¦¬
  useEffect(() => {
    return () => {
      if (saveTimeoutRef.current) {
        clearTimeout(saveTimeoutRef.current)
      }
    }
  }, [])

  // ì²´í¬ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ í† ê¸€
  const toggleChecklistItem = (itemId: string) => {
    if (!localTask) return
    
    const updatedChecklist = localTask.checklist.map(item =>
      item.id === itemId ? { ...item, completed: !item.completed } : item
    )
    
    updateLocalTask({ checklist: updatedChecklist })
  }

  // ì²´í¬ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ ì¶”ê°€
  const addChecklistItem = (text: string) => {
    if (!localTask || !text.trim()) return
    
    const newItem: ChecklistItem = {
      id: `checklist-${Date.now()}`,
      text: text.trim(),
      completed: false,
      order: localTask.checklist.length
    }
    
    updateLocalTask({ 
      checklist: [...localTask.checklist, newItem] 
    })
  }

  // ì²´í¬ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ í¸ì§‘
  const updateChecklistItem = (itemId: string, text: string) => {
    if (!localTask) return
    
    const updatedChecklist = localTask.checklist.map(item =>
      item.id === itemId ? { ...item, text: text.trim() } : item
    )
    
    updateLocalTask({ checklist: updatedChecklist })
  }

  // ì²´í¬ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ ì‚­ì œ
  const deleteChecklistItem = (itemId: string) => {
    if (!localTask) return
    
    const updatedChecklist = localTask.checklist.filter(item => item.id !== itemId)
    
    updateLocalTask({ checklist: updatedChecklist })
  }

  // ì—…ë¬´ ê´€ê³„ ì¶”ê°€
  const addTaskRelationship = (targetTaskId: string, type: 'blocks' | 'blocked_by' | 'related') => {
    if (!localTask) return
    
    const newRelationship: TaskRelationship = {
      id: `rel-${Date.now()}`,
      targetTaskId,
      type,
      targetTask: {
        // ëª©ì—… ë°ì´í„° - ì‹¤ì œë¡œëŠ” APIì—ì„œ ê°€ì ¸ì™€ì•¼ í•¨
        id: targetTaskId,
        title: `ê´€ë ¨ ì—…ë¬´ #${targetTaskId}`,
        status: 'todo' as any,
        priority: 'medium' as any,
        type: 'task' as any,
        assigneeId: 'user1',
        reporterId: 'user1',
        reporter: { id: 'user1', firstName: 'ê¹€', lastName: 'ì›Œí´ë¦¬', email: 'workly@example.com' },
        actualHours: 0,
        progress: 0,
        tags: [],
        customFields: {},
        createdAt: new Date().toISOString(),
        updatedAt: new Date().toISOString(),
        subtasks: [],
        labels: [],
        comments: [],
        dependencies: [],
        dependents: [],
        watchers: [],
        timeEntries: []
      }
    }
    
    updateLocalTask({ 
      relationships: [...localTask.relationships, newRelationship] 
    })
    
    setShowTaskSearch(false)
    setTaskSearchQuery('')
  }

  // ì—…ë¬´ ê´€ê³„ ì‚­ì œ
  const removeTaskRelationship = (relationshipId: string) => {
    if (!localTask) return
    
    const updatedRelationships = localTask.relationships.filter(rel => rel.id !== relationshipId)
    
    updateLocalTask({ relationships: updatedRelationships })
  }

  // ëª©ì—… ì—…ë¬´ ë°ì´í„° (ê²€ìƒ‰ìš©)
  const mockAvailableTasks = [
    { id: '1', title: 'ì›Œí´ë¦¬ ë„¤ë¹„ê²Œì´ì…˜ ì‹œìŠ¤í…œ ìµœì¢… ì ê²€' },
    { id: '2', title: 'CPER ì›Œí¬í”Œë¡œìš° ë¬¸ì„œ ì‘ì„±' },
    { id: '3', title: 'ì‚¬ìš©ì í”¼ë“œë°± ìˆ˜ì§‘ ë° ë¶„ì„' },
    { id: '4', title: 'ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ ìµœì í™”' },
    { id: '5', title: 'ëª¨ë°”ì¼ ë°˜ì‘í˜• ë””ìì¸ ê°œì„ ' },
    { id: '6', title: 'ì°¨ì„¸ëŒ€ ê¸°ëŠ¥ ê¸°íš' }
  ].filter(task => task.id !== localTask?.id) // ìê¸° ìì‹  ì œì™¸

  // ê²€ìƒ‰ëœ ì—…ë¬´ ëª©ë¡
  const filteredTasks = mockAvailableTasks.filter(task =>
    task.title.toLowerCase().includes(taskSearchQuery.toLowerCase())
  )

  // ì‹œê°„ í˜•ì‹ ë³€í™˜ í•¨ìˆ˜
  const formatTime = (minutes: number): string => {
    const hours = Math.floor(minutes / 60)
    const mins = minutes % 60
    if (hours > 0) {
      return `${hours}ì‹œê°„ ${mins}ë¶„`
    }
    return `${mins}ë¶„`
  }

  // íƒ€ì´ë¨¸ ì‹œì‘
  const startTimer = () => {
    setIsTimerRunning(true)
    setTimerStartTime(new Date())
    setCurrentSessionTime(0)
    
    timerIntervalRef.current = setInterval(() => {
      setCurrentSessionTime(prev => prev + 1)
    }, 60000) // 1ë¶„ë§ˆë‹¤ ì—…ë°ì´íŠ¸
  }

  // íƒ€ì´ë¨¸ ì •ì§€
  const stopTimer = () => {
    if (timerIntervalRef.current) {
      clearInterval(timerIntervalRef.current)
      timerIntervalRef.current = null
    }
    
    if (timerStartTime && localTask) {
      const endTime = new Date()
      const sessionMinutes = Math.round((endTime.getTime() - timerStartTime.getTime()) / 60000)
      const newLoggedTime = (localTask.loggedTimeMinutes || 0) + sessionMinutes
      
      updateLocalTask({ loggedTimeMinutes: newLoggedTime })
    }
    
    setIsTimerRunning(false)
    setTimerStartTime(null)
    setCurrentSessionTime(0)
  }

  // ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ íƒ€ì´ë¨¸ ì •ë¦¬
  useEffect(() => {
    return () => {
      if (timerIntervalRef.current) {
        clearInterval(timerIntervalRef.current)
      }
    }
  }, [])

  // ë¬¸ì„œ íƒ€ì…ì— ë”°ë¥¸ ì•„ì´ì½˜ ë°˜í™˜
  const getDocumentIcon = (url: string) => {
    if (!url) return DocumentTextIcon
    
    try {
      const lowerUrl = url.toLowerCase()
      const pathname = new URL(url).pathname.toLowerCase()
      
      // ìœ„í‚¤ ì‚¬ì´íŠ¸ë“¤
      if (lowerUrl.includes('wiki') || lowerUrl.includes('notion') || lowerUrl.includes('confluence')) {
        return BookOpenIcon
      }
      
      // ë¯¸ë””ì–´ íŒŒì¼ë“¤
      if (pathname.match(/\.(jpg|jpeg|png|gif|webp|svg)$/)) {
        return PhotoIcon
      }
      
      if (pathname.match(/\.(mp4|webm|mov|avi|mkv)$/)) {
        return FilmIcon
      }
      
      // ë¬¸ì„œ íŒŒì¼ë“¤
      if (pathname.match(/\.(pdf|doc|docx|ppt|pptx|xls|xlsx)$/)) {
        return DocumentIcon
      }
      
      // ì›¹ í˜ì´ì§€
      if (lowerUrl.startsWith('http')) {
        return GlobeAltIcon
      }
    } catch {
      // URL íŒŒì‹± ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ ì•„ì´ì½˜
    }
    
    return DocumentTextIcon
  }

  // ë¬¸ì„œ íƒ€ì…ì— ë”°ë¥¸ ìƒ‰ìƒ ë°˜í™˜
  const getDocumentColor = (url: string) => {
    if (!url) return 'text-blue-600'
    
    try {
      const lowerUrl = url.toLowerCase()
      const pathname = new URL(url).pathname.toLowerCase()
      
      // ìœ„í‚¤ ì‚¬ì´íŠ¸ë“¤
      if (lowerUrl.includes('wiki') || lowerUrl.includes('notion') || lowerUrl.includes('confluence')) {
        return 'text-green-600'
      }
      
      // ë¯¸ë””ì–´ íŒŒì¼ë“¤
      if (pathname.match(/\.(jpg|jpeg|png|gif|webp|svg)$/)) {
        return 'text-purple-600'
      }
      
      if (pathname.match(/\.(mp4|webm|mov|avi|mkv)$/)) {
        return 'text-red-600'
      }
      
      // ë¬¸ì„œ íŒŒì¼ë“¤
      if (pathname.match(/\.(pdf|doc|docx|ppt|pptx|xls|xlsx)$/)) {
        return 'text-orange-600'
      }
    } catch {
      // URL íŒŒì‹± ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ ìƒ‰ìƒ
    }
    
    // ì›¹ í˜ì´ì§€
    return 'text-blue-600'
  }

  // URL ìœ íš¨ì„± ê²€ì¦
  const validateUrl = (url: string): { isValid: boolean; message: string } => {
    if (!url.trim()) {
      return { isValid: false, message: 'URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.' }
    }
    
    try {
      const urlObj = new URL(url)
      
      // í”„ë¡œí† ì½œ ê²€ì¦
      if (!['http:', 'https:'].includes(urlObj.protocol)) {
        return { isValid: false, message: 'HTTP ë˜ëŠ” HTTPS URLë§Œ í—ˆìš©ë©ë‹ˆë‹¤.' }
      }
      
      // ê¸°ë³¸ì ì¸ í˜¸ìŠ¤íŠ¸ëª… ê²€ì¦
      if (!urlObj.hostname || urlObj.hostname.length < 1) {
        return { isValid: false, message: 'ì˜¬ë°”ë¥¸ ë„ë©”ì¸ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.' }
      }
      
      return { isValid: true, message: 'ìœ íš¨í•œ URLì…ë‹ˆë‹¤.' }
    } catch {
      return { isValid: false, message: 'ì˜¬ë°”ë¥¸ URL í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.' }
    }
  }

  // URL ì…ë ¥ ì‹œ ìœ íš¨ì„± ê²€ì¦
  const handleUrlChange = (url: string) => {
    setNewWikiUrl(url)
    
    if (url.trim()) {
      const validation = validateUrl(url)
      setUrlValidation(validation)
    } else {
      setUrlValidation(null)
    }
  }

  // ìœ„í‚¤ í¸ì§‘ ì‹œì‘
  const startEditingWiki = (wiki: WikiReference) => {
    setEditingWikiId(wiki.id)
    setNewWikiTitle(wiki.title)
    setNewWikiUrl(wiki.url)
    setNewWikiDescription(wiki.description || '')
    setUrlValidation(validateUrl(wiki.url))
    setShowWikiForm(true)
  }

  // ìœ„í‚¤ ë ˆí¼ëŸ°ìŠ¤ ì¶”ê°€/ìˆ˜ì •
  const addWikiReference = () => {
    if (!localTask || !newWikiTitle.trim() || !newWikiUrl.trim()) return
    
    // URL ìœ íš¨ì„± ìµœì¢… ê²€ì¦
    const validation = validateUrl(newWikiUrl)
    if (!validation.isValid) {
      setUrlValidation(validation)
      return
    }
    
    if (editingWikiId) {
      // ê¸°ì¡´ ìœ„í‚¤ ìˆ˜ì •
      const updatedWikiReferences = localTask.wikiReferences.map(wiki =>
        wiki.id === editingWikiId
          ? {
              ...wiki,
              title: newWikiTitle.trim(),
              url: newWikiUrl.trim(),
              description: newWikiDescription.trim() || undefined
            }
          : wiki
      )
      
      updateLocalTask({ wikiReferences: updatedWikiReferences })
    } else {
      // ìƒˆ ìœ„í‚¤ ì¶”ê°€
      const newWiki: WikiReference = {
        id: `wiki-${Date.now()}`,
        title: newWikiTitle.trim(),
        url: newWikiUrl.trim(),
        description: newWikiDescription.trim() || undefined
      }
      
      updateLocalTask({ 
        wikiReferences: [...localTask.wikiReferences, newWiki] 
      })
    }
    
    setNewWikiTitle('')
    setNewWikiUrl('')
    setNewWikiDescription('')
    setUrlValidation(null)
    setEditingWikiId(null)
    setShowWikiForm(false)
  }

  // ìœ„í‚¤ ë ˆí¼ëŸ°ìŠ¤ ì‚­ì œ
  const removeWikiReference = (wikiId: string) => {
    if (!localTask) return
    
    const updatedWikiReferences = localTask.wikiReferences.filter(wiki => wiki.id !== wikiId)
    
    updateLocalTask({ wikiReferences: updatedWikiReferences })
  }

  // ì €ì¥ í•¸ë“¤ëŸ¬
  const handleSave = async () => {
    if (!localTask) return

    try {
      // APIë¥¼ í†µí•´ ì‹¤ì œ ë°±ì—”ë“œì— ì €ì¥
      const updatedTask = await worklyApi.tasks.updateDetail(localTask.id, {
        title: localTask.title,
        description: localTask.description,
        descriptionMarkdown: localTask.descriptionMarkdown,
        status: localTask.status,
        priority: localTask.priority,
        dueDate: localTask.dueDate,
        checklist: localTask.checklist,
        relationships: localTask.relationships,
        wikiReferences: localTask.wikiReferences,
        estimatedTimeMinutes: localTask.estimatedTimeMinutes,
        loggedTimeMinutes: localTask.loggedTimeMinutes,
        tags: localTask.tags,
        customFields: localTask.customFields
      })

      // ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì— ì—…ë°ì´íŠ¸ëœ íƒœìŠ¤í¬ ì „ë‹¬
      onSave(updatedTask as TaskDetail)
      onClose()
    } catch (error) {
      console.error('íƒœìŠ¤í¬ ì €ì¥ ì‹¤íŒ¨:', error)
      // ì—ëŸ¬ ì²˜ë¦¬ - ì‹¤ì œë¡œëŠ” í† ìŠ¤íŠ¸ ì•Œë¦¼ ë“±ì„ í‘œì‹œí•  ìˆ˜ ìˆìŒ
      alert('íƒœìŠ¤í¬ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.')
    }
  }

  if (!isOpen || !localTask) return null

  return (
    <div className={`fixed inset-0 z-50 ${isFullScreen ? 'bg-white' : 'bg-black bg-opacity-50 flex items-center justify-center p-4'}`}>
      <div 
        ref={modalRef}
        className={`
          bg-white rounded-lg shadow-xl
          ${isFullScreen 
            ? 'w-full h-full max-w-none max-h-none rounded-none' 
            : 'w-full max-w-4xl max-h-[90vh]'
          }
          flex flex-col overflow-hidden
        `}
      >
        {/* í—¤ë” */}
        <div className="flex items-center justify-between p-4 border-b border-gray-200 bg-white">
          <div className="flex items-center gap-3">
            <h1 className="text-lg font-semibold text-gray-900">ì—…ë¬´ ìƒì„¸</h1>
            {isSaving && (
              <span className="text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded-full animate-pulse">
                ì €ì¥ ì¤‘...
              </span>
            )}
            <div className="flex items-center gap-1">
              {/* ìƒíƒœ ë°°ì§€ */}
              <span className={`px-2 py-1 text-xs font-medium rounded-full ${
                localTask.status === TaskStatus.DONE ? 'bg-green-100 text-green-700' :
                localTask.status === TaskStatus.IN_PROGRESS ? 'bg-blue-100 text-blue-700' :
                localTask.status === TaskStatus.IN_REVIEW ? 'bg-purple-100 text-purple-700' :
                'bg-gray-100 text-gray-700'
              }`}>
                {localTask.status === TaskStatus.DONE ? 'ì™„ë£Œ' :
                 localTask.status === TaskStatus.IN_PROGRESS ? 'ì§„í–‰ ì¤‘' :
                 localTask.status === TaskStatus.IN_REVIEW ? 'ê²€í†  ì¤‘' :
                 'í•  ì¼'}
              </span>
              
              {/* ìš°ì„ ìˆœìœ„ ë°°ì§€ */}
              <span className={`px-2 py-1 text-xs font-medium rounded-full ${
                localTask.priority === TaskPriority.URGENT ? 'bg-red-100 text-red-700' :
                localTask.priority === TaskPriority.HIGH ? 'bg-blue-100 text-blue-700' :
                localTask.priority === TaskPriority.MEDIUM ? 'bg-blue-50 text-blue-600' :
                'bg-gray-100 text-gray-600'
              }`}>
                {localTask.priority === TaskPriority.URGENT ? 'ê¸´ê¸‰' :
                 localTask.priority === TaskPriority.HIGH ? 'ë†’ìŒ' :
                 localTask.priority === TaskPriority.MEDIUM ? 'ë³´í†µ' :
                 'ë‚®ìŒ'}
              </span>
            </div>
          </div>
          
          <div className="flex items-center gap-2">
            {/* ì „ì²´í™”ë©´ í† ê¸€ */}
            <button
              onClick={() => setIsFullScreen(!isFullScreen)}
              className="w-10 h-10 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors"
              aria-label={isFullScreen ? 'ì°½ ëª¨ë“œ' : 'ì „ì²´í™”ë©´'}
            >
              {isFullScreen ? (
                <ArrowsPointingInIcon className="w-5 h-5" />
              ) : (
                <ArrowsPointingOutIcon className="w-5 h-5" />
              )}
            </button>
            
            {/* ë‹«ê¸° ë²„íŠ¼ */}
            <button
              onClick={onClose}
              className="w-10 h-10 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors"
              aria-label="ë‹«ê¸°"
            >
              <XMarkIcon className="w-5 h-5" />
            </button>
          </div>
        </div>

        {/* ë©”ì¸ ì½˜í…ì¸  */}
        <div className="flex-1 overflow-y-auto">
          <div className="max-w-4xl mx-auto p-6 space-y-8">
            {/* ì œëª© */}
            <div>
              <input
                ref={titleRef}
                type="text"
                value={localTask.title}
                onChange={(e) => updateLocalTask({ title: e.target.value })}
                className="w-full text-3xl font-bold text-gray-900 border-none outline-none bg-transparent placeholder-gray-400 resize-none"
                placeholder="ì—…ë¬´ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”"
              />
            </div>

            {/* ë©”íƒ€ ì •ë³´ */}
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              {/* ë§ˆê°ì¼ */}
              <div className="flex items-center gap-3 p-3 bg-gray-50 rounded-lg">
                <CalendarDaysIcon className="w-5 h-5 text-gray-500" />
                <div>
                  <label className="text-sm font-medium text-gray-700">ë§ˆê°ì¼</label>
                  <input
                    type="date"
                    value={localTask.dueDate ? localTask.dueDate.split('T')[0] : ''}
                    onChange={(e) => updateLocalTask({ dueDate: e.target.value ? e.target.value + 'T00:00:00.000Z' : undefined })}
                    className="block text-sm text-gray-900 bg-transparent border-none outline-none"
                  />
                </div>
              </div>

              {/* ì‹œê°„ ì¶”ì  */}
              <div className="flex items-center gap-3 p-3 bg-gray-50 rounded-lg">
                <ClockSolidIcon className="w-5 h-5 text-gray-500" />
                <div className="flex-1">
                  <label className="text-sm font-medium text-gray-700">ì‹œê°„ ì¶”ì </label>
                  <div className="flex items-center gap-2 mt-1">
                    {isTimerRunning ? (
                      <>
                        <button
                          onClick={stopTimer}
                          className="flex items-center gap-1 px-2 py-1 text-xs font-medium text-red-600 bg-red-50 hover:bg-red-100 rounded transition-colors"
                        >
                          <StopIcon className="w-3 h-3" />
                          ì •ì§€
                        </button>
                        <span className="text-xs text-red-600 font-medium">
                          ì§„í–‰ ì¤‘ ({currentSessionTime}ë¶„)
                        </span>
                      </>
                    ) : (
                      <button
                        onClick={startTimer}
                        className="flex items-center gap-1 px-2 py-1 text-xs font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 rounded transition-colors"
                      >
                        <PlayIcon className="w-3 h-3" />
                        ì‹œì‘
                      </button>
                    )}
                  </div>
                </div>
              </div>
            </div>

            {/* ì‹œê°„ ê´€ë¦¬ ì„¹ì…˜ */}
            <div className="bg-blue-50 rounded-lg p-4">
              <h4 className="text-sm font-semibold text-gray-900 mb-3 flex items-center gap-2">
                <ClockIcon className="w-4 h-4" />
                ì‹œê°„ ê´€ë¦¬
              </h4>
              
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                {/* ì˜ˆìƒ ì‹œê°„ */}
                <div>
                  <label className="block text-xs font-medium text-gray-600 mb-1">ì˜ˆìƒ ì‹œê°„</label>
                  <div className="flex items-center gap-2">
                    <input
                      type="number"
                      value={localTask.estimatedTimeMinutes || ''}
                      onChange={(e) => updateLocalTask({ estimatedTimeMinutes: e.target.value ? parseInt(e.target.value) : undefined })}
                      placeholder="0"
                      className="w-20 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
                    />
                    <span className="text-xs text-gray-500">ë¶„</span>
                    {localTask.estimatedTimeMinutes && (
                      <span className="text-xs text-gray-600">
                        ({formatTime(localTask.estimatedTimeMinutes)})
                      </span>
                    )}
                  </div>
                </div>

                {/* ì‹¤ì œ ì‹œê°„ */}
                <div>
                  <label className="block text-xs font-medium text-gray-600 mb-1">ì‹¤ì œ ì‹œê°„</label>
                  <div className="flex items-center gap-2">
                    <input
                      type="number"
                      value={localTask.loggedTimeMinutes || ''}
                      onChange={(e) => updateLocalTask({ loggedTimeMinutes: e.target.value ? parseInt(e.target.value) : undefined })}
                      placeholder="0"
                      className="w-20 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
                    />
                    <span className="text-xs text-gray-500">ë¶„</span>
                    {localTask.loggedTimeMinutes && (
                      <span className="text-xs text-gray-600">
                        ({formatTime(localTask.loggedTimeMinutes)})
                      </span>
                    )}
                  </div>
                </div>
              </div>

              {/* ì‹œê°„ ë¹„êµ */}
              {localTask.estimatedTimeMinutes && localTask.loggedTimeMinutes && (
                <div className="mt-3 pt-3 border-t border-blue-200">
                  <div className="flex items-center justify-between text-xs">
                    <span className="text-gray-600">ì§„í–‰ë¥ :</span>
                    <span className={`font-medium ${
                      localTask.loggedTimeMinutes > localTask.estimatedTimeMinutes 
                        ? 'text-red-600' 
                        : 'text-green-600'
                    }`}>
                      {Math.round((localTask.loggedTimeMinutes / localTask.estimatedTimeMinutes) * 100)}%
                      {localTask.loggedTimeMinutes > localTask.estimatedTimeMinutes && ' (ì´ˆê³¼)'}
                    </span>
                  </div>
                  
                  {/* í”„ë¡œê·¸ë ˆìŠ¤ ë°” */}
                  <div className="mt-1 w-full bg-gray-200 rounded-full h-2">
                    <div 
                      className={`h-2 rounded-full transition-all duration-300 ${
                        localTask.loggedTimeMinutes > localTask.estimatedTimeMinutes 
                          ? 'bg-red-500' 
                          : 'bg-blue-500'
                      }`}
                      style={{
                        width: `${Math.min((localTask.loggedTimeMinutes / localTask.estimatedTimeMinutes) * 100, 100)}%`
                      }}
                    />
                  </div>
                </div>
              )}
            </div>

            {/* ì„¤ëª… (MDX ì—ë””í„°) */}
            <div>
              <h3 className="text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2">
                <DocumentTextIcon className="w-5 h-5" />
                ì„¤ëª…
              </h3>
              <WorklyMDXEditor
                markdown={localTask.descriptionMarkdown || localTask.description || ''}
                onChange={(value) => updateLocalTask({ 
                  descriptionMarkdown: value,
                  description: value // ê¸°ë³¸ descriptionë„ ë™ê¸°í™”
                })}
                placeholder="ì—…ë¬´ì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”..."
              />
            </div>

            {/* ì²´í¬ë¦¬ìŠ¤íŠ¸ */}
            <div>
              <h3 className="text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2">
                <CheckCircleIcon className="w-5 h-5" />
                ì²´í¬ë¦¬ìŠ¤íŠ¸
                {localTask.checklist.length > 0 && (
                  <span className="text-sm text-gray-500">
                    ({localTask.checklist.filter(item => item.completed).length}/{localTask.checklist.length})
                  </span>
                )}
              </h3>
              
              <div className="space-y-2">
                {localTask.checklist.map((item) => (
                  <div key={item.id} className="group flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg transition-colors">
                    <button
                      onClick={() => toggleChecklistItem(item.id)}
                      className={`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${
                        item.completed 
                          ? 'bg-blue-600 border-blue-600 text-white' 
                          : 'border-gray-300 hover:border-blue-400'
                      }`}
                    >
                      {item.completed && <CheckCircleIcon className="w-3 h-3" />}
                    </button>
                    
                    {editingChecklistId === item.id ? (
                      <input
                        type="text"
                        defaultValue={item.text}
                        className="flex-1 bg-white border border-blue-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
                        autoFocus
                        onBlur={(e) => {
                          updateChecklistItem(item.id, e.target.value)
                          setEditingChecklistId(null)
                        }}
                        onKeyDown={(e) => {
                          if (e.key === 'Enter') {
                            updateChecklistItem(item.id, e.currentTarget.value)
                            setEditingChecklistId(null)
                          }
                          if (e.key === 'Escape') {
                            setEditingChecklistId(null)
                          }
                        }}
                      />
                    ) : (
                      <span 
                        className={`flex-1 cursor-pointer ${
                          item.completed ? 'line-through text-gray-500' : 'text-gray-900'
                        }`}
                        onClick={() => setEditingChecklistId(item.id)}
                      >
                        {item.text}
                      </span>
                    )}
                    
                    {/* í¸ì§‘/ì‚­ì œ ë²„íŠ¼ */}
                    <div className="opacity-0 group-hover:opacity-100 flex items-center gap-1 transition-opacity">
                      <button
                        onClick={() => setEditingChecklistId(item.id)}
                        className="w-6 h-6 flex items-center justify-center text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors"
                        title="í¸ì§‘"
                      >
                        <PencilIcon className="w-3 h-3" />
                      </button>
                      <button
                        onClick={() => deleteChecklistItem(item.id)}
                        className="w-6 h-6 flex items-center justify-center text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors"
                        title="ì‚­ì œ"
                      >
                        <TrashIcon className="w-3 h-3" />
                      </button>
                    </div>
                  </div>
                ))}
                
                {/* ìƒˆ ì²´í¬ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ ì¶”ê°€ */}
                <div className="flex items-center gap-3 p-2">
                  <div className="w-5 h-5 rounded border-2 border-gray-300" />
                  <input
                    type="text"
                    placeholder="ìƒˆ ì²´í¬ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ ì¶”ê°€..."
                    className="flex-1 bg-transparent border-none outline-none text-gray-900 placeholder-gray-400"
                    onKeyDown={(e) => {
                      if (e.key === 'Enter' && e.currentTarget.value.trim()) {
                        addChecklistItem(e.currentTarget.value)
                        e.currentTarget.value = ''
                      }
                    }}
                  />
                </div>
              </div>
            </div>

            {/* ê´€ë ¨ ì—…ë¬´ */}
            <div>
              <div className="flex items-center justify-between mb-3">
                <h3 className="text-lg font-semibold text-gray-900 flex items-center gap-2">
                  <LinkIcon className="w-5 h-5" />
                  ê´€ë ¨ ì—…ë¬´
                  {localTask.relationships.length > 0 && (
                    <span className="text-sm text-gray-500">({localTask.relationships.length})</span>
                  )}
                </h3>
                <button
                  onClick={() => setShowTaskSearch(true)}
                  className="flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors"
                >
                  <PlusIcon className="w-4 h-4" />
                  ê´€ê³„ ì¶”ê°€
                </button>
              </div>
              
              {localTask.relationships.length > 0 ? (
                <div className="space-y-2">
                  {localTask.relationships.map((relationship) => {
                    const getRelationIcon = (type: string) => {
                      switch (type) {
                        case 'blocks':
                          return <ArrowRightIcon className="w-4 h-4 text-red-500" />
                        case 'blocked_by':
                          return <ArrowLeftIcon className="w-4 h-4 text-red-500" />
                        case 'related':
                          return <ArrowsRightLeftIcon className="w-4 h-4 text-blue-500" />
                        default:
                          return <LinkIcon className="w-4 h-4 text-gray-500" />
                      }
                    }

                    const getRelationLabel = (type: string) => {
                      switch (type) {
                        case 'blocks':
                          return 'ì°¨ë‹¨í•¨'
                        case 'blocked_by':
                          return 'ì°¨ë‹¨ë¨'
                        case 'related':
                          return 'ê´€ë ¨ë¨'
                        case 'parent':
                          return 'ìƒìœ„ ì—…ë¬´'
                        case 'child':
                          return 'í•˜ìœ„ ì—…ë¬´'
                        default:
                          return 'ê´€ë ¨'
                      }
                    }

                    return (
                      <div key={relationship.id} className="group flex items-center gap-3 p-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors">
                        {getRelationIcon(relationship.type)}
                        <div className="flex-1">
                          <div className="flex items-center gap-2">
                            <span className="text-xs font-medium text-gray-600 bg-white px-2 py-1 rounded-full">
                              {getRelationLabel(relationship.type)}
                            </span>
                            <span className="text-sm font-medium text-gray-900">
                              {relationship.targetTask?.title || `ì—…ë¬´ #${relationship.targetTaskId}`}
                            </span>
                          </div>
                        </div>
                        <button
                          onClick={() => removeTaskRelationship(relationship.id)}
                          className="opacity-0 group-hover:opacity-100 w-6 h-6 flex items-center justify-center text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-all"
                          title="ê´€ê³„ ì œê±°"
                        >
                          <XMarkIcon className="w-4 h-4" />
                        </button>
                      </div>
                    )
                  })}
                </div>
              ) : (
                <div className="text-center py-6 text-gray-500">
                  <LinkIcon className="w-8 h-8 mx-auto mb-2 text-gray-300" />
                  <p className="text-sm">ê´€ë ¨ ì—…ë¬´ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                  <button
                    onClick={() => setShowTaskSearch(true)}
                    className="text-sm text-blue-600 hover:text-blue-700 font-medium mt-1"
                  >
                    ê´€ê³„ ì¶”ê°€í•˜ê¸°
                  </button>
                </div>
              )}

              {/* ì—…ë¬´ ê²€ìƒ‰ ëª¨ë‹¬ */}
              {showTaskSearch && (
                <div className="fixed inset-0 z-50 bg-black bg-opacity-25 flex items-center justify-center p-4">
                  <div className="bg-white rounded-lg shadow-xl max-w-md w-full max-h-[70vh] overflow-hidden">
                    {/* ê²€ìƒ‰ í—¤ë” */}
                    <div className="p-4 border-b border-gray-200">
                      <div className="flex items-center justify-between mb-3">
                        <h4 className="text-lg font-semibold text-gray-900">ì—…ë¬´ ê´€ê³„ ì¶”ê°€</h4>
                        <button
                          onClick={() => {
                            setShowTaskSearch(false)
                            setTaskSearchQuery('')
                          }}
                          className="w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors"
                        >
                          <XMarkIcon className="w-5 h-5" />
                        </button>
                      </div>
                      
                      {/* ê²€ìƒ‰ ì…ë ¥ */}
                      <div className="relative">
                        <MagnifyingGlassIcon className="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400" />
                        <input
                          type="text"
                          value={taskSearchQuery}
                          onChange={(e) => setTaskSearchQuery(e.target.value)}
                          placeholder="ì—…ë¬´ ì œëª©ìœ¼ë¡œ ê²€ìƒ‰..."
                          className="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                          autoFocus
                        />
                      </div>
                    </div>

                    {/* ì—…ë¬´ ëª©ë¡ */}
                    <div className="max-h-80 overflow-y-auto">
                      {filteredTasks.length > 0 ? (
                        <div className="p-2">
                          {filteredTasks.map((task) => (
                            <div
                              key={task.id}
                              className="p-3 hover:bg-gray-50 rounded-lg cursor-pointer transition-colors"
                            >
                              <div className="font-medium text-gray-900 mb-2">{task.title}</div>
                              
                              {/* ê´€ê³„ íƒ€ì… ì„ íƒ */}
                              <div className="flex gap-2">
                                <button
                                  onClick={() => addTaskRelationship(task.id, 'blocks')}
                                  className="flex items-center gap-1 px-2 py-1 text-xs font-medium text-red-600 bg-red-50 hover:bg-red-100 rounded transition-colors"
                                >
                                  <ArrowRightIcon className="w-3 h-3" />
                                  ì°¨ë‹¨í•¨
                                </button>
                                <button
                                  onClick={() => addTaskRelationship(task.id, 'blocked_by')}
                                  className="flex items-center gap-1 px-2 py-1 text-xs font-medium text-red-600 bg-red-50 hover:bg-red-100 rounded transition-colors"
                                >
                                  <ArrowLeftIcon className="w-3 h-3" />
                                  ì°¨ë‹¨ë¨
                                </button>
                                <button
                                  onClick={() => addTaskRelationship(task.id, 'related')}
                                  className="flex items-center gap-1 px-2 py-1 text-xs font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 rounded transition-colors"
                                >
                                  <ArrowsRightLeftIcon className="w-3 h-3" />
                                  ê´€ë ¨ë¨
                                </button>
                              </div>
                            </div>
                          ))}
                        </div>
                      ) : (
                        <div className="p-8 text-center text-gray-500">
                          <MagnifyingGlassIcon className="w-8 h-8 mx-auto mb-2 text-gray-300" />
                          <p className="text-sm">
                            {taskSearchQuery ? 'ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.' : 'ì—…ë¬´ë¥¼ ê²€ìƒ‰í•´ë³´ì„¸ìš”.'}
                          </p>
                        </div>
                      )}
                    </div>
                  </div>
                </div>
              )}
            </div>

            {/* ìœ„í‚¤ ë ˆí¼ëŸ°ìŠ¤ */}
            <div>
              <div className="flex items-center justify-between mb-3">
                <h3 className="text-lg font-semibold text-gray-900 flex items-center gap-2">
                  <DocumentTextIcon className="w-5 h-5" />
                  ìœ„í‚¤ ë ˆí¼ëŸ°ìŠ¤
                  {localTask.wikiReferences.length > 0 && (
                    <span className="text-sm text-gray-500">({localTask.wikiReferences.length})</span>
                  )}
                </h3>
                <button
                  onClick={() => setShowWikiForm(true)}
                  className="flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors"
                >
                  <PlusIcon className="w-4 h-4" />
                  ìœ„í‚¤ ì¶”ê°€
                </button>
              </div>
              
              {localTask.wikiReferences.length > 0 ? (
                <div className="space-y-2">
                  {localTask.wikiReferences.map((wiki) => {
                    const DocumentIcon = getDocumentIcon(wiki.url)
                    const documentColor = getDocumentColor(wiki.url)
                    
                    return (
                      <div key={wiki.id} className="group flex items-center gap-3 p-3 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors">
                        <DocumentIcon className={`w-5 h-5 ${documentColor} flex-shrink-0`} />
                        <div className="flex-1">
                          <div className="flex items-center gap-2">
                            <h4 className="text-sm font-medium text-blue-900">{wiki.title}</h4>
                            <LinkIcon className="w-3 h-3 text-blue-600" />
                          </div>
                          {wiki.description && (
                            <p className="text-xs text-blue-700 mt-1">{wiki.description}</p>
                          )}
                          <p className="text-xs text-blue-600 mt-1 font-mono truncate">{wiki.url}</p>
                        </div>
                        <div className="flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
                        <button
                          onClick={() => window.open(wiki.url, '_blank')}
                          className="w-6 h-6 flex items-center justify-center text-blue-600 hover:text-blue-700 hover:bg-blue-200 rounded transition-all"
                          title="ìœ„í‚¤ ì—´ê¸°"
                        >
                          <ArrowTopRightOnSquareIcon className="w-4 h-4" />
                        </button>
                        <button
                          onClick={() => startEditingWiki(wiki)}
                          className="w-6 h-6 flex items-center justify-center text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-all"
                          title="ìœ„í‚¤ í¸ì§‘"
                        >
                          <PencilIcon className="w-4 h-4" />
                        </button>
                        <button
                          onClick={() => removeWikiReference(wiki.id)}
                          className="w-6 h-6 flex items-center justify-center text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-all"
                          title="ìœ„í‚¤ ì œê±°"
                        >
                          <XMarkIcon className="w-4 h-4" />
                        </button>
                        </div>
                      </div>
                    )
                  })}
                </div>
              ) : (
                <div className="text-center py-6 text-gray-500">
                  <DocumentTextIcon className="w-8 h-8 mx-auto mb-2 text-gray-300" />
                  <p className="text-sm">ì—°ê²°ëœ ìœ„í‚¤ ë¬¸ì„œê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                  <button
                    onClick={() => setShowWikiForm(true)}
                    className="text-sm text-blue-600 hover:text-blue-700 font-medium mt-1"
                  >
                    ìœ„í‚¤ ì¶”ê°€í•˜ê¸°
                  </button>
                </div>
              )}

              {/* ìœ„í‚¤ ì¶”ê°€ í¼ */}
              {showWikiForm && (
                <div className="fixed inset-0 z-50 bg-black bg-opacity-25 flex items-center justify-center p-4">
                  <div className="bg-white rounded-lg shadow-xl max-w-md w-full">
                    {/* í¼ í—¤ë” */}
                    <div className="p-4 border-b border-gray-200">
                      <div className="flex items-center justify-between">
                        <h4 className="text-lg font-semibold text-gray-900">
                          {editingWikiId ? 'ìœ„í‚¤ ë ˆí¼ëŸ°ìŠ¤ í¸ì§‘' : 'ìœ„í‚¤ ë ˆí¼ëŸ°ìŠ¤ ì¶”ê°€'}
                        </h4>
                        <button
                          onClick={() => {
                            setShowWikiForm(false)
                            setNewWikiTitle('')
                            setNewWikiUrl('')
                            setNewWikiDescription('')
                            setUrlValidation(null)
                            setEditingWikiId(null)
                          }}
                          className="w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors"
                        >
                          <XMarkIcon className="w-5 h-5" />
                        </button>
                      </div>
                    </div>

                    {/* í¼ ë‚´ìš© */}
                    <div className="p-4 space-y-4">
                      <div>
                        <label htmlFor="wiki-title" className="block text-sm font-medium text-gray-700 mb-1">
                          ì œëª© *
                        </label>
                        <input
                          id="wiki-title"
                          type="text"
                          value={newWikiTitle}
                          onChange={(e) => setNewWikiTitle(e.target.value)}
                          placeholder="ìœ„í‚¤ ë¬¸ì„œ ì œëª©"
                          className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                        />
                      </div>

                      <div>
                        <label htmlFor="wiki-url" className="block text-sm font-medium text-gray-700 mb-1">
                          URL *
                        </label>
                        <div className="relative">
                          <input
                            id="wiki-url"
                            type="url"
                            value={newWikiUrl}
                            onChange={(e) => handleUrlChange(e.target.value)}
                            placeholder="https://wiki.example.com/document"
                            className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${
                              urlValidation 
                                ? urlValidation.isValid 
                                  ? 'border-green-300 bg-green-50' 
                                  : 'border-red-300 bg-red-50'
                                : 'border-gray-300'
                            }`}
                          />
                          {urlValidation && (
                            <div className="absolute right-2 top-1/2 transform -translate-y-1/2">
                              {urlValidation.isValid ? (
                                <CheckCircleIcon className="w-5 h-5 text-green-500" />
                              ) : (
                                <XMarkIcon className="w-5 h-5 text-red-500" />
                              )}
                            </div>
                          )}
                        </div>
                        {urlValidation && (
                          <p className={`text-xs mt-1 ${
                            urlValidation.isValid ? 'text-green-600' : 'text-red-600'
                          }`}>
                            {urlValidation.message}
                          </p>
                        )}
                        
                        {/* URL ë¯¸ë¦¬ë³´ê¸° */}
                        {newWikiUrl && urlValidation?.isValid && (
                          <div className="mt-2 p-2 bg-blue-50 rounded-md border border-blue-200">
                            <div className="flex items-center gap-2 text-sm">
                              <LinkIcon className="w-4 h-4 text-blue-600" />
                              <span className="text-blue-900 font-medium">ë¯¸ë¦¬ë³´ê¸°:</span>
                              <a 
                                href={newWikiUrl} 
                                target="_blank" 
                                rel="noopener noreferrer"
                                className="text-blue-600 hover:text-blue-700 underline truncate flex-1"
                              >
                                {newWikiUrl}
                              </a>
                              <button
                                type="button"
                                onClick={() => window.open(newWikiUrl, '_blank')}
                                className="p-1 text-blue-600 hover:text-blue-700 hover:bg-blue-100 rounded"
                                title="ìƒˆ íƒ­ì—ì„œ ì—´ê¸°"
                              >
                                <ArrowTopRightOnSquareIcon className="w-4 h-4" />
                              </button>
                            </div>
                          </div>
                        )}
                      </div>

                      <div>
                        <label htmlFor="wiki-description" className="block text-sm font-medium text-gray-700 mb-1">
                          ì„¤ëª… (ì„ íƒ)
                        </label>
                        <textarea
                          id="wiki-description"
                          value={newWikiDescription}
                          onChange={(e) => setNewWikiDescription(e.target.value)}
                          placeholder="ìœ„í‚¤ ë¬¸ì„œì— ëŒ€í•œ ê°„ë‹¨í•œ ì„¤ëª…"
                          rows={2}
                          className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none"
                        />
                      </div>
                    </div>

                    {/* í¼ í‘¸í„° */}
                    <div className="flex items-center justify-end gap-3 p-4 border-t border-gray-200">
                      <button
                        onClick={() => {
                          setShowWikiForm(false)
                          setNewWikiTitle('')
                          setNewWikiUrl('')
                          setNewWikiDescription('')
                          setUrlValidation(null)
                          setEditingWikiId(null)
                        }}
                        className="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors"
                      >
                        ì·¨ì†Œ
                      </button>
                      <button
                        onClick={addWikiReference}
                        disabled={!newWikiTitle.trim() || !newWikiUrl.trim() || !urlValidation?.isValid}
                        className="px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
                      >
                        {editingWikiId ? 'ìˆ˜ì •' : 'ì¶”ê°€'}
                      </button>
                    </div>
                  </div>
                </div>
              )}
            </div>
          </div>
        </div>

        {/* í‘¸í„° */}
        <div className="flex items-center justify-between p-4 border-t border-gray-200 bg-gray-50">
          <div className="text-sm text-gray-500">
            ìƒì„±ì¼: {new Date(localTask.createdAt).toLocaleDateString('ko-KR')}
            {localTask.updatedAt && localTask.updatedAt !== localTask.createdAt && (
              <span className="ml-4">
                ìˆ˜ì •ì¼: {new Date(localTask.updatedAt).toLocaleDateString('ko-KR')}
              </span>
            )}
          </div>
          
          <div className="flex items-center gap-3">
            <button
              onClick={onClose}
              className="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors"
            >
              ì·¨ì†Œ
            </button>
            <button
              onClick={handleSave}
              className="px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-blue-600 rounded-md hover:bg-blue-700 transition-colors"
            >
              ì €ì¥
            </button>
          </div>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="frontend/src/components/tasks/TaskFilters.tsx">
'use client';

import React from 'react';
import { Filter, Calendar, CheckCircle, List } from 'lucide-react';
import type { SmartFilter } from '@/types/task.types';

interface TaskFiltersProps {
  currentFilter: SmartFilter | 'all';
  onFilterChange: (filter: SmartFilter) => void;
  taskCounts?: {
    today: number;
    completed: number;
    all: number;
  };
}

const filterConfig = {
  today: {
    label: 'ì˜¤ëŠ˜',
    icon: Calendar,
    description: 'ì˜¤ëŠ˜ ë§ˆê°ì´ê±°ë‚˜ ì§„í–‰ ì¤‘ì¸ íƒœìŠ¤í¬',
    color: 'text-orange-600',
    bgColor: 'bg-orange-100',
    hoverBgColor: 'hover:bg-orange-50',
    activeBgColor: 'bg-orange-100',
  },
  completed: {
    label: 'ì™„ë£Œë¨',
    icon: CheckCircle,
    description: 'ì™„ë£Œëœ íƒœìŠ¤í¬',
    color: 'text-green-600',
    bgColor: 'bg-green-100',
    hoverBgColor: 'hover:bg-green-50',
    activeBgColor: 'bg-green-100',
  },
  all: {
    label: 'ì „ì²´',
    icon: List,
    description: 'ëª¨ë“  íƒœìŠ¤í¬',
    color: 'text-gray-600',
    bgColor: 'bg-gray-100',
    hoverBgColor: 'hover:bg-gray-50',
    activeBgColor: 'bg-gray-100',
  },
};

export default function TaskFilters({
  currentFilter = 'all',
  onFilterChange,
  taskCounts
}: TaskFiltersProps) {
  const handleFilterClick = (filter: SmartFilter) => {
    onFilterChange(filter);
  };

  return (
    <div className="flex flex-col sm:flex-row gap-2 p-4 bg-white rounded-lg border border-gray-200">
      <div className="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2 sm:mb-0">
        <Filter className="w-4 h-4" />
        <span className="hidden sm:inline">í•„í„°:</span>
      </div>
      
      <div className="flex flex-wrap gap-2">
        {Object.entries(filterConfig).map(([filterKey, config]) => {
          const isActive = currentFilter === filterKey;
          const IconComponent = config.icon;
          const count = taskCounts?.[filterKey as keyof typeof taskCounts];
          
          return (
            <button
              key={filterKey}
              onClick={() => handleFilterClick(filterKey as SmartFilter)}
              className={`
                inline-flex items-center gap-2 px-3 py-2 text-sm font-medium rounded-lg
                border transition-all duration-200
                ${isActive 
                  ? `${config.activeBgColor} ${config.color} border-current shadow-sm` 
                  : `bg-white text-gray-600 border-gray-200 ${config.hoverBgColor} hover:border-gray-300`
                }
              `}
              title={config.description}
            >
              <IconComponent className="w-4 h-4" />
              <span>{config.label}</span>
              {count !== undefined && (
                <span className={`
                  inline-flex items-center justify-center w-5 h-5 text-xs font-semibold rounded-full
                  ${isActive 
                    ? 'bg-white text-current' 
                    : 'bg-gray-100 text-gray-600'
                  }
                `}>
                  {count}
                </span>
              )}
            </button>
          );
        })}
      </div>
    </div>
  );
}
</file>

<file path="frontend/src/components/tasks/TaskList.tsx">
'use client';

import React, { useState } from 'react';
import Link from 'next/link';
import { 
  Calendar, 
  Clock, 
  User, 
  Folder,
  MoreHorizontal,
  Edit,
  Trash2,
  Eye
} from 'lucide-react';
import TaskStatusBadge from './TaskStatusBadge';
import TaskPriorityBadge from './TaskPriorityBadge';
import TaskStatusSelector from './TaskStatusSelector';
import { Task, TaskStatus } from '@/types/task.types';

interface TaskListProps {
  tasks: Task[];
  onStatusChange?: (taskId: string, status: TaskStatus) => void;
  onTaskEdit?: (task: Task) => void;
  onTaskDelete?: (task: Task) => void;
  isLoading?: boolean;
  emptyMessage?: string;
  showProject?: boolean;
  showAssignee?: boolean;
}

export default function TaskList({
  tasks,
  onStatusChange,
  onTaskEdit,
  onTaskDelete,
  isLoading = false,
  emptyMessage = 'íƒœìŠ¤í¬ê°€ ì—†ìŠµë‹ˆë‹¤.',
  showProject = true,
  showAssignee = true
}: TaskListProps) {
  const [expandedTask, setExpandedTask] = useState<string | null>(null);

  const formatDate = (dateString: string | null) => {
    if (!dateString) return '';
    const date = new Date(dateString);
    return date.toLocaleDateString('ko-KR', {
      month: 'short',
      day: 'numeric'
    });
  };

  const isOverdue = (dueDate: string | null) => {
    if (!dueDate) return false;
    return new Date(dueDate) < new Date();
  };

  const handleActionClick = (e: React.MouseEvent, action: () => void) => {
    e.preventDefault();
    e.stopPropagation();
    action();
  };

  if (isLoading) {
    return (
      <div className="space-y-3">
        {[...Array(5)].map((_, index) => (
          <div key={index} className="bg-white rounded-lg border border-gray-200 p-4">
            <div className="animate-pulse">
              <div className="h-4 bg-gray-200 rounded w-3/4 mb-3"></div>
              <div className="flex space-x-4">
                <div className="h-6 bg-gray-200 rounded w-16"></div>
                <div className="h-6 bg-gray-200 rounded w-20"></div>
                <div className="h-6 bg-gray-200 rounded w-24"></div>
              </div>
            </div>
          </div>
        ))}
      </div>
    );
  }

  if (tasks.length === 0) {
    return (
      <div className="text-center py-12">
        <div className="text-gray-400 text-6xl mb-4">ğŸ“‹</div>
        <h3 className="text-lg font-medium text-gray-900 mb-2">íƒœìŠ¤í¬ ì—†ìŒ</h3>
        <p className="text-gray-500">{emptyMessage}</p>
      </div>
    );
  }

  return (
    <div className="space-y-3">
      {tasks.map((task) => (
        <div
          key={task.id}
          className="bg-white rounded-lg border border-gray-200 hover:border-gray-300 transition-colors"
        >
          <div className="p-4">
            {/* íƒœìŠ¤í¬ í—¤ë” */}
            <div className="flex items-start justify-between mb-3">
              <div className="flex-1 min-w-0">
                <Link 
                  href={`/tasks/${task.id}`}
                  className="block group"
                >
                  <h3 className="text-lg font-medium text-gray-900 group-hover:text-blue-600 transition-colors truncate">
                    {task.title}
                  </h3>
                  {task.description && (
                    <p className="text-sm text-gray-600 mt-1 line-clamp-2">
                      {task.description}
                    </p>
                  )}
                </Link>
              </div>

              {/* ì•¡ì…˜ ë©”ë‰´ */}
              <div className="flex items-center space-x-2 ml-4">
                <div className="relative">
                  <button
                    onClick={(e) => {
                      e.preventDefault();
                      setExpandedTask(expandedTask === task.id ? null : task.id);
                    }}
                    className="p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100"
                  >
                    <MoreHorizontal className="w-4 h-4" />
                  </button>

                  {expandedTask === task.id && (
                    <>
                      <div
                        className="fixed inset-0 z-10"
                        onClick={() => setExpandedTask(null)}
                      />
                      <div className="absolute right-0 z-20 mt-1 w-40 bg-white rounded-lg shadow-lg border border-gray-200 py-1">
                        <Link
                          href={`/tasks/${task.id}`}
                          className="flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-50"
                        >
                          <Eye className="w-4 h-4 mr-2" />
                          ìƒì„¸ ë³´ê¸°
                        </Link>
                        {onTaskEdit && (
                          <button
                            onClick={(e) => handleActionClick(e, () => onTaskEdit(task))}
                            className="w-full flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-50"
                          >
                            <Edit className="w-4 h-4 mr-2" />
                            ìˆ˜ì •
                          </button>
                        )}
                        {onTaskDelete && (
                          <button
                            onClick={(e) => handleActionClick(e, () => onTaskDelete(task))}
                            className="w-full flex items-center px-3 py-2 text-sm text-red-600 hover:bg-red-50"
                          >
                            <Trash2 className="w-4 h-4 mr-2" />
                            ì‚­ì œ
                          </button>
                        )}
                      </div>
                    </>
                  )}
                </div>
              </div>
            </div>

            {/* íƒœìŠ¤í¬ ë©”íƒ€ë°ì´í„° */}
            <div className="flex items-center flex-wrap gap-3">
              {/* ìƒíƒœ */}
              {onStatusChange ? (
                <TaskStatusSelector
                  currentStatus={task.status}
                  onStatusChange={(status) => onStatusChange(task.id, status)}
                  size="sm"
                />
              ) : (
                <TaskStatusBadge status={task.status} size="sm" />
              )}

              {/* ìš°ì„ ìˆœìœ„ */}
              <TaskPriorityBadge priority={task.priority} size="sm" />

              {/* í”„ë¡œì íŠ¸ */}
              {showProject && task.project && (
                <div className="flex items-center text-sm text-gray-500">
                  <Folder className="w-4 h-4 mr-1" />
                  <span className="truncate max-w-32">{task.project.name}</span>
                </div>
              )}

              {/* ë‹´ë‹¹ì */}
              {showAssignee && task.assignee && (
                <div className="flex items-center text-sm text-gray-500">
                  <User className="w-4 h-4 mr-1" />
                  <span className="truncate max-w-24">
                    {task.assignee.firstName} {task.assignee.lastName}
                  </span>
                </div>
              )}

              {/* ë§ˆê°ì¼ */}
              {task.dueDate && (
                <div className={`flex items-center text-sm ${
                  isOverdue(task.dueDate) ? 'text-red-600' : 'text-gray-500'
                }`}>
                  <Calendar className="w-4 h-4 mr-1" />
                  <span>{formatDate(task.dueDate)}</span>
                  {isOverdue(task.dueDate) && (
                    <span className="ml-1 text-xs">(ì§€ì—°)</span>
                  )}
                </div>
              )}

              {/* ì˜ˆìƒ ì‹œê°„ */}
              {task.estimatedHours && task.estimatedHours > 0 && (
                <div className="flex items-center text-sm text-gray-500">
                  <Clock className="w-4 h-4 mr-1" />
                  <span>{task.estimatedHours}h</span>
                </div>
              )}

              {/* ì§„í–‰ë¥  */}
              {task.progress > 0 && (
                <div className="flex items-center text-sm text-gray-500">
                  <div className="w-12 bg-gray-200 rounded-full h-2 mr-2">
                    <div 
                      className="bg-blue-600 h-2 rounded-full transition-all duration-300"
                      style={{ width: `${task.progress}%` }}
                    ></div>
                  </div>
                  <span>{task.progress}%</span>
                </div>
              )}
            </div>

            {/* íƒœê·¸ */}
            {task.tags && task.tags.length > 0 && (
              <div className="flex flex-wrap gap-1 mt-3">
                {task.tags.slice(0, 3).map((tag, index) => (
                  <span
                    key={index}
                    className="inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full"
                  >
                    {tag}
                  </span>
                ))}
                {task.tags.length > 3 && (
                  <span className="inline-block px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-full">
                    +{task.tags.length - 3}
                  </span>
                )}
              </div>
            )}
          </div>
        </div>
      ))}
    </div>
  );
}
</file>

<file path="frontend/src/components/ui/AdvancedFilterPanel.tsx">
'use client'

import { useState, useRef, useEffect } from 'react'
import { 
  XMarkIcon, 
  CalendarDaysIcon,
  ClockIcon,
  CheckCircleIcon,
  FlagIcon,
  RectangleStackIcon
} from '@heroicons/react/24/outline'
import { TaskStatus, TaskPriority } from '@/types/task.types'

export interface AdvancedFilters {
  // ë§ˆê°ì¼ í•„í„°
  dueDate?: 'overdue' | 'today' | 'this-week' | 'no-due' | 'custom'
  dueDateRange?: { start: string; end: string }
  
  // ìƒíƒœ í•„í„°
  status?: TaskStatus[]
  
  // ì†Œì† í•„í„° 
  projectIds?: string[]
  goalIds?: string[]
}

interface AdvancedFilterPanelProps {
  isOpen: boolean
  onClose: () => void
  filters: AdvancedFilters
  onFiltersChange: (filters: AdvancedFilters) => void
  availableProjects?: Array<{ id: string; name: string }>
  availableGoals?: Array<{ id: string; name: string }>
}

export default function AdvancedFilterPanel({
  isOpen,
  onClose,
  filters,
  onFiltersChange,
  availableProjects = [],
  availableGoals = []
}: AdvancedFilterPanelProps) {
  const panelRef = useRef<HTMLDivElement>(null)
  const [localFilters, setLocalFilters] = useState<AdvancedFilters>(filters)

  // íŒ¨ë„ ì™¸ë¶€ í´ë¦­ ê°ì§€
  useEffect(() => {
    const handleClickOutside = (event: MouseEvent) => {
      if (isOpen && panelRef.current && !panelRef.current.contains(event.target as Node)) {
        onClose()
      }
    }

    if (isOpen) {
      setTimeout(() => {
        document.addEventListener('mousedown', handleClickOutside)
      }, 100)
      
      return () => {
        document.removeEventListener('mousedown', handleClickOutside)
      }
    }
  }, [isOpen, onClose])

  // ë¡œì»¬ í•„í„° ì—…ë°ì´íŠ¸
  const updateLocalFilters = (updates: Partial<AdvancedFilters>) => {
    const newFilters = { ...localFilters, ...updates }
    setLocalFilters(newFilters)
    onFiltersChange(newFilters)
  }

  // ë§ˆê°ì¼ í•„í„° ì˜µì…˜ë“¤
  const dueDateOptions = [
    { key: 'overdue', label: 'ê¸°í•œ ì´ˆê³¼', icon: ClockIcon, color: 'text-red-600' },
    { key: 'today', label: 'ì˜¤ëŠ˜ ë§ˆê°', icon: CalendarDaysIcon, color: 'text-blue-600' },
    { key: 'this-week', label: 'ì´ë²ˆ ì£¼ ë‚´ ë§ˆê°', icon: CalendarDaysIcon, color: 'text-blue-500' },
    { key: 'no-due', label: 'ë§ˆê°ì¼ ì—†ìŒ', icon: CalendarDaysIcon, color: 'text-gray-500' }
  ]

  // ìƒíƒœ í•„í„° ì˜µì…˜ë“¤
  const statusOptions = [
    { key: TaskStatus.TODO, label: 'í•  ì¼', icon: CheckCircleIcon, color: 'text-gray-600' },
    { key: TaskStatus.IN_PROGRESS, label: 'ì§„í–‰ ì¤‘', icon: ClockIcon, color: 'text-blue-600' },
    { key: TaskStatus.DONE, label: 'ì™„ë£Œ', icon: CheckCircleIcon, color: 'text-green-600' },
    { key: TaskStatus.IN_REVIEW, label: 'ê²€í†  ì¤‘', icon: FlagIcon, color: 'text-purple-600' },
    { key: TaskStatus.DEFERRED, label: 'ë³´ë¥˜', icon: ClockIcon, color: 'text-yellow-600' }
  ]

  if (!isOpen) return null

  return (
    <div className="fixed inset-0 z-50 bg-black bg-opacity-25 flex items-start justify-center pt-20">
      <div 
        ref={panelRef}
        className="bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[80vh] overflow-y-auto"
      >
        {/* í—¤ë” */}
        <div className="flex items-center justify-between p-4 border-b border-gray-200">
          <h2 className="text-lg font-semibold text-gray-900">ìƒì„¸ í•„í„°</h2>
          <button
            onClick={onClose}
            className="w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors"
          >
            <XMarkIcon className="w-5 h-5" />
          </button>
        </div>

        {/* ë§ˆê°ì¼ í•„í„° */}
        <div className="p-4 border-b border-gray-100">
          <h3 className="text-sm font-medium text-gray-900 mb-3 flex items-center gap-2">
            <CalendarDaysIcon className="w-4 h-4" />
            ë§ˆê°ì¼
          </h3>
          <div className="space-y-2">
            {dueDateOptions.map((option) => {
              const Icon = option.icon
              return (
                <button
                  key={option.key}
                  onClick={() => updateLocalFilters({ 
                    dueDate: localFilters.dueDate === option.key ? undefined : option.key as any 
                  })}
                  className={`w-full flex items-center gap-3 p-2 rounded-lg text-left transition-colors ${
                    localFilters.dueDate === option.key
                      ? 'bg-blue-50 border border-blue-200'
                      : 'hover:bg-gray-50'
                  }`}
                >
                  <Icon className={`w-4 h-4 ${option.color}`} />
                  <span className="text-sm text-gray-700">{option.label}</span>
                </button>
              )
            })}
          </div>
        </div>

        {/* ìƒíƒœ í•„í„° */}
        <div className="p-4 border-b border-gray-100">
          <h3 className="text-sm font-medium text-gray-900 mb-3 flex items-center gap-2">
            <CheckCircleIcon className="w-4 h-4" />
            ìƒíƒœ
          </h3>
          <div className="space-y-2">
            {statusOptions.map((option) => {
              const Icon = option.icon
              const isSelected = localFilters.status?.includes(option.key) || false
              
              return (
                <button
                  key={option.key}
                  onClick={() => {
                    const currentStatus = localFilters.status || []
                    const newStatus = isSelected
                      ? currentStatus.filter(s => s !== option.key)
                      : [...currentStatus, option.key]
                    
                    updateLocalFilters({ 
                      status: newStatus.length > 0 ? newStatus : undefined 
                    })
                  }}
                  className={`w-full flex items-center gap-3 p-2 rounded-lg text-left transition-colors ${
                    isSelected
                      ? 'bg-blue-50 border border-blue-200'
                      : 'hover:bg-gray-50'
                  }`}
                >
                  <Icon className={`w-4 h-4 ${option.color}`} />
                  <span className="text-sm text-gray-700">{option.label}</span>
                  {isSelected && (
                    <div className="ml-auto w-4 h-4 bg-blue-600 rounded-full flex items-center justify-center">
                      <div className="w-1.5 h-1.5 bg-white rounded-full" />
                    </div>
                  )}
                </button>
              )
            })}
          </div>
        </div>

        {/* ì†Œì† í•„í„° */}
        <div className="p-4">
          <h3 className="text-sm font-medium text-gray-900 mb-3 flex items-center gap-2">
            <RectangleStackIcon className="w-4 h-4" />
            ì†Œì†
          </h3>
          
          {/* í”„ë¡œì íŠ¸ */}
          {availableProjects.length > 0 && (
            <div className="mb-4">
              <h4 className="text-xs font-medium text-gray-600 mb-2">í”„ë¡œì íŠ¸</h4>
              <div className="space-y-1">
                {availableProjects.map((project) => {
                  const isSelected = localFilters.projectIds?.includes(project.id) || false
                  
                  return (
                    <button
                      key={project.id}
                      onClick={() => {
                        const currentProjects = localFilters.projectIds || []
                        const newProjects = isSelected
                          ? currentProjects.filter(p => p !== project.id)
                          : [...currentProjects, project.id]
                        
                        updateLocalFilters({ 
                          projectIds: newProjects.length > 0 ? newProjects : undefined 
                        })
                      }}
                      className={`w-full flex items-center gap-3 p-2 rounded-lg text-left transition-colors ${
                        isSelected
                          ? 'bg-blue-50 border border-blue-200'
                          : 'hover:bg-gray-50'
                      }`}
                    >
                      <div className="w-3 h-3 bg-green-500 rounded-full flex-shrink-0" />
                      <span className="text-sm text-gray-700 truncate">{project.name}</span>
                      {isSelected && (
                        <div className="ml-auto w-4 h-4 bg-blue-600 rounded-full flex items-center justify-center">
                          <div className="w-1.5 h-1.5 bg-white rounded-full" />
                        </div>
                      )}
                    </button>
                  )
                })}
              </div>
            </div>
          )}

          {/* ëª©í‘œ */}
          {availableGoals.length > 0 && (
            <div>
              <h4 className="text-xs font-medium text-gray-600 mb-2">ëª©í‘œ</h4>
              <div className="space-y-1">
                {availableGoals.map((goal) => {
                  const isSelected = localFilters.goalIds?.includes(goal.id) || false
                  
                  return (
                    <button
                      key={goal.id}
                      onClick={() => {
                        const currentGoals = localFilters.goalIds || []
                        const newGoals = isSelected
                          ? currentGoals.filter(g => g !== goal.id)
                          : [...currentGoals, goal.id]
                        
                        updateLocalFilters({ 
                          goalIds: newGoals.length > 0 ? newGoals : undefined 
                        })
                      }}
                      className={`w-full flex items-center gap-3 p-2 rounded-lg text-left transition-colors ${
                        isSelected
                          ? 'bg-blue-50 border border-blue-200'
                          : 'hover:bg-gray-50'
                      }`}
                    >
                      <FlagIcon className="w-4 h-4 text-blue-500 flex-shrink-0" />
                      <span className="text-sm text-gray-700 truncate">{goal.name}</span>
                      {isSelected && (
                        <div className="ml-auto w-4 h-4 bg-blue-600 rounded-full flex items-center justify-center">
                          <div className="w-1.5 h-1.5 bg-white rounded-full" />
                        </div>
                      )}
                    </button>
                  )
                })}
              </div>
            </div>
          )}
        </div>
      </div>
    </div>
  )
}
</file>

<file path="frontend/src/components/ui/Button.tsx">
import React from 'react';
import { cn } from '@/lib/utils';

export interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'default' | 'destructive' | 'outline' | 'secondary' | 'ghost' | 'link';
  size?: 'default' | 'sm' | 'lg' | 'icon';
  loading?: boolean;
}

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant = 'default', size = 'default', loading = false, disabled, children, ...props }, ref) => {
    const baseClasses = 'inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50';
    
    const variants = {
      default: 'bg-blue-600 text-white hover:bg-blue-700',
      destructive: 'bg-red-600 text-white hover:bg-red-700',
      outline: 'border border-gray-300 bg-background text-gray-900 hover:bg-gray-50',
      secondary: 'bg-gray-100 text-gray-900 hover:bg-gray-200',
      ghost: 'text-gray-900 hover:bg-gray-100',
      link: 'text-blue-600 underline-offset-4 hover:underline'
    };

    const sizes = {
      default: 'h-10 px-4 py-2',
      sm: 'h-9 rounded-md px-3',
      lg: 'h-11 rounded-md px-8',
      icon: 'h-10 w-10'
    };

    return (
      <button
        className={cn(
          baseClasses,
          variants[variant],
          sizes[size],
          className
        )}
        ref={ref}
        disabled={disabled || loading}
        {...props}
      >
        {loading ? (
          <div className="flex items-center space-x-2">
            <div className="w-4 h-4 border-2 border-current border-r-transparent rounded-full animate-spin" />
            <span>ë¡œë”©ì¤‘...</span>
          </div>
        ) : (
          children
        )}
      </button>
    );
  }
);

Button.displayName = 'Button';

export { Button };
</file>

<file path="frontend/src/components/ui/CalendarToggleFAB.tsx">
'use client'

import { CalendarIcon, XMarkIcon } from '@heroicons/react/24/outline'

interface CalendarToggleFABProps {
  isCalendarExpanded: boolean
  onToggle: () => void
}

export default function CalendarToggleFAB({ 
  isCalendarExpanded, 
  onToggle 
}: CalendarToggleFABProps) {
  return (
    <button
      onClick={onToggle}
      className={`
        w-14 h-14 
        bg-gray-600 hover:bg-gray-700 
        text-white 
        rounded-full 
        shadow-lg hover:shadow-xl
        transition-all duration-200
        flex items-center justify-center
        ${isCalendarExpanded ? 'rotate-180' : ''}
      `}
      title={isCalendarExpanded ? "ìº˜ë¦°ë” ë‹«ê¸°" : "ìº˜ë¦°ë” ì—´ê¸°"}
    >
      {isCalendarExpanded ? (
        <XMarkIcon className="w-6 h-6" />
      ) : (
        <CalendarIcon className="w-6 h-6" />
      )}
    </button>
  )
}
</file>

<file path="frontend/src/components/ui/LoginBanner.tsx">
'use client'

import { useState, useEffect } from 'react'
import { useRouter } from 'next/navigation'
import { isAuthenticated } from '@/lib/auth'

export default function LoginBanner() {
  const router = useRouter()
  const [isLoggedIn, setIsLoggedIn] = useState(false)

  useEffect(() => {
    setIsLoggedIn(isAuthenticated())
  }, [])

  const handleGoogleLogin = () => {
    router.push('/auth/login')
  }

  // ë¡œê·¸ì¸ëœ ìƒíƒœë©´ í‘œì‹œí•˜ì§€ ì•ŠìŒ
  if (isLoggedIn) {
    return null
  }

  return (
    <div className="fixed top-20 z-30 hidden xl:block" style={{ left: 'calc(50% + 360px + 40px)' }}>
      <div className="bg-white border border-gray-200 rounded-xl shadow-lg p-6 w-72">
        <div className="text-center">
          <div className="mb-4">
            <div className="w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center mx-auto mb-3">
              <span className="text-white font-bold text-xl">W</span>
            </div>
            <h3 className="text-lg font-semibold text-gray-900 mb-2">ì›Œí´ë¦¬ì™€ í•¨ê»˜ ì‹œì‘í•˜ì„¸ìš”</h3>
            <p className="text-sm text-gray-600 mb-4">ì—…ë¬´ë¥¼ ì •ë¦¬í•˜ê³ , ëª©í‘œë¥¼ ë‹¬ì„±í•˜ë©°, ì—­ëŸ‰ì„ ì„±ì¥ì‹œí‚¤ì„¸ìš”</p>
          </div>
          <button 
            onClick={handleGoogleLogin}
            className="w-full flex items-center justify-center gap-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl px-4 py-3 font-semibold hover:from-blue-700 hover:to-purple-700 transition-colors shadow-md"
          >
            <svg className="w-5 h-5" viewBox="0 0 24 24">
              <path
                fill="currentColor"
                d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"
              />
              <path
                fill="currentColor"
                d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"
              />
              <path
                fill="currentColor"
                d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"
              />
              <path
                fill="currentColor"
                d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"
              />
            </svg>
            Googleë¡œ ì‹œì‘í•˜ê¸°
          </button>
          <div className="mt-4 text-xs text-gray-500">
            <p>â€¢ ë¬´ë£Œë¡œ ì‹œì‘</p>
            <p>â€¢ ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥</p>
            <p>â€¢ ë°ì´í„° ì•ˆì „ ë³´ì¥</p>
          </div>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="frontend/src/components/ui/MobileFilterTabs.tsx">
'use client'

import { ReactNode, useRef, useEffect } from 'react'

interface FilterOption {
  key: string
  label: string
  count?: number
  icon?: ReactNode
}

interface MobileFilterTabsProps {
  options: FilterOption[]
  activeFilter: string
  onFilterChange: (filter: string) => void
  className?: string
  variant?: 'chips' | 'tabs' | 'cards'
}

/**
 * í–¥ìƒëœ ëª¨ë°”ì¼ í•„í„° ì»´í¬ë„ŒíŠ¸
 * - ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•œ ë¬´í•œ í™•ì¥ì„±
 * - ëª¨ë˜í•œ ë””ìì¸ ë³€í˜• ì§€ì›
 * - ìë™ ì¤‘ì•™ ì •ë ¬ ë° ìŠ¤í¬ë¡¤
 */
export default function MobileFilterTabs({ 
  options, 
  activeFilter, 
  onFilterChange,
  className = '',
  variant = 'chips'
}: MobileFilterTabsProps) {
  const scrollContainerRef = useRef<HTMLDivElement>(null)

  // í™œì„± í•„í„°ë¡œ ìë™ ìŠ¤í¬ë¡¤
  useEffect(() => {
    if (scrollContainerRef.current) {
      const activeElement = scrollContainerRef.current.querySelector(`[data-filter="${activeFilter}"]`)
      if (activeElement) {
        activeElement.scrollIntoView({
          behavior: 'smooth',
          block: 'nearest',
          inline: 'center'
        })
      }
    }
  }, [activeFilter])

  if (variant === 'chips') {
    return (
      <div className={`relative bg-gradient-to-r from-gray-50 to-white px-4 py-3 ${className}`}>
        {/* ê·¸ë¼ë””ì–¸íŠ¸ í˜ì´ë“œ íš¨ê³¼ */}
        <div className="absolute left-0 top-0 bottom-0 w-4 bg-gradient-to-r from-gray-50 to-transparent pointer-events-none z-10" />
        <div className="absolute right-0 top-0 bottom-0 w-4 bg-gradient-to-l from-white to-transparent pointer-events-none z-10" />
        
        <div 
          ref={scrollContainerRef}
          className="flex space-x-2 overflow-x-auto scrollbar-hide pb-1"
          style={{ scrollbarWidth: 'none', msOverflowStyle: 'none' }}
        >
          {options.map((option) => (
            <button
              key={option.key}
              data-filter={option.key}
              onClick={() => onFilterChange(option.key)}
              className={`
                flex-shrink-0
                px-4 py-2
                text-sm font-medium
                rounded-full
                transition-all duration-300
                flex items-center gap-2
                min-w-max
                transform hover:scale-105
                ${
                  activeFilter === option.key
                    ? 'bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg shadow-blue-500/25'
                    : 'bg-white text-gray-600 hover:text-gray-900 hover:bg-gray-50 border border-gray-200 hover:border-gray-300 hover:shadow-md'
                }
              `}
            >
              {option.icon && (
                <span className="w-4 h-4 flex items-center justify-center">
                  {option.icon}
                </span>
              )}
              <span className="whitespace-nowrap">{option.label}</span>
              {option.count !== undefined && option.count > 0 && (
                <span 
                  className={`
                    text-xs 
                    min-w-[20px] 
                    h-5
                    rounded-full 
                    flex 
                    items-center 
                    justify-center 
                    font-semibold
                    ${
                      activeFilter === option.key 
                        ? 'bg-white/20 text-white' 
                        : 'bg-gray-100 text-gray-600'
                    }
                  `}
                >
                  {option.count > 99 ? '99+' : option.count}
                </span>
              )}
            </button>
          ))}
        </div>
      </div>
    )
  }

  if (variant === 'cards') {
    return (
      <div className={`bg-gray-50 p-4 ${className}`}>
        <div 
          ref={scrollContainerRef}
          className="flex space-x-3 overflow-x-auto scrollbar-hide pb-2"
          style={{ scrollbarWidth: 'none', msOverflowStyle: 'none' }}
        >
          {options.map((option) => (
            <button
              key={option.key}
              data-filter={option.key}
              onClick={() => onFilterChange(option.key)}
              className={`
                flex-shrink-0 
                min-w-[120px]
                p-4
                rounded-xl
                transition-all duration-300
                transform hover:scale-105
                ${
                  activeFilter === option.key
                    ? 'bg-gradient-to-br from-blue-600 to-purple-600 text-white shadow-xl shadow-blue-500/30'
                    : 'bg-white text-gray-700 hover:text-gray-900 shadow-md hover:shadow-lg border border-gray-200'
                }
              `}
            >
              <div className="text-center space-y-2">
                {option.icon && (
                  <div className="flex justify-center">
                    <span className="w-6 h-6 flex items-center justify-center">
                      {option.icon}
                    </span>
                  </div>
                )}
                <div className="text-sm font-medium">{option.label}</div>
                {option.count !== undefined && (
                  <div 
                    className={`
                      text-xs font-semibold
                      ${
                        activeFilter === option.key 
                          ? 'text-white/80' 
                          : 'text-gray-500'
                      }
                    `}
                  >
                    {option.count}ê°œ
                  </div>
                )}
              </div>
            </button>
          ))}
        </div>
      </div>
    )
  }

  // ê¸°ë³¸ tabs ë³€í˜• (ê°œì„ ëœ ë²„ì „)
  return (
    <div className={`bg-white border-b border-gray-200 ${className}`}>
      <div 
        ref={scrollContainerRef}
        className="flex overflow-x-auto scrollbar-hide"
        style={{ scrollbarWidth: 'none', msOverflowStyle: 'none' }}
      >
        {options.map((option) => (
          <button
            key={option.key}
            data-filter={option.key}
            onClick={() => onFilterChange(option.key)}
            className={`
              flex-shrink-0
              px-6 py-4
              text-sm font-medium
              transition-all duration-300
              flex items-center gap-2
              border-b-2
              min-w-max
              relative
              ${
                activeFilter === option.key
                  ? 'text-blue-600 border-blue-600 bg-blue-50/50'
                  : 'text-gray-600 hover:text-gray-900 border-transparent hover:border-gray-300'
              }
            `}
          >
            {option.icon && (
              <span className="w-4 h-4 flex items-center justify-center">
                {option.icon}
              </span>
            )}
            <span className="whitespace-nowrap">{option.label}</span>
            {option.count !== undefined && option.count > 0 && (
              <span 
                className={`
                  text-xs 
                  min-w-[20px] 
                  h-5
                  rounded-full 
                  flex 
                  items-center 
                  justify-center 
                  font-semibold
                  ${
                    activeFilter === option.key 
                      ? 'bg-blue-100 text-blue-700' 
                      : 'bg-gray-100 text-gray-600'
                  }
                `}
              >
                {option.count > 99 ? '99+' : option.count}
              </span>
            )}
          </button>
        ))}
      </div>
    </div>
  )
}
</file>

<file path="frontend/src/components/ui/QuickAddInput.tsx">
'use client'

import { useState, KeyboardEvent } from 'react'
import { PlusIcon } from '@heroicons/react/24/outline'

interface QuickAddInputProps {
  placeholder?: string
  onTaskCreate: (title: string) => void
  className?: string
}

export default function QuickAddInput({ 
  placeholder = "ë¬´ì—‡ì„ í•´ì•¼ í•˜ë‚˜ìš”?", 
  onTaskCreate,
  className = ""
}: QuickAddInputProps) {
  const [inputValue, setInputValue] = useState('')
  const [isLoading, setIsLoading] = useState(false)

  const handleKeyPress = async (e: KeyboardEvent<HTMLInputElement>) => {
    if (e.key === 'Enter' && inputValue.trim()) {
      e.preventDefault()
      setIsLoading(true)
      
      try {
        // PRD ëª…ì„¸: Enter ì…ë ¥ ì‹œ ìƒˆ ì—…ë¬´ê°€ ë¦¬ìŠ¤íŠ¸ ìµœìƒë‹¨ì— ìƒì„±
        await onTaskCreate(inputValue.trim())
        setInputValue('') // ì…ë ¥ì°½ ì´ˆê¸°í™”
      } catch (error) {
        console.error('ì—…ë¬´ ìƒì„± ì‹¤íŒ¨:', error)
      } finally {
        setIsLoading(false)
      }
    }
  }

  const handleButtonClick = async () => {
    if (!inputValue.trim()) return
    
    setIsLoading(true)
    try {
      await onTaskCreate(inputValue.trim())
      setInputValue('')
    } catch (error) {
      console.error('ì—…ë¬´ ìƒì„± ì‹¤íŒ¨:', error)
    } finally {
      setIsLoading(false)
    }
  }

  return (
    <div className={`workly-card ${className}`}>
      <div className="flex items-center space-x-3">
        <div className="flex-1 relative">
          <input
            type="text"
            value={inputValue}
            onChange={(e) => setInputValue(e.target.value)}
            onKeyPress={handleKeyPress}
            placeholder={placeholder}
            disabled={isLoading}
            className="w-full px-4 py-3 text-base border border-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent placeholder-gray-500 disabled:bg-gray-50 disabled:cursor-not-allowed"
          />
          {isLoading && (
            <div className="absolute right-3 top-1/2 transform -translate-y-1/2">
              <div className="animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"></div>
            </div>
          )}
        </div>
        <button
          onClick={handleButtonClick}
          disabled={!inputValue.trim() || isLoading}
          className="workly-button flex items-center justify-center w-12 h-12 disabled:bg-gray-300 disabled:cursor-not-allowed"
        >
          <PlusIcon className="w-5 h-5" />
        </button>
      </div>
      
      {/* íŒíŠ¸ í…ìŠ¤íŠ¸ */}
      <p className="workly-caption mt-2 ml-1">
        Enter í‚¤ë¥¼ ëˆ„ë¥´ê±°ë‚˜ + ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì—…ë¬´ë¥¼ ì¶”ê°€í•˜ì„¸ìš”
      </p>
    </div>
  )
}
</file>

<file path="frontend/src/components/ui/SearchBar.tsx">
'use client'

import { Search, X } from 'lucide-react'

interface SearchBarProps {
  value: string
  onChange: (value: string) => void
  placeholder?: string
  className?: string
  showClearButton?: boolean
}

/**
 * ê¹”ë”í•œ ê²€ìƒ‰ë°” ì»´í¬ë„ŒíŠ¸
 * - ì•„ì´ì½˜ì´ í¬í•¨ëœ ì…ë ¥ í•„ë“œ
 * - í´ë¦¬ì–´ ë²„íŠ¼ ì˜µì…˜
 * - ê¹”ë”í•œ ë””ìì¸
 */
export default function SearchBar({
  value,
  onChange,
  placeholder = "ê²€ìƒ‰...",
  className = "",
  showClearButton = true
}: SearchBarProps) {
  const handleClear = () => {
    onChange('')
  }

  return (
    <div className={`relative ${className}`}>
      <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4" />
      <input
        type="text"
        placeholder={placeholder}
        value={value}
        onChange={(e) => onChange(e.target.value)}
        className="
          w-full 
          pl-10 
          pr-10 
          py-3 
          border 
          border-gray-200 
          rounded-lg 
          focus:ring-2 
          focus:ring-blue-500 
          focus:border-transparent 
          bg-white 
          text-sm
          placeholder:text-gray-400
          transition-colors
        "
      />
      {showClearButton && value && (
        <button
          onClick={handleClear}
          className="
            absolute 
            right-3 
            top-1/2 
            transform 
            -translate-y-1/2 
            text-gray-400 
            hover:text-gray-600 
            transition-colors
            p-1
            rounded-full
            hover:bg-gray-100
          "
          aria-label="ê²€ìƒ‰ ì§€ìš°ê¸°"
        >
          <X className="w-3 h-3" />
        </button>
      )}
    </div>
  )
}
</file>

<file path="frontend/src/components/ui/Textarea.tsx">
import React from 'react';
import { cn } from '@/lib/utils';

export interface TextareaProps extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {
  error?: string;
  label?: string;
  helperText?: string;
}

const Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(
  ({ className, error, label, helperText, id, ...props }, ref) => {
    const textareaId = id || `textarea-${Math.random().toString(36).substr(2, 9)}`;

    return (
      <div className="w-full">
        {label && (
          <label 
            htmlFor={textareaId}
            className="block text-sm font-medium text-gray-700 mb-1"
          >
            {label}
            {props.required && <span className="text-red-500 ml-1">*</span>}
          </label>
        )}
        <textarea
          id={textareaId}
          className={cn(
            'flex min-h-[80px] w-full rounded-md border border-gray-300 bg-background px-3 py-2 text-sm ring-offset-background',
            'placeholder:text-gray-400',
            'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2',
            'disabled:cursor-not-allowed disabled:opacity-50',
            'resize-none',
            error && 'border-red-500 focus-visible:ring-red-500',
            className
          )}
          ref={ref}
          {...props}
        />
        {error && (
          <p className="mt-1 text-sm text-red-600">{error}</p>
        )}
        {helperText && !error && (
          <p className="mt-1 text-sm text-gray-500">{helperText}</p>
        )}
      </div>
    );
  }
);

Textarea.displayName = 'Textarea';

export { Textarea };
</file>

<file path="frontend/src/components/ui/TriageWizardModal.tsx">
'use client'

import { useState, useRef, useEffect } from 'react'
import { 
  XMarkIcon, 
  TrashIcon, 
  CalendarIcon,
  FolderIcon,
  FlagIcon,
  ArrowLeftIcon,
  ArrowRightIcon,
  CheckCircleIcon
} from '@heroicons/react/24/outline'
import { WorklyTask } from '@/shared/types/workly-core.types'
import { TaskStatus } from '@/types/task.types'

interface TriageWizardModalProps {
  isOpen: boolean
  onClose: () => void
  tasks: WorklyTask[] // ë¯¸ë¶„ë¥˜ ì—…ë¬´ë“¤
  onTaskUpdate: (taskId: string, updates: Partial<WorklyTask>) => void
  onTaskDelete: (taskId: string) => void
}

interface DragTarget {
  type: 'delete' | 'schedule' | 'project'
  label: string
  icon: React.ReactNode
  action: string
}

export default function TriageWizardModal({
  isOpen,
  onClose,
  tasks,
  onTaskUpdate,
  onTaskDelete
}: TriageWizardModalProps) {
  const [currentTaskIndex, setCurrentTaskIndex] = useState(0)
  const [isDragging, setIsDragging] = useState(false)
  const [draggedOver, setDraggedOver] = useState<string | null>(null)
  const [swipeStartX, setSwipeStartX] = useState<number | null>(null)
  const [swipeDistance, setSwipeDistance] = useState(0)
  const cardRef = useRef<HTMLDivElement>(null)

  // PRD ëª…ì„¸: ë¯¸ë¶„ë¥˜ ì—…ë¬´ë§Œ í‘œì‹œ (í”„ë¡œì íŠ¸/ëª©í‘œ ì†Œì† ì—†ìŒ)
  const untriagedTasks = tasks.filter(task => 
    !task.projectId && !task.goalId && task.status !== TaskStatus.DONE
  )
  
  // ë””ë²„ê¹…: ë¯¸ë¶„ë¥˜ ì—…ë¬´ê°€ ì—†ìœ¼ë©´ ì „ì²´ ì—…ë¬´ ì¤‘ ì™„ë£Œë˜ì§€ ì•Šì€ ê²ƒë“¤ì„ ë³´ì—¬ì¤Œ
  const availableTasks = untriagedTasks.length > 0 ? untriagedTasks : 
    tasks.filter(task => task.status !== TaskStatus.DONE)

  console.log('TriageWizardModal - ì „ì²´ ì—…ë¬´:', tasks.length)
  console.log('TriageWizardModal - ë¯¸ë¶„ë¥˜ ì—…ë¬´:', untriagedTasks.length)
  console.log('TriageWizardModal - ì‚¬ìš©í•  ì—…ë¬´:', availableTasks.length)

  const currentTask = availableTasks[currentTaskIndex]
  const hasNextTask = currentTaskIndex < availableTasks.length - 1
  const hasPrevTask = currentTaskIndex > 0
  const completedCount = currentTaskIndex

  // ë“œë˜ê·¸ íƒ€ê²Ÿ ì •ì˜
  const dragTargets: DragTarget[] = [
    {
      type: 'delete',
      label: 'ì‚­ì œ (30ì¼ê°„ íœ´ì§€í†µ ë³´ê´€)',
      icon: <TrashIcon className="w-6 h-6" />,
      action: 'delete'
    },
    {
      type: 'schedule',
      label: 'ë‚ ì§œ ì§€ì •',
      icon: <CalendarIcon className="w-6 h-6" />,
      action: 'schedule'
    },
    {
      type: 'project',
      label: 'í”„ë¡œì íŠ¸ì— ì¶”ê°€',
      icon: <FolderIcon className="w-6 h-6" />,
      action: 'project'
    }
  ]

  // ëª¨ë‹¬ì´ ì—´ë¦´ ë•Œ ì²« ë²ˆì§¸ ì—…ë¬´ë¡œ ì´ˆê¸°í™”
  useEffect(() => {
    if (isOpen) {
      setCurrentTaskIndex(0)
      setSwipeDistance(0)
    }
  }, [isOpen])

  // ë¹ˆ ì—…ë¬´ ëª©ë¡ì´ë©´ ëª¨ë‹¬ ë‹«ê¸°
  useEffect(() => {
    if (isOpen && availableTasks.length === 0) {
      onClose()
    }
  }, [availableTasks.length, isOpen, onClose])

  if (!isOpen || !currentTask) return null

  // ìŠ¤ì™€ì´í”„ ì‹œì‘
  const handleTouchStart = (e: React.TouchEvent) => {
    setSwipeStartX(e.touches[0].clientX)
    setSwipeDistance(0)
  }

  // ìŠ¤ì™€ì´í”„ ì¤‘
  const handleTouchMove = (e: React.TouchEvent) => {
    if (swipeStartX === null) return
    
    const currentX = e.touches[0].clientX
    const distance = currentX - swipeStartX
    
    // ì™¼ìª½ ìŠ¤ì™€ì´í”„ë§Œ ì²˜ë¦¬ (ì‚­ì œ)
    if (distance < 0) {
      setSwipeDistance(Math.max(distance, -150)) // ìµœëŒ€ 150px
    }
  }

  // ìŠ¤ì™€ì´í”„ ë
  const handleTouchEnd = () => {
    if (swipeDistance < -100) {
      // PRD ëª…ì„¸: ìŠ¤ì™€ì´í”„(ì™¼ìª½)ìœ¼ë¡œ ì‚­ì œ
      handleDeleteTask()
    } else {
      setSwipeDistance(0)
    }
    setSwipeStartX(null)
  }

  // ë“œë˜ê·¸ ì‹œì‘
  const handleDragStart = (e: React.DragEvent) => {
    setIsDragging(true)
    e.dataTransfer.setData('text/plain', currentTask.id)
  }

  // ë“œë˜ê·¸ ë
  const handleDragEnd = () => {
    setIsDragging(false)
    setDraggedOver(null)
  }

  // ë“œë¡­ íƒ€ê²Ÿ ìœ„ë¡œ ë“œë˜ê·¸
  const handleDragOver = (e: React.DragEvent, targetType: string) => {
    e.preventDefault()
    setDraggedOver(targetType)
  }

  // ë“œë¡­ íƒ€ê²Ÿì—ì„œ ë‚˜ê°
  const handleDragLeave = () => {
    setDraggedOver(null)
  }

  // ë“œë¡­ ì²˜ë¦¬
  const handleDrop = (e: React.DragEvent, target: DragTarget) => {
    e.preventDefault()
    const taskId = e.dataTransfer.getData('text/plain')
    
    if (taskId === currentTask.id) {
      switch (target.type) {
        case 'delete':
          handleDeleteTask()
          break
        case 'schedule':
          handleScheduleTask()
          break
        case 'project':
          handleAssignToProject()
          break
      }
    }
    
    setDraggedOver(null)
    setIsDragging(false)
  }

  // ì—…ë¬´ ì‚­ì œ (30ì¼ê°„ íœ´ì§€í†µ)
  const handleDeleteTask = () => {
    onTaskDelete(currentTask.id)
    moveToNextTask()
  }

  // ë‚ ì§œ ì§€ì • (ì„ì‹œë¡œ 3ì¼ í›„ë¡œ ì„¤ì • - ì‹¤ì œë¡œëŠ” ìº˜ë¦°ë” ìœ„ì ¯ í•„ìš”)
  const handleScheduleTask = () => {
    const dueDate = new Date()
    dueDate.setDate(dueDate.getDate() + 3)
    
    onTaskUpdate(currentTask.id, {
      dueDate: dueDate.toISOString(),
      scheduledDate: dueDate.toISOString()
    })
    moveToNextTask()
  }

  // í”„ë¡œì íŠ¸ í• ë‹¹ (ì„ì‹œë¡œ ê¸°ë³¸ í”„ë¡œì íŠ¸ - ì‹¤ì œë¡œëŠ” í”„ë¡œì íŠ¸ ì„ íƒ í•„ìš”)
  const handleAssignToProject = () => {
    onTaskUpdate(currentTask.id, {
      projectId: 'proj-1' // ì„ì‹œ í”„ë¡œì íŠ¸ ID
    })
    moveToNextTask()
  }

  // ë‹¤ìŒ ì—…ë¬´ë¡œ ì´ë™
  const moveToNextTask = () => {
    if (hasNextTask) {
      setCurrentTaskIndex(prev => prev + 1)
    } else {
      onClose() // ëª¨ë“  ì—…ë¬´ ì²˜ë¦¬ ì™„ë£Œ
    }
    setSwipeDistance(0)
  }

  // ì´ì „ ì—…ë¬´ë¡œ ì´ë™
  const moveToPrevTask = () => {
    if (hasPrevTask) {
      setCurrentTaskIndex(prev => prev - 1)
    }
    setSwipeDistance(0)
  }

  // ê±´ë„ˆë›°ê¸°
  const handleSkip = () => {
    moveToNextTask()
  }

  return (
    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
      <div className="bg-white rounded-xl shadow-2xl w-full max-w-md mx-auto">
        {/* í—¤ë” */}
        <div className="flex items-center justify-between p-6 border-b border-gray-100">
          <div className="flex items-center gap-3">
            <div className="w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center">
              <span className="text-xl">ğŸª„</span>
            </div>
            <div>
              <h2 className="workly-card-title">ì •ë¦¬ ë§ˆë²•ì‚¬</h2>
              <p className="workly-caption">
                {completedCount}/{availableTasks.length} ì™„ë£Œ
              </p>
            </div>
          </div>
          <button
            onClick={onClose}
            className="w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-colors"
          >
            <XMarkIcon className="w-5 h-5" />
          </button>
        </div>

        {/* ì§„í–‰ë¥  ë°” */}
        <div className="px-6 py-3 bg-gray-50">
          <div className="w-full bg-gray-200 rounded-full h-2">
            <div 
              className="bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full transition-all duration-300"
              style={{ width: `${(completedCount / availableTasks.length) * 100}%` }}
            />
          </div>
        </div>

        {/* ì—…ë¬´ ì¹´ë“œ */}
        <div className="p-6">
          <div
            ref={cardRef}
            draggable
            onDragStart={handleDragStart}
            onDragEnd={handleDragEnd}
            onTouchStart={handleTouchStart}
            onTouchMove={handleTouchMove}
            onTouchEnd={handleTouchEnd}
            className={`
              workly-card cursor-move select-none transition-all duration-200
              ${isDragging ? 'opacity-50 scale-95' : ''}
              ${swipeDistance < 0 ? 'bg-red-50' : ''}
            `}
            style={{
              transform: `translateX(${swipeDistance}px)`,
            }}
          >
            <div className="flex items-start gap-3 mb-3">
              <div className="w-6 h-6 flex-shrink-0 bg-blue-100 rounded-full flex items-center justify-center">
                <FlagIcon className="w-4 h-4 text-blue-600" />
              </div>
              <div className="flex-1 min-w-0">
                <h3 className="workly-card-title mb-1">{currentTask.title}</h3>
                {currentTask.description && (
                  <p className="workly-caption text-gray-600 line-clamp-2">
                    {currentTask.description}
                  </p>
                )}
              </div>
            </div>
            
            {/* íƒœê·¸ë“¤ */}
            <div className="flex flex-wrap gap-1 mb-3">
              {currentTask.tags.map((tag, index) => (
                <span
                  key={index}
                  className="inline-block px-2 py-1 text-xs text-gray-600 bg-gray-100 rounded-full"
                >
                  {tag}
                </span>
              ))}
            </div>

            {/* íŒíŠ¸ í…ìŠ¤íŠ¸ */}
            <div className="text-center text-xs text-gray-500 border-t border-gray-100 pt-3">
              <p>â† ìŠ¤ì™€ì´í”„í•˜ì—¬ ì‚­ì œ ë˜ëŠ” ë“œë˜ê·¸í•˜ì—¬ ì •ë¦¬</p>
            </div>
          </div>

          {/* ì‚­ì œ í‘œì‹œ (ìŠ¤ì™€ì´í”„ ì‹œ) */}
          {swipeDistance < -50 && (
            <div className="absolute right-8 top-1/2 transform -translate-y-1/2 text-red-500">
              <TrashIcon className="w-8 h-8" />
              <p className="text-xs mt-1">ì‚­ì œ</p>
            </div>
          )}
        </div>

        {/* ë“œë˜ê·¸ íƒ€ê²Ÿë“¤ */}
        <div className="px-6 pb-4">
          <div className="grid grid-cols-3 gap-3">
            {dragTargets.map((target) => (
              <div
                key={target.type}
                onDragOver={(e) => handleDragOver(e, target.type)}
                onDragLeave={handleDragLeave}
                onDrop={(e) => handleDrop(e, target)}
                className={`
                  p-4 border-2 border-dashed rounded-lg text-center transition-all
                  ${draggedOver === target.type
                    ? target.type === 'delete'
                      ? 'border-red-300 bg-red-50 text-red-600'
                      : target.type === 'schedule'
                      ? 'border-blue-300 bg-blue-50 text-blue-600'
                      : 'border-green-300 bg-green-50 text-green-600'
                    : 'border-gray-200 text-gray-500'
                  }
                `}
              >
                <div className="flex flex-col items-center gap-2">
                  {target.icon}
                  <span className="text-xs font-medium">{target.label}</span>
                </div>
              </div>
            ))}
          </div>
        </div>

        {/* ì•¡ì…˜ ë²„íŠ¼ë“¤ */}
        <div className="flex items-center justify-between p-6 bg-gray-50 rounded-b-xl">
          <button
            onClick={moveToPrevTask}
            disabled={!hasPrevTask}
            className="flex items-center gap-2 px-4 py-2 text-sm text-gray-600 disabled:text-gray-400 disabled:cursor-not-allowed hover:text-gray-800 transition-colors"
          >
            <ArrowLeftIcon className="w-4 h-4" />
            ì´ì „
          </button>

          <button
            onClick={handleSkip}
            className="px-4 py-2 text-sm text-gray-600 hover:text-gray-800 transition-colors"
          >
            ê±´ë„ˆë›°ê¸°
          </button>

          <button
            onClick={moveToNextTask}
            disabled={!hasNextTask}
            className="flex items-center gap-2 px-4 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"
          >
            ë‹¤ìŒ
            <ArrowRightIcon className="w-4 h-4" />
          </button>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="frontend/src/components/ui/WorklyFloatingActionButton.tsx">
'use client'

import { useState, useEffect, useRef } from 'react'
import { usePathname } from 'next/navigation'
import { SparklesIcon } from '@heroicons/react/24/outline'
import TriageWizardModal from '@/components/ui/TriageWizardModal'
import { WorklyTask } from '@/shared/types/workly-core.types'

interface WorklyFloatingActionButtonProps {
  tasks?: WorklyTask[] // ì •ë¦¬ ë§ˆë²•ì‚¬ë¥¼ ìœ„í•œ ì—…ë¬´ ëª©ë¡
  onTaskUpdate?: (taskId: string, updates: Partial<WorklyTask>) => void
  onTaskDelete?: (taskId: string) => void
  showOnDesktop?: boolean  // ì›Œí´ë¦¬ ì •ì±…: ë°ìŠ¤í¬í†±ì—ì„œë§Œ í‘œì‹œ
  showOnMobile?: boolean   // ëª¨ë°”ì¼ì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€
}

export default function WorklyFloatingActionButton({
  tasks = [],
  onTaskUpdate,
  onTaskDelete,
  showOnDesktop = true,
  showOnMobile = false
}: WorklyFloatingActionButtonProps) {
  const pathname = usePathname()
  const [isTriageWizardOpen, setIsTriageWizardOpen] = useState(false)

  // PRD ëª…ì„¸: ë¯¸ë¶„ë¥˜ ì—…ë¬´ 20ê°œ ì´ˆê³¼ ì‹œ ì§€ëŠ¥ì  ìœ ë„
  const untriagedTasks = tasks.filter(task => !task.projectId && !task.goalId)
  const shouldShowTriagePrompt = untriagedTasks.length >= 20
  
  // ë””ë²„ê¹…: í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ì—…ë¬´ê°€ ìˆìœ¼ë©´ í•­ìƒ FAB í‘œì‹œ
  const hasTasksToTriage = tasks.length > 0

  console.log('WorklyFloatingActionButton - ì „ì²´ ì—…ë¬´:', tasks.length)
  console.log('WorklyFloatingActionButton - ë¯¸ë¶„ë¥˜ ì—…ë¬´:', untriagedTasks.length)
  console.log('WorklyFloatingActionButton - FAB í‘œì‹œ ì—¬ë¶€:', hasTasksToTriage)

  const handleOpenTriageWizard = () => {
    console.log('ì •ë¦¬ ë§ˆë²•ì‚¬ ì—´ê¸° í´ë¦­!')
    console.log('ì „ì²´ ì—…ë¬´:', tasks.length)
    console.log('ë¯¸ë¶„ë¥˜ ì—…ë¬´:', untriagedTasks.length)
    setIsTriageWizardOpen(true)
  }

  const handleCloseTriageWizard = () => {
    setIsTriageWizardOpen(false)
  }

  return (
    <>
      {/* ë°ìŠ¤í¬í†± ë²„ì „ - ì •ë¦¬ ë§ˆë²•ì‚¬ FAB */}
      {showOnDesktop && (
        <div className="hidden md:block fixed bottom-6 right-6 z-40">
          {/* ì •ë¦¬ ë§ˆë²•ì‚¬ ë²„íŠ¼ */}
          <button
            onClick={handleOpenTriageWizard}
            className={`
              w-16 h-16 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-full 
              flex items-center justify-center shadow-xl hover:shadow-2xl transition-all duration-300 
              hover:scale-110 active:scale-95
              ${shouldShowTriagePrompt ? 'animate-pulse ring-4 ring-blue-200' : ''}
            `}
            aria-label="ì •ë¦¬ ë§ˆë²•ì‚¬ ì—´ê¸°"
          >
            <SparklesIcon className="w-7 h-7" />
          </button>

          {/* ì§€ëŠ¥ì  ìœ ë„ ì•Œë¦¼ */}
          {shouldShowTriagePrompt && (
            <div className="absolute -top-16 left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-4 py-2 rounded-lg shadow-lg text-xs whitespace-nowrap animate-bounce">
              <div className="text-center">
                <div className="font-semibold">ì •ë¦¬ê°€ í•„ìš”í•´ìš”!</div>
                <div>ë¯¸ë¶„ë¥˜ ì—…ë¬´ {untriagedTasks.length}ê°œ</div>
              </div>
              {/* í™”ì‚´í‘œ */}
              <div className="absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-blue-600"></div>
            </div>
          )}
        </div>
      )}

      {/* ëª¨ë°”ì¼ ë²„ì „ - ì •ë¦¬ ë§ˆë²•ì‚¬ FAB */}
      {showOnMobile && hasTasksToTriage && (
        <div className="md:hidden fixed bottom-20 right-6 z-40">
          <button
            onClick={handleOpenTriageWizard}
            className={`
              w-14 h-14 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-full 
              flex items-center justify-center shadow-lg transition-all duration-300
              ${shouldShowTriagePrompt ? 'animate-pulse ring-2 ring-blue-200' : ''}
            `}
            aria-label="ì •ë¦¬ ë§ˆë²•ì‚¬"
          >
            <SparklesIcon className="w-6 h-6" />
          </button>
        </div>
      )}

      {/* ì •ë¦¬ ë§ˆë²•ì‚¬ ëª¨ë‹¬ */}
      <TriageWizardModal
        isOpen={isTriageWizardOpen}
        onClose={handleCloseTriageWizard}
        tasks={tasks}
        onTaskUpdate={onTaskUpdate || (() => {})}
        onTaskDelete={onTaskDelete || (() => {})}
      />
    </>
  )
}
</file>

<file path="frontend/src/components/ui/WorklyMDXEditor.tsx">
'use client'

import { forwardRef } from 'react'
import { 
  MDXEditor,
  headingsPlugin,
  listsPlugin,
  quotePlugin,
  thematicBreakPlugin,
  markdownShortcutPlugin,
  linkPlugin,
  linkDialogPlugin,
  imagePlugin,
  tablePlugin,
  codeBlockPlugin,
  codeMirrorPlugin,
  toolbarPlugin,
  UndoRedo,
  BoldItalicUnderlineToggles,
  BlockTypeSelect,
  CreateLink,
  InsertImage,
  InsertTable,
  InsertThematicBreak,
  ListsToggle,
  Separator,
  type MDXEditorMethods
} from '@mdxeditor/editor'

interface WorklyMDXEditorProps {
  markdown: string
  onChange: (markdown: string) => void
  placeholder?: string
  className?: string
}

const WorklyMDXEditor = forwardRef<MDXEditorMethods, WorklyMDXEditorProps>(
  ({ markdown, onChange, placeholder = "ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”...", className = "" }, ref) => {
    return (
      <div className={`border border-gray-200 rounded-lg overflow-hidden ${className}`}>
        <MDXEditor
          ref={ref}
          markdown={markdown}
          onChange={onChange}
          placeholder={placeholder}
          plugins={[
            // ê¸°ë³¸ í…ìŠ¤íŠ¸ ì„œì‹
            headingsPlugin(),
            listsPlugin(),
            quotePlugin(),
            thematicBreakPlugin(),
            markdownShortcutPlugin(),
            
            // ë§í¬ ë° ì´ë¯¸ì§€
            linkPlugin(),
            linkDialogPlugin(),
            imagePlugin({
              imageUploadHandler: async () => {
                // ì´ë¯¸ì§€ ì—…ë¡œë“œ ì²˜ë¦¬ ë¡œì§ (í–¥í›„ êµ¬í˜„)
                return Promise.resolve('https://via.placeholder.com/300x200')
              }
            }),
            
            // í…Œì´ë¸” ë° ì½”ë“œ
            tablePlugin(),
            codeBlockPlugin({ defaultCodeBlockLanguage: 'javascript' }),
            codeMirrorPlugin({
              codeBlockLanguages: {
                js: 'JavaScript',
                jsx: 'JSX',
                ts: 'TypeScript',
                tsx: 'TSX',
                css: 'CSS',
                html: 'HTML',
                json: 'JSON',
                md: 'Markdown',
                bash: 'Bash',
                python: 'Python',
                sql: 'SQL'
              }
            }),
            
            // íˆ´ë°”
            toolbarPlugin({
              toolbarContents: () => (
                <>
                  <UndoRedo />
                  <Separator />
                  <BoldItalicUnderlineToggles />
                  <Separator />
                  <BlockTypeSelect />
                  <Separator />
                  <ListsToggle />
                  <Separator />
                  <CreateLink />
                  <InsertImage />
                  <Separator />
                  <InsertTable />
                  <InsertThematicBreak />
                </>
              )
            })
          ]}
          contentEditableClassName="prose max-w-none p-4 focus:outline-none min-h-[200px]"
        />
      </div>
    )
  }
)

WorklyMDXEditor.displayName = 'WorklyMDXEditor'

export default WorklyMDXEditor
</file>

<file path="frontend/src/components/workflow/ExecuteWorkflowDashboard.tsx">
'use client'

import { useState, useEffect } from 'react'
import { 
  PlayIcon,
  ClockIcon,
  CheckCircleIcon,
  ChartBarIcon,
  CalendarDaysIcon,
  BoltIcon,
  FireIcon
} from '@heroicons/react/24/outline'
import { Task, TaskStatus, TaskPriority } from '@/types/task.types'

// ëª©ì—… ì˜¤ëŠ˜ì˜ ì—…ë¬´ ë°ì´í„°
const mockTodayTasks: Task[] = [
  {
    id: '1',
    title: 'ì‚¬ìš©ì í”¼ë“œë°± ì •ë¦¬ ë° ë¶„ì„',
    description: 'ë² íƒ€ í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì í”¼ë“œë°±ì„ ë¶„ì„í•˜ê³  ê°œì„  ë°©í–¥ ìˆ˜ë¦½',
    status: TaskStatus.IN_PROGRESS,
    priority: TaskPriority.HIGH,
    projectId: 'proj-1',
    project: { id: 'proj-1', name: 'ì›Œí´ë¦¬ í”Œë«í¼ ê°œì„ ', color: '#3B82F6' },
    assigneeId: 'user1',
    assignee: { id: 'user1', name: 'ê¹€ì›Œí´ë¦¬', email: 'workly@example.com' },
    dueDate: new Date().toISOString(),
    estimatedHours: 4,
    actualHours: 2.5,
    completionRate: 60,
    tags: ['ë¶„ì„', 'í”¼ë“œë°±', 'UX'],
    createdAt: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),
    updatedAt: new Date().toISOString()
  },
  {
    id: '2',
    title: 'API ì„±ëŠ¥ ìµœì í™”',
    description: 'ì‚¬ìš©ì ëŒ€ì‹œë³´ë“œ API ì‘ë‹µ ì‹œê°„ ê°œì„ ',
    status: TaskStatus.TODO,
    priority: TaskPriority.MEDIUM,
    projectId: 'proj-2',
    project: { id: 'proj-2', name: 'ë°±ì—”ë“œ ìµœì í™”', color: '#10B981' },
    assigneeId: 'user1',
    assignee: { id: 'user1', name: 'ê¹€ì›Œí´ë¦¬', email: 'workly@example.com' },
    dueDate: new Date().toISOString(),
    estimatedHours: 3,
    actualHours: 0,
    completionRate: 0,
    tags: ['ì„±ëŠ¥', 'API', 'ìµœì í™”'],
    createdAt: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(),
    updatedAt: new Date(Date.now() - 12 * 60 * 60 * 1000).toISOString()
  },
  {
    id: '3',
    title: 'íŒ€ íšŒì˜ ì¤€ë¹„',
    description: 'ì£¼ê°„ ìŠ¤í”„ë¦°íŠ¸ íšŒì˜ ì•„ì  ë‹¤ ì‘ì„±',
    status: TaskStatus.COMPLETED,
    priority: TaskPriority.LOW,
    assigneeId: 'user1',
    assignee: { id: 'user1', name: 'ê¹€ì›Œí´ë¦¬', email: 'workly@example.com' },
    dueDate: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),
    completedAt: new Date(Date.now() - 1 * 60 * 60 * 1000).toISOString(),
    estimatedHours: 1,
    actualHours: 0.5,
    completionRate: 100,
    tags: ['íšŒì˜', 'ê³„íš'],
    createdAt: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(),
    updatedAt: new Date(Date.now() - 1 * 60 * 60 * 1000).toISOString()
  }
]

interface ExecuteWorkflowDashboardProps {
  className?: string
}

export default function ExecuteWorkflowDashboard({ className = '' }: ExecuteWorkflowDashboardProps) {
  const [tasks, setTasks] = useState<Task[]>(mockTodayTasks)
  const [focusMode, setFocusMode] = useState(false)
  const [timeSpent, setTimeSpent] = useState(0) // ë¶„ ë‹¨ìœ„
  const [currentFocusTask, setCurrentFocusTask] = useState<Task | null>(null)

  // í†µê³„ ê³„ì‚°
  const todayStats = {
    total: tasks.length,
    completed: tasks.filter(t => t.status === TaskStatus.COMPLETED).length,
    inProgress: tasks.filter(t => t.status === TaskStatus.IN_PROGRESS).length,
    todo: tasks.filter(t => t.status === TaskStatus.TODO).length,
    totalEstimated: tasks.reduce((acc, task) => acc + (task.estimatedHours || 0), 0),
    totalActual: tasks.reduce((acc, task) => acc + (task.actualHours || 0), 0),
    completionRate: Math.round(
      (tasks.filter(t => t.status === TaskStatus.COMPLETED).length / tasks.length) * 100
    )
  }

  // ì§‘ì¤‘ ëª¨ë“œ ì‹œê°„ ì¶”ì 
  useEffect(() => {
    let interval: NodeJS.Timeout | null = null
    
    if (focusMode && currentFocusTask) {
      interval = setInterval(() => {
        setTimeSpent(prev => prev + 1)
      }, 60000) // 1ë¶„ë§ˆë‹¤ ì—…ë°ì´íŠ¸
    }
    
    return () => {
      if (interval) clearInterval(interval)
    }
  }, [focusMode, currentFocusTask])

  const handleStartFocus = (task: Task) => {
    setCurrentFocusTask(task)
    setFocusMode(true)
    setTimeSpent(0)
  }

  const handleStopFocus = () => {
    setFocusMode(false)
    setCurrentFocusTask(null)
    // ì‹¤ì œë¡œëŠ” ì‹œê°„ ê¸°ë¡ì„ ì €ì¥
  }

  const handleTaskStatusChange = (taskId: string, newStatus: TaskStatus) => {
    setTasks(prev => prev.map(task => 
      task.id === taskId 
        ? { 
            ...task, 
            status: newStatus,
            completedAt: newStatus === TaskStatus.COMPLETED ? new Date().toISOString() : undefined,
            updatedAt: new Date().toISOString()
          }
        : task
    ))
  }

  const getPriorityColor = (priority: TaskPriority) => {
    switch (priority) {
      case TaskPriority.URGENT: return 'text-red-600 bg-red-100'
      case TaskPriority.HIGH: return 'text-blue-600 bg-blue-100'
      case TaskPriority.MEDIUM: return 'text-blue-600 bg-blue-100'
      case TaskPriority.LOW: return 'text-gray-600 bg-gray-100'
      default: return 'text-gray-600 bg-gray-100'
    }
  }

  const getStatusColor = (status: TaskStatus) => {
    switch (status) {
      case TaskStatus.TODO: return 'text-gray-600 bg-gray-100'
      case TaskStatus.IN_PROGRESS: return 'text-blue-600 bg-blue-100'
      case TaskStatus.COMPLETED: return 'text-green-600 bg-green-100'
      case TaskStatus.ON_HOLD: return 'text-yellow-600 bg-yellow-100'
      default: return 'text-gray-600 bg-gray-100'
    }
  }

  return (
    <div className={`space-y-6 ${className}`}>
      {/* ì§‘ì¤‘ ëª¨ë“œ ë°°ë„ˆ */}
      {focusMode && currentFocusTask && (
        <div className="bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg p-4">
          <div className="flex items-center justify-between">
            <div className="flex items-center space-x-3">
              <div className="w-10 h-10 rounded-full bg-white bg-opacity-20 flex items-center justify-center">
                <BoltIcon className="w-5 h-5" />
              </div>
              <div>
                <h3 className="font-semibold">ì§‘ì¤‘ ëª¨ë“œ í™œì„±</h3>
                <p className="text-sm opacity-90">{currentFocusTask.title}</p>
              </div>
            </div>
            <div className="text-right">
              <div className="text-2xl font-bold">{Math.floor(timeSpent / 60)}:{(timeSpent % 60).toString().padStart(2, '0')}</div>
              <button
                onClick={handleStopFocus}
                className="text-sm px-3 py-1 bg-white bg-opacity-20 rounded-lg hover:bg-opacity-30 mt-1"
              >
                ì¢…ë£Œ
              </button>
            </div>
          </div>
        </div>
      )}

      {/* ì˜¤ëŠ˜ì˜ í†µê³„ */}
      <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
        <div className="bg-white rounded-lg p-4 border">
          <div className="flex items-center space-x-2">
            <ChartBarIcon className="w-5 h-5 text-blue-600" />
            <span className="text-sm text-gray-600">ì™„ë£Œìœ¨</span>
          </div>
          <div className="text-2xl font-bold text-gray-900 mt-1">{todayStats.completionRate}%</div>
        </div>
        
        <div className="bg-white rounded-lg p-4 border">
          <div className="flex items-center space-x-2">
            <CheckCircleIcon className="w-5 h-5 text-green-600" />
            <span className="text-sm text-gray-600">ì™„ë£Œ</span>
          </div>
          <div className="text-2xl font-bold text-gray-900 mt-1">{todayStats.completed}/{todayStats.total}</div>
        </div>
        
        <div className="bg-white rounded-lg p-4 border">
          <div className="flex items-center space-x-2">
            <ClockIcon className="w-5 h-5 text-amber-600" />
            <span className="text-sm text-gray-600">ì˜ˆìƒ ì‹œê°„</span>
          </div>
          <div className="text-2xl font-bold text-gray-900 mt-1">{todayStats.totalEstimated}h</div>
        </div>
        
        <div className="bg-white rounded-lg p-4 border">
          <div className="flex items-center space-x-2">
            <FireIcon className="w-5 h-5 text-red-600" />
            <span className="text-sm text-gray-600">ì‹¤ì œ ì‹œê°„</span>
          </div>
          <div className="text-2xl font-bold text-gray-900 mt-1">{todayStats.totalActual}h</div>
        </div>
      </div>

      {/* ì˜¤ëŠ˜ì˜ ì—…ë¬´ ëª©ë¡ */}
      <div className="bg-white rounded-lg border">
        <div className="p-4 border-b">
          <div className="flex items-center space-x-2">
            <CalendarDaysIcon className="w-5 h-5 text-blue-600" />
            <h2 className="text-lg font-semibold text-gray-900">ì˜¤ëŠ˜ì˜ ì—…ë¬´</h2>
            <span className="text-sm text-gray-500">
              {new Date().toLocaleDateString('ko-KR', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                weekday: 'long'
              })}
            </span>
          </div>
        </div>
        
        <div className="divide-y">
          {tasks.map((task) => (
            <div key={task.id} className="p-4 hover:bg-gray-50">
              <div className="flex items-start justify-between">
                <div className="flex-1">
                  <div className="flex items-center space-x-2 mb-2">
                    <h3 className="font-medium text-gray-900">{task.title}</h3>
                    <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${getPriorityColor(task.priority)}`}>
                      {task.priority.toUpperCase()}
                    </span>
                    <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(task.status)}`}>
                      {task.status === TaskStatus.TODO ? 'ëŒ€ê¸°' :
                       task.status === TaskStatus.IN_PROGRESS ? 'ì§„í–‰ì¤‘' :
                       task.status === TaskStatus.COMPLETED ? 'ì™„ë£Œ' : 'ë³´ë¥˜'}
                    </span>
                  </div>
                  
                  {task.description && (
                    <p className="text-sm text-gray-600 mb-2">{task.description}</p>
                  )}
                  
                  <div className="flex items-center space-x-4 text-sm text-gray-500">
                    {task.project && (
                      <div className="flex items-center space-x-1">
                        <div 
                          className="w-3 h-3 rounded-full"
                          style={{ backgroundColor: task.project.color }}
                        />
                        <span>{task.project.name}</span>
                      </div>
                    )}
                    <span>{task.estimatedHours}h ì˜ˆìƒ</span>
                    {task.actualHours > 0 && (
                      <span>{task.actualHours}h ì†Œìš”</span>
                    )}
                  </div>
                  
                  {task.tags.length > 0 && (
                    <div className="flex flex-wrap gap-1 mt-2">
                      {task.tags.map((tag, index) => (
                        <span
                          key={index}
                          className="inline-block px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-full"
                        >
                          {tag}
                        </span>
                      ))}
                    </div>
                  )}
                </div>
                
                <div className="flex items-center space-x-2 ml-4">
                  {task.status !== TaskStatus.COMPLETED && (
                    <button
                      onClick={() => handleStartFocus(task)}
                      disabled={focusMode}
                      className="p-2 text-purple-600 hover:bg-purple-50 rounded-lg disabled:opacity-50"
                      title="ì§‘ì¤‘ ëª¨ë“œ ì‹œì‘"
                    >
                      <PlayIcon className="w-4 h-4" />
                    </button>
                  )}
                  
                  <select
                    value={task.status}
                    onChange={(e) => handleTaskStatusChange(task.id, e.target.value as TaskStatus)}
                    className="text-sm border border-gray-300 rounded px-2 py-1"
                  >
                    <option value={TaskStatus.TODO}>ëŒ€ê¸°</option>
                    <option value={TaskStatus.IN_PROGRESS}>ì§„í–‰ì¤‘</option>
                    <option value={TaskStatus.COMPLETED}>ì™„ë£Œ</option>
                    <option value={TaskStatus.ON_HOLD}>ë³´ë¥˜</option>
                  </select>
                </div>
              </div>
              
              {/* ì§„í–‰ë¥  ë°” */}
              {task.completionRate > 0 && (
                <div className="mt-3">
                  <div className="flex items-center justify-between text-sm mb-1">
                    <span className="text-gray-600">ì§„í–‰ë¥ </span>
                    <span className="font-medium">{task.completionRate}%</span>
                  </div>
                  <div className="w-full bg-gray-200 rounded-full h-2">
                    <div 
                      className="h-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300"
                      style={{ width: `${task.completionRate}%` }}
                    />
                  </div>
                </div>
              )}
            </div>
          ))}
        </div>
        
        {tasks.length === 0 && (
          <div className="p-8 text-center">
            <CalendarDaysIcon className="w-16 h-16 text-gray-400 mx-auto mb-4" />
            <h3 className="text-lg font-medium text-gray-600 mb-1">ì˜¤ëŠ˜ í•  ì¼ì´ ì—†ìŠµë‹ˆë‹¤</h3>
            <p className="text-gray-500 text-sm">ìˆ˜ì§‘í•¨ì—ì„œ ìƒˆë¡œìš´ ì—…ë¬´ë¥¼ ê³„íší•´ë³´ì„¸ìš”!</p>
          </div>
        )}
      </div>
    </div>
  )
}
</file>

<file path="frontend/src/components/workflow/PlanWorkflowModal.tsx">
'use client'

import { useState, useEffect } from 'react'
import { 
  ArrowRightIcon,
  CheckCircleIcon,
  FolderPlusIcon,
  FlagIcon,
  ClipboardDocumentIcon,
  XMarkIcon,
  CalendarIcon
} from '@heroicons/react/24/outline'
import { InboxItem, InboxItemStatus } from '@/shared/types/inbox.types'

interface PlanWorkflowModalProps {
  isOpen: boolean
  onClose: () => void
  inboxItem: InboxItem
  onProcessComplete: (processedItem: InboxItem) => void
}

// ì²˜ë¦¬ ìœ í˜• ì˜µì…˜
const processOptions = [
  {
    type: 'task',
    label: 'ì—…ë¬´ë¡œ ì „í™˜',
    icon: ClipboardDocumentIcon,
    color: 'blue',
    description: 'ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥í•œ ë‹¨ì¼ ì—…ë¬´'
  },
  {
    type: 'project',
    label: 'í”„ë¡œì íŠ¸ë¡œ ì „í™˜',
    icon: FolderPlusIcon,
    color: 'green',
    description: 'ì—¬ëŸ¬ ì—…ë¬´ë¡œ êµ¬ì„±ëœ í”„ë¡œì íŠ¸'
  },
  {
    type: 'goal',
    label: 'ëª©í‘œë¡œ ì „í™˜',
    icon: FlagIcon,
    color: 'purple',
    description: 'ì¥ê¸°ì ì¸ ëª©í‘œë‚˜ ë¹„ì „'
  },
  {
    type: 'defer',
    label: 'ë¯¸ë£¨ê¸°',
    icon: CalendarIcon,
    color: 'yellow',
    description: 'ë‚˜ì¤‘ì— ë‹¤ì‹œ ê²€í† '
  }
]

export default function PlanWorkflowModal({
  isOpen,
  onClose,
  inboxItem,
  onProcessComplete
}: PlanWorkflowModalProps) {
  const [selectedOption, setSelectedOption] = useState<string>('')
  const [title, setTitle] = useState('')
  const [description, setDescription] = useState('')
  const [priority, setPriority] = useState<'low' | 'medium' | 'high' | 'urgent'>('medium')
  const [scheduledDate, setScheduledDate] = useState('')
  const [isProcessing, setIsProcessing] = useState(false)

  useEffect(() => {
    if (isOpen && inboxItem) {
      setTitle(inboxItem.title)
      setDescription(inboxItem.content || '')
      setSelectedOption('')
      setPriority('medium')
      setScheduledDate('')
    }
  }, [isOpen, inboxItem])

  const handleProcess = async () => {
    if (!selectedOption || !title.trim()) return

    setIsProcessing(true)

    try {
      // ì‹¤ì œë¡œëŠ” API í˜¸ì¶œ
      await new Promise(resolve => setTimeout(resolve, 1000))

      const processedItem: InboxItem = {
        ...inboxItem,
        status: selectedOption === 'defer' ? InboxItemStatus.DEFERRED : InboxItemStatus.ORGANIZED,
        processedInto: selectedOption === 'defer' ? undefined : {
          type: selectedOption as 'task' | 'project' | 'goal',
          id: `new-${selectedOption}-${Date.now()}`,
          title: title
        },
        processedAt: new Date().toISOString(),
        scheduledFor: scheduledDate ? new Date(scheduledDate).toISOString() : undefined,
        updatedAt: new Date().toISOString()
      }

      onProcessComplete(processedItem)
      onClose()
    } catch (error) {
      console.error('ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:', error)
    } finally {
      setIsProcessing(false)
    }
  }

  if (!isOpen) return null

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
      <div className="bg-white rounded-lg max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
        {/* í—¤ë” */}
        <div className="flex items-center justify-between p-6 border-b">
          <div className="flex items-center space-x-3">
            <div className="w-10 h-10 rounded-lg bg-amber-100 flex items-center justify-center">
              <ArrowRightIcon className="w-5 h-5 text-amber-600" />
            </div>
            <div>
              <h2 className="text-lg font-semibold text-gray-900">í•­ëª© ê³„íší•˜ê¸°</h2>
              <p className="text-sm text-gray-500">ìˆ˜ì§‘ëœ í•­ëª©ì„ ì ì ˆí•œ í˜•íƒœë¡œ ë³€í™˜í•©ë‹ˆë‹¤</p>
            </div>
          </div>
          <button
            onClick={onClose}
            className="p-2 hover:bg-gray-100 rounded-lg"
          >
            <XMarkIcon className="w-5 h-5" />
          </button>
        </div>

        {/* ì›ë³¸ í•­ëª© ì •ë³´ */}
        <div className="p-6 bg-gray-50 border-b">
          <h3 className="font-medium text-gray-900 mb-2">ì›ë³¸ í•­ëª©</h3>
          <div className="bg-white rounded-lg p-4 border">
            <h4 className="font-medium text-gray-900 mb-1">{inboxItem.title}</h4>
            {inboxItem.content && (
              <p className="text-sm text-gray-600">{inboxItem.content}</p>
            )}
            <div className="flex items-center space-x-4 mt-3 text-xs text-gray-500">
              <span>{new Date(inboxItem.createdAt).toLocaleDateString('ko-KR')}</span>
              <span className="capitalize">{inboxItem.source.replace('_', ' ')}</span>
              {inboxItem.tags.length > 0 && (
                <span>{inboxItem.tags.join(', ')}</span>
              )}
            </div>
          </div>
        </div>

        {/* ì²˜ë¦¬ ì˜µì…˜ ì„ íƒ */}
        <div className="p-6 border-b">
          <h3 className="font-medium text-gray-900 mb-4">ì²˜ë¦¬ ë°©ë²• ì„ íƒ</h3>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
            {processOptions.map((option) => {
              const Icon = option.icon
              const isSelected = selectedOption === option.type
              
              return (
                <button
                  key={option.type}
                  onClick={() => setSelectedOption(option.type)}
                  className={`p-4 rounded-lg border-2 text-left transition-all ${
                    isSelected
                      ? 'border-blue-500 bg-blue-50'
                      : 'border-gray-200 hover:border-gray-300'
                  }`}
                >
                  <div className="flex items-start space-x-3">
                    <div className={`w-8 h-8 rounded-lg flex items-center justify-center ${
                      option.color === 'blue' ? 'bg-blue-100 text-blue-600' :
                      option.color === 'green' ? 'bg-green-100 text-green-600' :
                      option.color === 'purple' ? 'bg-purple-100 text-purple-600' :
                      'bg-yellow-100 text-yellow-600'
                    }`}>
                      <Icon className="w-4 h-4" />
                    </div>
                    <div>
                      <h4 className="font-medium text-gray-900">{option.label}</h4>
                      <p className="text-sm text-gray-500 mt-1">{option.description}</p>
                    </div>
                  </div>
                </button>
              )
            })}
          </div>
        </div>

        {/* ì„¸ë¶€ ì •ë³´ ì…ë ¥ */}
        {selectedOption && selectedOption !== 'defer' && (
          <div className="p-6 border-b space-y-4">
            <h3 className="font-medium text-gray-900">ì„¸ë¶€ ì •ë³´</h3>
            
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-2">
                ì œëª©
              </label>
              <input
                type="text"
                value={title}
                onChange={(e) => setTitle(e.target.value)}
                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                placeholder="ëª…í™•í•œ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”"
              />
            </div>

            <div>
              <label className="block text-sm font-medium text-gray-700 mb-2">
                ì„¤ëª…
              </label>
              <textarea
                value={description}
                onChange={(e) => setDescription(e.target.value)}
                rows={3}
                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"
                placeholder="ìì„¸í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”"
              />
            </div>

            <div>
              <label className="block text-sm font-medium text-gray-700 mb-2">
                ìš°ì„ ìˆœìœ„
              </label>
              <select
                value={priority}
                onChange={(e) => setPriority(e.target.value as any)}
                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              >
                <option value="low">ë‚®ìŒ</option>
                <option value="medium">ë³´í†µ</option>
                <option value="high">ë†’ìŒ</option>
                <option value="urgent">ê¸´ê¸‰</option>
              </select>
            </div>
          </div>
        )}

        {/* ë¯¸ë£¨ê¸° ì˜µì…˜ */}
        {selectedOption === 'defer' && (
          <div className="p-6 border-b">
            <h3 className="font-medium text-gray-900 mb-4">ì–¸ì œ ë‹¤ì‹œ ê²€í† í• ê¹Œìš”?</h3>
            <input
              type="date"
              value={scheduledDate}
              onChange={(e) => setScheduledDate(e.target.value)}
              min={new Date().toISOString().split('T')[0]}
              className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            />
          </div>
        )}

        {/* ì•¡ì…˜ ë²„íŠ¼ */}
        <div className="flex justify-end space-x-3 p-6">
          <button
            onClick={onClose}
            disabled={isProcessing}
            className="px-4 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50"
          >
            ì·¨ì†Œ
          </button>
          <button
            onClick={handleProcess}
            disabled={!selectedOption || isProcessing || (selectedOption !== 'defer' && !title.trim())}
            className="flex items-center space-x-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"
          >
            {isProcessing ? (
              <>
                <div className="animate-spin rounded-full h-4 w-4 border-b-2 border-white"></div>
                <span>ì²˜ë¦¬ ì¤‘...</span>
              </>
            ) : (
              <>
                <CheckCircleIcon className="w-4 h-4" />
                <span>ì²˜ë¦¬ ì™„ë£Œ</span>
              </>
            )}
          </button>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="frontend/src/components/workflow/ReviewWorkflowDashboard.tsx">
'use client'

import { useState, useEffect } from 'react'
import { 
  ChartBarIcon,
  ClockIcon,
  ArrowTrendingUpIcon,
  ArrowTrendingDownIcon,
  CalendarIcon,
  CheckCircleIcon,
  ExclamationTriangleIcon,
  LightBulbIcon
} from '@heroicons/react/24/outline'

// ëª©ì—… ì£¼ê°„ ë¦¬ë·° ë°ì´í„°
interface WeeklyReview {
  weekRange: string
  totalTasks: number
  completedTasks: number
  totalHours: number
  focusTime: number
  completionRate: number
  productivity: number
  goals: {
    id: string
    title: string
    progress: number
    target: number
    status: 'on_track' | 'behind' | 'ahead'
  }[]
  insights: {
    type: 'positive' | 'warning' | 'suggestion'
    title: string
    description: string
  }[]
  topCategories: {
    category: string
    hours: number
    tasks: number
  }[]
}

const mockWeeklyReview: WeeklyReview = {
  weekRange: '1ì›” 22ì¼ - 1ì›” 28ì¼',
  totalTasks: 18,
  completedTasks: 14,
  totalHours: 32.5,
  focusTime: 18.2,
  completionRate: 78,
  productivity: 85,
  goals: [
    {
      id: '1',
      title: 'ì›Œí´ë¦¬ í”Œë«í¼ ì™„ì„±',
      progress: 75,
      target: 80,
      status: 'behind'
    },
    {
      id: '2',
      title: 'ê°œì¸ ì—­ëŸ‰ ê°•í™”',
      progress: 48,
      target: 45,
      status: 'ahead'
    }
  ],
  insights: [
    {
      type: 'positive',
      title: 'ì§‘ì¤‘ ì‹œê°„ ì¦ê°€',
      description: 'ì´ë²ˆ ì£¼ ì§‘ì¤‘ ëª¨ë“œ ì‚¬ìš© ì‹œê°„ì´ ì§€ë‚œ ì£¼ ëŒ€ë¹„ 25% ì¦ê°€í–ˆìŠµë‹ˆë‹¤.'
    },
    {
      type: 'warning',
      title: 'ë§ˆê°ì¼ ì§€ì—° ì—…ë¬´',
      description: '3ê°œì˜ ì—…ë¬´ê°€ ì˜ˆì •ëœ ë§ˆê°ì¼ì„ ë„˜ê²¼ìŠµë‹ˆë‹¤. ìš°ì„ ìˆœìœ„ë¥¼ ì¬ê²€í† í•´ë³´ì„¸ìš”.'
    },
    {
      type: 'suggestion',
      title: 'ì˜¤í›„ ìƒì‚°ì„± í–¥ìƒ í•„ìš”',
      description: 'ì˜¤í›„ ì‹œê°„ëŒ€ ì—…ë¬´ ì™„ë£Œìœ¨ì´ 60%ë¡œ ë‚®ìŠµë‹ˆë‹¤. ì˜¤í›„ ë£¨í‹´ì„ ê°œì„ í•´ë³´ì„¸ìš”.'
    }
  ],
  topCategories: [
    { category: 'ê°œë°œ', hours: 15.5, tasks: 8 },
    { category: 'íšŒì˜', hours: 6.2, tasks: 4 },
    { category: 'ë¶„ì„', hours: 4.8, tasks: 3 },
    { category: 'ë¬¸ì„œì‘ì—…', hours: 3.5, tasks: 2 },
    { category: 'í•™ìŠµ', hours: 2.5, tasks: 1 }
  ]
}

interface ReviewWorkflowDashboardProps {
  className?: string
}

export default function ReviewWorkflowDashboard({ className = '' }: ReviewWorkflowDashboardProps) {
  const [reviewData, setReviewData] = useState<WeeklyReview>(mockWeeklyReview)
  const [selectedPeriod, setSelectedPeriod] = useState('this_week')
  const [isLoading, setIsLoading] = useState(false)

  const loadReviewData = async (period: string) => {
    setIsLoading(true)
    // ì‹¤ì œë¡œëŠ” API í˜¸ì¶œ
    await new Promise(resolve => setTimeout(resolve, 1000))
    setIsLoading(false)
  }

  useEffect(() => {
    loadReviewData(selectedPeriod)
  }, [selectedPeriod])

  const getStatusColor = (status: string) => {
    switch (status) {
      case 'ahead': return 'text-green-600 bg-green-100'
      case 'on_track': return 'text-blue-600 bg-blue-100'
      case 'behind': return 'text-red-600 bg-red-100'
      default: return 'text-gray-600 bg-gray-100'
    }
  }

  const getStatusLabel = (status: string) => {
    switch (status) {
      case 'ahead': return 'ì•ì„œê³  ìˆìŒ'
      case 'on_track': return 'ìˆœì¡°ë¡­ê²Œ ì§„í–‰'
      case 'behind': return 'ì§€ì—°ë¨'
      default: return 'ì•Œ ìˆ˜ ì—†ìŒ'
    }
  }

  const getInsightIcon = (type: string) => {
    switch (type) {
      case 'positive': return <ArrowTrendingUpIcon className="w-5 h-5 text-green-600" />
      case 'warning': return <ExclamationTriangleIcon className="w-5 h-5 text-red-600" />
      case 'suggestion': return <LightBulbIcon className="w-5 h-5 text-amber-600" />
      default: return <ChartBarIcon className="w-5 h-5 text-gray-600" />
    }
  }

  const getInsightBgColor = (type: string) => {
    switch (type) {
      case 'positive': return 'bg-green-50 border-green-200'
      case 'warning': return 'bg-red-50 border-red-200'
      case 'suggestion': return 'bg-amber-50 border-amber-200'
      default: return 'bg-gray-50 border-gray-200'
    }
  }

  return (
    <div className={`space-y-6 ${className}`}>
      {/* í—¤ë” */}
      <div className="flex items-center justify-between">
        <div>
          <h1 className="text-2xl font-bold text-gray-900">ì£¼ê°„ ë¦¬ë·°</h1>
          <p className="text-gray-600 mt-1">{reviewData.weekRange}</p>
        </div>
        <select
          value={selectedPeriod}
          onChange={(e) => setSelectedPeriod(e.target.value)}
          className="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
        >
          <option value="this_week">ì´ë²ˆ ì£¼</option>
          <option value="last_week">ì§€ë‚œ ì£¼</option>
          <option value="this_month">ì´ë²ˆ ë‹¬</option>
          <option value="last_month">ì§€ë‚œ ë‹¬</option>
        </select>
      </div>

      {isLoading ? (
        <div className="flex justify-center py-12">
          <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
        </div>
      ) : (
        <>
          {/* ì£¼ìš” ì§€í‘œ */}
          <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
            <div className="bg-white rounded-lg p-6 border">
              <div className="flex items-center space-x-2 mb-2">
                <CheckCircleIcon className="w-5 h-5 text-green-600" />
                <span className="text-sm text-gray-600">ì™„ë£Œìœ¨</span>
              </div>
              <div className="text-3xl font-bold text-gray-900">{reviewData.completionRate}%</div>
              <p className="text-sm text-gray-500 mt-1">
                {reviewData.completedTasks}/{reviewData.totalTasks} ì—…ë¬´
              </p>
            </div>

            <div className="bg-white rounded-lg p-6 border">
              <div className="flex items-center space-x-2 mb-2">
                <ClockIcon className="w-5 h-5 text-blue-600" />
                <span className="text-sm text-gray-600">ì´ ì‘ì—… ì‹œê°„</span>
              </div>
              <div className="text-3xl font-bold text-gray-900">{reviewData.totalHours}h</div>
              <p className="text-sm text-gray-500 mt-1">
                ì§‘ì¤‘ ì‹œê°„: {reviewData.focusTime}h
              </p>
            </div>

            <div className="bg-white rounded-lg p-6 border">
              <div className="flex items-center space-x-2 mb-2">
                <ArrowTrendingUpIcon className="w-5 h-5 text-purple-600" />
                <span className="text-sm text-gray-600">ìƒì‚°ì„± ì§€ìˆ˜</span>
              </div>
              <div className="text-3xl font-bold text-gray-900">{reviewData.productivity}</div>
              <p className="text-sm text-gray-500 mt-1">
                ì§€ë‚œ ì£¼ ëŒ€ë¹„ +5
              </p>
            </div>

            <div className="bg-white rounded-lg p-6 border">
              <div className="flex items-center space-x-2 mb-2">
                <CalendarIcon className="w-5 h-5 text-amber-600" />
                <span className="text-sm text-gray-600">í‰ê·  ì¼ì¼ ì‹œê°„</span>
              </div>
              <div className="text-3xl font-bold text-gray-900">{(reviewData.totalHours / 7).toFixed(1)}h</div>
              <p className="text-sm text-gray-500 mt-1">
                ëª©í‘œ: 6h/ì¼
              </p>
            </div>
          </div>

          {/* ëª©í‘œ ì§„í–‰ ìƒí™© */}
          <div className="bg-white rounded-lg border">
            <div className="p-6 border-b">
              <h2 className="text-lg font-semibold text-gray-900">ëª©í‘œ ì§„í–‰ ìƒí™©</h2>
            </div>
            <div className="p-6 space-y-4">
              {reviewData.goals.map((goal) => (
                <div key={goal.id} className="border rounded-lg p-4">
                  <div className="flex items-center justify-between mb-3">
                    <h3 className="font-medium text-gray-900">{goal.title}</h3>
                    <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(goal.status)}`}>
                      {getStatusLabel(goal.status)}
                    </span>
                  </div>
                  <div className="flex items-center justify-between text-sm mb-2">
                    <span className="text-gray-600">ì§„í–‰ë¥ </span>
                    <span className="font-medium">{goal.progress}% / {goal.target}%</span>
                  </div>
                  <div className="w-full bg-gray-200 rounded-full h-2">
                    <div 
                      className={`h-2 rounded-full transition-all duration-300 ${
                        goal.status === 'ahead' ? 'bg-green-500' :
                        goal.status === 'on_track' ? 'bg-blue-500' :
                        'bg-red-500'
                      }`}
                      style={{ width: `${(goal.progress / goal.target) * 100}%` }}
                    />
                  </div>
                </div>
              ))}
            </div>
          </div>

          {/* ì¸ì‚¬ì´íŠ¸ */}
          <div className="bg-white rounded-lg border">
            <div className="p-6 border-b">
              <h2 className="text-lg font-semibold text-gray-900">ì£¼ê°„ ì¸ì‚¬ì´íŠ¸</h2>
            </div>
            <div className="p-6 space-y-4">
              {reviewData.insights.map((insight, index) => (
                <div key={index} className={`border rounded-lg p-4 ${getInsightBgColor(insight.type)}`}>
                  <div className="flex items-start space-x-3">
                    {getInsightIcon(insight.type)}
                    <div>
                      <h3 className="font-medium text-gray-900 mb-1">{insight.title}</h3>
                      <p className="text-sm text-gray-600">{insight.description}</p>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>

          {/* ì¹´í…Œê³ ë¦¬ë³„ ì‹œê°„ ë¶„ì„ */}
          <div className="bg-white rounded-lg border">
            <div className="p-6 border-b">
              <h2 className="text-lg font-semibold text-gray-900">ì¹´í…Œê³ ë¦¬ë³„ ì‹œê°„ ë¶„ì„</h2>
            </div>
            <div className="p-6">
              <div className="space-y-4">
                {reviewData.topCategories.map((category, index) => (
                  <div key={category.category} className="flex items-center justify-between">
                    <div className="flex items-center space-x-3">
                      <div className="w-8 h-8 rounded-lg bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center text-white text-sm font-medium">
                        {index + 1}
                      </div>
                      <div>
                        <h3 className="font-medium text-gray-900">{category.category}</h3>
                        <p className="text-sm text-gray-500">{category.tasks}ê°œ ì—…ë¬´</p>
                      </div>
                    </div>
                    <div className="text-right">
                      <div className="font-medium text-gray-900">{category.hours}h</div>
                      <div className="text-sm text-gray-500">
                        {Math.round((category.hours / reviewData.totalHours) * 100)}%
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>

          {/* ë‹¤ìŒ ì£¼ ê³„íš */}
          <div className="bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200">
            <div className="p-6">
              <h2 className="text-lg font-semibold text-gray-900 mb-4">ë‹¤ìŒ ì£¼ ê°œì„  ê³„íš</h2>
              <div className="space-y-3">
                <div className="flex items-start space-x-3">
                  <div className="w-6 h-6 rounded-full bg-blue-500 flex items-center justify-center text-white text-sm font-medium">
                    1
                  </div>
                  <p className="text-sm text-gray-700">
                    ì˜¤í›„ ì‹œê°„ëŒ€ ìƒì‚°ì„± í–¥ìƒì„ ìœ„í•´ 15ë¶„ íœ´ì‹ í›„ ì§‘ì¤‘ ëª¨ë“œ í™œìš©
                  </p>
                </div>
                <div className="flex items-start space-x-3">
                  <div className="w-6 h-6 rounded-full bg-purple-500 flex items-center justify-center text-white text-sm font-medium">
                    2
                  </div>
                  <p className="text-sm text-gray-700">
                    ë§ˆê°ì¼ ì§€ì—° ë°©ì§€ë¥¼ ìœ„í•´ ì—…ë¬´ ìš°ì„ ìˆœìœ„ ë§¤ì¼ ì•„ì¹¨ ì¬ê²€í† 
                  </p>
                </div>
                <div className="flex items-start space-x-3">
                  <div className="w-6 h-6 rounded-full bg-green-500 flex items-center justify-center text-white text-sm font-medium">
                    3
                  </div>
                  <p className="text-sm text-gray-700">
                    ëª©í‘œ ë‹¬ì„±ë¥  í–¥ìƒì„ ìœ„í•´ ì£¼ê°„ ì¤‘ê°„ ì ê²€ ìŠ¤ì¼€ì¤„ ì¶”ê°€
                  </p>
                </div>
              </div>
            </div>
          </div>
        </>
      )}
    </div>
  )
}
</file>

<file path="frontend/src/hooks/useDeviceType.ts">
'use client'

import { useState, useEffect } from 'react'

export type DeviceType = 'mobile' | 'tablet' | 'desktop'

export function useDeviceType(): DeviceType {
  const [deviceType, setDeviceType] = useState<DeviceType>('desktop')

  useEffect(() => {
    const checkDeviceType = () => {
      // í„°ì¹˜ ì§€ì› ì—¬ë¶€ í™•ì¸
      const hasTouchScreen = 'ontouchstart' in window || navigator.maxTouchPoints > 0

      if (!hasTouchScreen) {
        setDeviceType('desktop')
        return
      }

      // í™”ë©´ í¬ê¸°ë¡œ ëª¨ë°”ì¼/íƒœë¸”ë¦¿ êµ¬ë¶„
      const width = window.innerWidth
      const height = window.innerHeight
      const minDimension = Math.min(width, height)
      const maxDimension = Math.max(width, height)

      // ëª¨ë°”ì¼: ì‘ì€ ìª½ì´ 480px ë¯¸ë§Œ
      if (minDimension < 480) {
        setDeviceType('mobile')
      }
      // íƒœë¸”ë¦¿: ì‘ì€ ìª½ì´ 480px ì´ìƒ, í° ìª½ì´ 1024px ë¯¸ë§Œ
      else if (maxDimension < 1024) {
        setDeviceType('tablet')
      }
      // ë°ìŠ¤í¬í†±: ê·¸ ì™¸ (í„°ì¹˜ ì§€ì› ë°ìŠ¤í¬í†± í¬í•¨)
      else {
        setDeviceType('desktop')
      }
    }

    // ì´ˆê¸° ê°ì§€
    checkDeviceType()

    // ë¦¬ì‚¬ì´ì¦ˆ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    window.addEventListener('resize', checkDeviceType)
    
    return () => {
      window.removeEventListener('resize', checkDeviceType)
    }
  }, [])

  return deviceType
}

export function useIsMobile(): boolean {
  const deviceType = useDeviceType()
  return deviceType === 'mobile'
}

export function useIsTouch(): boolean {
  const deviceType = useDeviceType()
  return deviceType === 'mobile' || deviceType === 'tablet'
}
</file>

<file path="frontend/src/hooks/useScrollVisibility.ts">
'use client'

import { useEffect, useRef, useCallback } from 'react'

interface UseScrollVisibilityOptions {
  hideDelay?: number
  showOnHover?: boolean
}

export function useScrollVisibility(options: UseScrollVisibilityOptions = {}) {
  const { hideDelay = 1000, showOnHover = true } = options
  const elementRef = useRef<HTMLElement>(null)
  const timeoutRef = useRef<NodeJS.Timeout>()

  const showScrollbar = useCallback(() => {
    if (elementRef.current) {
      elementRef.current.classList.add('scrolling')
    }
  }, [])

  const hideScrollbar = useCallback(() => {
    if (elementRef.current) {
      elementRef.current.classList.remove('scrolling')
    }
  }, [])

  const handleScroll = useCallback(() => {
    showScrollbar()
    
    // ê¸°ì¡´ íƒ€ì´ë¨¸ ì •ë¦¬
    if (timeoutRef.current) {
      clearTimeout(timeoutRef.current)
    }
    
    // ìƒˆ íƒ€ì´ë¨¸ ì„¤ì •
    timeoutRef.current = setTimeout(() => {
      hideScrollbar()
    }, hideDelay)
  }, [showScrollbar, hideScrollbar, hideDelay])

  const handleMouseEnter = useCallback(() => {
    if (showOnHover) {
      showScrollbar()
    }
  }, [showScrollbar, showOnHover])

  const handleMouseLeave = useCallback(() => {
    if (showOnHover) {
      // ìŠ¤í¬ë¡¤ ì¤‘ì´ ì•„ë‹ ë•Œë§Œ ìˆ¨ê¹€
      if (timeoutRef.current) {
        clearTimeout(timeoutRef.current)
      }
      timeoutRef.current = setTimeout(() => {
        hideScrollbar()
      }, 300)
    }
  }, [hideScrollbar, showOnHover])

  useEffect(() => {
    const element = elementRef.current
    if (!element) return

    element.addEventListener('scroll', handleScroll, { passive: true })
    
    if (showOnHover) {
      element.addEventListener('mouseenter', handleMouseEnter)
      element.addEventListener('mouseleave', handleMouseLeave)
    }

    return () => {
      element.removeEventListener('scroll', handleScroll)
      if (showOnHover) {
        element.removeEventListener('mouseenter', handleMouseEnter)
        element.removeEventListener('mouseleave', handleMouseLeave)
      }
      if (timeoutRef.current) {
        clearTimeout(timeoutRef.current)
      }
    }
  }, [handleScroll, handleMouseEnter, handleMouseLeave, showOnHover])

  return { elementRef, showScrollbar, hideScrollbar }
}
</file>

<file path="frontend/src/lib/api/admin-api.ts">
/**
 * ì–´ë“œë¯¼ íŒ¨ë„ API í´ë¼ì´ì–¸íŠ¸
 * ê´€ë¦¬ì ì „ìš© API í˜¸ì¶œì„ ë‹´ë‹¹í•˜ëŠ” ëª¨ë“ˆ
 */

import { ApiResponse } from '@workly/shared';

// ê¸°ë³¸ API ì„¤ì •
const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001';
const ADMIN_API_PREFIX = '/api/admin';

// ì—ëŸ¬ íƒ€ì… ì •ì˜
export class AdminApiError extends Error {
  constructor(
    message: string,
    public status: number,
    public code?: string
  ) {
    super(message);
    this.name = 'AdminApiError';
  }
}

// API ì‘ë‹µ íƒ€ì…
interface AdminApiResponse<T = any> {
  success: boolean;
  data?: T;
  message?: string;
  error?: string;
  pagination?: {
    page: number;
    limit: number;
    total: number;
    totalPages: number;
  };
}

// HTTP ë©”ì„œë“œ íƒ€ì…
type HttpMethod = 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';

/**
 * API ìš”ì²­ì„ ë³´ë‚´ëŠ” ê¸°ë³¸ í•¨ìˆ˜
 */
async function apiRequest<T = any>(
  endpoint: string,
  options: {
    method?: HttpMethod;
    data?: any;
    params?: Record<string, string | number>;
    headers?: Record<string, string>;
  } = {}
): Promise<AdminApiResponse<T>> {
  const {
    method = 'GET',
    data,
    params,
    headers: customHeaders = {},
  } = options;

  // URL êµ¬ì„±
  const url = new URL(`${API_BASE_URL}${ADMIN_API_PREFIX}${endpoint}`);
  
  // ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì¶”ê°€
  if (params) {
    Object.entries(params).forEach(([key, value]) => {
      url.searchParams.append(key, String(value));
    });
  }

  // í—¤ë” ì„¤ì •
  const headers: Record<string, string> = {
    'Content-Type': 'application/json',
    ...customHeaders,
  };

  // ì¸ì¦ í† í° ì¶”ê°€ (localStorageì—ì„œ ê°€ì ¸ì˜´)
  const token = localStorage.getItem('access_token');
  if (token) {
    headers.Authorization = `Bearer ${token}`;
  }

  // ìš”ì²­ ì˜µì…˜ êµ¬ì„±
  const requestOptions: RequestInit = {
    method,
    headers,
    credentials: 'include',
  };

  // POST, PUT, PATCH ìš”ì²­ì¸ ê²½ìš° body ì¶”ê°€
  if (data && ['POST', 'PUT', 'PATCH'].includes(method)) {
    requestOptions.body = JSON.stringify(data);
  }

  try {
    const response = await fetch(url.toString(), requestOptions);
    
    // ì‘ë‹µì´ JSONì´ ì•„ë‹ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì²´í¬
    const contentType = response.headers.get('content-type');
    let responseData;

    if (contentType && contentType.includes('application/json')) {
      responseData = await response.json();
    } else {
      responseData = { success: false, error: await response.text() };
    }

    // HTTP ì—ëŸ¬ ìƒíƒœ ì²´í¬
    if (!response.ok) {
      throw new AdminApiError(
        responseData?.error || responseData?.message || `HTTP ${response.status}`,
        response.status,
        responseData?.code
      );
    }

    return responseData;
  } catch (error) {
    if (error instanceof AdminApiError) {
      throw error;
    }

    // ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ ë“± ê¸°íƒ€ ì—ëŸ¬
    throw new AdminApiError(
      error instanceof Error ? error.message : 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤',
      0
    );
  }
}

// =============================================================================
// ëŒ€ì‹œë³´ë“œ API
// =============================================================================

export const dashboardApi = {
  /**
   * ëŒ€ì‹œë³´ë“œ í†µê³„ ë° ì •ë³´ ì¡°íšŒ
   */
  async getDashboard() {
    return apiRequest('/dashboard');
  },

  /**
   * ê´€ë¦¬ì í”„ë¡œí•„ ì¡°íšŒ
   */
  async getProfile() {
    return apiRequest('/profile');
  },
};

// =============================================================================
// ì‚¬ìš©ì ê´€ë¦¬ API
// =============================================================================

export interface UserFilters {
  page?: number;
  limit?: number;
  search?: string;
  role?: string;
  status?: string;
}

export interface UpdateUserRoleRequest {
  role: string;
  permissions: string[];
}

export const usersApi = {
  /**
   * ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ
   */
  async getUsers(filters: UserFilters = {}) {
    return apiRequest('/users', {
      params: filters as Record<string, string | number>,
    });
  },

  /**
   * íŠ¹ì • ì‚¬ìš©ì ì¡°íšŒ
   */
  async getUser(userId: string) {
    return apiRequest(`/users/${userId}`);
  },

  /**
   * ì‚¬ìš©ì ì—­í•  ë° ê¶Œí•œ ë³€ê²½
   */
  async updateUserRole(userId: string, data: UpdateUserRoleRequest) {
    return apiRequest(`/users/${userId}/role`, {
      method: 'PUT',
      data,
    });
  },

  /**
   * ì‚¬ìš©ì ì‚­ì œ
   */
  async deleteUser(userId: string) {
    return apiRequest(`/users/${userId}`, {
      method: 'DELETE',
    });
  },
};

// =============================================================================
// í”„ë¡œì íŠ¸ ê´€ë¦¬ API
// =============================================================================

export interface ProjectFilters {
  page?: number;
  limit?: number;
  search?: string;
  status?: string;
}

export const projectsApi = {
  /**
   * í”„ë¡œì íŠ¸ ëª©ë¡ ì¡°íšŒ
   */
  async getProjects(filters: ProjectFilters = {}) {
    return apiRequest('/projects', {
      params: filters as Record<string, string | number>,
    });
  },

  /**
   * íŠ¹ì • í”„ë¡œì íŠ¸ ì¡°íšŒ
   */
  async getProject(projectId: string) {
    return apiRequest(`/projects/${projectId}`);
  },

  /**
   * í”„ë¡œì íŠ¸ ì‚­ì œ
   */
  async deleteProject(projectId: string) {
    return apiRequest(`/projects/${projectId}`, {
      method: 'DELETE',
    });
  },
};

// =============================================================================
// ê°ì‚¬ ë¡œê·¸ API
// =============================================================================

export interface AuditLogFilters {
  page?: number;
  limit?: number;
  adminId?: string;
  action?: string;
  targetType?: string;
  startDate?: string;
  endDate?: string;
  success?: boolean;
}

export const auditLogsApi = {
  /**
   * ê°ì‚¬ ë¡œê·¸ ëª©ë¡ ì¡°íšŒ
   */
  async getAuditLogs(filters: AuditLogFilters = {}) {
    const params: Record<string, string | number> = {};
    
    Object.entries(filters).forEach(([key, value]) => {
      if (value !== undefined && value !== '') {
        params[key] = String(value);
      }
    });

    return apiRequest('/audit-logs', { params });
  },

  /**
   * ìµœê·¼ ê°ì‚¬ ë¡œê·¸ ì¡°íšŒ
   */
  async getRecentAuditLogs(adminId?: string, hours: number = 24) {
    const params: Record<string, string | number> = { hours };
    if (adminId) {
      params.adminId = adminId;
    }

    return apiRequest('/audit-logs/recent', { params });
  },
};

// =============================================================================
// ì‹œìŠ¤í…œ ì„¤ì • API
// =============================================================================

export interface SystemSettingsUpdateRequest {
  maintenanceMode?: boolean;
  registrationEnabled?: boolean;
  maxUsersPerProject?: number;
  maxProjectsPerUser?: number;
  emailNotifications?: boolean;
  [key: string]: any;
}

export const settingsApi = {
  /**
   * ì‹œìŠ¤í…œ ì„¤ì • ì¡°íšŒ
   */
  async getSettings() {
    return apiRequest('/settings');
  },

  /**
   * ì‹œìŠ¤í…œ ì„¤ì • ì—…ë°ì´íŠ¸
   */
  async updateSettings(data: SystemSettingsUpdateRequest) {
    return apiRequest('/settings', {
      method: 'PUT',
      data,
    });
  },
};

// =============================================================================
// í†µí•© ì–´ë“œë¯¼ API ê°ì²´
// =============================================================================

export const adminApi = {
  dashboard: dashboardApi,
  users: usersApi,
  projects: projectsApi,
  auditLogs: auditLogsApi,
  settings: settingsApi,
};

// ê¸°ë³¸ ë‚´ë³´ë‚´ê¸°
export default adminApi;
</file>

<file path="frontend/src/lib/api/tasks.ts">
/**
 * Task API í´ë¼ì´ì–¸íŠ¸
 */

import { api } from '../api';
import type {
  Task,
  CreateTaskDto,
  UpdateTaskDto,
  TaskQueryDto,
  PaginatedResponse,
  GTDContext,
  SmartFilter,
  TaskStatus,
  TaskPriority,
} from '../../types/task.types';

/**
 * íƒœìŠ¤í¬ ìƒì„±
 */
export const createTask = async (data: CreateTaskDto): Promise<Task> => {
  return api.post<Task>('/tasks', data);
};

/**
 * íƒœìŠ¤í¬ ëª©ë¡ ì¡°íšŒ (í•„í„°ë§, ì •ë ¬, í˜ì´ì§• ì§€ì›)
 */
export const getTasks = async (query?: TaskQueryDto): Promise<PaginatedResponse<Task>> => {
  const params = new URLSearchParams();
  
  if (query) {
    Object.entries(query).forEach(([key, value]) => {
      if (value !== undefined && value !== null) {
        if (Array.isArray(value)) {
          value.forEach(v => params.append(key, v.toString()));
        } else {
          params.append(key, value.toString());
        }
      }
    });
  }

  const queryString = params.toString();
  const endpoint = queryString ? `/tasks?${queryString}` : '/tasks';
  
  return api.get<PaginatedResponse<Task>>(endpoint);
};

/**
 * íŠ¹ì • íƒœìŠ¤í¬ ì¡°íšŒ
 */
export const getTask = async (id: string): Promise<Task> => {
  return api.get<Task>(`/tasks/${id}`);
};

/**
 * íƒœìŠ¤í¬ ìˆ˜ì •
 */
export const updateTask = async (id: string, data: UpdateTaskDto): Promise<Task> => {
  return api.put<Task>(`/tasks/${id}`, data);
};

/**
 * íƒœìŠ¤í¬ ì‚­ì œ
 */
export const deleteTask = async (id: string): Promise<void> => {
  return api.delete<void>(`/tasks/${id}`);
};

/**
 * íƒœìŠ¤í¬ ìƒíƒœ ë³€ê²½
 */
export const updateTaskStatus = async (id: string, status: TaskStatus): Promise<Task> => {
  return api.put<Task>(`/tasks/${id}/status?status=${status}`);
};

/**
 * íƒœìŠ¤í¬ ìš°ì„ ìˆœìœ„ ë³€ê²½
 */
export const updateTaskPriority = async (id: string, priority: TaskPriority): Promise<Task> => {
  return api.put<Task>(`/tasks/${id}/priority?priority=${priority}`);
};

/**
 * íƒœìŠ¤í¬ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
 */
export const updateTaskProgress = async (id: string, progress: number): Promise<Task> => {
  return api.put<Task>(`/tasks/${id}/progress?progress=${progress}`);
};

/**
 * ë‚´ íƒœìŠ¤í¬ ì¡°íšŒ (GTD ì»¨í…ìŠ¤íŠ¸ë³„)
 */
export const getMyTasks = async (context?: GTDContext): Promise<Task[]> => {
  const endpoint = context ? `/tasks/my/${context}` : '/tasks/my';
  return api.get<Task[]>(endpoint);
};

/**
 * GTD ìŠ¤ë§ˆíŠ¸ í•„í„° ê¸°ë°˜ íƒœìŠ¤í¬ ì¡°íšŒ
 */
export const getSmartFilteredTasks = async (filter: SmartFilter): Promise<Task[]> => {
  return api.get<Task[]>(`/tasks/filter/${filter}`);
};

/**
 * ì˜¤ëŠ˜ í•  ì¼ ì¡°íšŒ
 */
export const getTodayTasks = async (): Promise<Task[]> => {
  return getSmartFilteredTasks('today');
};

/**
 * ì™„ë£Œëœ íƒœìŠ¤í¬ ì¡°íšŒ
 */
export const getCompletedTasks = async (): Promise<Task[]> => {
  return getSmartFilteredTasks('completed');
};

/**
 * ëª¨ë“  íƒœìŠ¤í¬ ì¡°íšŒ
 */
export const getAllTasks = async (): Promise<Task[]> => {
  return getSmartFilteredTasks('all');
};

/**
 * íƒœìŠ¤í¬ ì™„ë£Œ ì²˜ë¦¬
 */
export const completeTask = async (id: string): Promise<Task> => {
  return updateTaskStatus(id, TaskStatus.DONE);
};

/**
 * íƒœìŠ¤í¬ ì‹œì‘
 */
export const startTask = async (id: string): Promise<Task> => {
  return updateTaskStatus(id, TaskStatus.IN_PROGRESS);
};

/**
 * íƒœìŠ¤í¬ ì°¨ë‹¨
 */
export const blockTask = async (id: string): Promise<Task> => {
  return updateTaskStatus(id, TaskStatus.BLOCKED);
};

/**
 * íƒœìŠ¤í¬ ì·¨ì†Œ
 */
export const cancelTask = async (id: string): Promise<Task> => {
  return updateTaskStatus(id, TaskStatus.CANCELLED);
};

/**
 * íƒœìŠ¤í¬ ê²€í†  ìš”ì²­
 */
export const requestTaskReview = async (id: string): Promise<Task> => {
  return updateTaskStatus(id, TaskStatus.IN_REVIEW);
};

/**
 * íƒœìŠ¤í¬ í• ë‹¹
 */
export const assignTask = async (id: string, assigneeId: string): Promise<Task> => {
  return updateTask(id, { assigneeId } as UpdateTaskDto);
};

/**
 * íƒœìŠ¤í¬ í• ë‹¹ í•´ì œ
 */
export const unassignTask = async (id: string): Promise<Task> => {
  return updateTask(id, { assigneeId: undefined } as UpdateTaskDto);
};

/**
 * íƒœìŠ¤í¬ ë§ˆê°ì¼ ì„¤ì •
 */
export const setTaskDueDate = async (id: string, dueDate: string): Promise<Task> => {
  return updateTask(id, { dueDate });
};

/**
 * íƒœìŠ¤í¬ ë§ˆê°ì¼ ì œê±°
 */
export const clearTaskDueDate = async (id: string): Promise<Task> => {
  return updateTask(id, { dueDate: undefined });
};

/**
 * íƒœìŠ¤í¬ íƒœê·¸ ì¶”ê°€
 */
export const addTaskTag = async (id: string, tag: string): Promise<Task> => {
  const task = await getTask(id);
  const newTags = [...(task.tags || []), tag];
  return updateTask(id, { tags: newTags });
};

/**
 * íƒœìŠ¤í¬ íƒœê·¸ ì œê±°
 */
export const removeTaskTag = async (id: string, tag: string): Promise<Task> => {
  const task = await getTask(id);
  const newTags = (task.tags || []).filter(t => t !== tag);
  return updateTask(id, { tags: newTags });
};

/**
 * ì„œë¸ŒíƒœìŠ¤í¬ ìƒì„±
 */
export const createSubtask = async (parentTaskId: string, data: Omit<CreateTaskDto, 'parentTaskId'>): Promise<Task> => {
  return createTask({ ...data, parentTaskId });
};

/**
 * ë¶€ëª¨ íƒœìŠ¤í¬ì˜ ì„œë¸ŒíƒœìŠ¤í¬ ì¡°íšŒ
 */
export const getSubtasks = async (parentTaskId: string): Promise<Task[]> => {
  return api.get<Task[]>(`/tasks?parentTaskId=${parentTaskId}&includeSubtasks=true`);
};

/**
 * í”„ë¡œì íŠ¸ì˜ íƒœìŠ¤í¬ ì¡°íšŒ
 */
export const getProjectTasks = async (projectId: string, query?: Omit<TaskQueryDto, 'projectId'>): Promise<PaginatedResponse<Task>> => {
  return getTasks({ ...query, projectId });
};

/**
 * ë‹´ë‹¹ìì˜ íƒœìŠ¤í¬ ì¡°íšŒ
 */
export const getAssigneeTasks = async (assigneeId: string, query?: Omit<TaskQueryDto, 'assigneeId'>): Promise<PaginatedResponse<Task>> => {
  return getTasks({ ...query, assigneeId });
};

/**
 * íƒœìŠ¤í¬ ê²€ìƒ‰
 */
export const searchTasks = async (searchTerm: string, filters?: Partial<TaskQueryDto>): Promise<PaginatedResponse<Task>> => {
  return getTasks({ ...filters, search: searchTerm });
};

/**
 * ì—°ì²´ëœ íƒœìŠ¤í¬ ì¡°íšŒ
 */
export const getOverdueTasks = async (): Promise<Task[]> => {
  const today = new Date();
  const response = await getTasks({
    sortBy: 'dueDate',
    sortOrder: 'ASC',
    limit: 100 // ì¶©ë¶„íˆ í° ìˆ˜ë¡œ ì„¤ì •
  });
  
  return response.items.filter(task => {
    if (!task.dueDate || task.status === TaskStatus.DONE) return false;
    return new Date(task.dueDate) < today;
  });
};

/**
 * ê³§ ë§ˆê°ë˜ëŠ” íƒœìŠ¤í¬ ì¡°íšŒ (24ì‹œê°„ ì´ë‚´)
 */
export const getUpcomingTasks = async (): Promise<Task[]> => {
  const now = new Date();
  const tomorrow = new Date(now.getTime() + 24 * 60 * 60 * 1000);
  
  const response = await getTasks({
    sortBy: 'dueDate',
    sortOrder: 'ASC',
    limit: 100
  });
  
  return response.items.filter(task => {
    if (!task.dueDate || task.status === TaskStatus.DONE) return false;
    const dueDate = new Date(task.dueDate);
    return dueDate >= now && dueDate <= tomorrow;
  });
};

/**
 * íƒœìŠ¤í¬ í†µê³„ ì¡°íšŒ
 */
export const getTaskStats = async (filters?: Partial<TaskQueryDto>) => {
  const response = await getTasks({ ...filters, limit: 1000 }); // í†µê³„ë¥¼ ìœ„í•´ í° ìˆ˜ë¡œ ì„¤ì •
  const tasks = response.items;
  
  const today = new Date();
  
  return {
    total: tasks.length,
    todo: tasks.filter(t => t.status === TaskStatus.TODO).length,
    inProgress: tasks.filter(t => t.status === TaskStatus.IN_PROGRESS).length,
    done: tasks.filter(t => t.status === TaskStatus.DONE).length,
    blocked: tasks.filter(t => t.status === TaskStatus.BLOCKED).length,
    overdue: tasks.filter(t => {
      if (!t.dueDate || t.status === TaskStatus.DONE) return false;
      return new Date(t.dueDate) < today;
    }).length,
  };
};
</file>

<file path="frontend/src/lib/api/workly-api.ts">
/**
 * ì›Œí´ë¦¬ CPER ì›Œí¬í”Œë¡œìš° API í´ë¼ì´ì–¸íŠ¸
 * ì‹¤ì œ ë°±ì—”ë“œì™€ ì—°ë™ì„ ìœ„í•œ API ì¸í„°í˜ì´ìŠ¤
 */

import { 
  WorklyTask, 
  HierarchyChoice, 
  CPERWorkflowData,
  TodayTasksOptimized,
  HierarchyAnalytics 
} from '@/shared/types/workly-core.types'
import { 
  InboxItem, 
  CreateInboxItemDto, 
  UpdateInboxItemDto,
  InboxQueryDto 
} from '@/shared/types/inbox.types'
import { Goal, CreateGoalDto, UpdateGoalDto } from '@/shared/types/goal.types'
import { Project, CreateProjectDto, UpdateProjectDto } from '@/types/project.types'

// API ê¸°ë³¸ ì„¤ì •
const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001/api'
const API_VERSION = 'v1'

class WorklyApiClient {
  private baseUrl: string
  private headers: HeadersInit

  constructor() {
    this.baseUrl = `${API_BASE_URL}/${API_VERSION}`
    this.headers = {
      'Content-Type': 'application/json',
    }
  }

  // ì¸ì¦ í† í° ì„¤ì •
  setAuthToken(token: string) {
    this.headers = {
      ...this.headers,
      'Authorization': `Bearer ${token}`
    }
  }

  // HTTP ìš”ì²­ í—¬í¼
  private async request<T>(
    endpoint: string, 
    options: RequestInit = {}
  ): Promise<T> {
    const url = `${this.baseUrl}${endpoint}`
    
    const config: RequestInit = {
      headers: this.headers,
      ...options
    }

    try {
      const response = await fetch(url, config)
      
      if (!response.ok) {
        throw new Error(`API Error: ${response.status} ${response.statusText}`)
      }

      return await response.json()
    } catch (error) {
      console.error(`API ìš”ì²­ ì‹¤íŒ¨: ${endpoint}`, error)
      throw error
    }
  }

  // GET ìš”ì²­
  private get<T>(endpoint: string): Promise<T> {
    return this.request<T>(endpoint, { method: 'GET' })
  }

  // POST ìš”ì²­
  private post<T>(endpoint: string, data?: any): Promise<T> {
    return this.request<T>(endpoint, {
      method: 'POST',
      body: data ? JSON.stringify(data) : undefined
    })
  }

  // PUT ìš”ì²­
  private put<T>(endpoint: string, data?: any): Promise<T> {
    return this.request<T>(endpoint, {
      method: 'PUT',
      body: data ? JSON.stringify(data) : undefined
    })
  }

  // DELETE ìš”ì²­
  private delete<T>(endpoint: string): Promise<T> {
    return this.request<T>(endpoint, { method: 'DELETE' })
  }

  // PATCH ìš”ì²­
  private patch<T>(endpoint: string, data?: any): Promise<T> {
    return this.request<T>(endpoint, {
      method: 'PATCH',
      body: data ? JSON.stringify(data) : undefined
    })
  }

  // =============================================================================
  // CPER ì›Œí¬í”Œë¡œìš° API
  // =============================================================================

  /**
   * 1ë‹¨ê³„: Capture - ìˆ˜ì§‘í•¨ ê´€ë ¨ API
   */
  inbox = {
    // ë¹ ë¥¸ ìˆ˜ì§‘
    quickCapture: (content: string): Promise<InboxItem> => {
      return this.post('/inbox/quick-capture', { content })
    },

    // êµ¬ì¡°í™”ëœ ìˆ˜ì§‘
    create: (data: CreateInboxItemDto): Promise<InboxItem> => {
      return this.post('/inbox', data)
    },

    // ìˆ˜ì§‘í•¨ ëª©ë¡ ì¡°íšŒ
    list: (query?: InboxQueryDto): Promise<InboxItem[]> => {
      const params = query ? `?${new URLSearchParams(query as any).toString()}` : ''
      return this.get(`/inbox${params}`)
    },

    // ìˆ˜ì§‘í•¨ ì•„ì´í…œ ìƒì„¸ ì¡°íšŒ
    getById: (id: string): Promise<InboxItem> => {
      return this.get(`/inbox/${id}`)
    },

    // ìˆ˜ì§‘í•¨ ì•„ì´í…œ ì—…ë°ì´íŠ¸
    update: (id: string, data: UpdateInboxItemDto): Promise<InboxItem> => {
      return this.put(`/inbox/${id}`, data)
    },

    // ìˆ˜ì§‘í•¨ ì•„ì´í…œ ì‚­ì œ
    delete: (id: string): Promise<void> => {
      return this.delete(`/inbox/${id}`)
    },

    // ì¼ê´„ ì²˜ë¦¬
    batchProcess: (itemIds: string[], action: string, data?: any): Promise<void> => {
      return this.post('/inbox/batch-process', { itemIds, action, data })
    }
  }

  /**
   * 2ë‹¨ê³„: Plan - ê³„íš ë° ë³€í™˜ API
   */
  planning = {
    // ìˆ˜ì§‘í•¨ ì•„ì´í…œì„ ì—…ë¬´ë¡œ ë³€í™˜
    convertToTask: (inboxId: string, hierarchyChoice: HierarchyChoice): Promise<WorklyTask> => {
      return this.post(`/inbox/${inboxId}/convert-to-task`, { hierarchyChoice })
    },

    // ëª…í™•í™” ì²˜ë¦¬
    clarify: (inboxId: string, clarificationData: CPERWorkflowData['planningData']): Promise<InboxItem> => {
      return this.patch(`/inbox/${inboxId}/clarify`, clarificationData)
    },

    // ê³„ì¸µêµ¬ì¡° ë³€ê²½
    changeHierarchy: (taskId: string, newHierarchy: HierarchyChoice): Promise<WorklyTask> => {
      return this.patch(`/tasks/${taskId}/hierarchy`, { hierarchyChoice: newHierarchy })
    },

    // ê³„ì¸µêµ¬ì¡° ë¶„ì„
    analyzeHierarchy: (taskId: string): Promise<HierarchyAnalytics> => {
      return this.get(`/tasks/${taskId}/hierarchy-analysis`)
    }
  }

  /**
   * 3ë‹¨ê³„: Execute - ì‹¤í–‰ ê´€ë¦¬ API
   */
  execution = {
    // ì˜¤ëŠ˜ í•  ì¼ ì„¤ì •
    setTodayTasks: (taskIds: string[]): Promise<void> => {
      return this.post('/tasks/set-today', { taskIds })
    },

    // ì§‘ì¤‘ ì—…ë¬´ ì„¤ì •
    setFocusedTask: (taskId: string): Promise<void> => {
      return this.post(`/tasks/${taskId}/set-focused`)
    },

    // ì—…ë¬´ ì‹œì‘
    startTask: (taskId: string): Promise<WorklyTask> => {
      return this.post(`/tasks/${taskId}/start`)
    },

    // ì§„í–‰ ìƒí™© ì—…ë°ì´íŠ¸
    updateProgress: (taskId: string, progressNote: string, progressPercentage?: number): Promise<WorklyTask> => {
      return this.patch(`/tasks/${taskId}/progress`, { progressNote, progressPercentage })
    },

    // ì—…ë¬´ ì™„ë£Œ
    completeTask: (taskId: string): Promise<WorklyTask> => {
      return this.post(`/tasks/${taskId}/complete`)
    },

    // ì˜¤ëŠ˜ í•  ì¼ ìµœì í™”ëœ ì¡°íšŒ
    getTodayTasksOptimized: (): Promise<TodayTasksOptimized> => {
      return this.get('/tasks/today-optimized')
    }
  }

  /**
   * 4ë‹¨ê³„: Review - ê²€í†  ë° ë¶„ì„ API
   */
  review = {
    // ë¦¬ë·° ë°ì´í„° ì¶”ê°€
    addReview: (taskId: string, reviewData: CPERWorkflowData['reviewData']): Promise<WorklyTask> => {
      return this.post(`/tasks/${taskId}/review`, reviewData)
    },

    // ì—…ë¬´ ì¸ì‚¬ì´íŠ¸ ì¡°íšŒ
    getTaskInsights: (taskId: string): Promise<HierarchyAnalytics> => {
      return this.get(`/tasks/${taskId}/insights`)
    },

    // ì£¼ê°„ ë¦¬ë·° ë°ì´í„°
    getWeeklyReview: (startDate: string, endDate: string): Promise<any> => {
      return this.get(`/review/weekly?start=${startDate}&end=${endDate}`)
    },

    // ì›”ê°„ ë¦¬ë·° ë°ì´í„°
    getMonthlyReview: (year: number, month: number): Promise<any> => {
      return this.get(`/review/monthly?year=${year}&month=${month}`)
    }
  }

  // =============================================================================
  // ê¸°ë³¸ ì—”í‹°í‹° ê´€ë¦¬ API
  // =============================================================================

  /**
   * ì—…ë¬´(Tasks) API
   */
  tasks = {
    // ì—…ë¬´ ëª©ë¡ ì¡°íšŒ
    list: (query?: any): Promise<WorklyTask[]> => {
      const params = query ? `?${new URLSearchParams(query).toString()}` : ''
      return this.get(`/tasks${params}`)
    },

    // ì—…ë¬´ ìƒì„¸ ì¡°íšŒ
    getById: (id: string): Promise<WorklyTask> => {
      return this.get(`/tasks/${id}`)
    },

    // ì—…ë¬´ ìƒì„±
    create: (data: any): Promise<WorklyTask> => {
      return this.post('/tasks', data)
    },

    // ì—…ë¬´ ì—…ë°ì´íŠ¸
    update: (id: string, data: any): Promise<WorklyTask> => {
      return this.put(`/tasks/${id}`, data)
    },

    // ì—…ë¬´ ìƒì„¸ ì •ë³´ ì—…ë°ì´íŠ¸ (Notion ìŠ¤íƒ€ì¼ ëª¨ë‹¬ìš©)
    updateDetail: (id: string, data: any): Promise<WorklyTask> => {
      return this.patch(`/tasks/${id}/detail`, data)
    },

    // ì—…ë¬´ ì‚­ì œ
    delete: (id: string): Promise<void> => {
      return this.delete(`/tasks/${id}`)
    },

    // ì—…ë¬´ ìƒíƒœ ë³€ê²½
    updateStatus: (id: string, status: string): Promise<WorklyTask> => {
      return this.patch(`/tasks/${id}/status`, { status })
    }
  }

  /**
   * í”„ë¡œì íŠ¸(Projects) API
   */
  projects = {
    // í”„ë¡œì íŠ¸ ëª©ë¡ ì¡°íšŒ
    list: (query?: any): Promise<Project[]> => {
      const params = query ? `?${new URLSearchParams(query).toString()}` : ''
      return this.get(`/projects${params}`)
    },

    // í”„ë¡œì íŠ¸ ìƒì„¸ ì¡°íšŒ
    getById: (id: string): Promise<Project> => {
      return this.get(`/projects/${id}`)
    },

    // í”„ë¡œì íŠ¸ ìƒì„±
    create: (data: CreateProjectDto): Promise<Project> => {
      return this.post('/projects', data)
    },

    // í”„ë¡œì íŠ¸ ì—…ë°ì´íŠ¸
    update: (id: string, data: UpdateProjectDto): Promise<Project> => {
      return this.put(`/projects/${id}`, data)
    },

    // í”„ë¡œì íŠ¸ ì‚­ì œ
    delete: (id: string): Promise<void> => {
      return this.delete(`/projects/${id}`)
    },

    // í”„ë¡œì íŠ¸ ë©¤ë²„ ê´€ë¦¬
    addMember: (id: string, userId: string, role: string): Promise<void> => {
      return this.post(`/projects/${id}/members`, { userId, role })
    },

    removeMember: (id: string, userId: string): Promise<void> => {
      return this.delete(`/projects/${id}/members/${userId}`)
    }
  }

  /**
   * ëª©í‘œ(Goals) API
   */
  goals = {
    // ëª©í‘œ ëª©ë¡ ì¡°íšŒ
    list: (query?: any): Promise<Goal[]> => {
      const params = query ? `?${new URLSearchParams(query).toString()}` : ''
      return this.get(`/goals${params}`)
    },

    // ëª©í‘œ ìƒì„¸ ì¡°íšŒ
    getById: (id: string): Promise<Goal> => {
      return this.get(`/goals/${id}`)
    },

    // ëª©í‘œ ìƒì„±
    create: (data: CreateGoalDto): Promise<Goal> => {
      return this.post('/goals', data)
    },

    // ëª©í‘œ ì—…ë°ì´íŠ¸
    update: (id: string, data: UpdateGoalDto): Promise<Goal> => {
      return this.put(`/goals/${id}`, data)
    },

    // ëª©í‘œ ì‚­ì œ
    delete: (id: string): Promise<void> => {
      return this.delete(`/goals/${id}`)
    },

    // ëª©í‘œ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
    updateProgress: (id: string, progress: number): Promise<Goal> => {
      return this.patch(`/goals/${id}/progress`, { progress })
    }
  }

  // =============================================================================
  // ëŒ€ì‹œë³´ë“œ ë° ë¶„ì„ API
  // =============================================================================

  /**
   * ëŒ€ì‹œë³´ë“œ API
   */
  dashboard = {
    // í™ˆ ëŒ€ì‹œë³´ë“œ ë°ì´í„°
    getHomeDashboard: (): Promise<any> => {
      return this.get('/dashboard/home')
    },

    // í”„ë¡œì íŠ¸ ëŒ€ì‹œë³´ë“œ ë°ì´í„°
    getProjectDashboard: (projectId: string): Promise<any> => {
      return this.get(`/dashboard/project/${projectId}`)
    },

    // ëª©í‘œ ëŒ€ì‹œë³´ë“œ ë°ì´í„°
    getGoalDashboard: (goalId: string): Promise<any> => {
      return this.get(`/dashboard/goal/${goalId}`)
    },

    // ê°œì¸ ìƒì‚°ì„± ë¶„ì„
    getProductivityAnalysis: (period: 'week' | 'month' | 'quarter'): Promise<any> => {
      return this.get(`/dashboard/productivity?period=${period}`)
    }
  }

  /**
   * ê²€ìƒ‰ API
   */
  search = {
    // í†µí•© ê²€ìƒ‰
    global: (query: string, filters?: any): Promise<any> => {
      const params = new URLSearchParams({ q: query, ...filters })
      return this.get(`/search?${params.toString()}`)
    },

    // ì—…ë¬´ ê²€ìƒ‰
    tasks: (query: string): Promise<WorklyTask[]> => {
      return this.get(`/search/tasks?q=${encodeURIComponent(query)}`)
    },

    // í”„ë¡œì íŠ¸ ê²€ìƒ‰
    projects: (query: string): Promise<Project[]> => {
      return this.get(`/search/projects?q=${encodeURIComponent(query)}`)
    },

    // ëª©í‘œ ê²€ìƒ‰
    goals: (query: string): Promise<Goal[]> => {
      return this.get(`/search/goals?q=${encodeURIComponent(query)}`)
    }
  }

  // =============================================================================
  // ì‚¬ìš©ì ë° ì„¤ì • API
  // =============================================================================

  /**
   * ì‚¬ìš©ì API
   */
  user = {
    // í˜„ì¬ ì‚¬ìš©ì í”„ë¡œí•„
    getProfile: (): Promise<any> => {
      return this.get('/user/profile')
    },

    // í”„ë¡œí•„ ì—…ë°ì´íŠ¸
    updateProfile: (data: any): Promise<any> => {
      return this.put('/user/profile', data)
    },

    // ì‚¬ìš©ì ì„¤ì •
    getSettings: (): Promise<any> => {
      return this.get('/user/settings')
    },

    updateSettings: (data: any): Promise<any> => {
      return this.put('/user/settings', data)
    }
  }

  /**
   * ì¸ì¦ API
   */
  auth = {
    // ë¡œê·¸ì¸
    login: (email: string, password: string): Promise<{ token: string; user: any }> => {
      return this.post('/auth/login', { email, password })
    },

    // Google OAuth ë¡œê·¸ì¸
    googleLogin: (idToken: string): Promise<{ token: string; user: any }> => {
      return this.post('/auth/google', { idToken })
    },

    // ë¡œê·¸ì•„ì›ƒ
    logout: (): Promise<void> => {
      return this.post('/auth/logout')
    },

    // í† í° ê°±ì‹ 
    refreshToken: (refreshToken: string): Promise<{ token: string }> => {
      return this.post('/auth/refresh', { refreshToken })
    },

    // íšŒì›ê°€ì…
    register: (data: any): Promise<{ token: string; user: any }> => {
      return this.post('/auth/register', data)
    }
  }
}

// ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
export const worklyApi = new WorklyApiClient()

// ê¸°ë³¸ export
export default worklyApi

// íƒ€ì… export
export type { 
  WorklyTask, 
  InboxItem, 
  Project, 
  Goal, 
  HierarchyChoice,
  CPERWorkflowData,
  TodayTasksOptimized,
  HierarchyAnalytics 
}
</file>

<file path="frontend/src/lib/hooks/useAdminApi.ts">
/**
 * ì–´ë“œë¯¼ APIë¥¼ ìœ„í•œ React í›…ë“¤
 * SWRì„ í™œìš©í•œ ë°ì´í„° í˜ì¹­ ë° ìƒíƒœ ê´€ë¦¬
 */

import { useState, useCallback } from 'react';
import useSWR, { mutate } from 'swr';
import { 
  adminApi, 
  AdminApiError, 
  UserFilters, 
  ProjectFilters, 
  AuditLogFilters,
  UpdateUserRoleRequest,
  SystemSettingsUpdateRequest,
} from '../api/admin-api';

// =============================================================================
// ê¸°ë³¸ í›…
// =============================================================================

/**
 * API ìš”ì²­ ìƒíƒœ íƒ€ì…
 */
interface ApiState {
  loading: boolean;
  error: string | null;
}

/**
 * API ìš”ì²­ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ê¸°ë³¸ í›…
 */
export function useApiState(): [ApiState, (loading: boolean, error?: string | null) => void] {
  const [state, setState] = useState<ApiState>({ loading: false, error: null });

  const setApiState = useCallback((loading: boolean, error: string | null = null) => {
    setState({ loading, error });
  }, []);

  return [state, setApiState];
}

/**
 * ì—ëŸ¬ ì²˜ë¦¬ ìœ í‹¸ë¦¬í‹°
 */
export function handleApiError(error: unknown): string {
  if (error instanceof AdminApiError) {
    return error.message;
  }
  if (error instanceof Error) {
    return error.message;
  }
  return 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤';
}

// =============================================================================
// ëŒ€ì‹œë³´ë“œ í›…
// =============================================================================

/**
 * ì–´ë“œë¯¼ ëŒ€ì‹œë³´ë“œ ë°ì´í„° í›…
 */
export function useAdminDashboard() {
  const { data, error, isLoading, mutate } = useSWR(
    '/admin/dashboard',
    () => adminApi.dashboard.getDashboard()
  );

  return {
    dashboard: data?.data,
    isLoading,
    error: error ? handleApiError(error) : null,
    refresh: mutate,
  };
}

/**
 * ê´€ë¦¬ì í”„ë¡œí•„ í›…
 */
export function useAdminProfile() {
  const { data, error, isLoading, mutate } = useSWR(
    '/admin/profile',
    () => adminApi.dashboard.getProfile()
  );

  return {
    profile: data?.data,
    isLoading,
    error: error ? handleApiError(error) : null,
    refresh: mutate,
  };
}

// =============================================================================
// ì‚¬ìš©ì ê´€ë¦¬ í›…
// =============================================================================

/**
 * ì‚¬ìš©ì ëª©ë¡ í›…
 */
export function useUsers(filters: UserFilters = {}) {
  const key = `/admin/users?${new URLSearchParams(
    Object.entries(filters).reduce((acc, [key, value]) => {
      if (value !== undefined && value !== '') {
        acc[key] = String(value);
      }
      return acc;
    }, {} as Record<string, string>)
  )}`;

  const { data, error, isLoading, mutate } = useSWR(
    key,
    () => adminApi.users.getUsers(filters)
  );

  return {
    users: data?.data || [],
    pagination: data?.pagination,
    isLoading,
    error: error ? handleApiError(error) : null,
    refresh: mutate,
  };
}

/**
 * íŠ¹ì • ì‚¬ìš©ì í›…
 */
export function useUser(userId: string) {
  const { data, error, isLoading, mutate } = useSWR(
    userId ? `/admin/users/${userId}` : null,
    () => adminApi.users.getUser(userId)
  );

  return {
    user: data?.data,
    isLoading,
    error: error ? handleApiError(error) : null,
    refresh: mutate,
  };
}

/**
 * ì‚¬ìš©ì ê´€ë¦¬ ì•¡ì…˜ í›…
 */
export function useUserActions() {
  const [state, setApiState] = useApiState();

  const updateUserRole = useCallback(async (userId: string, data: UpdateUserRoleRequest) => {
    setApiState(true);
    try {
      const result = await adminApi.users.updateUserRole(userId, data);
      
      // ê´€ë ¨ ìºì‹œ ë¬´íš¨í™”
      await mutate(`/admin/users/${userId}`);
      await mutate((key) => typeof key === 'string' && key.startsWith('/admin/users?'));
      
      setApiState(false);
      return result;
    } catch (error) {
      setApiState(false, handleApiError(error));
      throw error;
    }
  }, [setApiState]);

  const deleteUser = useCallback(async (userId: string) => {
    setApiState(true);
    try {
      const result = await adminApi.users.deleteUser(userId);
      
      // ê´€ë ¨ ìºì‹œ ë¬´íš¨í™”
      await mutate((key) => typeof key === 'string' && key.startsWith('/admin/users'));
      
      setApiState(false);
      return result;
    } catch (error) {
      setApiState(false, handleApiError(error));
      throw error;
    }
  }, [setApiState]);

  return {
    updateUserRole,
    deleteUser,
    loading: state.loading,
    error: state.error,
  };
}

// =============================================================================
// í”„ë¡œì íŠ¸ ê´€ë¦¬ í›…
// =============================================================================

/**
 * í”„ë¡œì íŠ¸ ëª©ë¡ í›…
 */
export function useProjects(filters: ProjectFilters = {}) {
  const key = `/admin/projects?${new URLSearchParams(
    Object.entries(filters).reduce((acc, [key, value]) => {
      if (value !== undefined && value !== '') {
        acc[key] = String(value);
      }
      return acc;
    }, {} as Record<string, string>)
  )}`;

  const { data, error, isLoading, mutate } = useSWR(
    key,
    () => adminApi.projects.getProjects(filters)
  );

  return {
    projects: data?.data || [],
    pagination: data?.pagination,
    isLoading,
    error: error ? handleApiError(error) : null,
    refresh: mutate,
  };
}

/**
 * íŠ¹ì • í”„ë¡œì íŠ¸ í›…
 */
export function useProject(projectId: string) {
  const { data, error, isLoading, mutate } = useSWR(
    projectId ? `/admin/projects/${projectId}` : null,
    () => adminApi.projects.getProject(projectId)
  );

  return {
    project: data?.data,
    isLoading,
    error: error ? handleApiError(error) : null,
    refresh: mutate,
  };
}

/**
 * í”„ë¡œì íŠ¸ ê´€ë¦¬ ì•¡ì…˜ í›…
 */
export function useProjectActions() {
  const [state, setApiState] = useApiState();

  const deleteProject = useCallback(async (projectId: string) => {
    setApiState(true);
    try {
      const result = await adminApi.projects.deleteProject(projectId);
      
      // ê´€ë ¨ ìºì‹œ ë¬´íš¨í™”
      await mutate((key) => typeof key === 'string' && key.startsWith('/admin/projects'));
      
      setApiState(false);
      return result;
    } catch (error) {
      setApiState(false, handleApiError(error));
      throw error;
    }
  }, [setApiState]);

  return {
    deleteProject,
    loading: state.loading,
    error: state.error,
  };
}

// =============================================================================
// ê°ì‚¬ ë¡œê·¸ í›…
// =============================================================================

/**
 * ê°ì‚¬ ë¡œê·¸ ëª©ë¡ í›…
 */
export function useAuditLogs(filters: AuditLogFilters = {}) {
  const key = `/admin/audit-logs?${new URLSearchParams(
    Object.entries(filters).reduce((acc, [key, value]) => {
      if (value !== undefined && value !== '') {
        acc[key] = String(value);
      }
      return acc;
    }, {} as Record<string, string>)
  )}`;

  const { data, error, isLoading, mutate } = useSWR(
    key,
    () => adminApi.auditLogs.getAuditLogs(filters)
  );

  return {
    auditLogs: data?.data || [],
    pagination: data?.pagination,
    isLoading,
    error: error ? handleApiError(error) : null,
    refresh: mutate,
  };
}

/**
 * ìµœê·¼ ê°ì‚¬ ë¡œê·¸ í›…
 */
export function useRecentAuditLogs(adminId?: string, hours: number = 24) {
  const key = `/admin/audit-logs/recent?${new URLSearchParams({
    ...(adminId && { adminId }),
    hours: String(hours),
  })}`;

  const { data, error, isLoading, mutate } = useSWR(
    key,
    () => adminApi.auditLogs.getRecentAuditLogs(adminId, hours)
  );

  return {
    recentLogs: data?.data || [],
    isLoading,
    error: error ? handleApiError(error) : null,
    refresh: mutate,
  };
}

// =============================================================================
// ì‹œìŠ¤í…œ ì„¤ì • í›…
// =============================================================================

/**
 * ì‹œìŠ¤í…œ ì„¤ì • í›…
 */
export function useSystemSettings() {
  const { data, error, isLoading, mutate } = useSWR(
    '/admin/settings',
    () => adminApi.settings.getSettings()
  );

  return {
    settings: data?.data,
    isLoading,
    error: error ? handleApiError(error) : null,
    refresh: mutate,
  };
}

/**
 * ì‹œìŠ¤í…œ ì„¤ì • ì—…ë°ì´íŠ¸ í›…
 */
export function useSystemSettingsActions() {
  const [state, setApiState] = useApiState();

  const updateSettings = useCallback(async (data: SystemSettingsUpdateRequest) => {
    setApiState(true);
    try {
      const result = await adminApi.settings.updateSettings(data);
      
      // ì„¤ì • ìºì‹œ ë¬´íš¨í™”
      await mutate('/admin/settings');
      
      setApiState(false);
      return result;
    } catch (error) {
      setApiState(false, handleApiError(error));
      throw error;
    }
  }, [setApiState]);

  return {
    updateSettings,
    loading: state.loading,
    error: state.error,
  };
}

// =============================================================================
// í†µí•© í›… (ì„ íƒì  ì‚¬ìš©)
// =============================================================================

/**
 * ëª¨ë“  ì–´ë“œë¯¼ ë°ì´í„°ë¥¼ í•œ ë²ˆì— ê´€ë¦¬í•˜ëŠ” í†µí•© í›…
 * ì´ˆê¸° ë¡œë”©ì´ë‚˜ ì „ì²´ ë°ì´í„° ê°±ì‹ ì´ í•„ìš”í•  ë•Œ ì‚¬ìš©
 */
export function useAdminData() {
  const dashboard = useAdminDashboard();
  const users = useUsers();
  const projects = useProjects();
  const auditLogs = useAuditLogs();
  const settings = useSystemSettings();

  const refreshAll = useCallback(async () => {
    await Promise.all([
      dashboard.refresh(),
      users.refresh(),
      projects.refresh(),
      auditLogs.refresh(),
      settings.refresh(),
    ]);
  }, [dashboard, users, projects, auditLogs, settings]);

  const isLoading = dashboard.isLoading || users.isLoading || projects.isLoading || 
                   auditLogs.isLoading || settings.isLoading;

  const hasError = !!(dashboard.error || users.error || projects.error || 
                     auditLogs.error || settings.error);

  return {
    dashboard: dashboard.dashboard,
    users: users.users,
    projects: projects.projects,
    auditLogs: auditLogs.auditLogs,
    settings: settings.settings,
    isLoading,
    hasError,
    refreshAll,
  };
}
</file>

<file path="frontend/src/lib/stores/authStore.ts">
import { create } from 'zustand'

// ì‚¬ìš©ì íƒ€ì… ì •ì˜
export interface User {
  id: string
  name: string
  email: string
  adminRole?: 'super_admin' | 'admin' | 'moderator' | 'support'
  avatar?: string
  createdAt: string
  updatedAt: string
}

// Auth Store ìƒíƒœ ì¸í„°í˜ì´ìŠ¤
export interface AuthState {
  user: User | null
  isAuthenticated: boolean
  isLoading: boolean
  token: string | null
  
  // Actions
  setUser: (user: User | null) => void
  setToken: (token: string | null) => void
  setLoading: (loading: boolean) => void
  checkAuth: () => Promise<void>
  login: (token: string, user: User) => void
  logout: () => void
}

export const useAuthStore = create<AuthState>((set, get) => ({
  user: null,
  isAuthenticated: false,
  isLoading: true,
  token: null,

  setUser: (user: User | null) =>
    set((state) => ({ 
      ...state, 
      user, 
      isAuthenticated: !!user 
    })),

  setToken: (token: string | null) =>
    set((state) => ({ 
      ...state, 
      token 
    })),

  setLoading: (loading: boolean) =>
    set((state) => ({ 
      ...state, 
      isLoading: loading 
    })),

  checkAuth: async () => {
    try {
      set({ isLoading: true })
      
      // ê°œë°œ í™˜ê²½ì—ì„œ ì„ì‹œ ê´€ë¦¬ì ê³„ì • í™œì„±í™”
      const isDevelopment = process.env.NODE_ENV === 'development' || 
                           typeof window !== 'undefined' && window.location.hostname === 'localhost';
      
      // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ í† í° í™•ì¸
      let token = localStorage.getItem('token')
      
      // ê°œë°œ í™˜ê²½ì—ì„œë„ ì‹¤ì œ ë¡œê·¸ì¸ì„ ìš°ì„ ì‹œí•˜ë¯€ë¡œ ìë™ í† í° ìƒì„± ì œê±°
      // if (!token && isDevelopment) {
      //   token = 'dev-admin-token'
      //   localStorage.setItem('token', token)
      //   console.log('ğŸ”‘ ê°œë°œ í™˜ê²½: ì„ì‹œ ê´€ë¦¬ì í† í°ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.')
      // }
      
      if (!token) {
        set({ 
          user: null, 
          isAuthenticated: false, 
          token: null, 
          isLoading: false 
        })
        return
      }

      // ì‹¤ì œ ë°±ì—”ë“œ API í˜¸ì¶œë¡œ ì‚¬ìš©ì ì •ë³´ ê²€ì¦
      try {
        const response = await fetch('http://localhost:8000/api/v1/api/admin/profile', {
          headers: {
            'Authorization': `Bearer ${token}`,
            'Content-Type': 'application/json'
          }
        });

        if (response.ok) {
          const apiResponse = await response.json();
          const userData = apiResponse.success ? apiResponse.data : apiResponse;
          
          // ë°±ì—”ë“œ ë°ì´í„°ë¥¼ í”„ë¡ íŠ¸ì—”ë“œ User íƒ€ì…ì— ë§ê²Œ ë³€í™˜
          const user: User = {
            id: userData.id,
            name: userData.name,
            email: userData.email,
            adminRole: userData.role || userData.adminRole,
            avatar: userData.avatar,
            createdAt: userData.createdAt || new Date().toISOString(),
            updatedAt: userData.updatedAt || new Date().toISOString()
          };
          
          set({ 
            user, 
            isAuthenticated: true, 
            token, 
            isLoading: false 
          });
          
          if (isDevelopment) {
            console.log('ğŸš€ ì‹¤ì œ ë°±ì—”ë“œì—ì„œ ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤.', user);
          }
        } else {
          // API í˜¸ì¶œ ì‹¤íŒ¨ ì‹œ ì„ì‹œ ì‚¬ìš©ì ë°ì´í„° ì‚¬ìš© (ê°œë°œìš©)
          const mockUser: User = {
            id: '1',
            name: 'ì›Œí´ë¦¬ ê´€ë¦¬ì',
            email: 'admin@workly.com',
            adminRole: 'super_admin',
            createdAt: new Date().toISOString(),
            updatedAt: new Date().toISOString()
          }

          set({ 
            user: mockUser, 
            isAuthenticated: true, 
            token, 
            isLoading: false 
          });
          
          if (isDevelopment) {
            console.log('ğŸ”„ ë°±ì—”ë“œ API ì—°ê²° ì‹¤íŒ¨, ì„ì‹œ ê´€ë¦¬ì ë°ì´í„° ì‚¬ìš©:', mockUser);
          }
        }
      } catch (error) {
        console.error('ë°±ì—”ë“œ ì—°ê²° ì˜¤ë¥˜:', error);
        
        // ì—ëŸ¬ ë°œìƒ ì‹œ ì„ì‹œ ì‚¬ìš©ì ë°ì´í„° ì‚¬ìš© (ê°œë°œìš©)
        const mockUser: User = {
          id: '1',
          name: 'ì›Œí´ë¦¬ ê´€ë¦¬ì',
          email: 'admin@workly.com',
          adminRole: 'super_admin',
          createdAt: new Date().toISOString(),
          updatedAt: new Date().toISOString()
        }

        set({ 
          user: mockUser, 
          isAuthenticated: true, 
          token, 
          isLoading: false 
        });
        
        if (isDevelopment) {
          console.log('ğŸ”„ ë°±ì—”ë“œ ì—°ê²° ì—ëŸ¬, ì„ì‹œ ê´€ë¦¬ì ë°ì´í„° ì‚¬ìš©:', mockUser);
        }
      }
    } catch (error) {
      console.error('Auth check failed:', error)
      set({ 
        user: null, 
        isAuthenticated: false, 
        token: null, 
        isLoading: false 
      })
    }
  },

  login: (token: string, user: User) => {
    localStorage.setItem('token', token)
    set({ 
      token, 
      user, 
      isAuthenticated: true, 
      isLoading: false 
    })
  },

  logout: () => {
    localStorage.removeItem('token')
    set({ 
      user: null, 
      isAuthenticated: false, 
      token: null, 
      isLoading: false 
    })
  }
}))
</file>

<file path="frontend/src/lib/stores/calendarFilterStore.ts">
import { create } from 'zustand'

export interface CalendarFilterState {
  showNoDue: boolean
  showOverdue: boolean
  setShowNoDue: (show: boolean) => void
  setShowOverdue: (show: boolean) => void
  resetFilters: () => void
}

export const useCalendarFilterStore = create<CalendarFilterState>((set) => ({
  showNoDue: false,
  showOverdue: false,
  setShowNoDue: (show: boolean) =>
    set((state) => ({ ...state, showNoDue: show })),
  setShowOverdue: (show: boolean) =>
    set((state) => ({ ...state, showOverdue: show })),
  resetFilters: () =>
    set((state) => ({ ...state, showNoDue: false, showOverdue: false })),
}))
</file>

<file path="frontend/src/lib/auth.ts">
/**
 * ì¸ì¦ ê´€ë ¨ ìœ í‹¸ë¦¬í‹°ì™€ íƒ€ì… ì •ì˜
 */

import { api } from './api';

// ì‚¬ìš©ì íƒ€ì…
export interface User {
  id: string;
  email: string;
  firstName: string;
  lastName: string;
  avatar?: string;
  role: 'admin' | 'user';
  status: 'active' | 'inactive' | 'pending_verification';
  emailVerifiedAt?: string;
  lastLoginAt?: string;
  createdAt: string;
  updatedAt: string;
  profile: {
    displayName: string;
    bio: string;
    location: string;
    website: string;
    linkedinUrl: string;
    githubUrl: string;
  };
  preferences: {
    language: string;
    timezone: string;
    dateFormat: string;
    timeFormat: string;
    weekStartDay: number;
    notifications: {
      email: boolean;
      push: boolean;
      desktop: boolean;
      mentions: boolean;
      updates: boolean;
      marketing: boolean;
    };
    privacy: {
      profileVisibility: 'public' | 'team' | 'private';
      activityVisibility: 'public' | 'team' | 'private';
    };
  };
}

// ë¡œê·¸ì¸ ì‘ë‹µ íƒ€ì…
export interface LoginResponse {
  user: User;
  accessToken: string;
  refreshToken: string;
}

// ì¸ì¦ ì‘ë‹µ íƒ€ì…
export interface AuthResponse {
  message: string;
  user?: User;
}

// ë¡œê·¸ì¸ DTO
export interface LoginDto {
  email: string;
  password: string;
  rememberMe?: boolean;
}

// íšŒì›ê°€ì… DTO
export interface RegisterDto {
  email: string;
  password: string;
  confirmPassword: string;
  firstName: string;
  lastName: string;
  agreeToTerms: boolean;
  agreeToPrivacy: boolean;
}

/**
 * í˜„ì¬ ë¡œê·¸ì¸ëœ ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°
 */
export const getCurrentUser = (): User | null => {
  if (typeof window !== 'undefined') {
    const userStr = localStorage.getItem('user');
    if (userStr) {
      try {
        return JSON.parse(userStr) as User;
      } catch {
        return null;
      }
    }
  }
  return null;
};

/**
 * ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
 */
export const isAuthenticated = (): boolean => {
  if (typeof window !== 'undefined') {
    const accessToken = localStorage.getItem('accessToken');
    const user = getCurrentUser();
    return !!(accessToken && user);
  }
  return false;
};

/**
 * í† í° ì €ì¥
 */
export const saveTokens = (accessToken: string, refreshToken: string): void => {
  if (typeof window !== 'undefined') {
    localStorage.setItem('accessToken', accessToken);
    localStorage.setItem('refreshToken', refreshToken);
  }
};

/**
 * ì‚¬ìš©ì ì •ë³´ ì €ì¥
 */
export const saveUser = (user: User): void => {
  if (typeof window !== 'undefined') {
    localStorage.setItem('user', JSON.stringify(user));
  }
};

/**
 * ë¡œê·¸ì¸
 */
export const login = async (loginData: LoginDto): Promise<LoginResponse> => {
  const response = await api.post<LoginResponse>('/auth/login', loginData, { requireAuth: false });
  
  // í† í°ê³¼ ì‚¬ìš©ì ì •ë³´ ì €ì¥
  saveTokens(response.accessToken, response.refreshToken);
  saveUser(response.user);
  
  return response;
};

/**
 * íšŒì›ê°€ì…
 */
export const register = async (registerData: RegisterDto): Promise<AuthResponse> => {
  const response = await api.post<AuthResponse>('/auth/register', registerData, { requireAuth: false });
  
  // íšŒì›ê°€ì… ì‹œì—ëŠ” ì‚¬ìš©ì ì •ë³´ë§Œ ì €ì¥ (ì´ë©”ì¼ ì¸ì¦ í•„ìš”)
  if (response.user) {
    saveUser(response.user);
  }
  
  return response;
};

/**
 * ë¡œê·¸ì•„ì›ƒ
 */
export const logout = async (): Promise<void> => {
  try {
    // ë°±ì—”ë“œì— ë¡œê·¸ì•„ì›ƒ ìš”ì²­
    await api.post('/auth/logout');
  } catch (error) {
    console.error('ë¡œê·¸ì•„ì›ƒ ìš”ì²­ ì˜¤ë¥˜:', error);
  } finally {
    // ë¡œì»¬ ë°ì´í„° ì •ë¦¬
    api.logout();
  }
};

/**
 * í˜„ì¬ ì‚¬ìš©ì í”„ë¡œí•„ ìƒˆë¡œê³ ì¹¨
 */
export const refreshUserProfile = async (): Promise<User | null> => {
  try {
    const response = await api.get<{ user: User }>('/auth/profile');
    saveUser(response.user);
    return response.user;
  } catch (error) {
    console.error('ì‚¬ìš©ì í”„ë¡œí•„ ìƒˆë¡œê³ ì¹¨ ì˜¤ë¥˜:', error);
    return null;
  }
};

/**
 * ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
 */
export const changePassword = async (data: {
  currentPassword: string;
  newPassword: string;
  confirmPassword: string;
}): Promise<AuthResponse> => {
  return api.post<AuthResponse>('/auth/change-password', data);
};

/**
 * ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ìš”ì²­
 */
export const forgotPassword = async (email: string): Promise<AuthResponse> => {
  return api.post<AuthResponse>('/auth/forgot-password', { email }, { requireAuth: false });
};

/**
 * ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •
 */
export const resetPassword = async (data: {
  token: string;
  newPassword: string;
  confirmPassword: string;
}): Promise<AuthResponse> => {
  return api.post<AuthResponse>('/auth/reset-password', data, { requireAuth: false });
};

/**
 * ì´ë©”ì¼ ì¸ì¦
 */
export const verifyEmail = async (token: string): Promise<AuthResponse> => {
  return api.post<AuthResponse>('/auth/verify-email', { token }, { requireAuth: false });
};

/**
 * ì¸ì¦ ì´ë©”ì¼ ì¬ë°œì†¡
 */
export const resendVerification = async (email: string): Promise<AuthResponse> => {
  return api.post<AuthResponse>('/auth/resend-verification', { email }, { requireAuth: false });
};
</file>

<file path="frontend/src/lib/utils.ts">
import { type ClassValue, clsx } from 'clsx';
import { twMerge } from 'tailwind-merge';

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}

export function formatDate(date: Date | string): string {
  const d = new Date(date);
  return new Intl.DateTimeFormat('ko-KR', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
  }).format(d);
}

export function formatDateTime(date: Date | string): string {
  const d = new Date(date);
  return new Intl.DateTimeFormat('ko-KR', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
    hour: '2-digit',
    minute: '2-digit',
  }).format(d);
}

export function formatRelativeTime(date: Date | string): string {
  const now = new Date();
  const d = new Date(date);
  const diffInSeconds = Math.floor((now.getTime() - d.getTime()) / 1000);

  if (diffInSeconds < 60) {
    return 'ë°©ê¸ˆ ì „';
  }

  const diffInMinutes = Math.floor(diffInSeconds / 60);
  if (diffInMinutes < 60) {
    return `${diffInMinutes}ë¶„ ì „`;
  }

  const diffInHours = Math.floor(diffInMinutes / 60);
  if (diffInHours < 24) {
    return `${diffInHours}ì‹œê°„ ì „`;
  }

  const diffInDays = Math.floor(diffInHours / 24);
  if (diffInDays < 7) {
    return `${diffInDays}ì¼ ì „`;
  }

  const diffInWeeks = Math.floor(diffInDays / 7);
  if (diffInWeeks < 4) {
    return `${diffInWeeks}ì£¼ ì „`;
  }

  const diffInMonths = Math.floor(diffInDays / 30);
  if (diffInMonths < 12) {
    return `${diffInMonths}ê°œì›” ì „`;
  }

  const diffInYears = Math.floor(diffInDays / 365);
  return `${diffInYears}ë…„ ì „`;
}

export function debounce<T extends (...args: any[]) => any>(
  func: T,
  wait: number,
  immediate?: boolean
): (...args: Parameters<T>) => void {
  let timeout: NodeJS.Timeout | null;
  
  return function executedFunction(...args: Parameters<T>) {
    const later = () => {
      timeout = null;
      if (!immediate) func(...args);
    };
    
    const callNow = immediate && !timeout;
    
    if (timeout) clearTimeout(timeout);
    timeout = setTimeout(later, wait);
    
    if (callNow) func(...args);
  };
}

export function throttle<T extends (...args: any[]) => any>(
  func: T,
  limit: number
): (...args: Parameters<T>) => void {
  let inThrottle: boolean;
  
  return function executedFunction(...args: Parameters<T>) {
    if (!inThrottle) {
      func.apply(this, args);
      inThrottle = true;
      setTimeout(() => inThrottle = false, limit);
    }
  };
}

export function generateId(): string {
  return Math.random().toString(36).substr(2, 9);
}

export function capitalize(str: string): string {
  return str.charAt(0).toUpperCase() + str.slice(1);
}

export function truncate(str: string, length: number): string {
  if (str.length <= length) return str;
  return str.slice(0, length) + '...';
}
</file>

<file path="frontend/src/styles/scrollbar-system.md">
# ì›Œí´ë¦¬ ìŠ¤í¬ë¡¤ë°” ì‹œìŠ¤í…œ

## ê°œìš”

ì›Œí´ë¦¬ëŠ” ê°„ê²°í•œ UIë¥¼ ìœ„í•´ ëª¨ë“  ìŠ¤í¬ë¡¤ë°”ë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¸°ê³ , í•„ìš”í•  ë•Œë§Œ í‘œì‹œí•˜ëŠ” ì‹œìŠ¤í…œì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

## ë™ì‘ ë°©ì‹

### 1. ê¸€ë¡œë²Œ ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¹€
- ëª¨ë“  ìš”ì†Œì˜ ìŠ¤í¬ë¡¤ë°”ê°€ ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê²¨ì§‘ë‹ˆë‹¤
- ë¸Œë¼ìš°ì € í˜¸í™˜ì„±: Chrome, Safari, Firefox, Edge

### 2. ì„ íƒì  í‘œì‹œ
- ë§ˆìš°ìŠ¤ í˜¸ë²„ ì‹œ
- í¬ì»¤ìŠ¤ ì‹œ (í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜)
- ì‹¤ì œ ìŠ¤í¬ë¡¤ ì¤‘ì¼ ë•Œ (1.5ì´ˆ í›„ ìë™ ìˆ¨ê¹€)

## ì‚¬ìš©ë²•

### ê¸°ë³¸ ì‚¬ìš©
```tsx
<div className="overflow-y-auto scrollbar-on-hover">
  {/* ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•œ ì½˜í…ì¸  */}
</div>
```

### ê³ ê¸‰ ì‚¬ìš© (React Hook)
```tsx
import { useScrollVisibility } from '@/hooks/useScrollVisibility'

function MyComponent() {
  const { elementRef } = useScrollVisibility({
    hideDelay: 1500,
    showOnHover: true
  })

  return (
    <div ref={elementRef} className="overflow-y-auto scrollbar-on-hover">
      {/* ì½˜í…ì¸  */}
    </div>
  )
}
```

## ì ìš©ëœ ì»´í¬ë„ŒíŠ¸

- ì±„íŒ… ë©”ì‹œì§€ ì˜ì—­
- í”„ë¡œì íŠ¸ ìƒì„¸ ì‚¬ì´ë“œë°”
- í”„ë¡œì íŠ¸ ëª©ë¡ ëª¨ë‹¬
- ì—…ë¬´ ìƒì„± ìœ„ì €ë“œ
- ìƒíƒœ ì„ íƒ ë“œë¡­ë‹¤ìš´

## ë¸Œë¼ìš°ì € ì§€ì›

| ë¸Œë¼ìš°ì € | ë²„ì „ | ì§€ì› ìƒíƒœ |
|---------|------|----------|
| Chrome  | 80+  | âœ… ì™„ì „ ì§€ì› |
| Safari  | 14+  | âœ… ì™„ì „ ì§€ì› |
| Firefox | 64+  | âœ… ì™„ì „ ì§€ì› |
| Edge    | 80+  | âœ… ì™„ì „ ì§€ì› |

## ì»¤ìŠ¤í„°ë§ˆì´ì§•

### CSS ë³€ìˆ˜ë¡œ ìŠ¤íƒ€ì¼ ì¡°ì •
```css
.scrollbar-on-hover {
  --scrollbar-width: 6px;
  --scrollbar-color: rgba(156, 163, 175, 0.5);
  --scrollbar-hover-color: rgba(107, 114, 128, 0.7);
}
```

### ìˆ¨ê¹€ ë”œë ˆì´ ì¡°ì •
```tsx
const { elementRef } = useScrollVisibility({
  hideDelay: 2000, // 2ì´ˆ í›„ ìˆ¨ê¹€
  showOnHover: false // í˜¸ë²„ ì‹œ í‘œì‹œ ë¹„í™œì„±í™”
})
```

## ì ‘ê·¼ì„±

- í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ì‹œ ìë™ í‘œì‹œ
- ìŠ¤í¬ë¦° ë¦¬ë” í˜¸í™˜ì„± ìœ ì§€
- í„°ì¹˜ ë””ë°”ì´ìŠ¤ì—ì„œ ìì—°ìŠ¤ëŸ¬ìš´ ìŠ¤í¬ë¡¤ ê²½í—˜

## ì„±ëŠ¥

- CSS transitionì„ í†µí•œ GPU ê°€ì†
- ë¶ˆí•„ìš”í•œ DOM ì¡°ì‘ ìµœì†Œí™”
- ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€ë¥¼ ìœ„í•œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì •ë¦¬
</file>

<file path="frontend/src/types/api.types.ts">
// ì‚¬ìš©ì ê´€ë ¨ íƒ€ì…
export type UserRole = 'admin' | 'member';
export type UserStatus = 'active' | 'inactive' | 'pending_verification' | 'suspended';

export interface UserProfile {
  displayName: string;
  bio: string;
  location: string;
  website: string;
  linkedinUrl: string;
  githubUrl: string;
}

export interface UserNotificationSettings {
  email: boolean;
  push: boolean;
  desktop: boolean;
  mentions: boolean;
  updates: boolean;
  marketing: boolean;
}

export interface UserPrivacySettings {
  profileVisibility: 'public' | 'team' | 'private';
  activityVisibility: 'public' | 'team' | 'private';
}

export interface UserPreferences {
  language: string;
  timezone: string;
  dateFormat: string;
  timeFormat: '12h' | '24h';
  weekStartDay: number;
  notifications: UserNotificationSettings;
  privacy: UserPrivacySettings;
}

export interface User {
  id: string;
  email: string;
  firstName: string;
  lastName: string;
  avatar?: string;
  role: UserRole;
  status: UserStatus;
  profile: UserProfile;
  preferences: UserPreferences;
  lastLoginAt?: string;
  emailVerifiedAt?: string;
  createdAt: string;
  updatedAt: string;
}

// í”„ë¡œì íŠ¸ ê´€ë ¨ íƒ€ì…
export type ProjectStatus = 'planning' | 'in_progress' | 'on_hold' | 'completed' | 'cancelled';
export type ProjectPriority = 'low' | 'medium' | 'high' | 'urgent';
export type ProjectVisibility = 'private' | 'team' | 'public';
export type ProjectMemberRole = 'admin' | 'member' | 'viewer';

export interface ProjectSettings {
  enableTimeTracking: boolean;
  enableComments: boolean;
  enableFileAttachments: boolean;
  workflowStages: string[];
  [key: string]: any;
}

export interface ProjectMember {
  id: string;
  user: User;
  role: ProjectMemberRole;
  permissions: string[];
  joinedAt: string;
}

export interface Project {
  id: string;
  title: string;
  description?: string;
  status: ProjectStatus;
  priority: ProjectPriority;
  startDate?: string;
  endDate?: string;
  progress: number;
  budget?: number;
  currency?: string;
  tags: string[];
  isArchived: boolean;
  isTemplate: boolean;
  templateId?: string;
  color?: string;
  icon?: string;
  visibility: ProjectVisibility;
  settings: ProjectSettings;
  ownerId: string;
  members: ProjectMember[];
  tasks?: Task[];
  createdAt: string;
  updatedAt: string;
}

// íƒœìŠ¤í¬ ê´€ë ¨ íƒ€ì…
export type TaskStatus = 'todo' | 'in_progress' | 'review' | 'done' | 'blocked' | 'cancelled';
export type TaskPriority = 'low' | 'medium' | 'high' | 'urgent';
export type TaskType = 'task' | 'bug' | 'feature' | 'epic' | 'story';

export interface TaskLabel {
  id: string;
  name: string;
  color: string;
  description?: string;
  projectId?: string;
  createdAt: string;
  updatedAt: string;
}

export interface TaskComment {
  id: string;
  content: string;
  author: User;
  parentId?: string;
  isInternal: boolean;
  isEdited: boolean;
  createdAt: string;
  updatedAt: string;
}

export interface TaskDependency {
  id: string;
  dependentTask: Task;
  dependsOnTask: Task;
  type: 'blocks' | 'relates_to' | 'duplicates';
  createdAt: string;
}

export interface TimeEntry {
  id: string;
  description?: string;
  duration: number;
  startTime: string;
  endTime?: string;
  user: User;
  billable: boolean;
  approved: boolean;
  approvedBy?: string;
  approvedAt?: string;
  createdAt: string;
  updatedAt: string;
}

export interface Task {
  id: string;
  title: string;
  description?: string;
  status: TaskStatus;
  priority: TaskPriority;
  type: TaskType;
  dueDate?: string;
  startDate?: string;
  completedAt?: string;
  project?: Project;
  assignee?: User;
  reporter: User;
  parentTask?: Task;
  subtasks?: Task[];
  estimatedHours?: number;
  actualHours: number;
  progress: number;
  workflowStageId?: string;
  tags: string[];
  customFields: Record<string, any>;
  labels?: TaskLabel[];
  comments?: TaskComment[];
  dependencies?: TaskDependency[];
  dependents?: TaskDependency[];
  watchers?: User[];
  timeEntries?: TimeEntry[];
  createdAt: string;
  updatedAt: string;
}

// API ì‘ë‹µ íƒ€ì…
export interface AuthResponse {
  message: string;
  user?: User;
}

export interface LoginResponse extends AuthResponse {
  accessToken: string;
  refreshToken: string;
}

export interface PaginatedResponse<T> {
  items: T[];
  total: number;
  page: number;
  limit: number;
  totalPages: number;
}

// API ìš”ì²­ íƒ€ì…
export interface LoginRequest {
  email: string;
  password: string;
  rememberMe?: boolean;
}

export interface RegisterRequest {
  email: string;
  password: string;
  firstName: string;
  lastName: string;
  agreeToTerms: boolean;
  agreeToPrivacy: boolean;
}

export interface CreateTaskRequest {
  title: string;
  description?: string;
  projectId?: string;
  assigneeId?: string;
  parentTaskId?: string;
  priority?: TaskPriority;
  type?: TaskType;
  dueDate?: string;
  startDate?: string;
  estimatedHours?: number;
  tags?: string[];
  labelIds?: string[];
  customFields?: Record<string, any>;
}

export interface UpdateTaskRequest {
  title?: string;
  description?: string;
  status?: TaskStatus;
  priority?: TaskPriority;
  type?: TaskType;
  dueDate?: string;
  startDate?: string;
  estimatedHours?: number;
  progress?: number;
  tags?: string[];
  labelIds?: string[];
  customFields?: Record<string, any>;
}

export interface CreateProjectRequest {
  title: string;
  description?: string;
  priority?: ProjectPriority;
  startDate?: string;
  endDate?: string;
  budget?: number;
  currency?: string;
  tags?: string[];
  color?: string;
  icon?: string;
  visibility?: ProjectVisibility;
  settings?: Record<string, any>;
}
</file>

<file path="frontend/.eslintrc.js">
module.exports = {
  extends: [
    '../.eslintrc.js',
    'next/core-web-vitals',
    'plugin:react/recommended',
    'plugin:react-hooks/recommended',
    'plugin:jsx-a11y/recommended',
    'plugin:@typescript-eslint/recommended',
    'plugin:storybook/recommended',
    'prettier',
  ],
  env: {
    browser: true,
    es2020: true,
    node: true,
  },
  parser: '@typescript-eslint/parser',
  parserOptions: {
    ecmaFeatures: {
      jsx: true,
    },
    ecmaVersion: 'latest',
    sourceType: 'module',
  },
  plugins: [
    'react',
    'react-hooks',
    'jsx-a11y',
    '@typescript-eslint',
  ],
  rules: {
    'react/react-in-jsx-scope': 'off',
    'react/prop-types': 'off',
    'react/jsx-props-no-spreading': 'off',
    'react/jsx-filename-extension': [
      'warn',
      { extensions: ['.tsx', '.jsx'] },
    ],
    'react-hooks/rules-of-hooks': 'error',
    'react-hooks/exhaustive-deps': 'warn',
    'jsx-a11y/anchor-is-valid': 'off',
    '@typescript-eslint/no-unused-vars': ['error', { argsIgnorePattern: '^_' }],
    '@typescript-eslint/explicit-function-return-type': 'off',
    '@typescript-eslint/explicit-module-boundary-types': 'off',
    '@typescript-eslint/no-explicit-any': 'warn',
    'import/prefer-default-export': 'off',
    'import/extensions': 'off',
    'no-console': 'warn',
  },
  settings: {
    react: {
      version: 'detect',
    },
  },
  overrides: [
    {
      files: ['**/*.stories.*'],
      rules: {
        'import/no-anonymous-default-export': 'off',
        '@typescript-eslint/no-explicit-any': 'off',
      },
    },
  ],
};
</file>

<file path="frontend/.eslintrc.json">
{
  "extends": ["next/core-web-vitals"]
}
</file>

<file path="frontend/.gitignore">
.vercel
</file>

<file path="frontend/jest.config.js">
const nextJest = require('next/jest');

const createJestConfig = nextJest({
  // Provide the path to your Next.js app to load next.config.js and .env files
  dir: './',
});

// Add any custom config to be passed to Jest
const customJestConfig = {
  setupFilesAfterEnv: ['<rootDir>/jest.setup.js'],
  testEnvironment: 'jsdom',
  moduleNameMapping: {
    '^@/(.*)$': '<rootDir>/src/$1',
    '^@shared/(.*)$': '<rootDir>/../shared/$1',
  },
  collectCoverageFrom: [
    'src/**/*.{js,jsx,ts,tsx}',
    '!src/**/*.d.ts',
    '!src/**/*.stories.{js,jsx,ts,tsx}',
    '!src/app/layout.tsx',
    '!src/app/globals.css',
  ],
  coverageThreshold: {
    global: {
      branches: 80,
      functions: 80,
      lines: 80,
      statements: 80,
    },
  },
  testMatch: [
    '<rootDir>/src/**/__tests__/**/*.{js,jsx,ts,tsx}',
    '<rootDir>/src/**/*.{test,spec}.{js,jsx,ts,tsx}',
  ],
  testPathIgnorePatterns: [
    '<rootDir>/.next/',
    '<rootDir>/node_modules/',
    '<rootDir>/e2e/',
  ],
  transform: {
    '^.+\\.(js|jsx|ts|tsx)$': ['babel-jest', { presets: ['next/babel'] }],
  },
  transformIgnorePatterns: [
    '/node_modules/',
    '^.+\\.module\\.(css|sass|scss)$',
  ],
};

// createJestConfig is exported this way to ensure that next/jest can load the Next.js config which is async
module.exports = createJestConfig(customJestConfig);
</file>

<file path="frontend/jest.setup.js">
import '@testing-library/jest-dom';

// Mock IntersectionObserver
global.IntersectionObserver = class IntersectionObserver {
  constructor() {}
  
  observe() {
    return null;
  }
  
  disconnect() {
    return null;
  }
  
  unobserve() {
    return null;
  }
};

// Mock ResizeObserver
global.ResizeObserver = class ResizeObserver {
  constructor() {}
  
  observe() {
    return null;
  }
  
  disconnect() {
    return null;
  }
  
  unobserve() {
    return null;
  }
};

// Mock matchMedia
Object.defineProperty(window, 'matchMedia', {
  writable: true,
  value: jest.fn().mockImplementation(query => ({
    matches: false,
    media: query,
    onchange: null,
    addListener: jest.fn(), // deprecated
    removeListener: jest.fn(), // deprecated
    addEventListener: jest.fn(),
    removeEventListener: jest.fn(),
    dispatchEvent: jest.fn(),
  })),
});

// Mock next/router
jest.mock('next/router', () => ({
  useRouter() {
    return {
      route: '/',
      pathname: '/',
      query: {},
      asPath: '/',
      push: jest.fn(),
      pop: jest.fn(),
      reload: jest.fn(),
      back: jest.fn(),
      prefetch: jest.fn().mockResolvedValue(undefined),
      beforePopState: jest.fn(),
      events: {
        on: jest.fn(),
        off: jest.fn(),
        emit: jest.fn(),
      },
      isFallback: false,
    };
  },
}));

// Mock next/navigation
jest.mock('next/navigation', () => ({
  useRouter() {
    return {
      push: jest.fn(),
      replace: jest.fn(),
      prefetch: jest.fn(),
      back: jest.fn(),
      forward: jest.fn(),
      refresh: jest.fn(),
    };
  },
  useSearchParams() {
    return new URLSearchParams();
  },
  usePathname() {
    return '/';
  },
}));
</file>

<file path="frontend/next-env.d.ts">
/// <reference types="next" />
/// <reference types="next/image-types/global" />

// NOTE: This file should not be edited
// see https://nextjs.org/docs/app/building-your-application/configuring/typescript for more information.
</file>

<file path="frontend/postcss.config.js">
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
</file>

<file path="frontend/tailwind.config.ts">
import type { Config } from 'tailwindcss'

const config: Config = {
  content: [
    './src/pages/**/*.{js,ts,jsx,tsx,mdx}',
    './src/components/**/*.{js,ts,jsx,tsx,mdx}',
    './src/app/**/*.{js,ts,jsx,tsx,mdx}',
  ],
  theme: {
    extend: {
      colors: {
        // Workly ë¸Œëœë“œ ìƒ‰ìƒ (Threads ê¸°ë°˜)
        background: '#FAFAFA',
        foreground: '#000000',
        card: '#FFFFFF',
        'card-foreground': '#000000',
        primary: '#000000',
        'primary-foreground': '#FFFFFF',
        secondary: '#F5F5F5',
        'secondary-foreground': '#000000',
        muted: '#F5F5F5',
        'muted-foreground': '#999999',
        accent: '#F5F5F5',
        'accent-foreground': '#000000',
        destructive: '#EF4444',
        'destructive-foreground': '#FFFFFF',
        border: '#D5D5D5',
        input: '#D5D5D5',
        ring: '#000000',
      },
      fontFamily: {
        sans: ['Inter', 'system-ui', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'sans-serif'],
      },
      spacing: {
        '18': '4.5rem', // 72px for navigation width
      },
    },
  },
  plugins: [],
}
export default config
</file>

<file path="instructions/20250725-01.md">
# ì‘ì—… ì§€ì‹œì„œ: UI/UX ê°œì„ 

## 1. ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ ì•„ì´ì½˜ ë³€ê²½
- ê¸°ì¡´ 3ì  ì˜¤ë²„í”Œë¡œìš° ë©”ë‰´ ì•„ì´ì½˜ì„ 3ì„  í–„ë²„ê±° ë©”ë‰´ ì•„ì´ì½˜ìœ¼ë¡œ êµì²´í•©ë‹ˆë‹¤.

## 2. ì˜¤ë²„í”Œë¡œìš° ë©”ë‰´ í•­ëª©
- í–„ë²„ê±° ë©”ë‰´ ë‚´ì— 'ë¡œê·¸ì¸' ë° 'ì„¤ì •' í•­ëª©ì„ í¬í•¨í•©ë‹ˆë‹¤.
- ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ ìƒíƒœì¼ ê²½ìš°, 'ë¡œê·¸ì¸' í•­ëª©ì„ 'ë¡œê·¸ì•„ì›ƒ'ìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.

## 3. ë¡œê·¸ì¸ í˜ì´ì§€ êµ¬í˜„
- ë¡œê·¸ì¸ í˜ì´ì§€ëŠ” 'Googleë¡œ ì‹œì‘í•˜ê¸°' ë²„íŠ¼ í•˜ë‚˜ë§Œ ìˆëŠ” ê°„ê²°í•œ ë””ìì¸ìœ¼ë¡œ êµ¬ì„±í•©ë‹ˆë‹¤.

## 4. ì„¤ì • í˜ì´ì§€ êµ¬í˜„
- ì„¤ì • í˜ì´ì§€ì—ëŠ” ë‹¤ìŒ ê¸°ëŠ¥ë“¤ì„ í¬í•¨í•©ë‹ˆë‹¤:
    - ì–¸ì–´ ì„¤ì •
    - ë‹¤í¬ ëª¨ë“œ ì „í™˜
    - ì•Œë¦¼ ì„¤ì •

## 5. í™ˆ í™”ë©´ í—¤ë” ì¸ì¦ ë²„íŠ¼ í†µí•©
- í™ˆ í™”ë©´ ìƒë‹¨ í—¤ë” ìš°ì¸¡ì— ìˆëŠ” ì¸ì¦ ë²„íŠ¼ì„ 'Googleë¡œ ì‹œì‘í•˜ê¸°' ë²„íŠ¼ í•˜ë‚˜ë¡œ í†µí•©í•©ë‹ˆë‹¤.
- ëª¨ë°”ì¼ í™˜ê²½ì—ì„œëŠ” í•´ë‹¹ ë²„íŠ¼ì„ ê°„ëµí•˜ê²Œ 'ë¡œê·¸ì¸'ìœ¼ë¡œë§Œ í‘œì‹œí•©ë‹ˆë‹¤.

## 6. ëª¨ë°”ì¼ ë„¤ë¹„ê²Œì´ì…˜ ì¡°ì •
- ëª¨ë°”ì¼ í™˜ê²½ì—ì„œëŠ” í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ë§Œ ìœ ì§€í•˜ê³ , ì‚¬ì´ë“œ ë„¤ë¹„ê²Œì´ì…˜ì€ ì œê±°í•©ë‹ˆë‹¤.

## 7. í—¤ë” ìŠ¤íƒ€ì¼ ì¡°ì •
- í—¤ë”ì˜ ë†’ì´ë¥¼ 60pxë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
- í—¤ë”ì˜ í…Œë‘ë¦¬ë¥¼ ì œê±°í•˜ì—¬ ê¹”ë”í•œ ë””ìì¸ì„ ìœ ì§€í•©ë‹ˆë‹¤.
</file>

<file path="instructions/20250725-02.md">
# CLAUDEì—ê²Œ ì „ë‹¬í•  ì‘ì—… ì§€ì‹œì„œ

## Phase 1 (ì¦‰ì‹œ ì‹œì‘ ê°€ëŠ¥)

1.  **íƒœìŠ¤í¬ 1: Monorepo & CI/CD**
    *   ì„œë¸ŒíƒœìŠ¤í¬ 1.1: Monorepo êµ¬ì¡° ì„¤ê³„ ë° ì„¤ì •
    *   ì„œë¸ŒíƒœìŠ¤í¬ 1.2: CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶• (GitHub Actions)
    *   ì„œë¸ŒíƒœìŠ¤í¬ 1.3: Linter ë° Formatter ì„¤ì •
    *   ì„œë¸ŒíƒœìŠ¤í¬ 1.4: í…ŒìŠ¤íŠ¸ í™˜ê²½ êµ¬ì¶•
    *   ì„œë¸ŒíƒœìŠ¤í¬ 1.5: ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±

2.  **íƒœìŠ¤í¬ 3: ë°ì´í„° ëª¨ë¸ ì„¤ê³„**
    *   ì„œë¸ŒíƒœìŠ¤í¬ 3.1: ì‚¬ìš©ì ëª¨ë¸ ì •ì˜
    *   ì„œë¸ŒíƒœìŠ¤í¬ 3.2: í”„ë¡œì íŠ¸ ë° íƒœìŠ¤í¬ ëª¨ë¸ ì •ì˜
    *   ì„œë¸ŒíƒœìŠ¤í¬ 3.3: ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì„¤ê³„

3.  **íƒœìŠ¤í¬ 5: UI/UX ê¸°ì´ˆ**
    *   ì„œë¸ŒíƒœìŠ¤í¬ 5.1: ê¸°ë³¸ ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸ ê°œë°œ
    *   ì„œë¸ŒíƒœìŠ¤í¬ 5.2: ë””ìì¸ ì‹œìŠ¤í…œ (Color, Typography) ì •ì˜
    *   ì„œë¸ŒíƒœìŠ¤í¬ 5.3: Storybookì„ ì´ìš©í•œ ì»´í¬ë„ŒíŠ¸ ë¬¸ì„œí™”

## Phase 2 (Phase 1 ì™„ë£Œ í›„)

4.  **íƒœìŠ¤í¬ 2: Google OAuth & JWT**
    *   ì„œë¸ŒíƒœìŠ¤í¬ 2.1: Google OAuth 2.0 ì„¤ì •
    *   ì„œë¸ŒíƒœìŠ¤í¬ 2.2: JWT ê¸°ë°˜ ì¸ì¦ ì‹œìŠ¤í…œ êµ¬í˜„
    *   ì„œë¸ŒíƒœìŠ¤í¬ 2.3: ë¡œê·¸ì¸ ë° íšŒì›ê°€ì… API ê°œë°œ
    *   ì„œë¸ŒíƒœìŠ¤í¬ 2.4: ì¸ì¦ ë¯¸ë“¤ì›¨ì–´ êµ¬í˜„
    *   ì„œë¸ŒíƒœìŠ¤í¬ 2.5: ì†Œì…œ ë¡œê·¸ì¸ ë²„íŠ¼ UI êµ¬í˜„

5.  **íƒœìŠ¤í¬ 7: GTD ì—…ë¬´ ê´€ë¦¬**
    *   ì„œë¸ŒíƒœìŠ¤í¬ 7.1: íƒœìŠ¤í¬ ìƒì„± ë° ìˆ˜ì • ê¸°ëŠ¥ êµ¬í˜„
    *   ì„œë¸ŒíƒœìŠ¤í¬ 7.2: íƒœìŠ¤í¬ ìƒíƒœ ê´€ë¦¬ (Next, In Progress, Done)
    *   ì„œë¸ŒíƒœìŠ¤í¬ 7.3: íƒœìŠ¤í¬ ìš°ì„ ìˆœìœ„ ì„¤ì • ê¸°ëŠ¥
    *   ì„œë¸ŒíƒœìŠ¤í¬ 7.4: íƒœìŠ¤í¬ ë§ˆê°ì¼ ì„¤ì • ë° ì•Œë¦¼
    *   ì„œë¸ŒíƒœìŠ¤í¬ 7.5: GTD í•„í„°ë§ ë° ì •ë ¬ ê¸°ëŠ¥

## Phase 3 (í•µì‹¬ ê¸°ëŠ¥ ì™„ë£Œ í›„)

6.  **ë‚˜ë¨¸ì§€ í˜‘ì—… ë° ê³ ê¸‰ ê¸°ëŠ¥ë“¤**
    *   íƒœìŠ¤í¬ 4: ì‹¤ì‹œê°„ í˜‘ì—… ê¸°ëŠ¥
    *   íƒœìŠ¤í¬ 6: AI ê¸°ë°˜ ìë™í™”
    *   íƒœìŠ¤í¬ 8: ì•Œë¦¼ ì‹œìŠ¤í…œ
    *   íƒœìŠ¤í¬ 9: ê²€ìƒ‰ ê¸°ëŠ¥
</file>

<file path="instructions/20250726-repomix.md">
ë„¤, ì œê³µí•´ì£¼ì‹  ì½”ë“œë² ì´ìŠ¤ ì „ì²´ë¥¼ ë¶„ì„í•˜ê³  êµ¬ì¡°ì ì¸ ê°•ì ê³¼ í•¨ê»˜ ë¦¬íŒ©í„°ë§ ì œì•ˆì„ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

---

### 1. í”„ë¡œì íŠ¸ ê°œìš”

ì´ í”„ë¡œì íŠ¸ëŠ” **ì›Œí´ë¦¬(Workly)**ë¼ëŠ” ì´ë¦„ì˜ 'ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ê¸°ë°˜ ìƒì‚°ì„± í”Œë«í¼'ìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤. Monorepo êµ¬ì¡°ë¡œ êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©°, ì£¼ìš” ê¸°ìˆ  ìŠ¤íƒì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

-   **Frontend**: Next.js (App Router), TypeScript, Tailwind CSS
-   **Backend**: NestJS, TypeScript, TypeORM, PostgreSQL
-   **Shared**: í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œ ê°„ íƒ€ì… ë° ìƒìˆ˜ ê³µìœ ë¥¼ ìœ„í•œ ë³„ë„ íŒ¨í‚¤ì§€
-   **DevOps**: Docker, Docker Compose, GitHub Actionsë¥¼ ì´ìš©í•œ CI/CD
-   **íŠ¹ì§•**: `.taskmaster`ì™€ `.claude` ë””ë ‰í† ë¦¬ë¥¼ í†µí•´ **AI ì—ì´ì „íŠ¸(Taskmaster)**ë¥¼ í™œìš©í•˜ì—¬ í”„ë¡œì íŠ¸ ê´€ë¦¬ ë° ê°œë°œì„ ìë™í™”í•˜ëŠ” ë§¤ìš° í˜„ëŒ€ì ì´ê³  ë…íŠ¹í•œ ì›Œí¬í”Œë¡œìš°ë¥¼ ì±„íƒí•˜ê³  ìˆìŠµë‹ˆë‹¤.

ì „ë°˜ì ìœ¼ë¡œ ë§¤ìš° ì²´ê³„ì ì´ê³  ì˜ ì„¤ê³„ëœ í’€ìŠ¤íƒ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.

### 2. ì½”ë“œë² ì´ìŠ¤ êµ¬ì¡° ë¶„ì„

#### ê°€. Monorepo êµ¬ì¡°
- `frontend`, `backend`, `shared` ì›Œí¬ìŠ¤í˜ì´ìŠ¤ë¡œ ëª…í™•í•˜ê²Œ ë¶„ë¦¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
- ë£¨íŠ¸ `package.json`ì—ì„œ ëª¨ë“  ìŠ¤í¬ë¦½íŠ¸(`dev`, `build`, `lint`, `test`)ë¥¼ ê´€ë¦¬í•˜ì—¬ ì¼ê´€ëœ ê°œë°œ ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.
- ì´ëŠ” ì½”ë“œ ì¬ì‚¬ìš©ì„±(íŠ¹íˆ `shared` íŒ¨í‚¤ì§€)ì„ ë†’ì´ê³  í”„ë¡œì íŠ¸ ê´€ë¦¬ë¥¼ ìš©ì´í•˜ê²Œ í•˜ëŠ” ëª¨ë²”ì ì¸ êµ¬ì¡°ì…ë‹ˆë‹¤.

#### ë‚˜. Backend (NestJS)
- **ëª¨ë“ˆí™”**: `auth`, `projects`, `tasks`, `users`, `websocket` ë“± ê¸°ëŠ¥ë³„ë¡œ ëª¨ë“ˆì´ ì˜ ë¶„ë¦¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” NestJSì˜ ì² í•™ì„ ì˜ ë”°ë¥´ëŠ” êµ¬ì¡°ë¡œ, ìœ ì§€ë³´ìˆ˜ì™€ í™•ì¥ì´ ìš©ì´í•©ë‹ˆë‹¤.
- **ë°ì´í„°ë² ì´ìŠ¤**: `database/entities`ì— TypeORM ì—”í‹°í‹°ê°€, `database/migrations`ì— ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì´ ìœ„ì¹˜í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ê´€ë¦¬ê°€ ì²´ê³„ì ì…ë‹ˆë‹¤.
- **ì„¤ì • ê´€ë¦¬**: `config` ë””ë ‰í† ë¦¬ì—ì„œ `auth.config.ts`, `database.config.ts` ë“±ìœ¼ë¡œ ì„¤ì •ì„ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤.
- **ì¸ì¦/ì¸ê°€**: Passport.js ê¸°ë°˜ì˜ `JwtStrategy`, `GoogleStrategy`ì™€ `AuthGuard`, `RolesGuard`ë¥¼ ì‚¬ìš©í•˜ì—¬ ê²¬ê³ í•œ ì¸ì¦/ì¸ê°€ ì‹œìŠ¤í…œì„ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤.

#### ë‹¤. Frontend (Next.js)
- **App Router**: Next.js 13+ì˜ App Routerë¥¼ ì‚¬ìš©í•˜ì—¬ í˜ì´ì§€ ë° ë ˆì´ì•„ì›ƒì„ êµ¬ì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ìµœì‹  Next.js ê°œë°œ íŠ¸ë Œë“œë¥¼ ë”°ë¥´ëŠ” ê²ƒì…ë‹ˆë‹¤.
- **ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°**: `components/ui` (ê¸°ë³¸ UI), `components/tasks` (ê¸°ëŠ¥ë³„), `components/layout` (ë ˆì´ì•„ì›ƒ) ë“±ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ì˜ ì—­í• ì´ ëª…í™•í•˜ê²Œ ë¶„ë¦¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
- **API í†µì‹ **: `lib/api.ts`ì— ì¤‘ì•™í™”ëœ API í´ë¼ì´ì–¸íŠ¸ê°€ ìˆìœ¼ë©°, `lib/api/tasks.ts`ì²˜ëŸ¼ ê¸°ëŠ¥ë³„ë¡œ API í˜¸ì¶œ í•¨ìˆ˜ë¥¼ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤.
- **ìƒíƒœ ê´€ë¦¬**: `zustand`ë¥¼ ì‚¬ìš©í•  ê²ƒìœ¼ë¡œ ë³´ì´ë‚˜, ì‹¤ì œ ìŠ¤í† ì–´ íŒŒì¼ì€ ì œê³µëœ ì½”ë“œì— ì—†ìŠµë‹ˆë‹¤. ê²½ëŸ‰ ìƒíƒœ ê´€ë¦¬ë¥¼ ì§€í–¥í•˜ëŠ” ì¢‹ì€ ì„ íƒì…ë‹ˆë‹¤.

#### ë¼. Shared íŒ¨í‚¤ì§€
- `constants`ì™€ `types`ë¥¼ í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œ ê°„ì— ê³µìœ í•˜ëŠ” ê²ƒì€ ë§¤ìš° í›Œë¥­í•œ ì„¤ê³„ì…ë‹ˆë‹¤.
- ì´ë¥¼ í†µí•´ APIì˜ 'ê³„ì•½(contract)' ì—­í• ì„ í•˜ëŠ” íƒ€ì…ì„ í•œ ê³³ì—ì„œ ê´€ë¦¬í•˜ì—¬ ì–‘ì¸¡ì˜ ë¶ˆì¼ì¹˜ë¡œ ì¸í•œ ë²„ê·¸ë¥¼ ì›ì²œì ìœ¼ë¡œ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ë§ˆ. AI ê¸°ë°˜ ê°œë°œ ì›Œí¬í”Œë¡œìš° (Taskmaster)
- `.taskmaster` ë””ë ‰í† ë¦¬ì— `PRD.txt`, `tasks.json`, `reports` ë“±ì„ ë‘ì–´ AI ì—ì´ì „íŠ¸ê°€ í”„ë¡œì íŠ¸ë¥¼ ì´í•´í•˜ê³  ì‘ì—…ì„ ê´€ë¦¬í•˜ëŠ” ê¸°ë°˜ì„ ë§ˆë ¨í–ˆìŠµë‹ˆë‹¤.
- `.claude` ë””ë ‰í† ë¦¬ì—ëŠ” AI ì—ì´ì „íŠ¸(Claude)ë¥¼ ìœ„í•œ ëª…ë ¹ì–´(slash commands)ê°€ ì •ì˜ë˜ì–´ ìˆì–´, ê°œë°œ í”„ë¡œì„¸ìŠ¤ë¥¼ ìë™í™”í•˜ê³  í‘œì¤€í™”í•˜ë ¤ëŠ” ì‹œë„ê°€ ë‹ë³´ì…ë‹ˆë‹¤.
- ì´ëŠ” ë‹¨ìˆœí•œ ì½”ë“œë² ì´ìŠ¤ë¥¼ ë„˜ì–´ **ì–´ë–»ê²Œ ê°œë°œí•  ê²ƒì¸ê°€**ì— ëŒ€í•œ ë°©ë²•ë¡ ê¹Œì§€ ë‚´ì¬ëœ ë§¤ìš° ì§„ë³´ì ì¸ êµ¬ì¡°ì…ë‹ˆë‹¤.

---

### 3. ì˜ëœ ì  (Strengths)

-   **ëª…í™•í•œ Monorepo ì•„í‚¤í…ì²˜**: ê° íŒ¨í‚¤ì§€(`frontend`, `backend`, `shared`)ì˜ ì—­í• ì´ ëª…í™•í•˜ê³  ìƒí˜¸ ì˜ì¡´ì„± ê´€ë¦¬ê°€ íš¨ìœ¨ì ì…ë‹ˆë‹¤.
-   **ìµœì‹  ê¸°ìˆ  ìŠ¤íƒ í™œìš©**: Next.js App Router, NestJS ë“± ê²€ì¦ëœ ìµœì‹  ê¸°ìˆ ì„ ì ê·¹ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.
-   **ê°•ë ¥í•œ íƒ€ì… ì‹œìŠ¤í…œ**: TypeScriptì™€ `shared` íŒ¨í‚¤ì§€ë¥¼ í†µí•´ í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œ ê°„ì˜ ë°ì´í„° íë¦„ì„ ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•©ë‹ˆë‹¤.
-   **ìë™í™”ëœ ê°œë°œ í™˜ê²½**: Docker, GitHub Actions CI/CD íŒŒì´í”„ë¼ì¸ì´ êµ¬ì¶•ë˜ì–´ ìˆì–´ ê°œë°œ ë° ë°°í¬ ìƒì‚°ì„±ì´ ë†’ìŠµë‹ˆë‹¤.
-   **í˜ì‹ ì ì¸ AI ê°œë°œ ì›Œí¬í”Œë¡œìš°**: Taskmaster AIë¥¼ ë„ì…í•˜ì—¬ ìš”êµ¬ì‚¬í•­ ë¶„ì„ë¶€í„° íƒœìŠ¤í¬ ê´€ë¦¬, ê°œë°œê¹Œì§€ ì²´ê³„ì ìœ¼ë¡œ ìë™í™”í•œ ì ì€ ì´ í”„ë¡œì íŠ¸ì˜ ê°€ì¥ í° íŠ¹ì§•ì´ì ê°•ì ì…ë‹ˆë‹¤.

---

### 4. ê°œì„  ì œì•ˆ ë° ë¦¬íŒ©í„°ë§

ì „ë°˜ì ìœ¼ë¡œ ë§¤ìš° í›Œë¥­í•œ êµ¬ì¡°ì´ì§€ë§Œ, ëª‡ ê°€ì§€ ì˜ì—­ì—ì„œ ë” ê°œì„ í•  ìˆ˜ ìˆëŠ” ë¶€ë¶„ì´ ë³´ì…ë‹ˆë‹¤.

#### ê°€. `shared` íŒ¨í‚¤ì§€ ë° íƒ€ì… ê´€ë¦¬ (ê°€ì¥ ì¤‘ìš”)

-   **ë¬¸ì œì **: í˜„ì¬ `shared/types/api.types.ts` íŒŒì¼ê³¼ `backend/src/shared/types/api.types.ts` íŒŒì¼ì´ ì¤‘ë³µìœ¼ë¡œ ì¡´ì¬í•©ë‹ˆë‹¤. ë‘ íŒŒì¼ì˜ ë‚´ìš©ì´ ìœ ì‚¬í•˜ì§€ë§Œ ì•½ê°„ì˜ ì°¨ì´ê°€ ìˆì–´ í˜¼ë€ê³¼ ë²„ê·¸ì˜ ì›ì¸ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
-   **ë¦¬íŒ©í„°ë§ ì œì•ˆ**:
    1.  **íƒ€ì… ì •ì˜ ë‹¨ì¼í™”**: `shared` ì›Œí¬ìŠ¤í˜ì´ìŠ¤ë¥¼ **Single Source of Truth(ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë‹¨ì¼ ì†ŒìŠ¤)**ë¡œ ë§Œë“­ë‹ˆë‹¤. `shared/types/api.types.ts`ì— ëª¨ë“  ê³µìœ  íƒ€ì…ì„ í†µí•©í•˜ê³ , `backend/src/shared` ë””ë ‰í† ë¦¬ëŠ” ì™„ì „íˆ ì œê±°í•©ë‹ˆë‹¤.
    2.  **ì˜ì¡´ì„± ì„¤ì •**: `backend`ì˜ `package.json`ì—ì„œ `@workly/shared`ë¥¼ `dependency`ë¡œ ì¶”ê°€í•˜ê³ , ë°±ì—”ë“œ ì½”ë“œ ì „ì²´ì—ì„œ `import { ... } from '@workly/shared'` êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ íƒ€ì… ì •ì˜ê°€ í•­ìƒ ì¼ì¹˜í•˜ê²Œ ë©ë‹ˆë‹¤.

#### ë‚˜. ë°±ì—”ë“œ ì•„í‚¤í…ì²˜ ê°œì„ 

-   **ë¬¸ì œì **: TypeORM ì—”í‹°í‹°(`*.entity.ts`) íŒŒì¼ ë‚´ì— ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§(ì˜ˆ: `File.entity.ts`ì˜ `canDownload`, `ProjectMember.entity.ts`ì˜ `hasPermission`)ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì—”í‹°í‹°ê°€ ë°ì´í„° êµ¬ì¡° ì´ìƒì˜ ì±…ì„ì„ ê°–ê²Œ í•˜ì—¬ **Active Record íŒ¨í„´**ì— ê°€ê¹Œì›Œì§‘ë‹ˆë‹¤. NestJSëŠ” **Data Mapper íŒ¨í„´**ì„ ì§€í–¥í•˜ë¯€ë¡œ, ë¡œì§ì„ ì„œë¹„ìŠ¤ ë ˆì´ì–´ë¡œ ì˜®ê¸°ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
-   **ë¦¬íŒ©í„°ë§ ì œì•ˆ**:
    1.  **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì„œë¹„ìŠ¤ë¡œ ì´ì „**: ì—”í‹°í‹°ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆì™€ ê´€ê³„ë¥¼ ì •ì˜í•˜ëŠ” ì—­í• ì—ë§Œ ì¶©ì‹¤í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤.
    2.  ì˜ˆë¥¼ ë“¤ì–´, `file.entity.ts`ì˜ `canDownload(userId)` ë©”ì„œë“œ ëŒ€ì‹ , `FilesService`ì— `canDownload(file: File, userId: string): boolean` ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ ê¶Œí•œ ê²€ì‚¬ ë¡œì§ì„ êµ¬í˜„í•©ë‹ˆë‹¤.
    3.  **ì¥ì **:
        -   **ê´€ì‹¬ì‚¬ ë¶„ë¦¬(SoC)**: ë°ì´í„° êµ¬ì¡°ì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ì´ ëª…í™•í•˜ê²Œ ë¶„ë¦¬ë©ë‹ˆë‹¤.
        -   **í…ŒìŠ¤íŠ¸ ìš©ì´ì„±**: ì„œë¹„ìŠ¤ ë ˆì´ì–´ì—ì„œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸í•˜ê¸°ê°€ í›¨ì”¬ ì‰¬ì›Œì§‘ë‹ˆë‹¤.
        -   **ì¼ê´€ì„±**: ëª¨ë“  ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ì´ ì„œë¹„ìŠ¤ ë ˆì´ì–´ì— ëª¨ì—¬ìˆì–´ ì½”ë“œë¥¼ ì´í•´í•˜ê³  ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì¢‹ìŠµë‹ˆë‹¤.

-   **ë¬¸ì œì **: `database.config.ts` íŒŒì¼ì— `getDatabaseConfig` í•¨ìˆ˜ì™€ `dataSourceOptions` ìƒìˆ˜ê°€ ê±°ì˜ ë™ì¼í•œ ë‚´ìš©ì„ ì¤‘ë³µìœ¼ë¡œ ì •ì˜í•˜ê³  ìˆìŠµë‹ˆë‹¤.
-   **ë¦¬íŒ©í„°ë§ ì œì•ˆ**:
    1.  **ì„¤ì • ë‹¨ì¼í™”**: `DataSourceOptions` íƒ€ì…ì˜ ì„¤ì • ê°ì²´ë¥¼ í•˜ë‚˜ë§Œ ë§Œë“­ë‹ˆë‹¤.
    2.  `getDatabaseConfig` í•¨ìˆ˜ëŠ” ì´ ì„¤ì • ê°ì²´ë¥¼ ê·¸ëŒ€ë¡œ ë°˜í™˜í•˜ë„ë¡ í•˜ê³ , TypeORM CLIë¥¼ ìœ„í•œ `export default new DataSource(...)`ë„ ì´ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì„¤ì • ë³€ê²½ ì‹œ í•œ ê³³ë§Œ ìˆ˜ì •í•˜ë©´ ë©ë‹ˆë‹¤.

#### ë‹¤. í”„ë¡ íŠ¸ì—”ë“œ ë°ì´í„° í˜ì¹­(Data Fetching) ì „ëµ

-   **ë¬¸ì œì **: `ProjectDetailPage.tsx`ë‚˜ `ProjectsPage.tsx`ì™€ ê°™ì€ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ì—ì„œ `useEffect`ì™€ `apiClient`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì§ì ‘ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³  ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ë¡œë”©, ì—ëŸ¬, ìºì‹± ì²˜ë¦¬ë¥¼ ë§¤ë²ˆ ìˆ˜ë™ìœ¼ë¡œ í•´ì•¼ í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ìˆìŠµë‹ˆë‹¤.
-   **ë¦¬íŒ©í„°ë§ ì œì•ˆ**:
    1.  **React Query (TanStack Query) ë˜ëŠ” SWR ë„ì…**: ë°ì´í„° í˜ì¹­, ìºì‹±, ë™ê¸°í™”, ì„œë²„ ìƒíƒœ ê´€ë¦¬ë¥¼ ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë„ì…í•˜ëŠ” ê²ƒì„ ê°•ë ¥íˆ ì¶”ì²œí•©ë‹ˆë‹¤.
    2.  **ì»¤ìŠ¤í…€ í›…(Custom Hook) ìƒì„±**: `useProjects`, `useProject(id)`ì™€ ê°™ì€ ì»¤ìŠ¤í…€ í›…ì„ ë§Œë“¤ì–´ ë°ì´í„° í˜ì¹­ ë¡œì§ì„ ì»´í¬ë„ŒíŠ¸ë¡œë¶€í„° ì™„ì „íˆ ë¶„ë¦¬í•©ë‹ˆë‹¤.

    ```typescript
    // ì˜ˆì‹œ: useProjects.ts
    import { useQuery } from '@tanstack/react-query';
    import { apiClient } from '@/lib/api';
    import { PaginatedResponse, Project, ProjectQueryDto } from '@/types/project.types';

    const fetchProjects = async (query?: ProjectQueryDto): Promise<PaginatedResponse<Project>> => {
      // ... apiClientë¥¼ ì‚¬ìš©í•œ API í˜¸ì¶œ ë¡œì§ ...
    };

    export const useProjects = (query?: ProjectQueryDto) => {
      return useQuery({
        queryKey: ['projects', query], // ì¿¼ë¦¬ í‚¤
        queryFn: () => fetchProjects(query),
        // staleTime, cacheTime ë“± ìºì‹± ì˜µì…˜ ì„¤ì •
      });
    };
    ```

    3.  **ì¥ì **:
        -   **ì½”ë“œê°€ ê°„ê²°í•´ì§**: ì»´í¬ë„ŒíŠ¸ì—ì„œ `isLoading`, `error`, `data` ìƒíƒœë¥¼ ì§ì ‘ ê´€ë¦¬í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.
        -   **ìë™ ìºì‹± ë° ì¬ê²€ì¦**: ë°ì´í„° ì¼ê´€ì„±ì„ ìœ ì§€í•˜ê³  ë¶ˆí•„ìš”í•œ API í˜¸ì¶œì„ ì¤„ì—¬ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.
        -   **ì„œë²„ ìƒíƒœì™€ UI ìƒíƒœì˜ ë¶„ë¦¬**: ë°ì´í„° í˜ì¹­ ë¡œì§ì´ ë¶„ë¦¬ë˜ì–´ ì»´í¬ë„ŒíŠ¸ëŠ” UI ë Œë”ë§ì—ë§Œ ì§‘ì¤‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ë¼. CI/CD íŒŒì´í”„ë¼ì¸ ìµœì í™”
- **ë¬¸ì œì **: í˜„ì¬ `backend-ci.yml`ê³¼ `frontend-ci.yml`ì´ ê°œë³„ì ìœ¼ë¡œ ì¡´ì¬í•˜ê³ , `monorepo-ci.yml`ì€ ë³€ê²½ëœ ê²½ë¡œë¥¼ ê°ì§€í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ `shared` íŒ¨í‚¤ì§€ê°€ ë³€ê²½ë  ê²½ìš° í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œ ì›Œí¬í”Œë¡œìš°ë¥¼ ëª¨ë‘ íŠ¸ë¦¬ê±°í•˜ëŠ” ë¡œì§ì´ ë” ëª…í™•í•´ì•¼ í•©ë‹ˆë‹¤. `monorepo-ci.yml`ì€ ë¹Œë“œ/í…ŒìŠ¤íŠ¸ë¥¼ ì§ì ‘ ìˆ˜í–‰í•˜ì§€ ì•Šê³  ì•Œë¦¼ë§Œ ë³´ë‚´ëŠ” ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.
- **ë¦¬íŒ©í„°ë§ ì œì•ˆ**:
    1. **ë‹¨ì¼ í†µí•© ì›Œí¬í”Œë¡œìš°**: `monorepo-ci.yml`ì„ ë©”ì¸ CI ì›Œí¬í”Œë¡œìš°ë¡œ ì‚¬ìš©í•˜ê³ , `dorny/paths-filter`ì˜ `outputs`ì„ í™œìš©í•˜ì—¬ í•„ìš”í•œ ì‘ì—…(backend-test, frontend-test)ì„ ì¡°ê±´ë¶€ë¡œ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ë” íš¨ìœ¨ì ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    2. `shared` ë³€ê²½ ì‹œ, ë°±ì—”ë“œì™€ í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸/ë¹Œë“œ ì‘ì—…ì„ ëª¨ë‘ ì‹¤í–‰í•˜ë„ë¡ `if` ì¡°ê±´ì„ ì„¤ì •í•©ë‹ˆë‹¤. (`if: needs.changes.outputs.backend == 'true' || needs.changes.outputs.shared == 'true'`)

### 5. ì¢…í•© ê²°ë¡ 

ì´ ì½”ë“œë² ì´ìŠ¤ëŠ” ìµœì‹  ê¸°ìˆ ê³¼ ëª¨ë²” ì‚¬ë¡€ë¥¼ ì ê·¹ì ìœ¼ë¡œ ë„ì…í•œ ë§¤ìš° ì˜ ë§Œë“¤ì–´ì§„ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤. íŠ¹íˆ AI ì—ì´ì „íŠ¸ë¥¼ ê°œë°œ í”„ë¡œì„¸ìŠ¤ì— í†µí•©í•œ ì ì€ ë§¤ìš° ì¸ìƒì ì´ë©° ë¯¸ë˜ ì§€í–¥ì ì…ë‹ˆë‹¤.

ì œì•ˆëœ ë¦¬íŒ©í„°ë§ì€ ì£¼ë¡œ **ì½”ë“œ ì¤‘ë³µ ì œê±°, ê´€ì‹¬ì‚¬ ë¶„ë¦¬ ê°•í™”, ë°ì´í„° ê´€ë¦¬ ì „ëµ ê°œì„ **ì— ì´ˆì ì„ ë§ì¶”ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ê°œì„  ì‚¬í•­ë“¤ì„ ì ìš©í•˜ë©´ í”„ë¡œì íŠ¸ì˜ ì•ˆì •ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì´ í•œ ë‹¨ê³„ ë” ë†’ì•„ì ¸, ì•ìœ¼ë¡œ ë” ë³µì¡í•œ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê³  í™•ì¥í•´ ë‚˜ê°€ëŠ” ë° íŠ¼íŠ¼í•œ ê¸°ë°˜ì´ ë  ê²ƒì…ë‹ˆë‹¤.
</file>

<file path="instructions/20250727-01.md">
### ì‘ì—… ì§€ì‹œì„œ

*   **ë¬¸ì„œ ID**: `20250727-01.md`
*   **ì‘ì„±ì¼**: 2025ë…„ 7ì›” 27ì¼
*   **ìš”ì²­ì**: ì˜¤ì§€í›ˆ
*   **ë‹´ë‹¹ì**: Gemini

### 1. ê°œìš”

í”„ë¡œì íŠ¸ ìƒì„¸ í˜ì´ì§€ì˜ ì‚¬ìš©ì ê²½í—˜(UX)ì„ ê°œì„ í•˜ê¸° ìœ„í•´ ê¸°ì¡´ íƒ­ ê¸°ë°˜ ë ˆì´ì•„ì›ƒì„ ì±„íŒ… ì¤‘ì‹¬ì˜ 2ë‹¨ ë ˆì´ì•„ì›ƒìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤. ì‚¬ìš©ìê°€ í”„ë¡œì íŠ¸ì˜ í•µì‹¬ ì†Œí†µ ì±„ë„ì¸ ì±„íŒ…ì— ì§‘ì¤‘í•˜ë©´ì„œ, ë™ì‹œì— ìš°ì¸¡ ì‚¬ì´ë“œë°”ë¥¼ í†µí•´ í”„ë¡œì íŠ¸ì˜ ì£¼ìš” ì •ë³´ì™€ ëª©í‘œë¥¼ í•œëˆˆì— íŒŒì•…í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.

### 2. ì‘ì—… ë²”ìœ„

*   `/Users/ohjiihoon/Documents/Workly/frontend/src/app/projects/[id]/page.tsx`
*   `/Users/ohjiihoon/Documents/Workly/frontend/src/components/projects/ProjectChatChannel.tsx`

### 3. ìƒì„¸ ì‘ì—… ë‚´ìš©

#### 3.1. ë©”ì¸ ë ˆì´ì•„ì›ƒ ë³€ê²½ (`page.tsx`)

1.  **2ë‹¨ ë ˆì´ì•„ì›ƒ êµ¬ì¡° ì ìš©**
    *   ê¸°ì¡´ `ProjectDetailView`ì˜ íƒ­ êµ¬ì¡°ë¥¼ ì œê±°í•©ë‹ˆë‹¤.
    *   í˜ì´ì§€ ì „ì²´ë¥¼ ì¢Œì¸¡ ë©”ì¸ ì½˜í…ì¸ (ì±„íŒ…)ì™€ ìš°ì¸¡ ì‚¬ì´ë“œë°”ë¡œ êµ¬ì„±ëœ 2ë‹¨ ë ˆì´ì•„ì›ƒìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤. (ì˜ˆ: `flex` ë ˆì´ì•„ì›ƒ ì‚¬ìš©, ì¢Œì¸¡ `flex-1`, ìš°ì¸¡ `w-1/3` ë˜ëŠ” `w-[400px]` ê³ ì • ë„ˆë¹„)

2.  **ì»´í¬ë„ŒíŠ¸ ì¬ë°°ì¹˜**
    *   **ì¢Œì¸¡ (ë©”ì¸ ì½˜í…ì¸ )**: `<ProjectChatChannel />` ì»´í¬ë„ŒíŠ¸ë¥¼ í•­ìƒ í‘œì‹œí•˜ë„ë¡ ë°°ì¹˜í•©ë‹ˆë‹¤.
    *   **ìš°ì¸¡ (ì‚¬ì´ë“œë°”)**:
        *   `<ProjectObjectiveManager />` (ëª©í‘œ ê´€ë¦¬) ì»´í¬ë„ŒíŠ¸ë¥¼ ë°°ì¹˜í•©ë‹ˆë‹¤.
        *   ê¸°ì¡´ `ProjectDetailView`ì˜ 'í”„ë¡œì íŠ¸ ì •ë³´' íƒ­ì— ìˆë˜ ëª¨ë“  ë‚´ìš©ì„ ì‚¬ì´ë“œë°”ì˜ ë³„ë„ ì„¹ì…˜ìœ¼ë¡œ ì˜®ê¹ë‹ˆë‹¤. (ìƒì„¸ ë‚´ìš©ì€ 3.3 ì°¸ì¡°)

#### 3.2. ì±„íŒ… í—¤ë” ìˆ˜ì • (`ProjectChatChannel.tsx`)

1.  **'ë’¤ë¡œê°€ê¸°' ë²„íŠ¼ ì¶”ê°€**
    *   ê¸°ì¡´ `ProjectDetailView` í—¤ë”ì— ìˆë˜ 'ë’¤ë¡œê°€ê¸°' ë²„íŠ¼(`ArrowLeft` ì•„ì´ì½˜)ì„ `ProjectChatChannel` ì»´í¬ë„ŒíŠ¸ì˜ í—¤ë” ì¢Œì¸¡ìœ¼ë¡œ ì´ë™ì‹œí‚µë‹ˆë‹¤.
    *   `useRouter` í›…ì„ ì‚¬ìš©í•˜ì—¬ `router.back()` ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤.

2.  **í”„ë¡œì íŠ¸ ì œëª© ë° í¸ì§‘ ë²„íŠ¼ ì œê±°**
    *   `ProjectDetailView` í—¤ë”ì— ìˆë˜ í”„ë¡œì íŠ¸ ì œëª©ê³¼ 'í¸ì§‘' ë²„íŠ¼ì€ `ProjectChatChannel` í—¤ë”ì— í•„ìš” ì—†ìœ¼ë¯€ë¡œ, 'ë’¤ë¡œê°€ê¸°' ë²„íŠ¼ë§Œ ì¶”ê°€í•©ë‹ˆë‹¤.

#### 3.3. ìš°ì¸¡ ì‚¬ì´ë“œë°” êµ¬ì„± (`page.tsx`)

1.  **'í”„ë¡œì íŠ¸ ì •ë³´' ì„¹ì…˜ ìƒì„±**
    *   ê¸°ì¡´ `ProjectDetailView`ì˜ `activeTab === 'details'` ì¡°ê±´ë¶€ ë Œë”ë§ ì•ˆì— ìˆë˜ ëª¨ë“  JSX(í”„ë¡œì íŠ¸ í—¤ë” ì¹´ë“œ, ì§„í–‰ë¥ , ì •ë³´, íƒœê·¸, ì•¡ì…˜ ë²„íŠ¼ ë“±)ë¥¼ ì¶”ì¶œí•˜ì—¬ ìš°ì¸¡ ì‚¬ì´ë“œë°”ì— ë°°ì¹˜í•©ë‹ˆë‹¤.
    *   ê°€ë…ì„±ì„ ìœ„í•´ ì´ ë¶€ë¶„ì„ `ProjectInfoSidebar`ì™€ ê°™ì€ ë³„ë„ì˜ ì»´í¬ë„ŒíŠ¸ë¡œ ë§Œë“œëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.

2.  **'í¸ì§‘' ë²„íŠ¼ ì¬ë°°ì¹˜**
    *   ê¸°ì¡´ `ProjectDetailView` í—¤ë”ì— ìˆë˜ 'í¸ì§‘' ë²„íŠ¼ì„ ìš°ì¸¡ ì‚¬ì´ë“œë°”ì˜ 'í”„ë¡œì íŠ¸ ì •ë³´' ì„¹ì…˜ ìƒë‹¨ìœ¼ë¡œ ì´ë™ì‹œí‚µë‹ˆë‹¤.

3.  **'ëª©í‘œ ê´€ë¦¬' ì„¹ì…˜ ë°°ì¹˜**
    *   `<ProjectObjectiveManager />` ì»´í¬ë„ŒíŠ¸ë¥¼ 'í”„ë¡œì íŠ¸ ì •ë³´' ì„¹ì…˜ ìœ„ ë˜ëŠ” ì•„ë˜ì— ë°°ì¹˜í•˜ì—¬ ì‚¬ì´ë“œë°” ë‚´ì—ì„œ ìŠ¤í¬ë¡¤ë¡œ í•¨ê»˜ ë³¼ ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

### 4. ê²°ê³¼ë¬¼

*   í”„ë¡œì íŠ¸ ìƒì„¸ í˜ì´ì§€ì— ì ‘ì†í•˜ë©´, ì¢Œì¸¡ì—ëŠ” ì±„íŒ…ì°½ì´, ìš°ì¸¡ì—ëŠ” í”„ë¡œì íŠ¸ ì •ë³´ì™€ ëª©í‘œ ê´€ë¦¬ ì„¹ì…˜ì´ ìˆëŠ” ì‚¬ì´ë“œë°”ê°€ í‘œì‹œë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
*   ì±„íŒ…ì°½ í—¤ë”ì˜ 'ë’¤ë¡œê°€ê¸°' ë²„íŠ¼ì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•´ì•¼ í•©ë‹ˆë‹¤.
*   ê¸°ì¡´ì˜ 'ì±„íŒ…', 'ëª©í‘œ ê´€ë¦¬', 'í”„ë¡œì íŠ¸ ì •ë³´' íƒ­ì€ ì‚¬ë¼ì ¸ì•¼ í•©ë‹ˆë‹¤.
*   ìš°ì¸¡ ì‚¬ì´ë“œë°”ëŠ” ìŠ¤í¬ë¡¤ì´ ê°€ëŠ¥í•´ì•¼ í•˜ë©°, ëª¨ë“  ì •ë³´ê°€ ì •ìƒì ìœ¼ë¡œ í‘œì‹œë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
</file>

<file path="instructions/20250727-02.md">
### ì‘ì—… ì§€ì‹œì„œ

*   **ë¬¸ì„œ ID**: `20250727-02.md`
*   **ì‘ì„±ì¼**: 2025ë…„ 7ì›” 27ì¼
*   **ìš”ì²­ì**: ì˜¤ì§€í›ˆ
*   **ë‹´ë‹¹ì**: Gemini

### 1. ê°œìš”

ê¸°ì¡´ì˜ ë³µí•©ì ì¸ ë°©ë²•ë¡ (GTD, OKR)ì„ ëŒ€ì²´í•˜ê³ , ì›Œí´ë¦¬ë§Œì˜ ë…ìì ì¸ 'ì›Œí´ë¦¬ ê³ ìœ  ë°©ë²•ë¡ 'ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í•µì‹¬ ì² í•™ìœ¼ë¡œ ë„ì…í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ ë°ì´í„° ëª¨ë¸, API, UI/UX ì „ë°˜ì— ê±¸ì³ 'ëª©í‘œ â†’ í”„ë¡œì íŠ¸ â†’ ì—…ë¬´'ì˜ ìœ ì—°í•œ ê³„ì¸µ êµ¬ì¡°ì™€ 'ìˆ˜ì§‘ â†’ ê³„íš â†’ ì‹¤í–‰ â†’ ê²€í† (CPER)' ì›Œí¬í”Œë¡œìš°ë¥¼ ì ìš©í•˜ëŠ” ëŒ€ê·œëª¨ ë¦¬íŒ©í† ë§ì„ ì§„í–‰í•©ë‹ˆë‹¤.

### 2. í•µì‹¬ ì›ì¹™ ë° ì •ì±…

1.  **ìœ ì—°í•œ ê³„ì¸µ êµ¬ì¡°**
    *   'ëª©í‘œ â†’ í”„ë¡œì íŠ¸ â†’ ì—…ë¬´'ëŠ” ê¶Œì¥ ê°€ì´ë“œë¼ì¸ì¼ ë¿, **í•„ìˆ˜ ê°•ì œ ì‚¬í•­ì´ ì•„ë‹™ë‹ˆë‹¤.**
    *   **ëª©í‘œê°€ ì—†ëŠ” í”„ë¡œì íŠ¸** ìƒì„±ì´ ê°€ëŠ¥í•´ì•¼ í•©ë‹ˆë‹¤.
    *   **í”„ë¡œì íŠ¸ê°€ ì—†ëŠ” ë…ë¦½ì ì¸ ì—…ë¬´** ìƒì„±ì´ ê°€ëŠ¥í•´ì•¼ í•©ë‹ˆë‹¤.
    *   ì‚¬ìš©ìëŠ” ì—…ë¬´ë¥¼ ë¨¼ì € ë§Œë“  í›„, ë‚˜ì¤‘ì— í•´ë‹¹ ì—…ë¬´ë¥¼ íŠ¹ì • í”„ë¡œì íŠ¸ë‚˜ ëª©í‘œì— ì—°ê²°í•˜ëŠ” 'ìƒí–¥ì‹(Bottom-up)' êµ¬ì„±ì´ ê°€ëŠ¥í•´ì•¼ í•©ë‹ˆë‹¤.

2.  **ë„¤ë¹„ê²Œì´ì…˜ êµ¬ì¡° ì •ì˜**
    *   ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í•µì‹¬ ë„¤ë¹„ê²Œì´ì…˜ì€ ë‹¤ìŒ 5ê°œ í•­ëª©ìœ¼ë¡œ êµ¬ì„±í•©ë‹ˆë‹¤.
        1.  **ì—…ë¬´ (Tasks)**
        2.  **í”„ë¡œì íŠ¸ (Projects)**
        3.  **ìˆ˜ì§‘í•¨ (Inbox)**: ì¤‘ì•™ì— ìœ„ì¹˜í•˜ë©°, ì‹œê°ì ìœ¼ë¡œ ê°•ì¡°ëœ ë””ìì¸ì„ ì ìš©í•©ë‹ˆë‹¤.
        4.  **ëª©í‘œ (Goals)**
        5.  **í”„ë¡œí•„ (Profile)**

3.  **ìˆ˜ì§‘í•¨(Inbox) ë° í”Œë¡œíŒ… ì•¡ì…˜ ë²„íŠ¼(FAB) ì •ì±…**
    *   ë„¤ë¹„ê²Œì´ì…˜ì˜ 'ìˆ˜ì§‘í•¨'ê³¼ 'í”Œë¡œíŒ… ì•¡ì…˜ ë²„íŠ¼(FAB)'ì€ ë™ì¼í•œ ê¸°ëŠ¥(ë¹ ë¥¸ í•­ëª© ì¶”ê°€)ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
    *   **FABëŠ” ë°ìŠ¤í¬í†± í™˜ê²½ì—ì„œë§Œ í‘œì‹œ**í•˜ì—¬ ì ‘ê·¼ í¸ì˜ì„±ì„ ë†’ì…ë‹ˆë‹¤.
    *   **ëª¨ë°”ì¼ í™˜ê²½ì—ì„œëŠ” FABë¥¼ ìˆ¨ê²¨** í™”ë©´ì„ ê°€ë¦¬ì§€ ì•Šê³ , ì¤‘ì•™ì˜ 'ìˆ˜ì§‘í•¨' ë²„íŠ¼ ì‚¬ìš©ì„ ìœ ë„í•©ë‹ˆë‹¤.

4.  **UI/UX ìŠ¤íƒ€ì¼ í†µì¼**
    *   'ëª©í‘œ' í˜ì´ì§€ëŠ” ë³µì¡í•œ ëŒ€ì‹œë³´ë“œ í˜•íƒœê°€ ì•„ë‹Œ, ê¸°ì¡´ 'í”„ë¡œì íŠ¸'ë‚˜ 'ì—…ë¬´' ëª©ë¡ê³¼ ê°™ì´ **ê°„ê²°í•œ ì¹´ë“œ ê¸°ë°˜ì˜ ë¦¬ìŠ¤íŠ¸ ë ˆì´ì•„ì›ƒ**ì„ ìœ ì§€í•©ë‹ˆë‹¤.
    *   ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ë°˜ì˜ ë””ìì¸ í†µì¼ì„±ì„ ì¤€ìˆ˜í•©ë‹ˆë‹¤.

### 3. ë‹¨ê³„ë³„ ì‹¤í–‰ ê³„íš

#### Phase 1: ê¸°ë°˜ ëª¨ë¸ ë° API ì¬ì„¤ê³„ (Foundation & API Redesign)

ì´ ë‹¨ê³„ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¼ˆëŒ€ë¥¼ ì¬êµ¬ì„±í•˜ëŠ” ê°€ì¥ ì¤‘ìš”í•œ ê³¼ì •ì…ë‹ˆë‹¤.

1.  **ê³µí†µ íƒ€ì… ì •ì˜ (`/shared/types`)**
    *   ê¸°ì¡´ íƒ€ì…(`Objective`, `KeyResult` ë“±)ì„ ìƒˆë¡œìš´ ëª¨ë¸ì— ë§ê²Œ ì¬ì •ì˜í•˜ê±°ë‚˜ ìƒˆë¡œ ë§Œë“­ë‹ˆë‹¤.
    *   `Goal.ts`: ëª©í‘œ íƒ€ì…ì„ ì •ì˜í•©ë‹ˆë‹¤. (id, title, description, progress ë“±)
    *   `Project.ts`: í”„ë¡œì íŠ¸ íƒ€ì…ì„ ìˆ˜ì •í•©ë‹ˆë‹¤. `goalId` í•„ë“œë¥¼ **ì„ íƒì (Optional/Nullable)**ìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.
    *   `Task.ts`: ì‘ì—… íƒ€ì…ì„ ìˆ˜ì •í•©ë‹ˆë‹¤. `projectId` í•„ë“œë¥¼ **ì„ íƒì (Optional/Nullable)**ìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.
    *   `InboxItem.ts`: 'ìˆ˜ì§‘í•¨'ì— ë“¤ì–´ì˜¬ í•­ëª©ì˜ íƒ€ì…ì„ ì •ì˜í•©ë‹ˆë‹¤.

2.  **ë°±ì—”ë“œ (`/backend`)**
    *   **ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë³€ê²½**: `Goal` í…Œì´ë¸”ì„ ìƒˆë¡œ ìƒì„±í•˜ê³ , `Project` í…Œì´ë¸”ì— `goalId` ì™¸ë˜ í‚¤ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. `Project`ì˜ `goalId`ì™€ `Task`ì˜ `projectId`ëŠ” ì„ íƒì  í•„ë“œë¡œ ë³€ê²½í•©ë‹ˆë‹¤.
    *   **API ì—”ë“œí¬ì¸íŠ¸ ìˆ˜ì •/ì¶”ê°€**:
        *   `Goals API`: ëª©í‘œ(Goal)ì— ëŒ€í•œ CRUD APIë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
        *   `Projects API`: í”„ë¡œì íŠ¸ ìƒì„±/ìˆ˜ì • ì‹œ `goalId`ë¥¼ í•„ìˆ˜ë¡œ ë°›ì§€ ì•Šë„ë¡ ìˆ˜ì •í•©ë‹ˆë‹¤.
        *   `Tasks API`: ê¸°ì¡´ êµ¬ì¡°ë¥¼ ìœ ì§€í•˜ë˜, ìƒìœ„ í”„ë¡œì íŠ¸ ë° ëª©í‘œì™€ì˜ ì—°ê²°ì„±ì„ í•­ìƒ ê²€ì¦í•˜ë„ë¡ ë¡œì§ì„ ê°•í™”í•©ë‹ˆë‹¤. `projectId`ë¥¼ í•„ìˆ˜ë¡œ ë°›ì§€ ì•Šë„ë¡ ìˆ˜ì •í•©ë‹ˆë‹¤.
        *   `Inbox API`: ìˆ˜ì§‘í•¨ í•­ëª©ì„ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ëŠ” APIë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.

3.  **í”„ë¡ íŠ¸ì—”ë“œ (`/frontend`)**
    *   ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ë°˜ì—ì„œ ì‚¬ìš©ë˜ëŠ” íƒ€ì…ì„ ìƒˆë¡œìš´ íƒ€ì…ìœ¼ë¡œ êµì²´í•©ë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ ë°œìƒí•˜ëŠ” ì»´íŒŒì¼ ì˜¤ë¥˜ë¥¼ í•´ê²°í•˜ë©° ë³€ê²½ì´ í•„ìš”í•œ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë¥¼ ì‹ë³„í•©ë‹ˆë‹¤.

#### Phase 2: í•µì‹¬ UI/UX ì¬êµ¬ì¶• (Core UI/UX Rebuild)

ìƒˆë¡œìš´ ë°©ë²•ë¡ ì— ë§ì¶° ì‚¬ìš©ìê°€ ìƒí˜¸ì‘ìš©í•˜ëŠ” ë°©ì‹ì„ ì™„ì „íˆ ìƒˆë¡œ ì„¤ê³„í•©ë‹ˆë‹¤.

1.  **ë©”ì¸ ë„¤ë¹„ê²Œì´ì…˜ ë³€ê²½**
    *   ìœ„ì— ì •ì˜ëœ 5ê°œì˜ í•­ëª©ìœ¼ë¡œ êµ¬ì„±ëœ í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë°”ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
    *   ì¤‘ì•™ì˜ 'ìˆ˜ì§‘í•¨(Inbox)' ë²„íŠ¼ì€ ë‹¤ë¥¸ ë²„íŠ¼ê³¼ êµ¬ë³„ë˜ëŠ” í¬ê¸°, ìƒ‰ìƒ, ì•„ì´ì½˜ ë“±ìœ¼ë¡œ ì‹œê°ì  ê°•ì¡°ë¥¼ ì ìš©í•©ë‹ˆë‹¤.

2.  **í™”ë©´ ì¬ì„¤ê³„**
    *   **ê²Œì‹œíŒ í˜ì´ì§€**: ê²Œì‹œíŒ í˜ì´ì§€ëŠ” ë©”ì¸ ë©”ë‰´ì˜ í˜ì´ì§€ë“¤ê³¼ ì„±ê²©ì´ ë‹¬ë¼ ê°ê°ì˜ ê²Œì‹œíŒì„ ë”°ë¡œ ë§Œë“¤ê³ , ë°ìŠ¤í¬í†±ì˜ ì‚¬ì´ë“œ ë„¤ë¹„ê²Œì´ì…˜, ëª¨ë°”ì¼ì˜ í—¤ë”ì— ìˆëŠ” í–„ë²„ê±° ë©”ë‰´ ì•„ì´ì½˜ì˜ ë“œë¡­ë‹¤ìš´ ë©”ë‰´ì— ìƒˆë¡œìš´ ì„¹ì…˜ì„ ë‚˜ëˆ„ì–´ ê²Œì‹œíŒ ë§í¬ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
    *   **í™œë™ í˜ì´ì§€**: í™œë™ í˜ì´ì§€ëŠ” ì¤‘ìš”ë„ê°€ ë‚®ì•„, í”„ë¡œí•„ í˜ì´ì§€ì— í†µí•©í•©ë‹ˆë‹¤.
    *   **ëª©í‘œ í˜ì´ì§€**: ê° ëª©í‘œ ì¹´ë“œëŠ” ëª©í‘œ ì œëª©, ì„¤ëª…, ì§„í–‰ë¥  ë“± í•µì‹¬ ì •ë³´ë§Œ ê°„ê²°í•˜ê²Œ í‘œì‹œí•©ë‹ˆë‹¤.
    *   **í”„ë¡œì íŠ¸ ìƒì„¸ í˜ì´ì§€**: ìš°ì¸¡ ì‚¬ì´ë“œë°”ì— í”„ë¡œì íŠ¸ ì •ë³´ì™€ í•¨ê»˜, ì´ í”„ë¡œì íŠ¸ê°€ ì†í•œ **ìƒìœ„ ëª©í‘œ**ë¥¼ ëª…í™•í•˜ê²Œ í‘œì‹œí•©ë‹ˆë‹¤.
    *   **ìš©ì–´ ë³€ê²½**: ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ ëª¨ë“  'Objective', 'Key Result' ë“±ì˜ ìš©ì–´ë¥¼ 'ëª©í‘œ', 'í”„ë¡œì íŠ¸', 'ì—…ë¬´'ë¡œ ì¼ê´„ ë³€ê²½í•©ë‹ˆë‹¤.

#### Phase 3: ì›Œí¬í”Œë¡œìš° ê¸°ëŠ¥ êµ¬í˜„ (Workflow Feature Implementation)

CPER ì‚¬ì´í´ì„ ì‹¤ì œë¡œ ë™ì‘í•˜ê²Œ í•˜ëŠ” ê¸°ëŠ¥ë“¤ì„ êµ¬í˜„í•©ë‹ˆë‹¤.

1.  **ìˆ˜ì§‘ (Capture)**
    *   ì–´ëŠ í™”ë©´ì—ì„œë‚˜ ì ‘ê·¼ ê°€ëŠ¥í•œ 'ê¸€ë¡œë²Œ ìˆ˜ì§‘í•¨ ì…ë ¥ì°½' UI ì»´í¬ë„ŒíŠ¸ë¥¼ ê°œë°œí•˜ê³ , `Inbox API`ì™€ ì—°ë™í•©ë‹ˆë‹¤.
    *   í™”ë©´ ìš°ì¸¡ í•˜ë‹¨ì— ìœ„ì¹˜í•˜ëŠ” FAB ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. CSS ë¯¸ë””ì–´ ì¿¼ë¦¬ ë“±ì„ ì‚¬ìš©í•˜ì—¬ **í™”ë©´ ë„ˆë¹„ê°€ íŠ¹ì • ê¸°ì¤€ ì´ìƒì¼ ë•Œ(ë°ìŠ¤í¬í†±)ë§Œ í‘œì‹œ**ë˜ë„ë¡ êµ¬í˜„í•©ë‹ˆë‹¤. í´ë¦­ ì‹œ 'ìˆ˜ì§‘í•¨' ê¸°ëŠ¥(ë¹ ë¥¸ ì¶”ê°€ ëª¨ë‹¬ ë“±)ì´ ì‹¤í–‰ë˜ë„ë¡ í•©ë‹ˆë‹¤.

2.  **ê³„íš (Plan)**
    *   'ìˆ˜ì§‘í•¨' í˜ì´ì§€ì—ì„œ ê° í•­ëª©ì„ 'í”„ë¡œì íŠ¸' ë˜ëŠ” 'ì—…ë¬´'ë¡œ ì „í™˜í•˜ëŠ” UI/UXë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
    *   ì—…ë¬´(Task) ìƒì„±/ìˆ˜ì • í™”ë©´ì— 'í”„ë¡œì íŠ¸ ì—°ê²°' í•­ëª©ì„ ì¶”ê°€í•©ë‹ˆë‹¤. ì´ í•­ëª©ì€ í•„ìˆ˜ê°€ ì•„ë‹ˆë©°, ì‚¬ìš©ìê°€ ê¸°ì¡´ í”„ë¡œì íŠ¸ë¥¼ ê²€ìƒ‰í•˜ì—¬ ì—°ê²°í•˜ê±°ë‚˜ ë¹„ì›Œë‘˜ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    *   í”„ë¡œì íŠ¸(Project) ìƒì„±/ìˆ˜ì • í™”ë©´ì— 'ìƒìœ„ ëª©í‘œ ì—°ê²°' í•­ëª©ì„ ì¶”ê°€í•©ë‹ˆë‹¤. ì´ ë˜í•œ ì„ íƒ ì‚¬í•­ì…ë‹ˆë‹¤.

3.  **ì‹¤í–‰ (Execute)**
    *   'ì˜¤ëŠ˜ í•  ì¼' í˜ì´ì§€ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤. ë§ˆê°ì¼ì´ ì˜¤ëŠ˜ì´ê±°ë‚˜ ì‚¬ìš©ìê°€ ì§ì ‘ ì¶”ê°€í•œ ì—…ë¬´ë“¤ì„ ëª¨ì•„ì„œ ë³´ì—¬ì¤ë‹ˆë‹¤.
    *   ëª©í‘œ ë° í”„ë¡œì íŠ¸ ëŒ€ì‹œë³´ë“œì— ì‹¤ì‹œê°„ ì§„í–‰ë¥  ë°”(Progress Bar)ë¥¼ ì ìš©í•©ë‹ˆë‹¤.

4.  **ê²€í†  (Review)**
    *   ì£¼ê°„ ì„±ê³¼(ì™„ë£Œëœ ì—…ë¬´, í”„ë¡œì íŠ¸ ì§„í–‰ë¥  ë“±)ë¥¼ ìš”ì•½í•´ì„œ ë³´ì—¬ì£¼ëŠ” 'ì£¼ê°„ ë¦¬í¬íŠ¸' í˜ì´ì§€ë¥¼ ì„¤ê³„í•˜ê³  êµ¬í˜„í•©ë‹ˆë‹¤.
    *   ë°±ì—”ë“œëŠ” ë¦¬í¬íŠ¸ ìƒì„±ì„ ìœ„í•œ ë°ì´í„° ì§‘ê³„ APIë¥¼ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤.

#### Phase 4: ë¬¸ì„œí™” ë° ìµœì¢… ì •ë¦¬ (Documentation & Finalization)

1.  **ë‚´ë¶€ ë¬¸ì„œ ì—…ë°ì´íŠ¸**: `README.md`, `WorklyPlanning.md` ë“± í”„ë¡œì íŠ¸ ê´€ë ¨ ë¬¸ì„œë¥¼ ìƒˆë¡œìš´ ì›Œí´ë¦¬ ê³ ìœ  ë°©ë²•ë¡ ì— ë§ê²Œ ëª¨ë‘ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
2.  **ì½”ë“œ ì •ë¦¬**: ê¸°ì¡´ OKR/GTD ê´€ë ¨ ë¡œì§ê³¼ ì»´í¬ë„ŒíŠ¸ ì¤‘ ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ì½”ë“œë¥¼ ëª¨ë‘ ì œê±°í•©ë‹ˆë‹¤.

### 4. ê¸°ëŒ€ íš¨ê³¼

ì´ ì‘ì—…ì„ í†µí•´ ì›Œí´ë¦¬ëŠ” ë‹¨ìˆœí•œ ì—…ë¬´ ê´€ë¦¬ íˆ´ì„ ë„˜ì–´, ì‚¬ìš©ìê°€ ëª…í™•í•œ ëª©í‘œë¥¼ ì„¤ì •í•˜ê³  ë‹¬ì„±í•´ë‚˜ê°€ëŠ” ê³¼ì •ì„ ë•ëŠ” ê°•ë ¥í•œ 'ëª©í‘œ ë‹¬ì„± í”Œë«í¼'ìœ¼ë¡œ ê±°ë“­ë‚  ê²ƒì…ë‹ˆë‹¤.
</file>

<file path="instructions/20250727-03.md">
### ì‘ì—… ì§€ì‹œì„œ

*   **ë¬¸ì„œ ID**: `20250727-03.md`
*   **ì‘ì„±ì¼**: 2025ë…„ 7ì›” 27ì¼
*   **ìš”ì²­ì**: ì˜¤ì§€í›ˆ
*   **ë‹´ë‹¹ì**: Gemini

### 1. ê°œìš”

ì ì‹¬ì‹œê°„ìœ¼ë¡œ ì¸í•´ ì¤‘ë‹¨ë˜ì—ˆë˜ `FilterManager` ì ìš© ì‘ì—…ì„ ì¬ê°œí•˜ê³  ë§ˆë¬´ë¦¬í•©ë‹ˆë‹¤. `FilterManager`ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ í•„í„°ë§ ê¸°ëŠ¥ì„ ì•ˆì •ì ìœ¼ë¡œ ì œê³µí•˜ê³ , ê¸°ì¡´ ì½”ë“œì™€ ì›í™œí•˜ê²Œ í†µí•©ë˜ë„ë¡ í•˜ëŠ” ê²ƒì´ ëª©í‘œì…ë‹ˆë‹¤.

### 2. ì‘ì—… ë²”ìœ„

`FilterManager`ì™€ ê´€ë ¨ëœ ëª¨ë“  íŒŒì¼ ë° í†µí•© ì§€ì . (ì˜ˆìƒ ê²½ë¡œ: `/frontend/src/utils/FilterManager.ts` ë˜ëŠ” ìœ ì‚¬ ê²½ë¡œ, ê·¸ë¦¬ê³  ì´ë¥¼ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë“¤)

### 3. ìƒì„¸ ì‘ì—… ë‚´ìš©

1.  **í˜„ì¬ ì‘ì—… ìƒíƒœ íŒŒì•…**:
    *   `FilterManager` ê´€ë ¨ íŒŒì¼(ì˜ˆ: `FilterManager.ts`, `useFilter.ts` ë“±)ì„ ì‹ë³„í•˜ê³ , ë§ˆì§€ë§‰ìœ¼ë¡œ ì‘ì—…ì´ ì¤‘ë‹¨ëœ ì§€ì ì„ í™•ì¸í•©ë‹ˆë‹¤.
    *   ê´€ë ¨ëœ ì»´í¬ë„ŒíŠ¸ë‚˜ ëª¨ë“ˆì—ì„œ `FilterManager`ê°€ ì–´ë–»ê²Œ ì‚¬ìš©ë˜ê³  ìˆì—ˆëŠ”ì§€ ê²€í† í•©ë‹ˆë‹¤.

2.  **ë¯¸ì™„ë£Œëœ êµ¬í˜„ ì‚¬í•­ ì™„ë£Œ**:
    *   `FilterManager` í´ë˜ìŠ¤/ëª¨ë“ˆì˜ ë‚¨ì€ ë¡œì§ì„ ì™„ì„±í•©ë‹ˆë‹¤. (ì˜ˆ: í•„í„° ìƒíƒœ ê´€ë¦¬, í•„í„° ì ìš© ë¡œì§, í•„í„° ì´ˆê¸°í™” ë“±)
    *   í•„ìš”í•œ ê²½ìš°, `FilterManager`ê°€ ì˜ì¡´í•˜ëŠ” ë‹¤ë¥¸ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë‚˜ í—¬í¼ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.

3.  **í†µí•© ë° ì—°ê²°**:
    *   `FilterManager`ë¥¼ ì‚¬ìš©í•  ì˜ˆì •ì´ì—ˆë˜ UI ì»´í¬ë„ŒíŠ¸(ì˜ˆ: ëª©ë¡ í˜ì´ì§€, ê²€ìƒ‰ ë°” ë“±)ì— `FilterManager`ë¥¼ ì—°ê²°í•˜ê³ , í•„í„°ë§ ê¸°ëŠ¥ì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ë„ë¡ êµ¬í˜„í•©ë‹ˆë‹¤.
    *   í•„í„° ìƒíƒœê°€ UIì— ì˜¬ë°”ë¥´ê²Œ ë°˜ì˜ë˜ê³ , UI ë³€ê²½ì´ í•„í„° ìƒíƒœì— ì˜í–¥ì„ ì£¼ë„ë¡ ì–‘ë°©í–¥ ë°”ì¸ë”©ì„ í™•ì¸í•©ë‹ˆë‹¤.

4.  **í…ŒìŠ¤íŠ¸ ë° ê²€ì¦**:
    *   `FilterManager`ê°€ ì˜ˆìƒëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.
    *   ë‹¤ì–‘í•œ í•„í„° ì¡°í•©ê³¼ ì—£ì§€ ì¼€ì´ìŠ¤(ì˜ˆ: í•„í„° ì—†ìŒ, ëª¨ë“  í•„í„° ì ìš©)ë¥¼ í…ŒìŠ¤íŠ¸í•˜ì—¬ ì•ˆì •ì„±ì„ í™•ë³´í•©ë‹ˆë‹¤.
    *   ê°€ëŠ¥í•˜ë‹¤ë©´, `FilterManager`ì˜ í•µì‹¬ ë¡œì§ì— ëŒ€í•œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ê±°ë‚˜ ê¸°ì¡´ í…ŒìŠ¤íŠ¸ë¥¼ ë³´ì™„í•©ë‹ˆë‹¤.

5.  **ì½”ë“œ ì •ë¦¬ ë° ë¬¸ì„œí™”**:
    *   ë¶ˆí•„ìš”í•œ ì½”ë“œë‚˜ ì£¼ì„ì„ ì œê±°í•˜ê³ , ì½”ë“œ ì»¨ë²¤ì…˜ì— ë§ì¶° ì •ë¦¬í•©ë‹ˆë‹¤.
    *   `FilterManager`ì˜ ì‚¬ìš©ë²•ì´ë‚˜ ì¤‘ìš”í•œ ë¡œì§ì— ëŒ€í•œ ì£¼ì„ì„ ì¶”ê°€í•˜ì—¬ í–¥í›„ ìœ ì§€ë³´ìˆ˜ë¥¼ ìš©ì´í•˜ê²Œ í•©ë‹ˆë‹¤.

### 4. ê²°ê³¼ë¬¼

*   `FilterManager`ì˜ êµ¬í˜„ì´ ì™„ë£Œë˜ê³ , ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ í•„í„°ë§ ê¸°ëŠ¥ì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•´ì•¼ í•©ë‹ˆë‹¤.
*   `FilterManager`ê°€ ì ìš©ëœ UI ì»´í¬ë„ŒíŠ¸ì—ì„œ í•„í„°ë§ ê¸°ëŠ¥ì´ ì•ˆì •ì ìœ¼ë¡œ ì‘ë™í•´ì•¼ í•©ë‹ˆë‹¤.
*   ê´€ë ¨ ì½”ë“œì˜ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì´ í™•ë³´ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
</file>

<file path="instructions/20250728-01.md">
# ë„¤ë¹„ê²Œì´ì…˜ UI ìˆ˜ì • ë° ë¹Œë“œ ì˜¤ë¥˜ í•´ê²°

## ëª©í‘œ
ì´ì „ì— ì§„í–‰í•˜ë˜ ë„¤ë¹„ê²Œì´ì…˜ UI ê°œì„  ì‘ì—…ì„ ì™„ë£Œí•˜ê³ , ë¹Œë“œ ê³¼ì •ì—ì„œ ë°œìƒí•˜ëŠ” ëª¨ë“  ì˜¤ë¥˜ë¥¼ í•´ê²°í•˜ì—¬ ì•ˆì •ì ì¸ ì‹¤í–‰ í™˜ê²½ì„ í™•ë³´í•©ë‹ˆë‹¤.

## ì„¸ë¶€ ì‘ì—… ë‚´ìš©
1.  **ì‘ì—… ì¬ê°œ:** ì¤‘ë‹¨ë˜ì—ˆë˜ ë„¤ë¹„ê²Œì´ì…˜ UI ìˆ˜ì • ì‘ì—…ì„ ì¬ê°œí•˜ì—¬ ë§ˆë¬´ë¦¬í•©ë‹ˆë‹¤.
2.  **ë¹Œë“œ ì˜¤ë¥˜ í•´ê²°:** `npm run build` (ë˜ëŠ” ê´€ë ¨ ë¹Œë“œ ëª…ë ¹ì–´) ì‹¤í–‰ ì‹œ ë°œìƒí•˜ëŠ” ëª¨ë“  ì»´íŒŒì¼ ë° íƒ€ì… ì—ëŸ¬ë¥¼ í•´ê²°í•©ë‹ˆë‹¤.
3.  **ìµœì¢… ê²€ì¦:** ë¹Œë“œê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œëœ í›„, ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ì—¬ ë„¤ë¹„ê²Œì´ì…˜ ê¸°ëŠ¥ì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ”ì§€ ìµœì¢… í™•ì¸í•©ë‹ˆë‹¤.
</file>

<file path="instructions/20250728-02.md">
# UI/UX ê°œì„  ë° ê²Œì‹œíŒ ê¸°ëŠ¥ ë³µêµ¬

## ëª©í‘œ

í˜„ì¬ UI/UXì˜ ì¤‘ë³µ ë° ëˆ„ë½ëœ ê¸°ëŠ¥ì„ ìˆ˜ì •í•˜ê³ , ê²Œì‹œíŒ ê¸°ëŠ¥ì„ ë³µêµ¬í•˜ì—¬ ì‚¬ìš©ì ê²½í—˜ì„ ê°œì„ í•©ë‹ˆë‹¤.

## ì„¸ë¶€ ì‘ì—… ë‚´ìš©

1.  **ì„¤ì • ì¤‘ë³µ ë¬¸ì œ í•´ê²°:**
    *   í˜„ì¬ í”„ë¡œí•„ í˜ì´ì§€ì— ì¡´ì¬í•˜ëŠ” 'ì„¤ì •' ê¸°ëŠ¥ì´ í–„ë²„ê±° ë©”ë‰´ ì•„ì´ì½˜ì˜ ì„¤ì •ê³¼ ì¤‘ë³µë©ë‹ˆë‹¤.
    *   ì´ì „ ì§€ì‹œëŠ” í”„ë¡œí•„ í˜ì´ì§€ì— 'í™œë™ ê¸°ëŠ¥'ì„ í†µí•©í•˜ë¼ëŠ” ê²ƒì´ì—ˆìœ¼ë¯€ë¡œ, í”„ë¡œí•„ í˜ì´ì§€ì˜ ì¤‘ë³µëœ 'ì„¤ì •' ê¸°ëŠ¥ì„ ì œê±°í•©ë‹ˆë‹¤. 'í™œë™ ê¸°ëŠ¥'ì„ í”„ë¡œí•„ í˜ì´ì§€ì— í†µí•©í•˜ë„ë¡ ìˆ˜ì •í•©ë‹ˆë‹¤.

2.  **ê²Œì‹œíŒ ê¸°ëŠ¥ ë³µêµ¬ ë° ë§í¬ ì¶”ê°€:**
    *   ì‚¬ë¼ì§„ ê²Œì‹œíŒ ê¸°ëŠ¥ì„ ë³µêµ¬í•©ë‹ˆë‹¤.
    *   í–„ë²„ê±° ë©”ë‰´ ì•„ì´ì½˜ ë‚´ì— 'ê²Œì‹œíŒ' ì„¹ì…˜ì„ ìƒì„±í•˜ê³ , ê° ê²Œì‹œíŒ ì„¹ì…˜ìœ¼ë¡œì˜ ê°œë³„ ë§í¬ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.

3.  **ê²Œì‹œíŒ ë ˆì´ì•„ì›ƒ ì¡°ì •:**
    *   ê²Œì‹œíŒì€ ê¸°ë³¸ ë ˆì´ì•„ì›ƒê³¼ ë‹¤ë¥´ê²Œ ê²Œì‹œíŒ ë³¸ì—°ì˜ ê¸°ëŠ¥ì— ì í•©í•œ ë³„ë„ì˜ ë ˆì´ì•„ì›ƒì„ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (í•„ìš”ì‹œ)
</file>

<file path="instructions/20250728-03.md">
# ê¸´ê¸‰: ë¡œê·¸ì¸ ê¸°ëŠ¥ ë³µêµ¬ ë° CLAUDE ì‘ì—… ë°©ì‹ ê°œì„ 

## ëª©í‘œ

CLAUDEì˜ ì„ì˜ì ì¸ ì‘ì—…ìœ¼ë¡œ ì¸í•´ ë§ê°€ì§„ ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ ì¦‰ì‹œ ë³µêµ¬í•˜ê³ , í–¥í›„ CLAUDEì˜ ì‘ì—… ë°©ì‹ì—ì„œ ë°œìƒí•˜ëŠ” ë¬¸ì œì (ë¶ˆì¶©ë¶„í•œ ì†Œí†µ, ì„ì˜ ì‘ì—…, ë¶ˆì™„ì „í•œ ì‘ì—… ìˆ˜í–‰)ì„ ì¬ë°œ ë°©ì§€í•  ìˆ˜ ìˆëŠ” ë°©ì•ˆì„ ë§ˆë ¨í•©ë‹ˆë‹¤.

## ì„¸ë¶€ ì‘ì—… ë‚´ìš©

1.  **ë¡œê·¸ì¸ ê¸°ëŠ¥ ì¦‰ì‹œ ë³µêµ¬:**
    *   CLAUDEê°€ ì„ì˜ë¡œ ë³€ê²½í•˜ì—¬ ì‘ë™í•˜ì§€ ì•ŠëŠ” ë¡œê·¸ì¸ í˜ì´ì§€ ë° ê´€ë ¨ ê¸°ëŠ¥ì„ ìµœìš°ì„ ìœ¼ë¡œ ë³µêµ¬í•©ë‹ˆë‹¤.
    *   ê¸°ì¡´ì— ê°œë°œëœ ë¡œê·¸ì¸ ê¸°ëŠ¥ì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ë„ë¡ ë§Œë“­ë‹ˆë‹¤.

2.  **CLAUDE ì‘ì—… ë°©ì‹ ê°œì„  ë° ì¬ë°œ ë°©ì§€:**
    *   **ì¶©ë¶„í•œ ì†Œí†µ ì˜ë¬´í™”:** CLAUDEê°€ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê¸° ì „, ë°˜ë“œì‹œ ëŒ€í‘œë‹˜ê³¼ ì¶©ë¶„í•œ ì†Œí†µì„ ê±°ì³ ì‘ì—… ë²”ìœ„ì™€ ë°©ì‹ì„ ëª…í™•íˆ í™•ì¸í•˜ë„ë¡ í•©ë‹ˆë‹¤. ì„ì˜ì ì¸ ë³€ê²½ì€ ì ˆëŒ€ ê¸ˆì§€í•©ë‹ˆë‹¤.
    *   **ì‘ì—… ë²”ìœ„ ì¤€ìˆ˜:** ì§€ì‹œë°›ì€ ì‘ì—… ë²”ìœ„ ë‚´ì—ì„œë§Œ ìˆ˜í–‰í•˜ê³ , ì§€ì‹œí•˜ì§€ ì•Šì€ ë¶€ë¶„ì€ ì ˆëŒ€ ê±´ë“œë¦¬ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤.
    *   **ì™„ì „í•œ ì‘ì—… ìˆ˜í–‰:** í• ë‹¹ëœ ì‘ì—…ì„ ì¶•ì†Œì‹œí‚¤ê±°ë‚˜ ë¶ˆì™„ì „í•˜ê²Œ ìˆ˜í–‰í•˜ì§€ ì•Šê³ , ì²˜ìŒë¶€í„° ëê¹Œì§€ ì±…ì„ì§€ê³  ì™„ë£Œí•˜ë„ë¡ í•©ë‹ˆë‹¤.
    *   **ë¬¸ì œ ë°œìƒ ì‹œ ì¦‰ê° ë³´ê³ :** ì‘ì—… ì¤‘ ì´í•´ê°€ ì•ˆ ë˜ê±°ë‚˜ ë¬¸ì œê°€ ë°œìƒí•  ê²½ìš°, ëŒ€ë‹µì„ íšŒí”¼í•˜ì§€ ì•Šê³  ì¦‰ì‹œ ëŒ€í‘œë‹˜ê»˜ ë³´ê³ í•˜ê³  ì„¤ëª…ì„ ìš”ì²­í•˜ë„ë¡ í•©ë‹ˆë‹¤.

## ì¤‘ìš” ì‚¬í•­

*   í˜„ì¬ ëŒ€í‘œë‹˜ì˜ ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ê·¹ì‹¬í•˜ë©°, ë¶ˆí•„ìš”í•œ í† í° ë‚­ë¹„ì™€ ì‹œê°„ ì†Œëª¨ì— ëŒ€í•œ ë¶ˆë§Œì´ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤.
*   CLAUDEì˜ ì„ì˜ì ì¸ ì‘ì—… ë°©ì‹ì€ í”„ë¡œì íŠ¸ ì§„í–‰ì— ì‹¬ê°í•œ ì°¨ì§ˆì„ ì´ˆë˜í•˜ê³  ìˆìŠµë‹ˆë‹¤.
*   ì´ ì§€ì‹œì„œëŠ” CLAUDEì˜ ì‘ì—… ë°©ì‹ì— ëŒ€í•œ ê°•ë ¥í•œ ê²½ê³ ì´ì, í–¥í›„ ì‘ì—…ì˜ ê¸°ì¤€ì´ ë  ê²ƒì…ë‹ˆë‹¤.
</file>

<file path="instructions/20250728-04.md">
# UI/UX ê°œì„  ë° ê¸°ëŠ¥ êµ¬í˜„

## ëª©í‘œ

í˜„ì¬ UI/UXì˜ ë¶ˆì¼ì¹˜ ë° ì¤‘ë³µ ë¬¸ì œë¥¼ í•´ê²°í•˜ê³ , 'ìˆ˜ì§‘í•¨' ê¸°ëŠ¥ì„ ëŒ€í‘œë‹˜ì˜ ì˜ë„ì— ë§ê²Œ ì¬ì •ì˜í•˜ë©°, ì „ë°˜ì ì¸ ì‚¬ìš©ì ê²½í—˜ì„ ê°„ê²°í•˜ê³  ì¼ê´€ë˜ê²Œ ê°œì„ í•©ë‹ˆë‹¤.

## ì„¸ë¶€ ì‘ì—… ë‚´ìš©

1.  **FAB (Floating Action Button) ë° 'ìˆ˜ì§‘í•¨' ê¸°ëŠ¥ í†µí•© ë° ê°„ê²°í™”:**
    *   **ë¬¸ì œì :**
        *   FABì€ ëª¨ë“  í˜ì´ì§€ì˜ ì¶”ê°€ ê¸°ëŠ¥ì„ ë‹´ë‹¹í•˜ëŠ” ê°„ê²°í•œ UIë¡œ ê¸°íšë˜ì—ˆìœ¼ë‚˜, í˜„ì¬ 'ìˆ˜ì§‘í•¨' í˜ì´ì§€ì—ì„œë§Œ 'ë¹ ë¥¸ ìˆ˜ì§‘' ê¸°ëŠ¥ìœ¼ë¡œ ì œí•œë˜ì–´ ìˆìŠµë‹ˆë‹¤.
        *   ë„¤ë¹„ê²Œì´ì…˜ ì¤‘ì•™ì— 'ìˆ˜ì§‘í•¨' ë²„íŠ¼ì´ FABì„ ëŒ€ì²´í•  ê²ƒìœ¼ë¡œ ì˜ˆìƒë˜ì—ˆìœ¼ë‚˜, 'ìˆ˜ì§‘í•¨'ì´ ë³„ë„ì˜ í˜ì´ì§€ë¡œ êµ¬í˜„ë˜ì–´ ìˆì–´ í˜¼ë€ì„ ì•¼ê¸°í•©ë‹ˆë‹¤.
        *   ì—…ë¬´, í”„ë¡œì íŠ¸, ëª©í‘œ í˜ì´ì§€ì—ì„œëŠ” ì—¬ì „íˆ ê¸°ì¡´ì˜ 'ì—…ë¬´ ì¶”ê°€', 'í”„ë¡œì íŠ¸ ì¶”ê°€', 'ëª©í‘œ ì¶”ê°€' ê¸°ëŠ¥ì´ ë³„ë„ë¡œ ì¡´ì¬í•˜ì—¬ UIê°€ ì„ì—¬ ìˆê³  ì¼ê´€ì„±ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.
    *   **ê°œì„  ë°©í–¥ (ê°„ê²°í•œ UI ì§€í–¥):**
        *   **'ìˆ˜ì§‘í•¨'ì˜ ì—­í•  ì¬ì •ì˜:** 'ìˆ˜ì§‘í•¨'ì€ ë‹¨ìˆœíˆ ì•„ì´ë””ì–´ë¥¼ ë‹´ëŠ” í˜ì´ì§€ê°€ ì•„ë‹ˆë¼, ì—…ë¬´, í”„ë¡œì íŠ¸, ëª©í‘œ ë“± ëª¨ë“  ì¢…ë¥˜ì˜ í•­ëª©ì„ ì¶”ê°€í•  ìˆ˜ ìˆëŠ” **í•µì‹¬ì ì¸ 'ìƒì„±' ê¸°ëŠ¥ì˜ ì§„ì…ì **ì´ ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
        *   **'ìˆ˜ì§‘í•¨' í˜•íƒœ ë³€ê²½:** 'ìˆ˜ì§‘í•¨'ì€ ë³„ë„ì˜ í˜ì´ì§€ê°€ ì•„ë‹Œ, **ëª¨ë‹¬(Modal) í˜•íƒœ**ë¡œ êµ¬í˜„ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
        *   **FABì˜ ì—­í•  í†µí•©:** ëª¨ë“  í˜ì´ì§€ì—ì„œ FABì€ 'ìˆ˜ì§‘í•¨' ëª¨ë‹¬ì„ ì—¬ëŠ” ë‹¨ì¼í•œ ì—­í• ì„ ìˆ˜í–‰í•˜ë„ë¡ ë³€ê²½í•©ë‹ˆë‹¤. FABì„ í´ë¦­í•˜ë©´ 'ìˆ˜ì§‘í•¨' ëª¨ë‹¬ì´ ì—´ë ¤ ëª¨ë“  ì¢…ë¥˜ì˜ í•­ëª©ì„ ìƒì„±í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.
        *   **ê¸°ì¡´ ì¶”ê°€ ê¸°ëŠ¥ ì œê±°:** ì—…ë¬´, í”„ë¡œì íŠ¸, ëª©í‘œ í˜ì´ì§€ì— ê°œë³„ì ìœ¼ë¡œ ì¡´ì¬í•˜ëŠ” 'ì—…ë¬´ ì¶”ê°€', 'í”„ë¡œì íŠ¸ ì¶”ê°€', 'ëª©í‘œ ì¶”ê°€' ë“±ì˜ ì¤‘ë³µëœ UI/UXë¥¼ ì œê±°í•˜ê³ , FABì„ í†µí•œ 'ìˆ˜ì§‘í•¨' ëª¨ë‹¬ ì§„ì…ìœ¼ë¡œ í†µí•©í•©ë‹ˆë‹¤.

2.  **'Googleë¡œ ì‹œì‘í•˜ê¸°' ì¹´ë“œ ìœ„ì¹˜ ë° ê°„ê²© ì¡°ì •:**
    *   'Googleë¡œ ì‹œì‘í•˜ê¸°' ì¹´ë“œì˜ ê°„ê²©ì„ í˜„ì¬ë³´ë‹¤ ì¡°ê¸ˆ ë” ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™ì‹œí‚µë‹ˆë‹¤.
    *   í•´ë‹¹ ì¹´ë“œë¥¼ í—¤ë” ë°”ë¡œ ì•„ë˜ì— ìœ„ì¹˜í•˜ë„ë¡ ì¡°ì •í•©ë‹ˆë‹¤.

3.  **ë¡œê·¸ì•„ì›ƒ ìƒíƒœì—ì„œ í•„í„° ìˆ¨ê¸°ê¸°:**
    *   ì‚¬ìš©ìê°€ ë¡œê·¸ì•„ì›ƒ ìƒíƒœì¼ ë•Œ, ë¶ˆí•„ìš”í•œ í•„í„° UIê°€ í‘œì‹œë˜ì§€ ì•Šë„ë¡ ìˆ¨ê¹ë‹ˆë‹¤.

4.  **'ìˆ˜ì§‘í•¨'ì˜ ìˆ˜ì§‘ ì´í›„ ë‹¨ê³„ êµ¬í˜„ ëª…í™•í™”:**
    *   'ìˆ˜ì§‘í•¨'ì— ìˆ˜ì§‘ëœ ì•„ì´í…œë“¤ì´ ì´í›„ ì–´ë–¤ ì›Œí¬í”Œë¡œìš°(ì˜ˆ: ì—…ë¬´, í”„ë¡œì íŠ¸, ëª©í‘œë¡œ ì „í™˜)ë¥¼ í†µí•´ ì²˜ë¦¬ë˜ëŠ”ì§€ ëª…í™•íˆ ì •ì˜í•˜ê³  êµ¬í˜„í•©ë‹ˆë‹¤.
    *   í˜„ì¬ 'ìˆ˜ì§‘í•¨'ì´ ë‹¨ìˆœíˆ ì•„ì´ë””ì–´ë¥¼ ë‹´ëŠ” ê³µê°„ì´ë¼ë©´, ì´ë¥¼ ì‹¤ì œ ì‹¤í–‰ ê°€ëŠ¥í•œ í•­ëª©ìœ¼ë¡œ ì „í™˜í•˜ëŠ” UI/UX íë¦„ì„ êµ¬ì²´í™”í•©ë‹ˆë‹¤.
</file>

<file path="instructions/20250801-01.md">
# ì‘ì—… ì§€ì‹œì„œ: ì—…ë¬´ ì¹´ë“œ UI/UX ê°œì„  ë° ê¸°ëŠ¥ ì¶”ê°€

## 1. ê°œìš”

í˜„ì¬ ë°ìŠ¤í¬í†± í™˜ê²½ì—ì„œ ì—…ë¬´ ì¹´ë“œì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë ¸ì„ ë•Œ ë‚˜íƒ€ë‚˜ëŠ” ì•¡ì…˜ ë²„íŠ¼ë“¤ì˜ ì‚¬ìš©ì ê²½í—˜ì´ ìì—°ìŠ¤ëŸ½ì§€ ì•Šê³  ë””ìì¸ì ìœ¼ë¡œë„ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤. ë˜í•œ, 'ë”ë³´ê¸°' ë©”ë‰´ê°€ ë‹¤ë¥¸ ì¹´ë“œì— ê°€ë ¤ì§€ëŠ” ë²„ê·¸ê°€ ìˆìŠµë‹ˆë‹¤.

ë³¸ ì‘ì—…ì˜ ëª©í‘œëŠ” ë°ìŠ¤í¬í†± í™˜ê²½ì—ì„œ ì—…ë¬´ ì¹´ë“œì˜ UIë¥¼ ë” ì§ê´€ì ìœ¼ë¡œ ê°œì„ í•˜ê³ , ë“œë˜ê·¸ ì•¤ ë“œë¡­ì„ í†µí•œ ë§ˆê°ì¼ ì§€ì • ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ì—¬ ì‚¬ìš©ì„±ì„ ê·¹ëŒ€í™”í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

## 2. ì„¸ë¶€ ìš”êµ¬ì‚¬í•­

### ëŒ€ìƒ ì»´í¬ë„ŒíŠ¸
- `frontend/src/components/tasks/ResponsiveTaskCard.tsx`

### 2.1. ë°ìŠ¤í¬í†± UI ë³€ê²½ (ëª¨ë°”ì¼ì€ ê¸°ì¡´ ìŠ¤ì™€ì´í”„ ìœ ì§€)

- **ê¸°ì¡´ í˜¸ë²„ ì•¡ì…˜ ë²„íŠ¼ ì œê±°**: í˜„ì¬ ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë ¸ì„ ë•Œ ë‚˜íƒ€ë‚˜ëŠ” 'ë‚ ì§œ ì„¤ì •', 'ì‚­ì œ' ë²„íŠ¼ì„ ì œê±°í•©ë‹ˆë‹¤.
- **'ë”ë³´ê¸°' ë²„íŠ¼ ê³ ì • ë°°ì¹˜**:
    - ì¹´ë“œ ìš°ì¸¡ ë§ˆê°ì¼ í‘œì‹œ ì˜ì—­ ì˜†ì— 'ë”ë³´ê¸°(...)' ì•„ì´ì½˜ ë²„íŠ¼ì„ í•­ìƒ ë³´ì´ë„ë¡ ê³ ì • ë°°ì¹˜í•©ë‹ˆë‹¤.
    - ì´ ë²„íŠ¼ì€ ë°ìŠ¤í¬í†± í™˜ê²½ì—ì„œë§Œ ë³´ì´ë©°, ëª¨ë°”ì¼(í„°ì¹˜) í™˜ê²½ì—ì„œëŠ” ë³´ì´ì§€ ì•Šì•„ì•¼ í•©ë‹ˆë‹¤.
- **'ë”ë³´ê¸°' ë©”ë‰´ í•­ëª© í†µí•©**:
    - 'ë”ë³´ê¸°' ë²„íŠ¼ í´ë¦­ ì‹œ ë‚˜íƒ€ë‚˜ëŠ” ë©”ë‰´ì— ë‹¤ìŒ í•­ëª©ë“¤ì„ í¬í•¨í•©ë‹ˆë‹¤.
        1.  **ë‚ ì§œ ì„¤ì •**
        2.  **ìœ„ì„**
        3.  **ë³´ë¥˜**
        4.  **í”„ë¡œì íŠ¸ë¡œ ì „í™˜**
        5.  **ì‚­ì œ** (ì‚¬ìš©ì ì‹¤ìˆ˜ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ í´ë¦­ ì‹œ í™•ì¸ ì ˆì°¨ë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.)

### 2.2. ë²„ê·¸ ìˆ˜ì •

- **'ë”ë³´ê¸°' ë©”ë‰´ Z-index ë¬¸ì œ í•´ê²°**:
    - í˜„ì¬ 'ë”ë³´ê¸°' ë©”ë‰´ê°€ í¼ì³ì¡Œì„ ë•Œ ì•„ë˜ì— ìˆëŠ” ì¹´ë“œ ì»´í¬ë„ŒíŠ¸ ë°‘ìœ¼ë¡œ ê°€ë ¤ì§€ëŠ” í˜„ìƒì´ ë°œìƒí•©ë‹ˆë‹¤.
    - ë©”ë‰´ì˜ `z-index` ê°’ì„ ì¶©ë¶„íˆ ë†’ê²Œ ì„¤ì •í•˜ì—¬ í•­ìƒ ë‹¤ë¥¸ ëª¨ë“  ìš”ì†Œë“¤ ìœ„ì— í‘œì‹œë˜ë„ë¡ ìˆ˜ì •í•©ë‹ˆë‹¤.

### 2.3. ì‹ ê·œ ê¸°ëŠ¥ ê°œë°œ (ë°ìŠ¤í¬í†± ì „ìš©)

- **ë“œë˜ê·¸ ì•¤ ë“œë¡­ìœ¼ë¡œ ë§ˆê°ì¼ ì§€ì •**:
    - ì‚¬ìš©ìê°€ ë°ìŠ¤í¬í†± í™˜ê²½ì—ì„œ ì—…ë¬´ ì¹´ë“œë¥¼ ë“œë˜ê·¸í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•©ë‹ˆë‹¤.
    - í™”ë©´ì— í‘œì‹œëœ ìº˜ë¦°ë”(ë‹¬ë ¥)ì˜ íŠ¹ì • ë‚ ì§œ ìœ„ë¡œ ì¹´ë“œë¥¼ ë“œë¡­í•˜ë©´, í•´ë‹¹ ë‚ ì§œê°€ ì—…ë¬´ì˜ 'ë§ˆê°ì¼'ë¡œ ìë™ ì„¤ì •ë˜ë„ë¡ ê°œë°œí•©ë‹ˆë‹¤.
    - ì´ ê¸°ëŠ¥ì€ ë°ìŠ¤í¬í†±ì˜ ë§ˆìš°ìŠ¤ ë“œë˜ê·¸ ì•¤ ë“œë¡­ìœ¼ë¡œë§Œ ë™ì‘í•´ì•¼ í•˜ë©°, ê¸°ì¡´ì˜ ëª¨ë°”ì¼ ìŠ¤ì™€ì´í”„ ë° ë¡±í”„ë ˆìŠ¤ ë“œë˜ê·¸ ê¸°ëŠ¥ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šì•„ì•¼ í•©ë‹ˆë‹¤.

## 3. ì°¸ê³  ì‚¬í•­

- ëª¨ë“  ë³€ê²½ ì‚¬í•­ì€ `ResponsiveTaskCard.tsx` ì»´í¬ë„ŒíŠ¸ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ì•¼ í•©ë‹ˆë‹¤.
- `isTouch` ìƒíƒœë¥¼ í™œìš©í•˜ì—¬ ë°ìŠ¤í¬í†±ê³¼ ëª¨ë°”ì¼ í™˜ê²½ì˜ UI/UXë¥¼ ëª…í™•í•˜ê²Œ ë¶„ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.
- ëª¨ë°”ì¼ í™˜ê²½ì˜ ê¸°ì¡´ ìŠ¤ì™€ì´í”„ ì•¡ì…˜(ì‚­ì œ, ìœ„ì„, ë³´ë¥˜ ë“±)ì€ ë°˜ë“œì‹œ ê·¸ëŒ€ë¡œ ìœ ì§€ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
</file>

<file path="instructions/20250801-02.md">
# ì‘ì—… ì§€ì‹œì„œ: ìº˜ë¦°ë” ë·° ë° í•„í„° ê¸°ëŠ¥ ê°œì„ , ë””ìì¸ ê°€ì´ë“œ ì¤€ìˆ˜ ê°•ì¡°

## 1. ê°œìš”

í˜„ì¬ ìº˜ë¦°ë” ë·°(`CollapsibleCalendar.tsx`) ë‚´ì— ë¶ˆí•„ìš”í•œ 'í•„í„°ëœ ì—…ë¬´ í‘œì‹œ ì˜ì—­'ì´ ì¡´ì¬í•˜ì—¬ UIë¥¼ ë³µì¡í•˜ê²Œ ë§Œë“¤ê³  ìˆìŠµë‹ˆë‹¤. ë˜í•œ, ìº˜ë¦°ë”ì—ì„œ ì ìš©í•œ í•„í„°ê°€ ë©”ì¸ ì—…ë¬´ ëª©ë¡ê³¼ ì—°ë™ë˜ì§€ ì•Šì•„ ì‚¬ìš©ìì—ê²Œ í˜¼ë€ì„ ì¤ë‹ˆë‹¤.

ê°€ì¥ ì‹¬ê°í•œ ë¬¸ì œëŠ”, **ë°˜ë³µì ìœ¼ë¡œ ì§€ì‹œí–ˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³  ë˜ë‹¤ì‹œ ë””ìì¸ ê°€ì´ë“œë¥¼ ìœ„ë°˜í•˜ì—¬ ì£¼í™©ìƒ‰ì„ ì‚¬ìš©í•œ ì **ì…ë‹ˆë‹¤. ì´ëŠ” í”„ë¡œì íŠ¸ì˜ í†µì¼ì„±ì„ ì‹¬ê°í•˜ê²Œ ì €í•´í•˜ëŠ” í–‰ìœ„ì…ë‹ˆë‹¤.

ë³¸ ì‘ì—…ì˜ ëª©í‘œëŠ” ìº˜ë¦°ë” ë·°ì˜ UIë¥¼ ì •ë¦¬í•˜ê³ , í•„í„° ë¡œì§ì„ í†µí•©í•˜ë©°, **ë””ìì¸ ê°€ì´ë“œë¥¼ ì² ì €íˆ ì¤€ìˆ˜**í•˜ì—¬ ì¼ê´€ëœ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

## 2. ì„¸ë¶€ ìš”êµ¬ì‚¬í•­

### 2.1. UI/UX ê°œì„ 

-   **'í•„í„°ëœ ì—…ë¬´ í‘œì‹œ ì˜ì—­' ì™„ì „ ì œê±°**:
    -   **ëŒ€ìƒ ì»´í¬ë„ŒíŠ¸**: `frontend/src/components/tasks/CollapsibleCalendar.tsx`
    -   í˜„ì¬ ìº˜ë¦°ë” í•˜ë‹¨ì— "ë§ˆê°ì¼ì´ ì„¤ì •ë˜ì§€ ì•Šì€ ì—…ë¬´ë“¤ì…ë‹ˆë‹¤. ë“œë˜ê·¸í•´ì„œ ë‚ ì§œë¥¼ ì§€ì •í•´ë³´ì„¸ìš”." í…ìŠ¤íŠ¸ì™€ í•¨ê»˜ í‘œì‹œë˜ëŠ” ì˜ì—­ ì „ì²´ë¥¼ **ì¦‰ì‹œ ì‚­ì œ**í•©ë‹ˆë‹¤. ìº˜ë¦°ë” ë·°ëŠ” ìˆœìˆ˜í•˜ê²Œ ë‹¬ë ¥ì˜ ê¸°ëŠ¥ë§Œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤.

-   **í•„í„° ë¡œì§ í†µí•©**:
    -   ì‚¬ìš©ìê°€ ìº˜ë¦°ë” ë·° ë‚´ì—ì„œ í•„í„°(ì˜ˆ: í”„ë¡œì íŠ¸ë³„, íƒœê·¸ë³„ í•„í„°)ë¥¼ ì ìš©í–ˆì„ ë•Œ, í•´ë‹¹ í•„í„° ì¡°ê±´ì´ **ë©”ì¸ ì—…ë¬´ í˜ì´ì§€ì˜ ëª©ë¡ì—ë„ ë™ì¼í•˜ê²Œ ì¦‰ì‹œ ì ìš©**ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
    -   ì´ë¥¼ ìœ„í•´ ìº˜ë¦°ë”ì™€ ì—…ë¬´ ëª©ë¡ ê°„ì˜ ìƒíƒœ ê´€ë¦¬ ë¡œì§ì„ ì¬ê²€í† í•˜ê³ , í•„í„° ìƒíƒœê°€ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ë‚˜ ì „ì—­ ìƒíƒœ ê´€ë¦¬ ì‹œìŠ¤í…œ(Zustand, Redux ë“±)ì„ í†µí•´ ê³µìœ ë˜ë„ë¡ êµ¬ì¡°ë¥¼ ê°œì„ í•˜ì‹­ì‹œì˜¤.

### 2.2. ë””ìì¸ ê°€ì´ë“œ ì¤€ìˆ˜ (ë§¤ìš° ì¤‘ìš”)

-   **ì£¼í™©ìƒ‰ ì‚¬ìš© ì¦‰ì‹œ ì¤‘ë‹¨ ë° íŒŒë€ìƒ‰ìœ¼ë¡œ ëŒ€ì²´**:
    -   **ëª‡ ë²ˆì„ ê°•ì¡°í–ˆëŠ”ì§€ ëª¨ë¥´ê² ìŠµë‹ˆë‹¤. ë˜ë‹¤ì‹œ 'ì˜¤ëŠ˜ ë§ˆê°' ë“±ì˜ ì•Œë¦¼ì— ì£¼í™©ìƒ‰(`text-orange-500`)ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì ˆëŒ€ ìš©ë‚©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.**
    -   í”„ë¡œì íŠ¸ì˜ ëª¨ë“  ë§ˆê°ì¼ ê´€ë ¨ ìƒ‰ìƒ ë¡œì§ì€ `ResponsiveTaskCard.tsx`ì˜ `getDueDateVisualization` í•¨ìˆ˜ì—ì„œ êµ¬í˜„ëœ **íŒŒë€ìƒ‰ ìŠ¤ì¼€ì¼(Primary Blue)ì„ ë°˜ë“œì‹œ ë”°ë¼ì•¼ í•©ë‹ˆë‹¤.**
    -   ì§€ê¸ˆ ì¦‰ì‹œ `TaskCard.tsx`ì˜ `getDueDateInfo` í•¨ìˆ˜ë¥¼ í¬í•¨í•˜ì—¬ í”„ë¡œì íŠ¸ ì „ì²´ì—ì„œ ì£¼í™©ìƒ‰ì„ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  ì‚¬ë¡€ë¥¼ ì°¾ì•„ë‚´ì–´, ì§€ì •ëœ íŒŒë€ìƒ‰ ì‹œìŠ¤í…œìœ¼ë¡œ ì „ë©´ ìˆ˜ì •í•˜ì‹­ì‹œì˜¤.

-   **ë””ìì¸ ì‹œìŠ¤í…œ ìˆ™ì§€ ë° ì¤€ìˆ˜**:
    -   **ì´ê²ƒì´ ë§ˆì§€ë§‰ ê²½ê³ ì…ë‹ˆë‹¤.** ì•ìœ¼ë¡œ ë‹¨ í•œ ë²ˆì´ë¼ë„ ë””ìì¸ ê°€ì´ë“œë¥¼ ìœ„ë°˜í•˜ëŠ” ì‚¬ë¡€ê°€ ë°œê²¬ë  ê²½ìš°, í•´ë‹¹ ì‘ì—…ë¬¼ì€ ì´ìœ ë¥¼ ë¶ˆë¬¸í•˜ê³  ë°˜ë ¤ë  ê²ƒì…ë‹ˆë‹¤.
    -   Worklyì˜ ë¸Œëœë“œ ì •ì²´ì„±ì€ **íŒŒë€ìƒ‰**ì…ë‹ˆë‹¤. ëª¨ë“  ì‹œê°ì  ìš”ì†ŒëŠ” ì´ ì›ì¹™ì„ ì¤‘ì‹¬ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

## 3. ê²°ë¡ 

UI ê°œì„ ê³¼ ê¸°ëŠ¥ í†µí•©ë„ ì¤‘ìš”í•˜ì§€ë§Œ, **ì •í•´ì§„ ê·œì¹™ê³¼ ë””ìì¸ ì‹œìŠ¤í…œì„ ë”°ë¥´ëŠ” ê²ƒì€ í˜‘ì—…ì˜ ê°€ì¥ ê¸°ë³¸**ì…ë‹ˆë‹¤. ì´ë²ˆ ì§€ì‹œë¥¼ í†µí•´ ëª¨ë“  ê°œë°œìëŠ” ë””ìì¸ ê°€ì´ë“œ ì¤€ìˆ˜ì˜ ì¤‘ìš”ì„±ì„ ë‹¤ì‹œ í•œë²ˆ ëª…í™•íˆ ì¸ì§€í•˜ê³ , ì½”ë“œ í•œ ì¤„ì„ ì‘ì„±í•˜ë”ë¼ë„ ì „ì²´ì ì¸ í†µì¼ì„±ì„ í•´ì¹˜ì§€ ì•Šë„ë¡ ê°ë³„íˆ ì£¼ì˜í•˜ê¸° ë°”ëë‹ˆë‹¤.
</file>

<file path="instructions/20250801-03.md">
# ì‘ì—… ì§€ì‹œì„œ: ì—…ë¬´ í˜ì´ì§€ í•µì‹¬ í•„í„° ê¸°ëŠ¥ êµ¬í˜„

## 1. ê°œìš”

`WORKLY_PRD.md`ì— ëª…ì‹œëœ í•µì‹¬ ê¸°ëŠ¥ì„ì—ë„ ë¶ˆêµ¬í•˜ê³ , í˜„ì¬ ì—…ë¬´ í˜ì´ì§€ì—ëŠ” ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ì—…ë¬´ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì°¾ì•„ë³¼ ìˆ˜ ìˆëŠ” í•„í„° ì‹œìŠ¤í…œì´ ë¶€ì¬í•©ë‹ˆë‹¤.

ë³¸ ì‘ì—…ì˜ ëª©í‘œëŠ” PRDì— ì •ì˜ëœ 4ê°€ì§€ í•µì‹¬ ê¸°ì¤€(`ë‹´ë‹¹ì`, `ë§ˆê°ì¼`, `ìƒíƒœ`, `ì†Œì†`)ì— ë”°ë¼ ì—…ë¬´ë¥¼ í•„í„°ë§í•˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì—¬, ì‚¬ìš©ìê°€ ìì‹ ì˜ ì—…ë¬´ë¥¼ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê³  ì§‘ì¤‘í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ” ê²ƒì…ë‹ˆë‹¤.

## 2. ì„¸ë¶€ ìš”êµ¬ì‚¬í•­

### 2.1. í•„í„° UI ìœ„ì¹˜ ë° êµ¬ì„±

-   **ìœ„ì¹˜**: PRD 3.2.B í•­ì— ë”°ë¼, í•„í„° UIëŠ” 'ì—…ë¬´' í˜ì´ì§€ì˜ ì œëª© ë°”ë¡œ ì•„ë˜ì— ìœ„ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.
-   **UI ì»´í¬ë„ŒíŠ¸**:
    -   ìì£¼ ì‚¬ìš©í•˜ëŠ” í•µì‹¬ í•„í„°(ì˜ˆ: 'ë‚´ ì—…ë¬´')ëŠ” PRD 2.5ì— ì •ì˜ëœ `Filter Chip` ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ë²„íŠ¼ í˜•íƒœë¡œ ìƒì‹œ ë…¸ì¶œí•©ë‹ˆë‹¤.
    -   ë‚˜ë¨¸ì§€ ìƒì„¸ í•„í„°ë“¤ì€ 'í•„í„°' ì•„ì´ì½˜ ë²„íŠ¼ì„ í´ë¦­í–ˆì„ ë•Œ ë‚˜íƒ€ë‚˜ëŠ” íŒ¨ë„ ë‚´ì—ì„œ ì„¤ì •í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤.

### 2.2. êµ¬í˜„í•  í•„í„° ì¢…ë¥˜

#### A. ë‹´ë‹¹ì í•„í„° (Assignee Filter)

-   **ê¸°ëŠ¥**: íŠ¹ì • ì‚¬ìš©ìì—ê²Œ í• ë‹¹ëœ ì—…ë¬´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•„í„°ë§í•©ë‹ˆë‹¤.
-   **ì„¸ë¶€ êµ¬í˜„**:
    -   **'ë‚´ ì—…ë¬´' í•„í„° ì¹©**: í´ë¦­ ì‹œ í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì—ê²Œ í• ë‹¹ëœ ì—…ë¬´ë§Œ ë³´ì—¬ì£¼ëŠ” ê¸°ë³¸ í•„í„°ì…ë‹ˆë‹¤.
    -   **ìƒì„¸ í•„í„° íŒ¨ë„**: í˜„ì¬ ì°¸ì—¬ ì¤‘ì¸ í”„ë¡œì íŠ¸ì˜ ë©¤ë²„ ëª©ë¡ì„ ë“œë¡­ë‹¤ìš´ìœ¼ë¡œ ì œê³µí•˜ì—¬, íŠ¹ì • ë‹´ë‹¹ìì˜ ì—…ë¬´ë¥¼ ì„ íƒí•´ì„œ ë³¼ ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

#### B. ë§ˆê°ì¼ í•„í„° (Due Date Filter)

-   **ê¸°ëŠ¥**: ì—…ë¬´ì˜ ë§ˆê°ì¼ì„ ê¸°ì¤€ìœ¼ë¡œ í•„í„°ë§í•©ë‹ˆë‹¤.
-   **ì„¸ë¶€ êµ¬í˜„**: ìƒì„¸ í•„í„° íŒ¨ë„ì—ì„œ ë‹¤ìŒ ì˜µì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.
    -   ê¸°í•œ ì´ˆê³¼
    -   ì˜¤ëŠ˜ ë§ˆê°
    -   ì´ë²ˆ ì£¼ ë‚´ ë§ˆê°
    -   ë§ˆê°ì¼ ì—†ìŒ
    -   (ì„ íƒ ì‚¬í•­) ì‚¬ìš©ìê°€ íŠ¹ì • ë‚ ì§œ ë²”ìœ„ë¥¼ ì§ì ‘ ì„ íƒí•  ìˆ˜ ìˆëŠ” ìº˜ë¦°ë” UI

#### C. ìƒíƒœ í•„í„° (Status Filter)

-   **ê¸°ëŠ¥**: ì—…ë¬´ì˜ ì§„í–‰ ìƒíƒœ(ì˜ˆ: í•  ì¼, ì§„í–‰ ì¤‘, ì™„ë£Œ)ì— ë”°ë¼ í•„í„°ë§í•©ë‹ˆë‹¤.
-   **ì„¸ë¶€ êµ¬í˜„**: ìƒì„¸ í•„í„° íŒ¨ë„ì—ì„œ `To-do`, `In-progress`, `Done` ë“± ì—…ë¬´ ìƒíƒœë¥¼ ì„ íƒí•  ìˆ˜ ìˆëŠ” ì˜µì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.

#### D. ì†Œì† í•„í„° (Context Filter)

-   **ê¸°ëŠ¥**: ì—…ë¬´ê°€ ì†í•œ 'í”„ë¡œì íŠ¸' ë˜ëŠ” 'ëª©í‘œ'ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•„í„°ë§í•©ë‹ˆë‹¤.
-   **ì„¸ë¶€ êµ¬í˜„**: ìƒì„¸ í•„í„° íŒ¨ë„ì—ì„œ ì‚¬ìš©ìê°€ ì°¸ì—¬í•˜ê³  ìˆëŠ” í”„ë¡œì íŠ¸ ë° ëª©í‘œ ëª©ë¡ì„ ë“œë¡­ë‹¤ìš´ìœ¼ë¡œ ì œê³µí•˜ì—¬, íŠ¹ì • ì»¨í…ìŠ¤íŠ¸ì— í•´ë‹¹í•˜ëŠ” ì—…ë¬´ë§Œ ëª¨ì•„ë³¼ ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

## 3. ê¸°ìˆ ì  ê³ ë ¤ì‚¬í•­

-   **ë³µìˆ˜ í•„í„° ì ìš©**: ì‚¬ìš©ìê°€ ì—¬ëŸ¬ í•„í„° ì¡°ê±´(ì˜ˆ: 'ë‚´ ì—…ë¬´' ì¤‘ 'ì˜¤ëŠ˜ ë§ˆê°'ì¸ ê²ƒ)ì„ ë™ì‹œì— ì ìš©í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.
-   **ìƒíƒœ ìœ ì§€**: í•„í„° ì¡°ê±´ì€ URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ì— ì €ì¥í•˜ì—¬, í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ê±°ë‚˜ ë§í¬ë¥¼ ê³µìœ í•˜ë”ë¼ë„ í•„í„° ìƒíƒœê°€ ìœ ì§€ë˜ë„ë¡ êµ¬í˜„í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.
-   **ì„±ëŠ¥ ìµœì í™”**: í•„í„°ë§ì€ í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì—ì„œ ì²˜ë¦¬í•˜ê¸°ë³´ë‹¤, ë°±ì—”ë“œ APIì— í•„í„° ì¡°ê±´ì„ íŒŒë¼ë¯¸í„°ë¡œ ì „ì†¡í•˜ì—¬ ì„œë²„ë¡œë¶€í„° í•„í„°ë§ëœ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤.

## 4. ê²°ë¡ 

í•„í„° ì‹œìŠ¤í…œì€ PRDì— ì •ì˜ëœ í•µì‹¬ ì‚¬ìš©ì ê²½í—˜ì˜ ì¼ë¶€ì…ë‹ˆë‹¤. ì´ ê¸°ëŠ¥ì´ êµ¬í˜„ë˜ë©´ ì‚¬ìš©ìëŠ” ë°©ëŒ€í•œ ì—…ë¬´ ëª©ë¡ ì†ì—ì„œ ê¸¸ì„ ìƒì§€ ì•Šê³ , ê°€ì¥ ì¤‘ìš”í•˜ê³  ì‹œê¸‰í•œ ì¼ì— ì§‘ì¤‘í•  ìˆ˜ ìˆê²Œ ë  ê²ƒì…ë‹ˆë‹¤. ëª…ì„¸ì— ë”°ë¼ ì •í™•í•˜ê³  ê²¬ê³ í•˜ê²Œ êµ¬í˜„í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.
</file>

<file path="instructions/20250801-04.md">
# ì‘ì—… ì§€ì‹œì„œ: ì—…ë¬´ ìƒì„¸ ê¸°ëŠ¥ ê°œë°œ

## 1. ê°œìš”

í˜„ì¬ WorklyëŠ” ì—…ë¬´ë¥¼ ìƒì„±í•˜ê³  ëª©ë¡ìœ¼ë¡œ ë³´ëŠ” ê¸°ë³¸ ê¸°ëŠ¥ì— ë¨¸ë¬¼ëŸ¬ ìˆìŠµë‹ˆë‹¤. ì‚¬ìš©ìê°€ ì—…ë¬´ì˜ êµ¬ì²´ì ì¸ ë‚´ìš©ì„ ì‘ì„±í•˜ê³ , ë‹¤ë¥¸ ì—…ë¬´ì™€ì˜ ê´€ê³„ë¥¼ ì„¤ì •í•˜ë©°, ì‹œê°„ì„ ê´€ë¦¬í•˜ëŠ” ë“± ì„¸ë¶€ì ì¸ ê´€ë¦¬ë¥¼ í•  ìˆ˜ ìˆëŠ” 'ì—…ë¬´ ìƒì„¸' ê¸°ëŠ¥ì˜ ê°œë°œì´ ì‹œê¸‰í•©ë‹ˆë‹¤.

ë³¸ ì‘ì—…ì˜ ëª©í‘œëŠ” `WORKLY_PRD.md` 4.1.D í•­ì— ëª…ì‹œëœ ë°”ì™€ ê°™ì´, ë§ˆí¬ë‹¤ìš´ ì—ë””í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ì—…ë¬´ ìƒì„¸ í™”ë©´ì˜ í•µì‹¬ ê¸°ëŠ¥ë“¤ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

## 2. ì„¸ë¶€ ìš”êµ¬ì‚¬í•­

### ëŒ€ìƒ í™”ë©´
-   ì—…ë¬´ ì¹´ë“œ íƒ­(í´ë¦­) ì‹œ ì§„ì…í•˜ëŠ” **'ì—…ë¬´ ìƒì„¸'** í™”ë©´

### 2.1. UI: ë§ˆí¬ë‹¤ìš´ ì—ë””í„° ë„ì…

-   ì—…ë¬´ì˜ ë‚´ìš©(content)ì„ ì‘ì„±í•˜ëŠ” í•µì‹¬ ì˜ì—­ì€ **ë§ˆí¬ë‹¤ìš´(Markdown) ì—ë””í„°**ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤.
-   ì‚¬ìš©ìëŠ” ì´ë¥¼ í†µí•´ í…ìŠ¤íŠ¸ ì„œì‹, ë§í¬, ì´ë¯¸ì§€ ì²¨ë¶€ ë“± í’ë¶€í•œ í˜•ì‹ì˜ ì—…ë¬´ ë‚´ìš©ì„ ì‘ì„±í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.
-   ì—ë””í„°ëŠ” ì§ê´€ì ì´ì–´ì•¼ í•˜ë©°, ì‹¤ì‹œê°„ìœ¼ë¡œ ë§ˆí¬ë‹¤ìš´ ë¯¸ë¦¬ë³´ê¸°ë¥¼ ì œê³µí•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.

### 2.2. í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„

#### A. ì²´í¬ë¦¬ìŠ¤íŠ¸ (í•˜ìœ„ ì—…ë¬´)

-   **ê¸°ëŠ¥**: ë§ˆí¬ë‹¤ìš´ ì—ë””í„° ë‚´ì—ì„œ ì‚¬ìš©ìê°€ í•˜ìœ„ ì²´í¬ë¦¬ìŠ¤íŠ¸(`- [ ]`, `- [x]`)ë¥¼ ìƒì„±í•˜ê³ , ì™„ë£Œ ìƒíƒœë¥¼ ì§ì ‘ í† ê¸€í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.
-   **êµ¬í˜„**: ë‹¨ìˆœ í…ìŠ¤íŠ¸ë¥¼ ë„˜ì–´, ì²´í¬ë°•ìŠ¤ê°€ ì‹¤ì œë¡œ ìƒí˜¸ì‘ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸ë¡œ ë Œë”ë§ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì²´í¬ë¦¬ìŠ¤íŠ¸ì˜ ì™„ë£Œ ìƒíƒœëŠ” ì—…ë¬´ì˜ ì „ì²´ ì§„í–‰ë¥ ì— ë°˜ì˜ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### B. ì—…ë¬´ ê´€ê³„ ì„¤ì • (ì„ í–‰/í›„í–‰)

-   **ê¸°ëŠ¥**: ë‹¤ë¥¸ ì—…ë¬´ì™€ì˜ ì˜ì¡´ ê´€ê³„ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤.
-   **UI**: 'ê´€ê³„ ì¶”ê°€' ë˜ëŠ” 'ì˜ì¡´ì„± ì„¤ì •'ê³¼ ê°™ì€ ë²„íŠ¼ì„ í†µí•´ ë‹¤ë¥¸ ì—…ë¬´ë¥¼ ê²€ìƒ‰í•˜ê³  ì—°ê²°í•  ìˆ˜ ìˆëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤.
-   **ì„¸ë¶€ êµ¬í˜„**:
    -   **ì„ í–‰ ì—…ë¬´**: ì´ ì—…ë¬´ë¥¼ ì‹œì‘í•˜ê¸° ì „ì— ë°˜ë“œì‹œ ì™„ë£Œë˜ì–´ì•¼ í•˜ëŠ” ì—…ë¬´ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
    -   **í›„í–‰ ì—…ë¬´**: ì´ ì—…ë¬´ê°€ ì™„ë£Œë˜ì–´ì•¼ë§Œ ì‹œì‘í•  ìˆ˜ ìˆëŠ” ì—…ë¬´ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
    -   ì„¤ì •ëœ ê´€ê³„ëŠ” ì—…ë¬´ ìƒì„¸ í™”ë©´ì— ëª…í™•í•˜ê²Œ í‘œì‹œë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

#### C. ìœ„í‚¤ ë ˆí¼ëŸ°ìŠ¤ ì²¨ë¶€

-   **ê¸°ëŠ¥**: ì—…ë¬´ ë‚´ìš©ê³¼ ê´€ë ¨ëœ ë‚´ë¶€ ìœ„í‚¤(ì§€ì‹ ë² ì´ìŠ¤) ë¬¸ì„œë¥¼ ì‰½ê²Œ ì°¸ì¡°í•˜ê³  ì—°ê²°í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.
-   **êµ¬í˜„**: ì—ë””í„° ë‚´ì—ì„œ íŠ¹ì • í‚¤ì›Œë“œ(ì˜ˆ: `[[`)ë¥¼ ì…ë ¥í–ˆì„ ë•Œ ìœ„í‚¤ ë¬¸ì„œë¥¼ ê²€ìƒ‰í•˜ê³  ì²¨ë¶€í•  ìˆ˜ ìˆëŠ” ìë™ ì™„ì„± ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê±°ë‚˜, ë³„ë„ì˜ 'ìœ„í‚¤ ì—°ê²°' ë²„íŠ¼ì„ í†µí•´ ë¬¸ì„œë¥¼ ê²€ìƒ‰/ì²¨ë¶€í•˜ëŠ” ë°©ì‹ì„ ê³ ë ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### D. ì‹œê°„ ì¶”ì • ë° ê¸°ë¡

-   **ê¸°ëŠ¥**: ì—…ë¬´ì— ì†Œìš”ë  ì‹œê°„ì„ ê³„íší•˜ê³ , ì‹¤ì œ íˆ¬ì…ëœ ì‹œê°„ì„ ê¸°ë¡í•˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤.
-   **UI**: ì—…ë¬´ ìƒì„¸ ì •ë³´ ì˜ì—­ì— 'ì¶”ì • ì‹œê°„'ê³¼ 'ê¸°ë¡ëœ ì‹œê°„'ì„ ì…ë ¥í•˜ê³  í™•ì¸í•  ìˆ˜ ìˆëŠ” ëª…í™•í•œ í•„ë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤.
-   **ì„¸ë¶€ êµ¬í˜„**:
    -   **ì‹œê°„ ì¶”ì •**: ì‚¬ìš©ìê°€ ì˜ˆìƒ ì†Œìš” ì‹œê°„ì„ ì‹œê°„ ë‹¨ìœ„ë¡œ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    -   **ì‹œê°„ ê¸°ë¡**: ì‚¬ìš©ìê°€ ì‹¤ì œ ì‘ì—… ì‹œê°„ì„ ê¸°ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ì˜ˆ: ìˆ˜ë™ ì…ë ¥ ë˜ëŠ” ì‹œì‘/ì •ì§€ íƒ€ì´ë¨¸)

## 3. ë°ì´í„° ëª¨ë¸ ê³ ë ¤ì‚¬í•­

-   `Task` ê°ì²´ ëª¨ë¸ì— ë‹¤ìŒ í•„ë“œë“¤ì´ ì¶”ê°€ë˜ê±°ë‚˜ ìˆ˜ì •ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
    -   `content` (String, Markdown)
    -   `dependencies` (Array of Objects: `{ type: 'precedes' | 'follows', taskId: String }`)
    -   `wikiReferences` (Array of Strings: `wikiPageId`)
    -   `estimatedHours` (Number)
    -   `loggedHours` (Number)

## 4. ê²°ë¡ 

ì—…ë¬´ ìƒì„¸ ê¸°ëŠ¥ì€ Worklyë¥¼ ë‹¨ìˆœí•œ í•  ì¼ ëª©ë¡ ì•±ì—ì„œ ê°•ë ¥í•œ ì—…ë¬´ ê´€ë¦¬ ë„êµ¬ë¡œ ë°œì „ì‹œí‚¤ëŠ” í•µì‹¬ì ì¸ ë‹¨ê³„ì…ë‹ˆë‹¤. PRDì˜ ìš”êµ¬ì‚¬í•­ì„ ì •í™•íˆ ì´í•´í•˜ê³ , ì‚¬ìš©ìê°€ ì—…ë¬´ì˜ ëª¨ë“  ë§¥ë½ì„ í•œ ê³³ì—ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ê²¬ê³ í•˜ê²Œ êµ¬í˜„í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.
</file>

<file path="instructions/20250801-05.md">
# ì‘ì—… ì§€ì‹œì„œ: í”„ë¡ íŠ¸ì—”ë“œ Mock Dataë¥¼ ì‹¤ì œ ë°±ì—”ë“œ API ì—°ë™ìœ¼ë¡œ ì „í™˜

## 1. ê°œìš”

í˜„ì¬ í”„ë¡ íŠ¸ì—”ë“œëŠ” UI ê°œë°œ ì†ë„ì™€ í¸ì˜ë¥¼ ìœ„í•´ ì„ì‹œ ëª©ì—…(Mock) ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ì œ ì£¼ìš” UI ê°œë°œì´ ì™„ë£Œë˜ì—ˆìœ¼ë¯€ë¡œ, ì‹¤ì œ ë°±ì—”ë“œ APIì™€ ì—°ë™í•˜ì—¬ ì‹¤ì‹œê°„ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ëŠ” ì™„ì „í•œ ê¸°ëŠ¥ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì „í™˜í•´ì•¼ í•©ë‹ˆë‹¤.

ì´ ì‘ì—…ì€ Worklyì˜ í•µì‹¬ ê¸°ëŠ¥ì„ ì™„ì„±í•˜ê³ , ì‚¬ìš©ìê°€ ìì‹ ì˜ ì‹¤ì œ ë°ì´í„°ë¥¼ ë³´ê³  ìƒí˜¸ì‘ìš©í•  ìˆ˜ ìˆê²Œ ë§Œë“œëŠ” ë§¤ìš° ì¤‘ìš”í•œ ë‹¨ê³„ì…ë‹ˆë‹¤.

## 2. ì„ í–‰ ì¡°ê±´

-   **ì¤‘ìš”**: ë°±ì—”ë“œ ì„œë²„ëŠ” ëŒ€í‘œë‹˜ê»˜ì„œ í•­ìƒ ì‹¤í–‰í•˜ê³  ìˆìœ¼ë¯€ë¡œ, **ê°œë°œìê°€ ì§ì ‘ ì„œë²„ë¥¼ ì‹¤í–‰í•˜ì§€ ë§ˆì‹­ì‹œì˜¤.**
-   í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì— í•„ìš”í•œ API ì—”ë“œí¬ì¸íŠ¸ëŠ” ëª¨ë‘ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ê³  ìˆëŠ” ìƒíƒœì…ë‹ˆë‹¤.
-   ë°ì´í„°ë² ì´ìŠ¤ ë˜í•œ ëŒ€í‘œë‹˜ê»˜ì„œ ê´€ë¦¬í•˜ê³  ìˆìœ¼ë¯€ë¡œ, ì—°ê²° ìƒíƒœë‚˜ í…ŒìŠ¤íŠ¸ ë°ì´í„° ìœ ë¬´ë¥¼ ê±±ì •í•  í•„ìš” ì—†ìŠµë‹ˆë‹¤. í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì—ë§Œ ì§‘ì¤‘í•˜ì‹­ì‹œì˜¤.

## 3. ì„¸ë¶€ ìš”êµ¬ì‚¬í•­

### 3.1. ê¸°ì¡´ Mock ë°ì´í„° ì™„ì „ ì œê±°

-   í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œë² ì´ìŠ¤ ì „ì²´ì—ì„œ í•˜ë“œì½”ë”©ëœ ëª¨ë“  ëª©ì—… ë°ì´í„° ë°°ì—´(ì˜ˆ: `mockTasks`, `sampleProjects` ë“±)ì„ ì°¾ì•„ **ëª¨ë‘ ì œê±°**í•©ë‹ˆë‹¤.
-   ì´ ë°ì´í„°ë“¤ì€ ì£¼ë¡œ ì»´í¬ë„ŒíŠ¸ì˜ ì´ˆê¸° ìƒíƒœë¥¼ ì„¤ì •í•˜ê±°ë‚˜, ê°œë°œ ì¤‘ API ì—†ì´ UIë¥¼ í™•ì¸í•˜ê¸° ìœ„í•œ ëª©ì ìœ¼ë¡œ ì‚¬ìš©ë˜ì—ˆì„ ê²ƒì…ë‹ˆë‹¤. ì´ì œ ê·¸ ì—­í• ì€ ëë‚¬ìŠµë‹ˆë‹¤.

### 3.2. API í´ë¼ì´ì–¸íŠ¸ ë¡œì§ ìˆ˜ì •

-   **ëŒ€ìƒ íŒŒì¼**: `frontend/src/lib/api.ts` (ë˜ëŠ” API í˜¸ì¶œì„ ê´€ë¦¬í•˜ëŠ” ë‹¤ë¥¸ í•µì‹¬ íŒŒì¼)
-   í˜„ì¬ ëª©ì—… ë°ì´í„°ë¥¼ ë°˜í™˜í•˜ë„ë¡ ë˜ì–´ ìˆëŠ” í•¨ìˆ˜ë“¤ì„, ì‹¤ì œ `fetch` ë˜ëŠ” `axios`ë¥¼ ì‚¬ìš©í•œ **ë¹„ë™ê¸° API í˜¸ì¶œë¡œ ì „ë©´ ìˆ˜ì •**í•©ë‹ˆë‹¤.
-   APIì˜ ê¸°ë³¸ URLì€ í™˜ê²½ ë³€ìˆ˜(`process.env.NEXT_PUBLIC_API_URL`)ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. (ì˜ˆ: `http://localhost:3001/api`)
-   API ê²½ë¡œëŠ” `shared/constants/api-endpoints.ts`ì— ì •ì˜ëœ ì—”ë“œí¬ì¸íŠ¸ ìƒìˆ˜ë¥¼ ë°˜ë“œì‹œ í™œìš©í•˜ì—¬ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ì‹­ì‹œì˜¤.

### 3.3. ë°ì´í„° Fetching ë¡œì§ êµì²´

-   **ëŒ€ìƒ**: ë°ì´í„°ë¥¼ í•„ìš”ë¡œ í•˜ëŠ” ëª¨ë“  í˜ì´ì§€ ë° ì»´í¬ë„ŒíŠ¸ (ì˜ˆ: `frontend/src/app/tasks/page.tsx`)
-   `useEffect`, `SWR`, `React Query` ë“± í˜„ì¬ ì‚¬ìš© ì¤‘ì¸ ë°ì´í„° í˜ì¹­ ë¼ì´ë¸ŒëŸ¬ë¦¬/í›…ì—ì„œ ëª©ì—… ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë¶€ë¶„ì„, ìœ„ì—ì„œ ìˆ˜ì •í•œ **API í´ë¼ì´ì–¸íŠ¸ í•¨ìˆ˜ í˜¸ì¶œë¡œ êµì²´**í•©ë‹ˆë‹¤.
-   API í˜¸ì¶œ ì‹œ **ë¡œë”©(loading) ë° ì—ëŸ¬(error) ìƒíƒœë¥¼ ì‚¬ìš©ìì—ê²Œ ëª…í™•íˆ í”¼ë“œë°±**í•´ì•¼ í•©ë‹ˆë‹¤. (ì˜ˆ: ë¡œë”© ìŠ¤í”¼ë„ˆ, ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ)

### 3.4. ë°ì´í„° íƒ€ì… ì¼ì¹˜ í™•ì¸

-   ë°±ì—”ë“œ APIê°€ ë°˜í™˜í•˜ëŠ” ë°ì´í„°ì˜ êµ¬ì¡°ê°€ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì‚¬ìš©í•˜ëŠ” íƒ€ì…ê³¼ ì™„ë²½í•˜ê²Œ ì¼ì¹˜í•˜ëŠ”ì§€ ê²€ì¦í•©ë‹ˆë‹¤.
-   ëª¨ë“  ë°ì´í„° íƒ€ì…ì€ **`shared/types` ë””ë ‰í† ë¦¬ì˜ íŒŒì¼ì„ ë‹¨ì¼ ì§„ì‹¤ ê³µê¸‰ì›(Single Source of Truth)ìœ¼ë¡œ ì‚¼ì•„ ë™ê¸°í™”**ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ë¶ˆì¼ì¹˜ ì‹œ, ë°±ì—”ë“œ ë˜ëŠ” í”„ë¡ íŠ¸ì—”ë“œì˜ íƒ€ì…ì„ ìˆ˜ì •í•˜ì—¬ ì¼ê´€ì„±ì„ í™•ë³´í•˜ì‹­ì‹œì˜¤.

### 3.5. ì¸ì¦ ì²˜ë¦¬

-   ì¸ì¦ì´ í•„ìš”í•œ ëª¨ë“  API ì—”ë“œí¬ì¸íŠ¸ ìš”ì²­ í—¤ë”ì— **ì¸ì¦ í† í°(JWT ë“±)ì„ í¬í•¨**ì‹œì¼œì•¼ í•©ë‹ˆë‹¤.
-   `frontend/src/lib/auth.ts` ë˜ëŠ” ìœ ì‚¬ íŒŒì¼ì— êµ¬í˜„ëœ ì¸ì¦ ê´€ë ¨ ë¡œì§ì„ í™œìš©í•˜ì—¬ í† í°ì„ ê°€ì ¸ì™€ ìš”ì²­ì— ì¶”ê°€í•˜ì‹­ì‹œì˜¤.

## 4. ê²€ì¦

-   í”„ë¡ íŠ¸ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ê³ , ê° í˜ì´ì§€(ì—…ë¬´, í”„ë¡œì íŠ¸ ë“±)ì— ë°±ì—”ë“œ ë°ì´í„°ë² ì´ìŠ¤ì˜ **ì‹¤ì œ ë°ì´í„°ê°€ ì •ìƒì ìœ¼ë¡œ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸**í•©ë‹ˆë‹¤.
-   ë°ì´í„° ìƒì„±(Create), ì¡°íšŒ(Read), ìˆ˜ì •(Update), ì‚­ì œ(Delete) ë“± **ëª¨ë“  CRUD ê¸°ëŠ¥ì´ APIë¥¼ í†µí•´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ëŠ”ì§€ ì² ì €íˆ í…ŒìŠ¤íŠ¸**í•©ë‹ˆë‹¤.

## 5. ê²°ë¡ 

ì´ ì‘ì—…ì´ ì™„ë£Œë˜ë©´, WorklyëŠ” ë¹„ë¡œì†Œ ì‚´ì•„ìˆëŠ” ì„œë¹„ìŠ¤ê°€ ë©ë‹ˆë‹¤. ì •ì ì¸ UIì—ì„œ ë™ì ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œì˜ ì „í™˜ì¸ ë§Œí¼, í•œ ì¹˜ì˜ ì˜¤ì°¨ë„ ì—†ì´ ê²¬ê³ í•˜ê²Œ êµ¬í˜„í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.
</file>

<file path="instructions/20250801-06.md">
# ì‘ì—… ì§€ì‹œì„œ: Task 13 ìµœì¢… ì™„ë£Œ

**ëª©í‘œ:** Taskmaster ì„œë¸ŒíƒœìŠ¤í¬ 13.7(ë°±ì—”ë“œ)ê³¼ 13.8(í”„ë¡ íŠ¸ì—”ë“œ í†µí•©)ì„ ìˆœì°¨ì ìœ¼ë¡œ ì™„ë£Œí•˜ì—¬, ë©”ì¸ íƒœìŠ¤í¬ 13ë²ˆ ì „ì²´ë¥¼ ìµœì¢… ì™„ë£Œí•©ë‹ˆë‹¤.
</file>

<file path="references/SuperClaude Guide.md">
# **SuperClaude ì „ë¬¸ê°€ ê°€ì´ë“œ: AI ê¸°ë°˜ ê°œë°œ ì›Œí¬í”Œë¡œìš° ë§ˆìŠ¤í„°í•˜ê¸°**

---

## **1ë¶€: SuperClaude íŒ¨ëŸ¬ë‹¤ì„ \- AI í˜‘ì—…ì„ ìœ„í•œ ìƒˆë¡œìš´ ì² í•™**

AI ì½”ë”© ì–´ì‹œìŠ¤í„´íŠ¸ì˜ ë“±ì¥ì€ ê°œë°œ í™˜ê²½ì— í˜ì‹ ì„ ê°€ì ¸ì™”ì§€ë§Œ, ìˆ™ë ¨ëœ ê°œë°œìë“¤ì€ ì´ë‚´ í•œê³„ì— ë¶€ë”ªí˜”ìŠµë‹ˆë‹¤. í‘œì¤€ AI ì–´ì‹œìŠ¤í„´íŠ¸ëŠ” ê°•ë ¥í•œ ë„êµ¬ì¼ ë¿, ì§„ì •í•œ ê°œë°œ íŒŒíŠ¸ë„ˆê°€ ë˜ê¸°ì—ëŠ” ë¶€ì¡±í•œ ì ì´ ë§ì•˜ìŠµë‹ˆë‹¤.1 ì´ë“¤ì€ ì¥ê¸°ì ì¸ ë§¥ë½ì„ ê¸°ì–µí•˜ì§€ ëª»í•˜ëŠ” 'AI ê¸°ì–µ ìƒì‹¤' ë¬¸ì œë¥¼ ê²ªê³ , í”„ë¡œì íŠ¸ì˜ íŠ¹ìˆ˜ì„±ì„ ê³ ë ¤í•˜ì§€ ì•Šì€ ì¼ë°˜ì ì¸ ì¡°ì–¸ì„ ì œê³µí•˜ë©°, ê¸°íš, ì•„í‚¤í…ì²˜ ì„¤ê³„, í…ŒìŠ¤íŠ¸ì™€ ê°™ì€ í•µì‹¬ ì—”ì§€ë‹ˆì–´ë§ ë‹¨ê³„ë¥¼ ê±´ë„ˆë›°ëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤.1 SuperClaudeëŠ” ë°”ë¡œ ì´ ì§€ì ì—ì„œ ì¶œë°œí•©ë‹ˆë‹¤. ì´ëŠ” ë‹¨ìˆœí•œ ëª…ë ¹ì–´ ëª¨ìŒì´ ì•„ë‹ˆë¼, ê°•ë ¥í•˜ì§€ë§Œ ì¼ë°˜ì ì¸ AIì— ì „ë¬¸ ì†Œí”„íŠ¸ì›¨ì–´ ì—”ì§€ë‹ˆì–´ë§ ì›ì¹™ì„ ì ìš©í•˜ì—¬ ì§„ì •í•œ í˜‘ì—… íŒŒíŠ¸ë„ˆë¡œ ë³€ëª¨ì‹œí‚¤ëŠ” ì² í•™ì  í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.

### **1.1. ì¼ë°˜ì ì¸ ì–´ì‹œìŠ¤í„´íŠ¸ì—ì„œ ì „ë¬¸í™”ëœ íŒŒíŠ¸ë„ˆë¡œ**

SuperClaudeëŠ” Claude Codeë¥¼ ìœ„í•œ 'ë‘ë‡Œ ì—…ê·¸ë ˆì´ë“œ' ë˜ëŠ” ê²½ëŸ‰ì˜ 'êµ¬ì„± í”„ë ˆì„ì›Œí¬'ë¡œ ì‘ë™í•©ë‹ˆë‹¤.1 ì¶”ê°€ì ì¸ ì½”ë“œë‚˜ ì™¸ë¶€ ë„êµ¬ ì—†ì´, í”„ë¡œì íŠ¸ì— íŠ¹ì • êµ¬ì„± íŒŒì¼ì„ ì¶”ê°€í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œ AIë¥¼ ì „ë¬¸ì ì´ê³ , ë§¥ë½ì„ ì¸ì§€í•˜ë©°, ì²´ê³„ì ì¸ ê°œë°œ íŒŒíŠ¸ë„ˆë¡œ íƒˆë°”ê¿ˆì‹œí‚µë‹ˆë‹¤.1 ì´ëŠ” ê°œë°œìê°€ AIì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” ë°©ì‹ì„ ê·¼ë³¸ì ìœ¼ë¡œ ë°”ê¾¸ì–´, ë‹¨ìˆœí•œ ì§ˆì˜ì‘ë‹µì„ ë„˜ì–´ì„  ì²´ê³„ì ì¸ í˜‘ì—…ì„ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤.

### **1.2. SuperClaude ì² í•™ì˜ ì„¸ ê°€ì§€ ê¸°ë‘¥**

SuperClaudeì˜ íš¨ê³¼ëŠ” ì„¸ ê°€ì§€ í•µì‹¬ ì›ì¹™ì— ê¸°ë°˜í•©ë‹ˆë‹¤. ì´ ì›ì¹™ë“¤ì€ AIì˜ ë‚´ì¬ì  ì•½ì ì„ ë³´ì™„í•˜ê³  ê°œë°œ í”„ë¡œì„¸ìŠ¤ì˜ í’ˆì§ˆì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

#### **1.2.1. ê¸°ë‘¥ 1: ì¦ê±° ê¸°ë°˜ ìš´ì˜ (Evidence-Based Operation)**

ì´ê²ƒì€ SuperClaudeì˜ ê°€ì¥ ì‹¬ì˜¤í•œ ì›ì¹™ìœ¼ë¡œ, AIì˜ 'í™˜ê°(hallucination)' í˜„ìƒ, ì¦‰ ì˜ëª»ëœ ì •ë³´ë¥¼ ì‚¬ì‹¤ì¸ ê²ƒì²˜ëŸ¼ ì œì‹œí•˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ê³ ì•ˆë˜ì—ˆìŠµë‹ˆë‹¤.1 ì´ í”„ë ˆì„ì›Œí¬ëŠ” AIê°€ "ì´ê²ƒì´ ë” ë‚«ë‹¤"ì™€ ê°™ì´ ê·¼ê±° ì—†ëŠ” ì£¼ì¥ì„ í•˜ëŠ” ê²ƒì„ ì—„ê²©íˆ ê¸ˆì§€í•©ë‹ˆë‹¤.4 ëŒ€ì‹ , "ì•„ë§ˆë„", "ê°€ëŠ¥ì„±ì´ ìˆë‹¤", "ì¼ë°˜ì ìœ¼ë¡œ"ì™€ ê°™ì€ ì‹ ì¤‘í•˜ê³  í™•ë¥ ì ì¸ ì–¸ì–´ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ìš”êµ¬í•˜ë©°, ê°€ì¥ ì¤‘ìš”í•˜ê²ŒëŠ” ê³µì‹ ë¬¸ì„œë¥¼ ì°¸ì¡°í•˜ì—¬ ìì‹ ì˜ ì£¼ì¥ì„ ì¦ê±°ë¡œ ë’·ë°›ì¹¨í•˜ë„ë¡ ê°•ì œí•©ë‹ˆë‹¤.1 ì´ëŠ” ì¢…ì¢… ê³µì‹ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¬¸ì„œë¥¼ ìë™ìœ¼ë¡œ ì¡°íšŒí•˜ëŠ”

Context7 MCP(Multi-Context Processor) ë„êµ¬ì™€ì˜ í†µí•©ì„ í†µí•´ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.1

#### **1.2.2. ê¸°ë‘¥ 2: í† í° ê²½ì œ (The Token Economy) \- ê·œëª¨ì— ë§ëŠ” íš¨ìœ¨ì„±**

ì´ ê¸°ë‘¥ì€ ëŒ€ê·œëª¨ ì–¸ì–´ ëª¨ë¸(LLM)ì´ ê°€ì§„ ì¥í™©í•¨ê³¼ ì»¨í…ìŠ¤íŠ¸ ì°½ ì œí•œ ë¬¸ì œë¥¼ í•´ê²°í•©ë‹ˆë‹¤. ì´ëŠ” ë³µì¡í•œ ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ì—ì„œ í° ì¥ì• ë¬¼ì´ ë©ë‹ˆë‹¤.1 SuperClaudeëŠ” 'ì´ˆì••ì¶• ëª¨ë“œ(UltraCompressed Mode)'ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ ë¬¸ì œë¥¼ í•´ê²°í•©ë‹ˆë‹¤. ì´ ëª¨ë“œëŠ” 'â†’'(ê²°ê³¼ë¡œ ì´ì–´ì§), ì•½ì–´, ê¸€ë¨¸ë¦¬ ê¸°í˜¸ì™€ ê°™ì€ ê¸°í˜¸ë¥¼ í™œìš©í•˜ì—¬ ëª…í™•ì„±ì„ ìƒì§€ ì•Šìœ¼ë©´ì„œ í† í° ì‚¬ìš©ëŸ‰ì„ ìµœëŒ€ 70%ê¹Œì§€ íšê¸°ì ìœ¼ë¡œ ì¤„ì…ë‹ˆë‹¤.1 ì´ë¥¼ í†µí•´ ë” í° í”„ë¡œì íŠ¸ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì²˜ë¦¬í•˜ê³ , ì²˜ë¦¬ ì†ë„ë¥¼ ë†’ì´ë©°, API í˜¸ì¶œ ë¹„ìš©ì„ í¬ê²Œ ì ˆê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.4 ì´ì™€ ë”ë¶ˆì–´ 'ì½”ë“œ ê²½ì œ(Code Economy)' ì›ì¹™ì€ AIê°€ ê¸°ë³¸ì ìœ¼ë¡œ êµ°ë”ë”ê¸° ì—†ê³ , ìƒìš©êµ¬(boilerplate)ê°€ ì—†ìœ¼ë©°, ì£¼ì„ì´ ì—†ëŠ” ê°„ê²°í•œ ì½”ë“œë¥¼ ìƒì„±í•˜ë„ë¡ ì§€ì‹œí•˜ì—¬ ìˆœìˆ˜í•œ ê¸°ëŠ¥ì„±ì— ì§‘ì¤‘í•˜ê²Œ í•©ë‹ˆë‹¤.1

#### **1.2.3. ê¸°ë‘¥ 3: ê·œì¹™ ê¸°ë°˜ì˜ ì—„ê²©í•¨ê³¼ ì‹¬ê°ë„ ì‹œìŠ¤í…œ (The Severity System)**

SuperClaudeëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ì—”ì§€ë‹ˆì–´ë§ ëª¨ë²” ì‚¬ë¡€ë¥¼ ê³„ì¸µì ì¸ ê·œì¹™ ì‹œìŠ¤í…œìœ¼ë¡œ ì²´ê³„í™”í•©ë‹ˆë‹¤.1 ê° ê·œì¹™ì€ 1ë¶€í„° 10ê¹Œì§€ì˜ ì‹¬ê°ë„ ë“±ê¸‰ì„ ê°€ì§‘ë‹ˆë‹¤. \*\*CRITICAL \*\* ë“±ê¸‰ì˜ ê·œì¹™ì€ í˜‘ìƒì˜ ì—¬ì§€ê°€ ì—†ëŠ” ì°¨ë‹¨ ìš”ì†Œë¡œ, "ë¹„ë°€ ì •ë³´ë¥¼ ì ˆëŒ€ ì»¤ë°‹í•˜ì§€ ë§ ê²ƒ"ê³¼ ê°™ì€ ë³´ì•ˆ ê·œì •ì´ë‚˜ "ê³µìœ  ë¸Œëœì¹˜ì— ì ˆëŒ€ ê°•ì œ í‘¸ì‹œí•˜ì§€ ë§ ê²ƒ"ê³¼ ê°™ì€ Git ë³´í˜¸ ì¥ì¹˜ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.1

**HIGH \[7-9\]** ë“±ê¸‰ì˜ ê·œì¹™ì€ ì½”ë“œ í’ˆì§ˆ ë° ì„±ëŠ¥ê³¼ ê´€ë ¨ëœ ê²ƒìœ¼ë¡œ, AIê°€ ìˆ˜ì •ì„ ê°•ë ¥íˆ ìš”êµ¬í•©ë‹ˆë‹¤. ë°˜ë©´ **MEDIUM \[4-6\]** ë° **LOW \[1-3\]** ë“±ê¸‰ì˜ ê·œì¹™ì€ ê²½ê³ ë‚˜ ì œì•ˆì„ íŠ¸ë¦¬ê±°í•˜ì—¬, ê°œë°œìì˜ ì‘ì—…ì„ ë°©í•´í•˜ì§€ ì•Šìœ¼ë©´ì„œ ë” ë‚˜ì€ ë°©í–¥ìœ¼ë¡œ ìœ ë„í•©ë‹ˆë‹¤.1

ì´ëŸ¬í•œ ì ‘ê·¼ ë°©ì‹ì€ í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ì˜ ì§„í™”ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. ê°œë³„ ê°œë°œìë“¤ì´ ë°œê²¬í•œ íš¨ê³¼ì ì¸ í”„ë¡¬í”„íŠ¸ë‚˜ ì›Œí¬í”Œë¡œìš°ëŠ” ê³µìœ í•˜ê±°ë‚˜ ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤.2 SuperClaudeëŠ” ì´ëŸ¬í•œ ë¹„ê³µì‹ì ì¸ ëª¨ë²” ì‚¬ë¡€ë“¤ì„ ëª…ë ¹ì–´, í˜ë¥´ì†Œë‚˜, ê·œì¹™ì´ë¼ëŠ” í˜•íƒœë¡œ ê³µì‹í™”í•˜ì—¬ ë°°í¬ ê°€ëŠ¥í•œ íŒ¨í‚¤ì§€ë¡œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.4 ì´ëŠ” ë‹¨ìˆœí•œ 'í”„ë¡¬í”„íŒ…'ì—ì„œ 'í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§'ìœ¼ë¡œ, ê·¸ë¦¬ê³  ë§ˆì¹¨ë‚´ 'AI ìƒí˜¸ì‘ìš© í”„ë ˆì„ì›Œí¬'ë¥¼ êµ¬ì¶•í•˜ëŠ” ë‹¨ê³„ë¡œì˜ ë°œì „ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ëŠ” ê°œë³„ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±ì—ì„œ ê²¬ê³ í•œ ì†Œí”„íŠ¸ì›¨ì–´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ êµ¬ì¶•í•˜ëŠ” ê³¼ì •ê³¼ ìœ ì‚¬í•©ë‹ˆë‹¤. SuperClaudeëŠ” ì „ë¬¸ê°€ ìˆ˜ì¤€ì˜ AI ìƒí˜¸ì‘ìš©ì„ ë°˜ë³µ ê°€ëŠ¥í•˜ê³  ì ‘ê·¼ ê°€ëŠ¥í•˜ê²Œ ë§Œë“œëŠ” ì´ëŸ¬í•œ íŠ¸ë Œë“œì˜ ì„ êµ¬ì ì¸ ì‚¬ë¡€ì…ë‹ˆë‹¤.

---

## **2ë¶€: ì„¤ì¹˜ ë° í™˜ê²½ êµ¬ì„±**

SuperClaudeì˜ ê°•ë ¥í•œ ê¸°ëŠ¥ì„ í™œìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì •í™•í•œ ì„¤ì¹˜ì™€ í™˜ê²½ êµ¬ì„±ì´ ì„ í–‰ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì´ ì„¹ì…˜ì—ì„œëŠ” í”Œë«í¼ë³„ ê³ ë ¤ì‚¬í•­ê³¼ í•µì‹¬ ìš”ì†Œì¸ MCP ì„œë²„ ì„¤ì •ì„ í¬í•¨í•œ í¬ê´„ì ì¸ ì„¤ì¹˜ ê°€ì´ë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### **2.1. ì „ì œ ì¡°ê±´: ê°œë°œ í™˜ê²½ ì¤€ë¹„**

SuperClaude ì„¤ì¹˜ ì „ì— ëª‡ ê°€ì§€ í•„ìˆ˜ ìš”ì†Œë¥¼ ê°–ì¶”ì–´ì•¼ í•©ë‹ˆë‹¤.

* **Claude Code:** SuperClaudeëŠ” Claude Codeë¥¼ ìœ„í•œ í”„ë ˆì„ì›Œí¬ì´ë¯€ë¡œ, ì‘ë™í•˜ëŠ” Claude Code ì„¤ì¹˜ê°€ ê°€ì¥ ê¸°ë³¸ì ì¸ ìš”êµ¬ì‚¬í•­ì…ë‹ˆë‹¤. ì´ëŠ” ë³´í†µ í„°ë¯¸ë„ ì ‘ê·¼ ê¶Œí•œì´ í¬í•¨ëœ ìœ ë£Œ Claude Pro ë˜ëŠ” Max êµ¬ë…ì„ í•„ìš”ë¡œ í•©ë‹ˆë‹¤.6  
* **í”Œë«í¼ ì§€ì›:** Linuxì™€ macOSë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ì§€ì›í•©ë‹ˆë‹¤. Windows ì‚¬ìš©ìì˜ ê²½ìš°, WSL(Windows Subsystem for Linux) ì„¤ì¹˜ê°€ í•„ìˆ˜ì ì…ë‹ˆë‹¤.3 WSLì€ Windows ë‚´ì—ì„œ Linux í™˜ê²½ì„ êµ¬ë™í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ê°€ìƒí™” ê³„ì¸µìœ¼ë¡œ, ì„¤ì¹˜ ê³¼ì •ì—ì„œ ì•½ê°„ì˜ ì§€ì—°ì´ë‚˜ ì‹œìŠ¤í…œ ë¶€í•˜ë¥¼ ìœ ë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.8  
* **Python:** ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ Python 3.7 ì´ìƒ ë²„ì „ì´ í•„ìš”í•©ë‹ˆë‹¤.  
* **Git:** ì €ì¥ì†Œ ë³µì œë¿ë§Œ ì•„ë‹ˆë¼, SuperClaudeì˜ í•µì‹¬ ê¸°ëŠ¥ì¸ 'Git ê¸°ë°˜ ë©”ëª¨ë¦¬'ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ í•„ìˆ˜ì ì…ë‹ˆë‹¤.3

### **2.2. ì„¤ì¹˜ ê°€ì´ë“œ: SuperClaude v3 ì„¤ì •í•˜ê¸°**

* **1ë‹¨ê³„: ê¸°ì¡´ ë²„ì „ ì •ë¦¬ (v2 ì‚¬ìš©ì):** v3ëŠ” v2ì™€ êµ¬ì¡°ê°€ ì™„ì „íˆ ë‹¤ë¥´ë¯€ë¡œ, ì—…ê·¸ë ˆì´ë“œí•˜ëŠ” ì‚¬ìš©ìëŠ” ë°˜ë“œì‹œ ê¸°ì¡´ v2 ì œê±° í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•œ í›„, ê´€ë ¨ ë””ë ‰í† ë¦¬(SuperClaude/, \~/.claude/shared/, \~/.claude/commands/)ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì‚­ì œí•˜ì—¬ ì¶©ëŒì„ ë°©ì§€í•´ì•¼ í•©ë‹ˆë‹¤.10  
* **2ë‹¨ê³„: Python íŒ¨í‚¤ì§€ ì„¤ì¹˜ (ê¶Œì¥):** ê³µì‹ì ìœ¼ë¡œ ê¶Œì¥ë˜ëŠ” ë°©ë²•ì€ PyPIë¥¼ í†µí•´ uvë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. í„°ë¯¸ë„ì— uv add SuperClaude ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì—¬ ìµœì‹  ì•ˆì • ë²„ì „ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤.  
* **3ë‹¨ê³„: ì„¤ì¹˜ í”„ë¡œê·¸ë¨ ì‹¤í–‰:** íŒ¨í‚¤ì§€ ì„¤ì¹˜ í›„, Claude Codeë¥¼ êµ¬ì„±í•˜ê¸° ìœ„í•´ SuperClaude ì„¤ì¹˜ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤. python3 \-m SuperClaude install ë˜ëŠ” ê°„ë‹¨íˆ SuperClaude install ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.  
* **ì„¤ì¹˜ í”„ë¡œí•„:** ì‚¬ìš©ìëŠ” í•„ìš”ì— ë”°ë¼ ë‹¤ì–‘í•œ ì„¤ì¹˜ í”„ë¡œí•„ì„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
  * \--interactive: íŠ¹ì • êµ¬ì„± ìš”ì†Œë¥¼ ì§ì ‘ ì„ íƒí•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.  
  * \--minimal: í•µì‹¬ í”„ë ˆì„ì›Œí¬ë§Œ ì„¤ì¹˜í•˜ëŠ” ìµœì†Œí•œì˜ êµ¬ì„±ì…ë‹ˆë‹¤.  
  * \--profile developer: ëª¨ë“  ë„êµ¬ë¥¼ í¬í•¨í•˜ëŠ” í¬ê´„ì ì¸ ê°œë°œììš© ì„¤ì •ì…ë‹ˆë‹¤.

### **2.3. MCP ì„œë²„ í†µí•©: ì ì¬ë ¥ ê·¹ëŒ€í™”**

MCP(Multi-Context Processors)ëŠ” SuperClaudeì— í™•ì¥ëœ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ì™¸ë¶€ ì„œë²„ ì¸¡ ë„êµ¬ì…ë‹ˆë‹¤.2 ì„¤ì¹˜ í”„ë¡œê·¸ë¨ì´ ì´ë“¤ì„ ìë™ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•µì‹¬ì ì¸ 4ê°œì˜ MCPëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

* **Context7 (C7):** ë¬¸ì„œ ì—°êµ¬ ë„êµ¬ì…ë‹ˆë‹¤. 'ì¦ê±° ê¸°ë°˜ ìš´ì˜' ì›ì¹™ì˜ í•µì‹¬ìœ¼ë¡œ, ê³µì‹ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¬¸ì„œì™€ ë””ìì¸ íŒ¨í„´ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.1  
* **Sequential:** ì‹¬ì¸µ ì‚¬ê³  ë„êµ¬ì…ë‹ˆë‹¤. ë³µì¡í•˜ê³  ì—¬ëŸ¬ ë‹¨ê³„ì— ê±¸ì¹œ ë¬¸ì œ í•´ê²° ê³¼ì •ì„ AIê°€ ìˆ˜í–‰í•˜ë„ë¡ ë•ìŠµë‹ˆë‹¤.1  
* **Magic:** UI ìƒì„± ë„êµ¬ì…ë‹ˆë‹¤. Reactì™€ ê°™ì€ í”„ë ˆì„ì›Œí¬ë¥¼ ìœ„í•œ ìµœì‹  UI ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.1  
* **Playwright / Puppeteer:** ë¸Œë¼ìš°ì € ìë™í™” ë° í…ŒìŠ¤íŠ¸ ë„êµ¬ì…ë‹ˆë‹¤. ì‘ì—… ê²°ê³¼ë¥¼ ê²€ì¦í•˜ê³  ì—”ë“œíˆ¬ì—”ë“œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.1

ì´ëŸ¬í•œ ì„¤ì¹˜ ê³¼ì •ì€ SuperClaudeì˜ íŠ¹ì„±ì„ ëª…í™•íˆ ë³´ì—¬ì¤ë‹ˆë‹¤. GitHub Copilotê³¼ ê°™ì´ IDEì— ê¹Šìˆ™ì´ í†µí•©ë˜ì–´ í´ë¦­ í•œ ë²ˆìœ¼ë¡œ ì„¤ì¹˜ë˜ëŠ” ë„êµ¬ì™€ ë‹¬ë¦¬ 13, SuperClaudeëŠ” ì—¬ëŸ¬ ë‹¨ê³„ì˜ ëª…ë ¹ì¤„ ê¸°ë°˜ ì„¤ì •ì„ ìš”êµ¬í•©ë‹ˆë‹¤. íŠ¹íˆ Windows ì‚¬ìš©ìì˜ WSL ìš”êµ¬ì‚¬í•­ì€ ì¶”ê°€ì ì¸ ë³µì¡ì„±ì„ ë”í•©ë‹ˆë‹¤.8 ì´ëŠ” SuperClaudeê°€ ëŒ€ì¤‘ì ì¸ ì ‘ê·¼ì„±ë³´ë‹¤ëŠ” ê°•ë ¥í•œ ê¸°ëŠ¥ê³¼ ì²´ê³„ì ì¸ ì›Œí¬í”Œë¡œìš°ë¥¼ ìœ„í•´ ì´ˆê¸° ì„¤ì •ì˜ ë¶ˆí¸í•¨ì„ ê°ìˆ˜í•  ì˜í–¥ì´ ìˆëŠ” íŒŒì›Œ ìœ ì €ë¥¼ ëŒ€ìƒìœ¼ë¡œ í•˜ëŠ” ë„êµ¬ì„ì„ ì‹œì‚¬í•©ë‹ˆë‹¤. í–¥í›„ ê³„íšëœ v4ì˜ ë‹¤ë¥¸ CLIì™€ì˜ í˜¸í™˜ì„± ì§€ì›ì€ ì´ëŸ¬í•œ ì§„ì… ì¥ë²½ì„ ë‚®ì¶”ê¸° ìœ„í•œ ì „ëµì  ì›€ì§ì„ìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.

---

## **3ë¶€: ëª…ë ¹ì–´ ë¬´ê¸°ê³  \- SuperClaude ëª…ë ¹ì–´ ì‹¬ì¸µ ë¶„ì„**

ì´ ì„¹ì…˜ì€ ì—¬ëŸ¬ ìë£Œì— í©ì–´ì ¸ ìˆëŠ” ì •ë³´ë¥¼ í†µí•©í•˜ì—¬ SuperClaudeì˜ ëª…ë ¹ì–´ì— ëŒ€í•œ í¬ê´„ì ì¸ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ëª…ë ¹ì–´ ìˆ˜ì— ëŒ€í•œ í˜¼ë™ì„ ëª…í™•íˆ í•˜ê³  ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œë¥¼ ì œì‹œí•©ë‹ˆë‹¤.

### **3.1. ëª…ë ¹ì–´ êµ¬ì¡° ì´í•´í•˜ê¸°**

* **êµ¬ë¬¸:** v3ì˜ ëª¨ë“  ëª…ë ¹ì–´ëŠ” Claude Codeì˜ ê¸°ë³¸ ëª…ë ¹ì–´ì™€ êµ¬ë³„í•˜ê¸° ìœ„í•´ /sc: ì ‘ë‘ì‚¬ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤ (ì˜ˆ: /sc:implement).10 ì´ëŠ” v2ì—ì„œ ì‚¬ìš©ë˜ë˜  
  /user: ì ‘ë‘ì‚¬ì™€ ë‹¬ë¼ì§„ ì£¼ìš” ë³€ê²½ ì‚¬í•­ì…ë‹ˆë‹¤.1  
* **ëª…ë ¹ì–´ ê°œìˆ˜:** ì—¬ëŸ¬ ìë£Œì—ì„œ 17ê°œ, 18ê°œ, 19ê°œì˜ ëª…ë ¹ì–´ë¥¼ ì–¸ê¸‰í•˜ì§€ë§Œ 3, ìµœì‹  ê³µì‹ v3 ë¬¸ì„œëŠ” ì¼ê´€ë˜ê²Œ  
  **16ê°œì˜ í•„ìˆ˜ ëª…ë ¹ì–´**ë¥¼ ëª…ì‹œí•˜ê³  ìˆìŠµë‹ˆë‹¤.10 ì´ ë³´ê³ ì„œëŠ” ì´ 16ê°œ ëª…ë ¹ì–´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•©ë‹ˆë‹¤.  
* **í”Œë˜ê·¸ì™€ ì²´ì´ë‹:** ëª…ë ¹ì–´ëŠ” \--react, \--securityì™€ ê°™ì€ í”Œë˜ê·¸ë¥¼ í†µí•´ ê°•ë ¥í•´ì§€ë©°, /sc:design ì‹¤í–‰ í›„ /sc:implementë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë…¼ë¦¬ì ì¸ ì›Œí¬í”Œë¡œìš°ë¡œ ì—°ê²°ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.2

### **3.2. ì£¼ìš” ëª…ë ¹ì–´ ë³€ê²½: /build vs. /sc:implement**

v2ì—ì„œ v3ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ëŠ” ì‚¬ìš©ìì—ê²Œ ê°€ì¥ í˜¼ë€ì„ ì£¼ëŠ” ë¶€ë¶„ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. v2ì—ì„œëŠ” /build ëª…ë ¹ì–´ê°€ ì¼ë°˜ì ì¸ ê¸°ëŠ¥ êµ¬í˜„ì— ì‚¬ìš©ë˜ì—ˆìŠµë‹ˆë‹¤. v3ì—ì„œëŠ” ì´ ê¸°ëŠ¥ì´ /sc:implementë¡œ ì´ì „ë˜ì—ˆìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ /sc:build ëª…ë ¹ì–´ëŠ” ì´ì œ ì»´íŒŒì¼, íŒ¨í‚¤ì§•, ë¹Œë“œ í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ê³¼ ê°™ì´ ì¢ì€ ë²”ìœ„ì˜ ì‘ì—…ì—ë§Œ ì´ˆì ì„ ë§ì¶¥ë‹ˆë‹¤.10

* **ë§ˆì´ê·¸ë ˆì´ì…˜ ì˜ˆì‹œ:** v2 ëª…ë ¹ì–´ v2 /build myFeatureëŠ” v3ì—ì„œ v3 /sc:implement myFeatureë¡œ ëŒ€ì²´ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.10

### **3.3. SuperClaude v3 ëª…ë ¹ì–´ ë ˆí¼ëŸ°ìŠ¤ í‘œ**

ì´ í‘œëŠ” í˜„ì¬ ì ‘ê·¼ì´ ì–´ë ¤ìš´ ê³µì‹ ë¬¸ì„œ ëŒ€ì‹  16, ëª…ë ¹ì–´ì˜ ê¸°ëŠ¥ê³¼ ì‚¬ìš©ë²•ì„ í•œëˆˆì— íŒŒì•…í•  ìˆ˜ ìˆëŠ” í•µì‹¬ ìë£Œì…ë‹ˆë‹¤.

| ì¹´í…Œê³ ë¦¬ | ëª…ë ¹ì–´ | ê¸°ëŠ¥ | í”Œë˜ê·¸ë¥¼ í¬í•¨í•œ ì‚¬ìš© ì˜ˆì‹œ |
| :---- | :---- | :---- | :---- |
| **ê°œë°œ** | /sc:implement | ìƒˆë¡œìš´ ê¸°ëŠ¥, í•¨ìˆ˜, ì»´í¬ë„ŒíŠ¸ë¥¼ êµ¬í˜„í•˜ëŠ” ì£¼ ëª…ë ¹ì–´. | /sc:implement a user login form \--persona-frontend \--react |
|  | /sc:build | í”„ë¡œì íŠ¸ë¥¼ ì»´íŒŒì¼, íŒ¨í‚¤ì§•í•˜ê±°ë‚˜ ë¹Œë“œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰. | /sc:build \--prod |
|  | /sc:design | ê¸°ìˆ  ëª…ì„¸, UI/UX ë””ìì¸, ì•„í‚¤í…ì²˜ ì²­ì‚¬ì§„ì„ ìƒì„±. | /sc:design a REST API for user management \--ddd \--persona-architect |
| **ë¶„ì„** | /sc:analyze | ì½”ë“œë² ì´ìŠ¤ì— ëŒ€í•œ í¬ê´„ì ì¸ ë¶„ì„ì„ ìˆ˜í–‰. | /sc:analyze the current file for security vulnerabilities \--security \--persona-security |
|  | /sc:troubleshoot | ì´ìŠˆ, ì—ëŸ¬, ë²„ê·¸ë¥¼ ì¡°ì‚¬í•˜ê³  ë””ë²„ê¹…. | /sc:troubleshoot the 'TypeError' in the main.js file \--persona-analyzer |
|  | /sc:explain | ì½”ë“œ ì¡°ê°, ê°œë…, íŒŒì¼ì„ ì„¤ëª…. | /sc:explain this regex pattern |
| **í’ˆì§ˆ** | /sc:improve | ê¸°ì¡´ ì½”ë“œì˜ í’ˆì§ˆ, ì„±ëŠ¥, ê°€ë…ì„±ì„ í–¥ìƒ. | /sc:improve the database query for performance \--persona-performance |
|  | /sc:test | í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸(ë‹¨ìœ„, í†µí•©, E2E)ë¥¼ ìƒì„±í•˜ê±°ë‚˜ ì‹¤í–‰. | /sc:test the new checkout feature \--tdd |
|  | /sc:cleanup | ë°ë“œ ì½”ë“œ, ë¯¸ì‚¬ìš© ì˜ì¡´ì„±, ì˜¤ë˜ëœ ì•„í‹°íŒ©íŠ¸ë¥¼ ì œê±°. | /sc:cleanup the project |
| **ìœ í‹¸ë¦¬í‹°** | /sc:document | ì½”ë“œë‚˜ í”„ë¡œì íŠ¸ì— ëŒ€í•œ ë¬¸ì„œë¥¼ ìë™ìœ¼ë¡œ ìƒì„±. | /sc:document the API endpoints |
|  | /sc:git | AI ê¸°ë°˜ ì»¤ë°‹ ë©”ì‹œì§€ ìƒì„±ì„ í¬í•¨í•œ Git ì‘ì—…ì„ ìˆ˜í–‰. | /sc:git \--checkpoint "Before major refactor" |
|  | /sc:estimate | ì£¼ì–´ì§„ ì‘ì—…ì— ëŒ€í•œ ì‹œê°„ ë˜ëŠ” ë³µì¡ë„ë¥¼ ì¶”ì •. | /sc:estimate the time to implement the new feature |
|  | /sc:task | ê°œë°œ ì‘ì—…ì„ ê´€ë¦¬í•˜ê³  ì¶”ì . | /sc:task create a list of sub-tasks for the auth feature |
|  | /sc:index | (ì¶”ì •) ì»¨í…ìŠ¤íŠ¸ë¥¼ ìœ„í•´ í”„ë¡œì íŠ¸ íŒŒì¼ì„ ì¸ë±ì‹±. | /sc:index the entire repository |
|  | /sc:load | (ì¶”ì •) íŠ¹ì • ì»¨í…ìŠ¤íŠ¸ë‚˜ íŒŒì¼ì„ ë¡œë“œ. | /sc:load the architecture.md file |
|  | /sc:spawn | (ì¶”ì •) íŠ¹ì • ì‘ì—…ì„ ìœ„í•œ í•˜ìœ„ ì—ì´ì „íŠ¸ë¥¼ ìƒì„±. | /sc:spawn an agent to refactor the legacy module |

---

## **4ë¶€: ì¸ì§€ì  ì „ë¬¸í™” \- 9ê°œì˜ í˜ë¥´ì†Œë‚˜ ë§ˆìŠ¤í„°í•˜ê¸°**

ì´ ì„¹ì…˜ì€ SuperClaudeì˜ ê°€ì¥ í˜ì‹ ì ì¸ ê¸°ëŠ¥ì¸ í˜ë¥´ì†Œë‚˜ ì‹œìŠ¤í…œì„ ìƒì„¸íˆ ë‹¤ë£¹ë‹ˆë‹¤. í˜ë¥´ì†Œë‚˜ê°€ ì–´ë–»ê²Œ 'ì¼ë°˜ì ì¸ AI' ë¬¸ì œë¥¼ í•´ê²°í•˜ê³ , ì˜¨ë””ë§¨ë“œ ì „ë¬¸ê°€ íŒ€ì²˜ëŸ¼ ê¸°ëŠ¥í•˜ëŠ”ì§€ ì„¤ëª…í•©ë‹ˆë‹¤.

### **4.1. í˜ë¥´ì†Œë‚˜ì˜ í˜: ë‹¨ìˆœí•œ í”„ë¡¬í”„íŠ¸ë¥¼ ë„˜ì–´ì„œ**

í˜ë¥´ì†Œë‚˜ëŠ” AIì˜ ì‚¬ê³ ë°©ì‹, ìš°ì„ ìˆœìœ„, ì†Œí†µ ìŠ¤íƒ€ì¼, ì„ í˜¸í•˜ëŠ” ë„êµ¬ê¹Œì§€ ê·¼ë³¸ì ìœ¼ë¡œ ë°”ê¾¸ëŠ” 'ì¸ì§€ì  ì›í˜•(cognitive archetypes)'ì…ë‹ˆë‹¤.1 í˜ë¥´ì†Œë‚˜ë¥¼ í™œì„±í™”í•˜ëŠ” ê²ƒì€ ë‹¨ìˆœíˆ ì™¸í˜•ì ì¸ ë³€í™”ê°€ ì•„ë‹ˆë¼, ì™„ì „íˆ ë‹¤ë¥¸ ì „ë¬¸ê°€ì™€ ëŒ€í™”í•˜ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤.1 ì˜ˆë¥¼ ë“¤ì–´,

security í˜ë¥´ì†Œë‚˜ì˜ ì£¼ëœ ì§ˆë¬¸ì€ "ë¬´ì—‡ì´ ì˜ëª»ë  ìˆ˜ ìˆëŠ”ê°€?"ì¸ ë°˜ë©´, mentor í˜ë¥´ì†Œë‚˜ì˜ ëª©í‘œëŠ” ì •ë‹µì„ ë°”ë¡œ ì•Œë ¤ì£¼ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì´í•´ë¥¼ ë•ëŠ” ê²ƒì…ë‹ˆë‹¤.1

### **4.2. ìë™ í˜ë¥´ì†Œë‚˜ í™œì„±í™”**

SuperClaudeëŠ” ì‚¬ìš©ìì˜ ì‘ì—… ë§¥ë½ì— ë”°ë¼ ì§€ëŠ¥ì ìœ¼ë¡œ í˜ë¥´ì†Œë‚˜ë¥¼ í™œì„±í™”í•˜ì—¬ ìƒí˜¸ì‘ìš©ì„ ìì—°ìŠ¤ëŸ½ê³  ë§¤ë„ëŸ½ê²Œ ë§Œë“­ë‹ˆë‹¤.1

* ì˜ˆì‹œ 1:  
  * .tsx íŒŒì¼ì„ í¸ì§‘í•˜ë©´ frontend í˜ë¥´ì†Œë‚˜ê°€ ìë™ìœ¼ë¡œ í™œì„±í™”ë©ë‹ˆë‹¤.  
  * "bug"ë‚˜ "error" ê°™ì€ ë‹¨ì–´ë¥¼ ì…ë ¥í•˜ë©´ analyzer í˜ë¥´ì†Œë‚˜ê°€ í™œì„±í™”ë©ë‹ˆë‹¤.  
  * ì´ ê¸°ëŠ¥ì€ ë§ˆì¹˜ ê°€ì¥ ì ì ˆí•œ ìˆœê°„ì— ìµœê³ ì˜ ì „ë¬¸ê°€ê°€ ë°©ìœ¼ë¡œ ê±¸ì–´ ë“¤ì–´ì˜¤ëŠ” ê²ƒê³¼ ê°™ì€ ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.

### **4.3. SuperClaude í˜ë¥´ì†Œë‚˜ ëª…ë‹¨ í‘œ**

ì´ í‘œëŠ” 9ê°œì˜ ì „ë¬¸ í˜ë¥´ì†Œë‚˜ ê°ê°ì˜ ê³ ìœ í•œ ì´ˆì ê³¼ ì „ë¬¸ ë¶„ì•¼ë¥¼ ëª…í™•í•˜ê²Œ ì•ˆë‚´í•˜ì—¬, ì‚¬ìš©ìê°€ ì¸ì§€ì  ì „ë¬¸í™”ì˜ í˜ì„ ìµœëŒ€í•œ í™œìš©í•  ìˆ˜ ìˆë„ë¡ ë•ìŠµë‹ˆë‹¤.

| í˜ë¥´ì†Œë‚˜ | ì•„ì´ì½˜ | í•µì‹¬ ì´ˆì  / ì‚¬ê³ ë°©ì‹ | ì¼ë°˜ì ì¸ ì‚¬ìš© ì‚¬ë¡€ / ìƒ˜í”Œ í”„ë¡¬í”„íŠ¸ |
| :---- | :---- | :---- | :---- |
| **architect** | ğŸ—ï¸ | ê±°ì‹œì ì¸ ì‹œìŠ¤í…œ ë””ìì¸, í™•ì¥ì„±, ê¸°ìˆ  ë¶€ì±„ ì‹ë³„, ì•„í‚¤í…ì²˜ íŒ¨í„´. | /sc:design \--persona-architect "Design a microservices architecture for an e-commerce platform." |
| **frontend** | ğŸ¨ | UI/UX ê°œì„ , React ëª¨ë²” ì‚¬ë¡€, ì ‘ê·¼ì„±(a11y), ìµœì‹  ì»´í¬ë„ŒíŠ¸ ë””ìì¸. | /sc:implement \--persona-frontend "Create an accessible and responsive login form using React and Tailwind." |
| **backend** | âš™ï¸ | API ì‹ ë¢°ì„± ë° í™•ì¥, ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„, ì¸í”„ë¼, ì„œë²„ ì¸¡ ë¡œì§. | /sc:improve \--persona-backend "Optimize the database schema for write-heavy operations." |
| **security** | ğŸ›¡ï¸ | ìœ„í˜‘ ëª¨ë¸ë§, ë³´ì•ˆ ì½”ë”© ê´€í–‰, ì·¨ì•½ì  ë¶„ì„, ì…ë ¥ ìœ íš¨ì„± ê²€ì‚¬. | /sc:analyze \--persona-security "Perform a security audit of the authentication module." |
| **analyzer** | ğŸ” | ì‹¬ì¸µ ë””ë²„ê¹…, ê·¼ë³¸ ì›ì¸ ë¶„ì„, ë³µì¡í•œ ë¬¸ì œ í•´ê²°. | /sc:troubleshoot \--persona-analyzer "Find the source of the memory leak in the data processing script." |
| **qa** | ğŸ§ª | í…ŒìŠ¤íŠ¸ ì „ëµ, ì½”ë“œ ì»¤ë²„ë¦¬ì§€, ë²„ê·¸ íƒì§€, ê²¬ê³ í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ìƒì„±. | /sc:test \--persona-qa "Write a comprehensive test plan for the new payment gateway integration." |
| **performance** | âš¡ | ì†ë„ íŠœë‹, ë³‘ëª© í˜„ìƒ ì‹ë³„, ì¿¼ë¦¬ ìµœì í™”, ë¦¬ì†ŒìŠ¤ ê´€ë¦¬. | /sc:improve \--persona-performance "Identify and fix the performance bottlenecks on the main dashboard." |
| **refactorer** | âœ¨ | ì½”ë“œ ëª…í™•ì„± í–¥ìƒ, ë³µì¡ë„ ê°ì†Œ, ê¸°ìˆ  ë¶€ì±„ ì •ë¦¬. | /sc:improve \--persona-refactorer "Refactor this large function into smaller, more manageable units." |
| **mentor** | ğŸ“ | ê°€ì´ë“œ ê¸°ë°˜ í•™ìŠµ, ë¹„ìœ ë¥¼ í†µí•œ ë³µì¡í•œ ê°œë… ì„¤ëª…, ì½”ì¹­. ì§ì ‘ì ì¸ ë‹µì„ í”¼í•¨. | /sc:explain \--persona-mentor "Can you explain the concept of closures in JavaScript like I'm a beginner?" |

í˜ë¥´ì†Œë‚˜ ì‹œìŠ¤í…œì€ ê°œë°œìì˜ ì—­í• ì„ ê·¼ë³¸ì ìœ¼ë¡œ ë³€í™”ì‹œí‚µë‹ˆë‹¤. ì „í†µì ì¸ ì½”ë”©ì—ì„œ ê°œë°œìëŠ” ì•„í‚¤í…íŠ¸, ì½”ë”, í…ŒìŠ¤í„° ë“± ëª¨ë“  ì—­í• ì„ ìˆ˜í–‰í•´ì•¼ í–ˆìŠµë‹ˆë‹¤. ê¸°ë³¸ AI ì–´ì‹œìŠ¤í„´íŠ¸ëŠ” ë‹¨ì¼í•˜ê³  ì¼ë°˜ì ì¸ ì¡°ìˆ˜ ì—­í• ì„ í•  ë¿ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ SuperClaudeì˜ í˜ë¥´ì†Œë‚˜ ì‹œìŠ¤í…œì€ ì „ë¬¸ê°€ë¡œ êµ¬ì„±ëœ 'íŒ€'ì„ ì œê³µí•©ë‹ˆë‹¤.5 ì´ë¡œ ì¸í•´ ê°œë°œìì˜ ì£¼ëœ ì„ë¬´ëŠ” ëª¨ë“  ì½”ë“œë¥¼ ì§ì ‘ ì‘ì„±í•˜ëŠ” ê²ƒì—ì„œ ì´ AI ì—ì´ì „íŠ¸ íŒ€ì„ 'ì§€íœ˜'í•˜ëŠ” ê²ƒìœ¼ë¡œ ì§„í™”í•©ë‹ˆë‹¤. ê°œë°œìëŠ” ê¸°ìˆ  ë¦¬ë”ë‚˜ ê´€ë¦¬ìì²˜ëŸ¼

architectì—ê²Œ ì„¤ê³„ë¥¼ ì§€ì‹œí•˜ê³ , backend í˜ë¥´ì†Œë‚˜ì—ê²Œ êµ¬í˜„ì„ ë§¡ê¸°ë©°, qa í˜ë¥´ì†Œë‚˜ì—ê²Œ í…ŒìŠ¤íŠ¸ë¥¼ ìš”ì²­í•˜ê²Œ ë©ë‹ˆë‹¤. í–¥í›„ ê³„íšëœ í˜‘ì—… ê¸°ëŠ¥(--collaborate \--persona-backend,frontend,security)ì€ ì´ëŸ¬í•œ ë³€í™”ë¥¼ ë”ìš± ê°€ì†í™”í•  ê²ƒì…ë‹ˆë‹¤.19 ë”°ë¼ì„œ SuperClaudeì™€ ê°™ì€ ë„êµ¬ë¥¼ ë§ˆìŠ¤í„°í•œë‹¤ëŠ” ê²ƒì€ ì½”ë”© ëŠ¥ë ¥ë¿ë§Œ ì•„ë‹ˆë¼ AI ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ë° ì›Œí¬í”Œë¡œìš° ê´€ë¦¬ë¼ëŠ” ìƒˆë¡œìš´ ê¸°ìˆ ì„ ìŠµë“í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

---

## **5ë¶€: ì „ëµì  ì›Œí¬í”Œë¡œìš° \- ë‹¨ì¼ ëª…ë ¹ì–´ì—ì„œ ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œê¹Œì§€**

ì´ ì„¹ì…˜ì€ ëª…ë ¹ì–´ì™€ í˜ë¥´ì†Œë‚˜ë¥¼ ì‹¤ì œ ê°œë°œ ì‹œë‚˜ë¦¬ì˜¤ì— ì ìš©í•˜ëŠ” ì‹¤ìš©ì ì¸ í™œìš©ë²•ì„ ì œì‹œí•©ë‹ˆë‹¤.

### **5.1. í’€ìŠ¤íƒ ê¸°ëŠ¥ ê°œë°œ ì›Œí¬í”Œë¡œìš°: ë‹¨ê³„ë³„ ì˜ˆì‹œ**

ì´ ì›Œí¬í”Œë¡œìš°ëŠ” ì•„ì´ë””ì–´ êµ¬ìƒë¶€í„° ê¸°ëŠ¥ ì™„ì„±ê¹Œì§€, ëª…ë ¹ì–´ì™€ í˜ë¥´ì†Œë‚˜ë¥¼ ì—°ê²°í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.2

* **1ë‹¨ê³„: ë¶„ì„ ë° ì„¤ê³„ (/sc:design)**: ì œí’ˆ ìš”êµ¬ì‚¬í•­ ë¬¸ì„œ(PRD)ì—ì„œ ì‹œì‘í•©ë‹ˆë‹¤. /sc:design \--persona-architectë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒì„¸í•œ ê¸°ìˆ  ëª…ì„¸ íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.  
* **2ë‹¨ê³„: ì‘ì—… ë¶„í•  (/sc:task)**: ìƒì„±ëœ ê¸°ìˆ  ëª…ì„¸ íŒŒì¼ì„ /sc:taskì— ì…ë ¥í•˜ì—¬ êµ¬ì²´ì ì¸ êµ¬í˜„ ì‘ì—… ëª©ë¡ì„ ë§Œë“­ë‹ˆë‹¤.  
* **3ë‹¨ê³„: êµ¬í˜„ (/sc:implement)**: ê° ì‘ì—…ì„ /sc:implementë¥¼ ì‚¬ìš©í•˜ì—¬ í•´ê²°í•©ë‹ˆë‹¤. ì´ë•Œ API ì—”ë“œí¬ì¸íŠ¸ì—ëŠ” \--persona-backendë¥¼, UIì—ëŠ” \--persona-frontendë¥¼ ì‚¬ìš©í•˜ëŠ” ë“± ì ì ˆí•œ í˜ë¥´ì†Œë‚˜ë¥¼ í™œìš©í•©ë‹ˆë‹¤.  
* **4ë‹¨ê³„: í…ŒìŠ¤íŠ¸ (/sc:test)**: /sc:test \--persona-qaë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„ëœ ì½”ë“œì— ëŒ€í•œ ë‹¨ìœ„ ë° í†µí•© í…ŒìŠ¤íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.  
* **5ë‹¨ê³„: ë¬¸ì„œí™” ë° ì»¤ë°‹ (/sc:document, /sc:git)**: /sc:documentë¡œ ë¬¸ì„œë¥¼ ë§Œë“¤ê³ , /sc:gitìœ¼ë¡œ ì˜ë¯¸ ìˆëŠ” ì»¤ë°‹ ë©”ì‹œì§€ë¥¼ ìƒì„±í•˜ì—¬ ì‘ì—…ì„ ë§ˆë¬´ë¦¬í•©ë‹ˆë‹¤.

### **5.2. analyzer í˜ë¥´ì†Œë‚˜ë¥¼ í™œìš©í•œ ê³ ê¸‰ ë””ë²„ê¹…**

ë²„ê·¸ê°€ ë°œìƒí–ˆì„ ë•Œ, ì‚¬ìš©ìëŠ” /sc:troubleshoot \--persona-analyzer "My app is crashing with a null pointer exception"ê³¼ ê°™ì´ ëª…ë ¹ì–´ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. analyzer í˜ë¥´ì†Œë‚˜ëŠ” ì‹¬ì¸µ ë¶„ì„ì„ ìˆ˜í–‰í•˜ì—¬ ë¡œê¹… ì§€ì ì„ ì œì•ˆí•˜ê³ , ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ë¥¼ ë¶„ì„í•˜ë©°, ê°€ëŠ¥í•œ ê·¼ë³¸ ì›ì¸ì„ ì„¤ëª…í•©ë‹ˆë‹¤. ì´ëŠ” ë§ˆì¹˜ ìˆ™ë ¨ëœ ë””ë²„ê¹… ì „ë¬¸ê°€ì™€ í˜‘ë ¥í•˜ëŠ” ê²ƒê³¼ ê°™ì€ ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.1

### **5.3. AI ê¸°ì–µ ìƒì‹¤ ê·¹ë³µ: Git ê¸°ë°˜ ë©”ëª¨ë¦¬**

ì´ ê¸°ëŠ¥ì€ ì¥ì‹œê°„ ì´ì–´ì§€ëŠ” AI ëŒ€í™”ì˜ ê°€ì¥ í° ë¬¸ì œ ì¤‘ í•˜ë‚˜ì¸ 'ê¸°ì–µ ìƒì‹¤'ì„ í•´ê²°í•˜ëŠ” íšê¸°ì ì¸ ë°©ë²•ì…ë‹ˆë‹¤.1

* **ì‚¬ìš©ë²•:** ëŒ€ê·œëª¨ ë¦¬íŒ©í† ë§ê³¼ ê°™ì´ ìœ„í—˜ ë¶€ë‹´ì´ í° ë³€ê²½ ì‘ì—…ì„ ì‹œì‘í•˜ê¸° ì „ì—, ê°œë°œìëŠ” /sc:git \--checkpoint "message" ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ì´ëŠ” ëŒ€í™”ì™€ ì½”ë“œì˜ ì „ì²´ ìƒíƒœë¥¼ ì €ì¥í•˜ëŠ” ì²´í¬í¬ì¸íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.  
* **ë¡¤ë°±:** ë§Œì•½ ë¦¬íŒ©í† ë§ì´ ì‹¤íŒ¨í•˜ê±°ë‚˜ ì˜ëª»ëœ ë°©í–¥ìœ¼ë¡œ ì§„í–‰ë  ê²½ìš°, ê°„ë‹¨íˆ /sc:git \--rollback ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ í”„ë¡œì íŠ¸ì™€ AIì˜ ì»¨í…ìŠ¤íŠ¸ê°€ ë§ˆì§€ë§‰ìœ¼ë¡œ ì €ì¥ëœ ì •ìƒ ìƒíƒœë¡œ ì¦‰ì‹œ ë³µì›ë©ë‹ˆë‹¤. ì´ëŠ” ìˆ˜ ì‹œê°„ì˜ ì‘ì—…ì„ ìƒëŠ” ê²ƒì„ ë°©ì§€í•´ ì¤ë‹ˆë‹¤.1

### **5.4. ë¯¸ë˜ì˜ ì›Œí¬í”Œë¡œìš°: í˜‘ì—… ë° ë‹¤ì¤‘ í˜ë¥´ì†Œë‚˜**

ì•„ì§ ì™„ì „íˆ êµ¬í˜„ë˜ì§€ëŠ” ì•Šì•˜ì§€ë§Œ, GitHub ì´ìŠˆì—ì„œ ë…¼ì˜ëœ í˜ë¥´ì†Œë‚˜ í˜‘ì—… ê¸°ëŠ¥ì€ SuperClaudeì˜ ë¯¸ë˜ ë°©í–¥ì„±ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.19

* **í˜ë¥´ì†Œë‚˜ ì²´ì´ë‹ (--chain):** í•œ í˜ë¥´ì†Œë‚˜ì˜ ì¶œë ¥ì´ ë‹¤ìŒ í˜ë¥´ì†Œë‚˜ì˜ ì…ë ¥ìœ¼ë¡œ ìë™ìœ¼ë¡œ ì—°ê²°ë˜ëŠ” ìˆœì°¨ì  ì›Œí¬í”Œë¡œìš°ì…ë‹ˆë‹¤ (ì˜ˆ: architect â†’ security â†’ backend).  
* **ë‹¤ì¤‘ í˜ë¥´ì†Œë‚˜ í˜‘ì—… (--collaborate):** ì—¬ëŸ¬ í˜ë¥´ì†Œë‚˜ê°€ í•˜ë‚˜ì˜ ì‘ì—…ì— ëŒ€í•´ ë™ì‹œì— í˜‘ì˜í•˜ì—¬ í†µí•©ëœ ê²°ê³¼ë¬¼ì„ ë„ì¶œí•˜ëŠ” ê³ ê¸‰ ëª¨ë“œì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, /sc:build \--collaborate \--persona-backend,securityëŠ” ì²˜ìŒë¶€í„° ê¸°ëŠ¥ì ìœ¼ë¡œ ì˜¬ë°”ë¥´ë©´ì„œë„ ë³´ì•ˆì´ ê°•í™”ëœ ì½”ë“œë¥¼ ìƒì„±í•˜ê²Œ ë©ë‹ˆë‹¤.

---

## **6ë¶€: ë” ë„“ì€ ìƒíƒœê³„ \- ë¹„ìš©, ë¹„êµ, ê·¸ë¦¬ê³  ëŒ€ì•ˆ**

ì´ ì„¹ì…˜ì€ SuperClaude ì‚¬ìš©ì˜ ì‹¤ì œ ë¹„ìš©ì„ ë¶„ì„í•˜ê³ , AI ì½”ë”© ë„êµ¬ ì‹œì¥ì—ì„œì˜ ìœ„ì¹˜ë¥¼ íŒŒì•…í•˜ì—¬ ì‚¬ìš©ìì—ê²Œ ì¤‘ìš”í•œ ë§¥ë½ì„ ì œê³µí•©ë‹ˆë‹¤.

### **6.1. ë¹„ìš©-í¸ìµ ë¶„ì„: ë¬´ë£Œ í”„ë ˆì„ì›Œí¬, ìœ ë£Œ ì„œë¹„ìŠ¤**

SuperClaude ìì²´ëŠ” ë¬´ë£Œ ì˜¤í”ˆì†ŒìŠ¤(MIT ë¼ì´ì„ ìŠ¤) í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.4 í•˜ì§€ë§Œ ì´ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” Claude Code ì ‘ê·¼ ê¶Œí•œì´ í•„ìš”í•˜ë©°, ì´ëŠ” ìœ ë£Œ Anthropic êµ¬ë…ì„ í†µí•´ ì œê³µë©ë‹ˆë‹¤. ë§ì€ ì‚¬ìš©ìë“¤ì´ ì´ ì ì„ í˜¼ë™í•˜ì—¬ ë¬´ë£Œ ë„êµ¬ì„ì—ë„ ì™œ ë†’ì€ ë¹„ìš©ì— ëŒ€í•œ ì´ì•¼ê¸°ê°€ ë‚˜ì˜¤ëŠ”ì§€ ê¶ê¸ˆí•´í•©ë‹ˆë‹¤.6 ì‹¤ì œ ë¹„ìš©ì€ ê¸°ë°˜ì´ ë˜ëŠ” Claude ì„œë¹„ìŠ¤ì— ëŒ€í•œ ê²ƒì…ë‹ˆë‹¤. SuperClaudeì˜ ì§„ì •í•œ ê°€ì¹˜ëŠ” ì´ ìœ ë£Œ ì„œë¹„ìŠ¤ë¥¼ í† í° ê°ì†Œë¥¼ í†µí•´

*ë” íš¨ìœ¨ì ìœ¼ë¡œ* ë§Œë“¤ê³ , êµ¬ì¡°í™”ëœ ì›Œí¬í”Œë¡œìš°ë¥¼ í†µí•´ *ë” íš¨ê³¼ì ìœ¼ë¡œ* ë§Œë“¤ì–´ ì‚¬ìš©ìì˜ êµ¬ë…ë£Œë‚˜ API ë¹„ìš©ì— ëŒ€í•œ íˆ¬ì ìˆ˜ìµë¥ (ROI)ì„ ê·¹ëŒ€í™”í•˜ëŠ” ë° ìˆìŠµë‹ˆë‹¤.

### **6.2. Claude ì„œë¹„ìŠ¤ ê°€ê²©í‘œ (2025ë…„ 7ì›” ê¸°ì¤€)**

ì´ í‘œëŠ” ìš´ì˜ ë¹„ìš©ì„ ëª…í™•íˆ í•˜ê³  ì‚¬ìš©ìê°€ ì˜ˆìƒ ì‚¬ìš©ëŸ‰ì— ê¸°ë°˜í•œ í•©ë¦¬ì ì¸ ê²°ì •ì„ ë‚´ë¦´ ìˆ˜ ìˆë„ë¡ ë•ìŠµë‹ˆë‹¤.6

| í”Œëœ/ì„œë¹„ìŠ¤ | ë¹„ìš© | ì£¼ìš” ê¸°ëŠ¥ ë° ì œí•œ | ì´ìƒì ì¸ ì‚¬ìš©ì |
| :---- | :---- | :---- | :---- |
| **Claude Pro** | ì›” $20 | ë¬´ë£Œ ë“±ê¸‰ ëŒ€ë¹„ 5ë°° ì‚¬ìš©ëŸ‰, Sonnet ë° Opus ëª¨ë¸ ì ‘ê·¼. | ì „ë¬¸ê°€, ì¤‘ê°„ ì‚¬ìš©ëŸ‰ ì‚¬ìš©ì. |
| **Claude Max** | ì›” $100-$200 | Pro ëŒ€ë¹„ 5-20ë°° ì‚¬ìš©ëŸ‰, ìš°ì„  ì ‘ê·¼ê¶Œ. Claude Code í„°ë¯¸ë„ ì ‘ê·¼ì— í•„ìš”. | í—¤ë¹„ ìœ ì €, ê¸°ì—…. |
| **Claude Team** | ì‚¬ìš©ìë‹¹ ì›” $30 | ì¤‘ì•™ ì§‘ì¤‘ì‹ ê²°ì œ, í˜‘ì—… ê¸°ëŠ¥ (ìµœì†Œ 5ëª…). | ë¹„ì¦ˆë‹ˆìŠ¤ íŒ€. |
| **API: Haiku** | ì…ë ¥ 1ë°±ë§Œ í† í°ë‹¹ $0.25 | ê°€ì¥ ë¹ ë¥´ê³  ì €ë ´í•œ ëª¨ë¸. | ê°„ë‹¨í•˜ê³  ëŒ€ëŸ‰ì˜ ì‘ì—…. |
| **API: 3.5 Sonnet** | ì…ë ¥ 1ë°±ë§Œ í† í°ë‹¹ $3.00 | ì†ë„ì™€ ì§€ëŠ¥ì˜ ê· í˜•. | ì¼ë°˜ì ì¸ ê°œë°œ, ë¶„ì„. |
| **API: Opus** | ì…ë ¥ 1ë°±ë§Œ í† í°ë‹¹ $15.00 | ê°€ì¥ ê°•ë ¥í•˜ë©° ë³µì¡í•œ ì¶”ë¡ ì— ì‚¬ìš©. | ì¤‘ìš”í•˜ê³  ë³µì¡í•œ ì‘ì—…. |

### **6.3. ì •ë©´ ëŒ€ê²°: SuperClaude vs. GitHub Copilot**

AI ì½”ë“œ ì§€ì›ì˜ ë‘ ê°€ì§€ ì£¼ìš” íŒ¨ëŸ¬ë‹¤ì„ì„ ë¹„êµí•˜ëŠ” ê²ƒì€ ë§ì€ ê°œë°œìë“¤ì˜ ê´€ì‹¬ì‚¬ì…ë‹ˆë‹¤.13

| ì¸¡ë©´ | SuperClaude (with Claude Code) | GitHub Copilot | ê²°ë¡  ë° ì¶”ì²œ ëŒ€ìƒ |
| :---- | :---- | :---- | :---- |
| **í•µì‹¬ ì² í•™** | **ê·œìœ¨ ë° ì¶”ë¡ :** ì „ë¬¸ íŒŒíŠ¸ë„ˆë¡œì„œ ì—”ì§€ë‹ˆì–´ë§ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°•ì œ.1 | **ì†ë„ ë° ìë™ ì™„ì„±:** ë¹ ë¥´ê³  'ì´ˆëŠ¥ë ¥ì ì¸' í˜ì–´ í”„ë¡œê·¸ë˜ë¨¸ì²˜ëŸ¼ ì½”ë“œ ì œì•ˆ.13 | **SuperClaude:** ê¹Šì€ ì‚¬ê³ ê°€ í•„ìš”í•œ ë³µì¡í•œ í”„ë¡œì íŠ¸. **Copilot:** ì¼ìƒì ì¸ ì½”ë”© ê°€ì†í™”. |
| **í†µí•©ì„±** | **í„°ë¯¸ë„ ì¤‘ì‹¬:** ëª…ë ¹ì¤„ê³¼ ê¹Šì´ í†µí•©.24 ì„¤ì •ì´ ë³µì¡í•  ìˆ˜ ìˆìŒ(WSL).8 | **IDE ë„¤ì´í‹°ë¸Œ:** VS Code, JetBrains ë“±ì— ì™„ë²½í•˜ê²Œ í†µí•©.14 | **Copilot:** ë§ˆì°° ì—†ëŠ” ì¸-ì—ë””í„° ì§€ì›ì„ ì›í•˜ëŠ” ì‚¬ìš©ì. |
| **ì¶”ë¡  ê¹Šì´** | **ìš°ìˆ˜:** ì¥ë¬¸ ì¶”ë¡ , ë‹¤ë‹¨ê³„ ë¬¸ì œ í•´ê²°, 'ì™œ'ë¥¼ ì„¤ëª…í•˜ëŠ” ë° íƒì›”.13 | **ì§§ì€ ì»¨í…ìŠ¤íŠ¸:** ì½”ë“œ ì™„ì„±ê¸°ì²˜ëŸ¼ ì‘ë™í•˜ë©°, ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸ì‹ì— ì–´ë ¤ì›€ì„ ê²ªì„ ìˆ˜ ìˆìŒ.23 | **SuperClaude:** ë””ë²„ê¹…, ì•„í‚¤í…ì²˜ ì„¤ê³„, ìƒˆë¡œìš´ ê°œë… í•™ìŠµ. |
| **ììœ¨ì„±** | **ë†’ìŒ:** ëª…ë ¹ì–´ ì‹¤í–‰, íŒŒì¼ í¸ì§‘ ë“± ì „ì²´ ì›Œí¬í”Œë¡œìš°ë¥¼ ììœ¨ì ìœ¼ë¡œ ê´€ë¦¬ ê°€ëŠ¥.22 | **ë‚®ìŒ:** ì£¼ë¡œ ì½”ë“œë¥¼ ì œì•ˆí•˜ë©°, ììœ¨ì ì¸ í–‰ë™ì€ ì œí•œì . | **SuperClaude:** AIê°€ ì£¼ë„í•˜ëŠ” ì—ì´ì „íŠ¸ ì›Œí¬í”Œë¡œìš°. |
| **ë¹„ìš© ëª¨ë¸** | í”„ë ˆì„ì›Œí¬ëŠ” ë¬´ë£Œì§€ë§Œ, í„°ë¯¸ë„ ì ‘ê·¼ì„ ìœ„í•´ ë¹„ì‹¼ Claude Max(ì›” $100 ì´ìƒ) ë˜ëŠ” API ì‚¬ìš© í•„ìš”.6 | ìƒëŒ€ì ìœ¼ë¡œ ì €ë ´í•œ êµ¬ë…ë£Œ(ì›” $10-$20)ì— í¬í•¨.13 | **Copilot:** ê°œì¸ ê°œë°œìì—ê²Œ ë” ì ‘ê·¼í•˜ê¸° ì‰¬ìš´ ê°€ê²©ëŒ€. |

### **6.4. ì‹œì¥ì˜ ëŒ€ì•ˆë“¤: ê°„ëµí•œ ê°œìš”**

SuperClaudeë‚˜ Copilotì´ ì í•©í•˜ì§€ ì•Šì€ ì‚¬ìš©ìë¥¼ ìœ„í•´ ë‹¤ë¥¸ ë„êµ¬ë“¤ë„ ì¡´ì¬í•©ë‹ˆë‹¤.25

* **Cursor:** ê°•ë ¥í•œ ì—ì´ì „íŠ¸ ê¸°ëŠ¥ê³¼ ì½”ë“œë² ì´ìŠ¤ ì¸ì‹ì„ ì œê³µí•˜ëŠ” 'AI ë„¤ì´í‹°ë¸Œ' IDE.6  
* **Aider:** Git ì¤‘ì‹¬ì ì¸ ì‚¬ìš©ìë¥¼ ìœ„í•œ, Gitê³¼ ê¹Šì´ í†µí•©ëœ í„°ë¯¸ë„ ê¸°ë°˜ ë„êµ¬.24  
* **DeepSeek Coder:** ì½”ë”© ëŠ¥ë ¥ìœ¼ë¡œ í˜¸í‰ë°›ëŠ” ê°•ë ¥í•œ ì˜¤í”ˆì†ŒìŠ¤ ëª¨ë¸.25  
* **Kimi K2 / OpenRouter:** Kimi K2ì™€ ê°™ì€ ê°•ë ¥í•˜ê³  ë¹„ìš© íš¨ìœ¨ì ì¸ ëª¨ë¸ì„ OpenRouterì™€ ê°™ì€ ë¼ìš°í„°ë¥¼ í†µí•´ SuperClaudeì™€ ê°™ì€ í”„ë ˆì„ì›Œí¬ì™€ ê²°í•©í•˜ì—¬ ì „ë¬¸ê°€ ìˆ˜ì¤€ì˜ ë§ì¶¤í˜• ìŠ¤íƒì„ êµ¬ì¶•í•˜ëŠ” ì „ëµ.28

---

## **7ë¶€: ê²°ë¡  \- AI ì¦ê°• ì—”ì§€ë‹ˆì–´ë§ì˜ ë¯¸ë˜**

ì´ ë§ˆì§€ë§‰ ì„¹ì…˜ì€ í•µì‹¬ ë‚´ìš©ì„ ìš”ì•½í•˜ê³  SuperClaudeì™€ AI ê¸°ë°˜ ê°œë°œ ë¶„ì•¼ì˜ ë¯¸ë˜ë¥¼ ì¡°ë§í•©ë‹ˆë‹¤.

### **7.1. SuperClaudeì˜ ê°€ì¹˜ ì œì•ˆ ìš”ì•½**

SuperClaudeì˜ í•µì‹¬ ê°•ì ì€ ì¼ë°˜ì ì¸ AIë¥¼ ê·œìœ¨ ì¡íŒ ì „ë¬¸ê°€ íŒ€ìœ¼ë¡œ ë³€ëª¨ì‹œí‚¤ê³ , Git ê¸°ë°˜ ë©”ëª¨ë¦¬ë¡œ AI ê¸°ì–µ ìƒì‹¤ ë¬¸ì œë¥¼ í•´ê²°í•˜ë©°, ì—„ê²©í•œ ê·œì¹™ ê¸°ë°˜ ì‹œìŠ¤í…œìœ¼ë¡œ ëª¨ë²” ì‚¬ë¡€ë¥¼ ê°•ì œí•˜ëŠ” ë° ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ê°œë°œìê°€ ì¦‰í¥ì ì¸ 'ê°ì„± ì½”ë”©(vibe coding)'ì—ì„œ ë²—ì–´ë‚˜ êµ¬ì¡°í™”ë˜ê³  ì „ë¬¸ì ì´ë©° ë§¤ìš° íš¨ê³¼ì ì¸ ì—”ì§€ë‹ˆì–´ë§ í”„ë¡œì„¸ìŠ¤ë¡œ ë‚˜ì•„ê°€ë„ë¡ ë•ìŠµë‹ˆë‹¤.2

### **7.2. v4ì™€ ê·¸ ë„ˆë¨¸ë¥¼ í–¥í•œ ê¸¸**

SuperClaudeëŠ” í™œë°œí•˜ê³  ë¯¸ë˜ ì§€í–¥ì ì¸ í”„ë¡œì íŠ¸ì´ë©°, v4ì— ëŒ€í•œ ê³„íšì€ ì´ë¥¼ ì˜ ë³´ì—¬ì¤ë‹ˆë‹¤.

* **ì¬ì„¤ê³„ëœ Hooks ì‹œìŠ¤í…œ:** ë” ê²¬ê³ í•˜ê³  ë²„ê·¸ê°€ ì ì€ ë§ì¶¤í˜• ìë™í™” ì‹œìŠ¤í…œ.  
* **ê´‘ë²”ìœ„í•œ CLI ì§€ì›:** Claude Codeë¥¼ ë„˜ì–´ ë‹¤ë¥¸ AI ì½”ë”© ì–´ì‹œìŠ¤í„´íŠ¸ë¥¼ ì§€ì›í•˜ë ¤ëŠ” ê³„íšì€ ì‚¬ìš©ì ê¸°ë°˜ì„ ê·¹ì ìœ¼ë¡œ í™•ì¥í•˜ê³  SuperClaudeë¥¼ ë³´í¸ì ì¸ 'AI ê·œìœ¨ í”„ë ˆì„ì›Œí¬'ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ì¤‘ìš”í•œ ì „ëµì  ì›€ì§ì„ì…ë‹ˆë‹¤.  
* **í–¥ìƒëœ í˜ë¥´ì†Œë‚˜ ë° MCP:** í•µì‹¬ ê¸°ëŠ¥ì˜ ì§€ì†ì ì¸ í™•ì¥.

### **7.3. ìµœì¢… ì†Œê³ : AIë¡œ í”„ë¡¬í”„íŒ…í•˜ëŠ” ê²ƒì„ ë„˜ì–´, AIë¡œ ì—”ì§€ë‹ˆì–´ë§í•˜ê¸°**

SuperClaudeì™€ ê°™ì€ ë„êµ¬ì˜ ë“±ì¥ì€ AI ê°œë°œ í™˜ê²½ì´ ì„±ìˆ™í•˜ê³  ìˆìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ë¯¸ë˜ëŠ” ë‹¨ìˆœíˆ AIì—ê²Œ í”„ë¡¬í”„íŠ¸ë¥¼ ë˜ì§ˆ ìˆ˜ ìˆëŠ” ì‚¬ëŒì´ ì•„ë‹ˆë¼, AIë¥¼ ê°€ì§€ê³  ì—”ì§€ë‹ˆì–´ë§í•  ìˆ˜ ìˆëŠ” ì‚¬ëŒì˜ ê²ƒì…ë‹ˆë‹¤. ì¦‰, ì „ë¬¸ê°€ ìˆ˜ì¤€ì˜ ê²°ê³¼ë¥¼ ë‹¬ì„±í•˜ê¸° ìœ„í•´ ë³µì¡í•œ AI ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œì„ êµ¬ì¶•, ê´€ë¦¬ ë° ì§€íœ˜í•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì´ ì¤‘ìš”í•´ì§ˆ ê²ƒì…ë‹ˆë‹¤. SuperClaudeëŠ” ì´ëŸ¬í•œ ë³€í™”ì˜ ì¤‘ì‹¬ì— ìˆëŠ” í•µì‹¬ ë„êµ¬ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤.

#### **ì°¸ê³  ìë£Œ**

1. SuperClaude: Power Up Your Claude Code Instantly \- Apidog, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://apidog.com/blog/superclaude/](https://apidog.com/blog/superclaude/)  
2. Upgrade Your Claude Code Workflow (The Pro SuperClaude Method) \- YouTube, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://www.youtube.com/watch?v=Ph\_Pbaqn2EM](https://www.youtube.com/watch?v=Ph_Pbaqn2EM)  
3. SuperClaude \- Advanced Development Framework for Claude Code ..., 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://superclaude.org/](https://superclaude.org/)  
4. I Present : SuperClaude \! : r/ClaudeAI \- Reddit, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://www.reddit.com/r/ClaudeAI/comments/1lhmts3/i\_present\_superclaude/](https://www.reddit.com/r/ClaudeAI/comments/1lhmts3/i_present_superclaude/)  
5. Full Tutorial: Build an App with Multiple AI Agents (Claude Code) \- YouTube, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://www.youtube.com/watch?v=Z\_iWe6dyGzs](https://www.youtube.com/watch?v=Z_iWe6dyGzs)  
6. Claude AI pricing : r/ClaudeAI \- Reddit, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://www.reddit.com/r/ClaudeAI/comments/1kxet49/claude\_ai\_pricing/](https://www.reddit.com/r/ClaudeAI/comments/1kxet49/claude_ai_pricing/)  
7. How Much Does Claude AI Cost? \- Tactiq, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://tactiq.io/learn/claude-ai-cost](https://tactiq.io/learn/claude-ai-cost)  
8. This AI Tool Built My Web App In Minutes (SuperClaude for Claude Code) \- YouTube, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://www.youtube.com/watch?v=76\_8ygZtios](https://www.youtube.com/watch?v=76_8ygZtios)  
9. How to Install Claude Code on Windows: Complete 2025 Guide \- iTecs, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://itecsonline.com/post/how-to-install-claude-code-on-windows](https://itecsonline.com/post/how-to-install-claude-code-on-windows)  
10. SuperClaude-Org/SuperClaude\_Framework: A configuration framework that enhances Claude Code with specialized commands, cognitive personas, and development methodologies. \- GitHub, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://github.com/SuperClaude-Org/SuperClaude\_Framework](https://github.com/SuperClaude-Org/SuperClaude_Framework)  
11. SUPERCHARGE Claude Code \- BEST AI Coder\! BYE Gemini CLI & OpenCode\! \- YouTube, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://www.youtube.com/watch?v=tBOlhMajWfE](https://www.youtube.com/watch?v=tBOlhMajWfE)  
12. SuperClaude v3 \- Advanced Development Framework for Claude Code, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://superclaude-org.github.io/](https://superclaude-org.github.io/)  
13. I tested Claude vs GitHub Copilot with 5 coding prompts â€“ Here's my winner, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://techpoint.africa/guide/claude-vs-github-copilot-for-coding/](https://techpoint.africa/guide/claude-vs-github-copilot-for-coding/)  
14. Claude Dev vs GitHub Copilot: The AI Coding Assistant Showdown | by Joe Wilson, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://medium.com/@dingersandks/claude-dev-vs-github-copilot-the-ai-coding-assistant-showdown-9d86438afb9d](https://medium.com/@dingersandks/claude-dev-vs-github-copilot-the-ai-coding-assistant-showdown-9d86438afb9d)  
15. This Supercharging CLAUDE CODE Toolkit is AMAZING\! \- YouTube, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://www.youtube.com/watch?v=apr0AZ\_vj3Q](https://www.youtube.com/watch?v=apr0AZ_vj3Q)  
16. 1ì›” 1, 1970ì— ì•¡ì„¸ìŠ¤, [https.github.com/NomenAK/SuperClaude/blob/master/Docs/personas-guide.md](http://docs.google.com/https.github.com/NomenAK/SuperClaude/blob/master/Docs/personas-guide.md)  
17. 1ì›” 1, 1970ì— ì•¡ì„¸ìŠ¤, [https://github.com/NomenAK/SuperClaude/blob/master/Docs/flags-guide.md](https://github.com/NomenAK/SuperClaude/blob/master/Docs/flags-guide.md)  
18. \[Bug\] @include shared/constants.yml\#Process\_Symbols (user) Â· Issue \#12 Â· NomenAK/SuperClaude \- GitHub, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://github.com/NomenAK/SuperClaude/issues/12](https://github.com/NomenAK/SuperClaude/issues/12)  
19. Multi-Persona Task Orchestration & Automatic Workflow Chaining Â· Issue \#114 Â· NomenAK/SuperClaude \- GitHub, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://github.com/NomenAK/SuperClaude/issues/114](https://github.com/NomenAK/SuperClaude/issues/114)  
20. SuperClaudeç´ æŒ¯ã‚Š \- Zenn, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://zenn.dev/mmrakt/scraps/b4f71b2548f4e0](https://zenn.dev/mmrakt/scraps/b4f71b2548f4e0)  
21. Claude AI Pricing Guide 2025: Complete Cost Breakdown (Free, Pro, Max, API) \- ScreenApp, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://screenapp.io/blog/claude-ai-pricing](https://screenapp.io/blog/claude-ai-pricing)  
22. AI vs Developer: Can GitHub Copilot or Claude Action Replace My Job? \- YouTube, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://www.youtube.com/watch?v=ahTkFqssZxM](https://www.youtube.com/watch?v=ahTkFqssZxM)  
23. Github Copilot vs. Claude : r/GithubCopilot \- Reddit, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://www.reddit.com/r/GithubCopilot/comments/1ezrjkr/github\_copilot\_vs\_claude/](https://www.reddit.com/r/GithubCopilot/comments/1ezrjkr/github_copilot_vs_claude/)  
24. Claude, Cursor, Aider, Cline, Copilot: Which Is the Best One? | by Edwin Lisowski \- Medium, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://medium.com/@elisowski/claude-cursor-aider-cline-copilot-which-is-the-best-one-ef1a47eaa1e6](https://medium.com/@elisowski/claude-cursor-aider-cline-copilot-which-is-the-best-one-ef1a47eaa1e6)  
25. 7 Best Claude AI Alternatives to Use in 2025 \- Cabina.AI, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://cabina.ai/blog/7-best-claude-ai-alternatives-to-use/](https://cabina.ai/blog/7-best-claude-ai-alternatives-to-use/)  
26. Exploring 8 Best Claude AI Alternatives in 2025: When to Switch and Why \- Medium, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://medium.com/@CherryZhouTech/exploring-8-best-claude-ai-alternatives-when-to-switch-and-why-f3a552a45835](https://medium.com/@CherryZhouTech/exploring-8-best-claude-ai-alternatives-when-to-switch-and-why-f3a552a45835)  
27. 18 Best Claude AI Alternatives (2024) \- Exploding Topics, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://explodingtopics.com/blog/claude-alternatives](https://explodingtopics.com/blog/claude-alternatives)  
28. Kimi K2 \+ SuperClaude: The Ultimate AI Stack (Tutorial) \- YouTube, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://www.youtube.com/watch?v=-K4fT8eP2qU](https://www.youtube.com/watch?v=-K4fT8eP2qU)
</file>

<file path="references/superclaude_commands_guide_workly.md">
# SuperClaude ëª…ë ¹ì–´ ê°€ì´ë“œ (Workly í”„ë¡œì íŠ¸ìš©)

ì´ ë¬¸ì„œëŠ” Workly í”„ë¡œì íŠ¸ì—ì„œ SuperClaude AI ì—ì´ì „íŠ¸ì˜ ëª…ë ¹ì–´ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ê³µì‹ ê°€ì´ë“œë¥¼ ìš”ì•½í•˜ê³  í”„ë¡œì íŠ¸ì— ë§ê²Œ ì¡°ì •í•œ ë²„ì „ì…ë‹ˆë‹¤.

---

## í•µì‹¬ ëª…ë ¹ì–´ (Quick Start)

ìš°ì„  ì´ê²ƒë¶€í„° ì‚¬ìš©í•´ë³´ì„¸ìš”. ëŒ€ë¶€ë¶„ì˜ ì‘ì—…ì€ ì•„ë˜ ëª…ë ¹ì–´ë¡œ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
# ì½”ë“œë² ì´ìŠ¤ ë¶„ì„ (ë³´ì•ˆ, ì„±ëŠ¥, ì•„í‚¤í…ì²˜ ë“±)
/sc:analyze frontend/src/app

# ê¸°ëŠ¥ êµ¬í˜„ (ì»´í¬ë„ŒíŠ¸, API, ì„œë¹„ìŠ¤ ë“±)
/sc:implement UserProfile component --framework react --with-tests

# í”„ë¡œì íŠ¸ ë¹Œë“œ (frontend/backend)
/sc:build

# ì½”ë“œ ê°œì„  (ë¦¬íŒ©í† ë§, ìµœì í™”)
/sc:improve frontend/src/lib/api.ts --safe

# ë¬¸ì œ í•´ê²° ë° ë””ë²„ê¹…
/sc:troubleshoot "API returning 500" --logs server.log

# í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° ì»¤ë²„ë¦¬ì§€ ë¶„ì„
/sc:test --type unit --coverage
```

---

## ì „ì²´ ëª…ë ¹ì–´ ìš”ì•½í‘œ

| ëª…ë ¹ì–´ | ì£¼ìš” ê¸°ëŠ¥ | ìë™ í™œì„±í™” ì „ë¬¸ê°€ | ì¶”ì²œ ì‚¬ìš© ì‚¬ë¡€ |
|---|---|---|---|
| `/sc:analyze` | ì½”ë“œ ë¶„ì„ (í’ˆì§ˆ, ë³´ì•ˆ, ì„±ëŠ¥) | ë³´ì•ˆ/ì„±ëŠ¥ ì „ë¬¸ê°€ | ì½”ë“œë² ì´ìŠ¤ ì´í•´, ë¬¸ì œì  íƒìƒ‰ |
| `/sc:build` | í”„ë¡œì íŠ¸ ë¹Œë“œ ë° ì»´íŒŒì¼ | í”„ë¡ íŠ¸ì—”ë“œ/ë°±ì—”ë“œ ì „ë¬¸ê°€ | ì»´íŒŒì¼, ë²ˆë“¤ë§, ë°°í¬ ì¤€ë¹„ |
| `/sc:implement` | ê¸°ëŠ¥ êµ¬í˜„ (ì»´í¬ë„ŒíŠ¸, API ë“±) | ë„ë©”ì¸ë³„ ì „ë¬¸ê°€ | ì‹ ê·œ ê¸°ëŠ¥, ì»´í¬ë„ŒíŠ¸, API, ì„œë¹„ìŠ¤ ê°œë°œ |
| `/sc:improve` | ì½”ë“œ ìë™ ê°œì„  | í’ˆì§ˆ ì „ë¬¸ê°€ | ë¦¬íŒ©í† ë§, ìµœì í™”, í’ˆì§ˆ í–¥ìƒ |
| `/sc:troubleshoot` | ë¬¸ì œ í•´ê²° ë° ë””ë²„ê¹… | ë””ë²„ê¹… ì „ë¬¸ê°€ | ë””ë²„ê¹…, ì´ìŠˆ ì›ì¸ ë¶„ì„ |
| `/sc:test` | í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° ë¶„ì„ | QA ì „ë¬¸ê°€ | í…ŒìŠ¤íŠ¸ ì‹¤í–‰, ì»¤ë²„ë¦¬ì§€ ë¶„ì„ |
| `/sc:document` | ë¬¸ì„œ ìë™ ìƒì„± | ë¬¸ì„œí™” ì „ë¬¸ê°€ | README, ì½”ë“œ ì£¼ì„, ê°€ì´ë“œ ì‘ì„± |
| `/sc:git` | Git ì›Œí¬í”Œë¡œìš° í–¥ìƒ | DevOps ì „ë¬¸ê°€ | ìŠ¤ë§ˆíŠ¸ ì»¤ë°‹, ë¸Œëœì¹˜ ê´€ë¦¬ |
| `/sc:design` | ì‹œìŠ¤í…œ ì„¤ê³„ ì§€ì› | ì•„í‚¤í…ì²˜ ì „ë¬¸ê°€ | ì•„í‚¤í…ì²˜ ì„¤ê³„, API ë””ìì¸ |
| `/sc:explain` | ì½”ë“œ ë° ê°œë… ì„¤ëª… | êµìœ¡ ì „ë¬¸ê°€ | ì½”ë“œ ë° ê¸°ìˆ  ê°œë… í•™ìŠµ |
| `/sc:cleanup` | ê¸°ìˆ  ë¶€ì±„ ê°ì†Œ | ë¦¬íŒ©í† ë§ ì „ë¬¸ê°€ | ë¯¸ì‚¬ìš© ì½”ë“œ ì œê±°, íŒŒì¼ êµ¬ì¡° ì •ë¦¬ |
| `/sc:load` | í”„ë¡œì íŠ¸ ì»¨í…ìŠ¤íŠ¸ ë¡œë”© | ë¶„ì„ ì „ë¬¸ê°€ | í”„ë¡œì íŠ¸ êµ¬ì¡° ë° ì½”ë“œë² ì´ìŠ¤ ì´í•´ |
| `/sc:estimate` | ì‘ì—…ëŸ‰ ì˜ˆì¸¡ | ê¸°íš ì „ë¬¸ê°€ | ì‹œê°„/ë¦¬ì†ŒìŠ¤ ê³„íš, ë³µì¡ë„ ë¶„ì„ |
| `/sc:workflow` | PRD ê¸°ë°˜ êµ¬í˜„ ê³„íš ìˆ˜ë¦½ | ì›Œí¬í”Œë¡œìš° ì‹œìŠ¤í…œ | PRDë¥¼ ë‹¨ê³„ë³„ ì‹¤í–‰ ê³„íšìœ¼ë¡œ ë³€í™˜ |
| `/sc:index` | ëª…ë ¹ì–´ ê²€ìƒ‰ ë° íƒìƒ‰ | ë„ì›€ë§ ì‹œìŠ¤í…œ | íŠ¹ì • ì‘ì—…ì— ì í•©í•œ ëª…ë ¹ì–´ ê²€ìƒ‰ |

---

## ì£¼ìš” ëª…ë ¹ì–´ ìƒì„¸ ê°€ì´ë“œ

### `/implement`: ê¸°ëŠ¥ êµ¬í˜„
**ê¸°ëŠ¥**: ìƒˆë¡œìš´ ê¸°ëŠ¥, ì»´í¬ë„ŒíŠ¸, API, ì„œë¹„ìŠ¤ ë“±ì„ ì§€ëŠ¥ì ìœ¼ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤.
**ì‚¬ìš© ì‹œì **:
- ìƒˆë¡œìš´ React ì»´í¬ë„ŒíŠ¸ë‚˜ Next.js í˜ì´ì§€ë¥¼ ë§Œë“¤ ë•Œ
- ìƒˆë¡œìš´ NestJS ëª¨ë“ˆì´ë‚˜ ì„œë¹„ìŠ¤ë¥¼ êµ¬í˜„í•  ë•Œ
- í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í¬í•¨í•œ ê¸°ëŠ¥ ê°œë°œì´ í•„ìš”í•  ë•Œ

**ê¸°ë³¸ êµ¬ë¬¸**:
```bash
/sc:implement [êµ¬í˜„í•  ë‚´ìš©]
/sc:implement --type [íƒ€ì…] [ì´ë¦„]
```

**ìœ ìš©í•œ í”Œë˜ê·¸**:
- `--type component|api|service|feature|module`: êµ¬í˜„í•  ì½”ë“œì˜ ì¢…ë¥˜ ì§€ì •
- `--framework react|nextjs|nestjs`: íŠ¹ì • í”„ë ˆì„ì›Œí¬ ì§€ì •
- `--with-tests`: í…ŒìŠ¤íŠ¸ ì½”ë“œ í•¨ê»˜ ìƒì„±
- `--safe`: ë³´ìˆ˜ì ì¸(ì•ˆì „í•œ) ë°©ì‹ìœ¼ë¡œ ì½”ë“œ ìƒì„±

**Workly í”„ë¡œì íŠ¸ ì˜ˆì‹œ**:
```bash
# frontend: ìƒˆë¡œìš´ ì¸ì¦ ê´€ë ¨ UI ì»´í¬ë„ŒíŠ¸ ìƒì„±
/sc:implement --type component AuthForm --framework react --with-tests

# backend: ì‚¬ìš©ì í”„ë¡œí•„ ê´€ë¦¬ë¥¼ ìœ„í•œ API ë° ì„œë¹„ìŠ¤ êµ¬í˜„
/sc:implement user profile management --type feature --framework nestjs

# shared: ìƒˆë¡œìš´ íƒ€ì… ì •ì˜ ì¶”ê°€
/sc:implement --type module shared/types/new-feature.types.ts
```

### `/analyze`: ì½”ë“œ ë¶„ì„
**ê¸°ëŠ¥**: ì½”ë“œ í’ˆì§ˆ, ë³´ì•ˆ, ì„±ëŠ¥, ì•„í‚¤í…ì²˜ë¥¼ ì¢…í•©ì ìœ¼ë¡œ ë¶„ì„í•©ë‹ˆë‹¤.
**ì‚¬ìš© ì‹œì **:
- ì½”ë“œ ë¦¬ë·° ì „ ì ì¬ì ì¸ ë¬¸ì œì ì„ ì°¾ê³  ì‹¶ì„ ë•Œ
- íŠ¹ì • ë¶€ë¶„ì˜ ì„±ëŠ¥ ë³‘ëª© í˜„ìƒì„ ë¶„ì„í•  ë•Œ
- ë³´ì•ˆ ì·¨ì•½ì ì„ ì ê²€í•  ë•Œ

**ê¸°ë³¸ êµ¬ë¬¸**:
```bash
/sc:analyze [ë¶„ì„í•  ê²½ë¡œ]
```

**ìœ ìš©í•œ í”Œë˜ê·¸**:
- `--focus quality|security|performance|architecture`: ë¶„ì„ ì´ˆì  ì§€ì •
- `--depth quick|deep`: ë¶„ì„ ê¹Šì´ ì¡°ì ˆ
- `--format report|json`: ê²°ê³¼ í¬ë§· ì§€ì •

**Workly í”„ë¡œì íŠ¸ ì˜ˆì‹œ**:
```bash
# backend: ë³´ì•ˆ ì·¨ì•½ì  ì‹¬ì¸µ ë¶„ì„
/sc:analyze backend/src --focus security --depth deep

# frontend: ì„±ëŠ¥ ê´€ë ¨ ë¶„ì„
/sc:analyze frontend/src/app --focus performance

# ì „ì²´ í”„ë¡œì íŠ¸: í’ˆì§ˆ ë¶„ì„ ë³´ê³ ì„œ ìƒì„±
/sc:analyze . --focus quality --format report
```

### `/improve`: ì½”ë“œ ê°œì„ 
**ê¸°ëŠ¥**: ì½”ë“œ í’ˆì§ˆ, ì„±ëŠ¥, ìœ ì§€ë³´ìˆ˜ì„±ì„ ì²´ê³„ì ìœ¼ë¡œ ê°œì„ í•©ë‹ˆë‹¤. (ë¦¬íŒ©í† ë§)
**ì‚¬ìš© ì‹œì **:
- ì˜¤ë˜ë˜ê±°ë‚˜ ë³µì¡í•œ ì½”ë“œë¥¼ ì •ë¦¬í•  ë•Œ
- ì„±ëŠ¥ ìµœì í™”ê°€ í•„ìš”í•  ë•Œ
- ì½”ë“œ ìŠ¤íƒ€ì¼ì„ ì¼ê´€ì„± ìˆê²Œ ë§ì¶”ê³  ì‹¶ì„ ë•Œ

**ê¸°ë³¸ êµ¬ë¬¸**:
```bash
/sc:improve [ê°œì„ í•  íŒŒì¼ ë˜ëŠ” ê²½ë¡œ]
```

**ìœ ìš©í•œ í”Œë˜ê·¸**:
- `--type quality|performance|style`: ê°œì„  ì´ˆì  ì§€ì •
- `--safe`: ìœ„í—˜ë„ê°€ ë‚®ì€ ë³€ê²½ì‚¬í•­ë§Œ ì ìš©
- `--preview`: ë³€ê²½ë  ë‚´ìš©ì„ ë¯¸ë¦¬ë³´ê¸°ë§Œ ì‹¤í–‰ (ì‹¤ì œ ì ìš© X)

**Workly í”„ë¡œì íŠ¸ ì˜ˆì‹œ**:
```bash
# íŠ¹ì • íŒŒì¼ ê°œì„  ì „ ë¯¸ë¦¬ë³´ê¸°
/sc:improve --preview frontend/src/lib/utils.ts

# backend API ì½”ë“œ ì„±ëŠ¥ ìœ„ì£¼ë¡œ ì•ˆì „í•˜ê²Œ ê°œì„ 
/sc:improve --type performance --safe backend/src/modules/tasks/

# ì „ì²´ í”„ë¡œì íŠ¸ ì½”ë“œ ìŠ¤íƒ€ì¼ ì •ë¦¬
/sc:improve --type style . --safe
```
**íŒ**: ì ìš©í•˜ê¸° ì „ì— í•­ìƒ `--preview` í”Œë˜ê·¸ë¡œ ë³€ê²½ ì‚¬í•­ì„ ë¨¼ì € í™•ì¸í•˜ëŠ” ê²ƒì´ ì•ˆì „í•©ë‹ˆë‹¤.

### `/test`: í…ŒìŠ¤íŠ¸
**ê¸°ëŠ¥**: í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ê³ , ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸ë¥¼ ìƒì„±í•˜ë©°, í…ŒìŠ¤íŠ¸ í’ˆì§ˆì„ ìœ ì§€í•©ë‹ˆë‹¤.
**ì‚¬ìš© ì‹œì **:
- ë‹¨ìœ„/í†µí•©/E2E í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•  ë•Œ
- ì½”ë“œ ë³€ê²½ í›„ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ë¥¼ í™•ì¸í•  ë•Œ

**ê¸°ë³¸ êµ¬ë¬¸**:
```bash
/sc:test
```

**ìœ ìš©í•œ í”Œë˜ê·¸**:
- `--type unit|integration|e2e|all`: ì‹¤í–‰í•  í…ŒìŠ¤íŠ¸ íƒ€ì… ì§€ì •
- `--coverage`: ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸ ìƒì„±
- `--watch`: íŒŒì¼ ë³€ê²½ì„ ê°ì§€í•˜ì—¬ ìë™ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰

**Workly í”„ë¡œì íŠ¸ ì˜ˆì‹œ**:
```bash
# frontend ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° ì»¤ë²„ë¦¬ì§€ í™•ì¸
/sc:test frontend --type unit --coverage

# backend í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰
/sc:test backend --type integration

# íŠ¹ì • ì»´í¬ë„ŒíŠ¸ ë³€ê²½ì‚¬í•­ ê°ì§€í•˜ë©° í…ŒìŠ¤íŠ¸
/sc:test --watch frontend/src/components/ui/
```

### `/git`: Git ì—°ë™
**ê¸°ëŠ¥**: ì§€ëŠ¥ì ì¸ ì»¤ë°‹ ë©”ì‹œì§€ ìƒì„± ë“± Git ì‘ì—…ì„ ë³´ì¡°í•©ë‹ˆë‹¤.
**ì‚¬ìš© ì‹œì **:
- ì˜ë¯¸ ìˆëŠ” ì»¤ë°‹ ë©”ì‹œì§€ë¥¼ ì‘ì„±í•˜ê¸° ì–´ë ¤ìš¸ ë•Œ
- ë¸Œëœì¹˜ ê´€ë¦¬ ì „ëµì„ ì ìš©í•˜ê³  ì‹¶ì„ ë•Œ

**ê¸°ë³¸ êµ¬ë¬¸**:
```bash
/sc:git commit
/sc:git --smart-commit add .
```

**Workly í”„ë¡œì íŠ¸ ì˜ˆì‹œ**:
```bash
# ë³€ê²½ì‚¬í•­ ìŠ¤í…Œì´ì§• í›„ ì§€ëŠ¥ì ìœ¼ë¡œ ì»¤ë°‹ ë©”ì‹œì§€ ìƒì„± ë° ì»¤ë°‹
git add .
/sc:git --smart-commit

# ì»¤ë°‹ ë©”ì‹œì§€ë§Œ ìƒì„± (ì‹¤ì œ ì»¤ë°‹ì€ ì§ì ‘ ì‹¤í–‰)
/sc:git --smart-commit "fix: user login bug"
```
**íŒ**: ìƒì„±ëœ ì»¤ë°‹ ë©”ì‹œì§€ëŠ” ìµœì¢… ì œì¶œ ì „ì— í•­ìƒ ì§ì ‘ ê²€í† í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
</file>

<file path="references/Task-master-ai Guide.md">
# **Taskmaster AI ìµœì¢… ê°€ì´ë“œ: PRDë¶€í„° í”„ë¡œë•ì…˜ê¹Œì§€, ì—ì´ì „íŠ¸ ê¸°ë°˜ ê°œë°œ ë§ˆìŠ¤í„°í•˜ê¸°**

## **1ë¶€: êµ¬ì¡°í™”ëœ AI ê°œë°œì˜ ê¸°ì´ˆ**

ì´ íŒŒíŠ¸ì—ì„œëŠ” Taskmaster AIì˜ ê¸°ë³¸ ê°œë…ì„ ì •ë¦½í•˜ê³ , ê·¸ ì •ì²´ì„±ì„ ëª…í™•íˆ í•˜ë©°, í•„ìˆ˜ì ì¸ ì„¤ì¹˜ ì§€ì¹¨ì„ ì œê³µí•©ë‹ˆë‹¤. ì‚¬ìš©ìê°€ ì •í™•í•˜ê³  ì•ˆì •ì ì¸ ê¸°ë°˜ ìœ„ì—ì„œ ì‹œì‘í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.

### **1ì¥: Taskmaster AI í•´ë¶€**

#### **1.1. "AI ì—ì´ì „íŠ¸ë¥¼ ìœ„í•œ í”„ë¡œì íŠ¸ ë§¤ë‹ˆì €": í•µì‹¬ ì² í•™ê³¼ ê°€ì¹˜ ì œì•ˆ**

Taskmaster AIì˜ í•µì‹¬ ì „ì œëŠ” ì½”ë”© ì‘ì—…ì—ì„œ ì¢…ì¢… í˜¼ë€ìŠ¤ëŸ½ê³  ë¹„ê²°ì •ì ìœ¼ë¡œ ì‘ë™í•˜ëŠ” ëŒ€ê·œëª¨ ì–¸ì–´ ëª¨ë¸(LLM)ì˜ íŠ¹ì„±ì— êµ¬ì¡°ë¥¼ ë¶€ì—¬í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.1 ì´ ë„êµ¬ëŠ” í”„ë¡œì íŠ¸ ë§¤ë‹ˆì € ì—­í• ì„ ìˆ˜í–‰í•˜ë©°, í¬ê³  ë³µì¡í•œ ëª©í‘œë¥¼ AI ì—ì´ì „íŠ¸ê°€ í•œ ë²ˆì— í•˜ë‚˜ì”© ì•ˆì •ì ìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ì¼ë ¨ì˜ ê°œë³„ì ì´ê³  ê´€ë¦¬ ê°€ëŠ¥í•œ ì‘ì—…ìœ¼ë¡œ ë¶„í•´í•©ë‹ˆë‹¤.2 ì´ ì ‘ê·¼ ë°©ì‹ì€ ì»¨í…ìŠ¤íŠ¸ ê³¼ë¶€í•˜ë¥¼ ì œê±°í•˜ê³ , AIê°€ "ê¶¤ë„ë¥¼ ë²—ì–´ë‚˜ëŠ”" ê²ƒì„ ë°©ì§€í•˜ë©°, ì´ë¯¸ ì‘ë™í•˜ëŠ” ì½”ë“œë¥¼ ì†ìƒì‹œí‚¤ì§€ ì•Šë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.1 ìµœì¢… ëª©í‘œëŠ” AIë¥¼ ë‹¨ìˆœí•œ ì½”ë“œ ì–´ì‹œìŠ¤í„´íŠ¸ì—ì„œ ì „ì²´ í”„ë¡œì íŠ¸ë¥¼ ì„¤ê³„í•˜ê³  êµ¬ì¶•í•  ìˆ˜ ìˆëŠ” ê°œì¸ CTO ìˆ˜ì¤€ìœ¼ë¡œ ê²©ìƒì‹œí‚¤ëŠ” ê²ƒì…ë‹ˆë‹¤.4

#### **1.2. ì¤‘ì˜ì„± í•´ì†Œ: task-master.devì™€ ë‹¤ë¥¸ "Taskmaster" ë„êµ¬ë“¤ì˜ ëª…í™•í•œ êµ¬ë¶„**

ì´ ë³´ê³ ì„œëŠ” task-master.devì—ì„œ ì°¾ì„ ìˆ˜ ìˆëŠ” ì˜¤í”ˆì†ŒìŠ¤ ê°œë°œì ë„êµ¬ì™€ ê´€ë ¨ GitHub ë¦¬í¬ì§€í† ë¦¬ eyaltoledano/claude-task-masterì—ë§Œ ì´ˆì ì„ ë§ì¶¥ë‹ˆë‹¤.2

ë‹¤ìŒê³¼ ê°™ì´ ìœ ì‚¬í•œ ì´ë¦„ì˜ ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì™€ ëª…í™•íˆ êµ¬ë³„í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.

* aamanbhagat/TaskMaster-AIê°€ ê°œë°œí•œ KendoReactë¥¼ ì‚¬ìš©í•œ í”„ë¡œì íŠ¸ ê´€ë¦¬ ì• í”Œë¦¬ì¼€ì´ì…˜.8  
* taskmaster.oneì—ì„œ ì œê³µí•˜ëŠ” í•™ìƒìš© ìš”ê¸ˆì œë¥¼ ê°–ì¶˜ í•™ì—… ì§€ì› SaaS ì œí’ˆ.9  
* GitHubì—ì„œ "taskmaster" í† í”½ íƒœê·¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ë‹¤ì–‘í•œ ê¸°íƒ€ ê´€ë ¨ ì—†ëŠ” í”„ë¡œì íŠ¸ë“¤.4

ì—¬ê¸°ì„œ ë…¼ì˜í•˜ëŠ” ë„êµ¬ëŠ” AI ê¸°ë°˜ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì— íŠ¹í™”ë˜ì–´ ìˆìœ¼ë©°, ì™„ì „ ë¬´ë£Œ ì˜¤í”ˆì†ŒìŠ¤ì´ê³ , "ìì‹ ì˜ API í‚¤ ê°€ì ¸ì˜¤ê¸°(BYOK)" ëª¨ë¸ë¡œ ìš´ì˜ë©ë‹ˆë‹¤.2

AI ë¶„ì•¼ì—ì„œ "ì—ì´ì „íŠ¸"ì™€ "ì‘ì—… ê´€ë¦¬"ë¼ëŠ” ê°œë…ì„ ì¤‘ì‹¬ìœ¼ë¡œ ìš©ì–´ê°€ ìˆ˜ë ´í•˜ëŠ” ê´‘ë²”ìœ„í•œ ê²½í–¥ì´ ë‚˜íƒ€ë‚˜ë©´ì„œ, ì—¬ëŸ¬ "Taskmaster" í”„ë¡œì íŠ¸ì˜ ì¡´ì¬ëŠ” ì‚¬ìš©ì í˜¼ë€ì˜ ê°€ëŠ¥ì„±ì„ ë³´ì—¬ì¤ë‹ˆë‹¤. ì´ëŠ” ë¹ ë¥´ê²Œ í˜¼ì¡í•´ì§€ëŠ” ì‹œì¥ì—ì„œ ëª…í™•í•œ ë¸Œëœë”©ê³¼ ë¬¸ì„œí™”ì˜ í•„ìš”ì„±ì„ ê°•ì¡°í•©ë‹ˆë‹¤. "ì‘ì—…(task)"ì´ë¼ëŠ” ìš©ì–´ëŠ” ì „í†µì ì¸ í”„ë¡œì íŠ¸ ê´€ë¦¬ 8ì™€ AI í”„ë¡¬í”„íŠ¸ë¥¼ ì„¸ë¶„í™”í•˜ëŠ” ìƒˆë¡œìš´ íŒ¨ëŸ¬ë‹¤ì„ 5 ëª¨ë‘ì—ì„œ ê·¼ë³¸ì ì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ìš©ì–´ì˜ ì¤‘ë³µì€ AIê°€ ì›Œí¬í”Œë¡œìš°ì— ë” ê¹Šì´ í†µí•©ë¨ì— ë”°ë¼ ê¸°ì¡´ ë¶„ì•¼ì˜ ì–¸ì–´ë¥¼ ì°¨ìš©í•˜ë©´ì„œ ëª¨í˜¸ì„±ì´ ë°œìƒí•  ìˆ˜ ìˆìŒì„ ì‹œì‚¬í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ì´ ë³´ê³ ì„œê°€ ì œê³µí•´ì•¼ í•  í•µì‹¬ ì„œë¹„ìŠ¤ëŠ” ë„êµ¬ë¥¼ ì„¤ëª…í•˜ëŠ” ê²ƒë¿ë§Œ ì•„ë‹ˆë¼, ê·¸ ê²½ê³„ë¥¼ ëª…í™•íˆ ì •ì˜í•˜ê³  ë™ëª…ì˜ ë‹¤ë¥¸ ë„êµ¬ë“¤ê³¼ êµ¬ë³„í•˜ì—¬ ì‚¬ìš©ìê°€ ì´ ìƒˆë¡œìš´ í™˜ê²½ì„ íƒìƒ‰í•˜ëŠ” ë° í•„ìš”í•œ ëª…í™•ì„±ì„ ì œê³µí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

#### **1.3. ì„¸ ê°€ì§€ ê¸°ë‘¥: CLI, MCP ì„œë²„, ê·¸ë¦¬ê³  ê·œì¹™ ì—”ì§„**

* **ì»¤ë§¨ë“œ ë¼ì¸ ì¸í„°í˜ì´ìŠ¤(CLI):** ì§ì ‘ì ì¸ ìƒí˜¸ì‘ìš©ì„ ìœ„í•œ ê¸°ë³¸ ê³„ì¸µì…ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” í„°ë¯¸ë„ì—ì„œ task-master init, task-master parse-prdì™€ ê°™ì€ ëª…ë ¹ì„ ì§ì ‘ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.7  
* **ëª¨ë¸ ì œì–´ í”„ë¡œí† ì½œ(MCP) ì„œë²„:** Cursorë‚˜ Windsurfì™€ ê°™ì€ AI ë„¤ì´í‹°ë¸Œ IDE ë‚´ì—ì„œ ì›í™œí•œ ìƒí˜¸ì‘ìš©ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” ë‹¤ë¦¬ ì—­í• ì„ í•©ë‹ˆë‹¤. CLIì˜ ê¸°ëŠ¥ì„ AI ì—ì´ì „íŠ¸ê°€ ìì—°ì–´ í”„ë¡¬í”„íŠ¸ë¥¼ í†µí•´ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” "ë„êµ¬"ë¡œ ë…¸ì¶œì‹œí‚µë‹ˆë‹¤.5 ì´ëŠ” ì´ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê°€ì¥ ê¶Œì¥ë˜ê³  ê°•ë ¥í•œ ë°©ë²•ì…ë‹ˆë‹¤.7  
* **ê·œì¹™ ì—”ì§„:** ê³ ê¸‰ ì‚¬ìš©ì ì •ì˜ ê³„ì¸µì…ë‹ˆë‹¤. ê°œë°œìëŠ” .cursor/rules/ ë””ë ‰í† ë¦¬ì˜ .mdc íŒŒì¼ì„ í†µí•´ AIì—ê²Œ ì•„í‚¤í…ì²˜, ì½”ë”© í‘œì¤€, ì›Œí¬í”Œë¡œìš°ì— ëŒ€í•œ ì˜êµ¬ì ì´ê³  í”„ë¡œì íŠ¸ë³„ ì§€ì¹¨ì„ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.11

### **2ì¥: ì„¤ì¹˜ ë° í™˜ê²½ êµ¬ì„±**

#### **2.1. ì‚¬ì „ ìš”êµ¬ì‚¬í•­ ë° ë‹¨ê³„ë³„ ì„¤ì¹˜**

Taskmaster AIëŠ” Node.js íŒ¨í‚¤ì§€ì…ë‹ˆë‹¤. ê¸°ë³¸ ì„¤ì¹˜ ë°©ë²•ì€ npm(Node Package Manager)ì„ í†µí•œ ê²ƒì…ë‹ˆë‹¤.  
ê¶Œì¥ë˜ëŠ” ì„¤ì¹˜ ë°©ë²•ì€ ì „ì—­ ì„¤ì¹˜ë¡œ, ì–´ë–¤ í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ì—ì„œë“  task-master ëª…ë ¹ì„ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤: npm install \-g task-master-ai.7

ë˜ëŠ”, ë¡œì»¬ í”„ë¡œì íŠ¸ ì¢…ì†ì„±ìœ¼ë¡œ ì„¤ì¹˜í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤: npm install task-master-ai.7

#### **2.2. í”„ë¡œì íŠ¸ ì´ˆê¸°í™”: task-master init ëª…ë ¹ì–´**

ì„¤ì¹˜ í›„, ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ì—ì„œ ê°€ì¥ ë¨¼ì € í•´ì•¼ í•  ì¼ì€ task-master init (ë¡œì»¬ ì„¤ì¹˜ì˜ ê²½ìš° npx task-master-init)ì„ ì‹¤í–‰í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.7

ì´ ëª…ë ¹ì–´ëŠ” ì‚¬ìš©ìì—ê²Œ í”„ë¡œì íŠ¸ ì„¸ë¶€ ì •ë³´ë¥¼ ëŒ€í™”í˜•ìœ¼ë¡œ ë¬»ê³ , .taskmaster/ ë””ë ‰í† ë¦¬ì™€ ê¸°ë³¸ dev\_workflow.mdc íŒŒì¼ì„ í¬í•¨í•˜ëŠ” .cursor/rules/ ë””ë ‰í† ë¦¬ ë“± í•„ìš”í•œ íŒŒì¼ êµ¬ì¡°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.7 ì´ íŒŒì¼ì€ AI ì—ì´ì „íŠ¸ì—ê²Œ ì‘ì—… ê´€ë¦¬ ì‹œìŠ¤í…œì— ëŒ€í•œ ì´ˆê¸° ì§€ì‹ì„ ì œê³µí•˜ë¯€ë¡œ ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤.11

#### **2.3. í•µì‹¬ API í‚¤ ê´€ë¦¬: "Bring Your Own Key" ëª¨ë¸**

Taskmaster AI ìì²´ëŠ” ë¬´ë£Œì´ì§€ë§Œ, í•µì‹¬ ê¸°ëŠ¥ì€ ìœ ë£Œì¸ ê°•ë ¥í•œ LLM í˜¸ì¶œì— ì˜ì¡´í•©ë‹ˆë‹¤.2 ì‚¬ìš©ìëŠ” ìì‹ ì˜ API í‚¤ë¥¼ ì œê³µí•  ì±…ì„ì´ ìˆìŠµë‹ˆë‹¤.

* **ì§€ì› ì œê³µì:** ì´ ë„êµ¬ëŠ” ëª¨ë¸ì— êµ¬ì• ë°›ì§€ ì•Šìœ¼ë©° Anthropic (Claude), OpenAI (GPT), Google (Gemini), Perplexity, xAI, OpenRouter ë“± ë‹¤ì–‘í•œ ì œê³µìë¥¼ ì§€ì›í•©ë‹ˆë‹¤.5  
* **êµ¬ì„± ìœ„ì¹˜:** í‚¤ëŠ” ì‚¬ìš© ì»¨í…ìŠ¤íŠ¸ì— ë”°ë¼ ì˜¬ë°”ë¥¸ ìœ„ì¹˜ì— ë°°ì¹˜ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.  
  * CLI ì‚¬ìš© ì‹œ: í”„ë¡œì íŠ¸ ë£¨íŠ¸ì˜ .env íŒŒì¼ì— ë°°ì¹˜.11  
  * MCP ì‚¬ìš© ì‹œ (IDE ë‚´ì—ì„œ): í•´ë‹¹ mcp.json êµ¬ì„± íŒŒì¼(ì˜ˆ: \~/.cursor/mcp.json)ì— ë°°ì¹˜.5  
* ë‘ ìœ„ì¹˜ ëª¨ë‘ì— í‚¤ë¥¼ ë‘ê³ , ë¯¼ê°í•œ ìê²© ì¦ëª…ì´ ì‹¤ìˆ˜ë¡œ ì»¤ë°‹ë˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ mcp.jsonê³¼ .env íŒŒì¼ì„ .gitignoreì— ì¶”ê°€í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì¢‹ì€ ë°©ë²•ì…ë‹ˆë‹¤.11

êµ¬ì„± ê³¼ì •ì—ì„œ ì£¼ëª©í•  ë§Œí•œ ì ì´ì ì‚¬ìš©ì í˜¼ë€ì˜ ì£¼ìš” ì›ì¸ì´ ë  ìˆ˜ ìˆëŠ” ë¶€ë¶„ì€ API í‚¤ë¥¼ ë‘ ê°œì˜ ê°œë³„ ìœ„ì¹˜ì— ë°°ì¹˜í•´ì•¼ í•œë‹¤ëŠ” ìš”êµ¬ì‚¬í•­ì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ë¶„ë¦¬ëŠ” CLIì™€ MCP ì„œë²„ê°€ ë™ì¼í•œ í”„ë¡œì íŠ¸ íŒŒì¼ì—ì„œ ì‘ë™í•˜ë”ë¼ë„ ë³„ê°œì˜ ì‹¤í–‰ í™˜ê²½ìœ¼ë¡œ ìš´ì˜ëœë‹¤ëŠ” ì‚¬ì‹¤ì—ì„œ ë¹„ë¡¯ë©ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ë…¼ë¦¬ì ìœ¼ë¡œ ë‹¨ì¼ êµ¬ì„± ì§€ì ì´ë©´ ì¶©ë¶„í•˜ë‹¤ê³  ê°€ì •í•  ìˆ˜ ìˆìœ¼ë©°, ì´ë¡œ ì¸í•´ í•œ ë°©ë²•ì€ ì‘ë™í•˜ê³  ë‹¤ë¥¸ ë°©ë²•ì€ ì¸ì¦ ì˜¤ë¥˜ë¡œ ì‹¤íŒ¨í•  ë•Œ í˜¼ë€ì„ ê²ªì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. MCP ì„œë²„ë¥¼ ì‹¤í–‰í•˜ëŠ” npx ëª…ë ¹ 5ì´ í”„ë¡œì íŠ¸ì˜

.env íŒŒì¼ì—ì„œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ìë™ìœ¼ë¡œ ìƒì†í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì´ëŸ¬í•œ í˜„ìƒì´ ë°œìƒí•©ë‹ˆë‹¤. ì´ëŠ” ì‚¬ìš©ìì˜ ì„¤ì • ê³¼ì •ì— ìˆ¨ê²¨ì§„ ì˜ì¡´ì„±ì„ ë§Œë“¤ì–´ë‚´ë¯€ë¡œ, ë‘ ë²ˆì§¸ ìœ„ì¹˜ë¥¼ ìŠì–´ë²„ë¦¬ë©´ ë””ë²„ê¹…í•˜ê¸° ì–´ë ¤ìš´ ë¬¸ì œë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì´ ë³´ê³ ì„œëŠ” ì´ ì°¨ì´ì ì„ ì‚¬ì†Œí•œ êµ¬ì„± ì„¸ë¶€ ì‚¬í•­ì´ ì•„ë‹ˆë¼ ë„êµ¬ì˜ ì•„í‚¤í…ì²˜ì— ëŒ€í•œ í•µì‹¬ ê°œë…ì  í¬ì¸íŠ¸ë¡œ ê°•ì¡°í•˜ë©°, ì´ëŠ” ì‹ ê·œ ì‚¬ìš©ìì—ê²Œ ì¤‘ìš”í•œ "í•¨ì •"ì…ë‹ˆë‹¤.

## **2ë¶€: ì‹¤ì œ í•µì‹¬ ì›Œí¬í”Œë¡œìš°**

ì´ íŒŒíŠ¸ì—ì„œëŠ” ë†’ì€ ìˆ˜ì¤€ì˜ í”„ë¡œì íŠ¸ ì •ì˜ë¶€í„° ì‘ì—…ë³„ ì‹¤í–‰ì— ì´ë¥´ê¸°ê¹Œì§€ ì™„ì „í•˜ê³  ì‹¤ìš©ì ì¸ ì›Œí¬í”Œë¡œìš°ë¥¼ ì•ˆë‚´í•˜ë©°, ì‚¬ìš©ìì˜ ì¼ìƒì ì¸ ë„êµ¬ ìƒí˜¸ì‘ìš©ì˜ í•µì‹¬ì„ í˜•ì„±í•©ë‹ˆë‹¤.

### **3ì¥: ì²­ì‚¬ì§„: íš¨ê³¼ì ì¸ ì œí’ˆ ìš”êµ¬ì‚¬í•­ ë¬¸ì„œ(PRD) ì‘ì„±í•˜ê¸°**

#### **3.1. PRDê°€ Taskmaster AIì˜ ì´ˆì„ì¸ ì´ìœ **

ì „ì²´ êµ¬ì¡°í™”ëœ ì›Œí¬í”Œë¡œìš°ëŠ” ê³ í’ˆì§ˆì˜ PRDì—ì„œ ì‹œì‘ë©ë‹ˆë‹¤.6 PRDëŠ” AIê°€ ëª¨ë“  ì‘ì—…ê³¼ í•˜ìœ„ ì‘ì—…ì„ ìƒì„±í•˜ëŠ” "ë‹¨ì¼ ì§„ì‹¤ ê³µê¸‰ì›(single source of truth)" ë˜ëŠ” ì²­ì‚¬ì§„ ì—­í• ì„ í•©ë‹ˆë‹¤.14 ìµœì¢… ê²°ê³¼ë¬¼ì˜ í’ˆì§ˆì€ ì´ ì´ˆê¸° ë¬¸ì„œì˜ ìƒì„¸í•¨ê³¼ ëª…í™•ì„±ì— ì •ë¹„ë¡€í•©ë‹ˆë‹¤.13 ëª¨í˜¸í•œ PRDëŠ” AIê°€ ì¤‘ìš”í•œ êµ¬ì„± ìš”ì†Œë¥¼ ëˆ„ë½í•˜ê±°ë‚˜ ì˜ëª»ëœ ê°€ì •ì„ í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤.17

#### **3.2. PRD ì‘ì„± ëª¨ë²” ì‚¬ë¡€**

ì¢‹ì€ PRDëŠ” ë§¤ìš° ìƒì„¸í•˜ê³  êµ¬ì¡°í™”ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ìŒ ë‚´ìš©ì„ ëª…ì‹œì ìœ¼ë¡œ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:

* ì•± ì´ë¦„, í•µì‹¬ ëª©ì  ë° ëª©í‘œ.18  
* ë¼ì´ë¸ŒëŸ¬ë¦¬ ë²„ì „ì„ í¬í•¨í•œ ì „ì²´ ê¸°ìˆ  ìŠ¤íƒ.18  
* í•µì‹¬ ê¸°ëŠ¥ ë° ì‚¬ìš©ì ìŠ¤í† ë¦¬.18  
* ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë° API í†µí•©.18  
* ë””ìì¸ ìŠ¤íƒ€ì¼ ë° UI/UX ì„ í˜¸ë„.18  
* ì¤‘ìš”í•˜ê²ŒëŠ”, ì•±ì´ ìˆ˜í–‰í•˜ì§€ *ì•Šì•„ì•¼* í•  "ë¶€ì •ì  ìš”êµ¬ì‚¬í•­".18

ì´ ê³¼ì •ì€ AIë¥¼ ì‚¬ìš©í•˜ê¸° ì „ì— ì¸ê°„ ì£¼ë„ì˜ ìƒì„¸í•œ ì‚¬ê³  ë‹¨ê³„ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.18 PRD ìì²´ì— ëŒ€í•œ ìƒì„¸í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ì‘ì„±í•˜ëŠ” ë° 10-15ë¶„ì„ íˆ¬ìí•˜ëŠ” ê²ƒì´ ê¶Œì¥ë©ë‹ˆë‹¤.18

ì´ì²˜ëŸ¼ ìƒì„¸í•œ ì¸ê°„ ì£¼ë„ PRDì— ëŒ€í•œ ê°•ì¡°ëŠ” AI ê°œë°œì— ëŒ€í•œ ê·¼ë³¸ì ì¸ ì² í•™ì  ì…ì¥ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì¦‰, ì¸ê°„ì˜ ì—­í• ì´ *ì½”ë“œ êµ¬í˜„ì*ì—ì„œ *ì‹œìŠ¤í…œ ì„¤ê³„ì ë° ìš”êµ¬ì‚¬í•­ ëª…ì„¸ì*ë¡œ ì „í™˜ë˜ê³  ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. Taskmaster AIëŠ” "ëª¨í˜¸í•œ ì•„ì´ë””ì–´ë¥¼ ì½”ë“œë¡œ" ë§Œë“œëŠ” ë„êµ¬ê°€ ì•„ë‹ˆë¼ "ìƒì„¸í•œ ëª…ì„¸ë¥¼ ì½”ë“œë¡œ" ë§Œë“œëŠ” ë„êµ¬ì…ë‹ˆë‹¤. ì´ ì›Œí¬í”Œë¡œìš°ëŠ” "AIì™€ ì±„íŒ…í•˜ë©° ë¬´ì–¸ê°€ë¥¼ ë§Œë“¤ ë•Œê¹Œì§€"ì˜ ììœ ë¡œìš´ ë°©ì‹ì´ ì•„ë‹ˆë¼, ì¸ê°„ ì •ì˜ \-\> AI íŒŒì‹± \-\> AI êµ¬ì¡°í™” \-\> ì¸ê°„ ìŠ¹ì¸ \-\> AI êµ¬í˜„ì´ë¼ëŠ” ê³µì‹ì ì´ê³  ë‹¤ë‹¨ê³„ì ì¸ í”„ë¡œì„¸ìŠ¤ì…ë‹ˆë‹¤.11 ì´ëŠ” Taskmasterê°€ ì „í†µì ì¸ ì†Œí”„íŠ¸ì›¨ì–´ ì—”ì§€ë‹ˆì–´ë§ ìƒëª…ì£¼ê¸°(ìš”êµ¬ì‚¬í•­ ìˆ˜ì§‘, ê³„íš, êµ¬í˜„)ë¥¼ ê°•ì œí•¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ì´ ë„êµ¬ì˜ ì£¼ìš” ê°€ì¹˜ëŠ” ê°œë°œìë¥¼ ëŒ€ì²´í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼,

*í›ˆë ¨ëœ* ê°œë°œìë¥¼ ë³´ê°•í•˜ëŠ” ë° ìˆìŠµë‹ˆë‹¤. ì´ëŠ” AI ì‹œëŒ€ì— ë†’ì€ ìˆ˜ì¤€ì˜ ê³„íš ë° ëª…ì„¸ ì‘ì„± ê¸°ìˆ ì˜ ì¤‘ìš”ì„±ì„ ë”ìš± ë¶€ê°ì‹œí‚µë‹ˆë‹¤.

#### **3.3. ì£¼ì„ì´ ë‹¬ë¦° PRD ì˜ˆì œ ë° ìƒì„± í”„ë¡¬í”„íŠ¸**

ì´ ì„¹ì…˜ì—ì„œëŠ” ê°€ìƒì˜ ì• í”Œë¦¬ì¼€ì´ì…˜(ì˜ˆ: ê°„ë‹¨í•œ CRM)ì— ëŒ€í•œ ì™„ì „í•˜ê³  ì˜ êµ¬ì¡°í™”ëœ ìƒ˜í”Œ PRDë¥¼ ì œê³µí•©ë‹ˆë‹¤.  
ë˜í•œ, ì‚¬ìš©ìê°€ Gemini 2.5 Proì™€ ê°™ì€ LLMì—ê²Œ 20 ê¸€ë¨¸ë¦¬ ê¸°í˜¸ ëª©ë¡ì—ì„œ êµ¬ì¡°í™”ëœ PRDë¥¼ ìƒì„±í•˜ë„ë¡ ì œê³µí•  ìˆ˜ ìˆëŠ” ê°•ë ¥í•œ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ì„ í¬í•¨í•  ê²ƒì…ë‹ˆë‹¤. ì´ í”„ë¡¬í”„íŠ¸ëŠ” 18ì—ì„œ ë°œê²¬ëœ ìƒì„¸í•œ êµ¬ì¡°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ë©°, AIì—ê²Œ ì„œë¡ , ì œí’ˆ ê°œìš”, ëª©í‘œ, ëŒ€ìƒ ê³ ê°, ê¸°ëŠ¥ ë“±ì˜ ì„¹ì…˜ì„ ë§Œë“¤ë„ë¡ ì§€ì‹œí•©ë‹ˆë‹¤.

### **4ì¥: í†µí•© ê°œë°œ ê²½í—˜: AI ë„¤ì´í‹°ë¸Œ IDEì™€ í•¨ê»˜ Taskmaster ì‚¬ìš©í•˜ê¸°**

#### **4.1. ëª¨ë¸ ì œì–´ í”„ë¡œí† ì½œ(MCP) ì´í•´í•˜ê¸°**

MCPëŠ” AI í´ë¼ì´ì–¸íŠ¸(IDE ë“±)ê°€ ì™¸ë¶€ ë„êµ¬(Taskmaster AI ë“±)ì™€ í‘œì¤€í™”ëœ ë°©ì‹ìœ¼ë¡œ ìƒí˜¸ì‘ìš©í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.5 ì´ëŠ” ì›í™œí•œ ì±„íŒ… ê¸°ë°˜ ì›Œí¬í”Œë¡œìš°ì˜ í•µì‹¬ì…ë‹ˆë‹¤.

Taskmaster AIëŠ” MCP ì„œë²„ë¡œ ì‹¤í–‰ë˜ë©°, IDEì˜ AI ì—ì´ì „íŠ¸ë¡œë¶€í„° ëª…ë ¹ì„ ìˆ˜ì‹  ëŒ€ê¸°í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì—ì´ì „íŠ¸ëŠ” ì‚¬ìš©ìê°€ í„°ë¯¸ë„ì„ ì „í˜€ ê±´ë“œë¦¬ì§€ ì•Šê³ ë„ parse-prdë‚˜ listì™€ ê°™ì€ ê¸°ëŠ¥ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.14 ì´ëŠ” ì—ì´ì „íŠ¸ê°€ ëª©í‘œë¥¼ ë‹¬ì„±í•˜ê¸° ìœ„í•´ ì—¬ëŸ¬ ë„êµ¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì—ì´ì „íŠ¸ AIì˜ ê´‘ë²”ìœ„í•œ ì¶”ì„¸ì˜ ì¼ë¶€ì…ë‹ˆë‹¤.21

#### **4.2. ì›Œí¬í”Œë¡œìš° ì‹œì—°: ìì—°ì–´ë¥¼ í†µí•œ ìƒí˜¸ì‘ìš©**

MCPê°€ êµ¬ì„±ë˜ë©´ ì›Œí¬í”Œë¡œìš°ëŠ” ëŒ€í™”í˜•ì´ ë©ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” IDEì˜ ì±„íŒ… ì—ì´ì „íŠ¸(ì˜ˆ: Cursor)ì™€ ìƒí˜¸ì‘ìš©í•©ë‹ˆë‹¤.

**ìƒí˜¸ì‘ìš© íë¦„ ì˜ˆì‹œ:**

1. "ë‚´ í”„ë¡œì íŠ¸ì— taskmaster-aië¥¼ ì´ˆê¸°í™”í•´ ì¤˜." 11  
2. ì‚¬ìš©ìëŠ” prd.txt íŒŒì¼ì„ scripts/ ë˜ëŠ” .taskmaster/docs/ ë””ë ‰í† ë¦¬ì— ë°°ì¹˜í•©ë‹ˆë‹¤.5  
3. "scripts/prd.txtì— ìˆëŠ” ë‚´ PRDë¥¼ íŒŒì‹±í•´ ì¤„ ìˆ˜ ìˆë‹ˆ?" ì—ì´ì „íŠ¸ëŠ” task-master parse-prdë¥¼ ì‹¤í–‰í•˜ì—¬ tasks.jsonì„ ìƒì„±í•©ë‹ˆë‹¤.7  
4. "ë‹¤ìŒì— ì‘ì—…í•´ì•¼ í•  íƒœìŠ¤í¬ëŠ” ë­ì•¼?" ì—ì´ì „íŠ¸ëŠ” task-master nextë¥¼ ì‹¤í–‰í•˜ì—¬ ìƒíƒœì™€ ì¢…ì†ì„±ì— ë”°ë¼ ë‹¤ìŒì— ì‹¤í–‰ ê°€ëŠ¥í•œ í•­ëª©ì„ ê²°ì •í•©ë‹ˆë‹¤.7  
5. "íƒœìŠ¤í¬ 3ì„ êµ¬í˜„í•˜ëŠ” ë° ë„ì›€ì„ ì¤„ ìˆ˜ ìˆë‹ˆ?" ì‚¬ìš©ìì™€ ì—ì´ì „íŠ¸ëŠ” ì´ì œ íŠ¹ì •í•˜ê³  ë²”ìœ„ê°€ ì¢í˜€ì§„ íƒœìŠ¤í¬ì— ì§‘ì¤‘í•©ë‹ˆë‹¤.7  
6. "íƒœìŠ¤í¬ 3ì´ ì™„ë£Œë˜ì—ˆì–´." ì—ì´ì „íŠ¸ëŠ” íƒœìŠ¤í¬ ìƒíƒœë¥¼ "ì™„ë£Œ(done)"ë¡œ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.6

#### **4.3. ì£¼ìš” IDEë¥¼ ìœ„í•œ MCP êµ¬ì„± í‘œ**

ì´ í‘œëŠ” ê°€ì¥ ì¼ë°˜ì ì¸ ê°œë°œ í™˜ê²½ì—ì„œ MCP ì„œë²„ë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•œ ë‹¨ì¼í•˜ê³  ëª…í™•í•˜ë©° ë³µì‚¬-ë¶™ì—¬ë„£ê¸° ê°€ëŠ¥í•œ ì°¸ì¡°ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì´ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê¸° ì‰¬ìš´ ì¤‘ìš”í•œ ë‹¨ê³„ë¡œ, ë³´ê³ ì„œë¥¼ í†µí•´ ì™„ë²½í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

| IDE | êµ¬ì„± íŒŒì¼ ê²½ë¡œ | JSON êµ¬ì„± ìŠ¤ë‹ˆí« |
| :---- | :---- | :---- |
| Cursor | \~/.cursor/mcp.json (ì „ì—­) ë˜ëŠ” \<project\>/.cursor/mcp.json (í”„ë¡œì íŠ¸) | json { "mcpServers": { "task-master-ai": { "command": "npx", "args": \["-y", "--package=task-master-ai", "task-master-ai"\], "env": { "ANTHROPIC\_API\_KEY": "YOUR\_ANTHROPIC\_API\_KEY\_HERE", "OPENAI\_API\_KEY": "YOUR\_OPENAI\_KEY\_HERE", "GOOGLE\_API\_KEY": "YOUR\_GOOGLE\_KEY\_HERE" } } } } |
| VS Code | \<project\>/.vscode/mcp.json (í”„ë¡œì íŠ¸) | json { "servers": { "task-master-ai": { "command": "npx", "args": \["-y", "--package=task-master-ai", "task-master-ai"\], "env": { "ANTHROPIC\_API\_KEY": "YOUR\_ANTHROPIC\_API\_KEY\_HERE", "OPENAI\_API\_KEY": "YOUR\_OPENAI\_KEY\_HERE", "GOOGLE\_API\_KEY": "YOUR\_GOOGLE\_KEY\_HERE" } } } } |
| Windsurf | \~/.codeium/windsurf/mcp\_config.json (ì „ì—­) | json { "mcpServers": { "task-master-ai": { "command": "npx", "args": \["-y", "--package=task-master-ai", "task-master-ai"\], "env": { "ANTHROPIC\_API\_KEY": "YOUR\_ANTHROPIC\_API\_KEY\_HERE", "OPENAI\_API\_KEY": "YOUR\_OPENAI\_KEY\_HERE", "GOOGLE\_API\_KEY": "YOUR\_GOOGLE\_KEY\_HERE" } } } } |

ì°¸ê³ : env ê°ì²´ì—ì„œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” API í‚¤ëŠ” ì œê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 5

### **5ì¥: ì»¤ë§¨ë“œ ë¼ì¸ ì¸í„°í˜ì´ìŠ¤(CLI) ì‹¬ì¸µ ë¶„ì„**

#### **5.1. ì‘ì—… ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ì„ ìœ„í•œ í•µì‹¬ ëª…ë ¹ì–´ ë§ˆìŠ¤í„°í•˜ê¸°**

MCPê°€ ë¶€ë“œëŸ¬ìš´ UIë¥¼ ì œê³µí•˜ì§€ë§Œ, ê¸°ë³¸ CLI ëª…ë ¹ì–´ë¥¼ ì´í•´í•˜ëŠ” ê²ƒì€ ë¬¸ì œ í•´ê²° ë° ê³ ê¸‰ ìŠ¤í¬ë¦½íŒ…ì— í•„ìˆ˜ì ì…ë‹ˆë‹¤. ì´ ì„¹ì…˜ì—ì„œëŠ” ê° ì£¼ìš” ëª…ë ¹ì–´ì˜ ê¸°ëŠ¥ê³¼ í”Œë˜ê·¸ë¥¼ ìì„¸íˆ ì„¤ëª…í•©ë‹ˆë‹¤.

#### **5.2. ë¹„êµ ë¶„ì„: CLI ëŒ€ MCP ì‚¬ìš© ì‹œì **

* **MCP:** ê¸°ë³¸ ê°œë°œ ë£¨í”„, ëŒ€í™”í˜• ìƒí˜¸ì‘ìš© ë° IDEì˜ ì»¨í…ìŠ¤íŠ¸ë¥¼ í™œìš©í•˜ëŠ” ì‘ì—…ì— ì´ìƒì ì…ë‹ˆë‹¤.  
* **CLI:** ë°°ì¹˜ ì‘ì—…, ìŠ¤í¬ë¦½íŒ…, CI/CD íŒŒì´í”„ë¼ì¸ í†µí•© ë˜ëŠ” ì§€ì›ë˜ëŠ” IDEê°€ ì—†ëŠ” "í—¤ë“œë¦¬ìŠ¤" í™˜ê²½ì—ì„œ ì‘ì—…í•  ë•Œ ë” ì¢‹ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìŠ¤í¬ë¦½íŠ¸ëŠ” ìƒˆ PRDë¥¼ ìë™ìœ¼ë¡œ íŒŒì‹±í•˜ê³  ì´ˆê¸° ë³µì¡ì„± ë³´ê³ ì„œë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### **5.3. í•µì‹¬ CLI ëª…ë ¹ì–´ ì°¸ì¡° í‘œ**

ì´ í‘œëŠ” ë„êµ¬ì˜ ì»¤ë§¨ë“œ ë¼ì¸ ê¸°ëŠ¥ì— ëŒ€í•œ í¬ê´„ì ì´ê³  ë¹ ë¥¸ ì°¸ì¡° ê°€ì´ë“œ ì—­í• ì„ í•©ë‹ˆë‹¤.

| ëª…ë ¹ì–´ | ì„¤ëª… | ì£¼ìš” í”Œë˜ê·¸/ì˜µì…˜ | ì‚¬ìš© ì˜ˆì‹œ |
| :---- | :---- | :---- | :---- |
| task-master init | ìƒˆ Taskmaster í”„ë¡œì íŠ¸ë¥¼ ì´ˆê¸°í™”í•˜ê³  í•„ìš”í•œ íŒŒì¼ êµ¬ì¡°ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. | \-r, \--rules \<profiles\>: íŠ¹ì • ê·œì¹™ í”„ë¡œíŒŒì¼ì„ í¬í•¨í•©ë‹ˆë‹¤. | task-master init \-r cursor,roo |
| task-master parse-prd \[file\] | PRD íŒŒì¼ì„ íŒŒì‹±í•˜ì—¬ tasks.json íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤. | \--append: ê¸°ì¡´ ì‘ì—…ì„ ë®ì–´ì“°ì§€ ì•Šê³  ìƒˆ ì‘ì—…ì„ ì¶”ê°€í•©ë‹ˆë‹¤. | task-master parse-prd scripts/new\_features.txt \--append |
| task-master generate | tasks.jsonì„ ê¸°ë°˜ìœ¼ë¡œ ê°œë³„ ì‘ì—… íŒŒì¼(ì˜ˆ: task\_001.txt)ì„ ìƒì„±í•©ë‹ˆë‹¤. |  | task-master generate |
| task-master list | ëª¨ë“  ì‘ì—…ê³¼ í˜„ì¬ ìƒíƒœë¥¼ ë‚˜ì—´í•©ë‹ˆë‹¤. |  | task-master list |
| task-master next | ì¢…ì†ì„±ê³¼ ìƒíƒœë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë‹¤ìŒì— ì‘ì—…í•  ì‘ì—…ì„ ì œì•ˆí•©ë‹ˆë‹¤. |  | task-master next |
| task-master expand | ë³µì¡í•œ ì‘ì—…ì„ ë” ì‘ì€ í•˜ìœ„ ì‘ì—…ìœ¼ë¡œ ë¶„í•´í•©ë‹ˆë‹¤. | \--id=\<id\>, \--prompt="\<prompt\>", \--all | task-master expand \--id=5 \--prompt="ë³´ì•ˆ ì¸¡ë©´ì— ì§‘ì¤‘" |
| task-master rules \[command\] | í”„ë¡œì íŠ¸ì˜ ê·œì¹™ í”„ë¡œíŒŒì¼ì„ ê´€ë¦¬í•©ë‹ˆë‹¤. | add, remove, setup | task-master rules setup |

ì´ í‘œëŠ” 7ì˜ ì •ë³´ë¥¼ ì¢…í•©í•˜ì—¬ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

## **3ë¶€: ê³ ê¸‰ ê¸°ìˆ  ë° ì „ëµì  ì‚¬ìš©ì ì •ì˜**

ì´ íŒŒíŠ¸ëŠ” ê¸°ë³¸ ì›Œí¬í”Œë¡œìš°ë¥¼ ë„˜ì–´ ì´ˆë³´ ì‚¬ìš©ìì™€ ì „ë¬¸ê°€ë¥¼ êµ¬ë¶„í•˜ëŠ” ê¸°ëŠ¥ë“¤ì„ íƒìƒ‰í•˜ë©°, ë™ì  í”„ë¡œì íŠ¸ ê´€ë¦¬ì™€ ê¹Šì´ ìˆëŠ” ì‚¬ìš©ì ì •ì˜ì— ì´ˆì ì„ ë§ì¶¥ë‹ˆë‹¤.

### **6ì¥: ê³ ê¸‰ ì‘ì—… ë° í”„ë¡œì íŠ¸ ê´€ë¦¬**

#### **6.1. ë³µì¡ì„± ë¶„í•´: expand ëª…ë ¹ì–´**

ëª¨ë“  ì‘ì—…ì„ AIê°€ "í•œ ë²ˆì—" ì²˜ë¦¬í•  ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤. ë³µì¡í•œ ì‘ì—…ì˜ ê²½ìš°, expand ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë” ì‘ê³  ê´€ë¦¬í•˜ê¸° ì‰¬ìš´ í•˜ìœ„ ì‘ì—…ìœ¼ë¡œ ë¶„í•´í•©ë‹ˆë‹¤.6

ì´ ëª…ë ¹ì–´ëŠ” ì „ìš© "ì—°êµ¬ ëª¨ë¸"(ì˜ˆ: Perplexity ëª¨ë¸)ì„ ì‚¬ìš©í•˜ì—¬ ìƒìœ„ ì‘ì—…ì„ êµ¬í˜„í•˜ëŠ” ìµœìƒì˜ ë°©ë²•ì„ ì—°êµ¬í•œ ë‹¤ìŒ í•˜ìœ„ ì‘ì—…ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.11 ì´ëŠ” ìµìˆ™í•˜ì§€ ì•Šì€ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ë° ê°•ë ¥í•œ ê¸°ëŠ¥ì…ë‹ˆë‹¤.

ì˜ˆì‹œ í”„ë¡¬í”„íŠ¸: "íƒœìŠ¤í¬ 18ì„ ì–´ë–»ê²Œ êµ¬í˜„í•´ì•¼ í• ì§€ ì˜ ëª¨ë¥´ê² ì–´. Perplexityì—ì„œ ì—°êµ¬í•´ì„œ í•„ìš”í•œ í•˜ìœ„ íƒœìŠ¤í¬ë¥¼ ì•Œì•„ë‚´ ì¤„ ìˆ˜ ìˆë‹ˆ?".24  
ì´ expand ëª…ë ¹ì–´ì™€ ì—°êµ¬ ëª¨ë¸ì˜ ì¡°í•©ì€ ë‹¨ìˆœí•˜ì§€ë§Œ ê°•ë ¥í•œ í˜•íƒœì˜ ì—ì´ì „íŠ¸ ê³„íš(agentic planning)ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì‹œìŠ¤í…œì€ ë‹¨ìˆœíˆ ì‘ì—…ì„ ë¶„í•´í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ê³„íš ê³¼ì •ì— ì •ë³´ë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ ë„êµ¬ì  í–‰ë™(ì—°êµ¬)ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì´ëŠ” ë‹¨ìˆœí•œ ì‘ì—… ì‹¤í–‰ì„ ë„˜ì–´ ë¬¸ì œ í•´ê²°ì˜ ì˜ì—­ìœ¼ë¡œ ë“¤ì–´ì„œëŠ” í•œ ê±¸ìŒì…ë‹ˆë‹¤. ê¸°ë³¸ ì›Œí¬í”Œë¡œìš°ê°€ PRD íŒŒì‹± \-\> ì‘ì—… ìƒì„±ì˜ ì§ì ‘ì ì¸ ë³€í™˜ì¸ ë°˜ë©´, expand ëª…ë ¹ì–´ëŠ” ì‘ì—… ì„ íƒ \-\> êµ¬í˜„ ì—°êµ¬ \-\> í•˜ìœ„ ì‘ì—… ìƒì„±ì´ë¼ëŠ” ìƒˆë¡œìš´ ë‹¨ê³„ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.11 ë³„ë„ì˜ "ì—°êµ¬ ëª¨ë¸" 13 ì‚¬ìš©ì€ ë‹¤ì¤‘ ì—ì´ì „íŠ¸ ë˜ëŠ” ë‹¤ì¤‘ ë„êµ¬ ì ‘ê·¼ ë°©ì‹ì„ ì‹œì‚¬í•©ë‹ˆë‹¤. í•œ ì—ì´ì „íŠ¸ëŠ” ê³„íšì— ëŠ¥í•˜ê³ (ì£¼ìš” ëª¨ë¸), ë‹¤ë¥¸ ì—ì´ì „íŠ¸ëŠ” ì •ë³´ ê²€ìƒ‰ì— ëŠ¥í•©ë‹ˆë‹¤(ì—°êµ¬ ëª¨ë¸). ì´ëŠ” RAG(ê²€ìƒ‰ ì¦ê°• ìƒì„±) ë° ë„êµ¬ ì‚¬ìš© ì—ì´ì „íŠ¸ì™€ ê°™ì€ ê³ ê¸‰ ì—ì´ì „íŠ¸ íŒ¨í„´ì„ ë°˜ì˜í•©ë‹ˆë‹¤.21 ë”°ë¼ì„œ

expandëŠ” ë‹¨ìˆœí•œ í¸ì˜ ê¸°ëŠ¥ì´ ì•„ë‹ˆë¼, Taskmaster ë‚´ì— ë” ì •êµí•œ AI ì•„í‚¤í…ì²˜ë¥¼ êµ¬í˜„í•œ ê²ƒìœ¼ë¡œ, í–‰ë™í•˜ê¸° ì „ì— ìŠ¤ìŠ¤ë¡œ ì •ë³´ë¥¼ ìˆ˜ì§‘í•  ìˆ˜ ìˆëŠ” ë” ììœ¨ì ì´ê³  ìœ ëŠ¥í•œ ì—ì´ì „íŠ¸ë¡œ ë‚˜ì•„ê°€ëŠ” ê¸¸ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.

#### **6.2. í”„ë¡œì íŠ¸ ì§„í™” ê´€ë¦¬: ì‘ì—… ìˆ˜ì •, íê¸° ë° ì¶”ê°€**

í”„ë¡œì íŠ¸ëŠ” ì •ì ì´ì§€ ì•ŠìŠµë‹ˆë‹¤. TaskmasterëŠ” ë³€í™”í•˜ëŠ” ìš”êµ¬ì‚¬í•­ì— ì ì‘í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ì™€ í”„ë¡¬í”„íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤.  
ì‚¬ìš©ìëŠ” ìƒˆë¡œìš´ ì‘ì—…ì„ ì¶”ê°€í•˜ê³ , ê¸°ì¡´ ì‘ì—…ì˜ ë°©í–¥ì„ ë°”ê¾¸ê±°ë‚˜, ë” ì´ìƒ í•„ìš” ì—†ëŠ” ì‘ì—…ì„ í‘œì‹œí•˜ëŠ” ë“± ëª¨ë“  ê²ƒì„ ê¸°ë³¸ ë„êµ¬ë¥¼ íŠ¸ë¦¬ê±°í•˜ëŠ” ìì—°ì–´ í”„ë¡¬í”„íŠ¸ë¥¼ í†µí•´ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.18

ì˜ˆì‹œ: "ì´ë¯¸ì§€ ìƒì„± íƒœìŠ¤í¬ì— ë³€ê²½ì´ ìˆì–´ì•¼ í•´. íƒœìŠ¤í¬ 3ì„ ì´ê±¸ë¡œ ì—…ë°ì´íŠ¸í•˜ê³  ë‹¤ì‹œ ë³´ë¥˜ ìƒíƒœë¡œ ì„¤ì •í•´ ì¤˜.".18

#### **6.3. ì¢…ì†ì„± ê´€ë¦¬ ë° ë…¼ë¦¬ì  íë¦„ ë³´ì¥**

tasks.json íŒŒì¼ì€ ê° ì‘ì—…ì— ëŒ€í•œ dependencies í•„ë“œë¥¼ í¬í•¨í•©ë‹ˆë‹¤.11

task-master next ëª…ë ¹ì–´ëŠ” ì´ ì •ë³´ë¥¼ ì§€ëŠ¥ì ìœ¼ë¡œ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  ì¢…ì†ì„±ì´ "ì™„ë£Œ"ë¡œ í‘œì‹œëœ ê²½ìš°ì—ë§Œ ë‹¤ìŒ ì‘ì—…ì„ ì œì•ˆí•©ë‹ˆë‹¤.11

ì‚¬ìš©ìëŠ” AIì—ê²Œ ì¢…ì†ì„± ê·¸ë˜í”„ë¥¼ ê²€ì¦í•˜ë„ë¡ ìš”ì²­í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤: "íƒœìŠ¤í¬ íŒŒì¼ì„ ê²€í† í•´ì„œ ì¢…ì†ì„±ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸í•´ ì¤„ ìˆ˜ ìˆë‹ˆ? í‹€ë ¸ë‹¤ë©´ ìˆ˜ì •í•´ ì¤˜.".24

### **7ì¥: ì§€ëŠ¥ ì„¤ê³„: ê·œì¹™ ì‚¬ìš©ì ì •ì˜ ê°€ì´ë“œ**

#### **7.1. .cursor/rules/ ë””ë ‰í† ë¦¬ ì„¤ëª…**

ì´ ë””ë ‰í† ë¦¬ëŠ” AI ì—ì´ì „íŠ¸ë¥¼ ìœ„í•œ í”„ë¡œì íŠ¸ë³„ ì˜êµ¬ ì§€ì¹¨ì˜ í™ˆì…ë‹ˆë‹¤.11

í•˜ë‚˜ì˜ í° .cursorrules íŒŒì¼ ëŒ€ì‹ , ê·œì¹™ì„ architecture.mdc, stack.mdc, styling.mdcì™€ ê°™ì€ ë…¼ë¦¬ì  íŒŒì¼ë¡œ ë¶„í• í•˜ì—¬ ë” ë‚˜ì€ êµ¬ì„±ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.15

Taskmasterì˜ init ëª…ë ¹ì–´ëŠ” dev\_workflow.mdc íŒŒì¼ì„ ìë™ìœ¼ë¡œ ìƒì„±í•˜ì—¬ AIì—ê²Œ Taskmaster ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ê°€ë¥´ì¹©ë‹ˆë‹¤.11

#### **7.2. ì‚¬ìš©ì ì •ì˜ .mdc íŒŒì¼ ì‘ì„±**

ì´ê³³ì—ì„œ ì‚¬ìš©ìëŠ” í”„ë¡œì íŠ¸ì˜ ê³ ìœ í•œ "DNA"ë¥¼ ì£¼ì…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì •ì˜ ê·œì¹™ì€ ë‹¤ìŒì„ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:

* ê¸°ìˆ  ìŠ¤íƒ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ë²„ì „.18  
* ì „ì²´ í”„ë¡œì íŠ¸ êµ¬ì¡° ë° í´ë” ëª…ëª… ê·œì¹™.18  
* ì½”ë“œ ëª…ëª… ê·œì¹™ (ì˜ˆ: "ë³€ìˆ˜ì—ëŠ” camelCase ì‚¬ìš©").18  
* ìŠ¤íƒ€ì¼/ì–¸ì–´ ì„ í˜¸ë„ (ì˜ˆ: "Python í•¨ìˆ˜ì—ëŠ” í•­ìƒ docstring í¬í•¨").18  
* UI ì½”ë”© ì„ í˜¸ë„ (ì˜ˆ: "Tailwind CSS ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ ì‚¬ìš©, ì‚¬ìš©ì ì •ì˜ CSS íŒŒì¼ ì‚¬ìš© ê¸ˆì§€").18

  Taskmaster AIì˜ ìµœê·¼ ì—…ë°ì´íŠ¸ëŠ” task-master rules add/remove/setup ëª…ë ¹ì–´ë¡œ ì´ëŸ¬í•œ ê·œì¹™ í”„ë¡œíŒŒì¼ì„ í”„ë¡œê·¸ë˜ë° ë°©ì‹ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.23

"ê·œì¹™" ì‹œìŠ¤í…œì€ íŠ¹ì • í”„ë¡œì íŠ¸ë¥¼ ìœ„í•œ ì¼ì¢…ì˜ "í—Œë²•ì  AI(Constitutional AI)" í˜•íƒœì…ë‹ˆë‹¤. ì´ëŠ” LLMì˜ í–‰ë™ì„ ì œì•½í•˜ëŠ” ì¼ë ¨ì˜ ë¶ˆê°€ì¹¨ ì›ì¹™ì„ ì œê³µí•˜ì—¬, ê¸¸ê³  ë³µì¡í•œ í”„ë¡œì íŠ¸ ì „ë°˜ì— ê±¸ì³ ì¼ê´€ì„±ê³¼ í‘œì¤€ ì¤€ìˆ˜ë¥¼ ë³´ì¥í•©ë‹ˆë‹¤. ì´ëŠ” í’ˆì§ˆì„ í™•ì¥í•˜ê¸° ìœ„í•œ ë©”ì»¤ë‹ˆì¦˜ì…ë‹ˆë‹¤. LLMì˜ ì£¼ìš” ë¬¸ì œ ì¤‘ í•˜ë‚˜ëŠ” ê¸´ ìƒí˜¸ì‘ìš© ë™ì•ˆ ë°©í–¥ì„ ìƒê±°ë‚˜ "í™˜ê°"ì„ ì¼ìœ¼í‚¤ëŠ” ê²½í–¥ì…ë‹ˆë‹¤.1

rules íŒŒì¼ì€ ëª¨ë“  ìƒí˜¸ì‘ìš©ê³¼ í•¨ê»˜ ë¡œë“œë˜ëŠ” ì˜êµ¬ì ì´ê³  ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤.11 ì´ëŸ¬í•œ ê·œì¹™ì€ í”„ë¡œì íŠ¸ ë‚´ì—ì„œ AI í–‰ë™ì— ëŒ€í•œ ê°€ë“œë ˆì¼ ë˜ëŠ” "í—Œë²•" ì—­í• ì„ í•©ë‹ˆë‹¤.18 ë”°ë¼ì„œ

rules ì‹œìŠ¤í…œì„ ë§ˆìŠ¤í„°í•˜ëŠ” ê²ƒì€ ë‹¨ìˆœíˆ ì‚¬ìš©ì ì •ì˜ì— ê´€í•œ ê²ƒì´ ì•„ë‹™ë‹ˆë‹¤. ì´ëŠ” AI ì—ì´ì „íŠ¸ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ í†µì œí•˜ì—¬ ëŒ€ê·œëª¨ë¡œ ê³ í’ˆì§ˆì˜ ìœ ì§€ë³´ìˆ˜ ê°€ëŠ¥í•œ ì½”ë“œë¥¼ ìƒì‚°í•˜ëŠ” ë°©ë²•ì„ ë°°ìš°ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ëŠ” AIë¡œ ì¸í•œ ê¸°ìˆ  ë¶€ì±„ì™€ ì‹¸ìš°ëŠ” ì£¼ìš” ë„êµ¬ì…ë‹ˆë‹¤.

#### **7.3. ì‹¤ìš© ì˜ˆì œ: Python/React í”„ë¡œì íŠ¸ë¥¼ ìœ„í•œ ì‚¬ìš©ì ì •ì˜ ê·œì¹™ ì„¸íŠ¸**

ì´ ì„¹ì…˜ì—ì„œëŠ” ê°€ìƒ í”„ë¡œì íŠ¸ë¥¼ ìœ„í•œ ìƒì„¸í•˜ê³  ì£¼ì„ì´ ë‹¬ë¦° .mdc íŒŒì¼ ì„¸íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

* stack.mdc: "React 18ì„ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì™€ Hooksì™€ í•¨ê»˜ ì‚¬ìš©í•©ë‹ˆë‹¤. ë°±ì—”ë“œëŠ” Flaskë¥¼ ì‚¬ìš©í•˜ëŠ” Python 3.11ì…ë‹ˆë‹¤."  
* styling.mdc: "ëª¨ë“  ìŠ¤íƒ€ì¼ë§ì€ Tailwind CSSë¡œ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤. ì»´í¬ë„ŒíŠ¸ëŠ” Shadcn/UIë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬ì¶•í•´ì•¼ í•©ë‹ˆë‹¤."  
* testing.mdc: "ëª¨ë“  ë°±ì—”ë“œ API ì—”ë“œí¬ì¸íŠ¸ì—ëŠ” í•´ë‹¹ Pytest ìœ ë‹› í…ŒìŠ¤íŠ¸ê°€ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. í”„ë¡ íŠ¸ì—”ë“œ ì»´í¬ë„ŒíŠ¸ì—ëŠ” ê¸°ë³¸ Storybook ìŠ¤í† ë¦¬ê°€ ìˆì–´ì•¼ í•©ë‹ˆë‹¤."

## **4ë¶€: ë¹„íŒì  í‰ê°€ ë° ì „ëµì  ë„ì…**

ì´ ë§ˆì§€ë§‰ íŒŒíŠ¸ëŠ” Taskmaster AIì— ëŒ€í•œ ê· í˜• ì¡íŒ ì‹¤ì œ í‰ê°€ë¥¼ ì œê³µí•˜ì—¬, ì‚¬ìš©ìê°€ ë„êµ¬ ë„ì…ì— ëŒ€í•œ ì •ë³´ì— ì…ê°í•œ ê²°ì •ì„ ë‚´ë¦¬ê³  ì„±ê³µì ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•ì„ ë•ìŠµë‹ˆë‹¤.

### **8ì¥: ì‹¤ì œ í‰ê°€: ì‚¬ìš©ì ê²½í—˜ì— ëŒ€í•œ ê· í˜• ì¡íŒ ê²€í† **

#### **8.1. ì•½ì† ëŒ€ í˜„ì‹¤: ê³¼ëŒ€ ê´‘ê³  ë¶„ì„**

* **ì•½ì†:** 10ë°°ì˜ ìƒì‚°ì„± í–¥ìƒê³¼ ì½”ë”© ì˜¤ë¥˜ 90% ê°ì†Œ ì£¼ì¥ì€ í™ë³´ ìë£Œì™€ íŠœí† ë¦¬ì–¼ì—ì„œ í”íˆ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.6 ì´ ë„êµ¬ëŠ” "ê²Œì„ ì²´ì¸ì €"ë¡œ ì†Œê°œë©ë‹ˆë‹¤.6  
* **í˜„ì‹¤:** Redditê³¼ ê°™ì€ í”Œë«í¼ì˜ ì‚¬ìš©ì ê²½í—˜ì€ ë” ë¯¸ë¬˜í•œ ê·¸ë¦¼ì„ ê·¸ë¦½ë‹ˆë‹¤. ë§ì€ ì‚¬ëŒë“¤ì´ ì‘ì—…ì„ êµ¬ì¡°í™”í•˜ëŠ” ë° ê°•ë ¥í•˜ë‹¤ê³  ìƒê°í•˜ì§€ë§Œ 20, ìƒë‹¹í•œ ì¢Œì ˆê³¼ ê°€íŒŒë¥¸ í•™ìŠµ ê³¡ì„ ì— ì§ë©´í•˜ê¸°ë„ í•©ë‹ˆë‹¤.17

#### **8.2. ì¥ë‹¨ì ì— ëŒ€í•œ ë¯¸ë¬˜í•œ ì‹œê°**

* **ì¥ì :**  
  * **êµ¬ì¡°ì™€ ì§‘ì¤‘:** AIë¥¼ ê¶¤ë„ì— ìœ ì§€í•˜ê³  ì»¨í…ìŠ¤íŠ¸ ê³¼ë¶€í•˜ë¥¼ ì¤„ì´ëŠ” í›ˆë ¨ë˜ê³  ê³„íšëœ ì ‘ê·¼ ë°©ì‹ì„ ê°•ì œí•©ë‹ˆë‹¤.1  
  * **ë³µì¡ì„± ê´€ë¦¬:** í¬ê³  ì•¼ì‹¬ì°¬ í”„ë¡œì íŠ¸ë¥¼ ì‹¤í–‰ ê°€ëŠ¥í•œ ë‹¨ê³„ë¡œ ë‚˜ëˆ„ëŠ” ë° íƒì›”í•©ë‹ˆë‹¤.14  
  * **ìƒì‚°ì„± í–¥ìƒ:** ì›Œí¬í”Œë¡œìš°ë¥¼ ë§ˆìŠ¤í„°í•˜ë©´ ìƒìš©êµ¬ ë° ë°˜ë³µì ì¸ ì½”ë”© ì‘ì—…ì„ ìë™í™”í•˜ì—¬ ê°œë°œ ì†ë„ë¥¼ í¬ê²Œ ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.26  
* **ë‹¨ì :**  
  * **ê°€íŒŒë¥¸ í•™ìŠµ ê³¡ì„ :** ì‚¬ê³ ë°©ì‹ì˜ ì „í™˜ê³¼ ìƒˆë¡­ê³  ë³µì¡í•œ ì›Œí¬í”Œë¡œìš° í•™ìŠµì´ í•„ìš”í•©ë‹ˆë‹¤. ê°„ë‹¨í•œ "í”ŒëŸ¬ê·¸ ì•¤ í”Œë ˆì´" ë„êµ¬ê°€ ì•„ë‹™ë‹ˆë‹¤.17  
  * **AI ë¬´ì˜¤ë¥˜ ì‹ í™”:** AIëŠ” ì™„ë²½í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ìµœì ì´ ì•„ë‹Œ ì½”ë“œë¥¼ ìƒì„±í•˜ê±°ë‚˜, ë²„ê·¸ë¥¼ ë„ì…í•˜ê±°ë‚˜, PRDì˜ ìš”êµ¬ì‚¬í•­ì„ ëˆ„ë½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¸ê°„ì˜ ê°ë…ê³¼ ê²€í† ëŠ” í•„ìˆ˜ì ì…ë‹ˆë‹¤.17  
  * **ì½”ë“œ í’ˆì§ˆ ë¬¸ì œ ê°€ëŠ¥ì„±:** ê°œë°œìê°€ ì œì•ˆì„ ì™„ì „íˆ ì´í•´í•˜ì§€ ì•Šê³  ìˆ˜ë½í•˜ë©´ AIì— ëŒ€í•œ ê³¼ë„í•œ ì˜ì¡´ì´ ì½”ë“œ ë³€ë™(churn)ì´ë‚˜ ê¸°ìˆ  ë¶€ì±„ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.26

#### **8.3. ì¼ë°˜ì ì¸ ë¬¸ì œ ë° ë¬¸ì œ í•´ê²° ê°€ì´ë“œ í‘œ**

ì´ í‘œëŠ” ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ë³´ê³ ëœ ê°€ì¥ ì¼ë°˜ì ì¸ ì¢Œì ˆì„ ì‚¬ìš©ìê°€ ê·¹ë³µí•˜ëŠ” ë° ë„ì›€ì´ ë˜ëŠ” ì‹¤ìš©ì ì´ê³  ì‹¤í–‰ ê°€ëŠ¥í•œ ê°€ì´ë“œë¥¼ ë§Œë“­ë‹ˆë‹¤.

| ë¬¸ì œ | ì¦ìƒ (ì‚¬ìš©ì ë³´ê³  ê¸°ì¤€) | ì ì¬ì  ì›ì¸ | ì™„í™” ì „ëµ / í•´ê²°ì±… |
| :---- | :---- | :---- | :---- |
| **ê³¼ë„í•œ API ë¹„ìš©** | "ë‹¨ 25ê°œì˜ ì‘ì—…ì„ ë§Œë“œëŠ” ë° 50ë§Œ í† í°ì„ ì†Œëª¨í–ˆë‹¤" 17 | ëª¨í˜¸í•œ í”„ë¡¬í”„íŠ¸ë‚˜ ì‹¤íŒ¨í•˜ëŠ” ì‘ì—…ìœ¼ë¡œ ì¸í•œ AI ì—ì´ì „íŠ¸ì˜ ë£¨í”„; ë„ˆë¬´ í° PRD | API ì§€ì¶œ í•œë„ë¥¼ ì„¤ì •í•˜ê³ , ê°„ë‹¨í•œ ì‘ì—…ì—ëŠ” ë” ì‘ê³  ì €ë ´í•œ ëª¨ë¸ì„ ì‚¬ìš©í•˜ë©°, ì»¨í…ìŠ¤íŠ¸ë¥¼ ì§€ìš°ê¸° ìœ„í•´ ìì£¼ ìƒˆ ì±„íŒ… ìŠ¤ë ˆë“œë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. |
| **PRD íŒŒì‹± ì‹¤íŒ¨** | "Taskmasterê°€ ë‚´ PRDì—ì„œ ì¤‘ìš”í•œ êµ¬ì„± ìš”ì†Œë¥¼ ëˆ„ë½í•˜ê³  ìˆë‹¤" 17 | PRDê°€ ë„ˆë¬´ ëª¨í˜¸í•˜ê±°ë‚˜ ëª…ì‹œì ì¸ ì§€ì¹¨ì´ ë¶€ì¡±í•¨. | ë” êµ¬ì²´ì ì´ê³  ëª…ë ¹ì ì¸ ì–¸ì–´ë¡œ PRDë¥¼ ê°œì„ í•˜ê³ , ì‹¤í–‰ ì „ì— ì‘ì—… ëª©ë¡ì„ ìˆ˜ë™ìœ¼ë¡œ ê²€í† í•˜ê³  ìŠ¹ì¸í•©ë‹ˆë‹¤. |
| **í„°ë¯¸ë„ í˜¸í™˜ì„± ì˜¤ë¥˜** | "MCP ì„œë²„ê°€ Warp í„°ë¯¸ë„ì—ì„œ ì œëŒ€ë¡œ ì‹œì‘ë˜ì§€ ì•ŠëŠ”ë‹¤" 17 | í„°ë¯¸ë„ë³„ í™˜ê²½ ë³€ìˆ˜ ë˜ëŠ” ë Œë”ë§ ë¬¸ì œ. | ê¸°ë³¸ VS Code ë˜ëŠ” iTerm2ì™€ ê°™ì€ ì§€ì›ë˜ëŠ” í„°ë¯¸ë„ì„ ì‚¬ìš©í•˜ê³ , GitHub ë¦¬í¬ì§€í† ë¦¬ì—ì„œ ì•Œë ¤ì§„ ë¬¸ì œë¥¼ í™•ì¸í•©ë‹ˆë‹¤. |
| **ê³¼ë„í•œ ì—”ì§€ë‹ˆì–´ë§** | "Taskmaster \+ Cursorê°€ ì¢…ì¢… ê³¼ë„í•˜ê²Œ ì—”ì§€ë‹ˆì–´ë§í•˜ëŠ” ê²½í–¥ì´ ìˆë‹¤" 20 | AIê°€ ìµœìƒì˜ ê²½ë¡œë¥¼ ì¶”ë¡ í•˜ë ¤ í•˜ì§€ë§Œ, ë•Œë¡œëŠ” ê°€ì¥ ë³µì¡í•œ ê²½ë¡œë¥¼ ì„ íƒí•¨. | PRDì™€ ê·œì¹™ì— ì œì•½ ì¡°ê±´ì„ ë” ëª…í™•í•˜ê²Œ ëª…ì‹œí•˜ê³ (ì˜ˆ: "ì´ ê¸°ëŠ¥ì—ëŠ” ë°ì´í„°ë² ì´ìŠ¤ê°€ í•„ìš” ì—†ìŒ"), AIê°€ ìƒì„±í•œ ê³„íšì„ ë©´ë°€íˆ ê²€í† í•©ë‹ˆë‹¤. |

### **9ì¥: ì „ëµì  êµ¬í˜„ ë° ë¯¸ë˜ ì „ë§**

#### **9.1. Taskmaster AIëŠ” ëˆ„êµ¬ë¥¼ ìœ„í•œ ê²ƒì¸ê°€? ì´ìƒì ì¸ ì‚¬ìš©ì ì •ì˜**

ì´ìƒì ì¸ ì‚¬ìš©ìëŠ” ì‹œìŠ¤í…œ ìˆ˜ì¤€ì˜ ì‚¬ê³ ì— ìµìˆ™í•œ, í›ˆë ¨ë˜ê³  ê¸°ìˆ ì ìœ¼ë¡œ ëŠ¥ìˆ™í•œ ê°œë°œì ë˜ëŠ” ê¸°ìˆ  ë¦¬ë”ì…ë‹ˆë‹¤. ê·¸ë“¤ì€ AIë¥¼ ë§ˆë²•ì˜ ë¸”ë™ë°•ìŠ¤ê°€ ì•„ë‹ˆë¼, ì„¤ê³„ë˜ê³  í†µì œë˜ì–´ì•¼ í•  ê°•ë ¥í•œ ì‹œìŠ¤í…œìœ¼ë¡œ ë´…ë‹ˆë‹¤. ì´ˆë³´ìë‚˜ ê°„ë‹¨í•œ ì›í´ë¦­ ì†”ë£¨ì…˜ì„ ì°¾ëŠ” ì‚¬ëŒë“¤ì—ê²ŒëŠ” ëœ ì í•©í•©ë‹ˆë‹¤.1

#### **9.2. ê°œì¸ ë° íŒ€ì„ ìœ„í•œ ë‹¨ê³„ì  ë„ì… í”„ë ˆì„ì›Œí¬**

* **1ë‹¨ê³„: ê¸°ë³¸ ë°°ìš°ê¸°.** ì‘ê³  ì¤‘ìš”í•˜ì§€ ì•Šì€ í”„ë¡œì íŠ¸ë¡œ ì‹œì‘í•©ë‹ˆë‹¤. PRD \-\> parse-prd \-\> next \-\> êµ¬í˜„ì˜ í•µì‹¬ ë£¨í”„ë¥¼ ë§ˆìŠ¤í„°í•˜ëŠ” ë° ì§‘ì¤‘í•©ë‹ˆë‹¤. ë©”ì»¤ë‹ˆì¦˜ì„ ì´í•´í•˜ê¸° ìœ„í•´ CLIë¥¼ ì§ì ‘ ì‚¬ìš©í•©ë‹ˆë‹¤.  
* **2ë‹¨ê³„: IDEì™€ í†µí•©.** MCP ì„œë²„ë¥¼ ì„¤ì •í•˜ê³  ëŒ€í™”í˜• ì›Œí¬í”Œë¡œìš°ë¡œ ì „í™˜í•©ë‹ˆë‹¤.  
* **3ë‹¨ê³„: ì‚¬ìš©ì ì •ì˜ ë° í™•ì¥.** íŒ€ í‘œì¤€ì„ ê°•ì œí•˜ê¸° ìœ„í•´ ì‚¬ìš©ì ì •ì˜ rules íŒŒì¼ì„ ì‘ì„±í•˜ê¸° ì‹œì‘í•©ë‹ˆë‹¤. ë” ë³µì¡í•œ ì‘ì—…ì— expand ëª…ë ¹ì–´ë¥¼ ì‹¤í—˜í•©ë‹ˆë‹¤.  
* **4ë‹¨ê³„: ë¹„ìš© ê´€ë¦¬ ë° ê±°ë²„ë„ŒìŠ¤.** API ì‚¬ìš©ëŸ‰ì„ ì ê·¹ì ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤. ì–´ë–¤ ì‘ì—…ì„ ìœ„í•´ ì–´ë–¤ ëª¨ë¸ì„ ì‚¬ìš©í• ì§€ì— ëŒ€í•œ ëª…í™•í•œ ì •ì±…ì„ ì •ì˜í•©ë‹ˆë‹¤(ì˜ˆ: ê°„ë‹¨í•œ ì‘ì—…ì—ëŠ” ì €ë ´í•œ ëª¨ë¸, ì—°êµ¬/í™•ì¥ì—ëŠ” ê°•ë ¥í•œ ëª¨ë¸).

#### **9.3. ì—ì´ì „íŠ¸ AI ìƒíƒœê³„ì—ì„œ Taskmaster AIì˜ ìœ„ì¹˜**

Taskmaster AIëŠ” AI ê°œë°œì—ì„œ ë” ë„“ì€ "ë‹¤ì¤‘ êµ¬ì„± ìš”ì†Œ ê³„íš(Multi-Component Planning)" íŒ¨í„´ì˜ íŠ¹ì • êµ¬í˜„ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.14

ì´ëŠ” Autogen, CrewAI (ë‹¤ì¤‘ ì—ì´ì „íŠ¸ í˜‘ì—…ì— ì´ˆì ) 28 ë° Roocode Boomerang Tasksë‚˜ Shrimp Task Managerì™€ ê°™ì€ ë” ê°„ë‹¨í•œ ì‘ì—… ê´€ë¦¬ ì‹œìŠ¤í…œê³¼ ê°™ì€ ë¶„ì•¼ì˜ ë‹¤ë¥¸ ë„êµ¬ë“¤ê³¼ ê²½ìŸí•˜ê³  ë³´ì™„í•©ë‹ˆë‹¤.18

#### **9.4. ê²°ë¡ : ì¸ê°„-AI í˜‘ì—…ì˜ ë¯¸ë˜**

Taskmaster AIëŠ” ê¹Œë‹¤ë¡­ì§€ë§Œ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì˜ ë¯¸ë˜ë¥¼ ì—¿ë³¼ ìˆ˜ ìˆëŠ” ê°•ë ¥í•œ ë„êµ¬ì…ë‹ˆë‹¤. ì´ëŠ” ê°€ì¥ ê°€ì¹˜ ìˆëŠ” ì¸ê°„ì˜ ê¸°ìˆ ì´ í•œ ì¤„ í•œ ì¤„ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, AI ì¸ë ¥ì´ ì‹¤í–‰í•  ëª…í™•í•˜ê³  í¬ê´„ì ì´ë©° ëª¨í˜¸í•˜ì§€ ì•Šì€ ëª…ì„¸ë¥¼ ë§Œë“œëŠ” ëŠ¥ë ¥ì¸ íŒ¨ëŸ¬ë‹¤ì„ì„ ì œì‹œí•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ë„êµ¬ì˜ ìˆ™ë‹¬ì€ ì°¨ì„¸ëŒ€ ì—˜ë¦¬íŠ¸ ê°œë°œìì—ê²Œ í•µì‹¬ì ì¸ ì°¨ë³„í™” ìš”ì†Œê°€ ë  ê²ƒì…ë‹ˆë‹¤.

#### **ì°¸ê³  ìë£Œ**

1. TaskMaster AI Changed How I Code With AI (And It Might Change Yours Too) \- Medium, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://medium.com/@fletlajn/taskmaster-ai-changed-how-i-code-with-ai-and-it-might-change-yours-too-853b958c54b0](https://medium.com/@fletlajn/taskmaster-ai-changed-how-i-code-with-ai-and-it-might-change-yours-too-853b958c54b0)  
2. Taskmaster AI Bookmarks \- William Callahan, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://williamcallahan.com/bookmarks/tags/taskmaster-ai](https://williamcallahan.com/bookmarks/tags/taskmaster-ai)  
3. AI Project Management Bookmarks \- William Callahan, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://williamcallahan.com/bookmarks/tags/ai-project-management](https://williamcallahan.com/bookmarks/tags/ai-project-management)  
4. taskmaster Â· GitHub Topics, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://github.com/topics/taskmaster](https://github.com/topics/taskmaster)  
5. eyaltoledano/claude-task-master: An AI-powered task-management system you can drop into Cursor, Lovable, Windsurf, Roo, and others. \- GitHub, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://github.com/eyaltoledano/claude-task-master](https://github.com/eyaltoledano/claude-task-master)  
6. Taskmaster AI Tutorial: 10X AI Coding & Cut 90% of Errors \- YouTube, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://www.youtube.com/watch?v=iGqjh6cNEz8](https://www.youtube.com/watch?v=iGqjh6cNEz8)  
7. robson-paproski/task-master: An AI-powered task-management system you can drop into Cursor, Lovable, Windsurf, Roo, and others. \- GitHub, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://github.com/robson-paproski/task-master](https://github.com/robson-paproski/task-master)  
8. aamanbhagat/TaskMaster-AI \- GitHub, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://github.com/aamanbhagat/TaskMaster-AI](https://github.com/aamanbhagat/TaskMaster-AI)  
9. Pricing \- TaskMaster AI, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://www.taskmaster.one/pricing](https://www.taskmaster.one/pricing)  
10. TaskMaster AI: Your Smart AI Study Agent, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://www.taskmaster.one/](https://www.taskmaster.one/)  
11. claude-task-master/docs/tutorial.md at main \- GitHub, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://github.com/eyaltoledano/claude-task-master/blob/main/docs/tutorial.md](https://github.com/eyaltoledano/claude-task-master/blob/main/docs/tutorial.md)  
12. Task Master: Installation, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://taskmaster-49ce32d5.mintlify.app/](https://taskmaster-49ce32d5.mintlify.app/)  
13. eighty9nine/task-master: An AI-powered task-management system you can drop into Cursor, Lovable, Windsurf, Roo, and others. \- GitHub, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://github.com/eighty9nine/task-master](https://github.com/eighty9nine/task-master)  
14. How Taskmaster AI Reduces Vibe Coding Errors by 90% \- Geeky ..., 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://www.geeky-gadgets.com/taskmaster-ai-coding-efficiency/](https://www.geeky-gadgets.com/taskmaster-ai-coding-efficiency/)  
15. Preparing a project to be vibe-coded \- seroperson.me, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://seroperson.me/2025/05/02/preparing-a-project-to-be-vibe-coded/](https://seroperson.me/2025/05/02/preparing-a-project-to-be-vibe-coded/)  
16. Taskmaster 2.0 \+ Cline, Roo, Windsurf & Cursor : This is NOW THE BEST Task Manager for YOUR AI Coder \- YouTube, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://www.youtube.com/watch?v=IF1VuThI\_50\&pp=0gcJCfwAo7VqN5tD](https://www.youtube.com/watch?v=IF1VuThI_50&pp=0gcJCfwAo7VqN5tD)  
17. taskmasterai \- Reddit, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://www.reddit.com/r/taskmasterai/](https://www.reddit.com/r/taskmasterai/)  
18. How to Reduce AI Coding Errors with a Claude TaskMaster AI, a task manager MCP, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://shipixen.com/tutorials/reduce-ai-coding-errors-with-taskmaster-ai](https://shipixen.com/tutorials/reduce-ai-coding-errors-with-taskmaster-ai)  
19. Turning Cursor into a task-based AI coding system | by Meelis Ojasild | Jun, 2025 | Medium, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://meelis-ojasild.medium.com/turning-cursor-into-a-task-based-ai-coding-system-31e1e3bf047b](https://meelis-ojasild.medium.com/turning-cursor-into-a-task-based-ai-coding-system-31e1e3bf047b)  
20. AI-Powered Development with Cursor and TaskMaster : r/rails \- Reddit, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://www.reddit.com/r/rails/comments/1l5qk0l/aipowered\_development\_with\_cursor\_and\_taskmaster/](https://www.reddit.com/r/rails/comments/1l5qk0l/aipowered_development_with_cursor_and_taskmaster/)  
21. Agentic RAG vs. Traditional RAG \- Pureinsights, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://pureinsights.com/blog/2025/agentic-rag-vs-traditional-rag/](https://pureinsights.com/blog/2025/agentic-rag-vs-traditional-rag/)  
22. How I Made Coding 10x Faster With One Simple Setup\! (Task Master) \- YouTube, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://www.youtube.com/watch?v=47UW2XXpxms\&pp=0gcJCfwAo7VqN5tD](https://www.youtube.com/watch?v=47UW2XXpxms&pp=0gcJCfwAo7VqN5tD)  
23. Releases Â· eyaltoledano/claude-task-master \- GitHub, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://github.com/eyaltoledano/claude-task-master/releases](https://github.com/eyaltoledano/claude-task-master/releases)  
24. Task Master: How I solved Cursor code slop and escaped the AI loop of hell (Claude/Gemini/Perplexity powered) : r/ClaudeAI \- Reddit, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://www.reddit.com/r/ClaudeAI/comments/1jlhg7g/task\_master\_how\_i\_solved\_cursor\_code\_slop\_and/](https://www.reddit.com/r/ClaudeAI/comments/1jlhg7g/task_master_how_i_solved_cursor_code_slop_and/)  
25. Pattern 2: Contextual Conversational Clients â€” Grounding Conversations with Relevance | by Bhuvaneswari Subramani | Jun, 2025 | Medium, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://medium.com/@bhuvaneswari.subramani/pattern-2-contextual-conversational-clients-grounding-conversations-with-relevance-d8f82e0385e0](https://medium.com/@bhuvaneswari.subramani/pattern-2-contextual-conversational-clients-grounding-conversations-with-relevance-d8f82e0385e0)  
26. TaskMaster AI Review: Is It the Ultimate Automation Tool for Developers? \- Sidetool, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://www.sidetool.co/post/taskmaster-ai-review-is-it-the-ultimate-automation-tool-for-developers](https://www.sidetool.co/post/taskmaster-ai-review-is-it-the-ultimate-automation-tool-for-developers)  
27. TaskMaster consumed all available API credit while "timing out". : r/taskmasterai \- Reddit, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://www.reddit.com/r/taskmasterai/comments/1lehatt/taskmaster\_consumed\_all\_available\_api\_credit/](https://www.reddit.com/r/taskmasterai/comments/1lehatt/taskmaster_consumed_all_available_api_credit/)  
28. Best Free AI Agent Builders for Developers in 2025 \- GoCodeo, 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://www.gocodeo.com/post/best-free-ai-agent-builders-for-developers-in-2025](https://www.gocodeo.com/post/best-free-ai-agent-builders-for-developers-in-2025)  
29. Didn't think AI can code like this (TaskMaster AI \+ Cursor guide for vibe coding setup), 7ì›” 25, 2025ì— ì•¡ì„¸ìŠ¤, [https://www.youtube.com/watch?v=dH4mc9VQ96g](https://www.youtube.com/watch?v=dH4mc9VQ96g)
</file>

<file path="references/threads-ui-analysis.md">
# Threads UI ë ˆí¼ëŸ°ìŠ¤ ë¶„ì„

## ë¶„ì„ ê°œìš”
- **íŒŒì¼**: threads-cleaned.html
- **ë¶„ì„ì¼**: 2025-01-25
- **ëª©ì **: ì›Œí´ë¦¬ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì„ ìœ„í•œ UI/UX íŒ¨í„´ ì—°êµ¬

## ğŸ¨ ë””ìì¸ ì‹œìŠ¤í…œ

### ìƒ‰ìƒ íŒ”ë ˆíŠ¸
- **ë°°ê²½ìƒ‰**: #FAFAFA (ë°ì€ íšŒìƒ‰)
- **ì¹´ë“œ ë°°ê²½**: #FFF (ìˆœë°±)
- **í…ìŠ¤íŠ¸**: #000 (ìˆœê²€ì •)
- **ë³´ì¡° í…ìŠ¤íŠ¸**: #999, #424242 (íšŒìƒ‰ ê³„ì—´)
- **ê²½ê³„ì„ **: #D5D5D5, #DBDBDB

### íƒ€ì´í¬ê·¸ë˜í”¼
- **í°íŠ¸ íŒ¨ë°€ë¦¬**: Roboto, -apple-system, BlinkMacSystemFont
- **ì£¼ìš” í°íŠ¸ í¬ê¸°**: 15px (ì œëª©), 14px (ë³¸ë¬¸), 13px (ì•¡ì…˜)
- **í°íŠ¸ ë‘ê»˜**: 700 (ë³¼ë“œ), 400 (ì¼ë°˜)

### CSS ë³€ìˆ˜ ì‹œìŠ¤í…œ
- ì¼ê´€ëœ ë””ìì¸ í† í° ê´€ë¦¬
- ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸ ìŠ¤íƒ€ì¼ë§
- ë°˜ì‘í˜• ë””ìì¸ì„ ìœ„í•œ ìœ ì—°í•œ ê°’ ê´€ë¦¬

## ğŸ“± ë ˆì´ì•„ì›ƒ êµ¬ì¡°

### ë°ìŠ¤í¬í†± ë ˆì´ì•„ì›ƒ
```
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Nav â”‚     Header      â”‚
â”‚(72) â”‚   Feed(640px)   â”‚
â”‚     â”‚                 â”‚
â”‚     â”‚     Posts       â”‚
â”‚     â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ëª¨ë°”ì¼ ë ˆì´ì•„ì›ƒ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Header       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       Feed        â”‚
â”‚                   â”‚
â”‚      Posts        â”‚
â”‚                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Bottom Nav      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì£¼ìš” êµ¬ì¡° ìš”ì†Œ
- **ì¢Œì¸¡ ë„¤ë¹„ê²Œì´í„°**: 72px ê³ ì • í­, ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬
- **ë©”ì¸ í”¼ë“œ**: 640px ì¤‘ì•™ ì •ë ¬
- **ë°˜ì‘í˜• ë¸Œë ˆì´í¬í¬ì¸íŠ¸**: 768px

## ğŸ§­ ë„¤ë¹„ê²Œì´ì…˜ íŒ¨í„´

### ì¢Œì¸¡ ë„¤ë¹„ê²Œì´ì…˜ (ë°ìŠ¤í¬í†±)
1. **ë¡œê³  ì˜ì—­**: @ ì‹¬ë³¼ (32px)
2. **ë©”ì¸ ë©”ë‰´** (5ê°œ í•­ëª©):
   - í™ˆ (í™œì„± ìƒíƒœ)
   - ê²€ìƒ‰
   - ì¶”ê°€ (+)
   - í™œë™ (í•˜íŠ¸)
   - í”„ë¡œí•„
3. **ì˜¤ë²„í”Œë¡œìš° ë©”ë‰´**: ì  3ê°œ (í•˜ë‹¨)

### ìƒë‹¨ í—¤ë”
- **ë°ìŠ¤í¬í†±**: ì œëª© + ë“œë¡­ë‹¤ìš´ + ì¸ì¦ ë²„íŠ¼
- **ëª¨ë°”ì¼**: ë¡œê³  + ë©”ë‰´ ë²„íŠ¼

### í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ (ëª¨ë°”ì¼)
- 5ê°œ ì•„ì´ì½˜ ê· ë“± ë°°ì¹˜
- 60px ë†’ì´
- í™œì„± ìƒíƒœ ì‹œê°ì  í”¼ë“œë°±

## ğŸ’¬ ì†Œì…œ ê¸°ëŠ¥ ìš”ì†Œ

### í¬ìŠ¤íŠ¸ ì¹´ë“œ êµ¬ì¡°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Avatar] Username â€¢ 9h  [â‹¯] â”‚
â”‚                             â”‚
â”‚ Post content text...        â”‚
â”‚                             â”‚
â”‚ [â¤209] [ğŸ’¬9] [ğŸ”„60] [âœˆ5]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ìƒí˜¸ì‘ìš© ìš”ì†Œ
- **ì¢‹ì•„ìš”**: í•˜íŠ¸ ì•„ì´ì½˜ + ìˆ«ì
- **ëŒ“ê¸€**: ë§í’ì„  ì•„ì´ì½˜ + ìˆ«ì
- **ë¦¬í¬ìŠ¤íŠ¸**: ì¬ìˆœí™˜ ì•„ì´ì½˜ + ìˆ«ì
- **ê³µìœ **: ë¹„í–‰ê¸° ì•„ì´ì½˜ + ìˆ«ì

### ì‚¬ìš©ì ì •ë³´
- **í”„ë¡œí•„ ì•„ë°”íƒ€**: 36px ì›í˜•, ê·¸ë¼ë°ì´ì…˜ ë°°ê²½
- **ì‚¬ìš©ìëª…**: ë³¼ë“œ í°íŠ¸
- **íƒ€ì„ìŠ¤íƒ¬í”„**: íšŒìƒ‰ í…ìŠ¤íŠ¸

## ğŸ¯ ì›Œí´ë¦¬ ì ìš© ê°€ëŠ¥í•œ í•µì‹¬ íŒ¨í„´

### 1. ë ˆì´ì•„ì›ƒ íŒ¨í„´
- **ì¤‘ì•™ ì •ë ¬ í”¼ë“œ**: 640px ê³ ì • í­
- **ì¢Œì¸¡ ê³ ì • ë„¤ë¹„**: ì•„ì´ì½˜ ê¸°ë°˜ ì„¸ë¡œ ë©”ë‰´
- **ì¹´ë“œ ê¸°ë°˜ ì½˜í…ì¸ **: ëª…í™•í•œ êµ¬ë¶„ê³¼ ê·¸ë¦¼ì

### 2. ìƒí˜¸ì‘ìš© íŒ¨í„´
- **í˜¸ë²„ íš¨ê³¼**: ë¯¸ë¬˜í•œ ë°°ê²½ìƒ‰ ë³€í™”
- **ë“œë¡­ë‹¤ìš´ ë©”ë‰´**: ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´
- **í”Œë¡œíŒ… ì•¡ì…˜**: ìš°í•˜ë‹¨ ê³ ì • ë²„íŠ¼

### 3. ë°˜ì‘í˜• íŒ¨í„´
- **ëª¨ë°”ì¼ í¼ìŠ¤íŠ¸**: í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜
- **ì ì‘í˜• í—¤ë”**: ì»¨í…ìŠ¤íŠ¸ì— ë”°ë¥¸ ìš”ì†Œ í‘œì‹œ/ìˆ¨ê¹€
- **í„°ì¹˜ ì¹œí™”ì **: 44px ìµœì†Œ í„°ì¹˜ ì˜ì—­

### 4. ì‹œê°ì  íŒ¨í„´
- **ë¯¸ë‹ˆë©€ ìƒ‰ìƒ**: í‘ë°± ê¸°ë°˜ + í¬ì¸íŠ¸ ì»¬ëŸ¬
- **ì¼ê´€ëœ ê°„ê²©**: 12px, 16px, 24px ê·œì¹™
- **ëª…í™•í•œ ê³„ì¸µ**: í°íŠ¸ í¬ê¸°ì™€ ë‘ê»˜ë¡œ êµ¬ë¶„

## ğŸ›  ê¸°ìˆ ì  êµ¬í˜„ ìš”ì†Œ

### CSS êµ¬ì¡°
- **CSS ë³€ìˆ˜**: ë””ìì¸ í† í° ê´€ë¦¬
- **Flexbox**: ë ˆì´ì•„ì›ƒ êµ¬ì„±
- **ë¯¸ë””ì–´ ì¿¼ë¦¬**: ë°˜ì‘í˜• êµ¬í˜„

### JavaScript ê¸°ëŠ¥
- **ë“œë¡­ë‹¤ìš´ í† ê¸€**: ë©”ë‰´ í‘œì‹œ/ìˆ¨ê¹€
- **ì™¸ë¶€ í´ë¦­ ê°ì§€**: ë©”ë‰´ ìë™ ë‹«ê¸°
- **ì´ë²¤íŠ¸ ìœ„ì„**: íš¨ìœ¨ì ì¸ ì´ë²¤íŠ¸ ì²˜ë¦¬

## ì›Œí´ë¦¬ ê°œë°œ ê¶Œì¥ì‚¬í•­

### 1. ë””ìì¸ ì‹œìŠ¤í…œ êµ¬ì¶•
- Threadsì˜ ìƒ‰ìƒ íŒ”ë ˆíŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¸Œëœë“œ ì»¬ëŸ¬ ì¶”ê°€
- CSS ë³€ìˆ˜ë¥¼ í™œìš©í•œ ì¼ê´€ëœ ë””ìì¸ í† í°
- ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ UI ìš”ì†Œ

### 2. ë ˆì´ì•„ì›ƒ ì „ëµ
- 640px ì¤‘ì•™ ì •ë ¬ í”¼ë“œ ë ˆì´ì•„ì›ƒ ì±„íƒ
- ì¢Œì¸¡ ë„¤ë¹„ê²Œì´ì…˜ì„ ë¹„ì¦ˆë‹ˆìŠ¤ ê¸°ëŠ¥ì— ë§ê²Œ ì¡°ì •
- ëª¨ë°”ì¼ í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ êµ¬í˜„

### 3. ì‚¬ìš©ì ê²½í—˜
- ì§ê´€ì ì¸ ì•„ì´ì½˜ ì‚¬ìš©
- ëª…í™•í•œ ì‹œê°ì  í”¼ë“œë°±
- í„°ì¹˜ ì¹œí™”ì ì¸ ì¸í„°í˜ì´ìŠ¤ ìš”ì†Œ

### 4. ì„±ëŠ¥ ìµœì í™”
- ìµœì†Œí•œì˜ JavaScript ì‚¬ìš©
- CSS ê¸°ë°˜ ì• ë‹ˆë©”ì´ì…˜
- íš¨ìœ¨ì ì¸ ì´ë²¤íŠ¸ ì²˜ë¦¬
</file>

<file path="references/WORKLY_PLAN_1.0.md">
# **í”„ë¡œì íŠ¸ "ëª¨ë©˜í…€": ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ê¸°ë°˜ ìƒì‚°ì„± ìƒíƒœê³„ êµ¬ì¶•ì„ ìœ„í•œ ì²­ì‚¬ì§„**

## **ì„¹ì…˜ 1: í•µì‹¬ ê²½í—˜ \- ê¸°ë°˜ ë° ì‚¬ìš©ì ì—¬ì •**

ì´ ê¸°ì´ˆ ì„¹ì…˜ì—ì„œëŠ” ì•±ì˜ í•µì‹¬ ë””ìì¸ ì›ì¹™, ì •ë³´ ì•„í‚¤í…ì²˜, ê·¸ë¦¬ê³  ì´ˆê¸° ì‚¬ìš©ì ê²½í—˜ì„ ì •ë¦½í•©ë‹ˆë‹¤. ì´ëŠ” ì•±ì˜ ë³µì¡í•œ ê¸°ëŠ¥ë“¤ì´ ì‚¬ìš©ìì˜ ì£¼ìš” ìš”êµ¬ì‚¬í•­ì¸ Threads ìŠ¤íƒ€ì¼ì˜ UIë¥¼ ì§ì ‘ì ìœ¼ë¡œ ë°˜ì˜í•˜ì—¬, ë‹¨ìˆœí•˜ê³  ì§ê´€ì ì´ë©° ë§¤ë ¥ì ì¸ ê¸°ë°˜ ìœ„ì— êµ¬ì¶•ë˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.

### **1.1. ë””ìì¸ ì² í•™: 'Threads' ì •ì‹ ì˜ ì§‘ì¤‘ëœ ë¯¸ë‹ˆë©€ë¦¬ì¦˜**

í•µì‹¬ ì›ì¹™ì€ ìƒì‚°ì„± ìŠ¤ìœ„íŠ¸ì˜ í’ë¶€í•œ ê¸°ëŠ¥ê³¼ í˜„ëŒ€ ì†Œì…œ ì•±ì˜ ê·¹ëª…í•œ ë‹¨ìˆœí•¨ì„ ê²°í•©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ëŠ” 'ì ì§„ì  ê³µê°œ(progressive disclosure)' ì›ì¹™ì— ëŒ€í•œ í—Œì‹ ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì¦‰, í•µì‹¬ì ì¸ í–‰ë™ì— ëŒ€í•´ì„œëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ê¹”ë”í•˜ê²Œ ìœ ì§€í•˜ë©´ì„œ, ìˆ™ë ¨ëœ ì‚¬ìš©ìë“¤ì´ ë” ê¹Šì€ ê¸°ëŠ¥ì— ì§ê´€ì ìœ¼ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

ì´ëŸ¬í•œ ì² í•™ì„ êµ¬í˜„í•˜ê¸° ìœ„í•œ UI/UXì˜ í•µì‹¬ ê¸°ë‘¥ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.1

* **ë‹¨ìˆœì„± ë° ëª…í™•ì„±:** ëª¨ë“  ë¹„ë³¸ì§ˆì ì¸ ìš”ì†Œë¥¼ ì œê±°í•©ë‹ˆë‹¤. ëª¨ë“  í™”ë©´ì€ ë‹¨ í•˜ë‚˜ì˜ ì£¼ìš” ëª©ì ì„ ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤.5 ì¶©ë¶„í•œ ì—¬ë°±, ê¹”ë”í•œ íƒ€ì´í¬ê·¸ë˜í”¼(í¬ê³  ê°€ë…ì„± ë†’ì€ ì œëª©), ì œí•œëœ ìƒ‰ìƒ íŒ”ë ˆíŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸ì§€ ë¶€í•˜ë¥¼ ì¤„ì…ë‹ˆë‹¤.3  
* **ì¼ê´€ì„± ë° ì¹œìˆ™ì„±:** í”Œë«í¼(iOS/Android) ê´€ë¡€ë¥¼ ì¤€ìˆ˜í•˜ê³ , ì•± ì „ì²´ì— ê±¸ì³ ì¼ê´€ëœ ì‹œê°ì  ì–¸ì–´(ì•„ì´ì½˜, ë²„íŠ¼, ê°„ê²©)ë¥¼ ìœ ì§€í•˜ì—¬ ì œì´ì½¥ì˜ ë²•ì¹™(ì‚¬ìš©ìëŠ” ìµìˆ™í•œ íŒ¨í„´ì„ ì„ í˜¸í•œë‹¤)ì„ í™œìš©í•©ë‹ˆë‹¤.1  
* **ì‹œê°ì  ê³„ì¸µ êµ¬ì¡°:** í¬ê¸°, ìƒ‰ìƒ, ëŒ€ë¹„ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìì˜ ì£¼ì˜ë¥¼ ê°€ì¥ ì¤‘ìš”í•œ ìš”ì†Œë¡œ ìœ ë„í•˜ê³ , ì£¼ìš” í–‰ë™ì´ í•­ìƒ ëª…í™•í•˜ê²Œ ë³´ì´ë„ë¡ í•©ë‹ˆë‹¤.1  
* **í”¼ë“œë°± ë° ë§ˆì´í¬ë¡œì¸í„°ë™ì…˜:** ëª¨ë“  ì‚¬ìš©ì í–‰ë™(ì˜ˆ: ë²„íŠ¼ íƒ­, ì—…ë¬´ ì™„ë£Œ)ì— ëŒ€í•´ ì¦‰ê°ì ì´ê³  ë¯¸ë¬˜í•œ ì‹œê°ì  í”¼ë“œë°±ì„ ì œê³µí•˜ì—¬ ì•±ì´ ë°˜ì‘ì ìœ¼ë¡œ ëŠê»´ì§€ê²Œ í•˜ê³ , ë„í—ˆí‹° ì„ê³„ê°’ ì›ì¹™ì„ ê°•í™”í•©ë‹ˆë‹¤.1

ì´ëŸ¬í•œ ë¯¸ë‹ˆë©€ë¦¬ì¦˜ ì •ì‹ ì€ ë¡œê·¸ì¸ íë¦„ì—ì„œë„ ëª…í™•í•˜ê²Œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤. ìŠ¤í”Œë˜ì‹œ í™”ë©´ì—ëŠ” ë‹¨ í•˜ë‚˜ì˜ 'Googleë¡œ ì‹œì‘í•˜ê¸°' ë²„íŠ¼ë§Œ ì œê³µë©ë‹ˆë‹¤. ì´ëŠ” í‰ì˜ ë²•ì¹™(ì„ íƒì§€ê°€ ë§ì„ìˆ˜ë¡ ê²°ì •ì´ ì–´ë ¤ì›Œì§„ë‹¤)ì— ë”°ë¼ ê²°ì •ì˜ ë§ˆì°°ì„ ì œê±°í•˜ê³  ì ‘ê·¼ì„ ê°„ì†Œí™”í•˜ëŠ” ì „ëµì  ì„ íƒì…ë‹ˆë‹¤.2

### **1.2. ì •ë³´ ì•„í‚¤í…ì²˜ ë° ë‚´ë¹„ê²Œì´ì…˜**

* **í•˜ë‹¨ ë‚´ë¹„ê²Œì´ì…˜ ë°”:** 'í™ˆ', 'í”„ë¡œì íŠ¸', 'ê²Œì‹œíŒ', 'í™œë™', 'í”„ë¡œí•„'ì˜ 5ê°œ íƒ­ìœ¼ë¡œ êµ¬ì„±ëœ ê³ ì • ë°”ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì´ëŠ” ì•±ì˜ í•µì‹¬ ê¸°ëŠ¥ ì „ë°˜ì— ê±¸ì³ ëª…í™•í•˜ê³  ì¼ê´€ëœ ë‚´ë¹„ê²Œì´ì…˜ì„ ë³´ì¥í•©ë‹ˆë‹¤.  
* **í”Œë¡œíŒ… ì•¡ì…˜ ë²„íŠ¼(FAB) \- 'ìƒì„±' í—ˆë¸Œ:**  
  * **ë””ìì¸:** ì¸ì²´ê³µí•™ì  ì ‘ê·¼ì„±ì„ ìœ„í•´ í™”ë©´ ì˜¤ë¥¸ìª½ í•˜ë‹¨ì— ìœ„ì¹˜í•œ ë‹¨ì¼ ì›í˜• FABì…ë‹ˆë‹¤.9  
  * **ìƒí˜¸ì‘ìš©:** FABë¥¼ íƒ­í•˜ë©´ 'ì—…ë¬´ ì¶”ê°€', 'í”„ë¡œì íŠ¸ ì¶”ê°€', 'ê²Œì‹œê¸€ ì¶”ê°€'ë¼ëŠ” ì„¸ ê°€ì§€ ëª…í™•í•˜ê³  ê±´ì„¤ì ì¸ í–‰ë™ì´ í¬í•¨ëœ ì˜¤ë²„í”Œë¡œìš° ë©”ë‰´('ìŠ¤í”¼ë“œ ë‹¤ì´ì–¼' ì „í™˜)ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.10 ì´ ë””ìì¸ì€ ì£¼ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë³µì¡í•˜ê²Œ ë§Œë“¤ì§€ ì•Šìœ¼ë©´ì„œ ìƒì„± ê´€ë ¨ í–‰ë™ì„ ì¤‘ì•™ì— ì§‘ì¤‘ì‹œí‚µë‹ˆë‹¤.  
  * **ìƒí™© ì¸ì‹:** FABëŠ” ìƒì„±ì„ ìœ„í•œ ì£¼ìš” ë§¥ë½ì¸ í™ˆ, í”„ë¡œì íŠ¸, ê²Œì‹œíŒ í™”ë©´ì—ë§Œ ì¡´ì¬í•©ë‹ˆë‹¤. ì†Œë¹„ë‚˜ ê²€í† ê°€ ì£¼ëœ í–‰ë™ì¸ í”„ë¡œí•„ê³¼ í™œë™ í™”ë©´ì—ì„œëŠ” ìˆ¨ê²¨ì ¸ ì‚¬ìš©ìì˜ ì§‘ì¤‘ì„ ë•ìŠµë‹ˆë‹¤.11

### **1.3. ì²« 5ë¶„: ì˜¨ë³´ë”© ë° í™œì„±í™”**

ì˜¨ë³´ë”©ì˜ ëª©í‘œëŠ” ì‚¬ìš©ìë¥¼ ê°€ëŠ¥í•œ í•œ ë¹¨ë¦¬ 'ì•„í•˜\! ëª¨ë©˜íŠ¸(Aha\! Moment)'ë¡œ ì•ˆë‚´í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ ì•±ì—ì„œ 'ì•„í•˜\! ëª¨ë©˜íŠ¸'ëŠ” *ì²« ë²ˆì§¸ ì—…ë¬´ë¥¼ ì…ë ¥í•˜ê³  ê·¸ê²ƒì´ í™ˆ í™”ë©´ ìµœìƒë‹¨ì— ìš°ì„ ìˆœìœ„ë¡œ í‘œì‹œë˜ëŠ” ê²ƒì„ ë³´ëŠ” ìˆœê°„*ìœ¼ë¡œ ì •ì˜ë©ë‹ˆë‹¤.

ì‚¬ìš©ìê°€ ì œí’ˆì˜ ê°€ì¹˜ë¥¼ ì¦‰ì‹œ ê²½í—˜í•˜ê²Œ í•˜ëŠ” ê²ƒì€ ì´ˆê¸° ì´íƒˆë¥ ì„ ì¤„ì´ëŠ” ë° ê²°ì •ì ì…ë‹ˆë‹¤. ë”°ë¼ì„œ ì˜¨ë³´ë”© ê³¼ì •ì€ ì•±ì˜ ëª¨ë“  ê¸°ëŠ¥ì„ ë‚˜ì—´í•˜ëŠ” ìˆ˜ë™ì ì¸ ì„¤ëª…ì„œê°€ ë˜ì–´ì„œëŠ” ì•ˆ ë©ë‹ˆë‹¤.12 ëŒ€ì‹ , ì•±ì˜ í•µì‹¬ ì‚¬ìš© ìŠµê´€, ì¦‰ ì—…ë¬´ ê´€ë¦¬ ë£¨í”„ë¥¼ ì§ì ‘ ê²½í—˜í•˜ê²Œ í•¨ìœ¼ë¡œì¨ ê°€ì¹˜ë¥¼ ì¦‰ê°ì ìœ¼ë¡œ ì¦ëª…í•´ì•¼ í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ì ‘ê·¼ ë°©ì‹ì€ 'í™”ë©´ë‹¹ í•˜ë‚˜ì˜ í–‰ë™' ì›ì¹™ì„ ì‚¬ìš©ìì˜ ì²« í•™ìŠµ ê²½í—˜ì— ì§ì ‘ ì ìš©í•˜ì—¬, ìœ ì§€ìœ¨ê³¼ ì¸ì§€ëœ ê°€ì¹˜ë¥¼ ê·¹ëŒ€í™”í•©ë‹ˆë‹¤.5

ì˜¨ë³´ë”© íë¦„ì€ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ê³„ë©ë‹ˆë‹¤.12

1. **í™˜ì˜ í™”ë©´:** Google ë¡œê·¸ì¸ í›„, "ë‹¹ì‹ ì˜ ì—…ë¬´ë¥¼ ì •ë¦¬í•˜ê³ , ëª©í‘œë¥¼ ë‹¬ì„±í•˜ë©°, ì—­ëŸ‰ì„ ì„±ì¥ì‹œí‚¤ì„¸ìš”."ë¼ëŠ” ì•±ì˜ í•µì‹¬ ê°€ì¹˜ ì œì•ˆì„ ê°„ê²°í•˜ê²Œ ì„¤ëª…í•˜ëŠ” ë‹¨ì¼ í™”ë©´ì´ í‘œì‹œë©ë‹ˆë‹¤.  
2. **ëŒ€í™”í˜• íŠœí† ë¦¬ì–¼:** ìˆ˜ë™ì ì¸ ìŠ¬ë¼ì´ë“œì‡¼ ëŒ€ì‹ , ì‚¬ìš©ìëŠ” ì¦‰ì‹œ 'ì—…ë¬´ ì¶”ê°€' íë¦„ìœ¼ë¡œ ì•ˆë‚´ë©ë‹ˆë‹¤. íˆ´íŒì´ GTD ê¸°ë°˜ì˜ ì…ë ¥ ê³¼ì •ì„ ë‹¨ê³„ë³„ë¡œ ì•ˆë‚´í•©ë‹ˆë‹¤ (ì˜ˆ: "ìš°ì„ , ë¨¸ë¦¿ì†ì—ì„œ êº¼ë‚´ì„¸ìš”. ë¬´ì—‡ì´ ë§ˆìŒì— ê±¸ë¦¬ë‚˜ìš”?").  
3. **ì²« ê°€ì¹˜ ì „ë‹¬:** ì—…ë¬´ë¥¼ ì €ì¥í•˜ë©´, ì‚¬ìš©ìëŠ” í™ˆ í™”ë©´ìœ¼ë¡œ ì´ë™í•˜ë©°, ìƒˆë¡œ ìƒì„±ëœ ì—…ë¬´ ì¹´ë“œê°€ ëª©ë¡ ìƒë‹¨ì— í•˜ì´ë¼ì´íŠ¸ë˜ëŠ” ì• ë‹ˆë©”ì´ì…˜ì´ ì¬ìƒë©ë‹ˆë‹¤. ì´ëŠ” ì•±ì˜ í•µì‹¬ ê¸°ëŠ¥ì„ ì¦‰ì‹œ ì‹œì—°í•˜ê³  ê°€ì¹˜ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤.  
4. **ê¶Œí•œ ìš”ì²­:** ì•Œë¦¼ê³¼ ê°™ì€ ê¶Œí•œ ìš”ì²­ì€ ì´ˆê¸°ë¶€í„° í•œêº¼ë²ˆì— ìš”êµ¬í•˜ëŠ” ëŒ€ì‹ , ì²˜ìŒìœ¼ë¡œ ë§ˆê°ì¼ì„ ì„¤ì •í•˜ëŠ” ë“± ê´€ë ¨ ë§¥ë½ì—ì„œë§Œ ì´ë£¨ì–´ì ¸ ì‚¬ìš©ì ê²½í—˜ì˜ ë°©í•´ë¥¼ ìµœì†Œí™”í•©ë‹ˆë‹¤.

## **ì„¹ì…˜ 2: ìƒì‚°ì„± ì—”ì§„ \- í™ˆ ë° ì—…ë¬´ ê´€ë¦¬**

ì´ ì„¹ì…˜ì€ ì•±ì˜ í•µì‹¬ì ì¸ ì¼ì¼ ì‚¬ìš© ê¸°ëŠ¥ì„ ìƒì„¸íˆ ì„¤ëª…í•˜ë©°, ê°•ë ¥í•œ ìƒì‚°ì„± ë°©ë²•ë¡ (GTD)ì„ ì§€ëŠ¥ì ì´ê³  ë¯¸ë‹ˆë©€í•œ ì¸í„°í˜ì´ìŠ¤ì™€ ê²°í•©í•˜ì—¬ ì‚¬ìš©ìê°€ ì§„ì •ìœ¼ë¡œ ì¤‘ìš”í•œ ê²ƒì— ì§‘ì¤‘í•  ìˆ˜ ìˆë„ë¡ ë•ìŠµë‹ˆë‹¤.

### **2.1. ì§€ëŠ¥í˜• 'ì˜¤ëŠ˜' ë³´ê¸°: ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ì—…ë¬´ ëª©ë¡**

* **UI:** Threads í”¼ë“œì²˜ëŸ¼ ê¹”ë”í•˜ê³  ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•œ 'ì—…ë¬´ ì¹´ë“œ' í”¼ë“œë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ê° ì¹´ë“œëŠ” ì—…ë¬´ ì œëª©, ê´€ë ¨ í”„ë¡œì íŠ¸(ìƒ‰ìƒ ì½”ë”©ëœ íƒœê·¸ í¬í•¨), ë§ˆê°ì¼ì„ í‘œì‹œí•©ë‹ˆë‹¤. ì™„ë£Œëœ ì—…ë¬´ëŠ” ë§Œì¡±ìŠ¤ëŸ¬ìš´ ì²´í¬ ì• ë‹ˆë©”ì´ì…˜ê³¼ í•¨ê»˜ 'ì™„ë£Œë¨' ì„¹ì…˜ìœ¼ë¡œ ì´ë™í•˜ë©° íë ¤ì§‘ë‹ˆë‹¤.  
* **ìš°ì„ ìˆœìœ„ ì•Œê³ ë¦¬ì¦˜ \- 'ëª¨ë©˜í…€ ì ìˆ˜':** ëª©ë¡ ìµœìƒë‹¨ì˜ ì—…ë¬´ëŠ” ë‹¨ìˆœíˆ ë§ˆê°ì¼ì´ ê°€ì¥ ê°€ê¹Œìš´ ê²ƒì´ ì•„ë‹™ë‹ˆë‹¤. ì´ëŠ” ë‹¨ìˆœí™”ëœ RICE ëª¨ë¸ì„ ì‚¬ìš©í•˜ì—¬ ê³„ì‚°ëœ 'ëª¨ë©˜í…€ ì ìˆ˜'ì— ì˜í•´ ê²°ì •ë©ë‹ˆë‹¤.14  
  * **Reach (í”„ë¡œì íŠ¸ ì¤‘ìš”ë„):** ì´ ì—…ë¬´ì— ì˜ì¡´í•˜ëŠ” ë‹¤ë¥¸ ì—…ë¬´ë‚˜ í”„ë¡œì íŠ¸ ë§ˆì¼ìŠ¤í†¤ì€ ëª‡ ê°œì¸ê°€?  
  * **Impact (ê¸´ê¸‰ì„±/ì¤‘ìš”ì„±):** ë§ˆê°ì¼ ê·¼ì ‘ë„ì™€ ì‚¬ìš©ìê°€ ì •ì˜í•œ ìš°ì„ ìˆœìœ„(ì•„ì´ì  í•˜ì›Œ ë§¤íŠ¸ë¦­ìŠ¤ ëª¨ë¸ ì‚¬ìš©)ì˜ ì¡°í•©.  
  * **Confidence (ëª…í™•ì„±):** ì—…ë¬´ê°€ ëª…í™•í•œ ë‹¤ìŒ ë‹¨ê³„ì™€ í•¨ê»˜ ì˜ ì •ì˜ë˜ì—ˆëŠ”ê°€? (ëª¨í˜¸í•œ ì—…ë¬´ì—ëŠ” ë‚®ì€ ì ìˆ˜ë¥¼ ë¶€ì—¬í•˜ì—¬ ì‚¬ìš©ìê°€ ëª…í™•íˆ í•˜ë„ë¡ ìœ ë„).  
  * **Effort (ì˜ˆìƒ ì†Œìš” ì‹œê°„):** ì†Œìš” ì‹œê°„ì´ ì ì€ ì—…ë¬´ì— ì•½ê°„ì˜ ê°€ì‚°ì ì„ ì£¼ì–´ ë¹ ë¥¸ ì„±ê³µ ê²½í—˜ì„ í†µí•´ ë™ê¸°ë¥¼ ë¶€ì—¬í•˜ê³  ëª¨ë©˜í…€ì„ í˜•ì„±.  
* **ë³´ê¸° ë° í•„í„°:** ìƒë‹¨ì˜ ê°„ë‹¨í•œ íƒ­ì´ë‚˜ í•„í„° ì•„ì´ì½˜ì„ í†µí•´ 'ì˜¤ëŠ˜'(ì•Œê³ ë¦¬ì¦˜ ì •ë ¬), 'ì™„ë£Œë¨', 'ì „ì²´', 'ë‚˜ì¤‘ì— í•  ì¼'(ë§ˆê°ì¼ ì—†ëŠ” ì—…ë¬´) ë³´ê¸° ê°„ ì „í™˜ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.  
* **ê²€ìƒ‰:** ëª¨ë“  í”„ë¡œì íŠ¸ì˜ ëª¨ë“  ì—…ë¬´ë¥¼ ì¦‰ì‹œ ì°¾ì„ ìˆ˜ ìˆëŠ” ëˆˆì— ë„ëŠ” ê²€ìƒ‰ ë°”ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### **2.2. GTD ê¸°ë°˜ ì—…ë¬´ ìƒì„± íë¦„**

ì´ íë¦„ì€ ë°ì´ë¹„ë“œ ì•¨ëŸ°ì˜ GTD(Getting Things Done) ë°©ë²•ë¡ ì„ ì§ì ‘ êµ¬í˜„í•˜ì—¬, ìŠ¤íŠ¸ë ˆìŠ¤ ì—†ëŠ” 'ë¸Œë ˆì¸ ë¤í”„'ë¥¼ ìœ ë„í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.17 ë§ì€ ìƒì‚°ì„± ì•±ë“¤ì´ ì œëª©, í”„ë¡œì íŠ¸, ë§ˆê°ì¼, ìš°ì„ ìˆœìœ„ ë“± ëª¨ë“  í•„ë“œë¥¼ í•œ ë²ˆì— ë³´ì—¬ì£¼ëŠ” ê±°ëŒ€í•œ ì–‘ì‹ì„ ì œì‹œí•¨ìœ¼ë¡œì¨ ë§ˆì°°ì„ ìœ ë°œí•©ë‹ˆë‹¤. GTD ë°©ë²•ë¡ ì˜ í•µì‹¬ì€ ìˆœì°¨ì  í”„ë¡œì„¸ìŠ¤ì…ë‹ˆë‹¤: ë¨¼ì € ëª¨ë“  ê²ƒì„ ìˆ˜ì§‘í•˜ê³ , ê·¸ ë‹¤ìŒì— ì²˜ë¦¬í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. UIëŠ” ì´ëŸ¬í•œ íë¦„ì„ ë°˜ì˜í•´ì•¼ í•©ë‹ˆë‹¤. 'ì—…ë¬´ ì¶”ê°€' íë¦„ì„ 'ìˆ˜ì§‘ â†’ ëª…ë£Œí™” â†’ ì •ë¦¬'ë¼ëŠ” ê°œë³„ ë‹¨ê³„ë¡œ ë¶„í•´í•¨ìœ¼ë¡œì¨, ê° ë‹¨ê³„ì˜ ì¸ì§€ ë¶€í•˜ë¥¼ ì¤„ì…ë‹ˆë‹¤. ì´ëŠ” ë°ì´í„° ì…ë ¥ì²˜ëŸ¼ ëŠê»´ì§€ëŠ” ê²½í—˜ì„ ì•ˆë‚´ë°›ëŠ” ëŒ€í™”ì²˜ëŸ¼ ë§Œë“¤ì–´, ì‚¬ìš©ìê°€ ê¾¸ì¤€íˆ ì‚¬ìš©í•  ê°€ëŠ¥ì„±ì„ ë†’ì…ë‹ˆë‹¤.17

1. **1ë‹¨ê³„: ìˆ˜ì§‘ (FABìœ¼ë¡œ ì‹¤í–‰):** "ë¬´ì—‡ì´ ë§ˆìŒì— ê±¸ë¦¬ë‚˜ìš”?"ë¼ëŠ” ë¬¸êµ¬ì™€ í•¨ê»˜ ê°„ë‹¨í•œ í…ìŠ¤íŠ¸ í•„ë“œê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤. ìœ ì¼í•œ ëª©í‘œëŠ” ì—…ë¬´ë‚˜ ì•„ì´ë””ì–´ë¥¼ ì ëŠ” ê²ƒì…ë‹ˆë‹¤. ë‹¤ë¥¸ ê²ƒì€ ì—†ìŠµë‹ˆë‹¤.  
2. **2ë‹¨ê³„: ëª…ë£Œí™” ('ì‹¤í–‰ ê°€ëŠ¥í•œê°€ìš”?' í™”ë©´):** ì•±ì´ ê°„ë‹¨í•œ ì§ˆë¬¸ë“¤ì„ ìˆœì°¨ì ìœ¼ë¡œ ì œì‹œí•©ë‹ˆë‹¤.  
   * "ì‹¤í–‰ ê°€ëŠ¥í•œ ì¼ì¸ê°€ìš”?" (ì•„ë‹ˆì˜¤ë¼ë©´, 'ì°¸ê³  ìë£Œ' ë˜ëŠ” 'ì–¸ì  ê°€/ì–´ì©Œë©´' ëª©ë¡ìœ¼ë¡œ ë¶„ë¥˜).  
   * "2ë¶„ ì•ˆì— ëë‚¼ ìˆ˜ ìˆë‚˜ìš”?" (ì˜ˆë¼ë©´, UIëŠ” ì§€ê¸ˆ ë°”ë¡œ ì²˜ë¦¬í•˜ë„ë¡ ê¶Œì¥ \- '2ë¶„ ê·œì¹™').17  
   * "ë” í° ëª©í‘œì˜ ì¼ë¶€ì¸ê°€ìš”?" (ê¸°ì¡´ í”„ë¡œì íŠ¸ì— í• ë‹¹í•˜ê±°ë‚˜ ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ë„ë¡ ìœ ë„).  
3. **3ë‹¨ê³„: ì •ë¦¬ ('ì„¸ë¶€ ì •ë³´' í™”ë©´):** ì‚¬ìš©ìëŠ” ë§ˆê°ì¼, ìš°ì„ ìˆœìœ„(ê¸´ê¸‰/ì¤‘ìš”, ì¤‘ìš”/ê¸´ê¸‰í•˜ì§€ ì•ŠìŒ ë“±ì˜ 4ë¶„ë©´ ì•„ì´ì  í•˜ì›Œ ë§¤íŠ¸ë¦­ìŠ¤ UI ì‚¬ìš©) 21, ê³µìœ  í”„ë¡œì íŠ¸ì¸ ê²½ìš° ë‹´ë‹¹ì ì§€ì • ë“±ì˜ ì„¸ë¶€ ì •ë³´ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.  
4. **4ë‹¨ê³„: ì‹¤í–‰:** ì´ì œ ì—…ë¬´ëŠ” 'ì˜¤ëŠ˜' ë³´ê¸°ì— ë‚˜íƒ€ë‚˜ ì‹¤í–‰ ì¤€ë¹„ê°€ ì™„ë£Œë©ë‹ˆë‹¤.  
5. **5ë‹¨ê³„: ê²€í† :** ë§¤ì£¼ ì•Œë¦¼ì„ í†µí•´ ì‚¬ìš©ìì—ê²Œ 'ì£¼ê°„ ê²€í† 'ë¥¼ ìˆ˜í–‰í•˜ë„ë¡ ì•ˆë‚´í•©ë‹ˆë‹¤. ì´ëŠ” ìˆ˜ì§‘ë˜ì—ˆì§€ë§Œ ëª…ë£Œí™”ë˜ì§€ ì•Šì€ ì—…ë¬´ë“¤ì˜ 'ìˆ˜ì‹ í•¨', ë‹¤ê°€ì˜¤ëŠ” ë§ˆê°ì¼, í”„ë¡œì íŠ¸ ì§„í–‰ ìƒí™©ì„ ì²´ê³„ì ìœ¼ë¡œ ê²€í† í•˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤.

### **2.3. í”„ë¡œì íŠ¸ ì§„í–‰ë¥  í†µí•©**

ëª¨ë“  ì—…ë¬´ëŠ” í”„ë¡œì íŠ¸ì— ì†í•©ë‹ˆë‹¤. í™ˆ í™”ë©´ì˜ ìµœìš°ì„  ì—…ë¬´ ì¹´ë“œì—ëŠ” ê´€ë ¨ í”„ë¡œì íŠ¸ì˜ ì§„í–‰ë¥  í‘œì‹œì¤„ì´ ë¯¸ë¬˜í•˜ê²Œ í‘œì‹œë˜ì–´, ê°œì¸ì˜ ë…¸ë ¥ì´ ë” í° ëª©í‘œì™€ ì–´ë–»ê²Œ ì—°ê²°ë˜ëŠ”ì§€ ì‹œê°ì ìœ¼ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤. ì—…ë¬´ë¥¼ ì™„ë£Œí•˜ë©´ ì§„í–‰ë¥  í‘œì‹œì¤„ì´ ì±„ì›Œì§€ëŠ” ì• ë‹ˆë©”ì´ì…˜ì´ ì¬ìƒë˜ì–´ ì§ì ‘ì ì¸ í”¼ë“œë°± ë£¨í”„ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

## **ì„¹ì…˜ 3: í˜‘ì—… í—ˆë¸Œ \- í”„ë¡œì íŠ¸**

ì´ ì„¹ì…˜ì—ì„œëŠ” í”„ë¡œì íŠ¸ ê³µê°„ì„ í˜„ëŒ€ì ì´ê³  ë¯¼ì²©í•œ íŒ€ì„ ìœ„í•´ ì„¤ê³„ëœ ì—­ë™ì ì¸ 'ì±„íŒ… ìš°ì„ ' í™˜ê²½ìœ¼ë¡œ ì •ì˜í•©ë‹ˆë‹¤. ë‹¨ìˆœí•œ ì—…ë¬´ ëª©ë¡ì„ ë„˜ì–´ ëª©í‘œ ì„¤ì •, íŒ€ êµ¬ì„±, ëª…í™•í•œ ì¸ì„¼í‹°ë¸Œ ì‹œìŠ¤í…œì„ í†µí•©í•©ë‹ˆë‹¤.

### **3.1. ì±„íŒ… ìš°ì„  í”„ë¡œì íŠ¸ ê´€ë¦¬**

* **í•µì‹¬ ê°œë…:** í”„ë¡œì íŠ¸ì˜ ì£¼ í™”ë©´ì€ Slackì´ë‚˜ Microsoft Teamsì™€ ìœ ì‚¬í•œ ì˜êµ¬ì ì¸ ì±„íŒ… ì±„ë„ì…ë‹ˆë‹¤.23 ëª¨ë“  í”„ë¡œì íŠ¸ ê´€ë ¨ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜, íŒŒì¼ ê³µìœ , ì—…ë°ì´íŠ¸ê°€ ì´ê³³ì—ì„œ ì´ë£¨ì–´ì ¸ ë‹¨ì¼ ì •ë³´ ì†ŒìŠ¤(Single Source of Truth)ë¥¼ í˜•ì„±í•©ë‹ˆë‹¤. ì „í†µì ì¸ í”„ë¡œì íŠ¸ ê´€ë¦¬ ë„êµ¬ëŠ” ì»¤ë®¤ë‹ˆì¼€ì´ì…˜(ëŒ“ê¸€, ì´ë©”ì¼)ê³¼ ì‘ì—… ìì²´(ì—…ë¬´ ëª©ë¡)ë¥¼ ë¶„ë¦¬í•˜ì—¬ ë‹¨ì ˆëœ ì›Œí¬í”Œë¡œìš°ë¥¼ ë§Œë“­ë‹ˆë‹¤. ì±„íŒ…ì„ ê¸°ë³¸ ì¸í„°í˜ì´ìŠ¤ë¡œ ë§Œë“¤ê³  ìŠ¬ë˜ì‹œ ëª…ë ¹ì–´ì™€ ê°™ì€ í–‰ë™ì„ ì§ì ‘ í†µí•©í•¨ìœ¼ë¡œì¨, ì»¨í…ìŠ¤íŠ¸ ì „í™˜ì„ ì¤„ì…ë‹ˆë‹¤. ë¬¸ì œì— ëŒ€í•œ ëŒ€í™”ê°€ ì±„íŒ… ì°½ì„ ë– ë‚˜ì§€ ì•Šê³  ë°”ë¡œ ì‹¤í–‰ ê°€ëŠ¥í•œ ì—…ë¬´ë¡œ ì „í™˜ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” MS Teamsì˜ 'ë©”ì‹œì§€ì—ì„œ ì—…ë¬´ ë§Œë“¤ê¸°' ê¸°ëŠ¥ì—ì„œ ì˜ê°ì„ ë°›ì•„ ì›Œí¬í”Œë¡œìš°ë¥¼ ë” ë¹ ë¥´ê³  ìì—°ìŠ¤ëŸ½ê²Œ ë§Œë“¤ë©°, ì—…ë¬´ ìƒì„±ì˜ ë§¥ë½ì  ê¸°ë¡ì„ ì™„ë²½í•˜ê²Œ ë³´ì¡´í•©ë‹ˆë‹¤.25  
* **ìƒì‚°ì„±ì„ ìœ„í•œ ìŠ¬ë˜ì‹œ ëª…ë ¹ì–´:** 26  
  * /add-task \[ì—…ë¬´ ì„¤ëª…\] @\[ì‚¬ìš©ì\]\[ë§ˆê°ì¼\]: í”„ë¡œì íŠ¸ì˜ ì—…ë¬´ ëª©ë¡ì— ì¦‰ì‹œ ìƒˆ ì—…ë¬´ë¥¼ ìƒì„±í•˜ê³ , ë‹´ë‹¹ìë¥¼ ì§€ì •í•˜ë©°, ë§ˆê°ì¼ì„ ì„¤ì •í•©ë‹ˆë‹¤. í™•ì¸ ë©”ì‹œì§€ê°€ ì±„íŒ…ì— í‘œì‹œë©ë‹ˆë‹¤.  
  * /delegate @\[ì‚¬ìš©ì\]: ê¸°ì¡´ ì—…ë¬´ë¥¼ ì¬í• ë‹¹í•©ë‹ˆë‹¤.  
  * /set-milestone \[ë§ˆì¼ìŠ¤í†¤ ì´ë¦„\]\[ë§ˆê°ì¼\]: ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ ë§ˆì¼ìŠ¤í†¤ì„ ì •ì˜í•©ë‹ˆë‹¤.  
  * /link-wiki \[ìœ„í‚¤ ë¬¸ì„œëª…\]: ê²Œì‹œíŒì˜ ìœ„í‚¤ì—ì„œ ê´€ë ¨ ë¬¸ì„œë¥¼ ì±„íŒ…ì— ë§í¬í•©ë‹ˆë‹¤.  
* **ì±„íŒ…-ì—…ë¬´ ë³€í™˜:** 25 ì±„íŒ…ì˜ ëª¨ë“  ë©”ì‹œì§€ë¥¼ ê¸¸ê²Œ ëˆ„ë¥´ë©´ "ë©”ì‹œì§€ì—ì„œ ì—…ë¬´ ë§Œë“¤ê¸°" ì˜µì…˜ì´ ìˆëŠ” ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤. ì´ëŠ” ë©”ì‹œì§€ í…ìŠ¤íŠ¸ë¥¼ ìƒˆ ì—…ë¬´ë¡œ ë³€í™˜í•˜ë©°, ì»¨í…ìŠ¤íŠ¸ë¥¼ ìœ„í•´ ì›ë˜ ëŒ€í™”ë¡œ ë‹¤ì‹œ ì—°ê²°ë©ë‹ˆë‹¤.

### **3.2. ë¹„ì „ì—ì„œ ì„±ê³µê¹Œì§€: ëª©í‘œ ì„¤ì • ë° ë§ˆì¼ìŠ¤í†¤**

* **í”„ë¡œì íŠ¸ í—Œì¥:** ëª¨ë“  í”„ë¡œì íŠ¸ëŠ” í•µì‹¬ ëª©ì ì„ ì •ì˜í•˜ëŠ” 'í”„ë¡œì íŠ¸ í—Œì¥' ì„¤ì • í™”ë©´ìœ¼ë¡œ ì‹œì‘ë©ë‹ˆë‹¤.  
* **ëª©í‘œ (Objective \- 'ì™œ'):** ì§ˆì ì´ê³  ì˜ê°ì„ ì£¼ëŠ” ëª©í‘œì…ë‹ˆë‹¤ (ì˜ˆ: "ìƒˆë¡œìš´ ë§ˆì¼€íŒ… ì›¹ì‚¬ì´íŠ¸ ëŸ°ì¹­"). ì´ê²ƒì´ í”„ë¡œì íŠ¸ì˜ ë¶ê·¹ì„±ì…ë‹ˆë‹¤.  
* **í•µì‹¬ ê²°ê³¼ (Key Results \- 'ë¬´ì—‡' \- ë§ˆì¼ìŠ¤í†¤):** ëª©í‘œëŠ” 3-5ê°œì˜ ì •ëŸ‰ì ì´ê³  ì¸¡ì • ê°€ëŠ¥í•œ ë§ˆì¼ìŠ¤í†¤ìœ¼ë¡œ ë‚˜ë‰©ë‹ˆë‹¤.30 ì˜ˆ: KR1: "í™ˆí˜ì´ì§€ ë””ìì¸ ëª©ì—… ìµœì¢… ì™„ë£Œ." KR2: "í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ ì™„ë£Œ." KR3: "PageSpeed Insightsì—ì„œ 95ì  ì´ìƒ ë‹¬ì„±."  
* **ì§„í–‰ ìƒí™© ì‹œê°í™”:** í”„ë¡œì íŠ¸ì˜ ë©”ì¸ í˜ì´ì§€ì—ëŠ” ì „ì²´ ëª©í‘œì™€ ê° í•µì‹¬ ê²°ê³¼(ë§ˆì¼ìŠ¤í†¤)ì˜ ì™„ë£Œ ìƒíƒœë¥¼ ë³´ì—¬ì£¼ëŠ” ëˆˆì— ë„ëŠ” ì‹œê°ì  ëŒ€ì‹œë³´ë“œê°€ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” OKR ì†Œí”„íŠ¸ì›¨ì–´ UIì—ì„œ ì˜ê°ì„ ë°›ì•„ ì§„í–‰ ìƒí™©ì„ í•œëˆˆì— íŒŒì•…í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.32

### **3.3. íŒ€ êµ¬ì„±: í”„ë¡œì íŠ¸ ê¸°ë°˜ ëª¨ì§‘**

* **í”„ë¡œì íŠ¸ ì„¤ì •:** í”„ë¡œì íŠ¸ ìƒì„±ìëŠ” ë‹¤ìŒì„ ì •ì˜í•©ë‹ˆë‹¤.  
  * **í•„ìš” ê¸°ìˆ :** íƒœê·¸ ê¸°ë°˜ ì‹œìŠ¤í…œ (ì˜ˆ: 'UX ë””ìì¸', 'Python', 'ì¹´í”¼ë¼ì´íŒ…').  
  * **íŒ€ ê·œëª¨:** ë©¤ë²„ ìˆ˜ì— ëŒ€í•œ ì—„ê²©í•œ ì œí•œ (ì˜ˆ: "5ìë¦¬ ë‚¨ìŒ").  
* **ëª¨ì§‘ íë¦„ (Upworkì—ì„œ ì˜ê°):** 34  
  1. í”„ë¡œì íŠ¸ëŠ” 'ê³µê°œ' ë˜ëŠ” 'ì´ˆëŒ€ ì „ìš©'ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
  2. ê³µê°œëœ ê²½ìš°, ê²Œì‹œíŒì˜ 'ë©¤ë²„ ëª¨ì§‘ ì¤‘ì¸ í”„ë¡œì íŠ¸' ì„¹ì…˜ì— í‘œì‹œë©ë‹ˆë‹¤.  
  3. ì‚¬ìš©ìëŠ” ì´ í”„ë¡œì íŠ¸ë“¤ì„ ë‘˜ëŸ¬ë³´ê³  ìì‹ ì˜ ì í•©ì„±ì„ ì„¤ëª…í•˜ëŠ” ì§§ì€ ì œì•ˆì„œì™€ í•¨ê»˜ 'ì°¸ì—¬ ì‹ ì²­'ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
  4. í”„ë¡œì íŠ¸ ë¦¬ë”ëŠ” ì‹ ì²­ì„œë¥¼ ë°›ê³ , ì‹ ì²­ìì˜ í”„ë¡œí•„(ê¸°ìˆ , ê³¼ê±° í”„ë¡œì íŠ¸, í‰íŒ)ì„ ê²€í† í•œ í›„ 'ìˆ˜ë½' ë˜ëŠ” 'ê±°ì ˆ'í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
  5. íŒ€ ê·œëª¨ ì œí•œì— ë„ë‹¬í•˜ë©´ ì‹ ì²­ì€ ìë™ìœ¼ë¡œ ë§ˆê°ë©ë‹ˆë‹¤.

### **3.4. ì„±ê³µ ì¸ì„¼í‹°ë¸Œ: ë³´ìƒ ë° ê²°ê³¼ë¬¼**

* **ì‹œìŠ¤í…œ ì„¤ê³„:** í”„ë¡œì íŠ¸ ì„¤ì • ì‹œ, ìƒì„±ìëŠ” ë‹¤ìŒì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
  * **ê²°ê³¼ë¬¼(Deliverables):** í”„ë¡œì íŠ¸ ëª©í‘œì™€ ê´€ë ¨ëœ ìµœì¢… ì‚°ì¶œë¬¼ (ì˜ˆ: "ì™„ì „íˆ ê¸°ëŠ¥í•˜ëŠ” ì›¹ì‚¬ì´íŠ¸", "20í˜ì´ì§€ ë¶„ëŸ‰ì˜ ì‹œì¥ ì¡°ì‚¬ ë³´ê³ ì„œ").  
  * **ë³´ìƒ:** ë§ˆì¼ìŠ¤í†¤ ê¸°ë°˜ ë° ìµœì¢… ë³´ìƒì„ ëª¨ë‘ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ˆê¸°ì—ëŠ” ì•± ë‚´ ë³´ìƒì— ì¤‘ì ì„ ë‘¡ë‹ˆë‹¤.  
    * **XP ë³´ë„ˆìŠ¤:** "ë§ˆì¼ìŠ¤í†¤ 1 ì™„ë£Œ ì‹œ ëª¨ë“  íŒ€ì›ì—ê²Œ 500 XP ë³´ë„ˆìŠ¤ ì§€ê¸‰."  
    * **ë…ì  ì—…ì /ë°°ì§€:** ìµœì¢… ëª©í‘œ ì™„ë£Œ ì‹œ "ëŸ°ì¹­ ë°ì´ ì˜ì›…" ì—…ì .  
    * **í–¥í›„ ê¸ˆì „ì  í†µí•©:** ì‹œìŠ¤í…œì€ ë‚˜ì¤‘ì— ì„ë¬´ ê²Œì‹œíŒ ê¸°ëŠ¥ì„ ìœ„í•´ ê¸ˆì „ì  ë³´ìƒ(ì˜ˆ: í”„ë¡œì íŠ¸ ì˜ˆì‚°, í˜„ìƒê¸ˆ)ì„ ìˆ˜ìš©í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë©ë‹ˆë‹¤.

## **ì„¹ì…˜ 4: ìƒíƒœê³„ \- ê²Œì‹œíŒ**

ì´ ì„¹ì…˜ì€ ì‚¬ìš©ìì˜ ëª¨í˜¸í–ˆë˜ 'ê²Œì‹œíŒ' ê°œë…ì„ ì „ë¬¸ì ì¸ ì„±ì¥ê³¼ ê¸°íšŒë¥¼ ìœ„í•œ ê°•ë ¥í•˜ê³  ë‹¤ê°ì ì¸ í—ˆë¸Œë¡œ ì „í™˜í•©ë‹ˆë‹¤. íŠ¹íˆ ì»¤ë®¤ë‹ˆí‹° ê¸°ëŠ¥ì— ëŒ€í•œ ì „ëµì  ì „í™˜ì„ ì œì•ˆí•¨ìœ¼ë¡œì¨ ì‚¬ìš©ìì˜ ê°œì„  ìš”ì²­ì— ì§ì ‘ì ìœ¼ë¡œ ë¶€ì‘í•©ë‹ˆë‹¤.

### **4.1. ì„ë¬´ ê²Œì‹œíŒ: í”„ë¦¬ëœì„œ ë§ˆì¼“í”Œë ˆì´ìŠ¤**

* **ê°œë…:** ì™¸ë¶€ í´ë¼ì´ì–¸íŠ¸(ë˜ëŠ” ì˜ˆì‚°ì´ ìˆëŠ” ë‹¤ë¥¸ ì•± ì‚¬ìš©ì)ê°€ ìœ ë£Œ ì—…ë¬´ë‚˜ í”„ë¡œì íŠ¸('ì„ë¬´')ë¥¼ ê²Œì‹œí•  ìˆ˜ ìˆëŠ” ê³µê°„ì…ë‹ˆë‹¤. ì´ëŠ” ì•± ë‚´ ê²½ì œë¥¼ ì°½ì¶œí•˜ê³ , ìˆ™ë ¨ëœ ì‚¬ìš©ìë“¤ì—ê²Œ ì§ì ‘ì ì¸ ìˆ˜ìµí™” ê²½ë¡œë¥¼ ì œê³µí•©ë‹ˆë‹¤.  
* **í´ë¼ì´ì–¸íŠ¸ìš© ì‚¬ìš©ì íë¦„ (ì„ë¬´ ê²Œì‹œ):** 34  
  1. **ì„ë¬´ ê²Œì‹œ:** ì„ë¬´ ì œëª©, ì„¤ëª…, í•„ìš” ê¸°ìˆ , ì˜ˆì‚°(ê³ ì • ê¸ˆì•¡ ë˜ëŠ” ì‹œê°„ì œ), ë§ˆê°ì¼ì„ ì •ì˜í•˜ëŠ” ê°„ë‹¨í•œ ì–‘ì‹.  
  2. **ì œì•ˆì„œ ìˆ˜ì‹ :** ì•± ì‚¬ìš©ìëŠ” ì œì•ˆì„œë¥¼ ì œì¶œí•˜ì—¬ ì„ë¬´ì— 'ì…ì°°'í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
  3. **ê²€í†  ë° ê³ ìš©:** í´ë¼ì´ì–¸íŠ¸ëŠ” ì…ì°°ì„ ê²€í† í•˜ê³ , ì§€ì›ìì˜ í”„ë¡œí•„(ìŠ¤í‚¬ íŠ¸ë¦¬, ì™„ë£Œëœ í”„ë¡œì íŠ¸, í‰íŒ)ì„ í™•ì¸í•œ í›„ ì‚¬ìš©ìë¥¼ ê³ ìš©í•©ë‹ˆë‹¤.  
  4. **í”„ë¡œì íŠ¸ ì‹¤í–‰:** í´ë¼ì´ì–¸íŠ¸ì™€ ê³ ìš©ëœ ì‚¬ìš©ìê°€ í˜‘ì—…í•  ìˆ˜ ìˆë„ë¡ ë¹„ê³µê°œ í”„ë¡œì íŠ¸ ê³µê°„ì´ ìë™ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤.  
* **í”„ë¦¬ëœì„œìš© ì‚¬ìš©ì íë¦„ (ì„ë¬´ ì°¾ê¸°):**  
  1. **ì„ë¬´ íƒìƒ‰:** í•„í„°ë§ ê°€ëŠ¥í•œ ì„ë¬´ ëª©ë¡. ì‚¬ìš©ìëŠ” í•„ìš” ê¸°ìˆ , ì˜ˆì‚° ë“±ìœ¼ë¡œ í•„í„°ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
  2. **ì œì•ˆì„œ ì œì¶œ:** ìì‹ ì˜ ê¸°ìˆ ê³¼ ì¼ì¹˜í•˜ëŠ” ì„ë¬´ì— ì§€ì›í•©ë‹ˆë‹¤.  
  3. **ê³ ìš© ë° ì‘ì—…:** ì•±ì˜ í”„ë¡œì íŠ¸ ê´€ë¦¬ ì‹œìŠ¤í…œ ë‚´ì—ì„œ ì‘ì—…ì„ ì™„ë£Œí•©ë‹ˆë‹¤.  
  4. **ê²°ì œ ë° í‰ê°€:** ì™„ë£Œ ì‹œ ê²°ì œê°€ ì´ë£¨ì–´ì§€ê³ , ì–‘ì¸¡ì€ í”¼ë“œë°±ì„ ë‚¨ê²¨ í‰íŒ ì ìˆ˜ì— ê¸°ì—¬í•©ë‹ˆë‹¤.

### **4.2. ì§€ì‹ ìœ„í‚¤: ì‚´ì•„ìˆëŠ” ë§¤ë‰´ì–¼**

* **ê°œë…:** Notionì˜ ê³µê°œ í…œí”Œë¦¿ì´ë‚˜ ì „ë¬¸ ê¸°ìˆ ì„ ìœ„í•œ íŠ¹í™”ëœ ìœ„í‚¤í”¼ë””ì•„ì™€ ìœ ì‚¬í•œ, ì‚¬ìš©ìê°€ ìƒì„±í•˜ê³  ì»¤ë®¤ë‹ˆí‹°ê°€ ê´€ë¦¬í•˜ëŠ” ì§€ì‹ ë² ì´ìŠ¤ì…ë‹ˆë‹¤.37  
* **ì½˜í…ì¸  ìƒì„±:** ëª¨ë“  ì‚¬ìš©ìê°€ ìœ„í‚¤ ë¬¸ì„œë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¬¸ì„œëŠ” íŠœí† ë¦¬ì–¼, ëª¨ë²” ì‚¬ë¡€ ê°€ì´ë“œ, ë„êµ¬ ë¦¬ë·° ë˜ëŠ” ì•±ì— ì •ì˜ëœ ê¸°ìˆ ê³¼ ê´€ë ¨ëœ í”„ë¡œì„¸ìŠ¤ í…œí”Œë¦¿ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
* **í†µí•©:**  
  * ì—…ë¬´ë‚˜ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•  ë•Œ, ì‚¬ìš©ìëŠ” ì»¨í…ìŠ¤íŠ¸ë¥¼ ìœ„í•´ ìœ„í‚¤ ë¬¸ì„œë¥¼ ë§í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
  * í”„ë¡œì íŠ¸ ì™„ë£Œ í›„, ì•±ì€ ì‚¬ìš©ìì—ê²Œ "ì´ í”„ë¡œì íŠ¸ì—ì„œ 'Python'ê³¼ 'ë°ì´í„° ë¶„ì„'ì„ ì‚¬ìš©í•˜ì…¨ìŠµë‹ˆë‹¤. ìœ„í‚¤ì— ë‹¹ì‹ ì˜ ê³¼ì •ì´ë‚˜ ë°°ìš´ ì ì„ ê³µìœ í•´ì£¼ì‹œê² ì–´ìš”?"ë¼ê³  ì œì•ˆí•©ë‹ˆë‹¤.  
* **ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ë° ê´€ë¦¬:**  
  * ì¸ê¸° ìˆëŠ” ìœ„í‚¤ ë¬¸ì„œ(ì¡°íšŒìˆ˜ ë° ì¶”ì²œìˆ˜ ê¸°ë°˜)ë¥¼ ì‘ì„±í•˜ë©´ ì €ìëŠ” ìƒë‹¹í•œ XPì™€ 'í˜„ì' ë˜ëŠ” 'ë©˜í† ' ì—…ì ì„ ì–»ìŠµë‹ˆë‹¤.  
  * Stack Overflowì™€ ìœ ì‚¬í•œ í‰íŒ ê¸°ë°˜ ì‹œìŠ¤í…œì„ í†µí•´, ë†’ì€ í‰íŒì„ ê°€ì§„ ì‚¬ìš©ìê°€ ìœ„í‚¤ ì½˜í…ì¸ ë¥¼ í¸ì§‘í•˜ê³  ê´€ë¦¬í•˜ì—¬ í’ˆì§ˆì„ ë³´ì¥í•©ë‹ˆë‹¤.39

### **4.3. ì»¤ë®¤ë‹ˆí‹°ì˜ ì¬í•´ì„: í¬ëŸ¼ì—ì„œ 'ì‡¼ì¼€ì´ìŠ¤'ë¡œ**

* **ì „ëµì  ì „í™˜:** ì¼ë°˜ì ì¸ 'ì»¤ë®¤ë‹ˆí‹°' ê²Œì‹œíŒì€ ì‚¬ìš©ìê°€ ì™„ë£Œëœ í”„ë¡œì íŠ¸ë¥¼ ê³µìœ í•  ìˆ˜ ìˆëŠ” ê³µê°œì ì¸ í¬íŠ¸í´ë¦¬ì˜¤ ìŠ¤íƒ€ì¼ì˜ í”¼ë“œì¸ 'í”„ë¡œì íŠ¸ ì‡¼ì¼€ì´ìŠ¤'ë¡œ ëŒ€ì²´ë©ë‹ˆë‹¤. ì¼ë°˜ì ì¸ ì˜¨ë¼ì¸ ì»¤ë®¤ë‹ˆí‹°ëŠ” ëª©ì  ë¶€ì¡±ê³¼ ë†’ì€ ê´€ë¦¬ ë¹„ìš©ìœ¼ë¡œ ì¸í•´ ì‹¤íŒ¨í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.41 ì´ ì•±ì˜ í•µì‹¬ ê°€ì¹˜ëŠ”  
  *ìˆ˜í–‰*ê³¼ *ì„±ì·¨*ì— ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì»¤ë®¤ë‹ˆí‹° ê¸°ëŠ¥ì€ ì´ ê°€ì¹˜ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ êµ¬ì¶•ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ 'í”„ë¡œì íŠ¸ ì‡¼ì¼€ì´ìŠ¤'ë¡œ ì „í™˜í•¨ìœ¼ë¡œì¨, ì»¤ë®¤ë‹ˆí‹°ë¥¼ ì•±ì˜ ì£¼ìš” í™œë™ê³¼ ì§ì ‘ì ìœ¼ë¡œ ì—°ê²°í•©ë‹ˆë‹¤. ì´ëŠ” ê°•ë ¥í•œ ì„ ìˆœí™˜ êµ¬ì¡°ë¥¼ ë§Œë“­ë‹ˆë‹¤: ì‚¬ìš©ìëŠ” XPì™€ ê¸°ìˆ ì„ ì–»ê¸° ìœ„í•´ í”„ë¡œì íŠ¸ë¥¼ ì™„ë£Œí•˜ê³ (ì„¹ì…˜ 3), ìì‹ ì˜ í‰íŒê³¼ ê³µê°œ í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ êµ¬ì¶•í•˜ê¸° ìœ„í•´ ì‡¼ì¼€ì´ìŠ¤ì— ì‘ì—…ì„ ê²Œì‹œí•©ë‹ˆë‹¤(ì„¹ì…˜ 4, 5). ì´ë ‡ê²Œ ê°•í™”ëœ í”„ë¡œí•„ì€ ì„ë¬´ì— ê³ ìš©ë˜ê±°ë‚˜(ì„¹ì…˜ 4\) ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ì— ì´ˆëŒ€ë (ì„¹ì…˜ 3\) ê°€ëŠ¥ì„±ì„ ë†’ì…ë‹ˆë‹¤. ì´ì œ ëª¨ë“  ê¸°ëŠ¥ì´ ì„œë¡œë¥¼ ê°•í™”í•˜ì—¬, ë‹¨í¸ì ì¸ ë„êµ¬ ëª¨ìŒì´ ì•„ë‹Œ ëˆëˆí•˜ê³  ê°€ì¹˜ ìˆëŠ” ìƒíƒœê³„ë¥¼ ë§Œë“­ë‹ˆë‹¤.  
* **ì‡¼ì¼€ì´ìŠ¤ ê²Œì‹œë¬¼ ì½˜í…ì¸  (Behanceì—ì„œ ì˜ê°):** 43  
  * í”„ë¡œì íŠ¸ ì œëª© ë° ëª©í‘œ.  
  * ìµœì¢… ê²°ê³¼ë¬¼ ê°¤ëŸ¬ë¦¬ (ì´ë¯¸ì§€, ë§í¬, ë¹„ë””ì˜¤).  
  * ì‚¬ìš©ìê°€ ë„ì „ ê³¼ì œ, í•´ê²°ì±…, ë°°ìš´ ì ì— ëŒ€í•´ ì‘ì„±í•  ìˆ˜ ìˆëŠ” 'í”„ë¡œì„¸ìŠ¤' ì„¹ì…˜.  
  * ì‚¬ìš©ëœ ê¸°ìˆ ì— ëŒ€í•œ íƒœê·¸ ë° í˜‘ì—…í•œ íŒ€ì› ëª©ë¡.  
* **ê°€ì¹˜ ì œì•ˆ:**  
  * **ì‚¬ìš©ìì—ê²Œ:** ì™„ë£Œëœ ì‘ì—…ì„ í”„ë¡œí•„ì— ì§ì ‘ í‘œì‹œë˜ëŠ” ì‹¤ì§ˆì ì¸ í¬íŠ¸í´ë¦¬ì˜¤ í•­ëª©ìœ¼ë¡œ ì „í™˜í•˜ì—¬ ì „ë¬¸ì ì¸ ë¸Œëœë“œë¥¼ êµ¬ì¶•í•©ë‹ˆë‹¤.  
  * **ì»¤ë®¤ë‹ˆí‹°ì—ê²Œ:** ì˜ê°ê³¼ í•™ìŠµì˜ ì›ì²œì´ ë©ë‹ˆë‹¤. ì‹ ê·œ ì‚¬ìš©ìëŠ” ì•±ìœ¼ë¡œ ë¬´ì—‡ì„ ì„±ì·¨í•  ìˆ˜ ìˆëŠ”ì§€ ë³´ê³  ìˆ™ë ¨ëœ ì‚¬ìš©ìì˜ í”„ë¡œì„¸ìŠ¤ì—ì„œ ë°°ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
  * **í”Œë«í¼ì—ê²Œ:** ì•±ì˜ ê°€ì¹˜ë¥¼ ë³´ì—¬ì£¼ëŠ” ê°•ë ¥í•˜ê³  ììƒì ì¸ ì½˜í…ì¸  ë£¨í”„ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

## **ì„¹ì…˜ 5: í”Œë ˆì´ì–´ \- í”„ë¡œí•„ ë° ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜**

ì´ ì„¹ì…˜ì€ ì•±ì˜ ì¥ê¸°ì ì¸ ì°¸ì—¬ ì „ëµì˜ í•µì‹¬ì…ë‹ˆë‹¤. ì „ë¬¸ì ì¸ ì„±ì¥ì„ ì–´ë–»ê²Œ ë§¤ë ¥ì ì´ê³  ë™ê¸° ë¶€ì—¬ê°€ ë˜ëŠ” ê²Œì„ìœ¼ë¡œ ì „í™˜í•˜ëŠ”ì§€ ìƒì„¸íˆ ì„¤ëª…í•©ë‹ˆë‹¤.

### **5.1. í†µí•© ëŒ€ì‹œë³´ë“œ**

í”„ë¡œí•„ í™”ë©´ ìƒë‹¨ì€ í˜„ì¬ XP/ë ˆë²¨, ì—°ì† ê¸°ë¡(ì¼ì¼ ì—…ë¬´ ì™„ë£Œ), ì™„ë£Œëœ í”„ë¡œì íŠ¸, í‰íŒ ì ìˆ˜ ë“± í•µì‹¬ ì§€í‘œë¥¼ ë³´ì—¬ì£¼ëŠ” ê°œì¸ ëŒ€ì‹œë³´ë“œì…ë‹ˆë‹¤. ì‚¬ìš©ìì˜ ì§„í–‰ ìƒí™©ì„ í•œëˆˆì— ìš”ì•½í•˜ì—¬ ì œê³µí•©ë‹ˆë‹¤.

### **5.2. ì„±ì¥ ì‹œìŠ¤í…œ: XP, ì—…ì , ìŠ¤í‚¬ íŠ¸ë¦¬**

* **ê²½í—˜ì¹˜ (XP):** ì„±ì¥ì˜ ì£¼ìš” í™”íì…ë‹ˆë‹¤. ì•± ë‚´ ê±°ì˜ ëª¨ë“  ê¸ì •ì ì¸ í–‰ë™ì— ëŒ€í•´ XPë¥¼ íšë“í•©ë‹ˆë‹¤. (í‘œ 5.1: ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ê²½ì œ ë§¤íŠ¸ë¦­ìŠ¤ ì°¸ì¡°).  
* **ì—…ì /ë°°ì§€:** 44 íŠ¹ì • ë§ˆì¼ìŠ¤í†¤ ë‹¬ì„±ì— ëŒ€í•œ ì¼íšŒì„± ë³´ìƒì…ë‹ˆë‹¤ (ì˜ˆ: "ì²« í”„ë¡œì íŠ¸ ì™„ë£Œ", "30ì¼ ì—°ì† ê¸°ë¡ ìœ ì§€", "í‰íŒ 1000ì  íšë“"). ì´ëŠ” ì‚¬ìš©ìì˜ í”„ë¡œí•„ì— ë°°ì§€ë¡œ í‘œì‹œë©ë‹ˆë‹¤.  
* **ìŠ¤í‚¬ íŠ¸ë¦¬:**  
  * **ê°œë…:** ë‹¤ì–‘í•œ ì „ë¬¸ ë¶„ì•¼(ì˜ˆ: 'UX ë””ìì¸', 'ì œí’ˆ ê´€ë¦¬', 'ë°±ì—”ë“œ ê°œë°œ')ì—ì„œ ì‚¬ìš©ìì˜ ì—­ëŸ‰ì„ ì‹œê°ì ìœ¼ë¡œ í‘œí˜„í•©ë‹ˆë‹¤.46  
  * **êµ¬ì¡°:** ê° 'ìŠ¤í‚¬ íŠ¸ë¦¬'ëŠ” í•µì‹¬ ê¸°ìˆ (ì˜ˆ: UX ë””ìì¸ì˜ ê²½ìš° 'ì‚¬ìš©ì ë¦¬ì„œì¹˜', 'ì™€ì´ì–´í”„ë ˆì´ë°', 'í”„ë¡œí† íƒ€ì´í•‘')ì„ ê°€ì§‘ë‹ˆë‹¤. ê° ê¸°ìˆ ì€ ë ˆë²¨ì—…(ì˜ˆ: ë ˆë²¨ 1ì—ì„œ 10ê¹Œì§€)í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
  * **ë ˆë²¨ì—…:** ì‚¬ìš©ìê°€ íŠ¹ì • ê¸°ìˆ ë¡œ íƒœê·¸ëœ ì—…ë¬´ë‚˜ í”„ë¡œì íŠ¸ë¥¼ ì™„ë£Œí•˜ë©´, íšë“í•œ XPê°€ í•´ë‹¹ ê¸°ìˆ ì˜ ì§„í–‰ë¥  í‘œì‹œì¤„ì—ë„ ì ìš©ë©ë‹ˆë‹¤. ì¶©ë¶„í•œ 'ê¸°ìˆ  XP'ë¥¼ ì–»ìœ¼ë©´ í•´ë‹¹ ê¸°ìˆ ì´ ë ˆë²¨ì—…ë©ë‹ˆë‹¤. ì´ëŠ” ì„±ì¥ì„ ì‹¤ì§ˆì ì´ê³  ì§ë¬´ì™€ ê´€ë ¨ ìˆê²Œ ë§Œë“­ë‹ˆë‹¤.

### **5.3. ì†Œì…œ êµ¬ì¡°: í‰íŒ, ì¶”ì²œ, ë„¤íŠ¸ì›Œí¬**

* **í‰íŒ ì‹œìŠ¤í…œ (Stack Overflowì—ì„œ ì˜ê°):** 39  
  * í‰íŒì€ XPì™€ ë³„ê°œì˜ ì ìˆ˜ë¡œ, ì»¤ë®¤ë‹ˆí‹°ì˜ ì‹ ë¢°ë„ë¥¼ ì¸¡ì •í•©ë‹ˆë‹¤.  
  * **í‰íŒ íšë“:**  
    * íŒ€ê³¼ í•¨ê»˜ í”„ë¡œì íŠ¸ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œ ì‹œ \+15ì .  
    * ì™„ë£Œëœ í”„ë¡œì íŠ¸ì˜ íŒ€ì›ìœ¼ë¡œë¶€í„° ê¸ì •ì ì¸ ë¦¬ë·°ë¥¼ ë°›ì„ ë•Œ \+10ì .  
    * ë‹¤ë¥¸ ì‚¬ëŒì´ ìì‹ ì˜ í”„ë¡œì íŠ¸ ì‡¼ì¼€ì´ìŠ¤ë‚˜ ìœ„í‚¤ ë¬¸ì„œë¥¼ ì¶”ì²œí•  ë•Œ \+5ì .  
    * ìœ ë£Œ ì„ë¬´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œ ì‹œ \+20ì .  
  * **í‰íŒ ìƒì‹¤:**  
    * ì„±ê³¼ ë¶€ì§„ìœ¼ë¡œ í”„ë¡œì íŠ¸ì—ì„œ ì œì™¸ë  ë•Œ \-10ì .  
  * **ê¶Œí•œ:** ë†’ì€ í‰íŒì€ ìœ„í‚¤ ê´€ë¦¬ ëŠ¥ë ¥ì´ë‚˜ 'ìµœê³  ì „ë¬¸ê°€' ëª©ë¡ì— ì¶”ì²œë˜ëŠ” ë“±ì˜ ê¶Œí•œì„ ì ê¸ˆ í•´ì œí•©ë‹ˆë‹¤.  
* **ê´€ê³„:** ê°„ë‹¨í•œ íŒ”ë¡œìš°/íŒ”ë¡œì‰ ì‹œìŠ¤í…œê³¼ ì¸ë§¥ì„ ë³¼ ìˆ˜ ìˆëŠ” 'ë„¤íŠ¸ì›Œí¬' íƒ­ì„ ì œê³µí•©ë‹ˆë‹¤.

### **5.4. ê³ ê¸‰ ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜: ë¦¬ë”ë³´ë“œ ë° ì‹œì¦Œ**

* **ë¦¬ë”ë³´ë“œ:** 49  
  * **ë””ìì¸:** ì‹ ê·œ ì‚¬ìš©ìì˜ ì˜ìš• ì €í•˜ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ë¦¬ë”ë³´ë“œëŠ” 'ìƒëŒ€ì 'ì´ê³  'ë²”ìœ„ê°€ ì§€ì •'ë©ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ë§¤ì£¼ ë¹„ìŠ·í•œ í™œë™ ìˆ˜ì¤€ì˜ ì•½ 50ëª…ìœ¼ë¡œ êµ¬ì„±ëœ ë¦¬ê·¸ì— ë°°ì¹˜ë©ë‹ˆë‹¤ (ë“€ì˜¤ë§ê³  ë¦¬ê·¸ì™€ ìœ ì‚¬).51  
  * **ì§€í‘œ:** ë‹¤ì–‘í•œ í–‰ë™ì„ ë³´ìƒí•˜ê¸° ìœ„í•´ ì—¬ëŸ¬ ë¦¬ë”ë³´ë“œê°€ ì¡´ì¬í•©ë‹ˆë‹¤: 'ìµœê³  XP íšë“ì', 'ìµœê³ ì˜ í˜‘ì—…ê°€'(ê¸ì •ì ì¸ íŒ€ í”¼ë“œë°± ê¸°ë°˜), 'ìµœê³ ì˜ ë©˜í† '(ìœ„í‚¤ ê¸°ì—¬ë„ ê¸°ë°˜).  
* **ì‹œì¦Œ:** 53  
  * **ê°œë…:** ë…íŠ¹í•œ í…Œë§ˆ, ì´ì•¼ê¸°, ë„ì „ ê³¼ì œë¥¼ ê°€ì§„ ë¶„ê¸°ë³„ 3ê°œì›” 'ì‹œì¦Œ'ì…ë‹ˆë‹¤. ì´ëŠ” ë°˜ë³µì ì¸ ì°¸ì—¬ ì£¼ê¸°ë¥¼ ë§Œë“¤ê³  ì‹ ì„ í•œ ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.  
  * **í…Œë§ˆ ì„œì‚¬ (ì‚¬ìš©ì ì•„ì´ë””ì–´ ê¸°ë°˜):**  
    * **1ë¶„ê¸° (ë´„): "ì„¤ê³„ì"** \- ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ ê³„íš ë° ì‹œì‘ì— ì¤‘ì . ì˜ ì •ì˜ëœ í”„ë¡œì íŠ¸ í—Œì¥ê³¼ ìƒì„¸í•œ ì—…ë¬´ ë°±ë¡œê·¸ ìƒì„±ì„ ë³´ìƒí•˜ëŠ” ì‹œì¦Œ ë„ì „ ê³¼ì œ.  
    * **2ë¶„ê¸° (ì—¬ë¦„): "ê°€ì†ì"** \- ì„±ì¥ê³¼ ì‹¤í–‰ì— ì¤‘ì . ë¹ ë¥¸ ì—…ë¬´ ì™„ë£Œ ì†ë„ì™€ ë§ˆì¼ìŠ¤í†¤ ì¡°ê¸° ë‹¬ì„±ì„ ë³´ìƒí•˜ëŠ” ë„ì „ ê³¼ì œ.  
    * **3ë¶„ê¸° (ê°€ì„): "ì™„ì„±ì"** \- ì™„ë£Œì™€ ê°œì„ ì— ì¤‘ì . í”„ë¡œì íŠ¸ ë§ˆë¬´ë¦¬, ì‡¼ì¼€ì´ìŠ¤ ê²Œì‹œ, ìœ„í‚¤ ê¸°ì—¬ë¥¼ ë³´ìƒí•˜ëŠ” ë„ì „ ê³¼ì œ.  
    * **4ë¶„ê¸° (ê²¨ìš¸): "ë¹„ì „ê°€"** \- íšŒê³ ì™€ ì¥ê¸° ëª©í‘œ ì„¤ì •ì— ì¤‘ì . í”„ë¡œì íŠ¸ ì‚¬í›„ ê²€í†  ìˆ˜í–‰ ë° ë‹¤ìŒ í•´ë¥¼ ìœ„í•œ ì•¼ì‹¬ì°¬ ëª©í‘œ ì„¤ì •ì„ ë³´ìƒí•˜ëŠ” ë„ì „ ê³¼ì œ.  
  * **ì‹œì¦Œ íŒ¨ìŠ¤:** í¬íŠ¸ë‚˜ì´íŠ¸ ë°°í‹€ íŒ¨ìŠ¤ì™€ ìœ ì‚¬í•œ 100ë ˆë²¨ íŠ¸ë™ì…ë‹ˆë‹¤.56 ì‚¬ìš©ìëŠ” ì¼ì¼/ì£¼ê°„ ë„ì „ ê³¼ì œë¥¼ ì™„ë£Œí•˜ì—¬ 'ì‹œì¦Œ í¬ì¸íŠ¸'ë¥¼ íšë“í•˜ê³ , ì´ë¥¼ í†µí•´ íŒ¨ìŠ¤ ë ˆë²¨ì„ ì˜¬ë ¤ ë…ì ì ì¸ ê¾¸ë¯¸ê¸° ë³´ìƒ(í”„ë¡œí•„ í…Œë§ˆ, íŠ¹ë³„ ë°°ì§€ ë“±)ì„ ì ê¸ˆ í•´ì œí•©ë‹ˆë‹¤.

ê· í˜• ì¡íŒ ê²½ì œ ì‹œìŠ¤í…œì€ ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ì˜ ì„±íŒ¨ë¥¼ ì¢Œìš°í•©ë‹ˆë‹¤. XPë¥¼ ë„ˆë¬´ ì‰½ê²Œ ì–»ìœ¼ë©´ ë ˆë²¨ì´ ë¬´ì˜ë¯¸í•´ì§€ê³ , ë„ˆë¬´ ì–´ë ¤ìš°ë©´ ì‚¬ìš©ìëŠ” í¬ê¸°í•©ë‹ˆë‹¤. ì•„ë˜ì˜ ë§¤íŠ¸ë¦­ìŠ¤ëŠ” ëª¨ë“  í–‰ë™(ì—…ë¬´ ì™„ë£Œ, í”„ë¡œì íŠ¸ ì¢…ë£Œ, ìœ„í‚¤ ë¬¸ì„œ ì‘ì„± ë“±)ì„ ë‚˜ì—´í•˜ê³  íŠ¹ì • XP, í‰íŒ, ì‹œì¦Œ í¬ì¸íŠ¸ ê°’ì„ í• ë‹¹í•¨ìœ¼ë¡œì¨ ì‹œìŠ¤í…œì ì¸ ì ‘ê·¼ì„ ê°•ì œí•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ í‰ê· ì ì¸ ì‚¬ìš©ìê°€ ë ˆë²¨ 10ì— ë„ë‹¬í•˜ê±°ë‚˜ ê¸°ìˆ ì„ ë ˆë²¨ì—…í•˜ëŠ” ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì„ ëª¨ë¸ë§í•˜ê³ , 'ëŠë‚Œ'ì´ ì ì ˆí•´ì§ˆ ë•Œê¹Œì§€ ìˆ˜ì¹˜ë¥¼ ì¡°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì„ì˜ì ì¸ ë³´ìƒ í• ë‹¹ì„ ë°©ì§€í•˜ê³  ì „ì²´ ì‹œìŠ¤í…œì„ ë””ìì¸ ê´€ì ì—ì„œ ì˜ˆì¸¡ ê°€ëŠ¥í•˜ê³  ê´€ë¦¬í•˜ê¸° ì‰½ê²Œ ë§Œë“­ë‹ˆë‹¤.

**í‘œ 5.1: ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ê²½ì œ ë§¤íŠ¸ë¦­ìŠ¤**

| í–‰ë™ | íšë“ XP | í‰íŒ ë³€í™” | ì‹œì¦Œ í¬ì¸íŠ¸ | ì ê¸ˆ í•´ì œ/ì°¸ê³  |
| :---- | :---- | :---- | :---- | :---- |
| ì¼ì¼ ì—…ë¬´ ì™„ë£Œ | 10 | 0 | 5 | ì—°ì† ê¸°ë¡ ë³´ë„ˆìŠ¤ ì ìš© |
| ì£¼ê°„ ëª©í‘œ ë‹¬ì„± | 50 | 0 | 25 |  |
| í”„ë¡œì íŠ¸ ë§ˆì¼ìŠ¤í†¤ ë‹¬ì„± | 100 | \+5 | 50 | íŒ€ì› ëª¨ë‘ì—ê²Œ ì§€ê¸‰ |
| í”„ë¡œì íŠ¸ ì„±ê³µì  ì™„ë£Œ | 250 | \+15 | 100 | íŒ€ì› ëª¨ë‘ì—ê²Œ ì§€ê¸‰ |
| ìœ ë£Œ ì„ë¬´ ì™„ë£Œ | 300 | \+20 | 120 |  |
| ìœ„í‚¤ ë¬¸ì„œ ì‘ì„± | 20 | \+2 | 10 |  |
| ìœ„í‚¤ ë¬¸ì„œ ì¶”ì²œ ë°›ìŒ | 5 | \+1 | 2 | ì¶”ì²œë‹¹ |
| í”„ë¡œì íŠ¸ ì‡¼ì¼€ì´ìŠ¤ ê²Œì‹œ | 50 | \+10 | 25 |  |
| ì‡¼ì¼€ì´ìŠ¤ ì¶”ì²œ ë°›ìŒ | 10 | \+2 | 5 | ì¶”ì²œë‹¹ |
| ì‹ ê·œ ë©¤ë²„ ì´ˆëŒ€ | 30 | \+1 | 15 | ì´ˆëŒ€ëœ ë©¤ë²„ê°€ ì²« ì—…ë¬´ ì™„ë£Œ ì‹œ |

ë‹¨ìˆœíˆ 'ì‹œì¦Œì´ ìˆì„ ê²ƒ'ì´ë¼ê³  ë§í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œëŠ” ì¶©ë¶„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. êµ¬ì²´ì ì¸ ê³„íšì´ í•„ìš”í•©ë‹ˆë‹¤. ì•„ë˜ í‘œëŠ” ì „ì²´ 1ë…„ ê³„íšì„ ê°œê´„í•˜ë©°, ê° ë¶„ê¸°ì— ì‹¤ì œ ì—…ë¬´ ì£¼ê¸°ì™€ ê´€ë ¨ëœ ë§¤ë ¥ì ì¸ í…Œë§ˆë¥¼ ë¶€ì—¬í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  íŠ¹ì •í•˜ê³  ë°”ëŒì§í•œ ë³´ìƒ(ì˜ˆ: 1ë¶„ê¸° ë…ì  'ì„¤ê³„ìì˜ ì²­ì‚¬ì§„' í”„ë¡œí•„ í…Œë§ˆ)ì„ í•´ë‹¹ ì‹œì¦Œê³¼ ì—°ê²°í•©ë‹ˆë‹¤. ì´ëŠ” ì¥ê¸°ì ì¸ ì°¸ì—¬ê°€ ë¦¬ê·¸ ì˜¤ë¸Œ ë ˆì „ë“œë‚˜ ë””ì•„ë¸”ë¡œì™€ ê°™ì€ ê²Œì„ì—ì„œ ë³¼ ìˆ˜ ìˆëŠ” ê°•ë ¥í•œ ë™ê¸° ë¶€ì—¬ ìš”ì†Œì¸, ë…ì ì ì´ê³  ì‹œê°„ ì œí•œì ì¸ ë³´ìƒì„ ë†“ì¹˜ëŠ” ê²ƒì— ëŒ€í•œ ë‘ë ¤ì›€(FOMO)ì„ ë§Œë“¤ì–´ ì–´ë–»ê²Œ ìœ ì§€ë  ê²ƒì¸ì§€ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.53

**í‘œ 5.2: ì‹œì¦Œ í…Œë§ˆ ë° ë³´ìƒ ì¼ì • (1ë…„ ì˜ˆì‹œ)**

| ë¶„ê¸° | ì‹œì¦Œ ì´ë¦„ | í…Œë§ˆ/ì´ˆì  | ì£¼ìš” ì‹œì¦Œ ë„ì „ ê³¼ì œ | ë…ì  ì‹œì¦Œ íŒ¨ìŠ¤ ë³´ìƒ |
| :---- | :---- | :---- | :---- | :---- |
| Q1 | ì„¤ê³„ì ì‹œì¦Œ | ê³„íš ë° ì‹œì‘ | 10ê°œ ì´ìƒì˜ ì—…ë¬´ë¡œ êµ¬ì„±ëœ í”„ë¡œì íŠ¸ 3ê°œ ìƒì„±, ëª¨ë“  ë§ˆì¼ìŠ¤í†¤ì´ ì •ì˜ëœ í”„ë¡œì íŠ¸ í—Œì¥ ì‘ì„± | 'ì„¤ê³„ìì˜ ì²­ì‚¬ì§„' í”„ë¡œí•„ í…Œë§ˆ, 'ì´ˆì„' ë°°ì§€ |
| Q2 | ê°€ì†ì ì‹œì¦Œ | ì„±ì¥ ë° ì‹¤í–‰ | ì£¼ê°„ ì—…ë¬´ ì™„ë£Œìœ¨ 90% ìœ ì§€, ë§ˆì¼ìŠ¤í†¤ 5ê°œ ì¡°ê¸° ë‹¬ì„±, 100ê°œ ì—…ë¬´ ì™„ë£Œ | 'ì¶”ì§„ë ¥' í”„ë¡œí•„ í…Œë§ˆ, 'ê°€ì† ì—”ì§„' ì•„ë°”íƒ€ í”„ë ˆì„ |
| Q3 | ì™„ì„±ì ì‹œì¦Œ | ì™„ë£Œ ë° ê°œì„  | í”„ë¡œì íŠ¸ 3ê°œ ì™„ë£Œ ë° ì‡¼ì¼€ì´ìŠ¤ ê²Œì‹œ, ìœ„í‚¤ ë¬¸ì„œ 5ê°œ ê¸°ì—¬, ê¸ì •ì  íŒ€ í”¼ë“œë°± 10íšŒ ë°›ê¸° | 'ë§ˆìŠ¤í„°í”¼ìŠ¤' í”„ë¡œí•„ í…Œë§ˆ, 'ì¥ì¸' ë°°ì§€ |
| Q4 | ë¹„ì „ê°€ ì‹œì¦Œ | íšŒê³  ë° ëª©í‘œ ì„¤ì • | ì™„ë£Œëœ í”„ë¡œì íŠ¸ì— ëŒ€í•œ ì‚¬í›„ ê²€í†  3íšŒ ì‘ì„±, ë‹¤ìŒ í•´ë¥¼ ìœ„í•œ ì•¼ì‹¬ì°¬ ëª©í‘œ 5ê°œ ì„¤ì • | 'ë³„ìë¦¬' í”„ë¡œí•„ í…Œë§ˆ, 'ì„ êµ¬ì' ì•„ë°”íƒ€ í”„ë ˆì„ |

## **ì„¹ì…˜ 6: ë¹„ì¦ˆë‹ˆìŠ¤ ë ˆì´ì–´ \- "ì›Œí¬ìŠ¤í˜ì´ìŠ¤" ë° ë¯¸ë˜ ì„±ì¥**

ì´ ì„¹ì…˜ì€ ì‚¬ìš©ìì˜ B2B í¬ë¶€ë¥¼ ë‹¤ë£¨ë©°, 'ê¸¸ë“œ'ì— ëŒ€í•œ ì „ë¬¸ì ì¸ ë¦¬ë¸Œëœë”©ì„ ì œê³µí•˜ê³  í™•ì¥ ê°€ëŠ¥í•œ SaaS ëª¨ë¸ì„ ì œì‹œí•©ë‹ˆë‹¤.

### **6.1. "ì›Œí¬ìŠ¤í˜ì´ìŠ¤" ì†Œê°œ: "ê¸¸ë“œ"ì˜ ì „ë¬¸ì  ë¦¬ë¸Œëœë”©**

* **ê·¼ê±°:** 'ê¸¸ë“œ'ë¼ëŠ” ìš©ì–´ëŠ” ê²Œì„ê³¼ ê°•í•˜ê²Œ ì—°ê´€ë˜ì–´ ìˆì–´ ì „ë¬¸ì ì¸ B2B ë§¥ë½ì—ì„œ ê³µê°ì„ ì–»ì§€ ëª»í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 'ì›Œí¬ìŠ¤í˜ì´ìŠ¤'ëŠ” Slack ë° Asanaì™€ ê°™ì€ ê²½ìŸì‚¬ë“¤ì´ ì‚¬ìš©í•˜ëŠ” í‘œì¤€ì ì´ê³  ë„ë¦¬ ì´í•´ë˜ëŠ” ìš©ì–´ë¡œ, ì œì•ˆí•˜ëŠ” ê¸°ëŠ¥ì„ ì¦‰ì‹œ ì¸ì‹ ê°€ëŠ¥í•˜ê³  ì „ë¬¸ì ìœ¼ë¡œ ë§Œë“­ë‹ˆë‹¤.58  
* **ê°œë…:** ì›Œí¬ìŠ¤í˜ì´ìŠ¤ëŠ” íšŒì‚¬ë‚˜ ê³µì‹ íŒ€ì´ ì•±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” í”„ë¦¬ë¯¸ì—„ ì¤‘ì•™ í—ˆë¸Œì…ë‹ˆë‹¤. ê´€ë¦¬ ì œì–´, ê°•í™”ëœ ë³´ì•ˆ, íŒ€ ì „ì²´ ë¶„ì„ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

### **6.2. ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ê´€ë¦¬ ë° ê¸°ëŠ¥**

58

* **ë©¤ë²„ ê´€ë¦¬:** ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ê´€ë¦¬ìê°€ ë©¤ë²„ë¥¼ ì´ˆëŒ€/ì œê±°í•˜ê³ , ì—­í• (ê´€ë¦¬ì, ë©¤ë²„, ê²ŒìŠ¤íŠ¸)ì„ í• ë‹¹í•˜ë©°, ê¶Œí•œì„ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ì¤‘ì•™ ëŒ€ì‹œë³´ë“œ.  
* **ë¹„ê³µê°œ í”„ë¡œì íŠ¸:** ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ë‚´ì—ì„œ ìƒì„±ëœ í”„ë¡œì íŠ¸ëŠ” í•´ë‹¹ ë©¤ë²„ì—ê²Œë§Œ ë³´ì…ë‹ˆë‹¤.  
* **ì¤‘ì•™ ì§‘ì¤‘ì‹ ê²°ì œ:** ì „ì²´ íŒ€ì„ ìœ„í•œ ë‹¨ì¼ êµ¬ë….  
* **íŒ€ ì „ì²´ ë¶„ì„:** ì¡°ì§ ì „ì²´ì˜ ìƒì‚°ì„±, í”„ë¡œì íŠ¸ ì™„ë£Œìœ¨, ê¸°ìˆ  ê°œë°œ í˜„í™©ì„ ë³´ì—¬ì£¼ëŠ” ëŒ€ì‹œë³´ë“œ.  
* **ê³µìœ  ë¦¬ì†ŒìŠ¤:** ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ë©¤ë²„ë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë¹„ê³µê°œ ë‚´ë¶€ ìœ„í‚¤ ë° í”„ë¡œì íŠ¸ í…œí”Œë¦¿.  
* **ë³´ì•ˆ ë° ê·œì • ì¤€ìˆ˜:** ì—”í„°í”„ë¼ì´ì¦ˆ ê³ ê°ì„ ìœ„í•œ SSO(Single Sign-On), ê°ì‚¬ ë¡œê·¸, ê³ ê¸‰ ë°ì´í„° ê´€ë¦¬ ê¸°ëŠ¥.

### **6.3. ìˆ˜ìµí™” ì „ëµ ë° ì‹œì¥ í¬ì§€ì…”ë‹**

* **í”„ë¦¬ë¯¸ì—„(Freemium) ëª¨ë¸:** í•µì‹¬ ì•±ì€ ê°œì¸ ì‚¬ìš©ìê°€ ë¬´ë£Œë¡œ ì‚¬ìš©í•˜ì—¬ ì±„íƒì„ ì¥ë ¤í•˜ê³  ì‚¬ìš©ì ê¸°ë°˜ì„ êµ¬ì¶•í•©ë‹ˆë‹¤.  
* **êµ¬ë… ë“±ê¸‰ (í‘œ 6.1 ì°¸ì¡°):**  
  * **ë¬´ë£Œ:** ê°œì¸ ë° ì†Œê·œëª¨ ë¹„ê³µì‹ íŒ€ìš©.  
  * **ì›Œí¬ìŠ¤í˜ì´ìŠ¤ í”„ë¡œ:** ì „ë¬¸ íŒ€ì„ ìœ„í•œ ìœ ë£Œ ë“±ê¸‰ìœ¼ë¡œ, ê³ ê¸‰ í˜‘ì—… ê¸°ëŠ¥, ë¬´ì œí•œ ë¹„ê³µê°œ í”„ë¡œì íŠ¸, ê´€ë¦¬ ì œì–´ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.  
  * **ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì—”í„°í”„ë¼ì´ì¦ˆ:** ëŒ€ê·œëª¨ ì¡°ì§ì„ ìœ„í•œ ë§ì¶¤í˜• ê°€ê²© ë“±ê¸‰ìœ¼ë¡œ, ê³ ê¸‰ ë³´ì•ˆ, ì „ë‹´ ì§€ì›, ì‹¬ì¸µ í†µí•©ì„ ì œê³µí•©ë‹ˆë‹¤.  
* **ì‹œì¥ í¬ì§€ì…”ë‹:** ì´ ì•±ì€ "ì „ë¬¸ì ì¸ ì„±ì¥ì„ ê²Œì„ì²˜ëŸ¼ ëŠë¼ê²Œ í•˜ëŠ” ê°œì¸ ë° ì†Œê·œëª¨ íŒ€ì„ ìœ„í•œ Asana"ë¡œ ìë¦¬ë§¤ê¹€í•  ê²ƒì…ë‹ˆë‹¤. ë‹¨ìˆœíˆ ê¸°ëŠ¥ë§Œìœ¼ë¡œ ê²½ìŸí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ë™ê¸° ë¶€ì—¬ì™€ ì°¸ì—¬ë¼ëŠ” ì¸¡ë©´ì—ì„œ ê²½ìŸí•˜ë©°, ì´ëŠ” ë³´ë‹¤ ì „í†µì ì´ê³  ìˆœì „íˆ ê¸°ëŠ¥ì ì¸ ë„êµ¬ë“¤ê³¼ì˜ í•µì‹¬ì ì¸ ì°¨ë³„ì ì…ë‹ˆë‹¤.62

ì„±ê³µì ì¸ SaaS ë¹„ì¦ˆë‹ˆìŠ¤ëŠ” ëª…í™•í•œ ìˆ˜ìµí™” ì „ëµì´ í•„ìš”í•©ë‹ˆë‹¤. ì•„ë˜ í‘œëŠ” ì œí’ˆì˜ ê¸°ëŠ¥ì„ ë¶„ì„í•˜ê³  ì´ë¥¼ ë‹¤ë¥¸ ë“±ê¸‰ì— í• ë‹¹í•©ë‹ˆë‹¤. ë¬´ë£Œ ë“±ê¸‰ì€ ëŒ€ê·œëª¨ ì‚¬ìš©ì ê¸°ë°˜ì„ ìœ ì¹˜í•  ë§Œí¼ ì¶©ë¶„íˆ ê´€ëŒ€í•´ì•¼ í•˜ì§€ë§Œ, ì—…ê·¸ë ˆì´ë“œí•  ê°•ë ¥í•œ ì´ìœ ë¥¼ ë§Œë“œëŠ” ëª…í™•í•œ ì œí•œì´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. í”„ë¡œ ë“±ê¸‰ì€ ì„±ì¥í•˜ëŠ” íŒ€ì˜ í•µì‹¬ì ì¸ ë¬¸ì œì (ì˜ˆ: ê°œì¸ ì •ë³´ ë³´í˜¸, ê´€ë¦¬)ì„ í•´ê²°í•´ì•¼ í•©ë‹ˆë‹¤. ì—”í„°í”„ë¼ì´ì¦ˆ ë“±ê¸‰ì€ ëŒ€ê¸°ì—…ì˜ ìš”êµ¬(ë³´ì•ˆ, ê·œì • ì¤€ìˆ˜)ë¥¼ ì¶©ì¡±ì‹œí‚µë‹ˆë‹¤. 'ë¹„ê³µê°œ í”„ë¡œì íŠ¸', 'ê´€ë¦¬ ì½˜ì†”', 'SSO'ì™€ ê°™ì€ ê¸°ëŠ¥ì„ íŠ¹ì • ë“±ê¸‰ì— ë§¤í•‘í•¨ìœ¼ë¡œì¨, B2B SaaS ì œí’ˆì˜ ëª¨ë²” ì‚¬ë¡€ì— ë”°ë¼ ë¹„ì¦ˆë‹ˆìŠ¤ ëª¨ë¸ì„ ì œí’ˆ ì•„í‚¤í…ì²˜ì— ì§ì ‘ ì„¤ê³„í•©ë‹ˆë‹¤.65

**í‘œ 6.1: "ì›Œí¬ìŠ¤í˜ì´ìŠ¤" ê¸°ëŠ¥ ë“±ê¸‰**

| ê¸°ëŠ¥ | ë¬´ë£Œ ë“±ê¸‰ | ì›Œí¬ìŠ¤í˜ì´ìŠ¤ í”„ë¡œ | ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì—”í„°í”„ë¼ì´ì¦ˆ |
| :---- | :---- | :---- | :---- |
| ì‚¬ìš©ì ìˆ˜ | ìµœëŒ€ 5ëª… | ì‚¬ìš©ìë‹¹ ê³¼ê¸ˆ | ì‚¬ìš©ìë‹¹ ê³¼ê¸ˆ (ë³¼ë¥¨ í• ì¸) |
| ê³µê°œ í”„ë¡œì íŠ¸ | ë¬´ì œí•œ | ë¬´ì œí•œ | ë¬´ì œí•œ |
| ë¹„ê³µê°œ í”„ë¡œì íŠ¸ | ìµœëŒ€ 3ê°œ | ë¬´ì œí•œ | ë¬´ì œí•œ |
| ê¸°ë³¸ ì—…ë¬´ ê´€ë¦¬ | âœ“ | âœ“ | âœ“ |
| ê¸°ë³¸ ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ | âœ“ | âœ“ | âœ“ |
| ê´€ë¦¬ ì½˜ì†” | X | âœ“ | âœ“ |
| ì—­í•  ë° ê¶Œí•œ ê´€ë¦¬ | X | âœ“ | âœ“ |
| íŒ€ ì „ì²´ ë¶„ì„ | X | âœ“ | âœ“ |
| SSO (Single Sign-On) | X | X | âœ“ |
| ê³ ê¸‰ ë³´ì•ˆ ë° ê°ì‚¬ ë¡œê·¸ | X | X | âœ“ |
| ì „ë‹´ ì§€ì› | X | X | âœ“ |

## **ì„¹ì…˜ 7: ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë° ê°œì„  ì‚¬í•­**

ì´ ë§ˆì§€ë§‰ ì„¹ì…˜ì—ì„œëŠ” í•„ìˆ˜ì ì¸ ì‹œìŠ¤í…œ ìˆ˜ì¤€ì˜ ì„¤ì •ì„ ë‹¤ë£¨ê³ , ê°œë°œì„ ìœ„í•œ ì „ëµì  ë¡œë“œë§µì„ ì œê³µí•˜ì—¬ ì™„ì „í•˜ê³  ë¯¸ë˜ ì§€í–¥ì ì¸ ê³„íšì„ ë³´ì¥í•©ë‹ˆë‹¤.

### **7.1. í•„ìˆ˜ ì„¤ì •**

* **ì–¸ì–´:** ê¸€ë¡œë²Œ ì‹œì¥ ì§„ì¶œì„ ìœ„í•œ ë‹¤êµ­ì–´ ì§€ì›.  
* **í™”ë©´ ëª¨ë“œ:** í˜„ëŒ€ UI/UXì˜ í•„ìˆ˜ ê¸°ëŠ¥ì¸ ë¼ì´íŠ¸ ëª¨ë“œì™€ ë‹¤í¬ ëª¨ë“œ ê°„ ëª…í™•í•œ ì „í™˜ ê¸°ëŠ¥.67  
* **ì•Œë¦¼:** ì‚¬ìš©ìê°€ íŠ¹ì • ì´ë²¤íŠ¸(ì˜ˆ: ì—…ë¬´ ë©˜ì…˜, í”„ë¡œì íŠ¸ ì—…ë°ì´íŠ¸, ì§€ì›ì„œ ìŠ¹ì¸)ì— ëŒ€í•œ ì•Œë¦¼ì„ ì¼œê³  ëŒ ìˆ˜ ìˆëŠ” ì„¸ë¶„í™”ëœ ì œì–´ ê¸°ëŠ¥ì„ ì œê³µí•˜ì—¬ ì•Œë¦¼ í”¼ë¡œë¥¼ ë°©ì§€.

### **7.2. ì „ëµì  ê¶Œì¥ ì‚¬í•­ ë° í–¥í›„ ë¡œë“œë§µ**

* **í†µí•©:** Google ìº˜ë¦°ë”(ë§ˆê°ì¼ ë™ê¸°í™”), Slack(ì•Œë¦¼ ë° ì—…ë¬´ ìƒì„±), GitHub(ì»¤ë°‹ê³¼ ì—…ë¬´ ì—°ê²°)ì™€ ê°™ì€ í•„ìˆ˜ ë„êµ¬ì™€ì˜ í†µí•©ì„ ìš°ì„ ìˆœìœ„ì— ë‘¡ë‹ˆë‹¤.  
* **ë°ì´í„° ì´ë™ì„±:** ì‚¬ìš©ìê°€ ìì‹ ì˜ ë°ì´í„°(ì—…ë¬´, í”„ë¡œì íŠ¸ ê¸°ë¡)ë¥¼ CSV ë˜ëŠ” JSONìœ¼ë¡œ ë‚´ë³´ë‚¼ ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ì—¬ ì‹ ë¢°ë¥¼ êµ¬ì¶•í•˜ê³  í”Œë«í¼ ì¢…ì†ì„±ì„ ì¤„ì…ë‹ˆë‹¤.  
* **ì ‘ê·¼ì„± (A11y):** WCAG ê°€ì´ë“œë¼ì¸(ì˜ˆ: ì¶©ë¶„í•œ ìƒ‰ìƒ ëŒ€ë¹„, ìŠ¤í¬ë¦° ë¦¬ë” ì§€ì›)ì„ ì¤€ìˆ˜í•˜ì—¬ ëª¨ë“  ì‚¬ëŒì´ ì•±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì²˜ìŒë¶€í„° ì ‘ê·¼ì„±ì„ ê³„íší•©ë‹ˆë‹¤.67  
* **MVP ìš°ì„ ìˆœìœ„ ì„¤ì • (í‘œ 7.1 ì°¸ì¡°):** ëª¨ë“  ê¸°ëŠ¥ì„ ë‹¨ê³„ë³„ ì¶œì‹œ ê³„íšìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì‹œì¥ì— ì‹ ì†í•˜ê²Œ ì§„ì…í•˜ê³  ì‚¬ìš©ì í”¼ë“œë°±ì„ ê¸°ë°˜ìœ¼ë¡œ ë°˜ë³µ ê°œë°œí•©ë‹ˆë‹¤.

ëª¨ë“  ê²ƒì„ í•œ ë²ˆì— êµ¬ì¶•í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•˜ë¯€ë¡œ, ì•„ë˜ í‘œëŠ” ì´ˆê¸° ì œí’ˆ ì¶œì‹œì— í•„ìˆ˜ì ì¸ ê²ƒê³¼ ë‚˜ì¤‘ì— ì¶”ê°€í•  ìˆ˜ ìˆëŠ” ê²ƒì„ êµ¬ë¶„í•˜ëŠ”, ì–´ë µì§€ë§Œ í•„ìš”í•œ ê²°ì •ì„ ê°•ì œí•©ë‹ˆë‹¤. MoSCoW ë°©ë²•ë¡ (Must-have, Should-have, Could-have, Won't-have)ì€ ìš°ì„ ìˆœìœ„ ì„¤ì •ì„ ìœ„í•œ ê²€ì¦ëœ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.68 ì´ë¥¼ ê¸°ëŠ¥ ëª©ë¡ì— ì ìš©í•¨ìœ¼ë¡œì¨, ìš°ë¦¬ëŠ” ê°„ê²°í•˜ì§€ë§Œ ì‹¤í–‰ ê°€ëŠ¥í•œ MVPë¥¼ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 'Must-haves'ëŠ” í•µì‹¬ ë£¨í”„ì¸ í™ˆ(ì—…ë¬´ ê´€ë¦¬)ê³¼ í”„ë¡œì íŠ¸(ê¸°ë³¸ í˜‘ì—…)ê°€ ë  ê²ƒì…ë‹ˆë‹¤. 'Should-haves'ëŠ” í”„ë¡œí•„ ë° ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ì˜ ì´ˆê¸° ë²„ì „ì„ í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 'Could-haves'ëŠ” ì„ë¬´ ê²Œì‹œíŒê³¼ ê³ ê¸‰ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ê¸°ëŠ¥ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 'Won't-haves (ë‹¹ë¶„ê°„)'ëŠ” ë³µì¡í•œ í†µí•©ì´ë‚˜ ì „ì²´ ì‹œì¦Œ ì‹œìŠ¤í…œì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì´ˆê¸° ì œí’ˆì´ ì§‘ì¤‘ë˜ê³ , í•µì‹¬ ê°€ì¹˜ë¥¼ ì‹ ì†í•˜ê²Œ ì „ë‹¬í•˜ë©°, íŒ€ì´ ë” ë³µì¡í•œ ê¸°ëŠ¥ì— íˆ¬ìí•˜ê¸° ì „ì— ì‹¤ì œ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.

**í‘œ 7.1: MVP ê¸°ëŠ¥ ìš°ì„ ìˆœìœ„ ì„¤ì • (MoSCoW ë°©ë²•)**

| ê¸°ëŠ¥ | ë¶„ë¥˜ | ê·¼ê±° |
| :---- | :---- | :---- |
| **í•µì‹¬ ê¸°ëŠ¥** |  |  |
| Google ê³„ì • ë¡œê·¸ì¸ | Must-have | ì•± ì ‘ê·¼ì„ ìœ„í•œ í•„ìˆ˜ ì „ì œ ì¡°ê±´. |
| í™ˆ: GTD ê¸°ë°˜ ì—…ë¬´ ê´€ë¦¬ | Must-have | ì•±ì˜ í•µì‹¬ ê°€ì¹˜ ì œì•ˆì´ì ì¼ì¼ ì‚¬ìš©ì˜ ì¤‘ì‹¬. |
| í”„ë¡œì íŠ¸: ì±„íŒ… ê¸°ë°˜ í˜‘ì—… | Must-have | í•µì‹¬ í˜‘ì—… ê¸°ëŠ¥ìœ¼ë¡œ, ì—…ë¬´ ê´€ë¦¬ì™€ í•¨ê»˜ ì‹œë„ˆì§€ë¥¼ ëƒ„. |
| **ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜** |  |  |
| í”„ë¡œí•„: XP, ë ˆë²¨, ê¸°ë³¸ ëŒ€ì‹œë³´ë“œ | Must-have | ê¸°ë³¸ì ì¸ ë™ê¸° ë¶€ì—¬ ë° ì§„í–‰ ìƒí™© ì¶”ì  ì‹œìŠ¤í…œ. |
| ì—…ì /ë°°ì§€ ì‹œìŠ¤í…œ | Should-have | ì´ˆê¸° ì°¸ì—¬ë¥¼ ìœ ë„í•˜ì§€ë§Œ, í•µì‹¬ ê¸°ëŠ¥ë§Œí¼ ì‹œê¸‰í•˜ì§€ëŠ” ì•ŠìŒ. |
| ìŠ¤í‚¬ íŠ¸ë¦¬ ì‹œìŠ¤í…œ | Should-have | ì¥ê¸°ì ì¸ ì„±ì¥ ë¹„ì „ì„ ì œì‹œí•˜ì§€ë§Œ, MVPì—ì„œëŠ” ë‹¨ìˆœí™” ê°€ëŠ¥. |
| í‰íŒ ì‹œìŠ¤í…œ | Could-have | ì»¤ë®¤ë‹ˆí‹° ê¸°ëŠ¥ì´ í™œì„±í™”ëœ í›„ì— ë” í° ì˜ë¯¸ë¥¼ ê°€ì§. |
| **ê²Œì‹œíŒ ê¸°ëŠ¥** |  |  |
| ì§€ì‹ ìœ„í‚¤ | Should-have | ì‚¬ìš©ì ìƒì„± ì½˜í…ì¸ ë¥¼ í†µí•´ ì´ˆê¸°ë¶€í„° í”Œë«í¼ ê°€ì¹˜ë¥¼ ë†’ì¼ ìˆ˜ ìˆìŒ. |
| í”„ë¡œì íŠ¸ ì‡¼ì¼€ì´ìŠ¤ | Could-have | í”„ë¡œì íŠ¸ ì™„ë£Œ ë°ì´í„°ê°€ ì¶•ì ëœ í›„ ë„ì…í•˜ëŠ” ê²ƒì´ íš¨ê³¼ì . |
| ì„ë¬´ ê²Œì‹œíŒ (ë§ˆì¼“í”Œë ˆì´ìŠ¤) | Won't-have | ë³µì¡í•œ ê²°ì œ ë° ë¶„ìŸ í•´ê²° ì‹œìŠ¤í…œì´ í•„ìš”í•˜ì—¬ MVP ë²”ìœ„ì—ì„œ ì œì™¸. |
| **ê³ ê¸‰ ê¸°ëŠ¥** |  |  |
| ì‹œì¦Œì œ ë° ì‹œì¦Œ íŒ¨ìŠ¤ | Won't-have | ì¥ê¸°ì ì¸ ì°¸ì—¬ ìœ ë„ ê¸°ëŠ¥ìœ¼ë¡œ, ì•ˆì •ì ì¸ ì‚¬ìš©ì ê¸°ë°˜ í™•ë³´ í›„ ë„ì…. |
| ë¦¬ë”ë³´ë“œ | Could-have | ê²½ìŸ ìš”ì†ŒëŠ” ì´ˆê¸° ë‹¨ê³„ë³´ë‹¤ ì»¤ë®¤ë‹ˆí‹°ê°€ í˜•ì„±ëœ í›„ ë„ì…í•˜ëŠ” ê²ƒì´ ì•ˆì „. |
| ì›Œí¬ìŠ¤í˜ì´ìŠ¤ (B2B ëª¨ë¸) | Won't-have | ê°œì¸ ì‚¬ìš©ì ê¸°ë°˜ì„ ë¨¼ì € í™•ë³´í•˜ê³  ê²€ì¦í•œ í›„ B2B ì‹œì¥ìœ¼ë¡œ í™•ì¥. |
| **ê¸°íƒ€** |  |  |
| ë‹¤í¬ ëª¨ë“œ ë° ê¸°ë³¸ ì„¤ì • | Must-have | í˜„ëŒ€ì ì¸ ì•±ì˜ í•„ìˆ˜ì ì¸ ì‚¬ìš©ì ê²½í—˜ ìš”ì†Œ. |
| ì™¸ë¶€ ì•± í†µí•© (Slack, Google Calendar) | Should-have | ì‚¬ìš©ìì˜ ê¸°ì¡´ ì›Œí¬í”Œë¡œìš°ì— í†µí•©ë˜ì–´ ì•±ì˜ ìœ ìš©ì„±ì„ í¬ê²Œ í–¥ìƒì‹œí‚´. |

### **ê²°ë¡  ë° ê¶Œì¥ ì‚¬í•­**

ë³¸ ë³´ê³ ì„œì—ì„œ ì œì‹œëœ 'í”„ë¡œì íŠ¸ ëª¨ë©˜í…€'ì€ ë‹¨ìˆœí•œ ìƒì‚°ì„± ë„êµ¬ë¥¼ ë„˜ì–´, ê°œì¸ì˜ ì„±ì¥ê³¼ íŒ€ì˜ í˜‘ì—…, ê·¸ë¦¬ê³  ì „ë¬¸ì ì¸ ê¸°íšŒë¥¼ í•˜ë‚˜ì˜ ìœ ê¸°ì ì¸ ìƒíƒœê³„ë¡œ í†µí•©í•˜ëŠ” ì•¼ì‹¬ì°¬ ë¹„ì „ì„ ë‹´ê³  ìˆìŠµë‹ˆë‹¤. Threadsì—ì„œ ì˜ê°ì„ ë°›ì€ ë¯¸ë‹ˆë©€ë¦¬ì¦˜ UIë¥¼ ê¸°ë°˜ìœ¼ë¡œ, GTD ë°©ë²•ë¡ ì˜ íš¨ìœ¨ì„±ê³¼ ê¹Šì´ ìˆëŠ” ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ë©”ì»¤ë‹ˆì¦˜ì„ ê²°í•©í•˜ì—¬ ì‚¬ìš©ìì˜ ë‚´ì¬ì  ë™ê¸°ë¥¼ ìê·¹í•˜ê³  ì§€ì†ì ì¸ ì°¸ì—¬ë¥¼ ìœ ë„í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.

ì„±ê³µì ì¸ ì¶œì‹œì™€ ì§€ì† ê°€ëŠ¥í•œ ì„±ì¥ì„ ìœ„í•´ ë‹¤ìŒì˜ ì „ëµì  ê¶Œì¥ ì‚¬í•­ì„ ì œì‹œí•©ë‹ˆë‹¤.

1. **MVP(ìµœì†Œ ê¸°ëŠ¥ ì œí’ˆ)ì— ì§‘ì¤‘:** ì œì•ˆëœ MoSCoW ìš°ì„ ìˆœìœ„ ëª¨ë¸ì— ë”°ë¼, ì´ˆê¸° ê°œë°œì€ 'í™ˆ(ì—…ë¬´ ê´€ë¦¬)'ê³¼ 'í”„ë¡œì íŠ¸(ê¸°ë³¸ í˜‘ì—…)'ë¼ëŠ” í•µì‹¬ ê°€ì¹˜ì— ì§‘ì¤‘í•´ì•¼ í•©ë‹ˆë‹¤. ì´ëŠ” ê°€ì¥ ë¹ ë¥¸ ì‹œê°„ ë‚´ì— ì‹œì¥ì— ì œí’ˆì„ ì„ ë³´ì´ê³ , ì‹¤ì œ ì‚¬ìš©ì í”¼ë“œë°±ì„ í†µí•´ ê°€ì„¤ì„ ê²€ì¦í•˜ë©°, ë¶ˆí•„ìš”í•œ ê¸°ëŠ¥ ê°œë°œì— ë”°ë¥´ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ìµœì†Œí™”í•˜ëŠ” ê°€ì¥ íš¨ìœ¨ì ì¸ ì ‘ê·¼ ë°©ì‹ì…ë‹ˆë‹¤.  
2. **ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ê²½ì œì˜ ì •êµí•œ ê· í˜•:** XP, í‰íŒ, ì‹œì¦Œ í¬ì¸íŠ¸ ë“± ë³´ìƒ ì‹œìŠ¤í…œì˜ ìˆ˜ì¹˜ì  ê· í˜•ì€ ì•±ì˜ ì¥ê¸°ì ì¸ ì„±ê³µì— ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤. ì¶œì‹œ ì „, ë‚´ë¶€ í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ ì œì•ˆëœ 'ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ê²½ì œ ë§¤íŠ¸ë¦­ìŠ¤'ë¥¼ ë©´ë°€íˆ ê²€í† í•˜ê³  ì¡°ì •í•˜ì—¬, ì„±ì·¨ê°ì´ ëŠê»´ì§€ë©´ì„œë„ ì¸í”Œë ˆì´ì…˜ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ” ê²¬ê³ í•œ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•´ì•¼ í•©ë‹ˆë‹¤.  
3. **ì»¤ë®¤ë‹ˆí‹°ì˜ ì ì§„ì  í™œì„±í™”:** 'í”„ë¡œì íŠ¸ ì‡¼ì¼€ì´ìŠ¤'ì™€ 'ì§€ì‹ ìœ„í‚¤'ëŠ” í”Œë«í¼ì˜ ê°•ë ¥í•œ ìì‚°ì´ ë  ì ì¬ë ¥ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì´ˆê¸°ì—ëŠ” í”Œë«í¼ì´ ì§ì ‘ ì–‘ì§ˆì˜ ì½˜í…ì¸ (ëª¨ë²” ì‚¬ë¡€ í”„ë¡œì íŠ¸, í•µì‹¬ ê¸°ìˆ  ê°€ì´ë“œ)ë¥¼ ì œê³µí•˜ì—¬ ê¸°ì¤€ì„ ì œì‹œí•˜ê³ , ì´ˆê¸° ì‚¬ìš©ì(ì–¼ë¦¬ ì–´ë‹µí„°) ê·¸ë£¹ì„ ëŒ€ìƒìœ¼ë¡œ ì½˜í…ì¸  ê¸°ì—¬ë¥¼ ì ê·¹ì ìœ¼ë¡œ ì¥ë ¤í•˜ëŠ” ì „ëµì´ í•„ìš”í•©ë‹ˆë‹¤.  
4. **B2Bë¡œì˜ ì‹ ì¤‘í•œ í™•ì¥:** 'ì›Œí¬ìŠ¤í˜ì´ìŠ¤' ê¸°ëŠ¥ì€ ìƒë‹¹í•œ ìˆ˜ìµ ì ì¬ë ¥ì„ ê°€ì§€ê³  ìˆì§€ë§Œ, ê°œì¸ ì‚¬ìš©ì ì‹œì¥ì—ì„œ ì œí’ˆì˜ ê°€ì¹˜ì™€ ì•ˆì •ì„±ì´ ì¶©ë¶„íˆ ì…ì¦ëœ í›„ì— ì¶”ì§„í•˜ëŠ” ê²ƒì´ ë°”ëŒì§í•©ë‹ˆë‹¤. ê°•ë ¥í•œ ê°œì¸ ì‚¬ìš©ì ê¸°ë°˜ì€ B2B ì‹œì¥ ì§„ì… ì‹œ ì¤‘ìš”í•œ ì‚¬íšŒì  ì¦ê±°(Social Proof)ì´ì ë§ˆì¼€íŒ… ìì‚°ì´ ë  ê²ƒì…ë‹ˆë‹¤.

'í”„ë¡œì íŠ¸ ëª¨ë©˜í…€'ì€ ë‹¨ìˆœí•œ ì—…ë¬´ ê´€ë¦¬ë¥¼ ë„˜ì–´, ì‚¬ìš©ìê°€ ìì‹ ì˜ ì „ë¬¸ì ì¸ ì—¬ì •ì„ 'í”Œë ˆì´'í•˜ê³ , ì„±ì·¨ë¥¼ í†µí•´ ì„±ì¥í•˜ë©°, ë‹¤ë¥¸ ì‚¬ëŒë“¤ê³¼ ì—°ê²°ë˜ëŠ” ìƒˆë¡œìš´ íŒ¨ëŸ¬ë‹¤ì„ì˜ ìƒì‚°ì„± í”Œë«í¼ì´ ë  ì ì¬ë ¥ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì œì•ˆëœ ì²­ì‚¬ì§„ì„ ë°”íƒ•ìœ¼ë¡œ í•œ ì²´ê³„ì ì´ê³  ì§‘ì¤‘ì ì¸ ì‹¤í–‰ì´ ì´ ë¹„ì „ì„ í˜„ì‹¤ë¡œ ë§Œë“œëŠ” ì—´ì‡ ê°€ ë  ê²ƒì…ë‹ˆë‹¤.
</file>

<file path="references/WORKLY_PRD.md">
### **Workly ì œí’ˆ ìš”êµ¬ ëª…ì„¸ì„œ (Product Requirements Document) v2.0**

* **ë¬¸ì„œ ë²„ì „:** 2.0
* **ìµœì¢… ìˆ˜ì •ì¼:** 2025ë…„ 8ì›” 1ì¼
* **ë¬¸ì„œ ëª©ì :** Workly ì•±ì˜ ê¸°íš, ë””ìì¸, ê°œë°œì„ ìœ„í•œ ë‹¨ì¼ ì§„ì‹¤ ê³µê¸‰ì›(Single Source of Truth). ëª¨ë“  íŒ€ì›ì€ ì´ ë¬¸ì„œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì‘ì—…ì„ ì§„í–‰í•œë‹¤.

---

### **1. í•µì‹¬ ì² í•™ ë° ë””ìì¸ ì›ì¹™**

* **1.1. ê·¹ë„ì˜ ê°„ê²°í•¨ (Simplicity First):** ëª¨ë“  í™”ë©´ê³¼ ê¸°ëŠ¥ì€ ì‚¬ìš©ìì˜ ì¸ì§€ ë¶€í•˜ë¥¼ ìµœì†Œí™”í•˜ëŠ” ë°©í–¥ìœ¼ë¡œ ì„¤ê³„í•œë‹¤. ë³¸ì§ˆì„ ì œì™¸í•œ ëª¨ë“  ê²ƒì€ êµ°ë”ë”ê¸°ë‹¤. ë¯¸ë‹ˆë©€í•œ ì‹œê°ì  ìš”ì†Œ, ë¶ˆí•„ìš”í•œ ê·¸ë¦¼ì ì œê±°, ê°„ì†Œí•œ êµ¬ë¶„ì„  ì‚¬ìš©ìœ¼ë¡œ ê¹”ë”í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œë‹¤.
* **1.2. ë‹¨ì¼ ì»¬ëŸ¬ ì‹œìŠ¤í…œ (Unified Color System):** ì•± ì „ì²´ì— ê±¸ì³ ì‹ ë¢°ì™€ ì‹¤í–‰ì„ ìƒì§•í•˜ëŠ” ë‹¨ì¼ ì£¼ì¡°ìƒ‰ **`Primary Blue (#2563eb)`**ë¥¼ ì‚¬ìš©í•œë‹¤. í•´ë‹¹ ìƒ‰ìƒì˜ ëª…ë„/ì±„ë„ ë³€í™”ë§Œìœ¼ë¡œ ìœ„ê³„ë¥¼ í‘œí˜„í•˜ì—¬, ì¼ê´€ë˜ê³  ì•ˆì •ì ì¸ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•œë‹¤.
* **1.3. ìœ ì—°í•œ ë°ì´í„° ê´€ê³„ (Flexible Data Structure):** í•µì‹¬ ë°ì´í„°(`ì—…ë¬´`, `í”„ë¡œì íŠ¸`, `ëª©í‘œ`)ëŠ” ë…ë¦½ì ìœ¼ë¡œ ì¡´ì¬í•˜ê±°ë‚˜, ì„œë¡œ ìœ ì—°í•˜ê²Œ ì†Œì†ë  ìˆ˜ ìˆëŠ” ê³„ì¸µ êµ¬ì¡°ë¥¼ ê°€ì§„ë‹¤.

---

### **2. ì „ì—­ UI/UX ì‹œìŠ¤í…œ (Global UI/UX System)**

ì´ì „ì— ì •ì˜ëœ ë””ìì¸ ì‹œìŠ¤í…œì„ ê¸°ë°˜ìœ¼ë¡œ, ì•± ì „ì²´ì— ì ìš©ë  ì‹œê°ì , ìƒí˜¸ì‘ìš©ì  ê·œì¹™ì„ ì •ì˜í•œë‹¤.

* **2.1. ì»¬ëŸ¬ ì‹œìŠ¤í…œ (Color System)**
    * **Primary:** `#2563eb` (blue-600) - ì£¼ìš” ì•¡ì…˜, ë§í¬, í™œì„± ìƒíƒœ, ì•„ì´ì½˜ ê°•ì¡°
    * **Primary Hover:** `#1d4ed8` (blue-700) - í˜¸ë²„ ìƒíƒœ
    * **Primary Light:** `#dbeafe` (blue-100) - ë°°ê²½, ì˜ì—­ ê°•ì¡°
    * **Text Main:** `#111827` (gray-900) - ì œëª© ë° ì£¼ìš” í…ìŠ¤íŠ¸
    * **Text Secondary:** `#6b7280` (gray-500) - ë³´ì¡° í…ìŠ¤íŠ¸, ë¹„í™œì„± ì•„ì´ì½˜
    * **Background:** `#f9fafb` (gray-50) - ì•± ì „ì²´ ë°°ê²½
    * **Border:** `#e5e7eb` (gray-200) - ì¹´ë“œ í…Œë‘ë¦¬, êµ¬ë¶„ì„ 
    * **Semantic Colors:**
        * **Success:** `#059669` (green-600) - ì™„ë£Œ, ì„±ê³µ
        * **Warning:** `#d97706` (amber-600) - ì£¼ì˜, ê²½ê³ 
        * **Error:** `#dc2626` (red-600) - ì˜¤ë¥˜, ì‚­ì œ

* **2.2. íƒ€ì´í¬ê·¸ë˜í”¼ (Typography)**
    * **Font Family:** Pretendard (ê°€ë…ì„±ê³¼ ë²”ìš©ì„±ì„ ê³ ë ¤)
    * **Scale:**
        * **Page Title (H1):** 24px, Bold (700)
        * **Card Title (H2):** 18px, SemiBold (600)
        * **Body (ë³¸ë¬¸):** 16px, Regular (400)
        * **Caption/Helper:** 14px, Regular (400)

* **2.3. ê°„ê²© ë° ë ˆì´ì•„ì›ƒ (Spacing & Layout)**
    * **Spacing Scale:** Tailwind CSS ê¸°ë³¸ ìŠ¤ì¼€ì¼ (`4px` ë‹¨ìœ„)ì„ ë”°ë¥¸ë‹¤. (e.g., `p-4` = 16px, `gap-2` = 8px)
    * **Layout:**
        * **Mobile (< 768px):** í•˜ë‹¨ íƒ­ ë°” ë„¤ë¹„ê²Œì´ì…˜
        * **Desktop (>= 768px):** ì¢Œì¸¡ ì‚¬ì´ë“œë°” ë„¤ë¹„ê²Œì´ì…˜

* **2.4. ì•„ì´ì½”ë…¸ê·¸ë˜í”¼ (Iconography)**
    * **Library:** Heroicons ([https://heroicons.com/](https://heroicons.com/))
    * **Style:** **Outline** ìŠ¤íƒ€ì¼ì„ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•˜ì—¬ ê°„ê²°í•˜ê³  ë¯¸ë‹ˆë©€í•œ í†¤ì•¤ë§¤ë„ˆë¥¼ ìœ ì§€í•œë‹¤. (24px, 1.5 stroke)

* **2.5. í•µì‹¬ ì»´í¬ë„ŒíŠ¸ (Core Components) - ë¯¸ë‹ˆë©€ ë””ìì¸**
    * **Card:** `rounded-lg`, `bg-white`, `border border-gray-100`, `p-4` (ê·¸ë¦¼ì ì œê±°ë¡œ ë¯¸ë‹ˆë©€í™”)
    * **List Card:** `rounded-lg`, `bg-white`, `border border-gray-100` (ëª©ë¡ ì»¨í…Œì´ë„ˆìš©, padding ì—†ìŒ, ê·¸ë¦¼ì ì œê±°)
    * **Button:** `rounded-md`, `font-semibold`, `px-4 py-2`. Primary ë²„íŠ¼ì€ `bg-blue-600`, `text-white`.
    * **Filter Chip:** `rounded-full`, `bg-gray-100`, `text-gray-700`, `px-3 py-1`, `text-sm`. í™œì„±í™” ì‹œ `bg-blue-100`, `text-blue-700`.
    * **Task Item:** ë¯¸ë‹ˆë©€í•œ íŒ¨ë”©(`p-3`), ì–‡ì€ ì™¼ìª½ ë³´ë”(`border-l-2`), íˆ¬ëª…í•œ ê¸°ë³¸ ë³´ë”ë¡œ ì‹œê°ì  ë°€ë„ ê°ì†Œ

---

### **3. ê³µí†µ ê¸°ëŠ¥ ëª…ì„¸**

* **3.1. í†µí•© ê²€ìƒ‰ (Unified Search)**
    * **A. ëª©ì :** ì‚¬ìš©ìê°€ ì•± ë‚´ ëª¨ë“  ì •ë³´(`ì—…ë¬´`, `í”„ë¡œì íŠ¸`, `ëª©í‘œ` ë“±)ë¥¼ í•œ ê³³ì—ì„œ ë¹ ë¥´ê²Œ ì°¾ë„ë¡ í•œë‹¤.
    * **B. UI ë° ë™ì‘:**
        1.  **ì§„ì…ì :** ëª¨ë°”ì¼ í—¤ë”ì˜ **ë‹ë³´ê¸°(ğŸ”) ì•„ì´ì½˜** í´ë¦­.
        2.  **ì¸í„°í˜ì´ìŠ¤:** ì „ì²´ í™”ë©´ ê²€ìƒ‰ UIê°€ ë‚˜íƒ€ë‚˜ë©°, í‚¤ì›Œë“œ ì…ë ¥ ì‹œ ì‹¤ì‹œê°„ìœ¼ë¡œ ê²°ê³¼ë¥¼ ë¡œë“œí•œë‹¤.
        3.  **ê²°ê³¼ í‘œì‹œ:** `ì—…ë¬´`, `í”„ë¡œì íŠ¸`, `ëª©í‘œ`, `ìœ„í‚¤` ë“± ì¹´í…Œê³ ë¦¬ë³„ íƒ­ìœ¼ë¡œ ê²°ê³¼ë¥¼ ë¶„ë¥˜í•˜ì—¬ ë³´ì—¬ì¤€ë‹¤.
        4.  **ë°ì´í„° ëª¨ë¸:** ê²€ìƒ‰ ì¿¼ë¦¬(string), ê²€ìƒ‰ ê²°ê³¼ ê°ì²´ ë¦¬ìŠ¤íŠ¸.

* **3.2. í•„í„°ë§ ì‹œìŠ¤í…œ (Filtering System)**
    * **A. ëª©ì :** ê° í˜ì´ì§€ì˜ ëª©ë¡ì—ì„œ ì›í•˜ëŠ” ì¡°ê±´ì˜ í•­ëª©ë§Œ í•„í„°ë§í•˜ì—¬ ë³´ì—¬ì¤€ë‹¤.
    * **B. UI ë° ë™ì‘:**
        1.  **ìœ„ì¹˜:** ê° í˜ì´ì§€ ë¦¬ìŠ¤íŠ¸ ìƒë‹¨, í˜ì´ì§€ íƒ€ì´í‹€ ì•„ë˜.
        2.  **ì¸í„°í˜ì´ìŠ¤:** ìì£¼ ì“°ëŠ” í•µì‹¬ í•„í„°(ì˜ˆ: `ë‚´ ì—…ë¬´`)ëŠ” ë²„íŠ¼ìœ¼ë¡œ, ê·¸ ì™¸ ìƒì„¸ í•„í„°ëŠ” **'í•„í„°' ì•„ì´ì½˜ ë²„íŠ¼**ì„ í†µí•´ íŒ¨ë„ì—ì„œ ì„¤ì •.
        3.  **ë°ì´í„° ëª¨ë¸:** í•„í„° ì¡°ê±´ ê°ì²´(JSON), í•„í„°ë§ëœ ê°ì²´ ë¦¬ìŠ¤íŠ¸.

---

### **4. í™”ë©´ë³„ ìƒì„¸ ê¸°ëŠ¥ ëª…ì„¸**

#### **4.1. ì—…ë¬´ (í™ˆ)**

* **A. ëª©ì :** ê°œì¸ì˜ ëª¨ë“  í•  ì¼ì„ ë¹ ë¥´ê²Œ ìˆ˜ì§‘í•˜ê³ , ì§ê´€ì ì¸ ì œìŠ¤ì²˜ë¥¼ í†µí•´ ì¦‰ì‹œ ë¶„ë¥˜, ìœ„ì„, ì œê±°, ì˜ˆì•½í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ”ë‹¤.

* **B. í•µì‹¬ ìƒí˜¸ì‘ìš© ëª¨ë¸ (Default Interaction Model):**
'ì •ë¦¬ ë§ˆë²•ì‚¬'ë¼ëŠ” ë³„ë„ ëª¨ë“œ ì—†ì´, ì—…ë¬´ ì¹´ë“œ ë¦¬ìŠ¤íŠ¸ ìì²´ì— ì•„ë˜ì˜ ìƒí˜¸ì‘ìš©ì´ ê¸°ë³¸ìœ¼ë¡œ ì ìš©ëœë‹¤.

    1. **íƒ­ (Tap):** ì—…ë¬´ ì¹´ë“œë¥¼ ì§§ê²Œ íƒ­í•˜ë©´ 'ì—…ë¬´ ìƒì„¸' í™”ë©´ìœ¼ë¡œ ì§„ì…í•œë‹¤.

    2. **ìŠ¤ì™€ì´í”„ (Swipe):**
        * **ì™¼ìª½ìœ¼ë¡œ ìŠ¤ì™€ì´í”„ â†’ ì‚­ì œ:** ì¹´ë“œë¥¼ ì™¼ìª½ìœ¼ë¡œ ë°€ì–´ ì¦‰ì‹œ ì‚­ì œí•œë‹¤. (30ì¼ê°„ íœ´ì§€í†µ ë³´ê´€)
        * **ì˜¤ë¥¸ìª½ìœ¼ë¡œ ìŠ¤ì™€ì´í”„ â†’ ì¶”ê°€ ì•¡ì…˜:** ì¹´ë“œë¥¼ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ë°€ë©´ [ìœ„ì„], [ë³´ë¥˜], [í”„ë¡œì íŠ¸ë¡œ ì „í™˜] ì˜µì…˜ ë©”ë‰´ê°€ ë‚˜íƒ€ë‚œë‹¤.

    3. **ê¸¸ê²Œ ëˆ„ë¥¸ í›„ ë“œë˜ê·¸ (Long-press & Drag):**
        * **í™œì„±í™”:** ì¹´ë“œë¥¼ 0.5ì´ˆ ì´ìƒ ê¸¸ê²Œ ëˆ„ë¥´ë©´, ê°€ë²¼ìš´ í–…í‹± í”¼ë“œë°±ê³¼ í•¨ê»˜ ì¹´ë“œê°€ ì‚´ì§ ë“¤ì–´ì˜¬ë ¤ì§€ëŠ” ì‹œê°ì  íš¨ê³¼ê°€ ë‚˜íƒ€ë‚˜ë©° **'ë“œë˜ê·¸ ëª¨ë“œ'**ë¡œ ì „í™˜ëœë‹¤. (ìŠ¤ì™€ì´í”„ì™€ì˜ ë™ì‘ ì¶©ëŒ ë°©ì§€)
        * **ì‹¤í–‰:** ë“œë˜ê·¸ ëª¨ë“œì—ì„œ ì¹´ë“œë¥¼ ëŒì–´ í™”ë©´ í•˜ë‹¨ì˜ **'ì ‘ì´ì‹ ìº˜ë¦°ë”'**ì˜ íŠ¹ì • ë‚ ì§œ ìœ„ì— ë†“ìœ¼ë©´ í•´ë‹¹ ë‚ ì§œê°€ ë§ˆê°ì¼ë¡œ ì§€ì •ëœë‹¤.

* **C. í™”ë©´ êµ¬ì„±:**
    * **í—¤ë”:** `í˜ì´ì§€ íƒ€ì´í‹€(ì—…ë¬´)`, `í†µí•© ê²€ìƒ‰ ì•„ì´ì½˜(ğŸ”)`.
    * **ì½˜í…ì¸ :** `ë¹ ë¥¸ ì¶”ê°€ ì…ë ¥ì°½`, `ì—…ë¬´ ì¹´ë“œ ë¦¬ìŠ¤íŠ¸`, `ì ‘ì´ì‹ ìº˜ë¦°ë”(í•˜ë‹¨)`.

* **D. í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ë° ê¸°ëŠ¥:**
    1. **ë¹ ë¥¸ ì¶”ê°€:** `placeholder="ë¬´ì—‡ì„ í•´ì•¼ í•˜ë‚˜ìš”?"` í…ìŠ¤íŠ¸ í•„ë“œ. Enter ì…ë ¥ ì‹œ ìƒˆ ì—…ë¬´ê°€ ë¦¬ìŠ¤íŠ¸ ìµœìƒë‹¨ì— ìƒì„±. `status`ëŠ” 'todo', `created_at`ì€ í˜„ì¬ ì‹œê°.
    2. **ì—…ë¬´ ì¹´ë“œ:** `ì—…ë¬´ ì œëª©`, `ë§ˆê°ì¼`, `ì†Œì† í”„ë¡œì íŠ¸/ëª©í‘œ íƒœê·¸` í‘œì‹œ. **ë§ˆê°ì¼**ì´ ê°€ì¥ ê°•ì¡°ë¨.
    3. **ì ‘ì´ì‹ ìº˜ë¦°ë” (Collapsible Calendar):**
        * **ê¸°ë³¸ ìƒíƒœ:** í™”ë©´ í•˜ë‹¨ì— ì ‘í˜€ìˆëŠ” ìƒíƒœ. ì›” ì´ë¦„ê³¼ ê°„ë‹¨í•œ ì£¼ê°„ ë·°ë§Œ ë³´ì„.
        * **ë“œë˜ê·¸ ëª¨ë“œ í™œì„±í™”:** ì—…ë¬´ ì¹´ë“œë¥¼ ê¸¸ê²Œ ëˆ„ë¥´ë©´ ìë™ìœ¼ë¡œ í¼ì³ì ¸ ì „ì²´ ì›”ê°„ ìº˜ë¦°ë”ê°€ í‘œì‹œë¨.
        * **ë‚ ì§œ ì„ íƒ:** íŠ¹ì • ë‚ ì§œ ìœ„ì— ì—…ë¬´ ì¹´ë“œë¥¼ ë“œë¡­í•˜ë©´ í•´ë‹¹ ë‚ ì§œê°€ ë§ˆê°ì¼ë¡œ ì„¤ì •ë˜ê³  ìº˜ë¦°ë”ê°€ ë‹¤ì‹œ ì ‘í˜.
        * **ì• ë‹ˆë©”ì´ì…˜:** ë¶€ë“œëŸ¬ìš´ ìŠ¬ë¼ì´ë“œ ì—…/ë‹¤ìš´ ì• ë‹ˆë©”ì´ì…˜ìœ¼ë¡œ ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ.
        * **ì—…ë¬´ í‘œì‹œ:** í•´ë‹¹ ë‚ ì§œì— ì—…ë¬´ê°€ ìˆìœ¼ë©´ Primary Blue ìƒ‰ìƒì˜ ì‘ì€ ë„íŠ¸ë¡œ í‘œì‹œ.
        * **ì˜¤ëŠ˜ ë‚ ì§œ:** íŠ¹ë³„í•œ í…Œë‘ë¦¬ì™€ ë°°ê²½ìƒ‰ìœ¼ë¡œ ê°•ì¡° í‘œì‹œ.
        * **ìƒí˜¸ì‘ìš©:** ì ‘íŒ ìƒíƒœì—ì„œë„ ì¢Œìš° ìŠ¤ì™€ì´í”„ë¡œ ì›” ì´ë™ ê°€ëŠ¥.
    4. **ì—…ë¬´ ìƒì„¸ (ë…¸íŠ¸):**
        * **UI:** ë§ˆí¬ë‹¤ìš´ ì—ë””í„°.
        * **ê¸°ëŠ¥:** ì²´í¬ë¦¬ìŠ¤íŠ¸ ìƒì„±, ì„ í–‰/í›„í–‰ ê´€ê³„ ì„¤ì •, ìœ„í‚¤ ë ˆí¼ëŸ°ìŠ¤ ì²¨ë¶€, ì‹œê°„ ì¶”ì •/ê¸°ë¡.

* **E. ë°ì´í„° ëª¨ë¸ (Task Object):** `{ id, title, content(markdown), status, dueDate, createdAt, projectId?, goalId? }`

#### **4.2. í”„ë¡œì íŠ¸**

* **A. ëª©ì :** íŒ€ì›ë“¤ì´ ì‹¤ì‹œê°„ìœ¼ë¡œ ì†Œí†µí•˜ë©° ê³µë™ì˜ ëª©í‘œë¥¼ ë‹¬ì„±í•˜ëŠ” í˜‘ì—… ê³µê°„.
* **B. í™”ë©´ êµ¬ì„±:**
    * **í—¤ë”:** `í”„ë¡œì íŠ¸ ì œëª©`, `ë©¤ë²„ ëª©ë¡ ì•„ì´ì½˜`, `... (ë”ë³´ê¸° ë©”ë‰´)`.
    * **ì½˜í…ì¸ :** `ì±„íŒ… ì˜ì—­(ë©”ì¸)`, `ì‚¬ì´ë“œë°”(ì ‘í˜/í¼ì¹¨ ê°€ëŠ¥)`.
* **C. í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ë° ê¸°ëŠ¥:**
    1.  **í”„ë¡œì íŠ¸ ì¹´ë“œ:** `í”„ë¡œì íŠ¸ ì œëª©`, `ì°¸ì—¬ ë©¤ë²„ ì•„ë°”íƒ€`, `ì§„í–‰ë¥ `. **ì§„í–‰ë¥ (Progress Bar)**ì´ ê°€ì¥ ê°•ì¡°ë¨.
    2.  **ì‹¤ì‹œê°„ ì±„íŒ…:** ì‹¤ì‹œê°„ ë©”ì‹œì§€ ì „ì†¡ ë° ìˆ˜ì‹ . `/ì—…ë¬´ìƒì„±` ë“± ìŠ¬ë˜ì‹œ ì»¤ë§¨ë“œ ì§€ì›.
    3.  **ì‚¬ì´ë“œë°”:** `í”„ë¡œì íŠ¸ ì •ë³´(ëª©í‘œ, ë³´ìƒ ë“±)`, `ì—…ë¬´ ëª©ë¡(ë©¤ë²„ë³„ í•„í„°ë§ ê°€ëŠ¥)`, `ê²°ì • ë³´ë“œ`, `ê³µìœ  íŒŒì¼` ë“± ëª¨ë“  ë©”íƒ€ ì •ë³´ í‘œì‹œ.
    4.  **íŒ€ ë¹Œë”©:**
        * **ë¦¬ë”:** `í”„ë¡œì íŠ¸ ìƒì„±`, `í•„ìš” ìŠ¤í‚¬ ë“±ë¡`, `ì§€ì›ì í”„ë¡œí•„ ê²€í† `, `ìˆ˜ë½/ê±°ì ˆ`.
        * **ì§€ì›ì:** `í”„ë¡œì íŠ¸ íƒìƒ‰`, `ë‚´ í”„ë¡œí•„ë¡œ ì§€ì›`.
* **D. ë°ì´í„° ëª¨ë¸ (Project Object):** `{ id, name, goal, requiredSkills[], members[], status, messages[], tasks[] }`

#### **4.3. ëª©í‘œ**

* **A. ëª©ì :** ì¥ê¸°ì ì¸ ë¹„ì „ì„ ì‹œê°í™”í•˜ê³ , ê´€ë ¨ëœ ëª¨ë“  í™œë™ì„ ì¶”ì í•˜ì—¬ ë™ê¸°ë¥¼ ë¶€ì—¬í•˜ëŠ” ëŒ€ì‹œë³´ë“œ.
* **B. í™”ë©´ êµ¬ì„±:**
    * **í—¤ë”:** `ëª©í‘œ ì œëª©`, `... (ë”ë³´ê¸° ë©”ë‰´)`.
    * **ì½˜í…ì¸ :** ìœ„ì ¯ ê¸°ë°˜ì˜ ì»¤ìŠ¤í…€ ê°€ëŠ¥í•œ ëŒ€ì‹œë³´ë“œ.
* **C. í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ë° ê¸°ëŠ¥:**
    1.  **ëª©í‘œ ì¹´ë“œ:** `ëª©í‘œ ì œëª©`, `ì—°ê´€ í”„ë¡œì íŠ¸ ìˆ˜`. **í™œì„±ë„(Activity Aura)**ê°€ ê°€ì¥ ê°•ì¡°ë¨.
    2.  **í™œì„±ë„(Aura):** ëª©í‘œ ì•„ì´ì½˜ ì£¼ë³€ì— `box-shadow`ì™€ `animation`ìœ¼ë¡œ êµ¬í˜„ëœ ë¹› íš¨ê³¼. í™œì„±ë„ ì ìˆ˜ì— ë”°ë¼ ë°ê¸°ì™€ ì›€ì§ì„ì´ ë³€í™”.
    3.  **ëŒ€ì‹œë³´ë“œ ìœ„ì ¯:** `KPI íŠ¸ë˜ì»¤`, `ì—°ê´€ í”„ë¡œì íŠ¸ ëª©ë¡`, `ì „ì²´ ì—…ë¬´ ë²ˆë‹¤ìš´ ì°¨íŠ¸`, `ë¹„ì „ ë³´ë“œ(ì´ë¯¸ì§€/ì¸ìš©êµ¬)`.
* **D. ë°ì´í„° ëª¨ë¸ (Goal Object):** `{ id, title, vision, kpis[], projects[], tasks[], activityScore }`

#### **4.4. í”„ë¡œí•„**

* **A. ëª©ì :** ì‚¬ìš©ìì˜ ëª¨ë“  í™œë™ê³¼ ì„±ì¥ì„ ê¸°ë¡í•˜ê³  ì¦ëª…í•˜ëŠ” ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ê¸°ë°˜ ë””ì§€í„¸ ì•„ì´ë´í‹°í‹°.
* **B. í™”ë©´ êµ¬ì„±:**
    * **ìƒë‹¨:** `í”„ë¡œí•„ ì¹´ë“œ(ì•„ë°”íƒ€, ì´ë¦„, ë ˆë²¨, í•µì‹¬ ìŠ¤í‚¬ 3ê°œ)`. í´ë¦­ ì‹œ ìƒì„¸ í”„ë¡œí•„ ëª¨ë‹¬.
    * **ì½˜í…ì¸ :** íƒ­ êµ¬ì¡° - `í™œë™`, `í¬íŠ¸í´ë¦¬ì˜¤`, `ìŠ¤í‚¬`, `ì½”ì›Œì»¤`.
* **C. í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ë° ê¸°ëŠ¥:**
    1.  **XP & ë ˆë²¨:** `ì—…ë¬´ ì™„ë£Œ(+10 XP)`, `í”„ë¡œì íŠ¸ ì„±ê³µ(+100 XP)` ë“± ëª…í™•í•œ ê·œì¹™ì— ë”°ë¼ XP íšë“ ë° ë ˆë²¨ì—….
    2.  **ì—…ì  ë±ƒì§€:** `achievements.json`ì— ì •ì˜ëœ ì¡°ê±´ ë‹¬ì„± ì‹œ íšë“. `2xN ê·¸ë¦¬ë“œ`ë¡œ í‘œì‹œ.
    3.  **ìŠ¤í‚¬ íŠ¸ë¦¬:** ë³´ìœ  ìŠ¤í‚¬ì„ `ë§ˆì¸ë“œë§µ` í˜•íƒœë¡œ ì‹œê°í™”. ê´€ë ¨ í”„ë¡œì íŠ¸ ì™„ë£Œ ì‹œ í•´ë‹¹ ìŠ¤í‚¬ì˜ ìˆ™ë ¨ë„(ë ˆë²¨) ìƒìŠ¹.
    4.  **í‰íŒ:** ì½”ì›Œì»¤ì—ê²Œ ë°›ì€ ì¹­ì°¬ì„ `íƒœê·¸ í´ë¼ìš°ë“œ`ë¡œ ì‹œê°í™”.
    5.  **ì½”ì›Œì»¤:** í”„ë¡œì íŠ¸ë¥¼ í•¨ê»˜ í•œ ë™ë£Œ ëª©ë¡.
* **D. ë°ì´í„° ëª¨ë¸ (User Object):** `{ id, name, email, avatarUrl, level, xp, skills[], achievements[], co-workers[] }`
</file>

<file path="scripts/deploy-production.sh">
#!/bin/bash

# Production í™˜ê²½ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸

set -e

echo "ğŸŒŸ Production í™˜ê²½ì— ë°°í¬ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤..."

# 1. AWS CLI ì„¤ì • í™•ì¸
echo "â˜ï¸ AWS ì„¤ì • í™•ì¸ ì¤‘..."
if ! command -v aws &> /dev/null; then
    echo "âŒ AWS CLIê°€ ì„¤ì¹˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤."
    exit 1
fi

aws sts get-caller-identity > /dev/null
echo "âœ… AWS ì¸ì¦ í™•ì¸ ì™„ë£Œ"

# 2. Docker ì´ë¯¸ì§€ ë¹Œë“œ ë° íƒœê¹…
echo "ğŸ³ Docker ì´ë¯¸ì§€ ë¹Œë“œ ì¤‘..."

# Frontend ì´ë¯¸ì§€
docker build -t workly-frontend:latest ./frontend
docker tag workly-frontend:latest ${AWS_ACCOUNT_ID}.dkr.ecr.${AWS_REGION}.amazonaws.com/workly-frontend:latest
docker tag workly-frontend:latest ${AWS_ACCOUNT_ID}.dkr.ecr.${AWS_REGION}.amazonaws.com/workly-frontend:$(git rev-parse HEAD)

# Backend ì´ë¯¸ì§€
docker build -t workly-backend:latest ./backend
docker tag workly-backend:latest ${AWS_ACCOUNT_ID}.dkr.ecr.${AWS_REGION}.amazonaws.com/workly-backend:latest
docker tag workly-backend:latest ${AWS_ACCOUNT_ID}.dkr.ecr.${AWS_REGION}.amazonaws.com/workly-backend:$(git rev-parse HEAD)

# 3. ECR ë¡œê·¸ì¸
echo "ğŸ”‘ ECR ë¡œê·¸ì¸ ì¤‘..."
aws ecr get-login-password --region ${AWS_REGION} | docker login --username AWS --password-stdin ${AWS_ACCOUNT_ID}.dkr.ecr.${AWS_REGION}.amazonaws.com

# 4. ì´ë¯¸ì§€ í‘¸ì‹œ
echo "ğŸ“¤ Docker ì´ë¯¸ì§€ í‘¸ì‹œ ì¤‘..."
docker push ${AWS_ACCOUNT_ID}.dkr.ecr.${AWS_REGION}.amazonaws.com/workly-frontend:latest
docker push ${AWS_ACCOUNT_ID}.dkr.ecr.${AWS_REGION}.amazonaws.com/workly-frontend:$(git rev-parse HEAD)
docker push ${AWS_ACCOUNT_ID}.dkr.ecr.${AWS_REGION}.amazonaws.com/workly-backend:latest
docker push ${AWS_ACCOUNT_ID}.dkr.ecr.${AWS_REGION}.amazonaws.com/workly-backend:$(git rev-parse HEAD)

# 5. ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
echo "ğŸ’¾ ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ ì¤‘..."
./scripts/migrate.sh production

# 6. ECS ì„œë¹„ìŠ¤ ì—…ë°ì´íŠ¸
echo "ğŸš€ ECS ì„œë¹„ìŠ¤ ì—…ë°ì´íŠ¸ ì¤‘..."

# Backend ì„œë¹„ìŠ¤ ì—…ë°ì´íŠ¸
aws ecs update-service \
    --cluster workly-cluster \
    --service workly-backend \
    --force-new-deployment \
    --region ${AWS_REGION}

# FrontendëŠ” Vercelì—ì„œ ìë™ ë°°í¬ë¨
echo "ğŸŒ FrontendëŠ” Vercelì—ì„œ ìë™ ë°°í¬ë©ë‹ˆë‹¤."

# 7. ë°°í¬ ìƒíƒœ í™•ì¸
echo "â³ ë°°í¬ ìƒíƒœ í™•ì¸ ì¤‘..."
aws ecs wait services-stable \
    --cluster workly-cluster \
    --services workly-backend \
    --region ${AWS_REGION}

# 8. CDN ìºì‹œ ë¬´íš¨í™” (í•„ìš”í•œ ê²½ìš°)
if [ -n "${CLOUDFRONT_DISTRIBUTION_ID}" ]; then
    echo "ğŸŒ CloudFront ìºì‹œ ë¬´íš¨í™” ì¤‘..."
    aws cloudfront create-invalidation \
        --distribution-id ${CLOUDFRONT_DISTRIBUTION_ID} \
        --paths "/*"
fi

# 9. Slack ì•Œë¦¼ (ì„ íƒì‚¬í•­)
if [ -n "${SLACK_WEBHOOK_URL}" ]; then
    echo "ğŸ“¢ Slack ì•Œë¦¼ ì „ì†¡ ì¤‘..."
    curl -X POST -H 'Content-type: application/json' \
        --data "{\"text\":\"âœ… Workly Production ë°°í¬ ì™„ë£Œ\\nì»¤ë°‹: $(git rev-parse HEAD)\\në¸Œëœì¹˜: $(git branch --show-current)\"}" \
        ${SLACK_WEBHOOK_URL}
fi

echo ""
echo "ğŸ‰ Production ë°°í¬ê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!"
echo ""
echo "ë°°í¬ ì •ë³´:"
echo "- ì»¤ë°‹ í•´ì‹œ: $(git rev-parse HEAD)"
echo "- ë¸Œëœì¹˜: $(git branch --show-current)"
echo "- ë°°í¬ ì‹œê°„: $(date)"
echo ""
echo "ì„œë¹„ìŠ¤ URL:"
echo "- Frontend: https://workly.app"
echo "- Backend API: https://api.workly.app"
</file>

<file path="scripts/deploy.sh">
#!/bin/bash

# ì›Œí´ë¦¬ í”„ë¡œì íŠ¸ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸

set -e

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
ENVIRONMENT=${1:-production}
FRONTEND_BUILD_DIR="frontend/.next"
BACKEND_BUILD_DIR="backend/dist"

echo "ğŸš€ ì›Œí´ë¦¬ ë°°í¬ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤... (í™˜ê²½: $ENVIRONMENT)"

# 1. í™˜ê²½ í™•ì¸
echo "ğŸ“‹ ë°°í¬ í™˜ê²½ í™•ì¸ ì¤‘..."
case $ENVIRONMENT in
    development|staging|production)
        echo "âœ… ë°°í¬ í™˜ê²½: $ENVIRONMENT"
        ;;
    *)
        echo "âŒ ì˜ëª»ëœ í™˜ê²½ì…ë‹ˆë‹¤. development, staging, production ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì„¸ìš”."
        exit 1
        ;;
esac

# 2. Git ìƒíƒœ í™•ì¸
echo "ğŸ“ Git ìƒíƒœ í™•ì¸ ì¤‘..."
if [ -n "$(git status --porcelain)" ]; then
    echo "âš ï¸ ì»¤ë°‹ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤. ë°°í¬ ì „ ì»¤ë°‹í•˜ì„¸ìš”."
    git status
    exit 1
fi
echo "âœ… Git ìƒíƒœê°€ ê¹¨ë—í•©ë‹ˆë‹¤."

# 3. í˜„ì¬ ë¸Œëœì¹˜ í™•ì¸
CURRENT_BRANCH=$(git branch --show-current)
if [ "$ENVIRONMENT" = "production" ] && [ "$CURRENT_BRANCH" != "main" ]; then
    echo "âŒ Production ë°°í¬ëŠ” main ë¸Œëœì¹˜ì—ì„œë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤. í˜„ì¬ ë¸Œëœì¹˜: $CURRENT_BRANCH"
    exit 1
fi
echo "âœ… ë¸Œëœì¹˜ í™•ì¸: $CURRENT_BRANCH"

# 4. í…ŒìŠ¤íŠ¸ ì‹¤í–‰
echo "ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘..."
npm run test
echo "âœ… ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ í†µê³¼í–ˆìŠµë‹ˆë‹¤."

# 5. ë¦°íŒ… ê²€ì‚¬
echo "ğŸ” ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬ ì¤‘..."
npm run lint
echo "âœ… ë¦°íŒ… ê²€ì‚¬ë¥¼ í†µê³¼í–ˆìŠµë‹ˆë‹¤."

# 6. ì˜ì¡´ì„± ì„¤ì¹˜ ë° ë¹Œë“œ
echo "ğŸ“¦ ì˜ì¡´ì„± ì„¤ì¹˜ ë° ë¹Œë“œ ì¤‘..."
npm ci
npm run build

# 7. ë¹Œë“œ ê²°ê³¼ í™•ì¸
echo "ğŸ“Š ë¹Œë“œ ê²°ê³¼ í™•ì¸ ì¤‘..."
if [ ! -d "$FRONTEND_BUILD_DIR" ]; then
    echo "âŒ í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ ì‹¤íŒ¨"
    exit 1
fi

if [ ! -d "$BACKEND_BUILD_DIR" ]; then
    echo "âŒ ë°±ì—”ë“œ ë¹Œë“œ ì‹¤íŒ¨"
    exit 1
fi
echo "âœ… ë¹Œë“œê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤."

# 8. í™˜ê²½ë³„ ë°°í¬ ì‹¤í–‰
case $ENVIRONMENT in
    development)
        echo "ğŸ”§ Development í™˜ê²½ ë°°í¬..."
        # Docker Composeë¥¼ ì‚¬ìš©í•œ ë¡œì»¬ ë°°í¬
        docker-compose -f docker-compose.yml up --build -d
        ;;
    staging)
        echo "ğŸ­ Staging í™˜ê²½ ë°°í¬..."
        # Staging ì„œë²„ ë°°í¬ ë¡œì§
        ./scripts/deploy-staging.sh
        ;;
    production)
        echo "ğŸŒŸ Production í™˜ê²½ ë°°í¬..."
        # Production ë°°í¬ ë¡œì§
        ./scripts/deploy-production.sh
        ;;
esac

# 9. ë°°í¬ ì™„ë£Œ í™•ì¸
echo "ğŸ ë°°í¬ ì™„ë£Œ í™•ì¸ ì¤‘..."
sleep 10

# Health check URLs
case $ENVIRONMENT in
    development)
        FRONTEND_URL="http://localhost:3000"
        BACKEND_URL="http://localhost:3001"
        ;;
    staging)
        FRONTEND_URL="${STAGING_FRONTEND_URL:-https://staging.workly.app}"
        BACKEND_URL="${STAGING_BACKEND_URL:-https://api-staging.workly.app}"
        ;;
    production)
        FRONTEND_URL="${PROD_FRONTEND_URL:-https://workly.app}"
        BACKEND_URL="${PROD_BACKEND_URL:-https://api.workly.app}"
        ;;
esac

# Health check
echo "ğŸ” ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸ ì¤‘..."
if curl -f -s "$BACKEND_URL/health" > /dev/null; then
    echo "âœ… ë°±ì—”ë“œ ì„œë¹„ìŠ¤ê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤."
else
    echo "âš ï¸ ë°±ì—”ë“œ ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸ ì‹¤íŒ¨"
fi

echo ""
echo "ğŸ‰ ë°°í¬ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!"
echo ""
echo "ì„œë¹„ìŠ¤ URL:"
echo "- í”„ë¡ íŠ¸ì—”ë“œ: $FRONTEND_URL"
echo "- ë°±ì—”ë“œ API: $BACKEND_URL"
echo ""
echo "ëª¨ë‹ˆí„°ë§:"
echo "- ë¡œê·¸ í™•ì¸: npm run logs"
echo "- ìƒíƒœ í™•ì¸: npm run status"
</file>

<file path="scripts/migrate.sh">
#!/bin/bash

# ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸

set -e

ENVIRONMENT=${1:-development}

echo "ğŸ’¾ ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ì‹œì‘í•©ë‹ˆë‹¤... (í™˜ê²½: $ENVIRONMENT)"

# í™˜ê²½ë³„ ì„¤ì •
case $ENVIRONMENT in
    development)
        echo "ğŸ”§ Development í™˜ê²½ ë§ˆì´ê·¸ë ˆì´ì…˜"
        cd backend
        ;;
    staging)
        echo "ğŸ­ Staging í™˜ê²½ ë§ˆì´ê·¸ë ˆì´ì…˜"
        cd backend
        ;;
    production)
        echo "ğŸŒŸ Production í™˜ê²½ ë§ˆì´ê·¸ë ˆì´ì…˜"
        echo "âš ï¸ Production ë§ˆì´ê·¸ë ˆì´ì…˜ì€ ì‹ ì¤‘í•˜ê²Œ ì§„í–‰í•´ì•¼ í•©ë‹ˆë‹¤."
        read -p "ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/N): " -n 1 -r
        echo
        if [[ ! $REPLY =~ ^[Yy]$ ]]; then
            echo "ë§ˆì´ê·¸ë ˆì´ì…˜ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤."
            exit 1
        fi
        cd backend
        ;;
    *)
        echo "âŒ ì˜ëª»ëœ í™˜ê²½ì…ë‹ˆë‹¤. development, staging, production ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì„¸ìš”."
        exit 1
        ;;
esac

# 1. ë°±ì—… ìƒì„± (Productionì¸ ê²½ìš°)
if [ "$ENVIRONMENT" = "production" ]; then
    echo "ğŸ’¾ ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—… ìƒì„± ì¤‘..."
    BACKUP_FILE="backup_$(date +%Y%m%d_%H%M%S).sql"
    
    # PostgreSQL ë°±ì—…
    pg_dump \
        -h "${DATABASE_HOST}" \
        -p "${DATABASE_PORT}" \
        -U "${DATABASE_USERNAME}" \
        -d "${DATABASE_NAME}" \
        > "../backups/${BACKUP_FILE}"
    
    echo "âœ… ë°±ì—… ì™„ë£Œ: ../backups/${BACKUP_FILE}"
fi

# 2. ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ í™•ì¸
echo "ğŸ“‹ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ í™•ì¸ ì¤‘..."
MIGRATION_FILES=$(find src/database/migrations -name "*.ts" | wc -l)
echo "ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ê°œìˆ˜: $MIGRATION_FILES"

# 3. ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
echo "âš¡ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ ì¤‘..."
npm run db:migrate

# 4. ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒíƒœ í™•ì¸
echo "ğŸ“Š ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒíƒœ í™•ì¸ ì¤‘..."
# ë§ˆì´ê·¸ë ˆì´ì…˜ í…Œì´ë¸” ì¡°íšŒí•˜ì—¬ ìƒíƒœ í™•ì¸í•˜ëŠ” ë¡œì§ ì¶”ê°€

# 5. ì‹œë“œ ë°ì´í„° ì ìš© (Developmentì¸ ê²½ìš°)
if [ "$ENVIRONMENT" = "development" ]; then
    echo "ğŸŒ± ì‹œë“œ ë°ì´í„° ì ìš© ì¤‘..."
    npm run db:seed
    echo "âœ… ì‹œë“œ ë°ì´í„° ì ìš© ì™„ë£Œ"
fi

echo ""
echo "ğŸ‰ ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!"
echo ""

# 6. ë¡¤ë°± ë°©ë²• ì•ˆë‚´
if [ "$ENVIRONMENT" = "production" ]; then
    echo "ë¡¤ë°±ì´ í•„ìš”í•œ ê²½ìš°:"
    echo "1. ë§ˆì´ê·¸ë ˆì´ì…˜ ë¡¤ë°±: npm run db:migrate:revert"
    echo "2. ë°±ì—… ë³µì›: psql -h \$DATABASE_HOST -U \$DATABASE_USERNAME -d \$DATABASE_NAME < ../backups/${BACKUP_FILE}"
    echo ""
fi
</file>

<file path="scripts/setup.sh">
#!/bin/bash

# ì›Œí´ë¦¬ í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì • ìŠ¤í¬ë¦½íŠ¸

set -e

echo "ğŸš€ ì›Œí´ë¦¬ í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì •ì„ ì‹œì‘í•©ë‹ˆë‹¤..."

# 1. Node.js ë²„ì „ í™•ì¸
echo "ğŸ“‹ Node.js ë²„ì „ í™•ì¸ ì¤‘..."
node_version=$(node -v | sed 's/v//' | cut -d'.' -f1)
if [ "$node_version" -lt 18 ]; then
    echo "âŒ Node.js 18 ì´ìƒì´ í•„ìš”í•©ë‹ˆë‹¤. í˜„ì¬ ë²„ì „: $(node -v)"
    exit 1
fi
echo "âœ… Node.js ë²„ì „: $(node -v)"

# 2. npm ë²„ì „ í™•ì¸
npm_version=$(npm -v | cut -d'.' -f1)
if [ "$npm_version" -lt 9 ]; then
    echo "âŒ npm 9 ì´ìƒì´ í•„ìš”í•©ë‹ˆë‹¤. í˜„ì¬ ë²„ì „: $(npm -v)"
    exit 1
fi
echo "âœ… npm ë²„ì „: $(npm -v)"

# 3. í™˜ê²½ ë³€ìˆ˜ íŒŒì¼ ì„¤ì •
echo "ğŸ”§ í™˜ê²½ ë³€ìˆ˜ íŒŒì¼ ì„¤ì • ì¤‘..."
if [ ! -f .env ]; then
    cp .env.example .env
    echo "âœ… .env íŒŒì¼ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤. í•„ìš”í•œ ê°’ë“¤ì„ ì„¤ì •í•´ì£¼ì„¸ìš”."
else
    echo "â„¹ï¸ .env íŒŒì¼ì´ ì´ë¯¸ ì¡´ì¬í•©ë‹ˆë‹¤."
fi

# 4. ì˜ì¡´ì„± ì„¤ì¹˜
echo "ğŸ“¦ ì˜ì¡´ì„± ì„¤ì¹˜ ì¤‘..."
npm install

# 5. Shared ëª¨ë“ˆ ë¹Œë“œ
echo "ğŸ”¨ Shared ëª¨ë“ˆ ë¹Œë“œ ì¤‘..."
npm run build:shared

# 6. Git hooks ì„¤ì •
echo "ğŸª Git hooks ì„¤ì • ì¤‘..."
npx husky install

# 7. Docker í™˜ê²½ í™•ì¸
echo "ğŸ³ Docker í™˜ê²½ í™•ì¸ ì¤‘..."
if command -v docker &> /dev/null; then
    echo "âœ… Dockerê°€ ì„¤ì¹˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤."
    if docker info &> /dev/null; then
        echo "âœ… Dockerê°€ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤."
    else
        echo "âš ï¸ Dockerê°€ ì‹¤í–‰ë˜ì§€ ì•Šê³  ìˆìŠµë‹ˆë‹¤. Dockerë¥¼ ì‹œì‘í•´ì£¼ì„¸ìš”."
    fi
else
    echo "âš ï¸ Dockerê°€ ì„¤ì¹˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì„ íƒì‚¬í•­ì´ì§€ë§Œ ê°œë°œ í™˜ê²½ êµ¬ì„±ì— ìœ ìš©í•©ë‹ˆë‹¤."
fi

# 8. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • ì•ˆë‚´
echo "ğŸ’¾ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • ì•ˆë‚´:"
echo "   ê°œë°œìš© PostgreSQL ì‹¤í–‰: npm run docker:dev"
echo "   ë˜ëŠ” ë¡œì»¬ PostgreSQL ì„¤ì • í›„ .env íŒŒì¼ ìˆ˜ì •"

# 9. ê°œë°œ ì„œë²„ ì‹¤í–‰ ì•ˆë‚´
echo ""
echo "ğŸ‰ ì´ˆê¸° ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!"
echo ""
echo "ë‹¤ìŒ ë‹¨ê³„:"
echo "1. .env íŒŒì¼ì˜ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ì„¸ìš”"
echo "2. ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”: npm run docker:dev"
echo "3. ê°œë°œ ì„œë²„ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”: npm run dev"
echo ""
echo "ìœ ìš©í•œ ëª…ë ¹ì–´:"
echo "- npm run dev          : í”„ë¡ íŠ¸ì—”ë“œ + ë°±ì—”ë“œ ë™ì‹œ ì‹¤í–‰"
echo "- npm run dev:frontend : í”„ë¡ íŠ¸ì—”ë“œë§Œ ì‹¤í–‰"
echo "- npm run dev:backend  : ë°±ì—”ë“œë§Œ ì‹¤í–‰"
echo "- npm run lint         : ì „ì²´ ë¦°íŒ…"
echo "- npm run test         : ì „ì²´ í…ŒìŠ¤íŠ¸"
echo "- npm run build        : ì „ì²´ ë¹Œë“œ"
</file>

<file path="shared/constants/socket-events.ts">
// Socket.io ì´ë²¤íŠ¸ ìƒìˆ˜ ì •ì˜

// ì—°ê²° ê´€ë ¨ ì´ë²¤íŠ¸
export const CONNECTION_EVENTS = {
  CONNECT: 'connect',
  DISCONNECT: 'disconnect',
  ERROR: 'error',
  RECONNECT: 'reconnect',
  RECONNECT_ERROR: 'reconnect_error',
} as const

// ì‚¬ìš©ì ê´€ë ¨ ì´ë²¤íŠ¸
export const USER_EVENTS = {
  JOIN: 'user:join',
  LEAVE: 'user:leave',
  ONLINE: 'user:online',
  OFFLINE: 'user:offline',
  STATUS_CHANGE: 'user:status_change',
} as const

// í”„ë¡œì íŠ¸ ê´€ë ¨ ì´ë²¤íŠ¸
export const PROJECT_EVENTS = {
  JOIN: 'project:join',
  LEAVE: 'project:leave',
  CREATED: 'project:created',
  UPDATED: 'project:updated',
  DELETED: 'project:deleted',
  MEMBER_ADDED: 'project:member_added',
  MEMBER_REMOVED: 'project:member_removed',
  STATUS_CHANGED: 'project:status_changed',
} as const

// ì—…ë¬´ ê´€ë ¨ ì´ë²¤íŠ¸
export const TASK_EVENTS = {
  CREATED: 'task:created',
  UPDATED: 'task:updated',
  DELETED: 'task:deleted',
  STATUS_CHANGED: 'task:status_changed',
  ASSIGNED: 'task:assigned',
  UNASSIGNED: 'task:unassigned',
  COMMENT_ADDED: 'task:comment_added',
  DUE_DATE_REMINDER: 'task:due_date_reminder',
} as const

// ê²Œì‹œíŒ ê´€ë ¨ ì´ë²¤íŠ¸
export const BOARD_EVENTS = {
  POST_CREATED: 'board:post_created',
  POST_UPDATED: 'board:post_updated',
  POST_DELETED: 'board:post_deleted',
  POST_LIKED: 'board:post_liked',
  POST_UNLIKED: 'board:post_unliked',
  COMMENT_ADDED: 'board:comment_added',
  COMMENT_UPDATED: 'board:comment_updated',
  COMMENT_DELETED: 'board:comment_deleted',
} as const

// ì•Œë¦¼ ê´€ë ¨ ì´ë²¤íŠ¸
export const NOTIFICATION_EVENTS = {
  NEW: 'notification:new',
  READ: 'notification:read',
  READ_ALL: 'notification:read_all',
  DELETED: 'notification:deleted',
} as const

// ì±„íŒ… ê´€ë ¨ ì´ë²¤íŠ¸ (í–¥í›„ í™•ì¥ìš©)
export const CHAT_EVENTS = {
  MESSAGE_SENT: 'chat:message_sent',
  MESSAGE_RECEIVED: 'chat:message_received',
  TYPING_START: 'chat:typing_start',
  TYPING_STOP: 'chat:typing_stop',
  USER_JOINED: 'chat:user_joined',
  USER_LEFT: 'chat:user_left',
} as const

// ì‹œìŠ¤í…œ ê´€ë ¨ ì´ë²¤íŠ¸
export const SYSTEM_EVENTS = {
  MAINTENANCE_START: 'system:maintenance_start',
  MAINTENANCE_END: 'system:maintenance_end',
  UPDATE_AVAILABLE: 'system:update_available',
  BROADCAST: 'system:broadcast',
} as const

// ëª¨ë“  ì´ë²¤íŠ¸ë¥¼ í•˜ë‚˜ì˜ ê°ì²´ë¡œ í†µí•©
export const SOCKET_EVENTS = {
  CONNECTION: CONNECTION_EVENTS,
  USER: USER_EVENTS,
  PROJECT: PROJECT_EVENTS,
  TASK: TASK_EVENTS,
  BOARD: BOARD_EVENTS,
  NOTIFICATION: NOTIFICATION_EVENTS,
  CHAT: CHAT_EVENTS,
  SYSTEM: SYSTEM_EVENTS,
} as const

// ì´ë²¤íŠ¸ íƒ€ì… ìœ ë‹ˆì˜¨
export type SocketEventType = 
  | keyof typeof CONNECTION_EVENTS
  | keyof typeof USER_EVENTS
  | keyof typeof PROJECT_EVENTS
  | keyof typeof TASK_EVENTS
  | keyof typeof BOARD_EVENTS
  | keyof typeof NOTIFICATION_EVENTS
  | keyof typeof CHAT_EVENTS
  | keyof typeof SYSTEM_EVENTS

// ë£¸ ê´€ë ¨ ìƒìˆ˜
export const SOCKET_ROOMS = {
  USER: (userId: string) => `user:${userId}`,
  PROJECT: (projectId: string) => `project:${projectId}`,
  BOARD: 'board:global',
  NOTIFICATIONS: (userId: string) => `notifications:${userId}`,
  CHAT: (roomId: string) => `chat:${roomId}`,
} as const
</file>

<file path="shared/types/goal.types.ts">
/**
 * ì›Œí´ë¦¬ ê³ ìœ  ë°©ë²•ë¡  - ëª©í‘œ(Goal) ê´€ë ¨ íƒ€ì… ì •ì˜
 * ê¸°ì¡´ OKRì˜ Objectiveë¥¼ ëŒ€ì²´í•˜ëŠ” ë‹¨ìˆœí•˜ê³  ìœ ì—°í•œ ëª©í‘œ ì‹œìŠ¤í…œ
 */

// ëª©í‘œ ìƒíƒœ
export enum GoalStatus {
  DRAFT = 'draft',           // ì´ˆì•ˆ
  ACTIVE = 'active',         // ì§„í–‰ ì¤‘
  ON_HOLD = 'on_hold',       // ë³´ë¥˜
  COMPLETED = 'completed',    // ì™„ë£Œ
  CANCELLED = 'cancelled',    // ì·¨ì†Œ
  ARCHIVED = 'archived',      // ë³´ê´€ë¨
}

// ëª©í‘œ ìš°ì„ ìˆœìœ„
export enum GoalPriority {
  LOW = 'low',
  MEDIUM = 'medium',
  HIGH = 'high',
  URGENT = 'urgent',
}

// ëª©í‘œ ìœ í˜•
export enum GoalType {
  PERSONAL = 'personal',     // ê°œì¸ ëª©í‘œ
  TEAM = 'team',            // íŒ€ ëª©í‘œ
  ORGANIZATIONAL = 'organizational', // ì¡°ì§ ëª©í‘œ
  PROJECT = 'project',       // í”„ë¡œì íŠ¸ ëª©í‘œ
}

// ëª©í‘œ ì‹œê°„ ë²”ìœ„
export enum GoalTimeframe {
  SHORT_TERM = 'short_term',   // ë‹¨ê¸° (1-3ê°œì›”)
  MEDIUM_TERM = 'medium_term', // ì¤‘ê¸° (3-12ê°œì›”)
  LONG_TERM = 'long_term',     // ì¥ê¸° (1ë…„ ì´ìƒ)
}

// ê¸°ë³¸ ì‚¬ìš©ì ì •ë³´
export interface GoalUser {
  id: string;
  name: string;
  email: string;
  avatar?: string;
}

// ëª©í‘œ ë©”íŠ¸ë¦­ (ê°„ë‹¨í•œ ì§„í–‰ ì¸¡ì •)
export interface GoalMetric {
  id: string;
  name: string;
  targetValue: number;
  currentValue: number;
  unit: string;
  description?: string;
}

// ë©”ì¸ ëª©í‘œ ì¸í„°í˜ì´ìŠ¤
export interface Goal {
  id: string;
  title: string;
  description?: string;
  status: GoalStatus;
  priority: GoalPriority;
  type: GoalType;
  timeframe: GoalTimeframe;
  
  // ë‚ ì§œ ê´€ë ¨
  startDate?: string;
  targetDate?: string;
  completedAt?: string;
  
  // ì§„í–‰ë¥  ë° ë©”íŠ¸ë¦­
  progress: number; // 0-100
  metrics: GoalMetric[];
  
  // ë¶„ë¥˜ ë° íƒœê·¸
  tags: string[];
  color?: string;
  icon?: string;
  
  // ì†Œìœ ì ë° ê´€ê³„
  ownerId: string;
  owner: GoalUser;
  
  // ì—°ê²°ëœ í”„ë¡œì íŠ¸ ìˆ˜ (ê³„ì‚°ëœ ê°’)
  projectCount: number;
  completedProjectCount: number;
  
  // ë©”íƒ€ë°ì´í„°
  createdAt: string;
  updatedAt: string;
  
  // ê³„ì‚°ëœ ì†ì„±
  isOverdue?: boolean;
  isDueSoon?: boolean;
}

// ëª©í‘œ ìƒì„± DTO
export interface CreateGoalDto {
  title: string;
  description?: string;
  priority?: GoalPriority;
  type?: GoalType;
  timeframe?: GoalTimeframe;
  startDate?: string;
  targetDate?: string;
  tags?: string[];
  color?: string;
  icon?: string;
  metrics?: Omit<GoalMetric, 'id'>[];
}

// ëª©í‘œ ì—…ë°ì´íŠ¸ DTO
export interface UpdateGoalDto {
  title?: string;
  description?: string;
  status?: GoalStatus;
  priority?: GoalPriority;
  type?: GoalType;
  timeframe?: GoalTimeframe;
  startDate?: string;
  targetDate?: string;
  progress?: number;
  tags?: string[];
  color?: string;
  icon?: string;
  metrics?: GoalMetric[];
}

// ëª©í‘œ ì¿¼ë¦¬ DTO
export interface GoalQueryDto {
  page?: number;
  limit?: number;
  status?: GoalStatus;
  priority?: GoalPriority;
  type?: GoalType;
  timeframe?: GoalTimeframe;
  ownerId?: string;
  search?: string;
  sortBy?: string;
  sortOrder?: 'ASC' | 'DESC';
  includeArchived?: boolean;
  tags?: string[];
}

// ëª©í‘œ í†µê³„
export interface GoalStats {
  total: number;
  draft: number;
  active: number;
  onHold: number;
  completed: number;
  cancelled: number;
  overdue: number;
  dueSoon: number;
}

// ëª©í‘œ í™œë™
export interface GoalActivity {
  id: string;
  type: 'created' | 'updated' | 'status_changed' | 'progress_updated' | 'metric_updated';
  description: string;
  userId: string;
  user: GoalUser;
  goalId: string;
  createdAt: string;
  metadata?: { [key: string]: any };
}

// ëª©í‘œ ëŒ€ì‹œë³´ë“œ ë°ì´í„°
export interface GoalDashboard {
  goal: Goal;
  stats: {
    totalProjects: number;
    completedProjects: number;
    totalTasks: number;
    completedTasks: number;
    recentActivity: GoalActivity[];
  };
  recentProjects: SimpleProject[]; // SimpleProject íƒ€ì… (ìˆœí™˜ ì°¸ì¡° ë°©ì§€)
  upcomingMilestones: {
    id: string;
    title: string;
    dueDate: string;
    type: 'goal' | 'project' | 'task';
  }[];
}

// ëª©í‘œ í•„í„° ì„¤ì •
export interface GoalFilterSettings {
  status?: GoalStatus[];
  priority?: GoalPriority[];
  type?: GoalType[];
  timeframe?: GoalTimeframe[];
  ownerIds?: string[];
  tags?: string[];
  dateRange?: {
    start: string;
    end: string;
  };
}

// SimpleProject íƒ€ì… (ê°„ë‹¨í•œ ì¸í„°í˜ì´ìŠ¤ - ìˆœí™˜ ì°¸ì¡° ë°©ì§€)
export interface SimpleProject {
  id: string;
  title: string;
  description?: string;
  status: string;
  progress: number;
  createdAt: string;
  updatedAt: string;
}
</file>

<file path="shared/types/inbox.types.ts">
/**
 * ì›Œí´ë¦¬ ê³ ìœ  ë°©ë²•ë¡  - ìˆ˜ì§‘í•¨(Inbox) ê´€ë ¨ íƒ€ì… ì •ì˜
 * CPER ì›Œí¬í”Œë¡œìš°ì˜ 'ìˆ˜ì§‘(Capture)' ë‹¨ê³„ë¥¼ ë‹´ë‹¹í•˜ëŠ” ì¤‘ì•™ ì§‘ì¤‘ì‹ ì…ë ¥ ì‹œìŠ¤í…œ
 */

// ìˆ˜ì§‘í•¨ í•­ëª© ìœ í˜•
export enum InboxItemType {
  QUICK_NOTE = 'quick_note',     // ë¹ ë¥¸ ë©”ëª¨
  TASK_IDEA = 'task_idea',       // ì—…ë¬´ ì•„ì´ë””ì–´
  PROJECT_IDEA = 'project_idea', // í”„ë¡œì íŠ¸ ì•„ì´ë””ì–´
  GOAL_IDEA = 'goal_idea',       // ëª©í‘œ ì•„ì´ë””ì–´
  MEETING_NOTE = 'meeting_note', // íšŒì˜ ë©”ëª¨
  FEEDBACK = 'feedback',         // í”¼ë“œë°±
  INSPIRATION = 'inspiration',   // ì˜ê°/ì•„ì´ë””ì–´
  REMINDER = 'reminder',         // ë¦¬ë§ˆì¸ë”
  LINK = 'link',                // ë§í¬/ì°¸ì¡°
  FILE = 'file',                // íŒŒì¼ ì²¨ë¶€
}

// ìˆ˜ì§‘í•¨ í•­ëª© ìƒíƒœ
export enum InboxItemStatus {
  CAPTURED = 'captured',     // ìˆ˜ì§‘ë¨ (ì´ˆê¸° ìƒíƒœ)
  CLARIFIED = 'clarified',   // ëª…í™•í™”ë¨
  ORGANIZED = 'organized',   // ì •ë¦¬ë¨ (í”„ë¡œì íŠ¸/ì—…ë¬´ë¡œ ì „í™˜)
  DEFERRED = 'deferred',     // ë¯¸ë£¨ì–´ì§
  DELETED = 'deleted',       // ì‚­ì œë¨
}

// ìˆ˜ì§‘í•¨ í•­ëª© ìš°ì„ ìˆœìœ„
export enum InboxItemPriority {
  LOW = 'low',
  MEDIUM = 'medium', 
  HIGH = 'high',
  URGENT = 'urgent',
}

// ê¸°ë³¸ ì‚¬ìš©ì ì •ë³´
export interface InboxUser {
  id: string;
  name: string;
  email: string;
  avatar?: string;
}

// ì²¨ë¶€ íŒŒì¼ ì •ë³´
export interface InboxAttachment {
  id: string;
  fileName: string;
  fileSize: number;
  fileType: string;
  fileUrl: string;
  thumbnailUrl?: string;
  uploadedAt: string;
}

// ë©”ì¸ ìˆ˜ì§‘í•¨ í•­ëª© ì¸í„°í˜ì´ìŠ¤
export interface InboxItem {
  id: string;
  title: string;
  content?: string;
  type: InboxItemType;
  status: InboxItemStatus;
  priority: InboxItemPriority;
  
  // ìˆ˜ì§‘ ë°©ì‹ ë©”íƒ€ë°ì´í„°
  source: 'manual' | 'email' | 'web_clipper' | 'mobile_app' | 'api' | 'voice_note';
  captureContext?: {
    url?: string;           // ì›¹ì—ì„œ ìˆ˜ì§‘í•œ ê²½ìš° ì›ë³¸ URL
    deviceType?: string;    // ìˆ˜ì§‘ ì‹œ ì‚¬ìš©í•œ ë””ë°”ì´ìŠ¤
    location?: string;      // GPS ìœ„ì¹˜ (ì„ íƒì )
    timestamp: string;      // ìˆ˜ì§‘ ì‹œì 
  };
  
  // ì²¨ë¶€ íŒŒì¼ ë° ë§í¬
  attachments: InboxAttachment[];
  relatedUrls: string[];
  
  // íƒœê·¸ ë° ë¶„ë¥˜
  tags: string[];
  
  // ì²˜ë¦¬ ê²°ê³¼ (ì •ë¦¬ ë‹¨ê³„ì—ì„œ ì„¤ì •)
  processedInto?: {
    type: 'goal' | 'project' | 'task' | 'note';
    id: string;
    title: string;
  };
  
  // ìŠ¤ì¼€ì¤„ë§
  scheduledFor?: string; // ë‚˜ì¤‘ì— ì²˜ë¦¬í•  ë‚ ì§œ
  reminderAt?: string;   // ë¦¬ë§ˆì¸ë” ì‹œê°„
  
  // ì†Œìœ ì ë° ê´€ê³„
  userId: string;
  user: InboxUser;
  
  // ë©”íƒ€ë°ì´í„°
  createdAt: string;
  updatedAt: string;
  processedAt?: string;
  
  // ê³„ì‚°ëœ ì†ì„±
  isOverdue?: boolean;
  daysSinceCapture?: number;
}

// ìˆ˜ì§‘í•¨ í•­ëª© ìƒì„± DTO (ë¹ ë¥¸ ìˆ˜ì§‘ìš©)
export interface CreateInboxItemDto {
  title: string;
  content?: string;
  type?: InboxItemType;
  priority?: InboxItemPriority;
  source?: string;
  tags?: string[];
  relatedUrls?: string[];
  scheduledFor?: string;
  reminderAt?: string;
  attachments?: File[];
}

// ìˆ˜ì§‘í•¨ í•­ëª© ì—…ë°ì´íŠ¸ DTO (ëª…í™•í™” ë‹¨ê³„ìš©)
export interface UpdateInboxItemDto {
  title?: string;
  content?: string;
  type?: InboxItemType;
  status?: InboxItemStatus;
  priority?: InboxItemPriority;
  tags?: string[];
  scheduledFor?: string;
  reminderAt?: string;
  processedInto?: {
    type: 'goal' | 'project' | 'task' | 'note';
    id: string;
    title: string;
  };
}

// ìˆ˜ì§‘í•¨ í•­ëª© ì¿¼ë¦¬ DTO
export interface InboxQueryDto {
  page?: number;
  limit?: number;
  status?: InboxItemStatus;
  type?: InboxItemType;
  priority?: InboxItemPriority;
  source?: string;
  search?: string;
  sortBy?: string;
  sortOrder?: 'ASC' | 'DESC';
  tags?: string[];
  dateRange?: {
    start: string;
    end: string;
  };
}

// ìˆ˜ì§‘í•¨ ë¹ ë¥¸ ì…ë ¥ DTO (ê¸€ë¡œë²Œ ìº¡ì²˜ UIìš©)
export interface QuickCaptureDto {
  content: string;
  type?: InboxItemType;
  priority?: InboxItemPriority;
  tags?: string[];
  scheduledFor?: string;
}

// ìˆ˜ì§‘í•¨ ì¼ê´„ ì²˜ë¦¬ DTO
export interface InboxBatchProcessDto {
  itemIds: string[];
  action: 'clarify' | 'organize' | 'defer' | 'delete';
  data?: {
    scheduledFor?: string;
    processedInto?: {
      type: 'goal' | 'project' | 'task';
      title: string;
      description?: string;
    };
  };
}

// ìˆ˜ì§‘í•¨ í†µê³„
export interface InboxStats {
  total: number;
  captured: number;
  clarified: number;
  organized: number;
  deferred: number;
  overdueItems: number;
  todaysCaptureCount: number;
  averageProcessingTime: number; // ì‹œê°„ ë‹¨ìœ„
}

// ìˆ˜ì§‘í•¨ í™œë™
export interface InboxActivity {
  id: string;
  type: 'captured' | 'clarified' | 'organized' | 'deferred' | 'processed';
  description: string;
  userId: string;
  user: InboxUser;
  itemId: string;
  createdAt: string;
  metadata?: { [key: string]: any };
}

// ìˆ˜ì§‘í•¨ ëŒ€ì‹œë³´ë“œ ë°ì´í„°
export interface InboxDashboard {
  stats: InboxStats;
  recentItems: InboxItem[];
  overdueItems: InboxItem[];
  scheduledItems: InboxItem[];
  recentActivity: InboxActivity[];
  processingInsights: {
    mostCapturedType: InboxItemType;
    averageItemsPerDay: number;
    processingEfficiency: number; // 0-100 (ì²˜ë¦¬ëœ ë¹„ìœ¨)
  };
}

// ìˆ˜ì§‘í•¨ í•„í„° ì„¤ì •
export interface InboxFilterSettings {
  status?: InboxItemStatus[];
  type?: InboxItemType[];
  priority?: InboxItemPriority[];
  source?: string[];
  tags?: string[];
  dateRange?: {
    start: string;
    end: string;
  };
}

// ìˆ˜ì§‘í•¨ ë·° ì„¤ì •
export interface InboxViewSettings {
  groupBy?: 'none' | 'type' | 'priority' | 'status' | 'date';
  sortBy: string;
  sortOrder: 'ASC' | 'DESC';
  filters: InboxFilterSettings;
  showProcessed: boolean;
}
</file>

<file path="shared/types/navigation.types.ts">
/**
 * ì›Œí´ë¦¬ ê³ ìœ  ë°©ë²•ë¡  - ë„¤ë¹„ê²Œì´ì…˜ ê´€ë ¨ íƒ€ì… ì •ì˜
 * 5ê°œ í•µì‹¬ ë„¤ë¹„ê²Œì´ì…˜ í•­ëª©: ì—…ë¬´ â†’ í”„ë¡œì íŠ¸ â†’ ìˆ˜ì§‘í•¨ â†’ ëª©í‘œ â†’ í”„ë¡œí•„
 */

// ë©”ì¸ ë„¤ë¹„ê²Œì´ì…˜ í•­ëª©
export enum NavigationItem {
  TASKS = 'tasks',           // ì—…ë¬´
  PROJECTS = 'projects',     // í”„ë¡œì íŠ¸  
  INBOX = 'inbox',          // ìˆ˜ì§‘í•¨ (ì¤‘ì•™ ìœ„ì¹˜, ê°•ì¡°)
  GOALS = 'goals',          // ëª©í‘œ
  PROFILE = 'profile',      // í”„ë¡œí•„
}

// ë„¤ë¹„ê²Œì´ì…˜ ì•„ì´í…œ ì •ë³´
export interface NavigationItemInfo {
  id: NavigationItem;
  label: string;
  icon: string;
  path: string;
  isCenter?: boolean;       // ì¤‘ì•™ ìœ„ì¹˜ (ìˆ˜ì§‘í•¨ìš©)
  isEmphasized?: boolean;   // ì‹œê°ì  ê°•ì¡°
  badgeCount?: number;      // ë±ƒì§€ ì¹´ìš´íŠ¸
  isActive?: boolean;       // í˜„ì¬ í™œì„±í™” ìƒíƒœ
}

// í”Œë¡œíŒ… ì•¡ì…˜ ë²„íŠ¼ ì„¤ì •
export interface FloatingActionButtonConfig {
  showOnDesktop: boolean;   // ë°ìŠ¤í¬í†±ì—ì„œë§Œ í‘œì‹œ
  showOnMobile: boolean;    // ëª¨ë°”ì¼ì—ì„œ í‘œì‹œ ì—¬ë¶€
  position: 'bottom-right' | 'bottom-left' | 'bottom-center';
  actions: FloatingAction[];
}

// í”Œë¡œíŒ… ì•¡ì…˜ í•­ëª©
export interface FloatingAction {
  id: string;
  label: string;
  icon: string;
  action: 'quick-capture' | 'add-task' | 'add-project' | 'add-goal';
  color?: string;
  shortcut?: string;        // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
}

// ë¹ ë¥¸ ìº¡ì²˜ ëª¨ë‹¬ ì„¤ì •
export interface QuickCaptureConfig {
  placeholder: string;
  showTypeSelector: boolean;
  showPrioritySelector: boolean;
  showTagInput: boolean;
  showScheduleOption: boolean;
  autoFocus: boolean;
}

// ë„¤ë¹„ê²Œì´ì…˜ ìƒíƒœ
export interface NavigationState {
  currentItem: NavigationItem;
  previousItem?: NavigationItem;
  breadcrumbs: BreadcrumbItem[];
  isLoading: boolean;
  error?: string;
}

// ë¸Œë ˆë“œí¬ëŸ¼ ì•„ì´í…œ
export interface BreadcrumbItem {
  label: string;
  path: string;
  icon?: string;
  isClickable: boolean;
}

// ë„¤ë¹„ê²Œì´ì…˜ ì„¤ì •
export interface NavigationSettings {
  layout: 'bottom' | 'sidebar' | 'top';
  showLabels: boolean;
  showBadges: boolean;
  enableSwipeGestures: boolean;
  floatingActionButton: FloatingActionButtonConfig;
  quickCapture: QuickCaptureConfig;
}

// ì›Œí´ë¦¬ ë°©ë²•ë¡  ì›Œí¬í”Œë¡œìš° ë‹¨ê³„
export enum CPERStep {
  CAPTURE = 'capture',   // ìˆ˜ì§‘
  PLAN = 'plan',        // ê³„íš
  EXECUTE = 'execute',  // ì‹¤í–‰
  REVIEW = 'review',    // ê²€í† 
}

// ì›Œí¬í”Œë¡œìš° ìƒíƒœ
export interface WorkflowState {
  currentStep: CPERStep;
  completedSteps: CPERStep[];
  nextStep?: CPERStep;
  progress: number; // 0-100
}

// ì‚¬ìš©ì ì»¨í…ìŠ¤íŠ¸ (ë„¤ë¹„ê²Œì´ì…˜ì—ì„œ ì‚¬ìš©)
export interface UserNavigationContext {
  userId: string;
  preferences: NavigationSettings;
  workflow: WorkflowState;
  quickStats: {
    inboxCount: number;
    todayTasksCount: number;
    activeProjectsCount: number;
    activeGoalsCount: number;
  };
}
</file>

<file path="shared/types/socket.types.ts">
import { Task, Project, Notification, User } from './api.types'

// Socket ì´ë²¤íŠ¸ íƒ€ì… ì •ì˜
export interface SocketEvents {
  // í´ë¼ì´ì–¸íŠ¸ â†’ ì„œë²„ ì´ë²¤íŠ¸
  'join:project': (projectId: string) => void
  'leave:project': (projectId: string) => void
  'join:user': (userId: string) => void
  'leave:user': (userId: string) => void

  // ì„œë²„ â†’ í´ë¼ì´ì–¸íŠ¸ ì´ë²¤íŠ¸
  'task:created': (data: TaskCreatedPayload) => void
  'task:updated': (data: TaskUpdatedPayload) => void
  'task:deleted': (data: TaskDeletedPayload) => void
  'task:assigned': (data: TaskAssignedPayload) => void
  
  'project:updated': (data: ProjectUpdatedPayload) => void
  'project:member:added': (data: ProjectMemberAddedPayload) => void
  'project:member:removed': (data: ProjectMemberRemovedPayload) => void
  
  'notification:new': (data: NotificationPayload) => void
  'notification:read': (data: NotificationReadPayload) => void
  
  'user:online': (data: UserOnlinePayload) => void
  'user:offline': (data: UserOfflinePayload) => void
  
  // ì‹œìŠ¤í…œ ì´ë²¤íŠ¸
  'connection': () => void
  'disconnect': () => void
  'error': (error: SocketError) => void
}

// ì´ë²¤íŠ¸ í˜ì´ë¡œë“œ íƒ€ì…ë“¤
export interface TaskCreatedPayload {
  task: Task
  projectId?: string
  createdBy: User
}

export interface TaskUpdatedPayload {
  task: Task
  changes: Partial<Task>
  updatedBy: User
  projectId?: string
}

export interface TaskDeletedPayload {
  taskId: string
  projectId?: string
  deletedBy: User
}

export interface TaskAssignedPayload {
  task: Task
  assignee: User
  assignedBy: User
  projectId?: string
}

export interface ProjectUpdatedPayload {
  project: Project
  changes: Partial<Project>
  updatedBy: User
}

export interface ProjectMemberAddedPayload {
  project: Project
  member: User
  addedBy: User
}

export interface ProjectMemberRemovedPayload {
  projectId: string
  member: User
  removedBy: User
}

export interface NotificationPayload {
  notification: Notification
}

export interface NotificationReadPayload {
  notificationId: string
  userId: string
  readAt: string
}

export interface UserOnlinePayload {
  userId: string
  user: User
  onlineAt: string
}

export interface UserOfflinePayload {
  userId: string
  user: User
  offlineAt: string
}

export interface SocketError {
  message: string
  code?: string
  details?: any
}

// Socket ì—°ê²° ìƒíƒœ
export interface SocketState {
  isConnected: boolean
  isConnecting: boolean
  error?: string
  onlineUsers: User[]
  joinedProjects: string[]
}

// Socket í´ë¼ì´ì–¸íŠ¸ ì„¤ì •
export interface SocketConfig {
  url: string
  options?: {
    autoConnect?: boolean
    reconnection?: boolean
    reconnectionAttempts?: number
    reconnectionDelay?: number
    timeout?: number
  }
}
</file>

<file path="shared/package.json">
{
  "name": "@workly/shared",
  "version": "1.0.0",
  "description": "ì›Œí´ë¦¬ ê³µìœ  íƒ€ì… ë° ìœ í‹¸ë¦¬í‹°",
  "main": "dist/index.js",
  "types": "dist/index.d.ts",
  "scripts": {
    "build": "tsc",
    "build:watch": "tsc --watch",
    "clean": "rm -rf dist",
    "type-check": "tsc --noEmit"
  },
  "dependencies": {},
  "devDependencies": {
    "typescript": "^5.4.5"
  },
  "files": [
    "dist"
  ]
}
</file>

<file path="shared/tsconfig.json">
{
  "compilerOptions": {
    "target": "ES2020",
    "lib": ["ES2020"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": false,
    "esModuleInterop": true,
    "module": "commonjs",
    "moduleResolution": "node",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "declaration": true,
    "declarationMap": true,
    "outDir": "./dist",
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": [
    "src/**/*",
    "types/**/*",
    "constants/**/*"
  ],
  "exclude": [
    "node_modules",
    "dist"
  ]
}
</file>

<file path=".prettierignore">
# Dependencies
node_modules
*/node_modules

# Build outputs
dist
*/dist
.next
*/.next
build
*/build
coverage
*/coverage

# Generated files
*.d.ts
*.tsbuildinfo

# Lock files
package-lock.json
*/package-lock.json
yarn.lock
*/yarn.lock

# Logs
*.log

# Environment files
.env
.env.*

# Storybook
storybook-static

# Database
*.sqlite
*.db

# Docker
Dockerfile
docker-compose*.yml

# Git
.git
.gitignore

# IDE
.vscode
.idea

# OS
.DS_Store
Thumbs.db
</file>

<file path=".prettierrc">
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 80,
  "tabWidth": 2,
  "useTabs": false,
  "bracketSpacing": true,
  "bracketSameLine": false,
  "arrowParens": "avoid",
  "endOfLine": "lf",
  "quoteProps": "as-needed",
  "jsxSingleQuote": true,
  "proseWrap": "preserve"
}
</file>

<file path="README.md">
# ì›Œí´ë¦¬ (Workly) - ì—…ë¬´ ê´€ë¦¬ í”Œë«í¼

íš¨ìœ¨ì ì¸ ì—…ë¬´ ê´€ë¦¬ì™€ íŒ€ í˜‘ì—…ì„ ìœ„í•œ í˜„ëŒ€ì ì¸ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜

## ğŸš€ ì£¼ìš” ê¸°ëŠ¥

- **ğŸ“Š ì—…ë¬´ ëŒ€ì‹œë³´ë“œ**: ê°œì¸ ë° íŒ€ ì—…ë¬´ í˜„í™©ì„ í•œëˆˆì— íŒŒì•…
- **ğŸ—‚ï¸ í”„ë¡œì íŠ¸ ê´€ë¦¬**: í”„ë¡œì íŠ¸ë³„ ì—…ë¬´ ì¡°ì§í™” ë° ì§„í–‰ ìƒí™© ì¶”ì 
- **ğŸ’¬ ê²Œì‹œíŒ**: íŒ€ ì†Œí†µ ë° ì •ë³´ ê³µìœ 
- **ğŸ”” ì‹¤ì‹œê°„ ì•Œë¦¼**: Socket.io ê¸°ë°˜ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
- **ğŸ‘¥ íŒ€ í˜‘ì—…**: ì‚¬ìš©ì ê¶Œí•œ ê´€ë¦¬ ë° í˜‘ì—… ë„êµ¬
- **ğŸ” ë³´ì•ˆ ì¸ì¦**: JWT ë° Google OAuth í†µí•©

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### Frontend
- **Next.js 14**: React ê¸°ë°˜ í’€ìŠ¤íƒ í”„ë ˆì„ì›Œí¬
- **TypeScript**: íƒ€ì… ì•ˆì „ì„±ì„ ìœ„í•œ ì •ì  íƒ€ì… ì–¸ì–´
- **Tailwind CSS**: ìœ í‹¸ë¦¬í‹° ìš°ì„  CSS í”„ë ˆì„ì›Œí¬
- **Zustand**: ê°€ë²¼ìš´ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬
- **Socket.io Client**: ì‹¤ì‹œê°„ í†µì‹ 

### Backend
- **NestJS**: Node.js ê¸°ë°˜ í™•ì¥ ê°€ëŠ¥í•œ ì„œë²„ í”„ë ˆì„ì›Œí¬
- **TypeORM**: TypeScriptìš© ORM
- **PostgreSQL**: ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤
- **Socket.io**: ì‹¤ì‹œê°„ ì–‘ë°©í–¥ í†µì‹ 
- **JWT**: ì‚¬ìš©ì ì¸ì¦ ë° ê¶Œí•œ ê´€ë¦¬
- **Google OAuth**: ì†Œì…œ ë¡œê·¸ì¸

### DevOps & ì¸í”„ë¼
- **Docker**: ì»¨í…Œì´ë„ˆí™”
- **Redis**: ì„¸ì…˜ ê´€ë¦¬ ë° ìºì‹±
- **AWS S3**: íŒŒì¼ ìŠ¤í† ë¦¬ì§€ (í”„ë¡œë•ì…˜)
- **GitHub Actions**: CI/CD íŒŒì´í”„ë¼ì¸

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
Workly/
â”œâ”€â”€ ğŸ“ frontend/           # Next.js í”„ë¡ íŠ¸ì—”ë“œ
â”œâ”€â”€ ğŸ“ backend/            # NestJS ë°±ì—”ë“œ
â”œâ”€â”€ ğŸ“ shared/             # ê³µìœ  íƒ€ì… ë° ìƒìˆ˜
â”œâ”€â”€ ğŸ“ docs/               # í”„ë¡œì íŠ¸ ë¬¸ì„œ
â”œâ”€â”€ ğŸ“ scripts/            # ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ docker-compose.yml     # ê°œë°œ í™˜ê²½ Docker
â””â”€â”€ README.md
```

ìì„¸í•œ êµ¬ì¡°ëŠ” [PROJECT_STRUCTURE.md](./PROJECT_STRUCTURE.md)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1. ì €ì¥ì†Œ í´ë¡ 
```bash
git clone https://github.com/your-username/workly.git
cd workly
```

### 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
```bash
cp .env.example .env
# .env íŒŒì¼ì„ í¸ì§‘í•˜ì—¬ í•„ìš”í•œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ì„¸ìš”
```

### 3. Dockerë¡œ ê°œë°œ í™˜ê²½ ì‹¤í–‰
```bash
# ëª¨ë“  ì„œë¹„ìŠ¤ ì‹¤í–‰ (ë°ì´í„°ë² ì´ìŠ¤, ë°±ì—”ë“œ, í”„ë¡ íŠ¸ì—”ë“œ)
docker-compose up -d

# ë¡œê·¸ í™•ì¸
docker-compose logs -f
```

### 4. ë¡œì»¬ ê°œë°œ (ì„ íƒì‚¬í•­)

#### ë°ì´í„°ë² ì´ìŠ¤ë§Œ Dockerë¡œ ì‹¤í–‰
```bash
docker-compose up -d postgres redis
```

#### ë°±ì—”ë“œ ì‹¤í–‰
```bash
cd backend
npm install
npm run start:dev
```

#### í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰
```bash
cd frontend
npm install
npm run dev
```

## ğŸ“± ì• í”Œë¦¬ì¼€ì´ì…˜ ì ‘ì†

- **í”„ë¡ íŠ¸ì—”ë“œ**: http://localhost:3000
- **ë°±ì—”ë“œ API**: http://localhost:3001
- **API ë¬¸ì„œ**: http://localhost:3001/api (Swagger)
- **ë°ì´í„°ë² ì´ìŠ¤**: localhost:5432
- **Redis**: localhost:6379
- **MinIO Console**: http://localhost:9001

## ğŸ§ª í…ŒìŠ¤íŠ¸

### ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸
```bash
cd backend
# ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
npm run test

# E2E í…ŒìŠ¤íŠ¸
npm run test:e2e

# í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€
npm run test:cov
```

### í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸
```bash
cd frontend
# Jest í…ŒìŠ¤íŠ¸
npm run test

# Cypress E2E í…ŒìŠ¤íŠ¸
npm run cypress:open
```

## ğŸ“¦ ë°°í¬

### í”„ë¡œë•ì…˜ ë¹Œë“œ
```bash
# ë°±ì—”ë“œ ë¹Œë“œ
cd backend
npm run build

# í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ
cd frontend
npm run build
```

### Docker í”„ë¡œë•ì…˜ ë°°í¬
```bash
docker-compose -f docker-compose.prod.yml up -d
```

## ğŸ”§ ê°œë°œ ê°€ì´ë“œ

### ì½”ë“œ ìŠ¤íƒ€ì¼
- **ESLint**: ì½”ë“œ í’ˆì§ˆ ë° ìŠ¤íƒ€ì¼ ê²€ì‚¬
- **Prettier**: ì½”ë“œ í¬ë§¤íŒ…
- **Husky**: Git í›…ì„ í†µí•œ ìë™ ê²€ì‚¬

### API ê°œë°œ
1. ë°±ì—”ë“œì—ì„œ NestJS ëª¨ë“ˆ ìƒì„±
2. DTO ë° ì—”í‹°í‹° ì •ì˜
3. ì„œë¹„ìŠ¤ ë¡œì§ êµ¬í˜„
4. ì»¨íŠ¸ë¡¤ëŸ¬ API ì—”ë“œí¬ì¸íŠ¸ ìƒì„±
5. í”„ë¡ íŠ¸ì—”ë“œ ì„œë¹„ìŠ¤ ë ˆì´ì–´ì—ì„œ API ì—°ë™

### ì‹¤ì‹œê°„ ê¸°ëŠ¥ ê°œë°œ
1. ë°±ì—”ë“œ WebSocket Gateway ì´ë²¤íŠ¸ ì •ì˜
2. Socket ì´ë²¤íŠ¸ íƒ€ì…ì„ shared/typesì— ì¶”ê°€
3. í”„ë¡ íŠ¸ì—”ë“œì—ì„œ Socket ì—°ê²° ë° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ êµ¬í˜„

## ğŸ¤ ê¸°ì—¬í•˜ê¸°

1. ì´ ì €ì¥ì†Œë¥¼ í¬í¬í•©ë‹ˆë‹¤
2. ìƒˆë¡œìš´ ê¸°ëŠ¥ ë¸Œëœì¹˜ë¥¼ ìƒì„±í•©ë‹ˆë‹¤ (`git checkout -b feature/ìƒˆê¸°ëŠ¥`)
3. ë³€ê²½ì‚¬í•­ì„ ì»¤ë°‹í•©ë‹ˆë‹¤ (`git commit -am 'ìƒˆê¸°ëŠ¥ ì¶”ê°€'`)
4. ë¸Œëœì¹˜ì— í‘¸ì‹œí•©ë‹ˆë‹¤ (`git push origin feature/ìƒˆê¸°ëŠ¥`)
5. Pull Requestë¥¼ ìƒì„±í•©ë‹ˆë‹¤

## ğŸ“„ ë¼ì´ì„¼ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„¼ìŠ¤ í•˜ì— ë°°í¬ë©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [LICENSE](LICENSE) íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.

## ğŸ†˜ ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ê±°ë‚˜ ì§ˆë¬¸ì´ ìˆìœ¼ì‹œë©´:

1. [GitHub Issues](https://github.com/your-username/workly/issues)ì— ì´ìŠˆë¥¼ ë“±ë¡í•´ì£¼ì„¸ìš”
2. [í† ë¡  ê²Œì‹œíŒ](https://github.com/your-username/workly/discussions)ì—ì„œ ì»¤ë®¤ë‹ˆí‹°ì™€ ì†Œí†µí•˜ì„¸ìš”
3. ë¬¸ì„œë¥¼ í™•ì¸í•˜ì„¸ìš”: [docs/](./docs/)

---

**ì›Œí´ë¦¬**ë¡œ ë” íš¨ìœ¨ì ì¸ ì—…ë¬´ ê´€ë¦¬ë¥¼ ì‹œì‘í•˜ì„¸ìš”! ğŸš€
</file>

<file path="vercel.json">
{
  "framework": "nextjs",
  "name": "workly",
  "buildCommand": "npm run build:frontend",
  "devCommand": "npm run dev:frontend",
  "installCommand": "npm install",
  "outputDirectory": "frontend/.next"
}
</file>

<file path="backend/src/config/auth.config.ts">
import { ConfigService } from '@nestjs/config';

export interface AuthConfig {
  jwt: {
    secret: string;
    expiresIn: string;
    refreshExpiresIn: string;
  };
  google: {
    clientId: string;
    clientSecret: string;
    callbackUrl: string;
  };
  bcrypt: {
    saltRounds: number;
  };
  session: {
    secret: string;
    maxAge: number;
  };
}

export const getAuthConfig = (configService: ConfigService): AuthConfig => {
  return {
    jwt: {
      secret: configService.get('JWT_SECRET', 'workly-super-secret-key'),
      expiresIn: configService.get('JWT_EXPIRES_IN', '7d'),
      refreshExpiresIn: configService.get('JWT_REFRESH_EXPIRES_IN', '30d'),
    },
    google: {
      clientId: configService.get('GOOGLE_CLIENT_ID', ''),
      clientSecret: configService.get('GOOGLE_CLIENT_SECRET', ''),
      callbackUrl: configService.get('GOOGLE_CALLBACK_URL', 'http://localhost:8000/auth/google/callback'),
    },
    bcrypt: {
      saltRounds: parseInt(configService.get('BCRYPT_SALT_ROUNDS', '12')),
    },
    session: {
      secret: configService.get('SESSION_SECRET', 'workly-session-secret'),
      maxAge: parseInt(configService.get('SESSION_MAX_AGE', '86400000')), // 24ì‹œê°„
    },
  };
};
</file>

<file path="backend/src/config/database.config.ts">
import { TypeOrmModuleOptions } from '@nestjs/typeorm';
import { ConfigService } from '@nestjs/config';
import { DataSource, DataSourceOptions } from 'typeorm';

// í™˜ê²½ë³€ìˆ˜ë¥¼ ì½ëŠ” í—¬í¼ í•¨ìˆ˜
const getEnvVar = (key: string, defaultValue: string): string => {
  return process.env[key] || defaultValue;
};

const getEnvNumber = (key: string, defaultValue: number): number => {
  const value = process.env[key];
  return value ? parseInt(value, 10) : defaultValue;
};

const isProduction = (): boolean => {
  return process.env.NODE_ENV === 'production';
};

const isDevelopment = (): boolean => {
  return process.env.NODE_ENV === 'development';
};

// ë‹¨ì¼ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • - Single Source of Truth
const createDatabaseConfig = (): DataSourceOptions => ({
  type: 'postgres',
  host: getEnvVar('DATABASE_HOST', 'localhost'),
  port: getEnvNumber('DATABASE_PORT', 5432),
  username: getEnvVar('DATABASE_USERNAME', 'workly'),
  password: getEnvVar('DATABASE_PASSWORD', 'workly123'),
  database: getEnvVar('DATABASE_NAME', 'workly'),
  entities: [__dirname + '/../database/entities/*{.ts,.js}'],
  migrations: [__dirname + '/../database/migrations/*{.ts,.js}'],
  synchronize: isDevelopment(), // ê°œë°œí™˜ê²½ì—ì„œë§Œ true
  logging: isDevelopment(),
  ssl: isProduction() ? {
    rejectUnauthorized: false
  } : false,
  extra: {
    max: 20, // ìµœëŒ€ ì—°ê²° ìˆ˜
    idleTimeoutMillis: 30000, // ìœ íœ´ ì—°ê²° íƒ€ì„ì•„ì›ƒ
    connectionTimeoutMillis: 2000, // ì—°ê²° íƒ€ì„ì•„ì›ƒ
  },
});

// NestJS TypeORM ëª¨ë“ˆìš© ì„¤ì •
export const getDatabaseConfig = (configService: ConfigService): TypeOrmModuleOptions => {
  // ConfigServiceë¥¼ í†µí•´ í™˜ê²½ë³€ìˆ˜ë¥¼ ë‹¤ì‹œ ê²€ì¦
  const baseConfig = createDatabaseConfig();
  
  return {
    ...baseConfig,
    // ConfigServiceë¡œ í•œë²ˆ ë” ê²€ì¦í•˜ì—¬ ë” ì•ˆì „í•˜ê²Œ
    host: configService.get<string>('DATABASE_HOST', getEnvVar('DATABASE_HOST', 'localhost')),
    port: configService.get<number>('DATABASE_PORT', getEnvNumber('DATABASE_PORT', 5432)),
    username: configService.get<string>('DATABASE_USERNAME', getEnvVar('DATABASE_USERNAME', 'workly')),
    password: configService.get<string>('DATABASE_PASSWORD', getEnvVar('DATABASE_PASSWORD', 'workly123')),
    database: configService.get<string>('DATABASE_NAME', getEnvVar('DATABASE_NAME', 'workly')),
    synchronize: configService.get('NODE_ENV') === 'development',
    logging: configService.get('NODE_ENV') === 'development',
  } as TypeOrmModuleOptions;
};

// CLIìš© ë°ì´í„°ì†ŒìŠ¤ ì„¤ì • (ë§ˆì´ê·¸ë ˆì´ì…˜ ë“±) - ë™ì¼í•œ ì„¤ì • ì¬ì‚¬ìš©
export const dataSourceOptions: DataSourceOptions = createDatabaseConfig();

export default new DataSource(dataSourceOptions);
</file>

<file path="backend/src/database/entities/file.entity.ts">
import {
  Entity,
  PrimaryGeneratedColumn,
  Column,
  CreateDateColumn,
  UpdateDateColumn,
  ManyToOne,
  Index,
} from 'typeorm';
import { User } from './user.entity';

@Entity('files')
@Index(['filename'])
@Index(['mimetype'])
@Index(['uploaderId'])
@Index(['createdAt'])
@Index(['entityType', 'entityId'])
export class File {
  @PrimaryGeneratedColumn('uuid')
  id: string;

  @Column()
  filename: string;

  @Column()
  originalName: string;

  @Column()
  mimetype: string;

  @Column({ type: 'bigint' })
  size: number;

  @Column()
  path: string;

  @Column()
  url: string;

  @Column({ nullable: true })
  thumbnailUrl?: string;

  @Column()
  uploaderId: string;

  @Column({ nullable: true })
  entityType?: string; // 'task', 'project', 'user', 'post' ë“±

  @Column({ nullable: true })
  entityId?: string;

  @Column({ default: false })
  isPublic: boolean;

  @Column({ default: false })
  isProcessed: boolean;

  @Column('simple-array', { default: [] })
  tags: string[];

  @CreateDateColumn()
  createdAt: Date;

  @UpdateDateColumn()
  updatedAt: Date;

  // ê´€ê³„ ì„¤ì •
  @ManyToOne(() => User, { eager: true })
  uploader: User;

  // íŒŒì¼ íƒ€ì… í™•ì¸ ë©”ì„œë“œë“¤
  isImage(): boolean {
    return this.mimetype.startsWith('image/');
  }

  isVideo(): boolean {
    return this.mimetype.startsWith('video/');
  }

  isAudio(): boolean {
    return this.mimetype.startsWith('audio/');
  }

  isDocument(): boolean {
    const documentTypes = [
      'application/pdf',
      'application/msword',
      'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
      'application/vnd.ms-excel',
      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
      'application/vnd.ms-powerpoint',
      'application/vnd.openxmlformats-officedocument.presentationml.presentation',
      'text/plain',
      'text/csv',
    ];
    return documentTypes.includes(this.mimetype);
  }

  isArchive(): boolean {
    const archiveTypes = [
      'application/zip',
      'application/x-rar-compressed',
      'application/x-7z-compressed',
      'application/x-tar',
      'application/gzip',
    ];
    return archiveTypes.includes(this.mimetype);
  }

  isCode(): boolean {
    const codeTypes = [
      'text/javascript',
      'text/typescript',
      'text/html',
      'text/css',
      'application/json',
      'text/xml',
      'application/xml',
    ];
    return codeTypes.includes(this.mimetype) || 
           Boolean(this.filename.match(/\.(js|ts|jsx|tsx|html|css|scss|sass|less|json|xml|yaml|yml|md|py|java|c|cpp|h|hpp|cs|php|rb|go|rs|swift|kt)$/i));
  }

  // íŒŒì¼ í¬ê¸°ë¥¼ ì½ê¸° ì‰¬ìš´ í˜•íƒœë¡œ ë°˜í™˜
  getSizeFormatted(): string {
    const units = ['B', 'KB', 'MB', 'GB', 'TB'];
    let size = this.size;
    let unitIndex = 0;

    while (size >= 1024 && unitIndex < units.length - 1) {
      size /= 1024;
      unitIndex++;
    }

    return `${size.toFixed(1)} ${units[unitIndex]}`;
  }

  // íŒŒì¼ í™•ì¥ì ë°˜í™˜
  getExtension(): string {
    const lastDotIndex = this.filename.lastIndexOf('.');
    return lastDotIndex !== -1 ? this.filename.substring(lastDotIndex + 1).toLowerCase() : '';
  }

  // íŒŒì¼ íƒ€ì… ì¹´í…Œê³ ë¦¬ ë°˜í™˜
  getCategory(): string {
    if (this.isImage()) return 'image';
    if (this.isVideo()) return 'video';
    if (this.isAudio()) return 'audio';
    if (this.isDocument()) return 'document';
    if (this.isArchive()) return 'archive';
    if (this.isCode()) return 'code';
    return 'other';
  }

  // ì¸ë„¤ì¼ì´ í•„ìš”í•œì§€ í™•ì¸
  needsThumbnail(): boolean {
    return this.isImage() || this.isVideo() || this.isDocument();
  }

  // ë¯¸ë¦¬ë³´ê¸° ê°€ëŠ¥í•œì§€ í™•ì¸
  isPreviewable(): boolean {
    return this.isImage() || 
           this.isCode() || 
           this.mimetype === 'text/plain' ||
           this.mimetype === 'application/pdf';
  }

  // ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ ì—´ ìˆ˜ ìˆëŠ”ì§€ í™•ì¸
  isViewableInBrowser(): boolean {
    const viewableTypes = [
      'text/plain',
      'text/html',
      'text/css',
      'text/javascript',
      'application/json',
      'application/pdf',
      'image/jpeg',
      'image/png',
      'image/gif',
      'image/svg+xml',
      'video/mp4',
      'video/webm',
      'audio/mp3',
      'audio/wav',
      'audio/ogg',
    ];
    return viewableTypes.includes(this.mimetype);
  }

  // ë‹¤ìš´ë¡œë“œ ê¶Œí•œ í™•ì¸
  canDownload(userId: string): boolean {
    if (this.isPublic) return true;
    return this.uploaderId === userId;
  }

  // ì‚­ì œ ê¶Œí•œ í™•ì¸
  canDelete(userId: string): boolean {
    return this.uploaderId === userId;
  }

  // í¸ì§‘ ê¶Œí•œ í™•ì¸ (ë©”íƒ€ë°ì´í„°ë§Œ)
  canEdit(userId: string): boolean {
    return this.uploaderId === userId;
  }

  // íŒŒì¼ì„ ê³µê°œë¡œ ì„¤ì •
  makePublic(): void {
    this.isPublic = true;
  }

  // íŒŒì¼ì„ ë¹„ê³µê°œë¡œ ì„¤ì •
  makePrivate(): void {
    this.isPublic = false;
  }

  // ì²˜ë¦¬ ì™„ë£Œ í‘œì‹œ (ì¸ë„¤ì¼ ìƒì„± ë“±)
  markAsProcessed(): void {
    this.isProcessed = true;
  }

  // íƒœê·¸ ì¶”ê°€
  addTag(tag: string): void {
    if (!this.tags.includes(tag)) {
      this.tags.push(tag);
    }
  }

  // íƒœê·¸ ì œê±°
  removeTag(tag: string): void {
    this.tags = this.tags.filter(t => t !== tag);
  }

  // ì—”í‹°í‹°ì— ì—°ê²°
  attachTo(entityType: string, entityId: string): void {
    this.entityType = entityType;
    this.entityId = entityId;
  }

  // ì—”í‹°í‹°ì—ì„œ ë¶„ë¦¬
  detach(): void {
    this.entityType = undefined;
    this.entityId = undefined;
  }

  // ì—°ê²°ëœ ì—”í‹°í‹° í™•ì¸
  isAttachedTo(entityType: string, entityId: string): boolean {
    return this.entityType === entityType && this.entityId === entityId;
  }

  // íŒŒì¼ ìœ íš¨ì„± ê²€ì¦
  validate(): string[] {
    const errors: string[] = [];

    if (!this.filename) {
      errors.push('Filename is required');
    }

    if (!this.originalName) {
      errors.push('Original name is required');
    }

    if (!this.mimetype) {
      errors.push('MIME type is required');
    }

    if (this.size <= 0) {
      errors.push('File size must be greater than 0');
    }

    // íŒŒì¼ í¬ê¸° ì œí•œ (ì˜ˆ: 100MB)
    const maxSize = 100 * 1024 * 1024; // 100MB
    if (this.size > maxSize) {
      errors.push(`File size cannot exceed ${maxSize / (1024 * 1024)}MB`);
    }

    return errors;
  }
}
</file>

<file path="backend/src/database/entities/project-member.entity.ts">
import {
  Entity,
  PrimaryGeneratedColumn,
  Column,
  CreateDateColumn,
  ManyToOne,
  Index,
  Unique,
} from 'typeorm';
import { 
  ProjectRole,
  ProjectPermission
} from '@workly/shared';
import { User } from './user.entity';
import { Project } from './project.entity';

@Entity('project_members')
@Unique(['projectId', 'userId'])
@Index(['projectId'])
@Index(['userId'])
@Index(['role'])
export class ProjectMember {
  @PrimaryGeneratedColumn('uuid')
  id: string;

  @Column()
  projectId: string;

  @Column()
  userId: string;

  @Column({
    type: 'enum',
    enum: ProjectRole,
    default: ProjectRole.MEMBER,
  })
  role: ProjectRole;

  @Column('simple-array')
  permissions: ProjectPermission[];

  @CreateDateColumn()
  joinedAt: Date;

  // ê´€ê³„ ì„¤ì •
  @ManyToOne(() => Project, project => project.members, {
    onDelete: 'CASCADE'
  })
  project: Project;

  @ManyToOne(() => User, { eager: true })
  user: User;

  // ê¶Œí•œ í™•ì¸ ë©”ì„œë“œë“¤
  hasPermission(permission: ProjectPermission): boolean {
    return this.permissions.includes(permission);
  }

  isOwner(): boolean {
    return this.role === ProjectRole.OWNER;
  }

  isAdmin(): boolean {
    return this.role === ProjectRole.ADMIN || this.isOwner();
  }

  canManageProject(): boolean {
    return this.isAdmin() || this.hasPermission(ProjectPermission.EDIT_PROJECT);
  }

  canManageMembers(): boolean {
    return this.isAdmin() || this.hasPermission(ProjectPermission.MANAGE_MEMBERS);
  }

  canCreateTasks(): boolean {
    return this.hasPermission(ProjectPermission.CREATE_TASKS);
  }

  canEditTasks(): boolean {
    return this.hasPermission(ProjectPermission.EDIT_TASKS);
  }

  canDeleteTasks(): boolean {
    return this.hasPermission(ProjectPermission.DELETE_TASKS);
  }

  canAssignTasks(): boolean {
    return this.hasPermission(ProjectPermission.ASSIGN_TASKS);
  }

  // ê¶Œí•œ ì„¤ì • ë©”ì„œë“œë“¤
  grantPermission(permission: ProjectPermission): void {
    if (!this.hasPermission(permission)) {
      this.permissions.push(permission);
    }
  }

  revokePermission(permission: ProjectPermission): void {
    this.permissions = this.permissions.filter(p => p !== permission);
  }

  setRole(role: ProjectRole): void {
    this.role = role;
    this.setDefaultPermissions();
  }

  // ì—­í• ë³„ ê¸°ë³¸ ê¶Œí•œ ì„¤ì •
  private setDefaultPermissions(): void {
    switch (this.role) {
      case ProjectRole.OWNER:
        this.permissions = Object.values(ProjectPermission);
        break;
      case ProjectRole.ADMIN:
        this.permissions = [
          ProjectPermission.VIEW_PROJECT,
          ProjectPermission.EDIT_PROJECT,
          ProjectPermission.MANAGE_MEMBERS,
          ProjectPermission.CREATE_TASKS,
          ProjectPermission.EDIT_TASKS,
          ProjectPermission.DELETE_TASKS,
          ProjectPermission.ASSIGN_TASKS,
          ProjectPermission.MANAGE_SETTINGS,
        ];
        break;
      case ProjectRole.MEMBER:
        this.permissions = [
          ProjectPermission.VIEW_PROJECT,
          ProjectPermission.CREATE_TASKS,
          ProjectPermission.EDIT_TASKS,
          ProjectPermission.ASSIGN_TASKS,
        ];
        break;
      case ProjectRole.VIEWER:
        this.permissions = [ProjectPermission.VIEW_PROJECT];
        break;
      default:
        this.permissions = [];
    }
  }
}
</file>

<file path="backend/src/database/entities/project.entity.ts">
import {
  Entity,
  PrimaryGeneratedColumn,
  Column,
  CreateDateColumn,
  UpdateDateColumn,
  ManyToOne,
  OneToMany,
  ManyToMany,
  JoinTable,
  Index,
  BeforeInsert,
  BeforeUpdate,
} from 'typeorm';
import { 
  ProjectStatus, 
  ProjectPriority, 
  ProjectVisibility,
  ProjectSettings,
  ProjectPermission,
  WorkflowStage
} from '@workly/shared';
import { User } from './user.entity';
import { Task } from './task.entity';
import { ProjectMember } from './project-member.entity';

@Entity('projects')
@Index(['title'])
@Index(['status'])
@Index(['priority'])
@Index(['ownerId'])
@Index(['createdAt'])
@Index(['startDate'])
@Index(['endDate'])
@Index(['isArchived'])
export class Project {
  @PrimaryGeneratedColumn('uuid')
  id: string;

  @Column()
  title: string;

  @Column('text', { nullable: true })
  description?: string;

  @Column({
    type: 'enum',
    enum: ProjectStatus,
    default: ProjectStatus.PLANNING,
  })
  status: ProjectStatus;

  @Column({
    type: 'enum',
    enum: ProjectPriority,
    default: ProjectPriority.MEDIUM,
  })
  priority: ProjectPriority;

  @Column({ type: 'date', nullable: true })
  startDate?: Date;

  @Column({ type: 'date', nullable: true })
  endDate?: Date;

  @Column({ type: 'int', default: 0 })
  progress: number;

  @Column({ type: 'decimal', precision: 12, scale: 2, nullable: true })
  budget?: number;

  @Column({ length: 3, nullable: true })
  currency?: string;

  @Column('simple-array', { default: [] })
  tags: string[];

  @Column({ default: false })
  isArchived: boolean;

  @Column({ default: false })
  isTemplate: boolean;

  @Column({ nullable: true })
  templateId?: string;

  @Column({ length: 7, nullable: true })
  color?: string;

  @Column({ nullable: true })
  icon?: string;

  @Column({
    type: 'enum',
    enum: ProjectVisibility,
    default: ProjectVisibility.PRIVATE,
  })
  visibility: ProjectVisibility;

  @Column('jsonb')
  settings: ProjectSettings;

  @Column()
  ownerId: string;

  @CreateDateColumn()
  createdAt: Date;

  @UpdateDateColumn()
  updatedAt: Date;

  // ê´€ê³„ ì„¤ì •
  @ManyToOne(() => User, { eager: true })
  owner: User;

  @OneToMany(() => ProjectMember, member => member.project, { 
    cascade: true, 
    eager: false 
  })
  members: ProjectMember[];

  @OneToMany(() => Task, task => task.project, { 
    cascade: true 
  })
  tasks: Task[];

  // ê³„ì‚°ëœ í•„ë“œë“¤
  tasksCount: number;
  completedTasksCount: number;

  // ê¸°ë³¸ê°’ ì„¤ì •
  @BeforeInsert()
  @BeforeUpdate()
  setDefaultValues() {
    if (!this.settings) {
      this.settings = {
        allowGuestAccess: false,
        requireApprovalForTasks: false,
        enableTimeTracking: true,
        enableBudgetTracking: false,
        enableNotifications: true,
        enableComments: true,
        enableFileAttachments: true,
        defaultTaskPriority: ProjectPriority.MEDIUM,
        workflowStages: [
          {
            id: 'todo',
            name: 'To Do',
            description: 'ì‘ì—… ëŒ€ê¸°',
            color: '#6B7280',
            order: 1,
            isDefault: true,
            isCompleted: false,
          },
          {
            id: 'in-progress',
            name: 'In Progress',
            description: 'ì§„í–‰ ì¤‘',
            color: '#3B82F6',
            order: 2,
            isDefault: false,
            isCompleted: false,
          },
          {
            id: 'review',
            name: 'Review',
            description: 'ê²€í†  ì¤‘',
            color: '#F59E0B',
            order: 3,
            isDefault: false,
            isCompleted: false,
          },
          {
            id: 'completed',
            name: 'Completed',
            description: 'ì™„ë£Œ',
            color: '#10B981',
            order: 4,
            isDefault: false,
            isCompleted: true,
          },
        ] as any[],
      } as ProjectSettings;
    }

    if (!this.tags) {
      this.tags = [];
    }
  }

  // ì§„í–‰ë¥  ê³„ì‚°
  calculateProgress(): number {
    if (!this.tasks || this.tasks.length === 0) {
      return 0;
    }

    const completedTasks = this.tasks.filter(task => 
      task.status === 'completed'
    ).length;

    return Math.round((completedTasks / this.tasks.length) * 100);
  }

  // í”„ë¡œì íŠ¸ ì™„ë£Œ ì²˜ë¦¬
  complete(): void {
    this.status = ProjectStatus.COMPLETED;
    this.progress = 100;
  }

  // í”„ë¡œì íŠ¸ ì¼ì‹œ ì¤‘ë‹¨
  hold(): void {
    this.status = ProjectStatus.ON_HOLD;
  }

  // í”„ë¡œì íŠ¸ ì¬ê°œ
  resume(): void {
    this.status = ProjectStatus.IN_PROGRESS;
  }

  // í”„ë¡œì íŠ¸ ì·¨ì†Œ
  cancel(): void {
    this.status = ProjectStatus.CANCELLED;
  }

  // í”„ë¡œì íŠ¸ ì•„ì¹´ì´ë¸Œ
  archive(): void {
    this.isArchived = true;
    this.status = ProjectStatus.ARCHIVED;
  }

  // í”„ë¡œì íŠ¸ ë³µì›
  unarchive(): void {
    this.isArchived = false;
    if (this.status === ProjectStatus.ARCHIVED) {
      this.status = ProjectStatus.PLANNING;
    }
  }

  // ë§ˆê°ì¼ ì²´í¬
  isOverdue(): boolean {
    if (!this.endDate) return false;
    return new Date() > this.endDate && this.status !== ProjectStatus.COMPLETED;
  }

  // ê³§ ë§ˆê°ë˜ëŠ”ì§€ ì²´í¬ (7ì¼ ì´ë‚´)
  isDueSoon(): boolean {
    if (!this.endDate) return false;
    const sevenDaysFromNow = new Date();
    sevenDaysFromNow.setDate(sevenDaysFromNow.getDate() + 7);
    return this.endDate <= sevenDaysFromNow && !this.isOverdue();
  }

  // í”„ë¡œì íŠ¸ ê¸°ê°„ ê³„ì‚° (ì¼ ë‹¨ìœ„)
  getDuration(): number | null {
    if (!this.startDate || !this.endDate) return null;
    const diffTime = Math.abs(this.endDate.getTime() - this.startDate.getTime());
    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
  }

  // ê¶Œí•œ í™•ì¸ ë©”ì„œë“œë“¤
  isOwner(userId: string): boolean {
    return this.ownerId === userId;
  }

  isMember(userId: string): boolean {
    return this.members?.some(member => member.userId === userId) || false;
  }

  canView(userId: string): boolean {
    if (this.visibility === ProjectVisibility.PUBLIC) return true;
    return this.isOwner(userId) || this.isMember(userId);
  }

  canEdit(userId: string): boolean {
    if (this.isOwner(userId)) return true;
    const member = this.members?.find(m => m.userId === userId);
    return member?.permissions?.includes(ProjectPermission.EDIT_PROJECT) || false;
  }

  canManageMembers(userId: string): boolean {
    if (this.isOwner(userId)) return true;
    const member = this.members?.find(m => m.userId === userId);
    return member?.permissions?.includes(ProjectPermission.MANAGE_MEMBERS) || false;
  }

  // JSON ì§ë ¬í™”ì‹œ ê³„ì‚°ëœ í•„ë“œ í¬í•¨
  toJSON() {
    return {
      ...this,
      tasksCount: this.tasks?.length || 0,
      completedTasksCount: this.tasks?.filter(t => t.status === 'completed').length || 0,
    };
  }
}
</file>

<file path="backend/src/database/entities/task-dependency.entity.ts">
import {
  Entity,
  PrimaryGeneratedColumn,
  Column,
  CreateDateColumn,
  ManyToOne,
  Index,
  Unique,
} from 'typeorm';
import { DependencyType } from '@workly/shared';
import { Task } from './task.entity';

@Entity('task_dependencies')
@Unique(['dependentTaskId', 'dependsOnTaskId'])
@Index(['dependentTaskId'])
@Index(['dependsOnTaskId'])
@Index(['type'])
export class TaskDependency {
  @PrimaryGeneratedColumn('uuid')
  id: string;

  @Column()
  dependentTaskId: string;

  @Column()
  dependsOnTaskId: string;

  @Column({
    type: 'enum',
    enum: DependencyType,
    default: DependencyType.BLOCKS,
  })
  type: DependencyType;

  @CreateDateColumn()
  createdAt: Date;

  // ê´€ê³„ ì„¤ì •
  @ManyToOne(() => Task, task => task.dependencies, {
    onDelete: 'CASCADE'
  })
  dependentTask: Task;

  @ManyToOne(() => Task, task => task.dependents, {
    onDelete: 'CASCADE'
  })
  dependsOnTask: Task;

  // ì°¨ë‹¨ ê´€ê³„ì¸ì§€ í™•ì¸
  isBlocking(): boolean {
    return this.type === DependencyType.BLOCKS;
  }

  // ì°¨ë‹¨ë¨ ê´€ê³„ì¸ì§€ í™•ì¸
  isBlockedBy(): boolean {
    return this.type === DependencyType.BLOCKED_BY;
  }

  // ê´€ë ¨ë¨ ê´€ê³„ì¸ì§€ í™•ì¸
  isRelated(): boolean {
    return this.type === DependencyType.RELATES_TO;
  }

  // ì¤‘ë³µ ê´€ê³„ì¸ì§€ í™•ì¸
  isDuplicate(): boolean {
    return this.type === DependencyType.DUPLICATES || 
           this.type === DependencyType.DUPLICATED_BY;
  }

  // ìˆœí™˜ ì˜ì¡´ì„± ì²´í¬ë¥¼ ìœ„í•œ ë©”ì„œë“œ
  static async checkCircularDependency(
    dependentTaskId: string,
    dependsOnTaskId: string
  ): Promise<boolean> {
    // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì¬ê·€ì ìœ¼ë¡œ ì˜ì¡´ì„± ì²´ì¸ì„ í™•ì¸í•˜ì—¬ ìˆœí™˜ ì°¸ì¡° ê²€ì‚¬
    // ì—¬ê¸°ì„œëŠ” ê°„ë‹¨íˆ ì§ì ‘ì ì¸ ìˆœí™˜ë§Œ ì²´í¬
    return dependentTaskId === dependsOnTaskId;
  }

  // ì˜ì¡´ì„± ìœ íš¨ì„± ê²€ì‚¬
  async isValid(): Promise<boolean> {
    // ìê¸° ìì‹ ì— ëŒ€í•œ ì˜ì¡´ì„± ì²´í¬
    if (this.dependentTaskId === this.dependsOnTaskId) {
      return false;
    }

    // ìˆœí™˜ ì˜ì¡´ì„± ì²´í¬
    const hasCircularDependency = await TaskDependency.checkCircularDependency(
      this.dependentTaskId,
      this.dependsOnTaskId
    );

    return !hasCircularDependency;
  }
}
</file>

<file path="backend/src/database/entities/time-entry.entity.ts">
import {
  Entity,
  PrimaryGeneratedColumn,
  Column,
  CreateDateColumn,
  UpdateDateColumn,
  ManyToOne,
  Index,
  BeforeInsert,
  BeforeUpdate,
} from 'typeorm';
import { Task } from './task.entity';
import { User } from './user.entity';

@Entity('time_entries')
@Index(['taskId'])
@Index(['userId'])
@Index(['startTime'])
@Index(['billable'])
@Index(['approved'])
@Index(['createdAt'])
export class TimeEntry {
  @PrimaryGeneratedColumn('uuid')
  id: string;

  @Column('text', { nullable: true })
  description?: string;

  @Column({ type: 'int' })
  duration: number; // ë¶„ ë‹¨ìœ„

  @Column({ type: 'timestamp' })
  startTime: Date;

  @Column({ type: 'timestamp', nullable: true })
  endTime?: Date;

  @Column()
  taskId: string;

  @Column()
  userId: string;

  @Column({ default: false })
  billable: boolean;

  @Column({ default: false })
  approved: boolean;

  @Column({ nullable: true })
  approvedBy?: string;

  @Column({ type: 'timestamp', nullable: true })
  approvedAt?: Date;

  @CreateDateColumn()
  createdAt: Date;

  @UpdateDateColumn()
  updatedAt: Date;

  // ê´€ê³„ ì„¤ì •
  @ManyToOne(() => Task, task => task.timeEntries, {
    onDelete: 'CASCADE'
  })
  task: Task;

  @ManyToOne(() => User, { eager: true })
  user: User;

  @ManyToOne(() => User, { eager: false })
  approver?: User;

  // ì‹œê°„ ê³„ì‚° ë° ê²€ì¦
  @BeforeInsert()
  @BeforeUpdate()
  calculateDuration() {
    if (this.endTime && this.startTime) {
      const diffMs = this.endTime.getTime() - this.startTime.getTime();
      this.duration = Math.round(diffMs / (1000 * 60)); // ë¶„ ë‹¨ìœ„ë¡œ ë³€í™˜
    }
  }

  // ì‹œê°„ì„ ì‹œê°„:ë¶„ í˜•ì‹ìœ¼ë¡œ ë°˜í™˜
  getDurationFormatted(): string {
    const hours = Math.floor(this.duration / 60);
    const minutes = this.duration % 60;
    return `${hours}:${minutes.toString().padStart(2, '0')}`;
  }

  // ì‹œê°„ì„ ì†Œìˆ˜ì  í˜•íƒœë¡œ ë°˜í™˜ (ì˜ˆ: 1.5ì‹œê°„)
  getDurationInHours(): number {
    return this.duration / 60;
  }

  // ì§„í–‰ ì¤‘ì¸ ì‹œê°„ ì¶”ì ì¸ì§€ í™•ì¸
  isRunning(): boolean {
    return this.startTime !== null && this.endTime === null;
  }

  // ì™„ë£Œëœ ì‹œê°„ ì¶”ì ì¸ì§€ í™•ì¸
  isCompleted(): boolean {
    return this.startTime !== null && this.endTime !== null;
  }

  // ì‹œê°„ ì¶”ì  ì‹œì‘
  start(): void {
    this.startTime = new Date();
    this.endTime = undefined;
  }

  // ì‹œê°„ ì¶”ì  ì¤‘ì§€
  stop(): void {
    if (this.isRunning()) {
      this.endTime = new Date();
      this.calculateDuration();
    }
  }

  // ì‹œê°„ ì¶”ì  ì¬ì‹œì‘
  restart(): void {
    this.start();
  }

  // ìˆ˜ë™ìœ¼ë¡œ ì‹œê°„ ì„¤ì •
  setDuration(minutes: number): void {
    this.duration = Math.max(0, minutes);
    
    // endTimeì„ durationì— ë§ì¶° ê³„ì‚°
    if (this.startTime) {
      this.endTime = new Date(this.startTime.getTime() + (minutes * 60 * 1000));
    }
  }

  // ì²­êµ¬ ê°€ëŠ¥ ìƒíƒœ ì„¤ì •
  markAsBillable(): void {
    this.billable = true;
  }

  // ì²­êµ¬ ë¶ˆê°€ëŠ¥ ìƒíƒœ ì„¤ì •
  markAsNonBillable(): void {
    this.billable = false;
  }

  // ìŠ¹ì¸ ì²˜ë¦¬
  approve(approverId: string): void {
    this.approved = true;
    this.approvedBy = approverId;
    this.approvedAt = new Date();
  }

  // ìŠ¹ì¸ ì·¨ì†Œ
  reject(): void {
    this.approved = false;
    this.approvedBy = undefined;
    this.approvedAt = undefined;
  }

  // ì†Œìœ ì í™•ì¸
  belongsTo(userId: string): boolean {
    return this.userId === userId;
  }

  // í¸ì§‘ ê°€ëŠ¥í•œì§€ í™•ì¸
  canEdit(userId: string): boolean {
    return this.belongsTo(userId) && !this.approved;
  }

  // ì‚­ì œ ê°€ëŠ¥í•œì§€ í™•ì¸
  canDelete(userId: string): boolean {
    return this.belongsTo(userId) && !this.approved;
  }

  // ìŠ¹ì¸ ê°€ëŠ¥í•œì§€ í™•ì¸ (íƒœìŠ¤í¬ ë‹´ë‹¹ìë‚˜ í”„ë¡œì íŠ¸ ë§¤ë‹ˆì €)
  canApprove(userId: string): boolean {
    // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” í”„ë¡œì íŠ¸ ê¶Œí•œì„ í™•ì¸í•´ì•¼ í•¨
    return !this.belongsTo(userId) && !this.approved;
  }

  // ìœ íš¨ì„± ê²€ì¦
  validate(): string[] {
    const errors: string[] = [];

    if (this.duration <= 0) {
      errors.push('Duration must be greater than 0');
    }

    if (this.duration > 24 * 60) { // 24ì‹œê°„ ì´ˆê³¼
      errors.push('Duration cannot exceed 24 hours');
    }

    if (this.endTime && this.startTime && this.endTime <= this.startTime) {
      errors.push('End time must be after start time');
    }

    const now = new Date();
    if (this.startTime > now) {
      errors.push('Start time cannot be in the future');
    }

    if (this.endTime && this.endTime > now) {
      errors.push('End time cannot be in the future');
    }

    return errors;
  }

  // ì¤‘ë³µ ì‹œê°„ ì²´í¬ (ê°™ì€ ì‚¬ìš©ìì˜ ê²¹ì¹˜ëŠ” ì‹œê°„ëŒ€)
  static async checkOverlap(
    userId: string,
    startTime: Date,
    endTime: Date,
    excludeId?: string
  ): Promise<boolean> {
    // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ë¡œ ê²¹ì¹˜ëŠ” ì‹œê°„ëŒ€ í™•ì¸
    // ì—¬ê¸°ì„œëŠ” ê¸°ë³¸ êµ¬ì¡°ë§Œ ì œê³µ
    return false;
  }
}
</file>

<file path="backend/src/modules/admin/controllers/users-admin.controller.ts">
import { 
  Controller, 
  Get, 
  Post,
  Put,
  Delete,
  Param,
  Body,
  Query,
  UseGuards, 
  UseInterceptors,
  ParseUUIDPipe,
} from '@nestjs/common';
import { AdminGuard } from '../guards/admin.guard';
import { PermissionsGuard } from '../guards/permissions.guard';
import { RequirePermissions } from '../decorators/permissions.decorator';
import { AuditLog } from '../decorators/audit-log.decorator';
import { AuditLogInterceptor } from '../interceptors/audit-log.interceptor';
import { AdminService } from '../services/admin.service';
import { AdminRole } from '../../../types/admin.types';

class UpdateUserRoleDto {
  role: AdminRole;
  permissions: string[];
}

@Controller('api/admin/users')
@UseGuards(AdminGuard, PermissionsGuard)
@UseInterceptors(AuditLogInterceptor)
export class UsersAdminController {
  constructor(private adminService: AdminService) {}

  @Get()
  @RequirePermissions('admin:users:read')
  @AuditLog('ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ')
  async getAllUsers(
    @Query('page') page?: number,
    @Query('limit') limit?: number,
    @Query('search') search?: string,
    @Query('role') role?: AdminRole,
  ) {
    const result = await this.adminService.getAllUsers({
      page: page ? Number(page) : 1,
      limit: limit ? Number(limit) : 20,
      search,
      role,
    });

    return {
      success: true,
      data: result.data,
      pagination: {
        total: result.total,
        page: result.page,
        limit: result.limit,
        totalPages: result.totalPages,
      },
    };
  }

  @Get(':id')
  @RequirePermissions('admin:users:read')
  @AuditLog('ì‚¬ìš©ì ìƒì„¸ ì¡°íšŒ')
  async getUserById(@Param('id', ParseUUIDPipe) id: string) {
    const user = await this.adminService.getUserById(id);

    return {
      success: true,
      data: user,
    };
  }

  @Put(':id/role')
  @RequirePermissions('admin:users:update', 'admin:roles:manage')
  @AuditLog('ì‚¬ìš©ì ê¶Œí•œ ë³€ê²½')
  async updateUserRole(
    @Param('id', ParseUUIDPipe) id: string,
    @Body() updateRoleDto: UpdateUserRoleDto,
  ) {
    const user = await this.adminService.updateUserAdminRole(
      id,
      updateRoleDto.role,
      updateRoleDto.permissions,
    );

    return {
      success: true,
      data: user,
      message: 'ì‚¬ìš©ì ê¶Œí•œì´ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤',
    };
  }

  @Delete(':id')
  @RequirePermissions('admin:users:delete')
  @AuditLog('ì‚¬ìš©ì ì‚­ì œ')
  async deleteUser(@Param('id', ParseUUIDPipe) id: string) {
    await this.adminService.deleteUser(id);

    return {
      success: true,
      message: 'ì‚¬ìš©ìê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤',
    };
  }
}
</file>

<file path="backend/src/modules/admin/guards/admin.guard.ts">
import { Injectable, CanActivate, ExecutionContext, ForbiddenException } from '@nestjs/common';

@Injectable()
export class AdminGuard implements CanActivate {
  canActivate(context: ExecutionContext): boolean {
    const request = context.switchToHttp().getRequest();
    const user = request.user;
    const authHeader = request.headers.authorization;

    // ê°œë°œ í™˜ê²½ì—ì„œ dev-admin-token ì²˜ë¦¬
    if (process.env.NODE_ENV === 'development' && authHeader === 'Bearer dev-admin-token') {
      // ê°œë°œìš© ê´€ë¦¬ì ì‚¬ìš©ì ê°ì²´ ìƒì„±
      request.user = {
        id: 'dev-admin-1',
        name: 'ì›Œí´ë¦¬ ê°œë°œ ê´€ë¦¬ì',
        email: 'dev-admin@workly.com',
        adminRole: 'super_admin',
        adminPermissions: ['*'],
        isAdminUser: () => true,
        updateLastAdminLogin: () => {},
        lastAdminLogin: new Date(),
        twoFactorEnabled: false,
        allowedIPs: ['*']
      };
      return true;
    }

    if (!user) {
      throw new ForbiddenException('ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤');
    }

    // ë””ë²„ê¹…ì„ ìœ„í•œ ë¡œê·¸ ì¶”ê°€
    console.log('Admin Guard - User data:', {
      id: user.id,
      email: user.email,
      name: user.name,
      adminRole: user.adminRole,
      adminPermissions: user.adminPermissions,
      isAdminUser: typeof user.isAdminUser === 'function' ? user.isAdminUser() : 'not a function'
    });

    if (!user.isAdminUser()) {
      throw new ForbiddenException('ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤');
    }

    // ë§ˆì§€ë§‰ ì–´ë“œë¯¼ ë¡œê·¸ì¸ ì‹œê°„ ì—…ë°ì´íŠ¸
    user.updateLastAdminLogin();

    return true;
  }
}
</file>

<file path="backend/src/modules/admin/guards/permissions.guard.ts">
import { Injectable, CanActivate, ExecutionContext, ForbiddenException } from '@nestjs/common';
import { Reflector } from '@nestjs/core';
import { PERMISSIONS_KEY } from '../decorators/permissions.decorator';

@Injectable()
export class PermissionsGuard implements CanActivate {
  constructor(private reflector: Reflector) {}

  canActivate(context: ExecutionContext): boolean {
    const requiredPermissions = this.reflector.getAllAndOverride<string[]>(
      PERMISSIONS_KEY,
      [context.getHandler(), context.getClass()]
    );

    if (!requiredPermissions) {
      return true;
    }

    const request = context.switchToHttp().getRequest();
    const user = request.user;
    const authHeader = request.headers.authorization;

    if (!user) {
      throw new ForbiddenException('ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤');
    }

    // ê°œë°œ í™˜ê²½ì—ì„œ dev-admin-tokenì€ ëª¨ë“  ê¶Œí•œ í—ˆìš©
    if (process.env.NODE_ENV === 'development' && authHeader === 'Bearer dev-admin-token') {
      return true;
    }

    const hasPermission = user.hasAllAdminPermissions && user.hasAllAdminPermissions(requiredPermissions);

    if (!hasPermission) {
      throw new ForbiddenException(
        `ë‹¤ìŒ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤: ${requiredPermissions.join(', ')}`
      );
    }

    return true;
  }
}
</file>

<file path="backend/src/modules/admin/services/admin.service.ts">
import { Injectable, NotFoundException, BadRequestException } from '@nestjs/common';
import { InjectRepository } from '@nestjs/typeorm';
import { Repository } from 'typeorm';
import { User } from '../../../database/entities/user.entity';
import { Project } from '../../../database/entities/project.entity';
import { Task } from '../../../database/entities/task.entity';
import { AdminRole, TaskStatus } from '../../../types/admin.types';

@Injectable()
export class AdminService {
  constructor(
    @InjectRepository(User)
    private userRepository: Repository<User>,
    @InjectRepository(Project)
    private projectRepository: Repository<Project>,
    @InjectRepository(Task)
    private taskRepository: Repository<Task>,
  ) {}

  // Dashboard Statistics
  async getDashboardStats() {
    const [
      totalUsers,
      totalProjects,
      totalTasks,
      activeUsersCount,
      completedTasksCount,
    ] = await Promise.all([
      this.userRepository.count(),
      this.projectRepository.count(),
      this.taskRepository.count(),
      this.userRepository.count({
        where: {
          lastLoginAt: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000) as any, // 7ì¼ ì´ë‚´
        },
      }),
      this.taskRepository.count({
        where: { status: TaskStatus.COMPLETED },
      }),
    ]);

    return {
      totalUsers,
      totalProjects,
      totalTasks,
      activeUsersCount,
      completedTasksCount,
      completionRate: totalTasks > 0 ? (completedTasksCount / totalTasks) * 100 : 0,
    };
  }

  // User Management
  async getAllUsers(options: {
    page?: number;
    limit?: number;
    search?: string;
    role?: AdminRole;
  }) {
    const { page = 1, limit = 20, search, role } = options;
    const skip = (page - 1) * limit;

    const queryBuilder = this.userRepository.createQueryBuilder('user');

    if (search) {
      queryBuilder.andWhere(
        '(user.name ILIKE :search OR user.email ILIKE :search)',
        { search: `%${search}%` }
      );
    }

    if (role) {
      queryBuilder.andWhere('user.adminRole = :role', { role });
    }

    queryBuilder
      .orderBy('user.createdAt', 'DESC')
      .skip(skip)
      .take(limit);

    const [users, total] = await queryBuilder.getManyAndCount();

    return {
      data: users,
      total,
      page,
      limit,
      totalPages: Math.ceil(total / limit),
    };
  }

  async getUserById(id: string): Promise<User> {
    const user = await this.userRepository.findOne({
      where: { id },
      relations: ['projects', 'tasks'],
    });

    if (!user) {
      throw new NotFoundException('ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
    }

    return user;
  }

  async updateUserAdminRole(userId: string, role: AdminRole, permissions: string[]) {
    const user = await this.getUserById(userId);

    user.adminRole = role;
    user.adminPermissions = permissions;

    return this.userRepository.save(user);
  }

  async deleteUser(id: string): Promise<void> {
    const user = await this.getUserById(id);
    
    if (user.isSuperAdmin()) {
      throw new BadRequestException('ìŠˆí¼ ê´€ë¦¬ìëŠ” ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
    }

    await this.userRepository.remove(user);
  }

  // Project Management
  async getAllProjects(options: {
    page?: number;
    limit?: number;
    search?: string;
    status?: string;
  }) {
    const { page = 1, limit = 20, search, status } = options;
    const skip = (page - 1) * limit;

    const queryBuilder = this.projectRepository.createQueryBuilder('project')
      .leftJoinAndSelect('project.owner', 'owner')
      .leftJoinAndSelect('project.members', 'members');

    if (search) {
      queryBuilder.andWhere(
        '(project.name ILIKE :search OR project.description ILIKE :search)',
        { search: `%${search}%` }
      );
    }

    if (status) {
      queryBuilder.andWhere('project.status = :status', { status });
    }

    queryBuilder
      .orderBy('project.createdAt', 'DESC')
      .skip(skip)
      .take(limit);

    const [projects, total] = await queryBuilder.getManyAndCount();

    return {
      data: projects,
      total,
      page,
      limit,
      totalPages: Math.ceil(total / limit),
    };
  }

  async getProjectById(id: string): Promise<Project> {
    const project = await this.projectRepository.findOne({
      where: { id },
      relations: ['owner', 'members', 'tasks'],
    });

    if (!project) {
      throw new NotFoundException('í”„ë¡œì íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
    }

    return project;
  }

  async deleteProject(id: string): Promise<void> {
    const project = await this.getProjectById(id);
    await this.projectRepository.remove(project);
  }

  // System Settings
  async getSystemSettings() {
    // ì‹œìŠ¤í…œ ì„¤ì •ì€ ì¶”í›„ ë³„ë„ ì—”í‹°í‹°ë¡œ ê´€ë¦¬í•  ì˜ˆì •
    return {
      maintenanceMode: false,
      registrationEnabled: true,
      maxUsersPerProject: 50,
      maxProjectsPerUser: 10,
      emailNotifications: true,
    };
  }

  async updateSystemSettings(settings: Record<string, any>) {
    // ì‹œìŠ¤í…œ ì„¤ì • ì—…ë°ì´íŠ¸ ë¡œì§
    return settings;
  }
}
</file>

<file path="backend/src/modules/auth/decorators/roles.decorator.ts">
import { SetMetadata } from '@nestjs/common';
import { UserRole } from '@workly/shared';

export const ROLES_KEY = 'roles';
export const Roles = (...roles: UserRole[]) => SetMetadata(ROLES_KEY, roles);
</file>

<file path="backend/src/modules/auth/guards/roles.guard.ts">
import { Injectable, CanActivate, ExecutionContext } from '@nestjs/common';
import { Reflector } from '@nestjs/core';
import { UserRole } from '@workly/shared';
import { ROLES_KEY } from '../decorators/roles.decorator';

@Injectable()
export class RolesGuard implements CanActivate {
  constructor(private reflector: Reflector) {}

  canActivate(context: ExecutionContext): boolean {
    const requiredRoles = this.reflector.getAllAndOverride<UserRole[]>(
      ROLES_KEY,
      [context.getHandler(), context.getClass()],
    );

    if (!requiredRoles) {
      return true;
    }

    const { user } = context.switchToHttp().getRequest();
    
    if (!user) {
      return false;
    }

    return requiredRoles.some((role) => user.role === role);
  }
}
</file>

<file path="backend/src/modules/auth/guards/throttle.guard.ts">
import { Injectable, ExecutionContext } from '@nestjs/common';
import { ThrottlerGuard, ThrottlerException } from '@nestjs/throttler';

@Injectable()
export class CustomThrottlerGuard extends ThrottlerGuard {
  protected async throwThrottlingException(context: ExecutionContext): Promise<void> {
    throw new ThrottlerException('ìš”ì²­ì´ ë„ˆë¬´ ë§ìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
  }

  protected async getTracker(req: Record<string, any>): Promise<string> {
    // IP ì£¼ì†Œì™€ ì‚¬ìš©ì IDë¥¼ ì¡°í•©í•˜ì—¬ ë” ì •í™•í•œ ì¶”ì 
    const userId = req.user?.sub || 'anonymous';
    const ip = req.ip || req.connection.remoteAddress || 'unknown';
    return `${ip}-${userId}`;
  }
}
</file>

<file path="backend/src/modules/auth/middleware/audit.middleware.ts">
import { Injectable, NestMiddleware, Logger } from '@nestjs/common';
import { Request, Response, NextFunction } from 'express';

@Injectable()
export class AuditMiddleware implements NestMiddleware {
  private readonly logger = new Logger(AuditMiddleware.name);

  use(req: Request, res: Response, next: NextFunction) {
    const { method, originalUrl, ip, headers } = req;
    const userAgent = headers['user-agent'] || '';
    const user = req['user'];
    
    // ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ/ì¸ì¦ ê´€ë ¨ ì—”ë“œí¬ì¸íŠ¸ë§Œ ê°ì‚¬ ë¡œê·¸ ê¸°ë¡
    const auditPaths = ['/auth/login', '/auth/logout', '/auth/register', '/auth/refresh'];
    const shouldAudit = auditPaths.some(path => originalUrl.includes(path));

    if (shouldAudit) {
      const startTime = Date.now();

      // ì‘ë‹µ ì™„ë£Œ ì‹œ ë¡œê·¸ ê¸°ë¡
      res.on('finish', () => {
        const { statusCode } = res;
        const contentLength = res.get('content-length');
        const responseTime = Date.now() - startTime;

        const logData = {
          method,
          url: originalUrl,
          statusCode,
          contentLength,
          responseTime: `${responseTime}ms`,
          ip,
          userAgent,
          userId: (user as any)?.id || 'anonymous',
          timestamp: new Date().toISOString(),
        };

        if (statusCode >= 400) {
          this.logger.warn(`ì¸ì¦ ì‹¤íŒ¨: ${JSON.stringify(logData)}`);
        } else {
          this.logger.log(`ì¸ì¦ ì„±ê³µ: ${JSON.stringify(logData)}`);
        }
      });
    }

    next();
  }
}
</file>

<file path="backend/src/modules/auth/auth.controller.ts">
import {
  Controller,
  Post,
  Body,
  UseGuards,
  Get,
  Req,
  Res,
  HttpCode,
  HttpStatus,
} from '@nestjs/common';
import { Request, Response } from 'express';
import { Throttle } from '@nestjs/throttler';
import {
  ApiTags,
  ApiOperation,
  ApiResponse,
  ApiBearerAuth,
  ApiBody,
} from '@nestjs/swagger';

import { AuthService } from './auth.service';
import { JwtAuthGuard } from './guards/jwt-auth.guard';
import { GoogleAuthGuard } from './guards/google-auth.guard';
import { Public } from './decorators/public.decorator';
import { CurrentUser } from './decorators/current-user.decorator';
import { User } from '../../database/entities/user.entity';
import {
  LoginDto,
  RegisterDto,
  GoogleAuthDto,
  RefreshTokenDto,
  ChangePasswordDto,
  ForgotPasswordDto,
  ResetPasswordDto,
  VerifyEmailDto,
  ResendVerificationDto,
} from './dto/auth.dto';
import {
  AuthResponse,
  LoginResponse,
} from '@workly/shared';

@ApiTags('Authentication')
@Controller('auth')
export class AuthController {
  constructor(private readonly authService: AuthService) {}

  @Public()
  @Post('login')
  @HttpCode(HttpStatus.OK)
  @Throttle({ default: { limit: 5, ttl: 60000 } }) // 1ë¶„ì— 5ë²ˆ ì‹œë„ ì œí•œ
  @ApiOperation({ summary: 'ë¡œê·¸ì¸' })
  @ApiBody({ type: LoginDto })
  @ApiResponse({
    status: 200,
    description: 'ë¡œê·¸ì¸ ì„±ê³µ',
  })
  @ApiResponse({
    status: 401,
    description: 'ì¸ì¦ ì‹¤íŒ¨',
  })
  @ApiResponse({
    status: 429,
    description: 'ë„ˆë¬´ ë§ì€ ë¡œê·¸ì¸ ì‹œë„',
  })
  async login(@Body() loginDto: LoginDto): Promise<LoginResponse> {
    return this.authService.login(loginDto);
  }

  @Public()
  @Post('register')
  @Throttle({ default: { limit: 3, ttl: 3600000 } }) // 1ì‹œê°„ì— 3ë²ˆ ê°€ì… ì œí•œ
  @ApiOperation({ summary: 'íšŒì›ê°€ì…' })
  @ApiBody({ type: RegisterDto })
  @ApiResponse({
    status: 201,
    description: 'íšŒì›ê°€ì… ì„±ê³µ',
  })
  @ApiResponse({
    status: 409,
    description: 'ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼',
  })
  @ApiResponse({
    status: 429,
    description: 'ë„ˆë¬´ ë§ì€ ê°€ì… ì‹œë„',
  })
  async register(@Body() registerDto: RegisterDto): Promise<AuthResponse> {
    return this.authService.register(registerDto);
  }

  @Public()
  @Get('google')
  @UseGuards(GoogleAuthGuard)
  @ApiOperation({ summary: 'Google OAuth ë¡œê·¸ì¸ ì‹œì‘' })
  @ApiResponse({
    status: 302,
    description: 'Google OAuth í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸',
  })
  async googleAuth(@Req() req: Request) {
    // Google OAuth ì‹œì‘ - Passportê°€ ì²˜ë¦¬
  }

  @Public()
  @Get('google/callback')
  @UseGuards(GoogleAuthGuard)
  @ApiOperation({ summary: 'Google OAuth ì½œë°±' })
  @ApiResponse({
    status: 200,
    description: 'Google ë¡œê·¸ì¸ ì„±ê³µ',
  })
  async googleAuthRedirect(@Req() req: Request, @Res() res: Response) {
    try {
      const user = req.user as User;
      
      // JWT í† í° ìƒì„±
      const tokens = await this.authService.generateTokensForUser(user);
      
      const frontendUrl = process.env.FRONTEND_URL || 'http://localhost:3001';
      const redirectUrl = `${frontendUrl}/auth/callback?` +
        `status=success&` +
        `accessToken=${encodeURIComponent(tokens.accessToken)}&` +
        `refreshToken=${encodeURIComponent(tokens.refreshToken)}`;
      
      res.redirect(redirectUrl);
    } catch (error) {
      const frontendUrl = process.env.FRONTEND_URL || 'http://localhost:3001';
      const redirectUrl = `${frontendUrl}/auth/callback?status=error&message=${encodeURIComponent('ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.')}`;
      
      res.redirect(redirectUrl);
    }
  }

  @Public()
  @Post('google/login')
  @ApiOperation({ summary: 'Google OAuth í† í°ìœ¼ë¡œ ë¡œê·¸ì¸' })
  @ApiBody({ type: GoogleAuthDto })
  @ApiResponse({
    status: 200,
    description: 'Google ë¡œê·¸ì¸ ì„±ê³µ',
  })
  async googleLogin(@Body() googleAuthDto: GoogleAuthDto): Promise<LoginResponse> {
    return this.authService.googleLogin(googleAuthDto);
  }

  @Public()
  @Post('refresh')
  @HttpCode(HttpStatus.OK)
  @ApiOperation({ summary: 'í† í° ìƒˆë¡œê³ ì¹¨' })
  @ApiBody({ type: RefreshTokenDto })
  @ApiResponse({
    status: 200,
    description: 'í† í° ìƒˆë¡œê³ ì¹¨ ì„±ê³µ',
  })
  async refreshToken(@Body() refreshTokenDto: RefreshTokenDto): Promise<{ accessToken: string }> {
    return this.authService.refreshToken(refreshTokenDto);
  }

  @UseGuards(JwtAuthGuard)
  @Post('change-password')
  @ApiBearerAuth()
  @ApiOperation({ summary: 'ë¹„ë°€ë²ˆí˜¸ ë³€ê²½' })
  @ApiBody({ type: ChangePasswordDto })
  @ApiResponse({
    status: 200,
    description: 'ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì„±ê³µ',
  })
  async changePassword(
    @CurrentUser('id') userId: string,
    @Body() changePasswordDto: ChangePasswordDto,
  ): Promise<AuthResponse> {
    return this.authService.changePassword(userId, changePasswordDto);
  }

  @Public()
  @Post('forgot-password')
  @HttpCode(HttpStatus.OK)
  @ApiOperation({ summary: 'ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ìš”ì²­' })
  @ApiBody({ type: ForgotPasswordDto })
  @ApiResponse({
    status: 200,
    description: 'ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ì´ë©”ì¼ ë°œì†¡',
  })
  async forgotPassword(@Body() forgotPasswordDto: ForgotPasswordDto): Promise<AuthResponse> {
    return this.authService.forgotPassword(forgotPasswordDto);
  }

  @Public()
  @Post('reset-password')
  @ApiOperation({ summary: 'ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •' })
  @ApiBody({ type: ResetPasswordDto })
  @ApiResponse({
    status: 200,
    description: 'ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ì„±ê³µ',
  })
  async resetPassword(@Body() resetPasswordDto: ResetPasswordDto): Promise<AuthResponse> {
    return this.authService.resetPassword(resetPasswordDto);
  }

  @Public()
  @Post('verify-email')
  @ApiOperation({ summary: 'ì´ë©”ì¼ ì¸ì¦' })
  @ApiBody({ type: VerifyEmailDto })
  @ApiResponse({
    status: 200,
    description: 'ì´ë©”ì¼ ì¸ì¦ ì„±ê³µ',
  })
  async verifyEmail(@Body() verifyEmailDto: VerifyEmailDto): Promise<AuthResponse> {
    return this.authService.verifyEmail(verifyEmailDto);
  }

  @Public()
  @Post('resend-verification')
  @HttpCode(HttpStatus.OK)
  @ApiOperation({ summary: 'ì¸ì¦ ì´ë©”ì¼ ì¬ë°œì†¡' })
  @ApiBody({ type: ResendVerificationDto })
  @ApiResponse({
    status: 200,
    description: 'ì¸ì¦ ì´ë©”ì¼ ì¬ë°œì†¡ ì™„ë£Œ',
  })
  async resendVerification(@Body() resendVerificationDto: ResendVerificationDto): Promise<AuthResponse> {
    return this.authService.resendVerification(resendVerificationDto);
  }

  @UseGuards(JwtAuthGuard)
  @Get('profile')
  @ApiBearerAuth()
  @ApiOperation({ summary: 'í˜„ì¬ ì‚¬ìš©ì í”„ë¡œí•„ ì¡°íšŒ' })
  @ApiResponse({
    status: 200,
    description: 'ì‚¬ìš©ì í”„ë¡œí•„ ì¡°íšŒ ì„±ê³µ',
  })
  async getProfile(@CurrentUser() user: User) {
    return {
      user,
    };
  }

  @UseGuards(JwtAuthGuard)
  @Post('logout')
  @HttpCode(HttpStatus.OK)
  @ApiBearerAuth()
  @ApiOperation({ summary: 'ë¡œê·¸ì•„ì›ƒ' })
  @ApiResponse({
    status: 200,
    description: 'ë¡œê·¸ì•„ì›ƒ ì„±ê³µ',
  })
  async logout(@CurrentUser() user: User): Promise<AuthResponse> {
    // TODO: ë¦¬í”„ë ˆì‹œ í† í° ë¬´íš¨í™” ë¡œì§ êµ¬í˜„
    return {
      message: 'ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.',
    };
  }
}
</file>

<file path="backend/src/modules/auth/auth.module.ts">
import { Module } from '@nestjs/common';
import { TypeOrmModule } from '@nestjs/typeorm';
import { JwtModule } from '@nestjs/jwt';
import { PassportModule } from '@nestjs/passport';
import { ConfigModule, ConfigService } from '@nestjs/config';

import { AuthService } from './auth.service';
import { AuthController } from './auth.controller';
import { User } from '../../database/entities/user.entity';
import { JwtStrategy } from './strategies/jwt.strategy';
import { GoogleStrategy } from './strategies/google.strategy';
import { getAuthConfig } from '../../config/auth.config';

@Module({
  imports: [
    TypeOrmModule.forFeature([User]),
    PassportModule.register({ defaultStrategy: 'jwt' }),
    JwtModule.registerAsync({
      imports: [ConfigModule],
      useFactory: async (configService: ConfigService) => {
        const authConfig = getAuthConfig(configService);
        return {
          secret: authConfig.jwt.secret,
          signOptions: {
            expiresIn: authConfig.jwt.expiresIn,
          },
        };
      },
      inject: [ConfigService],
    }),
    ConfigModule,
  ],
  controllers: [AuthController],
  providers: [AuthService, JwtStrategy, GoogleStrategy],
  exports: [AuthService, PassportModule, JwtModule],
})
export class AuthModule {}
</file>

<file path="backend/src/modules/projects/dto/project.dto.ts">
import {
  IsString,
  IsOptional,
  IsEnum,
  IsUUID,
  IsArray,
  IsNumber,
  IsObject,
  IsDateString,
  IsBoolean,
  Min,
  MaxLength,
  MinLength,
  IsInt,
  IsDecimal,
} from 'class-validator';
import { Type, Transform } from 'class-transformer';
import { ApiProperty, ApiPropertyOptional } from '@nestjs/swagger';
import { 
  ProjectStatus, 
  ProjectPriority, 
  ProjectVisibility,
  ProjectMemberRole 
} from '@workly/shared';

export class CreateProjectDto {
  @ApiProperty({
    description: 'í”„ë¡œì íŠ¸ ì œëª©',
    example: 'ì›Œí´ë¦¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ',
    minLength: 1,
    maxLength: 100,
  })
  @IsString()
  @MinLength(1, { message: 'í”„ë¡œì íŠ¸ ì œëª©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.' })
  @MaxLength(100, { message: 'í”„ë¡œì íŠ¸ ì œëª©ì€ 100ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  title: string;

  @ApiPropertyOptional({
    description: 'í”„ë¡œì íŠ¸ ì„¤ëª…',
    example: 'ì‚¬ìš©ì ì¹œí™”ì ì¸ ì—…ë¬´ ê´€ë¦¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•©ë‹ˆë‹¤.',
  })
  @IsOptional()
  @IsString()
  @MaxLength(1000, { message: 'í”„ë¡œì íŠ¸ ì„¤ëª…ì€ 1000ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  description?: string;

  @ApiPropertyOptional({
    description: 'í”„ë¡œì íŠ¸ ìš°ì„ ìˆœìœ„',
    enum: ProjectPriority,
    example: 'high',
  })
  @IsOptional()
  @IsEnum(ProjectPriority, { message: 'ìœ íš¨í•œ ìš°ì„ ìˆœìœ„ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.' })
  priority?: ProjectPriority;

  @ApiPropertyOptional({
    description: 'í”„ë¡œì íŠ¸ ì‹œì‘ì¼',
    example: '2024-01-15T00:00:00.000Z',
  })
  @IsOptional()
  @IsDateString({}, { message: 'ìœ íš¨í•œ ë‚ ì§œ í˜•ì‹ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.' })
  startDate?: string;

  @ApiPropertyOptional({
    description: 'í”„ë¡œì íŠ¸ ì¢…ë£Œì¼',
    example: '2024-06-30T23:59:59.000Z',
  })
  @IsOptional()
  @IsDateString({}, { message: 'ìœ íš¨í•œ ë‚ ì§œ í˜•ì‹ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.' })
  endDate?: string;

  @ApiPropertyOptional({
    description: 'í”„ë¡œì íŠ¸ ì˜ˆì‚°',
    example: 50000.00,
    minimum: 0,
  })
  @IsOptional()
  @IsNumber({ maxDecimalPlaces: 2 }, { message: 'ìœ íš¨í•œ ê¸ˆì•¡ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.' })
  @Min(0, { message: 'ì˜ˆì‚°ì€ 0 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.' })
  budget?: number;

  @ApiPropertyOptional({
    description: 'í†µí™” ë‹¨ìœ„',
    example: 'KRW',
    maxLength: 3,
  })
  @IsOptional()
  @IsString()
  @MaxLength(3, { message: 'í†µí™” ì½”ë“œëŠ” 3ìì—¬ì•¼ í•©ë‹ˆë‹¤.' })
  currency?: string;

  @ApiPropertyOptional({
    description: 'í”„ë¡œì íŠ¸ íƒœê·¸',
    example: ['web', 'react', 'nestjs'],
    type: [String],
  })
  @IsOptional()
  @IsArray()
  @IsString({ each: true })
  tags?: string[];

  @ApiPropertyOptional({
    description: 'í”„ë¡œì íŠ¸ ìƒ‰ìƒ (HEX)',
    example: '#3B82F6',
    maxLength: 7,
  })
  @IsOptional()
  @IsString()
  @MaxLength(7, { message: 'ìƒ‰ìƒì€ 7ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  color?: string;

  @ApiPropertyOptional({
    description: 'í”„ë¡œì íŠ¸ ì•„ì´ì½˜',
    example: 'folder',
  })
  @IsOptional()
  @IsString()
  @MaxLength(50, { message: 'ì•„ì´ì½˜ ì´ë¦„ì€ 50ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  icon?: string;

  @ApiPropertyOptional({
    description: 'í”„ë¡œì íŠ¸ ê°€ì‹œì„±',
    enum: ProjectVisibility,
    example: 'team',
  })
  @IsOptional()
  @IsEnum(ProjectVisibility, { message: 'ìœ íš¨í•œ ê°€ì‹œì„±ì„ ì„ íƒí•´ì£¼ì„¸ìš”.' })
  visibility?: ProjectVisibility;

  @ApiPropertyOptional({
    description: 'í”„ë¡œì íŠ¸ ì„¤ì •',
    example: { enableTimeTracking: true, enableComments: true },
  })
  @IsOptional()
  @IsObject()
  settings?: Record<string, any>;
}

export class UpdateProjectDto {
  @ApiPropertyOptional({
    description: 'í”„ë¡œì íŠ¸ ì œëª©',
    example: 'ì›Œí´ë¦¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ v2',
    maxLength: 100,
  })
  @IsOptional()
  @IsString()
  @MaxLength(100, { message: 'í”„ë¡œì íŠ¸ ì œëª©ì€ 100ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  title?: string;

  @ApiPropertyOptional({
    description: 'í”„ë¡œì íŠ¸ ì„¤ëª…',
    example: 'í–¥ìƒëœ ê¸°ëŠ¥ì„ í¬í•¨í•œ ì—…ë¬´ ê´€ë¦¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.',
  })
  @IsOptional()
  @IsString()
  @MaxLength(1000, { message: 'í”„ë¡œì íŠ¸ ì„¤ëª…ì€ 1000ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  description?: string;

  @ApiPropertyOptional({
    description: 'í”„ë¡œì íŠ¸ ìƒíƒœ',
    enum: ProjectStatus,
    example: 'in_progress',
  })
  @IsOptional()
  @IsEnum(ProjectStatus, { message: 'ìœ íš¨í•œ í”„ë¡œì íŠ¸ ìƒíƒœë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.' })
  status?: ProjectStatus;

  @ApiPropertyOptional({
    description: 'í”„ë¡œì íŠ¸ ìš°ì„ ìˆœìœ„',
    enum: ProjectPriority,
    example: 'medium',
  })
  @IsOptional()
  @IsEnum(ProjectPriority, { message: 'ìœ íš¨í•œ ìš°ì„ ìˆœìœ„ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.' })
  priority?: ProjectPriority;

  @ApiPropertyOptional({
    description: 'í”„ë¡œì íŠ¸ ì‹œì‘ì¼',
    example: '2024-01-20T00:00:00.000Z',
  })
  @IsOptional()
  @IsDateString({}, { message: 'ìœ íš¨í•œ ë‚ ì§œ í˜•ì‹ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.' })
  startDate?: string;

  @ApiPropertyOptional({
    description: 'í”„ë¡œì íŠ¸ ì¢…ë£Œì¼',
    example: '2024-07-31T23:59:59.000Z',
  })
  @IsOptional()
  @IsDateString({}, { message: 'ìœ íš¨í•œ ë‚ ì§œ í˜•ì‹ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.' })
  endDate?: string;

  @ApiPropertyOptional({
    description: 'í”„ë¡œì íŠ¸ ì˜ˆì‚°',
    example: 75000.00,
    minimum: 0,
  })
  @IsOptional()
  @IsNumber({ maxDecimalPlaces: 2 }, { message: 'ìœ íš¨í•œ ê¸ˆì•¡ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.' })
  @Min(0, { message: 'ì˜ˆì‚°ì€ 0 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.' })
  budget?: number;

  @ApiPropertyOptional({
    description: 'í†µí™” ë‹¨ìœ„',
    example: 'USD',
  })
  @IsOptional()
  @IsString()
  @MaxLength(3, { message: 'í†µí™” ì½”ë“œëŠ” 3ìì—¬ì•¼ í•©ë‹ˆë‹¤.' })
  currency?: string;

  @ApiPropertyOptional({
    description: 'í”„ë¡œì íŠ¸ íƒœê·¸',
    example: ['web', 'react', 'nestjs', 'typescript'],
    type: [String],
  })
  @IsOptional()
  @IsArray()
  @IsString({ each: true })
  tags?: string[];

  @ApiPropertyOptional({
    description: 'í”„ë¡œì íŠ¸ ìƒ‰ìƒ (HEX)',
    example: '#10B981',
  })
  @IsOptional()
  @IsString()
  @MaxLength(7, { message: 'ìƒ‰ìƒì€ 7ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  color?: string;

  @ApiPropertyOptional({
    description: 'í”„ë¡œì íŠ¸ ì•„ì´ì½˜',
    example: 'rocket',
  })
  @IsOptional()
  @IsString()
  @MaxLength(50, { message: 'ì•„ì´ì½˜ ì´ë¦„ì€ 50ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  icon?: string;

  @ApiPropertyOptional({
    description: 'í”„ë¡œì íŠ¸ ê°€ì‹œì„±',
    enum: ProjectVisibility,
    example: 'public',
  })
  @IsOptional()
  @IsEnum(ProjectVisibility, { message: 'ìœ íš¨í•œ ê°€ì‹œì„±ì„ ì„ íƒí•´ì£¼ì„¸ìš”.' })
  visibility?: ProjectVisibility;

  @ApiPropertyOptional({
    description: 'í”„ë¡œì íŠ¸ ì„¤ì •',
    example: { enableTimeTracking: false, enableFileAttachments: true },
  })
  @IsOptional()
  @IsObject()
  settings?: Record<string, any>;
}

export class ProjectQueryDto {
  @ApiPropertyOptional({
    description: 'í˜ì´ì§€ ë²ˆí˜¸',
    example: 1,
    minimum: 1,
  })
  @IsOptional()
  @Type(() => Number)
  @IsInt({ message: 'í˜ì´ì§€ ë²ˆí˜¸ëŠ” ì •ìˆ˜ì—¬ì•¼ í•©ë‹ˆë‹¤.' })
  @Min(1, { message: 'í˜ì´ì§€ ë²ˆí˜¸ëŠ” 1 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.' })
  page?: number;

  @ApiPropertyOptional({
    description: 'í˜ì´ì§€ í¬ê¸°',
    example: 20,
    minimum: 1,
    maximum: 100,
  })
  @IsOptional()
  @Type(() => Number)
  @IsInt({ message: 'í˜ì´ì§€ í¬ê¸°ëŠ” ì •ìˆ˜ì—¬ì•¼ í•©ë‹ˆë‹¤.' })
  @Min(1, { message: 'í˜ì´ì§€ í¬ê¸°ëŠ” 1 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.' })
  limit?: number;

  @ApiPropertyOptional({
    description: 'í”„ë¡œì íŠ¸ ìƒíƒœ í•„í„°',
    enum: ProjectStatus,
    example: 'in_progress',
  })
  @IsOptional()
  @IsEnum(ProjectStatus, { message: 'ìœ íš¨í•œ í”„ë¡œì íŠ¸ ìƒíƒœë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.' })
  status?: ProjectStatus;

  @ApiPropertyOptional({
    description: 'ìš°ì„ ìˆœìœ„ í•„í„°',
    enum: ProjectPriority,
    example: 'high',
  })
  @IsOptional()
  @IsEnum(ProjectPriority, { message: 'ìœ íš¨í•œ ìš°ì„ ìˆœìœ„ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.' })
  priority?: ProjectPriority;

  @ApiPropertyOptional({
    description: 'ê°€ì‹œì„± í•„í„°',
    enum: ProjectVisibility,
    example: 'team',
  })
  @IsOptional()
  @IsEnum(ProjectVisibility, { message: 'ìœ íš¨í•œ ê°€ì‹œì„±ì„ ì„ íƒí•´ì£¼ì„¸ìš”.' })
  visibility?: ProjectVisibility;

  @ApiPropertyOptional({
    description: 'ê²€ìƒ‰ì–´ (ì œëª©, ì„¤ëª…, íƒœê·¸)',
    example: 'ì›Œí´ë¦¬',
  })
  @IsOptional()
  @IsString()
  @MaxLength(100, { message: 'ê²€ìƒ‰ì–´ëŠ” 100ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  search?: string;

  @ApiPropertyOptional({
    description: 'ì •ë ¬ ê¸°ì¤€',
    example: 'updatedAt',
    enum: ['createdAt', 'updatedAt', 'title', 'priority', 'startDate', 'endDate'],
  })
  @IsOptional()
  @IsString()
  sortBy?: string;

  @ApiPropertyOptional({
    description: 'ì •ë ¬ ìˆœì„œ',
    example: 'DESC',
    enum: ['ASC', 'DESC'],
  })
  @IsOptional()
  @IsEnum(['ASC', 'DESC'], { message: 'ì •ë ¬ ìˆœì„œëŠ” ASC ë˜ëŠ” DESCì—¬ì•¼ í•©ë‹ˆë‹¤.' })
  sortOrder?: 'ASC' | 'DESC';

  @ApiPropertyOptional({
    description: 'ì•„ì¹´ì´ë¸Œëœ í”„ë¡œì íŠ¸ í¬í•¨ ì—¬ë¶€',
    example: false,
  })
  @IsOptional()
  @Transform(({ value }) => value === 'true' || value === true)
  @IsBoolean()
  includeArchived?: boolean;

  @ApiPropertyOptional({
    description: 'íƒœê·¸ í•„í„° ëª©ë¡',
    example: ['web', 'react'],
    type: [String],
  })
  @IsOptional()
  @Transform(({ value }) => Array.isArray(value) ? value : [value])
  @IsArray()
  @IsString({ each: true })
  tags?: string[];
}

export class AddProjectMemberDto {
  @ApiProperty({
    description: 'ì¶”ê°€í•  ì‚¬ìš©ì ID',
    example: '123e4567-e89b-12d3-a456-426614174000',
  })
  @IsUUID(4, { message: 'ìœ íš¨í•œ ì‚¬ìš©ì IDë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.' })
  userId: string;

  @ApiPropertyOptional({
    description: 'ë©¤ë²„ ì—­í• ',
    enum: ProjectMemberRole,
    example: 'member',
  })
  @IsOptional()
  @IsEnum(ProjectMemberRole, { message: 'ìœ íš¨í•œ ë©¤ë²„ ì—­í• ì„ ì„ íƒí•´ì£¼ì„¸ìš”.' })
  role?: ProjectMemberRole;

  @ApiPropertyOptional({
    description: 'ë©¤ë²„ ê¶Œí•œ ëª©ë¡',
    example: ['read', 'write', 'manage_tasks'],
    type: [String],
  })
  @IsOptional()
  @IsArray()
  @IsString({ each: true })
  permissions?: string[];
}
</file>

<file path="backend/src/modules/projects/projects.controller.ts">
import {
  Controller,
  Get,
  Post,
  Body,
  Patch,
  Param,
  Delete,
  Query,
  UseGuards,
  ParseUUIDPipe,
  HttpCode,
  HttpStatus,
} from '@nestjs/common';
import { Throttle } from '@nestjs/throttler';
import {
  ApiTags,
  ApiOperation,
  ApiResponse,
  ApiBearerAuth,
  ApiParam,
  ApiQuery,
} from '@nestjs/swagger';

import { ProjectsService } from './projects.service';
import { JwtAuthGuard } from '../auth/guards/jwt-auth.guard';
import { CurrentUser } from '../auth/decorators/current-user.decorator';
import { 
  CreateProjectDto, 
  UpdateProjectDto, 
  ProjectQueryDto,
  AddProjectMemberDto 
} from './dto/project.dto';
import { ProjectStatus } from '@workly/shared';

@ApiTags('Projects')
@Controller('projects')
@UseGuards(JwtAuthGuard)
@ApiBearerAuth()
export class ProjectsController {
  constructor(private readonly projectsService: ProjectsService) {}

  // í”„ë¡œì íŠ¸ ìƒì„±
  @Post()
  @Throttle({ default: { limit: 10, ttl: 60000 } }) // 1ë¶„ì— 10ê°œ ìƒì„± ì œí•œ
  @ApiOperation({ summary: 'ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±' })
  @ApiResponse({
    status: 201,
    description: 'í”„ë¡œì íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.',
  })
  @ApiResponse({
    status: 400,
    description: 'ì˜ëª»ëœ ìš”ì²­ ë°ì´í„°',
  })
  async create(
    @Body() createProjectDto: CreateProjectDto,
    @CurrentUser('id') userId: string,
  ) {
    return this.projectsService.create(createProjectDto, userId);
  }

  // í”„ë¡œì íŠ¸ ëª©ë¡ ì¡°íšŒ
  @Get()
  @ApiOperation({ summary: 'í”„ë¡œì íŠ¸ ëª©ë¡ ì¡°íšŒ (í•„í„°ë§, ì •ë ¬, í˜ì´ì§• ì§€ì›)' })
  @ApiResponse({
    status: 200,
    description: 'í”„ë¡œì íŠ¸ ëª©ë¡ì´ ì„±ê³µì ìœ¼ë¡œ ì¡°íšŒë˜ì—ˆìŠµë‹ˆë‹¤.',
  })
  async findAll(
    @Query() query: ProjectQueryDto,
    @CurrentUser('id') userId: string,
  ) {
    return this.projectsService.findAll(query, userId);
  }

  // ë‚´ í”„ë¡œì íŠ¸ ì¡°íšŒ
  @Get('my')
  @ApiOperation({ summary: 'ë‚´ í”„ë¡œì íŠ¸ ëª©ë¡ ì¡°íšŒ' })
  @ApiResponse({
    status: 200,
    description: 'ë‚´ í”„ë¡œì íŠ¸ ëª©ë¡ì´ ì„±ê³µì ìœ¼ë¡œ ì¡°íšŒë˜ì—ˆìŠµë‹ˆë‹¤.',
  })
  async getMyProjects(@CurrentUser('id') userId: string) {
    return this.projectsService.getMyProjects(userId);
  }

  // íŠ¹ì • í”„ë¡œì íŠ¸ ì¡°íšŒ
  @Get(':id')
  @ApiOperation({ summary: 'íŠ¹ì • í”„ë¡œì íŠ¸ ìƒì„¸ ì¡°íšŒ' })
  @ApiParam({
    name: 'id',
    description: 'í”„ë¡œì íŠ¸ ID',
    type: 'string',
    format: 'uuid',
  })
  @ApiResponse({
    status: 200,
    description: 'í”„ë¡œì íŠ¸ ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ì¡°íšŒë˜ì—ˆìŠµë‹ˆë‹¤.',
  })
  @ApiResponse({
    status: 404,
    description: 'í”„ë¡œì íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
  })
  @ApiResponse({
    status: 403,
    description: 'í”„ë¡œì íŠ¸ì— ì ‘ê·¼í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.',
  })
  async findOne(
    @Param('id', ParseUUIDPipe) id: string,
    @CurrentUser('id') userId: string,
  ) {
    return this.projectsService.findOne(id, userId);
  }

  // í”„ë¡œì íŠ¸ ì •ë³´ ìˆ˜ì •
  @Patch(':id')
  @ApiOperation({ summary: 'í”„ë¡œì íŠ¸ ì •ë³´ ìˆ˜ì •' })
  @ApiParam({
    name: 'id',
    description: 'í”„ë¡œì íŠ¸ ID',
    type: 'string',
    format: 'uuid',
  })
  @ApiResponse({
    status: 200,
    description: 'í”„ë¡œì íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.',
  })
  @ApiResponse({
    status: 404,
    description: 'í”„ë¡œì íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
  })
  @ApiResponse({
    status: 403,
    description: 'í”„ë¡œì íŠ¸ë¥¼ ìˆ˜ì •í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.',
  })
  async update(
    @Param('id', ParseUUIDPipe) id: string,
    @Body() updateProjectDto: UpdateProjectDto,
    @CurrentUser('id') userId: string,
  ) {
    return this.projectsService.update(id, updateProjectDto, userId);
  }

  // í”„ë¡œì íŠ¸ ìƒíƒœ ë³€ê²½
  @Patch(':id/status')
  @HttpCode(HttpStatus.OK)
  @ApiOperation({ summary: 'í”„ë¡œì íŠ¸ ìƒíƒœ ë³€ê²½' })
  @ApiParam({
    name: 'id',
    description: 'í”„ë¡œì íŠ¸ ID',
    type: 'string',
    format: 'uuid',
  })
  @ApiQuery({
    name: 'status',
    description: 'ìƒˆë¡œìš´ ìƒíƒœ',
    enum: ProjectStatus,
  })
  @ApiResponse({
    status: 200,
    description: 'í”„ë¡œì íŠ¸ ìƒíƒœê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.',
  })
  async updateStatus(
    @Param('id', ParseUUIDPipe) id: string,
    @Query('status') status: ProjectStatus,
    @CurrentUser('id') userId: string,
  ) {
    return this.projectsService.updateStatus(id, status, userId);
  }

  // í”„ë¡œì íŠ¸ ë©¤ë²„ ì¶”ê°€
  @Post(':id/members')
  @ApiOperation({ summary: 'í”„ë¡œì íŠ¸ ë©¤ë²„ ì¶”ê°€' })
  @ApiParam({
    name: 'id',
    description: 'í”„ë¡œì íŠ¸ ID',
    type: 'string',
    format: 'uuid',
  })
  @ApiResponse({
    status: 201,
    description: 'ë©¤ë²„ê°€ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.',
  })
  @ApiResponse({
    status: 400,
    description: 'ì´ë¯¸ í”„ë¡œì íŠ¸ ë©¤ë²„ì…ë‹ˆë‹¤.',
  })
  @ApiResponse({
    status: 403,
    description: 'ë©¤ë²„ë¥¼ ì¶”ê°€í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.',
  })
  async addMember(
    @Param('id', ParseUUIDPipe) id: string,
    @Body() addMemberDto: AddProjectMemberDto,
    @CurrentUser('id') userId: string,
  ) {
    return this.projectsService.addMember(id, addMemberDto, userId);
  }

  // í”„ë¡œì íŠ¸ ë©¤ë²„ ëª©ë¡ ì¡°íšŒ
  @Get(':id/members')
  @ApiOperation({ summary: 'í”„ë¡œì íŠ¸ ë©¤ë²„ ëª©ë¡ ì¡°íšŒ' })
  @ApiParam({
    name: 'id',
    description: 'í”„ë¡œì íŠ¸ ID',
    type: 'string',
    format: 'uuid',
  })
  @ApiResponse({
    status: 200,
    description: 'í”„ë¡œì íŠ¸ ë©¤ë²„ ëª©ë¡ì´ ì„±ê³µì ìœ¼ë¡œ ì¡°íšŒë˜ì—ˆìŠµë‹ˆë‹¤.',
  })
  async getMembers(
    @Param('id', ParseUUIDPipe) id: string,
    @CurrentUser('id') userId: string,
  ) {
    return this.projectsService.getMembers(id, userId);
  }

  // í”„ë¡œì íŠ¸ ë©¤ë²„ ì œê±°
  @Delete(':id/members/:memberId')
  @HttpCode(HttpStatus.NO_CONTENT)
  @ApiOperation({ summary: 'í”„ë¡œì íŠ¸ ë©¤ë²„ ì œê±°' })
  @ApiParam({
    name: 'id',
    description: 'í”„ë¡œì íŠ¸ ID',
    type: 'string',
    format: 'uuid',
  })
  @ApiParam({
    name: 'memberId',
    description: 'ì œê±°í•  ë©¤ë²„ ID',
    type: 'string',
    format: 'uuid',
  })
  @ApiResponse({
    status: 204,
    description: 'ë©¤ë²„ê°€ ì„±ê³µì ìœ¼ë¡œ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.',
  })
  @ApiResponse({
    status: 400,
    description: 'í”„ë¡œì íŠ¸ ì†Œìœ ìëŠ” ì œê±°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
  })
  @ApiResponse({
    status: 403,
    description: 'ë©¤ë²„ë¥¼ ì œê±°í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.',
  })
  async removeMember(
    @Param('id', ParseUUIDPipe) id: string,
    @Param('memberId', ParseUUIDPipe) memberId: string,
    @CurrentUser('id') userId: string,
  ) {
    return this.projectsService.removeMember(id, memberId, userId);
  }

  // í”„ë¡œì íŠ¸ ì‚­ì œ (ì•„ì¹´ì´ë¸Œ)
  @Delete(':id')
  @HttpCode(HttpStatus.NO_CONTENT)
  @ApiOperation({ summary: 'í”„ë¡œì íŠ¸ ì‚­ì œ (ì•„ì¹´ì´ë¸Œ)' })
  @ApiParam({
    name: 'id',
    description: 'í”„ë¡œì íŠ¸ ID',
    type: 'string',
    format: 'uuid',
  })
  @ApiResponse({
    status: 204,
    description: 'í”„ë¡œì íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.',
  })
  @ApiResponse({
    status: 404,
    description: 'í”„ë¡œì íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
  })
  @ApiResponse({
    status: 403,
    description: 'í”„ë¡œì íŠ¸ë¥¼ ì‚­ì œí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.',
  })
  async remove(
    @Param('id', ParseUUIDPipe) id: string,
    @CurrentUser('id') userId: string,
  ) {
    return this.projectsService.remove(id, userId);
  }
}
</file>

<file path="backend/src/modules/projects/projects.service.ts">
import { 
  Injectable, 
  NotFoundException, 
  ForbiddenException,
  BadRequestException 
} from '@nestjs/common';
import { InjectRepository } from '@nestjs/typeorm';
import { Repository, FindOptionsWhere } from 'typeorm';
import { Project } from '../../database/entities/project.entity';
import { ProjectMember } from '../../database/entities/project-member.entity';
import { User } from '../../database/entities/user.entity';
import { 
  CreateProjectDto, 
  UpdateProjectDto, 
  ProjectQueryDto,
  AddProjectMemberDto 
} from './dto/project.dto';
import { 
  ProjectStatus, 
  ProjectPriority, 
  ProjectVisibility,
  ProjectMemberRole,
  PaginatedResponse,
  TaskStatus,
  ProjectPermission
} from '@workly/shared';

@Injectable()
export class ProjectsService {
  constructor(
    @InjectRepository(Project)
    private projectRepository: Repository<Project>,
    @InjectRepository(ProjectMember)
    private projectMemberRepository: Repository<ProjectMember>,
    @InjectRepository(User)
    private userRepository: Repository<User>,
  ) {}

  // í”„ë¡œì íŠ¸ ìƒì„±
  async create(createProjectDto: CreateProjectDto, ownerId: string): Promise<Project> {
    const {
      title,
      description,
      priority = 'medium',
      startDate,
      endDate,
      budget,
      currency,
      tags = [],
      color,
      icon,
      visibility = 'private',
      settings = {},
    } = createProjectDto;

    // ì‹œì‘ì¼ê³¼ ì¢…ë£Œì¼ ìœ íš¨ì„± ê²€ì‚¬
    if (startDate && endDate) {
      const start = new Date(startDate);
      const end = new Date(endDate);
      if (start >= end) {
        throw new BadRequestException('ì¢…ë£Œì¼ì€ ì‹œì‘ì¼ë³´ë‹¤ ëŠ¦ì–´ì•¼ í•©ë‹ˆë‹¤.');
      }
    }

    // í”„ë¡œì íŠ¸ ìƒì„±
    const project = this.projectRepository.create({
      title,
      description,
      ownerId,
      status: ProjectStatus.ACTIVE,
      priority: priority as ProjectPriority,
      startDate: startDate ? new Date(startDate) : undefined,
      endDate: endDate ? new Date(endDate) : undefined,
      budget,
      currency,
      tags,
      color,
      icon,
      visibility: visibility as ProjectVisibility,
      settings: {
        enableTimeTracking: true,
        enableComments: true,
        enableFileAttachments: true,
        workflowStages: ['planning', 'in_progress', 'review', 'done'],
        ...settings,
      },
    } as any);

    const savedProject = await this.projectRepository.save(project) as unknown as Project;

    // í”„ë¡œì íŠ¸ ì†Œìœ ìë¥¼ ê´€ë¦¬ì ë©¤ë²„ë¡œ ì¶”ê°€
    const ownerMember = this.projectMemberRepository.create({
      projectId: savedProject.id,
      userId: ownerId,
      role: ProjectMemberRole.OWNER,
      permissions: [
        'read', 'write', 'delete', 
        'manage_members', 'manage_settings', 
        'manage_tasks', 'manage_files'
      ],
    } as any);

    await this.projectMemberRepository.save(ownerMember);

    // ê´€ê³„ í¬í•¨í•˜ì—¬ ë°˜í™˜
    return this.projectRepository.findOne({
      where: { id: savedProject.id },
      relations: ['members', 'members.user', 'tasks'],
    }) as Promise<Project>;
  }

  // í”„ë¡œì íŠ¸ ëª©ë¡ ì¡°íšŒ
  async findAll(queryDto: ProjectQueryDto, userId: string): Promise<PaginatedResponse<Project>> {
    const {
      page = 1,
      limit = 20,
      status,
      priority,
      visibility,
      search,
      sortBy = 'createdAt',
      sortOrder = 'DESC',
      includeArchived = false,
      tags,
    } = queryDto;

    const queryBuilder = this.projectRepository.createQueryBuilder('project')
      .leftJoinAndSelect('project.members', 'members')
      .leftJoinAndSelect('members.user', 'user')
      .leftJoinAndSelect('project.tasks', 'tasks');

    // ê¶Œí•œ í•„í„°ë§: ì†Œìœ ìì´ê±°ë‚˜ ë©¤ë²„ì¸ í”„ë¡œì íŠ¸ë§Œ
    queryBuilder.where(`(
      project.ownerId = :userId OR 
      EXISTS (
        SELECT 1 FROM project_members pm 
        WHERE pm.projectId = project.id AND pm.userId = :userId
      )
    )`, { userId });

    // ìƒíƒœ í•„í„°
    if (status) {
      queryBuilder.andWhere('project.status = :status', { status });
    }

    // ìš°ì„ ìˆœìœ„ í•„í„°
    if (priority) {
      queryBuilder.andWhere('project.priority = :priority', { priority });
    }

    // ê°€ì‹œì„± í•„í„°
    if (visibility) {
      queryBuilder.andWhere('project.visibility = :visibility', { visibility });
    }

    // ì•„ì¹´ì´ë¸Œ í•„í„°
    if (!includeArchived) {
      queryBuilder.andWhere('project.isArchived = false');
    }

    // ê²€ìƒ‰ í•„í„°
    if (search) {
      queryBuilder.andWhere(`(
        project.title ILIKE :search OR 
        project.description ILIKE :search OR
        array_to_string(project.tags, ' ') ILIKE :search
      )`, { search: `%${search}%` });
    }

    // íƒœê·¸ í•„í„°
    if (tags && tags.length > 0) {
      queryBuilder.andWhere('project.tags && :tags', { tags });
    }

    // ì •ë ¬
    const allowedSortFields = ['createdAt', 'updatedAt', 'title', 'priority', 'startDate', 'endDate'];
    const sortField = allowedSortFields.includes(sortBy) ? sortBy : 'createdAt';
    queryBuilder.orderBy(`project.${sortField}`, sortOrder as 'ASC' | 'DESC');

    // í˜ì´ì§•
    const offset = (page - 1) * limit;
    queryBuilder.skip(offset).take(limit);

    // ì‹¤í–‰
    const [items, total] = await queryBuilder.getManyAndCount();

    // ê° í”„ë¡œì íŠ¸ì˜ ì§„í–‰ë¥  ê³„ì‚°
    const itemsWithProgress = items.map(project => {
      const progress = this.calculateProjectProgress(project);
      return { ...project, progress };
    });

    return {
      success: true,
      data: itemsWithProgress as any,
      items: itemsWithProgress as any,
      total,
      page,
      limit,
      totalPages: Math.ceil(total / limit),
      meta: {
        page,
        limit,
        total,
        totalPages: Math.ceil(total / limit),
      },
    };
  }

  // íŠ¹ì • í”„ë¡œì íŠ¸ ì¡°íšŒ
  async findOne(id: string, userId: string): Promise<Project> {
    const project = await this.projectRepository.findOne({
      where: { id },
      relations: [
        'members', 
        'members.user', 
        'tasks', 
        'tasks.assignee',
        'tasks.labels'
      ],
    });

    if (!project) {
      throw new NotFoundException('í”„ë¡œì íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
    }

    // ê¶Œí•œ í™•ì¸
    await this.checkProjectAccess(project, userId);

    // ì§„í–‰ë¥  ê³„ì‚°
    const progress = this.calculateProjectProgress(project);
    
    return { ...project, progress } as any;
  }

  // í”„ë¡œì íŠ¸ ìˆ˜ì •
  async update(id: string, updateProjectDto: UpdateProjectDto, userId: string): Promise<Project> {
    const project = await this.findOne(id, userId);

    // ìˆ˜ì • ê¶Œí•œ í™•ì¸ (ì†Œìœ ì ë˜ëŠ” ê´€ë¦¬ìë§Œ)
    await this.checkProjectManagePermission(project, userId);

    const {
      title,
      description,
      status,
      priority,
      startDate,
      endDate,
      budget,
      currency,
      tags,
      color,
      icon,
      visibility,
      settings,
    } = updateProjectDto;

    // ì‹œì‘ì¼ê³¼ ì¢…ë£Œì¼ ìœ íš¨ì„± ê²€ì‚¬
    const newStartDate = startDate ? new Date(startDate) : project.startDate;
    const newEndDate = endDate ? new Date(endDate) : project.endDate;

    if (newStartDate && newEndDate && newStartDate >= newEndDate) {
      throw new BadRequestException('ì¢…ë£Œì¼ì€ ì‹œì‘ì¼ë³´ë‹¤ ëŠ¦ì–´ì•¼ í•©ë‹ˆë‹¤.');
    }

    // ì—…ë°ì´íŠ¸í•  í•„ë“œë“¤
    if (title !== undefined) project.title = title;
    if (description !== undefined) project.description = description;
    if (status !== undefined) project.status = status;
    if (priority !== undefined) project.priority = priority;
    if (startDate !== undefined) project.startDate = newStartDate;
    if (endDate !== undefined) project.endDate = newEndDate;
    if (budget !== undefined) project.budget = budget;
    if (currency !== undefined) project.currency = currency;
    if (tags !== undefined) project.tags = tags;
    if (color !== undefined) project.color = color;
    if (icon !== undefined) project.icon = icon;
    if (visibility !== undefined) project.visibility = visibility;
    if (settings !== undefined) {
      project.settings = { ...project.settings, ...settings };
    }

    const updatedProject = await this.projectRepository.save(project);
    return this.findOne(updatedProject.id, userId);
  }

  // í”„ë¡œì íŠ¸ ì‚­ì œ (ì•„ì¹´ì´ë¸Œ)
  async remove(id: string, userId: string): Promise<void> {
    const project = await this.findOne(id, userId);

    // ì‚­ì œ ê¶Œí•œ í™•ì¸ (ì†Œìœ ìë§Œ)
    if (project.ownerId !== userId) {
      throw new ForbiddenException('í”„ë¡œì íŠ¸ë¥¼ ì‚­ì œí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.');
    }

    // ì†Œí”„íŠ¸ ì‚­ì œ (ì•„ì¹´ì´ë¸Œ)
    project.isArchived = true;
    await this.projectRepository.save(project);
  }

  // í”„ë¡œì íŠ¸ ë©¤ë²„ ì¶”ê°€
  async addMember(projectId: string, addMemberDto: AddProjectMemberDto, userId: string): Promise<ProjectMember> {
    const { userId: newMemberId, role = 'member', permissions = [] } = addMemberDto;

    const project = await this.findOne(projectId, userId);

    // ë©¤ë²„ ê´€ë¦¬ ê¶Œí•œ í™•ì¸
    await this.checkProjectManagePermission(project, userId);

    // ìƒˆ ë©¤ë²„ ì‚¬ìš©ì í™•ì¸
    const newMember = await this.userRepository.findOne({
      where: { id: newMemberId },
    });

    if (!newMember) {
      throw new NotFoundException('ì¶”ê°€í•  ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
    }

    // ì´ë¯¸ ë©¤ë²„ì¸ì§€ í™•ì¸
    const existingMember = await this.projectMemberRepository.findOne({
      where: { projectId, userId: newMemberId },
    });

    if (existingMember) {
      throw new BadRequestException('ì´ë¯¸ í”„ë¡œì íŠ¸ ë©¤ë²„ì…ë‹ˆë‹¤.');
    }

    // ê¸°ë³¸ ê¶Œí•œ ì„¤ì •
    const defaultPermissions = this.getDefaultPermissions(role as ProjectMemberRole);
    const finalPermissions = permissions.length > 0 ? permissions : defaultPermissions;

    // ë©¤ë²„ ì¶”ê°€
    const projectMember = this.projectMemberRepository.create({
      projectId,
      userId: newMemberId,
      role,
      permissions: finalPermissions,
    } as any);

    return this.projectMemberRepository.save(projectMember) as unknown as Promise<ProjectMember>;
  }

  // í”„ë¡œì íŠ¸ ë©¤ë²„ ëª©ë¡ ì¡°íšŒ
  async getMembers(projectId: string, userId: string): Promise<ProjectMember[]> {
    const project = await this.findOne(projectId, userId);

    // í”„ë¡œì íŠ¸ ì ‘ê·¼ ê¶Œí•œ í™•ì¸
    await this.checkProjectAccess(project, userId);

    const members = await this.projectMemberRepository.find({
      where: { projectId },
      relations: ['user'],
      order: { joinedAt: 'ASC' },
    });

    return members;
  }

  // í”„ë¡œì íŠ¸ ë©¤ë²„ ì œê±°
  async removeMember(projectId: string, memberId: string, userId: string): Promise<void> {
    const project = await this.findOne(projectId, userId);

    // ë©¤ë²„ ê´€ë¦¬ ê¶Œí•œ í™•ì¸
    await this.checkProjectManagePermission(project, userId);

    // í”„ë¡œì íŠ¸ ì†Œìœ ìëŠ” ì œê±°í•  ìˆ˜ ì—†ìŒ
    if (project.ownerId === memberId) {
      throw new BadRequestException('í”„ë¡œì íŠ¸ ì†Œìœ ìëŠ” ì œê±°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
    }

    const member = await this.projectMemberRepository.findOne({
      where: { projectId, userId: memberId },
    });

    if (!member) {
      throw new NotFoundException('í”„ë¡œì íŠ¸ ë©¤ë²„ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
    }

    await this.projectMemberRepository.remove(member);
  }

  // í”„ë¡œì íŠ¸ ìƒíƒœ ë³€ê²½
  async updateStatus(id: string, status: ProjectStatus, userId: string): Promise<Project> {
    return this.update(id, { status }, userId);
  }

  // ë‚´ í”„ë¡œì íŠ¸ ì¡°íšŒ
  async getMyProjects(userId: string): Promise<Project[]> {
    const projects = await this.projectRepository.find({
      where: [
        { ownerId: userId },
        { members: { userId } }
      ],
      relations: ['members', 'members.user', 'tasks'],
      order: { updatedAt: 'DESC' },
    });

    return projects.map(project => ({
      ...project,
      progress: this.calculateProjectProgress(project),
    })) as any;
  }

  // í”„ë¡œì íŠ¸ ì§„í–‰ë¥  ê³„ì‚°
  private calculateProjectProgress(project: Project): number {
    if (!project.tasks || project.tasks.length === 0) {
      return 0;
    }

    const completedTasks = project.tasks.filter(task => task.status === TaskStatus.COMPLETED).length;
    return Math.round((completedTasks / project.tasks.length) * 100);
  }

  // í”„ë¡œì íŠ¸ ì ‘ê·¼ ê¶Œí•œ í™•ì¸
  private async checkProjectAccess(project: Project, userId: string): Promise<void> {
    const hasAccess = (
      project.ownerId === userId ||
      project.members?.some(member => member.userId === userId) ||
      project.visibility === 'public'
    );

    if (!hasAccess) {
      throw new ForbiddenException('í”„ë¡œì íŠ¸ì— ì ‘ê·¼í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.');
    }
  }

  // í”„ë¡œì íŠ¸ ê´€ë¦¬ ê¶Œí•œ í™•ì¸
  private async checkProjectManagePermission(project: Project, userId: string): Promise<void> {
    if (project.ownerId === userId) {
      return; // ì†Œìœ ìëŠ” ëª¨ë“  ê¶Œí•œ
    }

    const member = project.members?.find(m => m.userId === userId);
    if (!member || (member.role !== 'admin' && !member.permissions.includes(ProjectPermission.MANAGE_MEMBERS))) {
      throw new ForbiddenException('í”„ë¡œì íŠ¸ ê´€ë¦¬ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.');
    }
  }

  // ì—­í• ë³„ ê¸°ë³¸ ê¶Œí•œ ë°˜í™˜
  private getDefaultPermissions(role: ProjectMemberRole): string[] {
    switch (role) {
      case 'admin':
        return [
          'read', 'write', 'delete', 
          'manage_members', 'manage_settings', 
          'manage_tasks', 'manage_files'
        ];
      case 'member':
        return ['read', 'write', 'manage_tasks'];
      case 'viewer':
        return ['read'];
      default:
        return ['read'];
    }
  }
}
</file>

<file path="backend/src/modules/users/dto/update-user.dto.ts">
import {
  IsString,
  IsOptional,
  IsEmail,
  MaxLength,
  IsUrl,
  IsObject,
  ValidateNested,
} from 'class-validator';
import { Type } from 'class-transformer';
import { ApiProperty } from '@nestjs/swagger';
import { UserProfile, UserPreferences } from '@workly/shared';

export class UpdateUserDto {
  @ApiProperty({
    description: 'ì‚¬ìš©ì ì´ë¦„ (ì„±)',
    example: 'í™',
    required: false,
  })
  @IsOptional()
  @IsString()
  @MaxLength(50, { message: 'ì„±ì€ 50ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  firstName?: string;

  @ApiProperty({
    description: 'ì‚¬ìš©ì ì´ë¦„ (ì´ë¦„)',
    example: 'ê¸¸ë™',
    required: false,
  })
  @IsOptional()
  @IsString()
  @MaxLength(50, { message: 'ì´ë¦„ì€ 50ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  lastName?: string;

  @ApiProperty({
    description: 'ì´ë©”ì¼ ì£¼ì†Œ',
    example: 'user@example.com',
    required: false,
  })
  @IsOptional()
  @IsEmail({}, { message: 'ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.' })
  email?: string;

  @ApiProperty({
    description: 'í”„ë¡œí•„ ì´ë¯¸ì§€ URL',
    example: 'https://example.com/avatar.jpg',
    required: false,
  })
  @IsOptional()
  @IsUrl({}, { message: 'ì˜¬ë°”ë¥¸ URL í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.' })
  avatar?: string;

  @ApiProperty({
    description: 'ì‚¬ìš©ì í”„ë¡œí•„ ì •ë³´',
    required: false,
  })
  @IsOptional()
  @IsObject()
  @ValidateNested()
  @Type(() => Object)
  profile?: Partial<UserProfile>;

  @ApiProperty({
    description: 'ì‚¬ìš©ì í™˜ê²½ì„¤ì •',
    required: false,
  })
  @IsOptional()
  @IsObject()
  @ValidateNested()
  @Type(() => Object)
  preferences?: Partial<UserPreferences>;
}
</file>

<file path="backend/src/modules/users/users.controller.ts">
import {
  Controller,
  Get,
  Body,
  Patch,
  Param,
  Delete,
  UseGuards,
  ParseUUIDPipe,
} from '@nestjs/common';
import {
  ApiTags,
  ApiOperation,
  ApiResponse,
  ApiBearerAuth,
  ApiParam,
} from '@nestjs/swagger';

import { UsersService } from './users.service';
import { UpdateUserDto } from './dto/update-user.dto';
import { JwtAuthGuard } from '../auth/guards/jwt-auth.guard';
import { RolesGuard } from '../auth/guards/roles.guard';
import { Roles } from '../auth/decorators/roles.decorator';
import { CurrentUser } from '../auth/decorators/current-user.decorator';
import { User } from '../../database/entities/user.entity';
import { UserRole } from '@workly/shared';

@ApiTags('Users')
@Controller('users')
@UseGuards(JwtAuthGuard)
@ApiBearerAuth()
export class UsersController {
  constructor(private readonly usersService: UsersService) {}

  @Get()
  @UseGuards(RolesGuard)
  @Roles(UserRole.ADMIN)
  @ApiOperation({ summary: 'ëª¨ë“  ì‚¬ìš©ì ì¡°íšŒ (ê´€ë¦¬ì ì „ìš©)' })
  @ApiResponse({
    status: 200,
    description: 'ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ ì„±ê³µ',
  })
  findAll() {
    return this.usersService.findAll();
  }

  @Get('me')
  @ApiOperation({ summary: 'í˜„ì¬ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ' })
  @ApiResponse({
    status: 200,
    description: 'ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ ì„±ê³µ',
  })
  getProfile(@CurrentUser() user: User) {
    return user;
  }

  @Get(':id')
  @ApiOperation({ summary: 'íŠ¹ì • ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ' })
  @ApiParam({
    name: 'id',
    description: 'ì‚¬ìš©ì ID',
    type: 'string',
    format: 'uuid',
  })
  @ApiResponse({
    status: 200,
    description: 'ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ ì„±ê³µ',
  })
  @ApiResponse({
    status: 404,
    description: 'ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ',
  })
  findOne(@Param('id', ParseUUIDPipe) id: string) {
    return this.usersService.findOne(id);
  }

  @Patch('me')
  @ApiOperation({ summary: 'í˜„ì¬ ì‚¬ìš©ì ì •ë³´ ìˆ˜ì •' })
  @ApiResponse({
    status: 200,
    description: 'ì‚¬ìš©ì ì •ë³´ ìˆ˜ì • ì„±ê³µ',
  })
  updateProfile(@CurrentUser('id') userId: string, @Body() updateUserDto: UpdateUserDto) {
    return this.usersService.update(userId, updateUserDto);
  }

  @Patch(':id')
  @UseGuards(RolesGuard)
  @Roles(UserRole.ADMIN)
  @ApiOperation({ summary: 'íŠ¹ì • ì‚¬ìš©ì ì •ë³´ ìˆ˜ì • (ê´€ë¦¬ì ì „ìš©)' })
  @ApiParam({
    name: 'id',
    description: 'ì‚¬ìš©ì ID',
    type: 'string',
    format: 'uuid',
  })
  @ApiResponse({
    status: 200,
    description: 'ì‚¬ìš©ì ì •ë³´ ìˆ˜ì • ì„±ê³µ',
  })
  update(@Param('id', ParseUUIDPipe) id: string, @Body() updateUserDto: UpdateUserDto) {
    return this.usersService.update(id, updateUserDto);
  }

  @Delete(':id')
  @UseGuards(RolesGuard)
  @Roles(UserRole.ADMIN)
  @ApiOperation({ summary: 'ì‚¬ìš©ì ì‚­ì œ (ê´€ë¦¬ì ì „ìš©)' })
  @ApiParam({
    name: 'id',
    description: 'ì‚¬ìš©ì ID',
    type: 'string',
    format: 'uuid',
  })
  @ApiResponse({
    status: 200,
    description: 'ì‚¬ìš©ì ì‚­ì œ ì„±ê³µ',
  })
  remove(@Param('id', ParseUUIDPipe) id: string) {
    return this.usersService.remove(id);
  }
}
</file>

<file path="backend/src/modules/websocket/websocket.gateway.ts">
import {
  WebSocketGateway,
  WebSocketServer,
  SubscribeMessage,
  ConnectedSocket,
  MessageBody,
  OnGatewayConnection,
  OnGatewayDisconnect,
  OnGatewayInit,
} from '@nestjs/websockets';
import { 
  Injectable, 
  Logger,
  UseGuards 
} from '@nestjs/common';
import { Server, Socket } from 'socket.io';
import { JwtService } from '@nestjs/jwt';
import { ConfigService } from '@nestjs/config';
import { getAuthConfig } from '../../config/auth.config';

interface AuthenticatedSocket extends Socket {
  userId?: string;
  user?: any;
}

interface RoomData {
  projectId?: string;
  taskId?: string;
  type: 'project' | 'task' | 'user';
}

@Injectable()
@WebSocketGateway({
  cors: {
    origin: ['http://localhost:3000'],
    credentials: true,
  },
  namespace: '/',
})
export class WorklyWebSocketGateway 
  implements OnGatewayInit, OnGatewayConnection, OnGatewayDisconnect 
{
  @WebSocketServer()
  server: Server;

  private readonly logger = new Logger(WorklyWebSocketGateway.name);
  private connectedUsers = new Map<string, Set<string>>(); // userId -> socketIds
  private socketRooms = new Map<string, Set<string>>(); // socketId -> rooms

  constructor(
    private jwtService: JwtService,
    private configService: ConfigService,
  ) {}

  afterInit(server: Server) {
    this.logger.log('WebSocket Gateway initialized');
  }

  async handleConnection(client: AuthenticatedSocket) {
    try {
      // JWT í† í°ìœ¼ë¡œ ì‚¬ìš©ì ì¸ì¦
      const token = this.extractTokenFromSocket(client);
      if (!token) {
        this.logger.warn(`Connection rejected - No token provided: ${client.id}`);
        client.disconnect();
        return;
      }

      const authConfig = getAuthConfig(this.configService);
      const payload = this.jwtService.verify(token, {
        secret: authConfig.jwt.secret,
      });

      client.userId = payload.sub;
      client.user = payload;

      // ì‚¬ìš©ìë³„ ì—°ê²° ì¶”ì 
      if (client.userId && !this.connectedUsers.has(client.userId)) {
        this.connectedUsers.set(client.userId, new Set());
      }
      if (client.userId) {
        this.connectedUsers.get(client.userId)?.add(client.id);
      }

      // ì‚¬ìš©ì ê°œì¸ ë£¸ì— ìë™ ì¡°ì¸
      const userRoom = `user:${client.userId}`;
      client.join(userRoom);

      this.logger.log(`User ${client.userId} connected: ${client.id}`);

      // ì—°ê²°ëœ ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸ë“¤ì—ê²Œ ì‚¬ìš©ì ì˜¨ë¼ì¸ ìƒíƒœ ì•Œë¦¼
      client.broadcast.emit('user:online', {
        userId: client.userId,
        timestamp: new Date().toISOString(),
      });

    } catch (error) {
      this.logger.error(`Authentication failed for socket ${client.id}:`, error);
      client.disconnect();
    }
  }

  handleDisconnect(client: AuthenticatedSocket) {
    if (client.userId) {
      // ì‚¬ìš©ì ì—°ê²° ëª©ë¡ì—ì„œ ì œê±°
      const userSockets = this.connectedUsers.get(client.userId);
      if (userSockets) {
        userSockets.delete(client.id);
        if (userSockets.size === 0) {
          this.connectedUsers.delete(client.userId);
          // ë§ˆì§€ë§‰ ì—°ê²°ì´ ëŠì–´ì¡Œì„ ë•Œë§Œ ì˜¤í”„ë¼ì¸ ìƒíƒœ ì•Œë¦¼
          client.broadcast.emit('user:offline', {
            userId: client.userId,
            timestamp: new Date().toISOString(),
          });
        }
      }

      // ì†Œì¼“ ë£¸ ì •ë³´ ì •ë¦¬
      this.socketRooms.delete(client.id);

      this.logger.log(`User ${client.userId} disconnected: ${client.id}`);
    }
  }

  // í”„ë¡œì íŠ¸ ë£¸ ì¡°ì¸
  @SubscribeMessage('join:project')
  handleJoinProject(
    @ConnectedSocket() client: AuthenticatedSocket,
    @MessageBody() data: { projectId: string },
  ) {
    const roomName = `project:${data.projectId}`;
    client.join(roomName);

    // ì†Œì¼“ ë£¸ ì¶”ì 
    if (!this.socketRooms.has(client.id)) {
      this.socketRooms.set(client.id, new Set());
    }
    this.socketRooms.get(client.id)?.add(roomName);

    this.logger.log(`User ${client.userId} joined project room: ${roomName}`);

    // í”„ë¡œì íŠ¸ ë©¤ë²„ë“¤ì—ê²Œ ì°¸ì—¬ ì•Œë¦¼
    client.to(roomName).emit('project:user_joined', {
      userId: client.userId,
      projectId: data.projectId,
      timestamp: new Date().toISOString(),
    });

    return { success: true, room: roomName };
  }

  // í”„ë¡œì íŠ¸ ë£¸ ë‚˜ê°€ê¸°
  @SubscribeMessage('leave:project')
  handleLeaveProject(
    @ConnectedSocket() client: AuthenticatedSocket,
    @MessageBody() data: { projectId: string },
  ) {
    const roomName = `project:${data.projectId}`;
    client.leave(roomName);

    // ì†Œì¼“ ë£¸ ì¶”ì ì—ì„œ ì œê±°
    this.socketRooms.get(client.id)?.delete(roomName);

    this.logger.log(`User ${client.userId} left project room: ${roomName}`);

    // í”„ë¡œì íŠ¸ ë©¤ë²„ë“¤ì—ê²Œ ë‚˜ê° ì•Œë¦¼
    client.to(roomName).emit('project:user_left', {
      userId: client.userId,
      projectId: data.projectId,
      timestamp: new Date().toISOString(),
    });

    return { success: true };
  }

  // íƒœìŠ¤í¬ ë£¸ ì¡°ì¸
  @SubscribeMessage('join:task')
  handleJoinTask(
    @ConnectedSocket() client: AuthenticatedSocket,
    @MessageBody() data: { taskId: string },
  ) {
    const roomName = `task:${data.taskId}`;
    client.join(roomName);

    if (!this.socketRooms.has(client.id)) {
      this.socketRooms.set(client.id, new Set());
    }
    this.socketRooms.get(client.id)?.add(roomName);

    this.logger.log(`User ${client.userId} joined task room: ${roomName}`);

    // íƒœìŠ¤í¬ ê´€ë ¨ìë“¤ì—ê²Œ ì°¸ì—¬ ì•Œë¦¼
    client.to(roomName).emit('task:user_joined', {
      userId: client.userId,
      taskId: data.taskId,
      timestamp: new Date().toISOString(),
    });

    return { success: true, room: roomName };
  }

  // íƒœìŠ¤í¬ ë£¸ ë‚˜ê°€ê¸°
  @SubscribeMessage('leave:task')
  handleLeaveTask(
    @ConnectedSocket() client: AuthenticatedSocket,
    @MessageBody() data: { taskId: string },
  ) {
    const roomName = `task:${data.taskId}`;
    client.leave(roomName);

    this.socketRooms.get(client.id)?.delete(roomName);

    client.to(roomName).emit('task:user_left', {
      userId: client.userId,
      taskId: data.taskId,
      timestamp: new Date().toISOString(),
    });

    return { success: true };
  }

  // íƒœìŠ¤í¬ ì‹¤ì‹œê°„ í¸ì§‘ (íƒ€ì´í•‘ ìƒíƒœ)
  @SubscribeMessage('task:typing')
  handleTaskTyping(
    @ConnectedSocket() client: AuthenticatedSocket,
    @MessageBody() data: { taskId: string; field: string; isTyping: boolean },
  ) {
    const roomName = `task:${data.taskId}`;
    
    client.to(roomName).emit('task:typing', {
      userId: client.userId,
      taskId: data.taskId,
      field: data.field,
      isTyping: data.isTyping,
      timestamp: new Date().toISOString(),
    });
  }

  // ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ë¸Œë¡œë“œìºìŠ¤íŠ¸ ë©”ì„œë“œë“¤
  
  // íƒœìŠ¤í¬ ì—…ë°ì´íŠ¸ ì•Œë¦¼
  async broadcastTaskUpdate(taskId: string, updateData: any, excludeUserId?: string) {
    const roomName = `task:${taskId}`;
    const payload = {
      type: 'task:updated',
      taskId,
      data: updateData,
      timestamp: new Date().toISOString(),
    };

    if (excludeUserId) {
      // íŠ¹ì • ì‚¬ìš©ì ì œì™¸í•˜ê³  ë¸Œë¡œë“œìºìŠ¤íŠ¸
      const excludeSockets = this.connectedUsers.get(excludeUserId) || new Set();
      const room = this.server.to(roomName);
      for (const socketId of excludeSockets) {
        room.except(socketId);
      }
      room.emit('task:updated', payload);
    } else {
      this.server.to(roomName).emit('task:updated', payload);
    }
  }

  // í”„ë¡œì íŠ¸ ì—…ë°ì´íŠ¸ ì•Œë¦¼
  async broadcastProjectUpdate(projectId: string, updateData: any, excludeUserId?: string) {
    const roomName = `project:${projectId}`;
    const payload = {
      type: 'project:updated',
      projectId,
      data: updateData,
      timestamp: new Date().toISOString(),
    };

    if (excludeUserId) {
      const excludeSockets = this.connectedUsers.get(excludeUserId) || new Set();
      const room = this.server.to(roomName);
      for (const socketId of excludeSockets) {
        room.except(socketId);
      }
      room.emit('project:updated', payload);
    } else {
      this.server.to(roomName).emit('project:updated', payload);
    }
  }

  // ì‚¬ìš©ìë³„ ì•Œë¦¼
  async sendUserNotification(userId: string, notification: any) {
    const userRoom = `user:${userId}`;
    this.server.to(userRoom).emit('notification', {
      ...notification,
      timestamp: new Date().toISOString(),
    });
  }

  // ëŒ“ê¸€ ì¶”ê°€ ì•Œë¦¼
  async broadcastCommentAdded(taskId: string, comment: any, excludeUserId?: string) {
    const roomName = `task:${taskId}`;
    const payload = {
      type: 'comment:added',
      taskId,
      comment,
      timestamp: new Date().toISOString(),
    };

    if (excludeUserId) {
      const excludeSockets = this.connectedUsers.get(excludeUserId) || new Set();
      const room = this.server.to(roomName);
      for (const socketId of excludeSockets) {
        room.except(socketId);
      }
      room.emit('comment:added', payload);
    } else {
      this.server.to(roomName).emit('comment:added', payload);
    }
  }

  // ì—°ê²°ëœ ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ
  getConnectedUsers(): string[] {
    return Array.from(this.connectedUsers.keys());
  }

  // íŠ¹ì • í”„ë¡œì íŠ¸/íƒœìŠ¤í¬ì˜ í™œì„± ì‚¬ìš©ì ì¡°íšŒ
  getRoomUsers(roomName: string): string[] {
    const room = this.server.sockets.adapter.rooms.get(roomName);
    if (!room) return [];

    const userIds = new Set<string>();
    for (const socketId of room) {
      const socket = this.server.sockets.sockets.get(socketId) as AuthenticatedSocket;
      if (socket?.userId) {
        userIds.add(socket.userId);
      }
    }

    return Array.from(userIds);
  }

  // JWT í† í° ì¶”ì¶œ
  private extractTokenFromSocket(socket: Socket): string | null {
    // Authorization í—¤ë”ì—ì„œ ì¶”ì¶œ
    const authHeader = socket.handshake.headers.authorization;
    if (authHeader && authHeader.startsWith('Bearer ')) {
      return authHeader.substring(7);
    }

    // ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ì—ì„œ ì¶”ì¶œ
    const token = socket.handshake.auth?.token || socket.handshake.query?.token;
    if (token && typeof token === 'string') {
      return token;
    }

    return null;
  }
}
</file>

<file path="backend/src/modules/websocket/websocket.module.ts">
import { Module } from '@nestjs/common';
import { JwtModule } from '@nestjs/jwt';
import { ConfigModule, ConfigService } from '@nestjs/config';
import { WorklyWebSocketGateway } from './websocket.gateway';
import { getAuthConfig } from '../../config/auth.config';

@Module({
  imports: [
    JwtModule.registerAsync({
      imports: [ConfigModule],
      useFactory: async (configService: ConfigService) => {
        const authConfig = getAuthConfig(configService);
        return {
          secret: authConfig.jwt.secret,
          signOptions: {
            expiresIn: authConfig.jwt.expiresIn,
          },
        };
      },
      inject: [ConfigService],
    }),
    ConfigModule,
  ],
  providers: [WorklyWebSocketGateway],
  exports: [WorklyWebSocketGateway],
})
export class WebSocketModule {}
</file>

<file path="backend/src/main.ts">
import { NestFactory } from '@nestjs/core';
import { ValidationPipe } from '@nestjs/common';
import { SwaggerModule, DocumentBuilder } from '@nestjs/swagger';
import { ConfigService } from '@nestjs/config';
import { AppModule } from './app.module';

async function bootstrap() {
  const app = await NestFactory.create(AppModule);
  const configService = app.get(ConfigService);

  // CORS ì„¤ì •
  app.enableCors({
    origin: [
      'http://localhost:3000', // í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ ì„œë²„
      configService.get('FRONTEND_URL', 'http://localhost:3000'),
      /\.vercel\.app$/, // Vercel í”„ë¦¬ë·° URLë“¤
      'https://workly.vercel.app', // Vercel í”„ë¡œë•ì…˜ URL (ì˜ˆì‹œ)
    ],
    credentials: true,
    methods: ['GET', 'POST', 'PUT', 'PATCH', 'DELETE', 'OPTIONS'],
    allowedHeaders: ['Content-Type', 'Authorization'],
  });

  // ê¸€ë¡œë²Œ íŒŒì´í”„ ì„¤ì •
  app.useGlobalPipes(
    new ValidationPipe({
      whitelist: true, // DTOì— ì •ì˜ë˜ì§€ ì•Šì€ ì†ì„± ì œê±°
      forbidNonWhitelisted: true, // ì •ì˜ë˜ì§€ ì•Šì€ ì†ì„±ì´ ìˆìœ¼ë©´ ì˜¤ë¥˜ ë°œìƒ
      transform: true, // ìš”ì²­ ë°ì´í„°ë¥¼ DTO íƒ€ì…ìœ¼ë¡œ ìë™ ë³€í™˜
      disableErrorMessages: configService.get('NODE_ENV') === 'production',
    }),
  );

  // API ì „ì—­ í”„ë¦¬í”½ìŠ¤ ì„¤ì • (authëŠ” ì œì™¸)
  app.setGlobalPrefix('api/v1', {
    exclude: ['/auth(.*)']
  });

  // Swagger ì„¤ì •
  if (configService.get('NODE_ENV') !== 'production') {
    const config = new DocumentBuilder()
      .setTitle('Workly API')
      .setDescription('ì›Œí´ë¦¬ ë°±ì—”ë“œ API ë¬¸ì„œ')
      .setVersion('1.0')
      .addBearerAuth(
        {
          type: 'http',
          scheme: 'bearer',
          bearerFormat: 'JWT',
          name: 'JWT',
          description: 'JWT í† í°ì„ ì…ë ¥í•˜ì„¸ìš”',
          in: 'header',
        },
        'JWT-auth',
      )
      .addTag('Authentication', 'ì¸ì¦ ê´€ë ¨ API')
      .addTag('Users', 'ì‚¬ìš©ì ê´€ë¦¬ API')
      .addTag('Projects', 'í”„ë¡œì íŠ¸ ê´€ë¦¬ API')
      .addTag('Tasks', 'íƒœìŠ¤í¬ ê´€ë¦¬ API')
      .build();

    const document = SwaggerModule.createDocument(app, config);
    SwaggerModule.setup('api/docs', app, document, {
      swaggerOptions: {
        persistAuthorization: true,
      },
    });

    console.log(`ğŸ“š API ë¬¸ì„œ: http://localhost:${configService.get('PORT', 3001)}/api/docs`);
  }

  // ì„œë²„ ì‹œì‘
  const port = configService.get('PORT', 3001);
  await app.listen(port);

  console.log(`ğŸš€ ì„œë²„ê°€ í¬íŠ¸ ${port}ì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤.`);
  console.log(`ğŸŒ í™˜ê²½: ${configService.get('NODE_ENV', 'development')}`);
}

bootstrap();
</file>

<file path="backend/Dockerfile">
# Backend Dockerfile
FROM node:20-alpine AS base

# Install dependencies only when needed
FROM base AS deps
RUN apk add --no-cache libc6-compat
WORKDIR /root

# Copy all package files
COPY package*.json ./
COPY shared/package*.json ./shared/
COPY backend/package*.json ./backend/

# Install all dependencies
RUN npm ci

# Build shared module
FROM base AS shared-builder
WORKDIR /root
COPY --from=deps /root/node_modules ./node_modules
COPY shared ./shared
WORKDIR /root/shared
RUN npm run build

# Build backend
FROM base AS builder
WORKDIR /root/backend
COPY --from=deps /root/node_modules ../node_modules
COPY --from=deps /root/package-lock.json ../package-lock.json
COPY --from=shared-builder /root/shared/dist ../shared/dist
COPY --from=shared-builder /root/shared/package.json ../shared/package.json
COPY backend ./

# Build application
RUN npm run build

# Production image
FROM base AS runner
WORKDIR /app

ENV NODE_ENV production

# Create non-root user
RUN addgroup --system --gid 1001 nestjs
RUN adduser --system --uid 1001 nestjs

# Copy built application
COPY --from=builder --chown=nestjs:nestjs /root/backend/dist ./dist
COPY --from=builder --chown=nestjs:nestjs /root/backend/node_modules ./node_modules
COPY --from=builder --chown=nestjs:nestjs /root/backend/package*.json ./

USER nestjs

EXPOSE 3001

CMD ["node", "dist/main"]
</file>

<file path="backend/package.json">
{
  "name": "@workly/backend",
  "version": "1.0.0",
  "description": "ì›Œí´ë¦¬ ë°±ì—”ë“œ NestJS ì• í”Œë¦¬ì¼€ì´ì…˜",
  "author": "Workly Team",
  "private": true,
  "license": "MIT",
  "scripts": {
    "build": "nest build",
    "format": "prettier --write \"src/**/*.ts\" \"test/**/*.ts\"",
    "start": "nest start",
    "dev": "nest start --watch",
    "start:debug": "nest start --debug --watch",
    "start:prod": "node dist/main",
    "lint": "eslint \"{src,apps,libs,test}/**/*.ts\" --fix",
    "lint:fix": "eslint \"{src,apps,libs,test}/**/*.ts\" --fix",
    "test": "jest",
    "test:watch": "jest --watch",
    "test:cov": "jest --coverage",
    "test:debug": "node --inspect-brk -r tsconfig-paths/register -r ts-node/register node_modules/.bin/jest --runInBand",
    "test:e2e": "jest --config ./test/jest-e2e.json",
    "db:migrate": "typeorm migration:run -d src/config/typeorm.config.ts",
    "db:migrate:create": "typeorm migration:create",
    "db:migrate:revert": "typeorm migration:revert -d src/config/typeorm.config.ts",
    "db:seed": "ts-node src/database/seeds/run-seeds.ts"
  },
  "dependencies": {
    "@nestjs/common": "^10.0.0",
    "@nestjs/core": "^10.0.0",
    "@nestjs/platform-express": "^10.0.0",
    "@nestjs/platform-socket.io": "^10.0.0",
    "@nestjs/websockets": "^10.0.0",
    "@nestjs/passport": "^10.0.0",
    "@nestjs/jwt": "^10.0.0",
    "@nestjs/typeorm": "^10.0.0",
    "@nestjs/config": "^3.0.0",
    "@nestjs/swagger": "^7.0.0",
    "typeorm": "^0.3.17",
    "pg": "^8.11.0",
    "passport": "^0.6.0",
    "passport-jwt": "^4.0.1",
    "passport-google-oauth20": "^2.0.0",
    "bcryptjs": "^2.4.3",
    "class-validator": "^0.14.0",
    "class-transformer": "^0.5.1",
    "socket.io": "^4.7.0",
    "uuid": "^9.0.0",
    "@nestjs/throttler": "^5.0.0",
    "reflect-metadata": "^0.1.13",
    "rxjs": "^7.8.1",
    "@workly/shared": "*"
  },
  "devDependencies": {
    "@nestjs/cli": "^10.0.0",
    "@nestjs/schematics": "^10.0.0",
    "@nestjs/testing": "^10.0.0",
    "@types/express": "^4.17.17",
    "@types/jest": "^29.5.2",
    "@types/node": "^20.3.1",
    "@types/passport-jwt": "^3.0.9",
    "@types/passport-google-oauth20": "^2.0.11",
    "@types/bcryptjs": "^2.4.2",
    "@types/uuid": "^9.0.0",
    "@types/pg": "^8.10.0",
    "@types/supertest": "^2.0.12",
    "@typescript-eslint/eslint-plugin": "^6.0.0",
    "@typescript-eslint/parser": "^6.0.0",
    "eslint": "^8.42.0",
    "eslint-config-prettier": "^9.0.0",
    "eslint-plugin-prettier": "^5.0.0",
    "jest": "^29.5.0",
    "prettier": "^3.0.0",
    "source-map-support": "^0.5.21",
    "supertest": "^6.3.3",
    "ts-jest": "^29.1.0",
    "ts-loader": "^9.4.3",
    "ts-node": "^10.9.1",
    "tsconfig-paths": "^4.2.0",
    "typescript": "^5.1.3"
  },
  "jest": {
    "moduleFileExtensions": [
      "js",
      "json",
      "ts"
    ],
    "rootDir": "src",
    "testRegex": ".*\\.spec\\.ts$",
    "transform": {
      "^.+\\.(t|j)s$": "ts-jest"
    },
    "collectCoverageFrom": [
      "**/*.(t|j)s"
    ],
    "coverageDirectory": "../coverage",
    "testEnvironment": "node"
  }
}
</file>

<file path="backend/tsconfig.json">
{
  "compilerOptions": {
    "module": "commonjs",
    "declaration": true,
    "removeComments": true,
    "emitDecoratorMetadata": true,
    "experimentalDecorators": true,
    "allowSyntheticDefaultImports": true,
    "target": "ES2020",
    "sourceMap": true,
    "outDir": "./dist",
    "baseUrl": "./",
    "incremental": true,
    "skipLibCheck": true,
    "strictNullChecks": true,
    "noImplicitAny": true,
    "strictBindCallApply": true,
    "forceConsistentCasingInFileNames": true,
    "noFallthroughCasesInSwitch": true,
    "resolveJsonModule": true,
    "paths": {
      "@/*": ["src/*"],
      "@workly/shared": ["../shared/dist/src"]
    },
    "lib": ["ES2020"]
  },
  "include": [
    "src/**/*"
  ],
  "exclude": [
    "node_modules",
    "dist",
    "test"
  ]
}
</file>

<file path="frontend/src/app/admin/users/page.tsx">
'use client';

import { useState, useEffect } from 'react';
import { 
  MagnifyingGlassIcon,
  FunnelIcon,
  PencilIcon,
  TrashIcon,
  ShieldCheckIcon,
  UserIcon,
} from '@heroicons/react/24/outline';

interface User {
  id: string;
  email: string;
  name: string;
  role: string;
  adminRole?: string;
  status: string;
  createdAt: string;
  lastLoginAt?: string;
  emailVerifiedAt?: string;
}

interface UserFilters {
  search: string;
  role: string;
  adminRole: string;
  status: string;
}

export default function UsersManagement() {
  const [users, setUsers] = useState<User[]>([]);
  const [filteredUsers, setFilteredUsers] = useState<User[]>([]);
  const [isLoading, setIsLoading] = useState(true);
  const [currentPage, setCurrentPage] = useState(1);
  const [totalPages, setTotalPages] = useState(1);
  const [filters, setFilters] = useState<UserFilters>({
    search: '',
    role: '',
    adminRole: '',
    status: '',
  });

  useEffect(() => {
    const fetchUsers = async () => {  
      try {
        // ì‹¤ì œ API í˜¸ì¶œ
        const token = localStorage.getItem('token') || 'dev-admin-token';
        const queryParams = new URLSearchParams({
          page: currentPage.toString(),
          limit: '20',
          ...(filters.search && { search: filters.search }),
          ...(filters.role && { role: filters.role }),
        });

        const response = await fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/api/v1/api/admin/users?${queryParams}`, {
          headers: {
            'Authorization': `Bearer ${token}`,
            'Content-Type': 'application/json'
          }
        });

        if (response.ok) {
          const data = await response.json();
          const usersData = data.success ? data.data : data;
          
          setUsers(usersData.data || usersData);
          setTotalPages(usersData.totalPages || 1);
          
          console.log('ğŸš€ ì‹¤ì œ ë°±ì—”ë“œì—ì„œ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤.', usersData);
        } else {
          // API í˜¸ì¶œ ì‹¤íŒ¨ ì‹œ ì„ì‹œ ë°ì´í„° ì‚¬ìš©
          console.warn('ë°±ì—”ë“œ API ì—°ê²° ì‹¤íŒ¨, ì„ì‹œ ë°ì´í„° ì‚¬ìš©');
          const mockUsers: User[] = [
          {
            id: '1',
            email: 'admin@workly.co',
            name: 'ì‹œìŠ¤í…œ ê´€ë¦¬ì',
            role: 'ADMIN',
            adminRole: 'super_admin',
            status: 'ACTIVE',
            createdAt: '2024-01-01T00:00:00Z',
            lastLoginAt: '2024-01-15T10:30:00Z',
            emailVerifiedAt: '2024-01-01T00:00:00Z',
          },
          {
            id: '2',
            email: 'user1@example.com',
            name: 'ê¹€ì‚¬ìš©ì',
            role: 'MEMBER',
            status: 'ACTIVE',
            createdAt: '2024-01-05T00:00:00Z',
            lastLoginAt: '2024-01-14T15:22:00Z',
            emailVerifiedAt: '2024-01-05T00:00:00Z',
          },
          {
            id: '3',
            email: 'user2@example.com',
            name: 'ì´í”„ë¡œì íŠ¸',
            role: 'MANAGER',
            adminRole: 'moderator',
            status: 'ACTIVE',
            createdAt: '2024-01-08T00:00:00Z',
            lastLoginAt: '2024-01-13T09:15:00Z',
            emailVerifiedAt: '2024-01-08T00:00:00Z',
          },
          {
            id: '4',
            email: 'pending@example.com',
            name: 'ë°•ëŒ€ê¸°ì',
            role: 'MEMBER',
            status: 'PENDING_VERIFICATION',
            createdAt: '2024-01-12T00:00:00Z',
          },
          ];
          
          setUsers(mockUsers);
          setTotalPages(1);
        }
      } catch (error) {
        console.error('ì‚¬ìš©ì ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:', error);
        
        // ì—ëŸ¬ ë°œìƒ ì‹œ ë¹ˆ ë°°ì—´ë¡œ ì„¤ì •
        setUsers([]);
        setTotalPages(1);
      } finally {
        setIsLoading(false);
      }
    };

    fetchUsers();
  }, [currentPage, filters.search, filters.role]);

  // í•„í„°ë§ íš¨ê³¼
  useEffect(() => {
    let filtered = users;

    if (filters.search) {
      filtered = filtered.filter(user =>
        user.name.toLowerCase().includes(filters.search.toLowerCase()) ||
        user.email.toLowerCase().includes(filters.search.toLowerCase())
      );
    }

    if (filters.role) {
      filtered = filtered.filter(user => user.role === filters.role);
    }

    if (filters.adminRole) {
      filtered = filtered.filter(user => user.adminRole === filters.adminRole);
    }

    if (filters.status) {
      filtered = filtered.filter(user => user.status === filters.status);
    }

    setFilteredUsers(filtered);
    setCurrentPage(1);
  }, [filters, users]);

  const handleFilterChange = (key: keyof UserFilters, value: string) => {
    setFilters(prev => ({ ...prev, [key]: value }));
  };

  const getStatusBadge = (status: string) => {
    const badges = {
      ACTIVE: 'bg-green-100 text-green-800',
      INACTIVE: 'bg-gray-100 text-gray-800',
      SUSPENDED: 'bg-red-100 text-red-800',
      PENDING_VERIFICATION: 'bg-yellow-100 text-yellow-800',
    };
    
    const labels = {
      ACTIVE: 'í™œì„±',
      INACTIVE: 'ë¹„í™œì„±',
      SUSPENDED: 'ì •ì§€',
      PENDING_VERIFICATION: 'ì´ë©”ì¼ ì¸ì¦ ëŒ€ê¸°',
    };

    return (
      <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${badges[status as keyof typeof badges] || 'bg-gray-100 text-gray-800'}`}>
        {labels[status as keyof typeof labels] || status}
      </span>
    );
  };

  const getRoleBadge = (role: string) => {
    const badges = {
      ADMIN: 'bg-purple-100 text-purple-800',
      MANAGER: 'bg-blue-100 text-blue-800',
      MEMBER: 'bg-gray-100 text-gray-800',
    };
    
    const labels = {
      ADMIN: 'ê´€ë¦¬ì',
      MANAGER: 'ë§¤ë‹ˆì €',
      MEMBER: 'ì¼ë°˜ ì‚¬ìš©ì',
    };

    return (
      <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${badges[role as keyof typeof badges] || 'bg-gray-100 text-gray-800'}`}>
        {labels[role as keyof typeof labels] || role}
      </span>
    );
  };

  const getAdminRoleBadge = (adminRole?: string) => {
    if (!adminRole) return null;

    const badges = {
      super_admin: 'bg-red-100 text-red-800',
      admin: 'bg-orange-100 text-orange-800',
      moderator: 'bg-indigo-100 text-indigo-800',
      support: 'bg-teal-100 text-teal-800',
    };
    
    const labels = {
      super_admin: 'ìŠˆí¼ ê´€ë¦¬ì',
      admin: 'ì–´ë“œë¯¼',
      moderator: 'ëª¨ë”ë ˆì´í„°',
      support: 'ì§€ì›íŒ€',
    };

    return (
      <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${badges[adminRole as keyof typeof badges] || 'bg-gray-100 text-gray-800'}`}>
        <ShieldCheckIcon className="w-3 h-3 mr-1" />
        {labels[adminRole as keyof typeof labels] || adminRole}
      </span>
    );
  };

  if (isLoading) {
    return (
      <div className="flex items-center justify-center h-64">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"></div>
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* í˜ì´ì§€ í—¤ë” */}
      <div className="border-b border-gray-200 pb-4">
        <h1 className="text-2xl font-bold text-gray-900">ì‚¬ìš©ì ê´€ë¦¬</h1>
        <p className="mt-1 text-sm text-gray-600">
          ì „ì²´ ì‚¬ìš©ì ëª©ë¡ì„ í™•ì¸í•˜ê³  ê´€ë¦¬í•˜ì„¸ìš”
        </p>
      </div>

      {/* í•„í„° ì˜ì—­ */}
      <div className="bg-white rounded-lg shadow p-6">
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          {/* ê²€ìƒ‰ */}
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">
              ê²€ìƒ‰
            </label>
            <div className="relative">
              <MagnifyingGlassIcon className="absolute left-3 top-3 h-4 w-4 text-gray-400" />
              <input
                type="text"
                placeholder="ì´ë¦„ ë˜ëŠ” ì´ë©”ì¼ ê²€ìƒ‰"
                value={filters.search}
                onChange={(e) => handleFilterChange('search', e.target.value)}
                className="pl-10 w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
              />
            </div>
          </div>

          {/* ì—­í•  í•„í„° */}
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">
              ì‚¬ìš©ì ì—­í• 
            </label>
            <select
              value={filters.role}
              onChange={(e) => handleFilterChange('role', e.target.value)}
              className="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
            >
              <option value="">ì „ì²´</option>
              <option value="ADMIN">ê´€ë¦¬ì</option>
              <option value="MANAGER">ë§¤ë‹ˆì €</option>
              <option value="MEMBER">ì¼ë°˜ ì‚¬ìš©ì</option>
            </select>
          </div>

          {/* ì–´ë“œë¯¼ ì—­í•  í•„í„° */}
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">
              ì–´ë“œë¯¼ ê¶Œí•œ
            </label>
            <select
              value={filters.adminRole}
              onChange={(e) => handleFilterChange('adminRole', e.target.value)}
              className="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
            >
              <option value="">ì „ì²´</option>
              <option value="super_admin">ìŠˆí¼ ê´€ë¦¬ì</option>
              <option value="admin">ì–´ë“œë¯¼</option>
              <option value="moderator">ëª¨ë”ë ˆì´í„°</option>
              <option value="support">ì§€ì›íŒ€</option>
            </select>
          </div>

          {/* ìƒíƒœ í•„í„° */}
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-1">
              ìƒíƒœ
            </label>
            <select
              value={filters.status}
              onChange={(e) => handleFilterChange('status', e.target.value)}
              className="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
            >
              <option value="">ì „ì²´</option>
              <option value="ACTIVE">í™œì„±</option>
              <option value="INACTIVE">ë¹„í™œì„±</option>
              <option value="SUSPENDED">ì •ì§€</option>
              <option value="PENDING_VERIFICATION">ì´ë©”ì¼ ì¸ì¦ ëŒ€ê¸°</option>
            </select>
          </div>
        </div>
      </div>

      {/* ì‚¬ìš©ì ëª©ë¡ */}
      <div className="bg-white rounded-lg shadow overflow-hidden">
        <div className="px-6 py-4 border-b border-gray-200">
          <div className="flex items-center justify-between">
            <h2 className="text-lg font-semibold text-gray-900">
              ì‚¬ìš©ì ëª©ë¡ ({filteredUsers.length}ëª…)
            </h2>
          </div>
        </div>

        <div className="overflow-x-auto">
          <table className="min-w-full divide-y divide-gray-200">
            <thead className="bg-gray-50">
              <tr>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                  ì‚¬ìš©ì
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                  ì—­í• 
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                  ìƒíƒœ
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                  ê°€ì…ì¼
                </th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                  ë§ˆì§€ë§‰ ë¡œê·¸ì¸
                </th>
                <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                  ì‘ì—…
                </th>
              </tr>
            </thead>
            <tbody className="bg-white divide-y divide-gray-200">
              {filteredUsers.map((user) => (
                <tr key={user.id} className="hover:bg-gray-50">
                  <td className="px-6 py-4 whitespace-nowrap">
                    <div className="flex items-center">
                      <div className="flex-shrink-0 h-10 w-10">
                        <div className="h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center">
                          <UserIcon className="h-5 w-5 text-gray-500" />
                        </div>
                      </div>
                      <div className="ml-4">
                        <div className="text-sm font-medium text-gray-900">{user.name}</div>
                        <div className="text-sm text-gray-500">{user.email}</div>
                      </div>
                    </div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <div className="space-y-1">
                      {getRoleBadge(user.role)}
                      {user.adminRole && getAdminRoleBadge(user.adminRole)}
                    </div>
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    {getStatusBadge(user.status)}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                    {new Date(user.createdAt).toLocaleDateString('ko-KR')}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                    {user.lastLoginAt 
                      ? new Date(user.lastLoginAt).toLocaleDateString('ko-KR')
                      : 'ì—†ìŒ'
                    }
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                    <div className="flex items-center justify-end space-x-2">
                      <button className="text-indigo-600 hover:text-indigo-900">
                        <PencilIcon className="h-4 w-4" />
                      </button>
                      {user.adminRole !== 'super_admin' && (
                        <button className="text-red-600 hover:text-red-900">
                          <TrashIcon className="h-4 w-4" />
                        </button>
                      )}
                    </div>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>

        {filteredUsers.length === 0 && (
          <div className="text-center py-12">
            <UserIcon className="mx-auto h-12 w-12 text-gray-400" />
            <h3 className="mt-2 text-sm font-medium text-gray-900">ì‚¬ìš©ìê°€ ì—†ìŠµë‹ˆë‹¤</h3>
            <p className="mt-1 text-sm text-gray-500">í•„í„° ì¡°ê±´ì„ ë³€ê²½í•´ë³´ì„¸ìš”.</p>
          </div>
        )}
      </div>
    </div>
  );
}
</file>

<file path="frontend/src/app/admin/page.tsx">
'use client';

import { useEffect, useState } from 'react';
import { 
  UsersIcon, 
  FolderIcon, 
  ClipboardDocumentListIcon,
  CheckCircleIcon 
} from '@heroicons/react/24/outline';

interface DashboardStats {
  totalUsers: number;
  totalProjects: number;
  totalTasks: number;
  activeUsersCount: number;
  completedTasksCount: number;
  completionRate: number;
}

interface AdminInfo {
  id: string;
  name: string;
  role: string;
  permissions: string[];
  lastAdminLogin?: string;
}

export default function AdminDashboard() {
  const [stats, setStats] = useState<DashboardStats | null>(null);
  const [adminInfo, setAdminInfo] = useState<AdminInfo | null>(null);
  const [isLoading, setIsLoading] = useState(true);

  useEffect(() => {
    const fetchDashboardData = async () => {
      try {
        // ì‹¤ì œ API í˜¸ì¶œ
        const token = localStorage.getItem('token') || 'dev-admin-token';
        const response = await fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/api/v1/api/admin/dashboard`, {
          headers: {
            'Authorization': `Bearer ${token}`,
            'Content-Type': 'application/json'
          }
        });

        if (response.ok) {
          const data = await response.json();
          const dashboardData = data.success ? data.data : data;
          
          setStats(dashboardData.stats);
          setAdminInfo(dashboardData.adminInfo);
          
          console.log('ğŸš€ ì‹¤ì œ ë°±ì—”ë“œì—ì„œ ëŒ€ì‹œë³´ë“œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤.', dashboardData);
        } else {
          // API í˜¸ì¶œ ì‹¤íŒ¨ ì‹œ ì„ì‹œ ë°ì´í„° ì‚¬ìš©
          console.warn('ë°±ì—”ë“œ API ì—°ê²° ì‹¤íŒ¨, ì„ì‹œ ë°ì´í„° ì‚¬ìš©');
          setStats({
            totalUsers: 0,
            totalProjects: 0,
            totalTasks: 0,
            activeUsersCount: 0,
            completedTasksCount: 0,
            completionRate: 0,
          });

          setAdminInfo({
            id: 'dev-admin-1',
            name: 'ì›Œí´ë¦¬ ê°œë°œ ê´€ë¦¬ì',
            role: 'super_admin',
            permissions: ['*'],
            lastAdminLogin: new Date().toISOString(),
          });
        }
      } catch (error) {
        console.error('ëŒ€ì‹œë³´ë“œ ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:', error);
        
        // ì—ëŸ¬ ë°œìƒ ì‹œ ì„ì‹œ ë°ì´í„° ì‚¬ìš©
        setStats({
          totalUsers: 0,
          totalProjects: 0,
          totalTasks: 0,
          activeUsersCount: 0,
          completedTasksCount: 0,
          completionRate: 0,
        });

        setAdminInfo({
          id: 'dev-admin-1',
          name: 'ì›Œí´ë¦¬ ê°œë°œ ê´€ë¦¬ì',
          role: 'super_admin',
          permissions: ['*'],
          lastAdminLogin: new Date().toISOString(),
        });
      } finally {
        setIsLoading(false);
      }
    };

    fetchDashboardData();
  }, []);

  if (isLoading) {
    return (
      <div className="flex items-center justify-center h-64">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"></div>
      </div>
    );
  }

  const statCards = [
    {
      name: 'ì „ì²´ ì‚¬ìš©ì',
      value: stats?.totalUsers.toLocaleString() || '0',
      icon: UsersIcon,
      color: 'bg-blue-500',
      change: '+12%',
      changeType: 'positive',
    },
    {
      name: 'í™œì„± ì‚¬ìš©ì',
      value: stats?.activeUsersCount.toLocaleString() || '0',
      icon: UsersIcon,
      color: 'bg-green-500',
      change: '+8%',
      changeType: 'positive',
    },
    {
      name: 'ì „ì²´ í”„ë¡œì íŠ¸',
      value: stats?.totalProjects.toLocaleString() || '0',
      icon: FolderIcon,
      color: 'bg-purple-500',
      change: '+5%',
      changeType: 'positive',
    },
    {
      name: 'ì „ì²´ ì—…ë¬´',
      value: stats?.totalTasks.toLocaleString() || '0',
      icon: ClipboardDocumentListIcon,
      color: 'bg-orange-500',
      change: '+15%',
      changeType: 'positive',
    },
    {
      name: 'ì™„ë£Œëœ ì—…ë¬´',
      value: stats?.completedTasksCount.toLocaleString() || '0',
      icon: CheckCircleIcon,
      color: 'bg-teal-500',
      change: '+22%',
      changeType: 'positive',
    },
    {
      name: 'ì™„ë£Œìœ¨',
      value: `${stats?.completionRate.toFixed(1)}%` || '0%',
      icon: CheckCircleIcon,
      color: 'bg-indigo-500',
      change: '+3%',
      changeType: 'positive',
    },
  ];

  return (
    <div className="space-y-6">
      {/* í˜ì´ì§€ í—¤ë” */}
      <div className="border-b border-gray-200 pb-4">
        <h1 className="text-2xl font-bold text-gray-900">ì–´ë“œë¯¼ ëŒ€ì‹œë³´ë“œ</h1>
        <p className="mt-1 text-sm text-gray-600">
          ì›Œí´ë¦¬ ì‹œìŠ¤í…œ ì „ë°˜ì˜ í˜„í™©ì„ í•œëˆˆì— í™•ì¸í•˜ì„¸ìš”
        </p>
      </div>

      {/* ê´€ë¦¬ì ì •ë³´ */}
      <div className="bg-white rounded-lg shadow p-6">
        <h2 className="text-lg font-semibold text-gray-900 mb-4">ê´€ë¦¬ì ì •ë³´</h2>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          <div>
            <p className="text-sm text-gray-500">ì´ë¦„</p>
            <p className="font-medium text-gray-900">{adminInfo?.name}</p>
          </div>
          <div>
            <p className="text-sm text-gray-500">ì—­í• </p>
            <p className="font-medium text-gray-900">
              {adminInfo?.role === 'super_admin' && 'ìŠˆí¼ ê´€ë¦¬ì'}
              {adminInfo?.role === 'admin' && 'ê´€ë¦¬ì'}
              {adminInfo?.role === 'moderator' && 'ëª¨ë”ë ˆì´í„°'}
              {adminInfo?.role === 'support' && 'ì§€ì›íŒ€'}
            </p>
          </div>
          <div>
            <p className="text-sm text-gray-500">ê¶Œí•œ ìˆ˜</p>
            <p className="font-medium text-gray-900">{adminInfo?.permissions.length}ê°œ</p>
          </div>
          <div>
            <p className="text-sm text-gray-500">ë§ˆì§€ë§‰ ê´€ë¦¬ì ë¡œê·¸ì¸</p>
            <p className="font-medium text-gray-900">
              {adminInfo?.lastAdminLogin ? 
                new Date(adminInfo.lastAdminLogin).toLocaleString('ko-KR') : 
                'ì •ë³´ ì—†ìŒ'
              }
            </p>
          </div>
        </div>
      </div>

      {/* ì£¼ìš” í†µê³„ ì¹´ë“œ */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {statCards.map((card, index) => {
          const Icon = card.icon;
          return (
            <div key={index} className="bg-white rounded-lg shadow p-6">
              <div className="flex items-center justify-between">
                <div>
                  <p className="text-sm font-medium text-gray-600">{card.name}</p>
                  <p className="text-2xl font-bold text-gray-900">{card.value}</p>
                </div>
                <div className={`${card.color} p-3 rounded-full`}>
                  <Icon className="h-6 w-6 text-white" />
                </div>
              </div>
              <div className="mt-4 flex items-center">
                <span className={`text-sm font-medium ${
                  card.changeType === 'positive' ? 'text-green-600' : 'text-red-600'
                }`}>
                  {card.change}
                </span>
                <span className="text-sm text-gray-500 ml-1">ì§€ë‚œ ì£¼ ëŒ€ë¹„</span>
              </div>
            </div>
          );
        })}
      </div>

      {/* ë¹ ë¥¸ ì‘ì—… */}
      <div className="bg-white rounded-lg shadow p-6">
        <h2 className="text-lg font-semibold text-gray-900 mb-4">ë¹ ë¥¸ ì‘ì—…</h2>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          <button className="flex items-center justify-center p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 transition-colors">
            <div className="text-center">
              <UsersIcon className="h-8 w-8 text-gray-400 mx-auto mb-2" />
              <span className="text-sm font-medium text-gray-900">ì‚¬ìš©ì ê´€ë¦¬</span>
            </div>
          </button>
          
          <button className="flex items-center justify-center p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 transition-colors">
            <div className="text-center">
              <FolderIcon className="h-8 w-8 text-gray-400 mx-auto mb-2" />
              <span className="text-sm font-medium text-gray-900">í”„ë¡œì íŠ¸ ê´€ë¦¬</span>
            </div>
          </button>
          
          <button className="flex items-center justify-center p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 transition-colors">
            <div className="text-center">
              <ClipboardDocumentListIcon className="h-8 w-8 text-gray-400 mx-auto mb-2" />
              <span className="text-sm font-medium text-gray-900">ê°ì‚¬ ë¡œê·¸</span>
            </div>
          </button>
          
          <button className="flex items-center justify-center p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50 transition-colors">
            <div className="text-center">
              <svg className="h-8 w-8 text-gray-400 mx-auto mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
              </svg>
              <span className="text-sm font-medium text-gray-900">ì‹œìŠ¤í…œ ì„¤ì •</span>
            </div>
          </button>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="frontend/src/app/privacy/page.tsx">
import React from 'react';

const PrivacyPolicyPage = () => {
  return (
    <div className="min-h-screen bg-background text-foreground">
      <div className="max-w-[720px] mx-auto px-4 py-12">
        <h1 className="text-4xl font-bold mb-8 text-center">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</h1>
        <div className="space-y-6 bg-card p-8 rounded-lg shadow-md">
          <p className="text-muted-foreground">ìµœì¢… ìˆ˜ì •ì¼: 2025ë…„ 7ì›” 26ì¼</p>

          <h2 className="text-2xl font-semibold border-b pb-2">ì œ 1ì¡° (ì´ì¹™)</h2>
          <p>ì›Œí´ë¦¬(ì´í•˜ "íšŒì‚¬")ëŠ” ê°œì¸ì •ë³´ë³´í˜¸ë²• ë“± ê´€ë ¨ ë²•ë ¹ìƒì˜ ê°œì¸ì •ë³´ë³´í˜¸ ê·œì •ì„ ì¤€ìˆ˜í•˜ë©°, ê´€ë ¨ ë²•ë ¹ì— ì˜ê±°í•œ ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨ì„ ì •í•˜ì—¬ ì´ìš©ì ê¶Œìµ ë³´í˜¸ì— ìµœì„ ì„ ë‹¤í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë³¸ ë°©ì¹¨ì€ íšŒì‚¬ê°€ ì œê³µí•˜ëŠ” ëª¨ë“  ì„œë¹„ìŠ¤ì— ì ìš©ë©ë‹ˆë‹¤.</p>

          <h2 className="text-2xl font-semibold border-b pb-2">ì œ 2ì¡° (ìˆ˜ì§‘í•˜ëŠ” ê°œì¸ì •ë³´ì˜ í•­ëª© ë° ìˆ˜ì§‘ ë°©ë²•)</h2>
          <p>1. íšŒì‚¬ëŠ” íšŒì›ê°€ì…, ì›í™œí•œ ê³ ê°ìƒë‹´, ê°ì¢… ì„œë¹„ìŠ¤ì˜ ì œê³µì„ ìœ„í•´ ì•„ë˜ì™€ ê°™ì€ ìµœì†Œí•œì˜ ê°œì¸ì •ë³´ë¥¼ í•„ìˆ˜í•­ëª©ìœ¼ë¡œ ìˆ˜ì§‘í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
          <ul className="list-disc list-inside space-y-2 pl-4">
            <li><strong>í•„ìˆ˜í•­ëª©:</strong> ì´ë©”ì¼ ì£¼ì†Œ, ì´ë¦„(ë˜ëŠ” ë‹‰ë„¤ì„), Google ê³„ì • í”„ë¡œí•„ ì •ë³´</li>
            <li><strong>ì„ íƒí•­ëª©:</strong> í”„ë¡œí•„ ì‚¬ì§„, ê¸°ìˆ  ìŠ¤íƒ, í¬íŠ¸í´ë¦¬ì˜¤ ë§í¬ ë“± íšŒì›ì´ í”„ë¡œí•„ì— ì§ì ‘ ì…ë ¥í•˜ëŠ” ì •ë³´</li>
          </ul>
          <p>2. ì„œë¹„ìŠ¤ ì´ìš© ê³¼ì •ì—ì„œ ì•„ë˜ì™€ ê°™ì€ ì •ë³´ë“¤ì´ ìë™ìœ¼ë¡œ ìƒì„±ë˜ì–´ ìˆ˜ì§‘ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
          <ul className="list-disc list-inside space-y-2 pl-4">
            <li>IP ì£¼ì†Œ, ì¿ í‚¤, ì„œë¹„ìŠ¤ ì´ìš© ê¸°ë¡, ê¸°ê¸° ì •ë³´</li>
          </ul>
          <p>3. ê°œì¸ì •ë³´ëŠ” Google OAuthë¥¼ í†µí•œ ì†Œì…œ ë¡œê·¸ì¸ ì‹œ ë™ì˜ ì ˆì°¨ë¥¼ ê±°ì³ ìˆ˜ì§‘ë©ë‹ˆë‹¤.</p>

          <h2 className="text-2xl font-semibold border-b pb-2">ì œ 3ì¡° (ê°œì¸ì •ë³´ì˜ ìˆ˜ì§‘ ë° ì´ìš© ëª©ì )</h2>
          <p>íšŒì‚¬ëŠ” ìˆ˜ì§‘í•œ ê°œì¸ì •ë³´ë¥¼ ë‹¤ìŒì˜ ëª©ì ì„ ìœ„í•´ í™œìš©í•©ë‹ˆë‹¤.</p>
          <ul className="list-disc list-inside space-y-2 pl-4">
            <li><strong>ì„œë¹„ìŠ¤ ì œê³µ:</strong> ì½˜í…ì¸  ì œê³µ, ê°œì¸ ë§ì¶¤ ì„œë¹„ìŠ¤ ì œê³µ, ë³¸ì¸ ì¸ì¦, ìš”ê¸ˆ ê²°ì œ(ìœ ë£Œ ì„œë¹„ìŠ¤ì˜ ê²½ìš°).</li>
            <li><strong>íšŒì› ê´€ë¦¬:</strong> íšŒì›ì œ ì„œë¹„ìŠ¤ ì´ìš©ì— ë”°ë¥¸ ë³¸ì¸í™•ì¸, ê°œì¸ ì‹ë³„, ë¶ˆëŸ‰íšŒì›ì˜ ë¶€ì • ì´ìš© ë°©ì§€ì™€ ë¹„ì¸ê°€ ì‚¬ìš© ë°©ì§€, ê°€ì… ì˜ì‚¬ í™•ì¸, ë¶„ìŸ ì¡°ì •ì„ ìœ„í•œ ê¸°ë¡ ë³´ì¡´.</li>
            <li><strong>ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ë° ì†Œì…œ ê¸°ëŠ¥:</strong> XP, ë ˆë²¨, ìŠ¤í‚¬ íŠ¸ë¦¬, í‰íŒ ë“± ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ì‹œìŠ¤í…œ ìš´ì˜, ë¦¬ë”ë³´ë“œ í‘œì‹œ, í”„ë¡œì íŠ¸ íŒ€ì› ê°„ ì •ë³´ ê³µìœ , "ì„ë¬´ ê²Œì‹œíŒ" ë° "í”„ë¡œì íŠ¸ ì‡¼ì¼€ì´ìŠ¤"ì—ì„œì˜ í”„ë¡œí•„ ì •ë³´ ê³µê°œ.</li>
            <li><strong>ì‹ ê·œ ì„œë¹„ìŠ¤ ê°œë°œ ë° ë§ˆì¼€íŒ…:</strong> ì‹ ê·œ ì„œë¹„ìŠ¤ ê°œë°œ ë° ë§ì¶¤ ì„œë¹„ìŠ¤ ì œê³µ, í†µê³„í•™ì  íŠ¹ì„±ì— ë”°ë¥¸ ì„œë¹„ìŠ¤ ì œê³µ ë° ê´‘ê³  ê²Œì¬, ì„œë¹„ìŠ¤ì˜ ìœ íš¨ì„± í™•ì¸, ì´ë²¤íŠ¸ ì •ë³´ ë° ì°¸ì—¬ê¸°íšŒ ì œê³µ.</li>
          </ul>

          <h2 className="text-2xl font-semibold border-b pb-2">ì œ 4ì¡° (ê°œì¸ì •ë³´ì˜ ë³´ìœ  ë° ì´ìš©ê¸°ê°„)</h2>
          <p>íšŒì‚¬ëŠ” ì›ì¹™ì ìœ¼ë¡œ ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ëª©ì ì´ ë‹¬ì„±ëœ í›„ì—ëŠ” í•´ë‹¹ ì •ë³´ë¥¼ ì§€ì²´ ì—†ì´ íŒŒê¸°í•©ë‹ˆë‹¤. ë‹¨, ê´€ê³„ë²•ë ¹ì˜ ê·œì •ì— ì˜í•˜ì—¬ ë³´ì¡´í•  í•„ìš”ê°€ ìˆëŠ” ê²½ìš° íšŒì‚¬ëŠ” ì•„ë˜ì™€ ê°™ì´ ê´€ê³„ë²•ë ¹ì—ì„œ ì •í•œ ì¼ì •í•œ ê¸°ê°„ ë™ì•ˆ íšŒì›ì •ë³´ë¥¼ ë³´ê´€í•©ë‹ˆë‹¤.</p>
          <ul className="list-disc list-inside space-y-2 pl-4">
            <li>ê³„ì•½ ë˜ëŠ” ì²­ì•½ì² íšŒ ë“±ì— ê´€í•œ ê¸°ë¡: 5ë…„ (ì „ììƒê±°ë˜ ë“±ì—ì„œì˜ ì†Œë¹„ìë³´í˜¸ì— ê´€í•œ ë²•ë¥ )</li>
            <li>ëŒ€ê¸ˆê²°ì œ ë° ì¬í™” ë“±ì˜ ê³µê¸‰ì— ê´€í•œ ê¸°ë¡: 5ë…„ (ì „ììƒê±°ë˜ ë“±ì—ì„œì˜ ì†Œë¹„ìë³´í˜¸ì— ê´€í•œ ë²•ë¥ )</li>
            <li>ì†Œë¹„ìì˜ ë¶ˆë§Œ ë˜ëŠ” ë¶„ìŸì²˜ë¦¬ì— ê´€í•œ ê¸°ë¡: 3ë…„ (ì „ììƒê±°ë˜ ë“±ì—ì„œì˜ ì†Œë¹„ìë³´í˜¸ì— ê´€í•œ ë²•ë¥ )</li>
          </ul>

          <h2 className="text-2xl font-semibold border-b pb-2">ì œ 5ì¡° (ê°œì¸ì •ë³´ì˜ íŒŒê¸°ì ˆì°¨ ë° ë°©ë²•)</h2>
          <p>íšŒì‚¬ëŠ” ì›ì¹™ì ìœ¼ë¡œ ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ëª©ì ì´ ë‹¬ì„±ëœ í›„ì—ëŠ” í•´ë‹¹ ì •ë³´ë¥¼ ì§€ì²´ì—†ì´ íŒŒê¸°í•©ë‹ˆë‹¤. íŒŒê¸°ì ˆì°¨ ë° ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
          <ul className="list-disc list-inside space-y-2 pl-4">
            <li><strong>íŒŒê¸°ì ˆì°¨:</strong> íšŒì›ì´ íšŒì›ê°€ì… ë“±ì„ ìœ„í•´ ì…ë ¥í•œ ì •ë³´ëŠ” ëª©ì ì´ ë‹¬ì„±ëœ í›„ ë³„ë„ì˜ DBë¡œ ì˜®ê²¨ì ¸(ì¢…ì´ì˜ ê²½ìš° ë³„ë„ì˜ ì„œë¥˜í•¨) ë‚´ë¶€ ë°©ì¹¨ ë° ê¸°íƒ€ ê´€ë ¨ ë²•ë ¹ì— ì˜í•œ ì •ë³´ë³´í˜¸ ì‚¬ìœ ì— ë”°ë¼(ë³´ìœ  ë° ì´ìš©ê¸°ê°„ ì°¸ì¡°) ì¼ì • ê¸°ê°„ ì €ì¥ëœ í›„ íŒŒê¸°ë©ë‹ˆë‹¤.</li>
            <li><strong>íŒŒê¸°ë°©ë²•:</strong> ì „ìì  íŒŒì¼í˜•íƒœë¡œ ì €ì¥ëœ ê°œì¸ì •ë³´ëŠ” ê¸°ë¡ì„ ì¬ìƒí•  ìˆ˜ ì—†ëŠ” ê¸°ìˆ ì  ë°©ë²•ì„ ì‚¬ìš©í•˜ì—¬ ì‚­ì œí•©ë‹ˆë‹¤.</li>
          </ul>

          <h2 className="text-2xl font-semibold border-b pb-2">ì œ 6ì¡° (ì´ìš©ìì˜ ê¶Œë¦¬ì™€ ê·¸ í–‰ì‚¬ë°©ë²•)</h2>
          <p>ì´ìš©ìëŠ” ì–¸ì œë“ ì§€ ë“±ë¡ë˜ì–´ ìˆëŠ” ìì‹ ì˜ ê°œì¸ì •ë³´ë¥¼ ì¡°íšŒí•˜ê±°ë‚˜ ìˆ˜ì •í•  ìˆ˜ ìˆìœ¼ë©° ê°€ì…í•´ì§€ë¥¼ ìš”ì²­í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ê°œì¸ì •ë³´ ì¡°íšŒ, ìˆ˜ì •ì„ ìœ„í•´ì„œëŠ” â€˜í”„ë¡œí•„ ì„¤ì •â€™ ê¸°ëŠ¥ì„, ê°€ì…í•´ì§€(ë™ì˜ì² íšŒ)ë¥¼ ìœ„í•´ì„œëŠ” â€˜íšŒì›íƒˆí‡´â€™ ê¸°ëŠ¥ì„ ì´ìš©í•˜ì—¬ ë³¸ì¸ í™•ì¸ ì ˆì°¨ë¥¼ ê±°ì¹˜ì‹  í›„ ì§ì ‘ ì—´ëŒ, ì •ì • ë˜ëŠ” íƒˆí‡´ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>

          <div className="bg-destructive/10 border-l-4 border-destructive p-4 mt-6 rounded-md">
            <p className="font-bold text-destructive">ë©´ì±… ì¡°í•­</p>
            <p className="text-sm text-destructive-foreground">ë³¸ ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨ì€ `WorklyPlanning.md` ë¬¸ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ëœ ì˜ˆì‹œì´ë©°, ë²•ì  íš¨ë ¥ì„ ê°–ì§€ ì•ŠìŠµë‹ˆë‹¤. ì‹¤ì œ ì„œë¹„ìŠ¤ ìš´ì˜ ì‹œì—ëŠ” ë°˜ë“œì‹œ ë²•ë¥  ì „ë¬¸ê°€ì˜ ê²€í† ë¥¼ ê±°ì³ì•¼ í•©ë‹ˆë‹¤.</p>
          </div>
        </div>
      </div>
    </div>
  );
};

export default PrivacyPolicyPage;
</file>

<file path="frontend/src/app/settings/page.tsx">
'use client'

import { useState } from 'react'
import { 
  ChevronRightIcon, 
  GlobeAltIcon, 
  SunIcon, 
  MoonIcon, 
  ComputerDesktopIcon,
  BellIcon 
} from '@heroicons/react/24/outline'

interface SettingSectionProps {
  title: string
  description: string
  children: React.ReactNode
}

function SettingSection({ title, description, children }: SettingSectionProps) {
  return (
    <div className="space-y-4">
      <div>
        <h2 className="text-lg font-semibold text-foreground">{title}</h2>
        <p className="text-sm text-muted-foreground">{description}</p>
      </div>
      <div className="bg-card border border-border rounded-xl p-4">
        {children}
      </div>
    </div>
  )
}

export default function SettingsPage() {
  const [language, setLanguage] = useState('ko')
  const [theme, setTheme] = useState('system')
  const [notifications, setNotifications] = useState({
    taskMentions: true,
    projectUpdates: true,
    applicationApproval: false,
    deadlineReminders: true,
    systemAnnouncements: false
  })

  const languages = [
    { code: 'ko', name: 'í•œêµ­ì–´', nativeName: 'í•œêµ­ì–´' },
    { code: 'en', name: 'English', nativeName: 'English' }
  ]

  const themes = [
    { value: 'light', label: 'ë¼ì´íŠ¸ ëª¨ë“œ', icon: SunIcon },
    { value: 'dark', label: 'ë‹¤í¬ ëª¨ë“œ', icon: MoonIcon },
    { value: 'system', label: 'ì‹œìŠ¤í…œ ì„¤ì •', icon: ComputerDesktopIcon }
  ]

  const notificationSettings = [
    { key: 'taskMentions', label: 'ì—…ë¬´ ë©˜ì…˜', description: 'ì—…ë¬´ì—ì„œ ë‚˜ë¥¼ ì–¸ê¸‰í–ˆì„ ë•Œ' },
    { key: 'projectUpdates', label: 'í”„ë¡œì íŠ¸ ì—…ë°ì´íŠ¸', description: 'ì°¸ì—¬ ì¤‘ì¸ í”„ë¡œì íŠ¸ì˜ ìƒˆë¡œìš´ ì†Œì‹' },
    { key: 'applicationApproval', label: 'ì§€ì›ì„œ ìŠ¹ì¸', description: 'í”„ë¡œì íŠ¸ ì§€ì›ì„œê°€ ìŠ¹ì¸ë˜ì—ˆì„ ë•Œ' },
    { key: 'deadlineReminders', label: 'ë§ˆê°ì¼ ì•Œë¦¼', description: 'ì—…ë¬´ ë§ˆê°ì¼ì´ ë‹¤ê°€ì™”ì„ ë•Œ' },
    { key: 'systemAnnouncements', label: 'ì‹œìŠ¤í…œ ê³µì§€', description: 'ì›Œí´ë¦¬ì˜ ìƒˆë¡œìš´ ê¸°ëŠ¥ì´ë‚˜ ê³µì§€ì‚¬í•­' }
  ]

  const handleNotificationChange = (key: string) => {
    setNotifications(prev => ({
      ...prev,
      [key]: !prev[key as keyof typeof prev]
    }))
  }

  return (
    <div className="min-h-screen bg-background">
      {/* í—¤ë” */}
      <div className="sticky top-0 bg-background border-b border-border z-10">
        <div className="max-w-[720px] mx-auto px-0 md:px-6 py-4">
          <h1 className="text-xl font-bold text-foreground">ì„¤ì •</h1>
        </div>
      </div>

      {/* ì„¤ì • ë‚´ìš© */}
      <div className="max-w-[720px] mx-auto p-4 md:p-6 space-y-8">
        {/* ì–¸ì–´ ì„¤ì • */}
        <SettingSection 
          title="ì–¸ì–´ ì„¤ì •"
          description="ì•±ì—ì„œ ì‚¬ìš©í•  ì–¸ì–´ë¥¼ ì„ íƒí•˜ì„¸ìš”"
        >
          <div className="space-y-2">
            {languages.map((lang) => (
              <button
                key={lang.code}
                onClick={() => setLanguage(lang.code)}
                className={`w-full flex items-center justify-between p-3 rounded-lg transition-colors ${
                  language === lang.code 
                    ? 'bg-accent text-foreground' 
                    : 'hover:bg-accent/50 text-muted-foreground'
                }`}
              >
                <div className="flex items-center gap-3">
                  <GlobeAltIcon className="w-5 h-5" />
                  <div className="text-left">
                    <div className="font-medium">{lang.nativeName}</div>
                    <div className="text-sm text-muted-foreground">{lang.name}</div>
                  </div>
                </div>
                {language === lang.code && (
                  <div className="w-2 h-2 bg-foreground rounded-full" />
                )}
              </button>
            ))}
          </div>
        </SettingSection>

        {/* í…Œë§ˆ ì„¤ì • */}
        <SettingSection 
          title="í™”ë©´ í…Œë§ˆ"
          description="ë¼ì´íŠ¸ ëª¨ë“œ, ë‹¤í¬ ëª¨ë“œ, ë˜ëŠ” ì‹œìŠ¤í…œ ì„¤ì •ì„ ë”°ë¦…ë‹ˆë‹¤"
        >
          <div className="space-y-2">
            {themes.map((themeOption) => {
              const Icon = themeOption.icon
              return (
                <button
                  key={themeOption.value}
                  onClick={() => setTheme(themeOption.value)}
                  className={`w-full flex items-center justify-between p-3 rounded-lg transition-colors ${
                    theme === themeOption.value 
                      ? 'bg-accent text-foreground' 
                      : 'hover:bg-accent/50 text-muted-foreground'
                  }`}
                >
                  <div className="flex items-center gap-3">
                    <Icon className="w-5 h-5" />
                    <span className="font-medium">{themeOption.label}</span>
                  </div>
                  {theme === themeOption.value && (
                    <div className="w-2 h-2 bg-foreground rounded-full" />
                  )}
                </button>
              )
            })}
          </div>
        </SettingSection>

        {/* ì•Œë¦¼ ì„¤ì • */}
        <SettingSection 
          title="ì•Œë¦¼ ì„¤ì •"
          description="ë°›ê³  ì‹¶ì€ ì•Œë¦¼ì„ ì„ íƒí•˜ì„¸ìš”"
        >
          <div className="space-y-4">
            {notificationSettings.map((setting) => (
              <div key={setting.key} className="flex items-center justify-between">
                <div className="flex items-start gap-3 flex-1">
                  <BellIcon className="w-5 h-5 text-muted-foreground mt-0.5" />
                  <div>
                    <div className="font-medium text-foreground">{setting.label}</div>
                    <div className="text-sm text-muted-foreground">{setting.description}</div>
                  </div>
                </div>
                <button
                  onClick={() => handleNotificationChange(setting.key)}
                  className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-foreground ${
                    notifications[setting.key as keyof typeof notifications]
                      ? 'bg-foreground'
                      : 'bg-muted'
                  }`}
                >
                  <span
                    className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${
                      notifications[setting.key as keyof typeof notifications]
                        ? 'translate-x-6'
                        : 'translate-x-1'
                    }`}
                  />
                </button>
              </div>
            ))}
          </div>
        </SettingSection>

        {/* ì¶”ê°€ ì˜µì…˜ */}
        <div className="pt-8 border-t border-border">
          <div className="space-y-2">
            <button className="w-full flex items-center justify-between p-4 text-left hover:bg-accent rounded-lg transition-colors">
              <span className="text-foreground">ê³„ì • ì •ë³´</span>
              <ChevronRightIcon className="w-5 h-5 text-muted-foreground" />
            </button>
            <button className="w-full flex items-center justify-between p-4 text-left hover:bg-accent rounded-lg transition-colors">
              <span className="text-foreground">ë°ì´í„° ë‚´ë³´ë‚´ê¸°</span>
              <ChevronRightIcon className="w-5 h-5 text-muted-foreground" />
            </button>
            <button className="w-full flex items-center justify-between p-4 text-left hover:bg-accent rounded-lg transition-colors">
              <span className="text-foreground">ë„ì›€ë§</span>
              <ChevronRightIcon className="w-5 h-5 text-muted-foreground" />
            </button>
            <button className="w-full flex items-center justify-between p-4 text-left hover:bg-accent rounded-lg transition-colors text-red-600">
              <span>ë¡œê·¸ì•„ì›ƒ</span>
              <ChevronRightIcon className="w-5 h-5" />
            </button>
          </div>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="frontend/src/app/tasks/page.tsx">
'use client';

import React, { useState, useEffect } from 'react';
import { Plus, Search, Filter, SortAsc, SortDesc } from 'lucide-react';
import MainContainer from '@/components/layout/MainContainer';
import TaskList from '@/components/tasks/TaskList';
import TaskFilters from '@/components/tasks/TaskFilters';
import TaskCreationWizard from '@/components/tasks/TaskCreationWizard';
import { apiClient } from '@/lib/api';
import { Task, CreateTaskDto, TaskStatus, SmartFilter } from '@/types/task.types';

interface TaskCounts {
  today: number;
  completed: number;
  all: number;
}

interface SortOption {
  value: string;
  label: string;
  field: keyof Task;
  direction: 'asc' | 'desc';
}

const SORT_OPTIONS: SortOption[] = [
  { value: 'dueDate-asc', label: 'ë§ˆê°ì¼ ë¹ ë¥¸ ìˆœ', field: 'dueDate', direction: 'asc' },
  { value: 'dueDate-desc', label: 'ë§ˆê°ì¼ ëŠ¦ì€ ìˆœ', field: 'dueDate', direction: 'desc' },
  { value: 'priority-desc', label: 'ìš°ì„ ìˆœìœ„ ë†’ì€ ìˆœ', field: 'priority', direction: 'desc' },
  { value: 'priority-asc', label: 'ìš°ì„ ìˆœìœ„ ë‚®ì€ ìˆœ', field: 'priority', direction: 'asc' },
  { value: 'createdAt-desc', label: 'ìµœê·¼ ìƒì„± ìˆœ', field: 'createdAt', direction: 'desc' },
  { value: 'createdAt-asc', label: 'ì˜¤ë˜ëœ ìˆœ', field: 'createdAt', direction: 'asc' },
  { value: 'title-asc', label: 'ì œëª© A-Z', field: 'title', direction: 'asc' },
  { value: 'title-desc', label: 'ì œëª© Z-A', field: 'title', direction: 'desc' }
];

const PRIORITY_ORDER = {
  urgent: 4,
  high: 3,
  medium: 2,
  low: 1
};

export default function TasksPage() {
  const [tasks, setTasks] = useState<Task[]>([]);
  const [filteredTasks, setFilteredTasks] = useState<Task[]>([]);
  const [taskCounts, setTaskCounts] = useState<TaskCounts>({ today: 0, completed: 0, all: 0 });
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  // í•„í„° ë° ê²€ìƒ‰ ìƒíƒœ
  const [currentFilter, setCurrentFilter] = useState<SmartFilter>('today');
  const [searchQuery, setSearchQuery] = useState('');
  const [sortOption, setSortOption] = useState<string>('dueDate-asc');

  // UI ìƒíƒœ
  const [isCreationWizardOpen, setIsCreationWizardOpen] = useState(false);
  const [projects, setProjects] = useState<Array<{ id: string; name: string }>>([]);
  const [assignees, setAssignees] = useState<Array<{ id: string; firstName: string; lastName: string }>>([]);

  // ë°ì´í„° ë¡œë“œ
  useEffect(() => {
    loadTasks();
    loadProjects();
    loadAssignees();
  }, []);

  // í•„í„° ë° ì •ë ¬ ì ìš©
  useEffect(() => {
    applyFiltersAndSort();
  }, [tasks, currentFilter, searchQuery, sortOption]);

  const loadTasks = async () => {
    try {
      setIsLoading(true);
      setError(null);

      // ëª¨ë“  íƒœìŠ¤í¬ ë¡œë“œ
      const allTasks = await apiClient.get<Task[]>('/tasks');
      setTasks(allTasks);

      // ìŠ¤ë§ˆíŠ¸ í•„í„°ë³„ ì¹´ìš´íŠ¸ ê³„ì‚°
      const today = new Date();
      today.setHours(23, 59, 59, 999); // ì˜¤ëŠ˜ ëê¹Œì§€

      const todayTasks = allTasks.filter(task => {
        if (!task.dueDate) return false;
        const dueDate = new Date(task.dueDate);
        return dueDate <= today && task.status !== TaskStatus.DONE;
      });

      const completedTasks = allTasks.filter(task => task.status === TaskStatus.DONE);

      setTaskCounts({
        today: todayTasks.length,
        completed: completedTasks.length,
        all: allTasks.length
      });

    } catch (err) {
      console.error('íƒœìŠ¤í¬ ë¡œë“œ ì‹¤íŒ¨:', err);
      setError('íƒœìŠ¤í¬ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
    } finally {
      setIsLoading(false);
    }
  };

  const loadProjects = async () => {
    try {
      const projectsData = await apiClient.get<Array<{ id: string; name: string }>>('/projects');
      setProjects(projectsData);
    } catch (err) {
      console.error('í”„ë¡œì íŠ¸ ë¡œë“œ ì‹¤íŒ¨:', err);
    }
  };

  const loadAssignees = async () => {
    try {
      const assigneesData = await apiClient.get<Array<{ id: string; firstName: string; lastName: string }>>('/users');
      setAssignees(assigneesData);
    } catch (err) {
      console.error('ì‚¬ìš©ì ë¡œë“œ ì‹¤íŒ¨:', err);
    }
  };

  const applyFiltersAndSort = () => {
    let filtered = [...tasks];

    // ìŠ¤ë§ˆíŠ¸ í•„í„° ì ìš©
    const today = new Date();
    today.setHours(23, 59, 59, 999);

    switch (currentFilter) {
      case 'today':
        filtered = filtered.filter(task => {
          if (!task.dueDate) return false;
          const dueDate = new Date(task.dueDate);
          return dueDate <= today && task.status !== TaskStatus.DONE;
        });
        break;
      case 'completed':
        filtered = filtered.filter(task => task.status === TaskStatus.DONE);
        break;
      case 'all':
      default:
        // ëª¨ë“  íƒœìŠ¤í¬ í‘œì‹œ
        break;
    }

    // ê²€ìƒ‰ ì¿¼ë¦¬ ì ìš©
    if (searchQuery.trim()) {
      const query = searchQuery.toLowerCase();
      filtered = filtered.filter(task => 
        task.title.toLowerCase().includes(query) ||
        task.description?.toLowerCase().includes(query) ||
        task.tags?.some(tag => tag.toLowerCase().includes(query))
      );
    }

    // ì •ë ¬ ì ìš©
    const sortConfig = SORT_OPTIONS.find(opt => opt.value === sortOption);
    if (sortConfig) {
      filtered.sort((a, b) => {
        let aValue = a[sortConfig.field];
        let bValue = b[sortConfig.field];

        // íŠ¹ë³„í•œ ì •ë ¬ ë¡œì§
        if (sortConfig.field === 'priority') {
          aValue = PRIORITY_ORDER[a.priority as keyof typeof PRIORITY_ORDER] || 0;
          bValue = PRIORITY_ORDER[b.priority as keyof typeof PRIORITY_ORDER] || 0;
        } else if (sortConfig.field === 'dueDate') {
          // null ê°’ ì²˜ë¦¬
          if (!aValue && !bValue) return 0;
          if (!aValue) return sortConfig.direction === 'asc' ? 1 : -1;
          if (!bValue) return sortConfig.direction === 'asc' ? -1 : 1;
          aValue = new Date(aValue as string).getTime();
          bValue = new Date(bValue as string).getTime();
        } else if (sortConfig.field === 'createdAt') {
          aValue = new Date(aValue as string).getTime();
          bValue = new Date(bValue as string).getTime();
        }

        if (aValue === bValue) return 0;
        
        const result = aValue < bValue ? -1 : 1;
        return sortConfig.direction === 'asc' ? result : -result;
      });
    }

    setFilteredTasks(filtered);
  };

  const handleCreateTask = async (taskData: CreateTaskDto) => {
    try {
      await apiClient.post<Task>('/tasks', taskData);
      await loadTasks(); // íƒœìŠ¤í¬ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
    } catch (err) {
      console.error('íƒœìŠ¤í¬ ìƒì„± ì‹¤íŒ¨:', err);
      throw err;
    }
  };

  const handleStatusChange = async (taskId: string, status: TaskStatus) => {
    try {
      await apiClient.put(`/tasks/${taskId}`, { status });
      await loadTasks(); // íƒœìŠ¤í¬ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
    } catch (err) {
      console.error('íƒœìŠ¤í¬ ìƒíƒœ ë³€ê²½ ì‹¤íŒ¨:', err);
    }
  };

  const handleTaskEdit = (task: Task) => {
    // TODO: íƒœìŠ¤í¬ í¸ì§‘ ëª¨ë‹¬ ë˜ëŠ” í˜ì´ì§€ë¡œ ì´ë™
    console.log('Edit task:', task);
  };

  const handleTaskDelete = async (task: Task) => {
    if (confirm(`"${task.title}" íƒœìŠ¤í¬ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
      try {
        await apiClient.delete(`/tasks/${task.id}`);
        await loadTasks(); // íƒœìŠ¤í¬ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
      } catch (err) {
        console.error('íƒœìŠ¤í¬ ì‚­ì œ ì‹¤íŒ¨:', err);
      }
    }
  };

  if (error) {
    return (
      <MainContainer className="px-4">
        <div className="bg-red-50 border border-red-200 rounded-lg p-4 text-center">
          <p className="text-red-600">{error}</p>
          <button
            onClick={loadTasks}
            className="mt-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700"
          >
            ë‹¤ì‹œ ì‹œë„
          </button>
        </div>
      </MainContainer>
    );
  }

  return (
    <MainContainer className="px-4">
      {/* í—¤ë” */}
      <div className="flex items-center justify-between mb-8">
        <div>
          <h1 className="text-3xl font-bold text-gray-900">íƒœìŠ¤í¬ ê´€ë¦¬</h1>
          <p className="text-gray-600 mt-1">GTD ë°©ë²•ë¡ ì„ í™œìš©í•œ ì²´ê³„ì ì¸ íƒœìŠ¤í¬ ê´€ë¦¬</p>
        </div>
        <button
          onClick={() => setIsCreationWizardOpen(true)}
          className="flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
        >
          <Plus className="w-5 h-5" />
          <span>ìƒˆ íƒœìŠ¤í¬</span>
        </button>
      </div>

      {/* í•„í„° ë° ê²€ìƒ‰ */}
      <div className="space-y-4 mb-6">
        {/* ìŠ¤ë§ˆíŠ¸ í•„í„° */}
        <TaskFilters
          currentFilter={currentFilter}
          onFilterChange={setCurrentFilter}
          taskCounts={taskCounts}
        />

        {/* ê²€ìƒ‰ ë° ì •ë ¬ */}
        <div className="flex flex-col sm:flex-row gap-4">
          {/* ê²€ìƒ‰ */}
          <div className="flex-1 relative">
            <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5" />
            <input
              type="text"
              placeholder="íƒœìŠ¤í¬ ì œëª©, ì„¤ëª…, íƒœê·¸ë¡œ ê²€ìƒ‰..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            />
          </div>

          {/* ì •ë ¬ */}
          <div className="flex items-center space-x-2">
            <Filter className="w-5 h-5 text-gray-400" />
            <select
              value={sortOption}
              onChange={(e) => setSortOption(e.target.value)}
              className="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            >
              {SORT_OPTIONS.map((option) => (
                <option key={option.value} value={option.value}>
                  {option.label}
                </option>
              ))}
            </select>
          </div>
        </div>
      </div>

      {/* ê²°ê³¼ í‘œì‹œ */}
      <div className="mb-4">
        <p className="text-sm text-gray-600">
          ì´ {filteredTasks.length}ê°œì˜ íƒœìŠ¤í¬
          {searchQuery && ` (ê²€ìƒ‰: "${searchQuery}")`}
        </p>
      </div>

      {/* íƒœìŠ¤í¬ ëª©ë¡ */}
      <TaskList
        tasks={filteredTasks}
        onStatusChange={handleStatusChange}
        onTaskEdit={handleTaskEdit}
        onTaskDelete={handleTaskDelete}
        isLoading={isLoading}
        emptyMessage={
          currentFilter === 'today' 
            ? 'ì˜¤ëŠ˜ í•´ì•¼ í•  íƒœìŠ¤í¬ê°€ ì—†ìŠµë‹ˆë‹¤.'
            : currentFilter === 'completed'
            ? 'ì™„ë£Œëœ íƒœìŠ¤í¬ê°€ ì—†ìŠµë‹ˆë‹¤.'
            : searchQuery
            ? 'ê²€ìƒ‰ ì¡°ê±´ì— ë§ëŠ” íƒœìŠ¤í¬ê°€ ì—†ìŠµë‹ˆë‹¤.'
            : 'ë“±ë¡ëœ íƒœìŠ¤í¬ê°€ ì—†ìŠµë‹ˆë‹¤.'
        }
      />

      {/* íƒœìŠ¤í¬ ìƒì„± ë§ˆë²•ì‚¬ */}
      <TaskCreationWizard
        isOpen={isCreationWizardOpen}
        onClose={() => setIsCreationWizardOpen(false)}
        onSubmit={handleCreateTask}
        projects={projects}
        assignees={assignees}
      />
    </MainContainer>
  );
}
</file>

<file path="frontend/src/app/terms/page.tsx">
import React from 'react';

const TermsOfServicePage = () => {
  return (
    <div className="min-h-screen bg-background text-foreground">
      <div className="max-w-[720px] mx-auto px-4 py-12">
        <h1 className="text-4xl font-bold mb-8 text-center">ì„œë¹„ìŠ¤ ì•½ê´€</h1>
        <div className="space-y-6 bg-card p-8 rounded-lg shadow-md">
          <p className="text-muted-foreground">ìµœì¢… ìˆ˜ì •ì¼: 2025ë…„ 7ì›” 26ì¼</p>

          <h2 className="text-2xl font-semibold border-b pb-2">ì œ 1ì¡° (ëª©ì )</h2>
          <p>ì´ ì•½ê´€ì€ ì›Œí´ë¦¬(ì´í•˜ "íšŒì‚¬")ê°€ ì œê³µí•˜ëŠ” ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ ê¸°ë°˜ ìƒì‚°ì„± ì• í”Œë¦¬ì¼€ì´ì…˜ ë° ê´€ë ¨ ì œë°˜ ì„œë¹„ìŠ¤(ì´í•˜ "ì„œë¹„ìŠ¤")ì˜ ì´ìš©ê³¼ ê´€ë ¨í•˜ì—¬ íšŒì‚¬ì™€ íšŒì›ê³¼ì˜ ê¶Œë¦¬, ì˜ë¬´ ë° ì±…ì„ì‚¬í•­, ê¸°íƒ€ í•„ìš”í•œ ì‚¬í•­ì„ ê·œì •í•¨ì„ ëª©ì ìœ¼ë¡œ í•©ë‹ˆë‹¤.</p>

          <h2 className="text-2xl font-semibold border-b pb-2">ì œ 2ì¡° (ìš©ì–´ì˜ ì •ì˜)</h2>
          <p>ë³¸ ì•½ê´€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ìš©ì–´ì˜ ì •ì˜ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
          <ul className="list-disc list-inside space-y-2 pl-4">
            <li>"íšŒì›": ë³¸ ì•½ê´€ì— ë™ì˜í•˜ê³  íšŒì‚¬ê°€ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ëŠ” ê°œì¸ ë˜ëŠ” íŒ€.</li>
            <li>"XP (ê²½í—˜ì¹˜)": ì„œë¹„ìŠ¤ ë‚´ì—ì„œ íŠ¹ì • í™œë™ì„ ì™„ë£Œí•˜ê³  ì–»ëŠ” ë³´ìƒ í¬ì¸íŠ¸.</li>
            <li>"í”„ë¡œì íŠ¸": íšŒì›ì´ ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•´ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ëŠ” ì‘ì—… ê³µê°„.</li>
            <li>"ì„ë¬´ ê²Œì‹œíŒ": ì™¸ë¶€ í´ë¼ì´ì–¸íŠ¸ ë˜ëŠ” ë‹¤ë¥¸ íšŒì›ì´ ìœ ë£Œ ì—…ë¬´ë¥¼ ê²Œì‹œí•˜ê³ , íšŒì›ì´ ì´ë¥¼ ìˆ˜í–‰í•˜ì—¬ ìˆ˜ìµì„ ì°½ì¶œí•  ìˆ˜ ìˆëŠ” ë§ˆì¼“í”Œë ˆì´ìŠ¤.</li>
            <li>"ì§€ì‹ ìœ„í‚¤": íšŒì›ì´ ìƒì„±í•˜ê³  ì»¤ë®¤ë‹ˆí‹°ê°€ ê´€ë¦¬í•˜ëŠ” ì§€ì‹ ë² ì´ìŠ¤.</li>
            <li>"ì›Œí¬ìŠ¤í˜ì´ìŠ¤": íŒ€ ë° ê¸°ì—… ì‚¬ìš©ìë¥¼ ìœ„í•œ í”„ë¦¬ë¯¸ì—„ ì¤‘ì•™ í—ˆë¸Œ.</li>
          </ul>

          <h2 className="text-2xl font-semibold border-b pb-2">ì œ 3ì¡° (ì„œë¹„ìŠ¤ì˜ ì œê³µ ë° ë³€ê²½)</h2>
          <p>1. íšŒì‚¬ëŠ” íšŒì›ì—ê²Œ GTD(Getting Things Done) ë°©ë²•ë¡ ì— ê¸°ë°˜í•œ ì—…ë¬´ ê´€ë¦¬, í”„ë¡œì íŠ¸ í˜‘ì—…, ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ì„ í†µí•œ ë™ê¸° ë¶€ì—¬, í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë¦¬ ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
          <p>2. íšŒì‚¬ëŠ” ìƒë‹¹í•œ ì´ìœ ê°€ ìˆëŠ” ê²½ìš°ì— ìš´ì˜ìƒ, ê¸°ìˆ ìƒì˜ í•„ìš”ì— ë”°ë¼ ì œê³µí•˜ê³  ìˆëŠ” ì „ë¶€ ë˜ëŠ” ì¼ë¶€ ì„œë¹„ìŠ¤ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
          <p>3. ë¬´ë£Œ ì„œë¹„ìŠ¤ëŠ” ê°œì¸ ì‚¬ìš©ìë¥¼ ëŒ€ìƒìœ¼ë¡œ í•˜ë©°, íšŒì‚¬ëŠ” ìœ ë£Œ êµ¬ë… ëª¨ë¸("ì›Œí¬ìŠ¤í˜ì´ìŠ¤ í”„ë¡œ", "ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì—”í„°í”„ë¼ì´ì¦ˆ")ì„ í†µí•´ ê³ ê¸‰ ê¸°ëŠ¥ ë° ê´€ë¦¬ ë„êµ¬ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

          <h2 className="text-2xl font-semibold border-b pb-2">ì œ 4ì¡° (íšŒì›ì˜ ì˜ë¬´ ë° ì±…ì„)</h2>
          <p>1. íšŒì›ì€ ìì‹ ì˜ ê³„ì • ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•  ì±…ì„ì´ ìˆìŠµë‹ˆë‹¤.</p>
          <p>2. íšŒì›ì€ ë‹¤ìŒ ê° í˜¸ì— í•´ë‹¹í•˜ëŠ” í–‰ìœ„ë¥¼ í•˜ì—¬ì„œëŠ” ì•ˆ ë©ë‹ˆë‹¤.</p>
          <ul className="list-disc list-inside space-y-2 pl-4">
            <li>íƒ€ì¸ì˜ ì •ë³´ë¥¼ ë„ìš©í•˜ëŠ” í–‰ìœ„</li>
            <li>ì„œë¹„ìŠ¤ì˜ ìš´ì˜ì„ ê³ ì˜ë¡œ ë°©í•´í•˜ëŠ” í–‰ìœ„</li>
            <li>ê³µê³µì§ˆì„œ ë° ë¯¸í’ì–‘ì†ì— ì €í•´ë˜ëŠ” ë‚´ìš©ì„ ìœ í¬í•˜ëŠ” í–‰ìœ„ (ì˜ˆ: ì§€ì‹ ìœ„í‚¤, í”„ë¡œì íŠ¸ ì‡¼ì¼€ì´ìŠ¤ ë“±)</li>
            <li>íšŒì‚¬ì˜ ì§€ì ì¬ì‚°ê¶Œì„ ì¹¨í•´í•˜ëŠ” í–‰ìœ„</li>
          </ul>
          <p>3. íšŒì›ì€ "ì„ë¬´ ê²Œì‹œíŒ"ì„ í†µí•´ ë°œìƒí•˜ëŠ” ëª¨ë“  ê±°ë˜ì™€ ê³„ì•½ì— ëŒ€í•´ ìŠ¤ìŠ¤ë¡œ ì±…ì„ì„ ì§‘ë‹ˆë‹¤. íšŒì‚¬ëŠ” íšŒì› ê°„ì˜ ê±°ë˜ë¥¼ ì¤‘ê°œí•  ë¿, ê³„ì•½ì˜ ë‹¹ì‚¬ìê°€ ì•„ë‹™ë‹ˆë‹¤.</p>

          <h2 className="text-2xl font-semibold border-b pb-2">ì œ 5ì¡° (ì‚¬ìš©ì ìƒì„± ì½˜í…ì¸ )</h2>
          <p>1. íšŒì›ì´ ì„œë¹„ìŠ¤ ë‚´ì— ê²Œì‹œí•˜ëŠ” ëª¨ë“  ì½˜í…ì¸ (ì—…ë¬´, í”„ë¡œì íŠ¸, ìœ„í‚¤ ë¬¸ì„œ, ì‡¼ì¼€ì´ìŠ¤ ê²Œì‹œë¬¼ ë“±)ì— ëŒ€í•œ ì €ì‘ê¶Œì€ í•´ë‹¹ ì½˜í…ì¸ ë¥¼ ê²Œì‹œí•œ íšŒì›ì—ê²Œ ìˆìŠµë‹ˆë‹¤.</p>
          <p>2. íšŒì›ì€ íšŒì‚¬ì— ì„œë¹„ìŠ¤ ìš´ì˜, í™ë³´, ê°œì„ ì„ ìœ„í•´ í•„ìš”í•œ ë²”ìœ„ ë‚´ì—ì„œ í•´ë‹¹ ì½˜í…ì¸ ë¥¼ ì‚¬ìš©, ì €ì¥, ë³µì œ, ìˆ˜ì •, ë°°í¬í•  ìˆ˜ ìˆëŠ” ë¹„ë…ì ì ì´ê³  ì „ ì„¸ê³„ì ì¸ ë¼ì´ì„ ìŠ¤ë¥¼ ë¶€ì—¬í•©ë‹ˆë‹¤.</p>

          <h2 className="text-2xl font-semibold border-b pb-2">ì œ 6ì¡° (ì„œë¹„ìŠ¤ ì´ìš©ì˜ ì œí•œ ë° ì •ì§€)</h2>
          <p>íšŒì‚¬ëŠ” íšŒì›ì´ ë³¸ ì•½ê´€ì˜ ì˜ë¬´ë¥¼ ìœ„ë°˜í•˜ê±°ë‚˜ ì„œë¹„ìŠ¤ì˜ ì •ìƒì ì¸ ìš´ì˜ì„ ë°©í•´í•œ ê²½ìš°, ê²½ê³ , ì¼ì‹œì •ì§€, ì˜êµ¬ì´ìš©ì •ì§€ ë“±ìœ¼ë¡œ ì„œë¹„ìŠ¤ ì´ìš©ì„ ë‹¨ê³„ì ìœ¼ë¡œ ì œí•œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
          
          <div className="bg-destructive/10 border-l-4 border-destructive p-4 mt-6 rounded-md">
            <p className="font-bold text-destructive">ë©´ì±… ì¡°í•­</p>
            <p className="text-sm text-destructive-foreground">ë³¸ ì„œë¹„ìŠ¤ ì•½ê´€ì€ `WorklyPlanning.md` ë¬¸ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ëœ ì˜ˆì‹œì´ë©°, ë²•ì  íš¨ë ¥ì„ ê°–ì§€ ì•ŠìŠµë‹ˆë‹¤. ì‹¤ì œ ì„œë¹„ìŠ¤ ìš´ì˜ ì‹œì—ëŠ” ë°˜ë“œì‹œ ë²•ë¥  ì „ë¬¸ê°€ì˜ ê²€í† ë¥¼ ê±°ì³ì•¼ í•©ë‹ˆë‹¤.</p>
          </div>
        </div>
      </div>
    </div>
  );
};

export default TermsOfServicePage;
</file>

<file path="frontend/src/components/layout/MainContainer.tsx">
'use client'

import { ReactNode } from 'react'

interface MainContainerProps {
  children: ReactNode
  className?: string
}

/**
 * ë©”ì¸ ì»¨í…ì¸  ì˜ì—­ ì»¨í…Œì´ë„ˆ
 * - ë°ìŠ¤í¬í†±: 720px ê³ ì •í­, ì¤‘ì•™ ì •ë ¬
 * - ëª¨ë°”ì¼: ì¢Œìš° ì—¬ë°± ì—†ì´ ì „ì²´ í­ ì‚¬ìš©
 */
export default function MainContainer({ children, className = '' }: MainContainerProps) {
  return (
    <main 
      className={`
        w-full 
        max-w-[720px] 
        mx-auto 
        px-0 md:px-0
        ${className}
      `}
      role="main"
    >
      {children}
    </main>
  )
}
</file>

<file path="frontend/src/components/projects/ProjectChatChannel.tsx">
'use client'

import React, { useState, useEffect, useRef } from 'react'
import { Send, Plus, Paperclip, Smile, MoreHorizontal, User, Calendar, Hash, ArrowLeft, PanelRightOpen, PanelRightClose } from 'lucide-react'
import { useRouter } from 'next/navigation'
import { Project, ProjectMember } from '@/types/project.types'
import SlashCommandInput from './SlashCommandInput'
import { useScrollVisibility } from '@/hooks/useScrollVisibility'

// ì±„íŒ… ë©”ì‹œì§€ íƒ€ì…
interface ChatMessage {
  id: string
  type: 'message' | 'system' | 'task_created' | 'milestone_update'
  content: string
  userId: string
  user: {
    id: string
    name: string
    avatar?: string
  }
  timestamp: string
  metadata?: any
  isEdited?: boolean
  editedAt?: string
  mentions?: string[]
  attachments?: {
    id: string
    name: string
    type: string
    url: string
    size: number
  }[]
  slashCommandResult?: {
    type: 'task_created' | 'milestone_set' | 'user_delegated'
    data: any
  }
}

interface ProjectChatChannelProps {
  project: Project
  members: ProjectMember[]
  isSidebarOpen?: boolean
  isMobile?: boolean
  onToggleSidebar?: () => void
  onTaskCreate?: (taskData: any) => void
  onMilestoneCreate?: (milestoneData: any) => void
  onUserDelegate?: (delegationData: any) => void
}

export default function ProjectChatChannel({ 
  project, 
  members,
  isSidebarOpen = true,
  isMobile = false,
  onToggleSidebar,
  onTaskCreate,
  onMilestoneCreate,
  onUserDelegate
}: ProjectChatChannelProps) {
  const router = useRouter()
  const [messages, setMessages] = useState<ChatMessage[]>([])
  const [newMessage, setNewMessage] = useState('')
  const [isSlashCommandMode, setIsSlashCommandMode] = useState(false)
  const [isLoading, setIsLoading] = useState(false)
  const [isKeyboardVisible, setIsKeyboardVisible] = useState(false)
  const messagesEndRef = useRef<HTMLDivElement>(null)
  const inputRef = useRef<HTMLInputElement>(null)
  
  // ìŠ¤í¬ë¡¤ ê°€ì‹œì„± ê´€ë¦¬
  const { elementRef: messageScrollRef } = useScrollVisibility({
    hideDelay: 1500,
    showOnHover: true
  })

  // ëª©ì—… ë©”ì‹œì§€ ë°ì´í„°
  useEffect(() => {
    const mockMessages: ChatMessage[] = [
      {
        id: '1',
        type: 'system',
        content: `${project.title} í”„ë¡œì íŠ¸ ì±„ë„ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!`,
        userId: 'system',
        user: { id: 'system', name: 'System' },
        timestamp: new Date(Date.now() - 86400000).toISOString(), // 1ì¼ ì „
      },
      {
        id: '2',
        type: 'message',
        content: 'ì•ˆë…•í•˜ì„¸ìš”! í”„ë¡œì íŠ¸ í‚¥ì˜¤í”„ ë¯¸íŒ… ì¼ì •ì„ ê³µìœ ë“œë¦½ë‹ˆë‹¤.',
        userId: 'user1',
        user: { id: 'user1', name: 'ê¹€ì›Œí´ë¦¬', avatar: 'ğŸ‘¤' },
        timestamp: new Date(Date.now() - 3600000).toISOString(), // 1ì‹œê°„ ì „
      },
      {
        id: '3',
        type: 'task_created',
        content: '/add-task UI ëª©ì—… ë””ìì¸ ì™„ë£Œ @ê¹€ë””ìì´ë„ˆ 2024-01-30',
        userId: 'user2',
        user: { id: 'user2', name: 'ë°•ë§¤ë‹ˆì €', avatar: 'ğŸ‘¨â€ğŸ’¼' },
        timestamp: new Date(Date.now() - 1800000).toISOString(), // 30ë¶„ ì „
        slashCommandResult: {
          type: 'task_created',
          data: {
            title: 'UI ëª©ì—… ë””ìì¸ ì™„ë£Œ',
            assignee: 'ê¹€ë””ìì´ë„ˆ',
            dueDate: '2024-01-30'
          }
        }
      },
      {
        id: '4',
        type: 'message',
        content: 'ë„¤, í™•ì¸í–ˆìŠµë‹ˆë‹¤! ë‚´ì¼ê¹Œì§€ ì™„ë£Œí•˜ê² ìŠµë‹ˆë‹¤.',
        userId: 'user3',
        user: { id: 'user3', name: 'ê¹€ë””ìì´ë„ˆ', avatar: 'ğŸ¨' },
        timestamp: new Date(Date.now() - 900000).toISOString(), // 15ë¶„ ì „
      }
    ]
    setMessages(mockMessages)
  }, [project.title])

  // ë©”ì‹œì§€ ëª©ë¡ ìŠ¤í¬ë¡¤ ìë™ ì´ë™
  useEffect(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })
  }, [messages])


  // ëª¨ë°”ì¼ í‚¤ë³´ë“œ ê°ì§€ ë° viewport ì²˜ë¦¬
  useEffect(() => {
    if (!isMobile) return

    const handleResize = () => {
      const viewport = window.visualViewport
      if (viewport) {
        const keyboardHeight = window.innerHeight - viewport.height
        setIsKeyboardVisible(keyboardHeight > 100)
      }
    }

    const handleFocus = () => {
      if (isMobile) {
        setTimeout(() => {
          messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })
        }, 300)
      }
    }

    window.visualViewport?.addEventListener('resize', handleResize)
    inputRef.current?.addEventListener('focus', handleFocus)

    return () => {
      window.visualViewport?.removeEventListener('resize', handleResize)
      inputRef.current?.removeEventListener('focus', handleFocus)
    }
  }, [isMobile])

  // ì…ë ¥ ë³€í™” ê°ì§€ (ìŠ¬ë˜ì‹œ ëª…ë ¹ì–´ ëª¨ë“œ)
  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const value = e.target.value
    setNewMessage(value)
    
    // ìŠ¬ë˜ì‹œ ëª…ë ¹ì–´ ê°ì§€
    if (value.startsWith('/')) {
      setIsSlashCommandMode(true)
    } else {
      setIsSlashCommandMode(false)
    }
  }

  // ì¼ë°˜ ë©”ì‹œì§€ ì „ì†¡
  const handleSendMessage = async () => {
    if (!newMessage.trim() || isLoading) return

    const message: ChatMessage = {
      id: Date.now().toString(),
      type: 'message',
      content: newMessage,
      userId: 'current_user',
      user: { id: 'current_user', name: 'ë‚˜', avatar: 'ğŸ‘¤' },
      timestamp: new Date().toISOString(),
    }

    setMessages(prev => [...prev, message])
    setNewMessage('')
    setIsSlashCommandMode(false)
  }

  // ìŠ¬ë˜ì‹œ ëª…ë ¹ì–´ ì‹¤í–‰
  const handleSlashCommand = async (command: string, params: any) => {
    setIsLoading(true)
    
    try {
      let systemMessage: ChatMessage

      switch (command) {
        case 'add-task':
          systemMessage = {
            id: Date.now().toString(),
            type: 'task_created',
            content: `âœ… ìƒˆ ì—…ë¬´ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤: "${params.title}" â†’ ${params.assignee} (ë§ˆê°: ${params.dueDate})`,
            userId: 'current_user',
            user: { id: 'current_user', name: 'ë‚˜', avatar: 'ğŸ‘¤' },
            timestamp: new Date().toISOString(),
            slashCommandResult: {
              type: 'task_created',
              data: params
            }
          }
          onTaskCreate?.(params)
          break

        case 'set-milestone':
          systemMessage = {
            id: Date.now().toString(),
            type: 'milestone_update',
            content: `ğŸ¯ ë§ˆì¼ìŠ¤í†¤ì´ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤: "${params.name}" (ë§ˆê°: ${params.dueDate})`,
            userId: 'current_user',
            user: { id: 'current_user', name: 'ë‚˜', avatar: 'ğŸ‘¤' },
            timestamp: new Date().toISOString(),
            slashCommandResult: {
              type: 'milestone_set',
              data: params
            }
          }
          onMilestoneCreate?.(params)
          break

        case 'delegate':
          systemMessage = {
            id: Date.now().toString(),
            type: 'system',
            content: `ğŸ”„ ì—…ë¬´ê°€ ${params.fromUser}ì—ì„œ ${params.toUser}ë¡œ ì¬í• ë‹¹ë˜ì—ˆìŠµë‹ˆë‹¤`,
            userId: 'current_user',
            user: { id: 'current_user', name: 'ë‚˜', avatar: 'ğŸ‘¤' },
            timestamp: new Date().toISOString(),
            slashCommandResult: {
              type: 'user_delegated',
              data: params
            }
          }
          onUserDelegate?.(params)
          break

        default:
          systemMessage = {
            id: Date.now().toString(),
            type: 'system',
            content: `âŒ ì•Œ ìˆ˜ ì—†ëŠ” ëª…ë ¹ì–´: /${command}`,
            userId: 'system',
            user: { id: 'system', name: 'System' },
            timestamp: new Date().toISOString(),
          }
      }

      setMessages(prev => [...prev, systemMessage])
      setNewMessage('')
      setIsSlashCommandMode(false)

    } catch (error) {
      console.error('ìŠ¬ë˜ì‹œ ëª…ë ¹ì–´ ì‹¤í–‰ ì‹¤íŒ¨:', error)
    } finally {
      setIsLoading(false)
    }
  }

  // í‚¤ë³´ë“œ ì´ë²¤íŠ¸ í•¸ë“¤ë§
  const handleKeyDown = (e: React.KeyboardEvent) => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault()
      if (isSlashCommandMode) {
        // ìŠ¬ë˜ì‹œ ëª…ë ¹ì–´ëŠ” SlashCommandInputì—ì„œ ì²˜ë¦¬
        return
      }
      handleSendMessage()
    }
  }

  // ë©”ì‹œì§€ ë Œë”ë§
  const renderMessage = (message: ChatMessage) => {
    const isSystem = message.type === 'system'
    const isTaskCreated = message.type === 'task_created'
    const isMilestoneUpdate = message.type === 'milestone_update'

    return (
      <div
        key={message.id}
        className={`mb-4 ${isSystem ? 'text-center' : ''}`}
      >
        {isSystem ? (
          <div className="inline-block px-3 py-1 bg-gray-100 rounded-full text-sm text-gray-600">
            {message.content}
          </div>
        ) : (
          <div className="flex items-start space-x-3">
            <div className="flex-shrink-0">
              <div className="w-10 h-10 rounded-full bg-blue-500 text-white flex items-center justify-center text-sm font-medium">
                {message.user.avatar || message.user.name.charAt(0)}
              </div>
            </div>
            <div className="flex-1 min-w-0">
              <div className="flex items-center space-x-2 mb-1">
                <span className="font-medium text-gray-900">{message.user.name}</span>
                <span className="text-xs text-gray-500">
                  {new Date(message.timestamp).toLocaleTimeString('ko-KR', {
                    hour: '2-digit',
                    minute: '2-digit'
                  })}
                </span>
              </div>
              <div className={`${
                isTaskCreated || isMilestoneUpdate 
                  ? 'bg-green-50 border border-green-200 rounded-lg p-3' 
                  : ''
              }`}>
                <p className={`text-gray-800 ${
                  isTaskCreated || isMilestoneUpdate ? 'text-green-800' : ''
                }`}>
                  {message.content}
                </p>
                {message.slashCommandResult && (
                  <div className="mt-2 text-xs text-green-600">
                    {message.slashCommandResult.type === 'task_created' && 'ğŸ“ ì—…ë¬´ ìƒì„±ë¨'}
                    {message.slashCommandResult.type === 'milestone_set' && 'ğŸ¯ ë§ˆì¼ìŠ¤í†¤ ì„¤ì •ë¨'}
                    {message.slashCommandResult.type === 'user_delegated' && 'ğŸ”„ ì—…ë¬´ ì¬í• ë‹¹ë¨'}
                  </div>
                )}
              </div>
            </div>
          </div>
        )}
      </div>
    )
  }

  return (
    <div className="fixed inset-0 bg-white flex flex-col">
      {/* ì±„ë„ í—¤ë” - ìƒë‹¨ ê³ ì • */}
      <div className={`fixed top-0 flex-shrink-0 flex items-center justify-between p-4 border-b border-gray-200 bg-white shadow-sm transition-all duration-300 ${
        isMobile || !isSidebarOpen ? 'left-0 right-0' : 'left-0 right-[640px]'
      } z-50`}>
        <div className="flex items-center space-x-3">
          <button
            onClick={() => router.back()}
            className="p-2 hover:bg-gray-100 rounded-lg"
          >
            <ArrowLeft className="w-5 h-5 text-gray-600" />
          </button>
          <Hash className="w-5 h-5 text-gray-500" />
          <div>
            <h2 className="font-semibold text-gray-900">{project.title}</h2>
            <p className="text-sm text-gray-500">{members.length}ëª…ì˜ ë©¤ë²„</p>
          </div>
        </div>
        <div className="flex items-center space-x-2">
          <button className="p-2 hover:bg-gray-100 rounded-lg">
            <Calendar className="w-5 h-5 text-gray-500" />
          </button>
          <button className="p-2 hover:bg-gray-100 rounded-lg">
            <User className="w-5 h-5 text-gray-500" />
          </button>
          <button className="p-2 hover:bg-gray-100 rounded-lg">
            <MoreHorizontal className="w-5 h-5 text-gray-500" />
          </button>
          {onToggleSidebar && (
            <button 
              onClick={onToggleSidebar}
              className="p-2 hover:bg-gray-100 rounded-lg transition-colors"
              title={isSidebarOpen ? "ì‚¬ì´ë“œë°” ë‹«ê¸°" : "ì‚¬ì´ë“œë°” ì—´ê¸°"}
            >
              {isSidebarOpen ? (
                <PanelRightClose className="w-5 h-5 text-gray-500" />
              ) : (
                <PanelRightOpen className="w-5 h-5 text-gray-500" />
              )}
            </button>
          )}
        </div>
      </div>

      {/* ë©”ì‹œì§€ ëª©ë¡ - ì™„ì „ ë…ë¦½ì ì¸ ìŠ¤í¬ë¡¤ ì˜ì—­ */}
      <div 
        ref={messageScrollRef}
        className={`fixed overflow-y-auto p-4 space-y-4 scroll-smooth scrollbar-on-hover bg-white transition-all duration-300 ${
          isMobile || !isSidebarOpen ? 'left-0 right-0' : 'left-0 right-[640px]'
        }`} 
        style={{
          top: '80px', // í—¤ë” ë°”ë¡œ ì•„ë˜
          bottom: '80px' // ì…ë ¥ì°½ ë°”ë¡œ ìœ„
        }}
      >
        {messages.map(renderMessage)}
        <div ref={messagesEndRef} />
      </div>

      {/* ìŠ¬ë˜ì‹œ ëª…ë ¹ì–´ ì…ë ¥ - ê³ ì • ìœ„ì¹˜ */}
      {isSlashCommandMode && (
        <div className={`fixed z-60 border-t border-gray-200 bg-gray-50 transition-all duration-200 ${
          isMobile || !isSidebarOpen ? 'left-0 right-0' : 'left-0 right-[640px]'
        }`} style={{
          bottom: '80px' // ì…ë ¥ì°½ ë°”ë¡œ ìœ„
        }}>
          <SlashCommandInput
            input={newMessage}
            onCommandExecute={handleSlashCommand}
            onCancel={() => {
              setIsSlashCommandMode(false)
              setNewMessage('')
            }}
            members={members}
          />
        </div>
      )}

      {/* ë©”ì‹œì§€ ì…ë ¥ - í•˜ë‹¨ ê³ ì • */}
      <div className={`fixed z-55 p-4 border-t border-gray-200 bg-white shadow-lg transition-all duration-200 ${
        isMobile || !isSidebarOpen ? 'left-0 right-0' : 'left-0 right-[640px]'
      }`} style={{
        bottom: '0'
      }}>
        <div className={`flex items-end space-x-3 max-w-full ${
          isMobile ? 'pb-safe' : ''
        }`}>
          <div className="flex-1 relative">
            <input
              ref={inputRef}
              type="text"
              value={newMessage}
              onChange={handleInputChange}
              onKeyDown={handleKeyDown}
              placeholder={isSlashCommandMode ? "ìŠ¬ë˜ì‹œ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." : `${project.title}ì— ë©”ì‹œì§€ ë³´ë‚´ê¸°...`}
              className={`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none ${
                isSlashCommandMode ? 'border-blue-300 bg-blue-50' : 'border-gray-300'
              } text-base`}
              disabled={isLoading}
              enterKeyHint="send"
              autoComplete="off"
              autoCorrect="off"
              autoCapitalize="sentences"
            />
          </div>
          <div className="flex items-center space-x-1">
            <button 
              className="p-2 hover:bg-gray-100 rounded-lg transition-colors touch-manipulation"
              type="button"
            >
              <Paperclip className="w-5 h-5 text-gray-500" />
            </button>
            <button 
              className="p-2 hover:bg-gray-100 rounded-lg transition-colors touch-manipulation"
              type="button"
            >
              <Smile className="w-5 h-5 text-gray-500" />
            </button>
            <button
              onClick={handleSendMessage}
              disabled={!newMessage.trim() || isLoading || isSlashCommandMode}
              className="p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors touch-manipulation min-w-[44px] min-h-[44px] flex items-center justify-center"
              type="button"
            >
              <Send className="w-5 h-5" />
            </button>
          </div>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="frontend/src/components/tasks/CollapsibleCalendar.tsx">
'use client'

import { useState, useRef, useEffect } from 'react'
import { ChevronLeftIcon, ChevronRightIcon } from '@heroicons/react/24/outline'
import { useCalendarFilterStore } from '@/lib/stores/calendarFilterStore'

interface CollapsibleCalendarProps {
  isExpanded: boolean
  onDateSelect: (date: Date) => void
  onClose: () => void
  onToggle?: () => void // ìˆ˜ë™ í† ê¸€ ê¸°ëŠ¥
  tasksWithDates: { [dateKey: string]: number } // ë‚ ì§œë³„ ì—…ë¬´ ê°œìˆ˜
  selectedDate?: Date
  keepOpenOnDrop?: boolean // ë“œë¡­ ì‹œ ë‹¬ë ¥ ìœ ì§€ ì—¬ë¶€
  isDragMode?: boolean // ë“œë˜ê·¸ ì¤‘ì¸ì§€ ì—¬ë¶€
}

export default function CollapsibleCalendar({
  isExpanded,
  onDateSelect,
  onClose,
  onToggle,
  tasksWithDates,
  selectedDate,
  keepOpenOnDrop = false,
  isDragMode = false
}: CollapsibleCalendarProps) {
  const [currentMonth, setCurrentMonth] = useState(new Date())
  const [animatingDate, setAnimatingDate] = useState<string | null>(null)
  const calendarRef = useRef<HTMLDivElement>(null)
  
  // ì „ì—­ ìº˜ë¦°ë” í•„í„° ìƒíƒœ
  const { showNoDue, showOverdue, setShowNoDue, setShowOverdue } = useCalendarFilterStore()

  // ë‹¬ë ¥ ë°”ê¹¥ í´ë¦­ ê°ì§€
  useEffect(() => {
    const handleClickOutside = (event: MouseEvent) => {
      // ë“œë˜ê·¸ ì¤‘ì¼ ë•ŒëŠ” ì™¸ë¶€ í´ë¦­ìœ¼ë¡œ ë‹¬ë ¥ ë‹«ì§€ ì•ŠìŒ
      if (isDragMode) return
      
      if (isExpanded && calendarRef.current && !calendarRef.current.contains(event.target as Node)) {
        // í´ë¦­ëœ ìš”ì†Œê°€ ë“œë˜ê·¸ ê°€ëŠ¥í•œ ì—…ë¬´ ì¹´ë“œì¸ì§€ í™•ì¸
        const clickedElement = event.target as HTMLElement
        const taskCard = clickedElement.closest('[draggable="true"]') || clickedElement.closest('.group')
        
        // ì—…ë¬´ ì¹´ë“œë¥¼ í´ë¦­í•œ ê²½ìš° ë‹¬ë ¥ì„ ë‹«ì§€ ì•ŠìŒ
        if (taskCard) return
        
        onClose()
      }
    }

    if (isExpanded) {
      // ì•½ê°„ì˜ ì§€ì—° í›„ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ (ë‹¬ë ¥ ì—´ë¦¼ ì• ë‹ˆë©”ì´ì…˜ê³¼ ì¶©ëŒ ë°©ì§€)
      const timer = setTimeout(() => {
        document.addEventListener('mousedown', handleClickOutside)
      }, 300)
      
      return () => {
        clearTimeout(timer)
        document.removeEventListener('mousedown', handleClickOutside)
      }
    }
  }, [isExpanded, onClose, isDragMode])

  // í˜„ì¬ ì›”ì˜ ë‹¬ë ¥ ë°ì´í„° ìƒì„±
  const generateCalendarDays = (date: Date) => {
    const year = date.getFullYear()
    const month = date.getMonth()
    
    // ì›”ì˜ ì²«ì§¸ ë‚ ê³¼ ë§ˆì§€ë§‰ ë‚ 
    const firstDay = new Date(year, month, 1)
    const lastDay = new Date(year, month + 1, 0)
    
    // ë‹¬ë ¥ ì‹œì‘ì¼ (ì²«ì§¸ ì£¼ ì¼ìš”ì¼)
    const startDate = new Date(firstDay)
    startDate.setDate(startDate.getDate() - firstDay.getDay())
    
    // ë‹¬ë ¥ ì¢…ë£Œì¼ (ë§ˆì§€ë§‰ ì£¼ í† ìš”ì¼)
    const endDate = new Date(lastDay)
    endDate.setDate(endDate.getDate() + (6 - lastDay.getDay()))
    
    const days = []
    const current = new Date(startDate)
    
    while (current <= endDate) {
      days.push(new Date(current))
      current.setDate(current.getDate() + 1)
    }
    
    return days
  }

  // ë‚ ì§œ í‚¤ ìƒì„± (YYYY-MM-DD í˜•ì‹)
  const getDateKey = (date: Date) => {
    return date.toISOString().split('T')[0]
  }

  // ë‚ ì§œê°€ ì˜¤ëŠ˜ì¸ì§€ í™•ì¸
  const isToday = (date: Date) => {
    const today = new Date()
    return date.toDateString() === today.toDateString()
  }

  // ë‚ ì§œê°€ í˜„ì¬ ì›”ì— ì†í•˜ëŠ”ì§€ í™•ì¸
  const isCurrentMonth = (date: Date) => {
    return date.getMonth() === currentMonth.getMonth() && 
           date.getFullYear() === currentMonth.getFullYear()
  }

  // ì›” ì´ë™
  const navigateMonth = (direction: 'prev' | 'next') => {
    setCurrentMonth(prev => {
      const newDate = new Date(prev)
      newDate.setMonth(prev.getMonth() + (direction === 'next' ? 1 : -1))
      return newDate
    })
  }

  // ë‚ ì§œ ì„ íƒ ì²˜ë¦¬
  const handleDateClick = (date: Date) => {
    onDateSelect(date)
    if (!keepOpenOnDrop) {
      onClose()
    }
  }

  // ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì²˜ë¦¬
  const handleDragOver = (e: React.DragEvent) => {
    e.preventDefault()
    e.dataTransfer.dropEffect = 'move'
  }

  const handleDrop = (e: React.DragEvent, date: Date) => {
    e.preventDefault()
    const dateKey = getDateKey(date)
    
    // ë“œë¡­ ì„±ê³µ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
    setAnimatingDate(dateKey)
    
    // ë‚ ì§œ ì„ íƒ ì²˜ë¦¬
    onDateSelect(date)
    
    // keepOpenOnDropì´ falseì¼ ë•Œë§Œ ë‹¬ë ¥ ë‹«ê¸°
    if (!keepOpenOnDrop) {
      onClose()
    }
    
    // 2ì´ˆ í›„ ì• ë‹ˆë©”ì´ì…˜ ì¢…ë£Œ
    setTimeout(() => {
      setAnimatingDate(null)
    }, 2000)
  }

  const calendarDays = generateCalendarDays(currentMonth)
  const weekDays = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ']

  // ì ‘íŒ ìƒíƒœì—ì„œì˜ ì£¼ê°„ ë·° (í˜„ì¬ ì£¼)
  const getCurrentWeekDays = () => {
    const today = new Date()
    const startOfWeek = new Date(today)
    startOfWeek.setDate(today.getDate() - today.getDay())
    
    const weekDays = []
    for (let i = 0; i < 7; i++) {
      const day = new Date(startOfWeek)
      day.setDate(startOfWeek.getDate() + i)
      weekDays.push(day)
    }
    return weekDays
  }

  const currentWeek = getCurrentWeekDays()

  // ì™„ì „ ìˆ¨ê¸°ê¸°/ë³´ì´ê¸°ë§Œ - ì ‘íŒ ìƒíƒœ ì—†ìŒ
  if (!isExpanded) {
    return null
  }

  return (
    <div className="relative">
      {/* ì „ì²´ ì›”ê°„ ìº˜ë¦°ë” */}
      <div 
        ref={calendarRef}
        className="bg-white border-t border-gray-200 shadow-lg animate-slide-up"
        style={{
          animation: 'slideUp 0.3s ease-out'
        }}
      >
          <div className="p-4">
            {/* í—¤ë” */}
            <div className="mb-4">
              {/* 3ì¹¸ êµ¬ì¡°: ìŠ¤ì¼€ì¼ ì™¼ìª½ì—¬ë°± | ì¤‘ì•™í—¤ë” | ìŠ¤ì¼€ì¼ ì˜¤ë¥¸ìª½ì—¬ë°± */}
              <div className="flex mb-3">
                {/* ì™¼ìª½ ì—¬ë°± - í™”ë©´ í¬ê¸°ì— ë¹„ë¡€í•´ì„œ ìŠ¤ì¼€ì¼ (ì¼ í…ìŠ¤íŠ¸ ë°”ê¹¥ìª½) */}
                <div style={{
                  width: '5vw',
                  minWidth: '16px',
                  maxWidth: '60px'
                }}></div>
                
                {/* ì¤‘ì•™ í—¤ë”: ë‚ ì§œ + ë²„íŠ¼ + í•„í„° - ê°€ë“ ì±„ìš°ê¸° */}
                <div className="flex-1 flex items-center justify-between">
                  <div className="flex items-center gap-2">
                    <h3 className="text-lg font-semibold text-gray-900">
                      {currentMonth.toLocaleDateString('ko-KR', { year: 'numeric', month: 'long' })}
                    </h3>
                    <button
                      onClick={() => navigateMonth('prev')}
                      className="p-1.5 hover:bg-gray-100 rounded-full"
                    >
                      <ChevronLeftIcon className="w-4 h-4" />
                    </button>
                    <button
                      onClick={() => navigateMonth('next')}
                      className="p-1.5 hover:bg-gray-100 rounded-full"
                    >
                      <ChevronRightIcon className="w-4 h-4" />
                    </button>
                  </div>
                  
                  <div className="flex gap-2">
                    <button
                      onClick={() => setShowNoDue(!showNoDue)}
                      className={`px-3 py-1.5 text-xs font-medium rounded-full transition-colors ${
                        showNoDue 
                          ? 'bg-blue-500 text-white' 
                          : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                      }`}
                    >
                      ë§ˆê°ì¼ ë¯¸ì§€ì •
                    </button>
                    <button
                      onClick={() => setShowOverdue(!showOverdue)}
                      className={`px-3 py-1.5 text-xs font-medium rounded-full transition-colors ${
                        showOverdue 
                          ? 'bg-red-500 text-white' 
                          : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                      }`}
                    >
                      ë§ˆê°ì¼ ì§€ë‚¨
                    </button>
                  </div>
                </div>
                
                {/* ì˜¤ë¥¸ìª½ ì—¬ë°± - í™”ë©´ í¬ê¸°ì— ë¹„ë¡€í•´ì„œ ìŠ¤ì¼€ì¼ (í†  í…ìŠ¤íŠ¸ ë°”ê¹ìª½) */}
                <div style={{
                  width: '5vw',
                  minWidth: '16px',
                  maxWidth: '60px'
                }}></div>
              </div>
            </div>

            {/* ìš”ì¼ í—¤ë” */}
            <div className="grid grid-cols-7 gap-1 mb-2">
              {weekDays.map((day) => (
                <div
                  key={day}
                  className="h-8 flex items-center justify-center text-sm font-medium text-gray-500"
                >
                  {day}
                </div>
              ))}
            </div>

            {/* ë‹¬ë ¥ ê·¸ë¦¬ë“œ */}
            <div className="grid grid-cols-7 gap-1">
              {calendarDays.map((day, index) => {
                const dateKey = getDateKey(day)
                const taskCount = tasksWithDates[dateKey] || 0
                const isCurrentDay = isToday(day)
                const isInCurrentMonth = isCurrentMonth(day)
                const isSelected = selectedDate && day.toDateString() === selectedDate.toDateString()
                const isAnimating = animatingDate === dateKey
                
                return (
                  <button
                    key={index}
                    onClick={() => handleDateClick(day)}
                    onDragOver={handleDragOver}
                    onDrop={(e) => handleDrop(e, day)}
                    className={`
                      h-12 flex flex-col items-center justify-center text-sm rounded-lg transition-all relative
                      ${isInCurrentMonth ? 'text-gray-900 hover:bg-gray-100' : 'text-gray-400'}
                      ${isCurrentDay ? 'bg-blue-600 text-white hover:bg-blue-700' : ''}
                      ${isSelected ? 'ring-2 ring-blue-500 bg-blue-50' : ''}
                      ${taskCount > 0 && !isCurrentDay ? 'font-semibold' : ''}
                      ${isAnimating ? 'ring-4 ring-blue-400 bg-blue-100 animate-pulse' : ''}
                    `}
                  >
                    <span>{day.getDate()}</span>
                    {taskCount > 0 && !isCurrentDay && (
                      <div className="flex gap-0.5 mt-0.5">
                        {Array.from({ length: Math.min(taskCount, 3) }).map((_, i) => (
                          <div
                            key={i}
                            className="w-1.5 h-1.5 bg-blue-500 rounded-full"
                          />
                        ))}
                        {taskCount > 3 && (
                          <div className="text-xs text-blue-600 ml-1">+</div>
                        )}
                      </div>
                    )}
                    
                    {/* ë“œë¡­ ì„±ê³µ ì²´í¬ë§ˆí¬ */}
                    {isAnimating && (
                      <div className="absolute -top-1 -right-1 w-5 h-5 bg-blue-600 text-white rounded-full flex items-center justify-center animate-bounce">
                        <svg className="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                        </svg>
                      </div>
                    )}
                  </button>
                )
              })}
            </div>


            {/* í•˜ë‹¨ ì•ˆë‚´ í…ìŠ¤íŠ¸ */}
            <div className="mt-4 text-center text-sm text-gray-500">
              ì—…ë¬´ë¥¼ ë“œë˜ê·¸í•´ì„œ ë‚ ì§œë¥¼ ì§€ì •í•´ë³´ì„¸ìš”.
            </div>
          </div>
        </div>

      {/* CSS ì• ë‹ˆë©”ì´ì…˜ */}
      <style jsx>{`
        @keyframes slideUp {
          from {
            transform: translateY(100%);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }
        
        .animate-slide-up {
          animation: slideUp 0.3s ease-out;
        }
      `}</style>
    </div>
  )
}
</file>

<file path="frontend/src/components/tasks/TaskCard.tsx">
'use client'

import React from 'react'
import { GTDTask, TaskStatus, TaskPriority } from '@/types/task.types'

interface TaskCardProps {
  task: GTDTask
  isLast?: boolean
  onToggleComplete?: (taskId: string) => void
  onEdit?: (task: GTDTask) => void
  showMomentumScore?: boolean
}

export default function TaskCard({ 
  task, 
  isLast = false, 
  onToggleComplete,
  onEdit,
  showMomentumScore = true 
}: TaskCardProps) {
  const isCompleted = task.status === TaskStatus.DONE
  
  // ìš°ì„ ìˆœìœ„ ìƒ‰ìƒ ë§¤í•‘
  const getPriorityColor = (priority: TaskPriority) => {
    switch (priority) {
      case TaskPriority.URGENT:
        return 'text-red-500 bg-red-50'
      case TaskPriority.HIGH:
        return 'text-blue-500 bg-blue-50'
      case TaskPriority.MEDIUM:
        return 'text-yellow-500 bg-yellow-50'
      case TaskPriority.LOW:
        return 'text-blue-500 bg-blue-50'
      default:
        return 'text-gray-500 bg-gray-50'
    }
  }

  // ë§ˆê°ì¼ ìƒ‰ìƒ ë° í…ìŠ¤íŠ¸
  const getDueDateInfo = () => {
    if (isCompleted) {
      return { text: 'ì™„ë£Œë¨', color: 'text-green-600' }
    }
    
    if (!task.dueDate) {
      return { text: 'ë§ˆê°ì¼ ì—†ìŒ', color: 'text-gray-500' }
    }

    const now = new Date()
    const dueDate = new Date(task.dueDate)
    const timeDiff = dueDate.getTime() - now.getTime()
    const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24))

    if (daysDiff < 0) {
      return { text: `${Math.abs(daysDiff)}ì¼ ì§€ë‚¨`, color: 'text-red-500' }
    } else if (daysDiff === 0) {
      return { text: 'ì˜¤ëŠ˜ ë§ˆê°', color: 'text-blue-600' }
    } else if (daysDiff === 1) {
      return { text: 'ë‚´ì¼ ë§ˆê°', color: 'text-blue-500' }
    } else if (daysDiff <= 7) {
      return { text: `${daysDiff}ì¼ ë‚¨ìŒ`, color: 'text-yellow-500' }
    } else {
      const options: Intl.DateTimeFormatOptions = { 
        month: 'short', 
        day: 'numeric' 
      }
      return { 
        text: dueDate.toLocaleDateString('ko-KR', options), 
        color: 'text-gray-500' 
      }
    }
  }

  const dueDateInfo = getDueDateInfo()

  // ëª¨ë©˜í…€ ì ìˆ˜ ì‹œê°í™”
  const renderMomentumScore = () => {
    if (!showMomentumScore || isCompleted) return null

    const score = task.momentumScore.total
    const getScoreColor = (score: number) => {
      if (score >= 8) return 'bg-red-500'
      if (score >= 6) return 'bg-blue-500'
      if (score >= 4) return 'bg-yellow-500'
      return 'bg-gray-400'
    }

    return (
      <div className="flex items-center gap-1">
        <div 
          className={`w-2 h-2 rounded-full ${getScoreColor(score)}`}
          title={`ëª¨ë©˜í…€ ì ìˆ˜: ${score.toFixed(1)}`}
        />
        {score >= 7 && (
          <span className="text-xs text-blue-600 font-medium">ìš°ì„ </span>
        )}
      </div>
    )
  }

  // í”„ë¡œì íŠ¸ ì§„í–‰ë¥  í‘œì‹œ
  const renderProjectProgress = () => {
    if (!task.project || isCompleted) return null

    // ì„ì‹œ ì§„í–‰ë¥  (ì‹¤ì œë¡œëŠ” í”„ë¡œì íŠ¸ì—ì„œ ê³„ì‚°)
    const progress = 65 // ì‹¤ì œ êµ¬í˜„ ì‹œ í”„ë¡œì íŠ¸ ì§„í–‰ë¥  APIì—ì„œ ê°€ì ¸ì˜´

    return (
      <div className="mt-2">
        <div className="flex items-center gap-2 text-xs text-gray-500">
          <span>{task.project.name}</span>
          <div className="flex-1 bg-gray-200 rounded-full h-1">
            <div 
              className="bg-blue-500 h-1 rounded-full transition-all duration-300"
              style={{ width: `${progress}%` }}
            />
          </div>
          <span>{progress}%</span>
        </div>
      </div>
    )
  }

  const handleCheckboxChange = () => {
    if (onToggleComplete) {
      onToggleComplete(task.id)
    }
  }

  const handleCardClick = (e: React.MouseEvent) => {
    // ì²´í¬ë°•ìŠ¤ í´ë¦­ì€ ì œì™¸
    if ((e.target as HTMLElement).type === 'checkbox') {
      return
    }
    
    if (onEdit) {
      onEdit(task)
    }
  }

  return (
    <article 
      className={`p-4 ${!isLast ? 'border-b border-gray-100' : ''} ${
        isCompleted ? 'opacity-60' : ''
      } hover:bg-gray-50 transition-colors cursor-pointer`}
      onClick={handleCardClick}
      aria-labelledby={`task-${task.id}-title`}
      aria-describedby={`task-${task.id}-description task-${task.id}-meta`}
    >
      <div className="flex items-start gap-3">
        {/* ì²´í¬ë°•ìŠ¤ */}
        <div className="mt-1">
          <input 
            type="checkbox" 
            checked={isCompleted}
            onChange={handleCheckboxChange}
            className="w-5 h-5 rounded border-2 border-gray-300 
                     checked:bg-green-500 checked:border-green-500 
                     focus:ring-2 focus:ring-green-200 transition-colors"
            aria-label={`${task.title} ${isCompleted ? 'ì™„ë£Œë¨' : 'ë¯¸ì™„ë£Œ'}`}
            onClick={(e) => e.stopPropagation()}
          />
        </div>
        
        {/* ì—…ë¬´ ë‚´ìš© */}
        <div className="flex-1 min-w-0">
          {/* ì œëª©ê³¼ ëª¨ë©˜í…€ ì ìˆ˜ */}
          <div className="flex items-start justify-between gap-2">
            <h3 
              id={`task-${task.id}-title`}
              className={`font-medium text-gray-900 leading-tight ${
                isCompleted ? 'line-through text-gray-500' : ''
              }`}
            >
              {task.title}
            </h3>
            {renderMomentumScore()}
          </div>
          
          {/* ì„¤ëª… */}
          {task.description && (
            <p 
              id={`task-${task.id}-description`}
              className={`text-sm text-gray-600 mt-1 ${
                isCompleted ? 'line-through' : ''
              }`}
            >
              {task.description}
            </p>
          )}
          
          {/* ë©”íƒ€ ì •ë³´ */}
          <div id={`task-${task.id}-meta`} className="flex items-center gap-2 mt-3 flex-wrap">
            {/* ìš°ì„ ìˆœìœ„ */}
            <span 
              className={`px-2 py-1 text-xs rounded-full font-medium ${getPriorityColor(task.priority)}`}
              aria-label={`ìš°ì„ ìˆœìœ„: ${task.priority}`}
            >
              {task.priority}
            </span>
            
            {/* ë§ˆê°ì¼ */}
            <span 
              className={`text-xs ${dueDateInfo.color}`}
              aria-label={isCompleted ? 'ìƒíƒœ: ì™„ë£Œë¨' : `ë§ˆê°ì¼: ${dueDateInfo.text}`}
            >
              {dueDateInfo.text}
            </span>
            
            {/* ì˜ˆìƒ ì‹œê°„ */}
            {task.estimatedHours && !isCompleted && (
              <span className="text-xs text-gray-500">
                {task.estimatedHours}ì‹œê°„ ì˜ˆìƒ
              </span>
            )}
            
            {/* GTD ì»¨í…ìŠ¤íŠ¸ */}
            {task.gtdContext !== 'next' && (
              <span className="text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded">
                {task.gtdContext === 'inbox' && 'ìˆ˜ì‹ í•¨'}
                {task.gtdContext === 'waiting' && 'ëŒ€ê¸°ì¤‘'}
                {task.gtdContext === 'someday' && 'ì–¸ì  ê°€'}
              </span>
            )}
          </div>
          
          {/* í”„ë¡œì íŠ¸ ì§„í–‰ë¥  */}
          {renderProjectProgress()}
        </div>
      </div>
    </article>
  )
}
</file>

<file path="frontend/src/components/tasks/TaskPriorityBadge.tsx">
'use client';

import React from 'react';
import { TaskPriority } from '@/types/task.types';
import { ArrowUp, ArrowDown, Minus } from 'lucide-react';

interface TaskPriorityBadgeProps {
  priority: TaskPriority;
  size?: 'sm' | 'md' | 'lg';
  showIcon?: boolean;
  showLabel?: boolean;
}

const priorityConfig = {
  low: {
    label: 'ë‚®ìŒ',
    bgColor: 'bg-gray-50',
    textColor: 'text-gray-500',
    borderColor: 'border-gray-200',
    icon: ArrowDown,
    iconColor: 'text-gray-400',
  },
  medium: {
    label: 'ë³´í†µ',
    bgColor: 'bg-gray-100',
    textColor: 'text-gray-600',
    borderColor: 'border-gray-200',
    icon: Minus,
    iconColor: 'text-gray-500',
  },
  high: {
    label: 'ë†’ìŒ',
    bgColor: 'bg-blue-100',
    textColor: 'text-blue-600',
    borderColor: 'border-blue-200',
    icon: ArrowUp,
    iconColor: 'text-blue-600',
  },
  urgent: {
    label: 'ê¸´ê¸‰',
    bgColor: 'bg-blue-600',
    textColor: 'text-white',
    borderColor: 'border-blue-600',
    icon: ArrowUp,
    iconColor: 'text-white',
  },
};

const sizeConfig = {
  sm: {
    container: 'px-2 py-1 text-xs',
    icon: 'w-3 h-3',
  },
  md: {
    container: 'px-3 py-1 text-sm',
    icon: 'w-4 h-4',
  },
  lg: {
    container: 'px-4 py-2 text-base',
    icon: 'w-5 h-5',
  },
};

export default function TaskPriorityBadge({ 
  priority, 
  size = 'md', 
  showIcon = true,
  showLabel = true
}: TaskPriorityBadgeProps) {
  const config = priorityConfig[priority];
  const sizeClass = sizeConfig[size];
  const IconComponent = config.icon;

  return (
    <span
      className={`inline-flex items-center rounded-md font-medium border ${config.bgColor} ${config.textColor} ${config.borderColor} ${sizeClass.container}`}
    >
      {showIcon && (
        <IconComponent 
          className={`${sizeClass.icon} ${config.iconColor} ${showLabel ? 'mr-1' : ''}`}
        />
      )}
      {showLabel && config.label}
    </span>
  );
}
</file>

<file path="frontend/src/components/tasks/TaskStatusBadge.tsx">
'use client';

import React from 'react';
import { TaskStatus } from '@/types/task.types';

interface TaskStatusBadgeProps {
  status: TaskStatus;
  size?: 'sm' | 'md' | 'lg';
  showIcon?: boolean;
}

const statusConfig = {
  todo: {
    label: 'í•  ì¼',
    bgColor: 'bg-gray-50',
    textColor: 'text-gray-700',
    icon: 'ğŸ“‹',
  },
  in_progress: {
    label: 'ì§„í–‰ ì¤‘',
    bgColor: 'bg-blue-100',
    textColor: 'text-blue-600',
    icon: 'ğŸ”„',
  },
  in_review: {
    label: 'ê²€í† ',
    bgColor: 'bg-gray-100',
    textColor: 'text-gray-600',
    icon: 'ğŸ‘€',
  },
  done: {
    label: 'ì™„ë£Œ',
    bgColor: 'bg-green-100',
    textColor: 'text-green-600',
    icon: 'âœ…',
  },
  blocked: {
    label: 'ì°¨ë‹¨ë¨',
    bgColor: 'bg-gray-100',
    textColor: 'text-gray-500',
    icon: 'ğŸš«',
  },
  cancelled: {
    label: 'ì·¨ì†Œë¨',
    bgColor: 'bg-gray-50',
    textColor: 'text-gray-500',
    icon: 'âŒ',
  },
};

const sizeConfig = {
  sm: 'px-2 py-1 text-xs',
  md: 'px-3 py-1 text-sm',
  lg: 'px-4 py-2 text-base',
};

export default function TaskStatusBadge({ 
  status, 
  size = 'md', 
  showIcon = true 
}: TaskStatusBadgeProps) {
  const config = statusConfig[status];
  const sizeClass = sizeConfig[size];

  return (
    <span
      className={`inline-flex items-center rounded-full font-medium ${config.bgColor} ${config.textColor} ${sizeClass}`}
    >
      {showIcon && (
        <span className="mr-1">{config.icon}</span>
      )}
      {config.label}
    </span>
  );
}
</file>

<file path="frontend/src/components/tasks/TaskStatusSelector.tsx">
'use client';

import React, { useState } from 'react';
import { ChevronDown, Check } from 'lucide-react';
import { TaskStatus } from '@/types/task.types';
import TaskStatusBadge from './TaskStatusBadge';

interface TaskStatusSelectorProps {
  currentStatus: TaskStatus;
  onStatusChange: (status: TaskStatus) => void;
  disabled?: boolean;
  size?: 'sm' | 'md' | 'lg';
}

const statusOptions: TaskStatus[] = [
  TaskStatus.TODO,
  TaskStatus.IN_PROGRESS, 
  TaskStatus.IN_REVIEW,
  TaskStatus.DONE,
  TaskStatus.BLOCKED,
  TaskStatus.CANCELLED
];

const statusLabels = {
  [TaskStatus.TODO]: 'í•  ì¼',
  [TaskStatus.IN_PROGRESS]: 'ì§„í–‰ ì¤‘',
  [TaskStatus.IN_REVIEW]: 'ê²€í† ',
  [TaskStatus.DONE]: 'ì™„ë£Œ',
  [TaskStatus.BLOCKED]: 'ì°¨ë‹¨ë¨',
  [TaskStatus.CANCELLED]: 'ì·¨ì†Œë¨',
};

export default function TaskStatusSelector({
  currentStatus,
  onStatusChange,
  disabled = false,
  size = 'md'
}: TaskStatusSelectorProps) {
  const [isOpen, setIsOpen] = useState(false);

  const handleStatusSelect = (status: TaskStatus) => {
    onStatusChange(status);
    setIsOpen(false);
  };

  const handleKeyDown = (e: React.KeyboardEvent) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      setIsOpen(!isOpen);
    } else if (e.key === 'Escape') {
      setIsOpen(false);
    }
  };

  return (
    <div className="relative inline-block">
      <button
        type="button"
        onClick={() => !disabled && setIsOpen(!isOpen)}
        onKeyDown={handleKeyDown}
        disabled={disabled}
        className={`inline-flex items-center space-x-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-lg ${
          disabled ? 'cursor-not-allowed opacity-50' : 'cursor-pointer hover:opacity-80'
        }`}
        aria-haspopup="listbox"
        aria-expanded={isOpen}
      >
        <TaskStatusBadge status={currentStatus} size={size} />
        {!disabled && (
          <ChevronDown 
            className={`w-4 h-4 text-gray-400 transition-transform duration-200 ${
              isOpen ? 'transform rotate-180' : ''
            }`}
          />
        )}
      </button>

      {isOpen && !disabled && (
        <>
          {/* ì˜¤ë²„ë ˆì´ */}
          <div
            className="fixed inset-0 z-10"
            onClick={() => setIsOpen(false)}
          />
          
          {/* ë“œë¡­ë‹¤ìš´ ë©”ë‰´ */}
          <div className="absolute right-0 z-20 mt-2 w-40 bg-white rounded-lg shadow-lg border border-gray-200 py-1">
            <div className="max-h-60 overflow-auto scrollbar-on-hover">
              {statusOptions.map((status) => (
                <button
                  key={status}
                  type="button"
                  onClick={() => handleStatusSelect(status)}
                  className={`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 focus:bg-gray-50 focus:outline-none flex items-center justify-between ${
                    status === currentStatus ? 'bg-blue-50' : ''
                  }`}
                  role="option"
                  aria-selected={status === currentStatus}
                >
                  <span className="flex items-center space-x-2">
                    <TaskStatusBadge status={status} size="sm" showIcon={false} />
                  </span>
                  {status === currentStatus && (
                    <Check className="w-4 h-4 text-blue-600" />
                  )}
                </button>
              ))}
            </div>
          </div>
        </>
      )}
    </div>
  );
}
</file>

<file path="frontend/src/components/ui/Card.tsx">
import React from 'react';
import { cn } from '@/lib/utils';

export interface CardProps extends React.HTMLAttributes<HTMLDivElement> {}

const Card = React.forwardRef<HTMLDivElement, CardProps>(
  ({ className, ...props }, ref) => (
    <div
      ref={ref}
      className={cn(
        'rounded-lg border border-gray-200 bg-white shadow-sm hover:shadow-md transition-shadow',
        className
      )}
      {...props}
    />
  )
);
Card.displayName = 'Card';

const CardHeader = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => (
    <div
      ref={ref}
      className={cn('p-4', className)}
      {...props}
    />
  )
);
CardHeader.displayName = 'CardHeader';

const CardTitle = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLHeadingElement>>(
  ({ className, ...props }, ref) => (
    <h3
      ref={ref}
      className={cn(
        'font-medium text-gray-900 mb-1',
        className
      )}
      {...props}
    />
  )
);
CardTitle.displayName = 'CardTitle';

const CardDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(
  ({ className, ...props }, ref) => (
    <p
      ref={ref}
      className={cn('text-sm text-gray-500', className)}
      {...props}
    />
  )
);
CardDescription.displayName = 'CardDescription';

const CardContent = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => (
    <div ref={ref} className={cn('p-4', className)} {...props} />
  )
);
CardContent.displayName = 'CardContent';

const CardFooter = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => (
    <div
      ref={ref}
      className={cn('flex items-center p-4 pt-0', className)}
      {...props}
    />
  )
);
CardFooter.displayName = 'CardFooter';

export { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };
</file>

<file path="frontend/src/components/ui/FilterChips.tsx">
'use client'

import { ReactNode, useRef, useEffect, useState } from 'react'
import { ChevronDownIcon, XMarkIcon, FunnelIcon, AdjustmentsHorizontalIcon } from '@heroicons/react/24/outline'

interface FilterOption {
  key: string
  label: string
  count?: number
  icon?: ReactNode
  color?: 'blue' | 'green' | 'purple' | 'orange' | 'red' | 'gray'
}

interface FilterChipsProps {
  options: FilterOption[]
  activeFilter: string
  onFilterChange: (filter: string) => void
  className?: string
  variant?: 'compact' | 'comfortable' | 'spacious'
  style?: 'modern' | 'minimal' | 'glassmorphism' | 'neumorphism'
  showClearAll?: boolean
  maxVisibleItems?: number
  sortable?: boolean
  filterSettings?: {
    title: string
    settings: Array<{
      key: string
      label: string
      type: 'toggle' | 'select' | 'range'
      value?: any
      options?: string[]
      onChange: (value: any) => void
    }>
  }
}

/**
 * ìµœì‹  íŠ¸ë Œë“œ í†µí•© í•„í„° ì¹© ì»´í¬ë„ŒíŠ¸
 * - ë°˜ì‘í˜• ë””ìì¸ (ëª¨ë°”ì¼/ë°ìŠ¤í¬í†± í†µì¼)
 * - ë‹¤ì–‘í•œ ìŠ¤íƒ€ì¼ ë³€í˜• ì§€ì›
 * - ìŠ¤ë§ˆíŠ¸ ì˜¤ë²„í”Œë¡œìš° ì²˜ë¦¬
 * - ì ‘ê·¼ì„± ìµœì í™”
 */
export default function FilterChips({ 
  options, 
  activeFilter, 
  onFilterChange,
  className = '',
  variant = 'comfortable',
  style = 'modern',
  showClearAll = false,
  maxVisibleItems,
  sortable = false,
  filterSettings
}: FilterChipsProps) {
  const scrollContainerRef = useRef<HTMLDivElement>(null)
  const [showOverflow, setShowOverflow] = useState(false)
  const [overflowItems, setOverflowItems] = useState<FilterOption[]>([])
  const [visibleItems, setVisibleItems] = useState<FilterOption[]>(options)
  const [showFilterSettings, setShowFilterSettings] = useState(false)

  // ì˜¤ë²„í”Œë¡œìš° ì²˜ë¦¬
  useEffect(() => {
    if (maxVisibleItems && options.length > maxVisibleItems) {
      setVisibleItems(options.slice(0, maxVisibleItems))
      setOverflowItems(options.slice(maxVisibleItems))
    } else {
      setVisibleItems(options)
      setOverflowItems([])
    }
  }, [options, maxVisibleItems])

  // í™œì„± í•„í„°ë¡œ ìë™ ìŠ¤í¬ë¡¤
  useEffect(() => {
    if (scrollContainerRef.current) {
      const activeElement = scrollContainerRef.current.querySelector(`[data-filter="${activeFilter}"]`)
      if (activeElement) {
        activeElement.scrollIntoView({
          behavior: 'smooth',
          block: 'nearest',
          inline: 'center'
        })
      }
    }
  }, [activeFilter])

  // ìƒ‰ìƒë³„ í´ë˜ìŠ¤
  const getColorClasses = (color: string, isActive: boolean) => {
    const colors = {
      blue: {
        active: 'bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg shadow-blue-500/25',
        inactive: 'text-blue-600 hover:bg-blue-50 border-blue-200 hover:border-blue-300'
      },
      green: {
        active: 'bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg shadow-green-500/25',
        inactive: 'text-green-600 hover:bg-green-50 border-green-200 hover:border-green-300'
      },
      purple: {
        active: 'bg-gradient-to-r from-purple-500 to-purple-600 text-white shadow-lg shadow-purple-500/25',
        inactive: 'text-purple-600 hover:bg-purple-50 border-purple-200 hover:border-purple-300'
      },
      orange: {
        active: 'bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg shadow-blue-500/25',
        inactive: 'text-blue-600 hover:bg-blue-50 border-blue-200 hover:border-blue-300'
      },
      red: {
        active: 'bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg shadow-red-500/25',
        inactive: 'text-red-600 hover:bg-red-50 border-red-200 hover:border-red-300'
      },
      gray: {
        active: 'bg-gradient-to-r from-gray-500 to-gray-600 text-white shadow-lg shadow-gray-500/25',
        inactive: 'text-gray-600 hover:bg-gray-50 border-gray-200 hover:border-gray-300'
      }
    }
    
    return colors[color as keyof typeof colors] || colors.gray
  }

  // ìŠ¤íƒ€ì¼ ë³€í˜•ë³„ í´ë˜ìŠ¤
  const getStyleClasses = () => {
    switch (style) {
      case 'minimal':
        return {
          container: 'bg-transparent',
          active: 'bg-gray-900 text-white border-gray-900',
          inactive: 'bg-transparent text-gray-600 hover:text-gray-900 border border-gray-300 hover:border-gray-400',
          badge: 'bg-white/20 text-white'
        }
      case 'glassmorphism':
        return {
          container: 'bg-white/10 backdrop-blur-lg',
          active: 'bg-white/20 text-gray-900 border-white/30 backdrop-blur-sm',
          inactive: 'bg-white/5 text-gray-700 hover:bg-white/10 border border-white/20 hover:border-white/30 backdrop-blur-sm',
          badge: 'bg-white/30 text-gray-900'
        }
      case 'neumorphism':
        return {
          container: 'bg-gray-100',
          active: 'bg-gray-100 text-gray-900 shadow-inner border-none',
          inactive: 'bg-gray-100 text-gray-600 hover:text-gray-900 shadow-lg hover:shadow-xl border-none',
          badge: 'bg-gray-200 text-gray-700'
        }
      default: // modern
        return {
          container: 'bg-gradient-to-r from-gray-50/50 to-white/50',
          active: 'bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg shadow-blue-500/25 border-none',
          inactive: 'bg-white text-gray-600 hover:text-gray-900 hover:bg-gray-50 border border-gray-200 hover:border-gray-300 hover:shadow-md',
          badge: 'bg-white/20 text-white'
        }
    }
  }

  // ë³€í˜•ë³„ íŒ¨ë”© í´ë˜ìŠ¤
  const getVariantClasses = () => {
    switch (variant) {
      case 'compact':
        return 'px-3 py-1.5 text-xs'
      case 'spacious':
        return 'px-6 py-3 text-base'
      default: // comfortable
        return 'px-4 py-2 text-sm'
    }
  }

  const styleClasses = getStyleClasses()
  const variantClasses = getVariantClasses()

  const handleClearAll = () => {
    onFilterChange('')
  }

  const renderChip = (option: FilterOption, isOverflow = false) => {
    const isActive = activeFilter === option.key
    const colorClasses = option.color ? getColorClasses(option.color, isActive) : null
    
    return (
      <button
        key={option.key}
        data-filter={option.key}
        onClick={() => onFilterChange(option.key)}
        className={`
          flex-shrink-0
          ${variantClasses}
          font-medium
          rounded-full
          transition-all duration-300
          flex items-center gap-2
          min-w-max
          transform hover:scale-105 active:scale-95
          focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:ring-offset-2
          ${
            colorClasses
              ? isActive 
                ? `${colorClasses.active} border-none`
                : `bg-white ${colorClasses.inactive} border`
              : isActive
                ? styleClasses.active
                : styleClasses.inactive
          }
          ${isOverflow ? 'w-full justify-start' : ''}
        `}
        aria-pressed={isActive}
        role="button"
      >
      {option.icon && (
        <span className="w-4 h-4 flex items-center justify-center flex-shrink-0">
          {option.icon}
        </span>
      )}
      <span className="whitespace-nowrap">{option.label}</span>
      {option.count !== undefined && option.count > 0 && (
        <span 
          className={`
            text-xs 
            min-w-[20px] 
            h-5
            rounded-full 
            flex 
            items-center 
            justify-center 
            font-semibold
            flex-shrink-0
            ${
              isActive 
                ? 'bg-white/20 text-white'
                : 'bg-gray-100 text-gray-600'
            }
          `}
        >
          {option.count > 999 ? '999+' : option.count}
        </span>
      )}
      </button>
    )
  }

  return (
    <div className={`relative ${styleClasses.container} ${className}`}>
      {/* ë°ìŠ¤í¬í†±: ê°€ë¡œ ìŠ¤í¬ë¡¤ + ì˜¤ë²„í”Œë¡œìš° */}
      <div className="hidden md:block">
        <div className="flex items-center gap-3 px-6 py-4">
          {/* ë©”ì¸ í•„í„° ì¹©ë“¤ */}
          <div 
            ref={scrollContainerRef}
            className="flex space-x-2 overflow-x-auto scrollbar-hide flex-1"
            style={{ scrollbarWidth: 'none', msOverflowStyle: 'none' }}
          >
            {visibleItems.map((option) => renderChip(option))}
          </div>

          {/* ì˜¤ë²„í”Œë¡œìš° ë©”ë‰´ */}
          {overflowItems.length > 0 && (
            <div className="relative">
              <button
                onClick={() => setShowOverflow(!showOverflow)}
                className={`
                  ${variantClasses}
                  ${styleClasses.inactive}
                  rounded-full
                  transition-all duration-300
                  flex items-center gap-1
                  hover:scale-105 active:scale-95
                  focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:ring-offset-2
                `}
                aria-expanded={showOverflow}
                aria-haspopup="true"
              >
                <FunnelIcon className="w-4 h-4" />
                <span>+{overflowItems.length}</span>
                <ChevronDownIcon className={`w-3 h-3 transition-transform ${showOverflow ? 'rotate-180' : ''}`} />
              </button>

              {showOverflow && (
                <div className="absolute top-full right-0 mt-2 bg-white border border-gray-200 rounded-xl shadow-lg min-w-[200px] py-2 z-50">
                  <div className="space-y-1 px-2">
                    {overflowItems.map((option) => renderChip(option, true))}
                  </div>
                </div>
              )}
            </div>
          )}

          {/* í•„í„° ì„¤ì • ë²„íŠ¼ */}
          {filterSettings && (
            <div className="relative">
              <button
                onClick={() => setShowFilterSettings(!showFilterSettings)}
                className={`
                  text-gray-600 hover:text-gray-900 hover:bg-gray-50
                  border border-gray-300 hover:border-gray-400
                  rounded-full
                  transition-all duration-300
                  flex items-center justify-center
                  hover:scale-105 active:scale-95
                  focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:ring-offset-2
                  w-11 h-11
                  min-w-[2.75rem]
                  p-0
                  bg-white
                  shadow-sm
                `}
                aria-expanded={showFilterSettings}
                aria-haspopup="true"
                aria-label="í•„í„° ì„¤ì •"
              >
                <AdjustmentsHorizontalIcon className="w-5 h-5" />
              </button>

              {showFilterSettings && (
                <div className="absolute top-full right-0 mt-2 bg-white border border-gray-200 rounded-xl shadow-lg min-w-[280px] p-4 z-50">
                  <div className="mb-3">
                    <h3 className="text-sm font-semibold text-gray-900">{filterSettings.title}</h3>
                  </div>
                  <div className="space-y-3">
                    {filterSettings.settings.map((setting) => (
                      <div key={setting.key} className="flex items-center justify-between">
                        <label className="text-sm text-gray-700">{setting.label}</label>
                        {setting.type === 'toggle' && (
                          <button
                            onClick={() => setting.onChange(!setting.value)}
                            className={`
                              w-10 h-6 rounded-full transition-colors relative
                              ${setting.value ? 'bg-blue-600' : 'bg-gray-300'}
                            `}
                          >
                            <div className={`
                              w-4 h-4 bg-white rounded-full absolute top-1 transition-transform
                              ${setting.value ? 'translate-x-5' : 'translate-x-1'}
                            `} />
                          </button>
                        )}
                        {setting.type === 'select' && setting.options && (
                          <select 
                            value={setting.value || ''}
                            onChange={(e) => setting.onChange(e.target.value)}
                            className="text-sm border border-gray-200 rounded-lg px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500"
                          >
                            {setting.options.map((option) => (
                              <option key={option} value={option}>
                                {option === 'deadline' ? 'ë§ˆê°ì¼ìˆœ' :
                                 option === 'priority' ? 'ìš°ì„ ìˆœìœ„ìˆœ' :
                                 option === 'created' ? 'ìƒì„±ì¼ìˆœ' :
                                 option === 'updated' ? 'ìˆ˜ì •ì¼ìˆœ' :
                                 option === 'latest' ? 'ìµœì‹ ìˆœ' :
                                 option === 'popular' ? 'ì¸ê¸°ìˆœ' :
                                 option === 'comments' ? 'ëŒ“ê¸€ìˆœ' :
                                 option === 'views' ? 'ì¡°íšŒìˆœ' :
                                 option === 'recent' ? 'ìµœê·¼ìˆœ' :
                                 option === 'progress' ? 'ì§„í–‰ë¥ ìˆœ' :
                                 option === 'members' ? 'ë©¤ë²„ìˆœ' :
                                 option}
                              </option>
                            ))}
                          </select>
                        )}
                      </div>
                    ))}
                  </div>
                </div>
              )}
            </div>
          )}
        </div>
      </div>

      {/* ëª¨ë°”ì¼: ê°€ë¡œ ìŠ¤í¬ë¡¤ + í•„í„° ì„¤ì • ë²„íŠ¼ */}
      <div className="md:hidden">
        {/* í–¥ìƒëœ ê·¸ë¼ë””ì–¸íŠ¸ í˜ì´ë“œ íš¨ê³¼ */}
        <div className="absolute left-0 top-0 bottom-0 w-6 bg-gradient-to-r from-gray-50 via-gray-50/80 to-transparent pointer-events-none z-10" />
        <div className="absolute right-0 top-0 bottom-0 w-6 bg-gradient-to-l from-white via-white/80 to-transparent pointer-events-none z-10" />
        
        <div className="flex items-center gap-3">
          <div 
            ref={scrollContainerRef}
            className="flex space-x-3 overflow-x-auto scrollbar-hide px-4 py-3 flex-1"
            style={{ scrollbarWidth: 'none', msOverflowStyle: 'none' }}
          >
            {options.map((option) => renderChip(option))}
          </div>
          
          {/* ëª¨ë°”ì¼ í•„í„° ì„¤ì • ë²„íŠ¼ */}
          {filterSettings && (
            <div className="pr-4">
              <button
                onClick={() => setShowFilterSettings(!showFilterSettings)}
                className={`
                  text-gray-600 hover:text-gray-900 hover:bg-gray-50
                  border border-gray-300 hover:border-gray-400
                  rounded-full
                  transition-all duration-300
                  flex items-center justify-center
                  hover:scale-105 active:scale-95
                  focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:ring-offset-2
                  w-11 h-11
                  min-w-[2.75rem]
                  p-0
                  bg-white
                  shadow-sm
                `}
                aria-expanded={showFilterSettings}
                aria-haspopup="true"
                aria-label="í•„í„° ì„¤ì •"
              >
                <AdjustmentsHorizontalIcon className="w-5 h-5" />
              </button>
            </div>
          )}
        </div>
      </div>
      
      {/* ëª¨ë°”ì¼ ë°”í…€ì‹œíŠ¸ í•„í„° ì„¤ì • ëª¨ë‹¬ */}
      {filterSettings && showFilterSettings && (
        <div className="md:hidden fixed inset-0 z-[60] flex items-end">
          <div 
            className="absolute inset-0 bg-black bg-opacity-25" 
            onClick={() => setShowFilterSettings(false)}
          />
          <div className="relative bg-white w-full max-h-[70vh] rounded-t-xl shadow-xl">
            {/* ëª¨ë‹¬ í—¤ë” */}
            <div className="flex items-center justify-between p-4 border-b border-gray-200">
              <h3 className="text-lg font-semibold text-gray-900">{filterSettings.title}</h3>
              <button
                onClick={() => setShowFilterSettings(false)}
                className="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100"
              >
                <XMarkIcon className="w-5 h-5 text-gray-400" />
              </button>
            </div>
            
            {/* ëª¨ë‹¬ ì½˜í…ì¸  */}
            <div className="p-4 space-y-4 max-h-[50vh] overflow-y-auto">
              {filterSettings.settings.map((setting) => (
                <div key={setting.key} className="flex items-center justify-between py-2">
                  <label className="text-sm font-medium text-gray-700">{setting.label}</label>
                  {setting.type === 'toggle' && (
                    <button
                      onClick={() => setting.onChange(!setting.value)}
                      className={`
                        w-12 h-7 rounded-full transition-colors relative
                        ${setting.value ? 'bg-blue-600' : 'bg-gray-300'}
                      `}
                    >
                      <div className={`
                        w-5 h-5 bg-white rounded-full absolute top-1 transition-transform
                        ${setting.value ? 'translate-x-6' : 'translate-x-1'}
                      `} />
                    </button>
                  )}
                  {setting.type === 'select' && setting.options && (
                    <select 
                      value={setting.value || ''}
                      onChange={(e) => setting.onChange(e.target.value)}
                      className="text-sm border border-gray-200 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 min-w-[120px]"
                    >
                      {setting.options.map((option) => (
                        <option key={option} value={option}>
                          {option === 'deadline' ? 'ë§ˆê°ì¼ìˆœ' :
                           option === 'priority' ? 'ìš°ì„ ìˆœìœ„ìˆœ' :
                           option === 'created' ? 'ìƒì„±ì¼ìˆœ' :
                           option === 'updated' ? 'ìˆ˜ì •ì¼ìˆœ' :
                           option === 'latest' ? 'ìµœì‹ ìˆœ' :
                           option === 'popular' ? 'ì¸ê¸°ìˆœ' :
                           option === 'comments' ? 'ëŒ“ê¸€ìˆœ' :
                           option === 'views' ? 'ì¡°íšŒìˆœ' :
                           option === 'recent' ? 'ìµœê·¼ìˆœ' :
                           option === 'progress' ? 'ì§„í–‰ë¥ ìˆœ' :
                           option === 'members' ? 'ë©¤ë²„ìˆœ' :
                           option}
                        </option>
                      ))}
                    </select>
                  )}
                </div>
              ))}
            </div>
            
            {/* ëª¨ë‹¬ í‘¸í„° */}
            <div className="p-4 border-t border-gray-200">
              <button
                onClick={() => setShowFilterSettings(false)}
                className="w-full py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors"
              >
                ì ìš©
              </button>
            </div>
          </div>
        </div>
      )}
    </div>
  )
}
</file>

<file path="frontend/src/components/ui/FilterManager.tsx">
'use client'

import { ReactNode, useRef, useEffect, useState } from 'react'
import { ChevronDownIcon, XMarkIcon, AdjustmentsHorizontalIcon, PlusIcon } from '@heroicons/react/24/outline'

// í•„í„° ì¡°ê±´ ì¸í„°í˜ì´ìŠ¤
interface FilterCondition {
  key: string
  operator: 'equals' | 'contains' | 'range' | 'in' | 'boolean'
  value: any
  label: string
}

// í•„í„° ì¹© ì¸í„°í˜ì´ìŠ¤
interface FilterChip {
  id: string
  label: string
  isDefault: boolean // ê¸°ë³¸ ì¹© ì—¬ë¶€ (ì‚­ì œ ë¶ˆê°€)
  conditions: FilterCondition[]
  count?: number
  color?: 'blue' | 'green' | 'purple' | 'orange' | 'red' | 'gray'
  icon?: ReactNode
  removable: boolean
}

// í•„í„° ì„¤ì • ì˜µì…˜
interface FilterSetting {
  key: string
  label: string
  type: 'toggle' | 'select' | 'multi-select' | 'range' | 'tag-selector' | 'date-range' | 'text'
  value?: any
  options?: string[] | Array<{key: string, label: string}>
  placeholder?: string
  validation?: (value: any) => boolean
  onChange: (value: any) => void
}

// ì¹© ì´ë¦„ ìƒì„± ê·œì¹™
interface ChipNamingRule {
  conditions: Array<{key: string, operator?: string}>
  getName: (conditions: FilterCondition[]) => string
  getColor: () => FilterChip['color']
}

interface FilterManagerProps {
  // ê¸°ë³¸ ì¹©ë“¤ (í•„ìˆ˜)
  defaultChips: Omit<FilterChip, 'removable'>[]
  
  // í˜„ì¬ í™œì„± ì¹©
  activeChipId: string
  onChipChange: (chipId: string) => void
  
  // í•„í„° ì„¤ì •ë“¤
  settings: FilterSetting[]
  settingsTitle?: string
  
  // ì¹© ìƒì„± ê·œì¹™ë“¤
  namingRules?: ChipNamingRule[]
  
  // ë°ì´í„° ì¹´ìš´íŠ¸ í•¨ìˆ˜ (ì¹©ë³„ ê°œìˆ˜ ê³„ì‚°)
  getChipCount?: (conditions: FilterCondition[]) => number
  
  // ìŠ¤íƒ€ì¼ ì˜µì…˜
  className?: string
  variant?: 'compact' | 'comfortable' | 'spacious'
  style?: 'modern' | 'minimal' | 'glassmorphism'
}

export default function FilterManager({
  defaultChips,
  activeChipId,
  onChipChange,
  settings,
  settingsTitle = 'í•„í„° ì„¤ì •',
  namingRules = [],
  getChipCount,
  className = '',
  variant = 'comfortable',
  style = 'modern'
}: FilterManagerProps) {
  const scrollContainerRef = useRef<HTMLDivElement>(null)
  const [showSettings, setShowSettings] = useState(false)
  const [customChips, setCustomChips] = useState<FilterChip[]>([])
  
  // ëª¨ë“  ì¹©ë“¤ (ê¸°ë³¸ + ì»¤ìŠ¤í…€)
  const allChips = [
    ...defaultChips.map(chip => ({ ...chip, removable: false })),
    ...customChips
  ]

  // í™œì„± ì¹©ìœ¼ë¡œ ìë™ ìŠ¤í¬ë¡¤
  useEffect(() => {
    if (scrollContainerRef.current) {
      const activeElement = scrollContainerRef.current.querySelector(`[data-chip-id="${activeChipId}"]`)
      if (activeElement) {
        activeElement.scrollIntoView({
          behavior: 'smooth',
          block: 'nearest',
          inline: 'center'
        })
      }
    }
  }, [activeChipId])

  // ì¹© ì´ë¦„ ìë™ ìƒì„±
  const generateChipName = (conditions: FilterCondition[]): string => {
    for (const rule of namingRules) {
      const matches = rule.conditions.every(ruleCondition => 
        conditions.some(condition => 
          condition.key === ruleCondition.key && 
          (!ruleCondition.operator || condition.operator === ruleCondition.operator)
        )
      )
      if (matches) {
        return rule.getName(conditions)
      }
    }
    
    // ê¸°ë³¸ ì´ë¦„ ìƒì„±
    if (conditions.length === 1) {
      return conditions[0].label
    } else if (conditions.length === 2) {
      return `${conditions[0].label} + ${conditions[1].label}`
    } else {
      return `ë³µí•© í•„í„° (${conditions.length}ê°œ ì¡°ê±´)`
    }
  }

  // ì¹© ìƒ‰ìƒ ìë™ ê²°ì •
  const generateChipColor = (conditions: FilterCondition[]): FilterChip['color'] => {
    for (const rule of namingRules) {
      const matches = rule.conditions.every(ruleCondition => 
        conditions.some(condition => condition.key === ruleCondition.key)
      )
      if (matches) {
        return rule.getColor()
      }
    }
    return 'blue' // ê¸°ë³¸ ìƒ‰ìƒ
  }

  // ìƒˆ ì¹© ìƒì„± (í•„í„° ì„¤ì •ì—ì„œ ì¡°ê±´ì´ ë³€ê²½ë  ë•Œ)
  const createChipFromConditions = () => {
    const conditions: FilterCondition[] = []
    
    // ì„¤ì •ë“¤ì„ ì¡°ê±´ìœ¼ë¡œ ë³€í™˜
    settings.forEach(setting => {
      if (setting.value !== undefined && setting.value !== '' && setting.value !== false) {
        if (setting.type === 'toggle' && setting.value) {
          conditions.push({
            key: setting.key,
            operator: 'boolean',
            value: true,
            label: setting.label
          })
        } else if (setting.type === 'select' && setting.value !== 'all') {
          conditions.push({
            key: setting.key,
            operator: 'equals',
            value: setting.value,
            label: `${setting.label}: ${getOptionLabel(setting.value)}`
          })
        } else if (setting.type === 'multi-select' && Array.isArray(setting.value) && setting.value.length > 0) {
          conditions.push({
            key: setting.key,
            operator: 'in',
            value: setting.value,
            label: `${setting.label}: ${setting.value.map(v => getOptionLabel(v)).join(', ')}`
          })
        } else if (setting.type === 'tag-selector' && Array.isArray(setting.value) && setting.value.length > 0) {
          conditions.push({
            key: setting.key,
            operator: 'in',
            value: setting.value,
            label: `${setting.label}: ${setting.value.map(v => getOptionLabel(v)).join(', ')}`
          })
        } else if (setting.type === 'range' && Array.isArray(setting.value)) {
          const [min, max] = setting.value
          if (min > 0 || max < 100) {
            conditions.push({
              key: setting.key,
              operator: 'range',
              value: setting.value,
              label: `${setting.label}: ${min}-${max}`
            })
          }
        }
      }
    })

    if (conditions.length === 0) return

    // ì´ë¯¸ ê°™ì€ ì¡°ê±´ì˜ ì¹©ì´ ìˆëŠ”ì§€ í™•ì¸
    const existingChip = customChips.find(chip => 
      chip.conditions.length === conditions.length &&
      chip.conditions.every(condition => 
        conditions.some(newCondition => 
          newCondition.key === condition.key && 
          newCondition.operator === condition.operator &&
          JSON.stringify(newCondition.value) === JSON.stringify(condition.value)
        )
      )
    )

    if (existingChip) {
      // ê¸°ì¡´ ì¹© í™œì„±í™”
      onChipChange(existingChip.id)
      return
    }

    // ìƒˆ ì¹© ìƒì„±
    const newChip: FilterChip = {
      id: `custom-${Date.now()}`,
      label: generateChipName(conditions),
      isDefault: false,
      conditions,
      count: getChipCount ? getChipCount(conditions) : undefined,
      color: generateChipColor(conditions),
      removable: true
    }

    setCustomChips(prev => [...prev, newChip])
    onChipChange(newChip.id)
  }

  // ì¹© ì‚­ì œ
  const removeChip = (chipId: string) => {
    setCustomChips(prev => prev.filter(chip => chip.id !== chipId))
    
    // ì‚­ì œëœ ì¹©ì´ í˜„ì¬ í™œì„± ì¹©ì´ë©´ ê¸°ë³¸ ì¹©ìœ¼ë¡œ ë³€ê²½
    if (activeChipId === chipId) {
      onChipChange(defaultChips[0]?.id || 'all')
    }
  }

  // ì˜µì…˜ ë¼ë²¨ ê°€ì ¸ì˜¤ê¸°
  const getOptionLabel = (value: string) => {
    const labels: { [key: string]: string } = {
      'deadline': 'ë§ˆê°ì¼ìˆœ',
      'priority': 'ìš°ì„ ìˆœìœ„ìˆœ',
      'created': 'ìƒì„±ì¼ìˆœ',
      'updated': 'ìˆ˜ì •ì¼ìˆœ',
      'momentum': 'ëª¨ë©˜í…€ ì ìˆ˜ìˆœ',
      'energy': 'ì—ë„ˆì§€ ë ˆë²¨ìˆœ',
      'latest': 'ìµœì‹ ìˆœ',
      'popular': 'ì¸ê¸°ìˆœ',
      'comments': 'ëŒ“ê¸€ìˆœ',
      'views': 'ì¡°íšŒìˆœ',
      'recent': 'ìµœê·¼ìˆœ',
      'progress': 'ì§„í–‰ë¥ ìˆœ',
      'members': 'ë©¤ë²„ìˆœ',
      'objectives': 'OKR ì§„í–‰ë¥ ìˆœ',
      'all': 'ì „ì²´',
      'recruiting': 'ëª¨ì§‘ ì¤‘',
      'closed': 'ëª¨ì§‘ ì™„ë£Œ',
      '24h': '24ì‹œê°„ ì´ë‚´',
      '7d': '7ì¼ ì´ë‚´',
      '30d': '30ì¼ ì´ë‚´',
      '1-2ëª…': '1-2ëª…',
      '3-5ëª…': '3-5ëª…',
      '6ëª… ì´ìƒ': '6ëª… ì´ìƒ',
      'fixed': 'ê³ ì • ê¸ˆì•¡',
      'hourly': 'ì‹œê°„ì œ',
      'beginner': 'ì´ˆê¸‰',
      'intermediate': 'ì¤‘ê¸‰',
      'advanced': 'ê³ ê¸‰',
      'tutorial': 'íŠœí† ë¦¬ì–¼',
      'guide': 'ê°€ì´ë“œ',
      'reference': 'ì°¸ê³ ìë£Œ',
      'template': 'í…œí”Œë¦¿',
      'individual': 'ê°œì¸',
      'small': '2-3ëª…',
      'large': '4ëª…+',
      'prototype': 'í”„ë¡œí† íƒ€ì…',
      'mvp': 'MVP',
      'complete': 'ì™„ì œí’ˆ'
    }
    return labels[value] || value
  }

  // ìƒ‰ìƒë³„ í´ë˜ìŠ¤
  const getColorClasses = (color: string, isActive: boolean) => {
    const colors = {
      blue: {
        active: 'bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg shadow-blue-500/25',
        inactive: 'text-blue-600 hover:bg-blue-50 border-blue-200 hover:border-blue-300'
      },
      green: {
        active: 'bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg shadow-green-500/25',
        inactive: 'text-green-600 hover:bg-green-50 border-green-200 hover:border-green-300'
      },
      purple: {
        active: 'bg-gradient-to-r from-purple-500 to-purple-600 text-white shadow-lg shadow-purple-500/25',
        inactive: 'text-purple-600 hover:bg-purple-50 border-purple-200 hover:border-purple-300'
      },
      orange: {
        active: 'bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg shadow-blue-500/25',
        inactive: 'text-blue-600 hover:bg-blue-50 border-blue-200 hover:border-blue-300'
      },
      red: {
        active: 'bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg shadow-red-500/25',
        inactive: 'text-red-600 hover:bg-red-50 border-red-200 hover:border-red-300'
      },
      gray: {
        active: 'bg-gradient-to-r from-gray-500 to-gray-600 text-white shadow-lg shadow-gray-500/25',
        inactive: 'text-gray-600 hover:bg-gray-50 border-gray-200 hover:border-gray-300'
      }
    }
    
    return colors[color as keyof typeof colors] || colors.gray
  }

  // ë³€í˜•ë³„ íŒ¨ë”© í´ë˜ìŠ¤
  const getVariantClasses = () => {
    switch (variant) {
      case 'compact':
        return 'px-3 py-1.5 text-xs'
      case 'spacious':
        return 'px-6 py-3 text-base'
      default: // comfortable
        return 'px-4 py-2 text-sm'
    }
  }

  const variantClasses = getVariantClasses()

  const renderChip = (chip: FilterChip) => {
    const isActive = activeChipId === chip.id
    const colorClasses = chip.color ? getColorClasses(chip.color, isActive) : null
    
    return (
      <div key={chip.id} className="flex items-center gap-1">
        <button
          data-chip-id={chip.id}
          onClick={() => onChipChange(chip.id)}
          className={`
            flex-shrink-0
            ${variantClasses}
            font-medium
            rounded-full
            transition-all duration-300
            flex items-center gap-2
            min-w-max
            transform hover:scale-105 active:scale-95
            focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:ring-offset-2
            ${
              colorClasses
                ? isActive 
                  ? `${colorClasses.active} border-none`
                  : `bg-white ${colorClasses.inactive} border`
                : isActive
                  ? 'bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg shadow-blue-500/25 border-none'
                  : 'bg-white text-gray-600 hover:text-gray-900 hover:bg-gray-50 border border-gray-200 hover:border-gray-300 hover:shadow-md'
            }
          `}
          aria-pressed={isActive}
          role="button"
        >
          {chip.icon && (
            <span className="w-4 h-4 flex items-center justify-center flex-shrink-0">
              {chip.icon}
            </span>
          )}
          <span className="whitespace-nowrap">{chip.label}</span>
          {chip.count !== undefined && chip.count > 0 && (
            <span 
              className={`
                text-xs 
                min-w-[20px] 
                h-5
                rounded-full 
                flex 
                items-center 
                justify-center 
                font-semibold
                flex-shrink-0
                ${
                  isActive 
                    ? 'bg-white/20 text-white'
                    : 'bg-gray-100 text-gray-600'
                }
              `}
            >
              {chip.count > 999 ? '999+' : chip.count}
            </span>
          )}
        </button>
        
        {/* ì‚­ì œ ë²„íŠ¼ */}
        {chip.removable && (
          <button
            onClick={(e) => {
              e.stopPropagation()
              removeChip(chip.id)
            }}
            className="w-5 h-5 rounded-full bg-gray-200 hover:bg-red-100 text-gray-500 hover:text-red-600 transition-colors flex items-center justify-center ml-1"
            aria-label={`${chip.label} í•„í„° ì‚­ì œ`}
          >
            <XMarkIcon className="w-3 h-3" />
          </button>
        )}
      </div>
    )
  }

  const renderSettingControl = (setting: FilterSetting) => {
    switch (setting.type) {
      case 'toggle':
        return (
          <button
            onClick={() => setting.onChange(!setting.value)}
            className={`
              w-10 h-6 rounded-full transition-colors relative
              ${setting.value ? 'bg-blue-600' : 'bg-gray-300'}
            `}
          >
            <div className={`
              w-4 h-4 bg-white rounded-full absolute top-1 transition-transform
              ${setting.value ? 'translate-x-5' : 'translate-x-1'}
            `} />
          </button>
        )
      
      case 'select':
        return (
          <select 
            value={setting.value || ''}
            onChange={(e) => setting.onChange(e.target.value)}
            className="text-sm border border-gray-200 rounded-lg px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500"
          >
            {(setting.options || []).map((option) => (
              <option key={option} value={option}>
                {getOptionLabel(option)}
              </option>
            ))}
          </select>
        )
      
      case 'multi-select':
        return (
          <select 
            multiple
            value={setting.value || []}
            onChange={(e) => {
              const values = Array.from(e.target.selectedOptions, option => option.value)
              setting.onChange(values)
            }}
            className="text-sm border border-gray-200 rounded-lg px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500 min-h-[80px]"
          >
            {(setting.options || []).map((option) => (
              <option key={option} value={option}>
                {getOptionLabel(option)}
              </option>
            ))}
          </select>
        )
      
      case 'range':
        return (
          <div className="flex items-center gap-2">
            <input
              type="number"
              placeholder="ìµœì†Œ"
              value={setting.value?.[0] || ''}
              onChange={(e) => {
                const newValue = [parseInt(e.target.value) || 0, setting.value?.[1] || 100]
                setting.onChange(newValue)
              }}
              className="text-sm border border-gray-200 rounded-lg px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500 w-16"
            />
            <span className="text-gray-400">~</span>
            <input
              type="number"
              placeholder="ìµœëŒ€"
              value={setting.value?.[1] || ''}
              onChange={(e) => {
                const newValue = [setting.value?.[0] || 0, parseInt(e.target.value) || 100]
                setting.onChange(newValue)
              }}
              className="text-sm border border-gray-200 rounded-lg px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500 w-16"
            />
          </div>
        )
      
      case 'tag-selector':
        return (
          <div className="flex flex-wrap gap-1 max-w-[200px]">
            {(setting.options || []).map((option) => {
              const isSelected = setting.value?.includes(option)
              return (
                <button
                  key={option}
                  onClick={() => {
                    const currentValue = setting.value || []
                    const newValue = isSelected 
                      ? currentValue.filter((v: string) => v !== option)
                      : [...currentValue, option]
                    setting.onChange(newValue)
                  }}
                  className={`
                    px-2 py-1 text-xs rounded-full border transition-colors
                    ${isSelected 
                      ? 'bg-blue-100 border-blue-300 text-blue-700' 
                      : 'bg-gray-50 border-gray-200 text-gray-600 hover:bg-gray-100'
                    }
                  `}
                >
                  {getOptionLabel(option)}
                </button>
              )
            })}
          </div>
        )
      
      case 'date-range':
        return (
          <div className="flex items-center gap-2">
            <input
              type="date"
              value={setting.value?.[0] || ''}
              onChange={(e) => {
                const newValue = [e.target.value, setting.value?.[1] || '']
                setting.onChange(newValue)
              }}
              className="text-sm border border-gray-200 rounded-lg px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500"
            />
            <span className="text-gray-400">~</span>
            <input
              type="date"
              value={setting.value?.[1] || ''}
              onChange={(e) => {
                const newValue = [setting.value?.[0] || '', e.target.value]
                setting.onChange(newValue)
              }}
              className="text-sm border border-gray-200 rounded-lg px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500"
            />
          </div>
        )
      
      case 'text':
        return (
          <input
            type="text"
            value={setting.value || ''}
            onChange={(e) => setting.onChange(e.target.value)}
            placeholder={setting.placeholder}
            className="text-sm border border-gray-200 rounded-lg px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500"
          />
        )
      
      default:
        return null
    }
  }

  return (
    <div className={`relative bg-gradient-to-r from-gray-50/50 to-white/50 ${className}`}>
      {/* ë°ìŠ¤í¬í†± */}
      <div className="hidden md:block">
        <div className="flex items-center gap-3 px-0 py-0">
          {/* í•„í„° ì¹©ë“¤ */}
          <div 
            ref={scrollContainerRef}
            className="flex space-x-2 overflow-x-auto scrollbar-hide flex-1 px-0 py-0"
            style={{ scrollbarWidth: 'none', msOverflowStyle: 'none' }}
          >
            {allChips.map((chip) => renderChip(chip))}
          </div>

          {/* ì„¤ì • ë²„íŠ¼ */}
          <div className="relative">
            <button
              onClick={() => setShowSettings(!showSettings)}
              className={`
                text-gray-600 hover:text-gray-900 hover:bg-gray-50
                border border-gray-300 hover:border-gray-400
                rounded-full
                transition-all duration-300
                flex items-center justify-center
                hover:scale-105 active:scale-95
                focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:ring-offset-2
                w-11 h-11
                min-w-[2.75rem]
                p-0
                bg-white
                shadow-sm
              `}
              aria-expanded={showSettings}
              aria-haspopup="true"
              aria-label="í•„í„° ì„¤ì •"
            >
              <AdjustmentsHorizontalIcon className="w-5 h-5" />
            </button>

            {showSettings && (
              <div className="absolute top-full right-0 mt-2 bg-white border border-gray-200 rounded-xl shadow-lg min-w-[320px] p-4 z-50">
                <div className="mb-3 flex items-center justify-between">
                  <h3 className="text-sm font-semibold text-gray-900">{settingsTitle}</h3>
                  <button
                    onClick={createChipFromConditions}
                    className="flex items-center gap-1 px-2 py-1 text-xs bg-blue-600 text-white rounded-lg hover:bg-blue-700"
                  >
                    <PlusIcon className="w-3 h-3" />
                    ì¹© ìƒì„±
                  </button>
                </div>
                <div className="space-y-3">
                  {settings.map((setting) => (
                    <div key={setting.key} className="flex items-center justify-between">
                      <label className="text-sm text-gray-700">{setting.label}</label>
                      {renderSettingControl(setting)}
                    </div>
                  ))}
                </div>
              </div>
            )}
          </div>
        </div>
      </div>

      {/* ëª¨ë°”ì¼ */}
      <div className="md:hidden">
        <div className="absolute left-0 top-0 bottom-0 w-6 bg-gradient-to-r from-gray-50 via-gray-50/80 to-transparent pointer-events-none z-10" />
        <div className="absolute right-0 top-0 bottom-0 w-6 bg-gradient-to-l from-white via-white/80 to-transparent pointer-events-none z-10" />
        
        <div className="flex items-center">
          <div 
            ref={scrollContainerRef}
            className="flex space-x-3 overflow-x-auto scrollbar-hide px-4 py-2 flex-1"
            style={{ scrollbarWidth: 'none', msOverflowStyle: 'none' }}
          >
            {allChips.map((chip) => renderChip(chip))}
          </div>
          
          {/* ëª¨ë°”ì¼ ì„¤ì • ë²„íŠ¼ */}
          <div className="pr-4 pl-3">
            <button
              onClick={() => setShowSettings(!showSettings)}
              className={`
                text-gray-600 hover:text-gray-900 hover:bg-gray-50
                border border-gray-300 hover:border-gray-400
                rounded-full
                transition-all duration-300
                flex items-center justify-center
                hover:scale-105 active:scale-95
                focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:ring-offset-2
                w-11 h-11
                min-w-[2.75rem]
                p-0
                bg-white
                shadow-sm
              `}
              aria-expanded={showSettings}
              aria-haspopup="true"
              aria-label="í•„í„° ì„¤ì •"
            >
              <AdjustmentsHorizontalIcon className="w-5 h-5" />
            </button>
          </div>
        </div>
      </div>
      
      {/* ëª¨ë°”ì¼ ë°”í…€ì‹œíŠ¸ ì„¤ì • ëª¨ë‹¬ */}
      {showSettings && (
        <div className="md:hidden fixed inset-0 z-[60] flex items-end">
          <div 
            className="absolute inset-0 bg-black bg-opacity-25" 
            onClick={() => setShowSettings(false)}
          />
          <div className="relative bg-white w-full max-h-[70vh] rounded-t-xl shadow-xl">
            {/* ëª¨ë‹¬ í—¤ë” */}
            <div className="flex items-center justify-between p-4 border-b border-gray-200">
              <h3 className="text-lg font-semibold text-gray-900">{settingsTitle}</h3>
              <div className="flex items-center gap-2">
                <button
                  onClick={createChipFromConditions}
                  className="flex items-center gap-1 px-3 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700"
                >
                  <PlusIcon className="w-4 h-4" />
                  ì¹© ìƒì„±
                </button>
                <button
                  onClick={() => setShowSettings(false)}
                  className="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100"
                >
                  <XMarkIcon className="w-5 h-5 text-gray-400" />
                </button>
              </div>
            </div>
            
            {/* ëª¨ë‹¬ ì½˜í…ì¸  */}
            <div className="p-4 space-y-4 max-h-[50vh] overflow-y-auto">
              {settings.map((setting) => (
                <div key={setting.key} className="flex items-center justify-between py-2">
                  <label className="text-sm font-medium text-gray-700">{setting.label}</label>
                  {renderSettingControl(setting)}
                </div>
              ))}
            </div>
            
            {/* ëª¨ë‹¬ í‘¸í„° */}
            <div className="p-4 border-t border-gray-200">
              <button
                onClick={() => setShowSettings(false)}
                className="w-full py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors"
              >
                ì ìš©
              </button>
            </div>
          </div>
        </div>
      )}
    </div>
  )
}
</file>

<file path="frontend/src/components/ui/Input.tsx">
import React from 'react';
import { cn } from '@/lib/utils';

export interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {
  error?: string;
  label?: string;
  helperText?: string;
}

const Input = React.forwardRef<HTMLInputElement, InputProps>(
  ({ className, type, error, label, helperText, id, ...props }, ref) => {
    const inputId = id || `input-${Math.random().toString(36).substr(2, 9)}`;

    return (
      <div className="w-full">
        {label && (
          <label 
            htmlFor={inputId}
            className="block text-sm font-medium text-gray-700 mb-1"
          >
            {label}
            {props.required && <span className="text-red-500 ml-1">*</span>}
          </label>
        )}
        <input
          type={type}
          id={inputId}
          className={cn(
            'flex h-10 w-full rounded-md border border-gray-200 bg-white px-3 py-2 text-sm',
            'file:border-0 file:bg-transparent file:text-sm file:font-medium',
            'placeholder:text-gray-500',
            'focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent',
            'disabled:cursor-not-allowed disabled:opacity-50',
            error && 'border-red-500 focus:ring-red-500',
            className
          )}
          ref={ref}
          {...props}
        />
        {error && (
          <p className="mt-1 text-sm text-red-600">{error}</p>
        )}
        {helperText && !error && (
          <p className="mt-1 text-sm text-gray-500">{helperText}</p>
        )}
      </div>
    );
  }
);

Input.displayName = 'Input';

export { Input };
</file>

<file path="frontend/src/components/ui/MobileTabs.tsx">
'use client'

import { useState } from 'react'

interface MobileTabsProps {
  tabs: string[]
  activeTab?: string
  onTabChange?: (tab: string) => void
}

export default function MobileTabs({ tabs, activeTab, onTabChange }: MobileTabsProps) {
  const [currentTab, setCurrentTab] = useState(activeTab || tabs[0])

  const handleTabClick = (tab: string) => {
    setCurrentTab(tab)
    onTabChange?.(tab)
  }

  return (
    <div className="md:hidden bg-background border-b border-border">
      <div className="flex w-full" role="tablist" aria-label="íƒ­ ë„¤ë¹„ê²Œì´ì…˜">
        {tabs.map((tab, index) => (
          <button
            key={tab}
            id={`tab-${index}`}
            onClick={() => handleTabClick(tab)}
            className={`flex-1 px-4 py-3 text-sm font-medium transition-colors ${
              currentTab === tab
                ? 'text-foreground border-b-2 border-foreground'
                : 'text-muted-foreground hover:text-foreground'
            }`}
            role="tab"
            aria-selected={currentTab === tab}
            aria-controls={`tabpanel-${index}`}
            tabIndex={currentTab === tab ? 0 : -1}
          >
            {tab}
          </button>
        ))}
      </div>
    </div>
  )
}
</file>

<file path="frontend/src/components/ui/Select.tsx">
import React from 'react';
import { cn } from '@/lib/utils';
import { ChevronDownIcon } from '@heroicons/react/24/outline';

export interface SelectOption {
  value: string;
  label: string;
  disabled?: boolean;
}

export interface SelectProps extends React.SelectHTMLAttributes<HTMLSelectElement> {
  options: SelectOption[];
  error?: string;
  label?: string;
  helperText?: string;
  placeholder?: string;
}

const Select = React.forwardRef<HTMLSelectElement, SelectProps>(
  ({ className, options, error, label, helperText, placeholder, id, ...props }, ref) => {
    const selectId = id || `select-${Math.random().toString(36).substr(2, 9)}`;

    return (
      <div className="w-full">
        {label && (
          <label 
            htmlFor={selectId}
            className="block text-sm font-medium text-gray-700 mb-1"
          >
            {label}
            {props.required && <span className="text-red-500 ml-1">*</span>}
          </label>
        )}
        <div className="relative">
          <select
            id={selectId}
            className={cn(
              'flex h-10 w-full rounded-md border border-gray-200 bg-white px-3 py-2 text-sm',
              'focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent',
              'disabled:cursor-not-allowed disabled:opacity-50',
              'appearance-none cursor-pointer',
              error && 'border-red-500 focus:ring-red-500',
              className
            )}
            ref={ref}
            {...props}
          >
            {placeholder && (
              <option value="" disabled>
                {placeholder}
              </option>
            )}
            {options.map((option) => (
              <option 
                key={option.value} 
                value={option.value}
                disabled={option.disabled}
              >
                {option.label}
              </option>
            ))}
          </select>
          <ChevronDownIcon className="absolute right-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400 pointer-events-none" />
        </div>
        {error && (
          <p className="mt-1 text-sm text-red-600">{error}</p>
        )}
        {helperText && !error && (
          <p className="mt-1 text-sm text-gray-500">{helperText}</p>
        )}
      </div>
    );
  }
);

Select.displayName = 'Select';

export { Select };
</file>

<file path="frontend/src/components/ui/SimpleFilterChips.tsx">
'use client'

import { useState } from 'react'
import { XMarkIcon, AdjustmentsHorizontalIcon, FunnelIcon } from '@heroicons/react/24/outline'

interface FilterOption {
  key: string
  label: string
  count?: number
}

interface FilterSetting {
  key: string
  label: string
  type: 'toggle' | 'select'
  value?: any
  options?: string[]
  onChange: (value: any) => void
}

interface SimpleFilterChipsProps {
  options: FilterOption[]
  activeFilters: string[]
  onFilterChange: (filters: string[]) => void
  className?: string
  settings?: {
    title: string
    settings: FilterSetting[]
  }
  onAdvancedFilterClick?: () => void
  hasAdvancedFilters?: boolean
}

/**
 * ì›Œí´ë¦¬ ë””ìì¸ ì‹œìŠ¤í…œì„ ì¤€ìˆ˜í•˜ëŠ” ë§¤ìš° ê°„ê²°í•œ í•„í„° ì¹© ì»´í¬ë„ŒíŠ¸
 * - ë‹¨ì¼ ìƒ‰ìƒ ì²´ê³„ (Blue Primary + Gray Secondary)
 * - ê°„ê²°í•œ ë””ìì¸
 * - ëª¨ë°”ì¼/ë°ìŠ¤í¬í†± í†µí•© ëŒ€ì‘
 */
export default function SimpleFilterChips({ 
  options, 
  activeFilters,
  onFilterChange,
  className = '',
  settings,
  onAdvancedFilterClick,
  hasAdvancedFilters = false
}: SimpleFilterChipsProps) {
  
  const [showSettings, setShowSettings] = useState(false)
  
  const handleChipClick = (key: string) => {
    if (activeFilters.includes(key)) {
      onFilterChange(activeFilters.filter(f => f !== key))
    } else {
      onFilterChange([...activeFilters, key])
    }
  }

  const handleRemoveFilter = (key: string) => {
    onFilterChange(activeFilters.filter(f => f !== key))
  }

  return (
    <div className={`flex items-center justify-between gap-4 ${className}`}>
      {/* í™œì„± í•„í„° ì¹©ë“¤ */}
      <div className="flex items-center gap-2 flex-1">
        {activeFilters.length > 0 ? (
          <>
            {activeFilters.map(filterKey => {
              const option = options.find(opt => opt.key === filterKey)
              if (!option) return null
              
              return (
                <div
                  key={filterKey}
                  className="workly-filter-chip active inline-flex items-center gap-2 font-medium"
                >
                  <span>{option.label}</span>
                  {option.count && (
                    <span className="text-xs bg-blue-200 text-blue-700 px-1.5 py-0.5 rounded-full">
                      {option.count}
                    </span>
                  )}
                  <button
                    onClick={() => handleRemoveFilter(filterKey)}
                    className="w-4 h-4 flex items-center justify-center hover:bg-blue-200 rounded-full transition-colors"
                    aria-label={`${option.label} í•„í„° ì œê±°`}
                  >
                    <XMarkIcon className="w-3 h-3" />
                  </button>
                </div>
              )
            })}
          </>
        ) : (
          <div className="flex gap-2 overflow-x-auto scrollbar-hide">
            {options.map(option => (
              <button
                key={option.key}
                onClick={() => handleChipClick(option.key)}
                className="workly-filter-chip flex-shrink-0 inline-flex items-center gap-2 font-medium"
              >
                <span>{option.label}</span>
                {option.count && (
                  <span className="text-xs bg-gray-100 text-gray-500 px-1.5 py-0.5 rounded-full">
                    {option.count}
                  </span>
                )}
              </button>
            ))}
          </div>
        )}
      </div>
      
      {/* ìƒì„¸ í•„í„° ë²„íŠ¼ */}
      {onAdvancedFilterClick && (
        <button
          onClick={onAdvancedFilterClick}
          className={`flex-shrink-0 w-10 h-10 flex items-center justify-center bg-white border border-gray-200 rounded-full hover:border-gray-300 hover:bg-gray-50 transition-colors ${
            hasAdvancedFilters ? 'text-blue-600 border-blue-200 bg-blue-50' : 'text-gray-600'
          }`}
          aria-label="ìƒì„¸ í•„í„°"
        >
          <FunnelIcon className="w-5 h-5" />
        </button>
      )}
      
      {/* í•„í„° ì„¤ì • ë²„íŠ¼ */}
      {settings && (
        <div className="relative">
          <button
            onClick={() => setShowSettings(!showSettings)}
            className="flex-shrink-0 w-10 h-10 flex items-center justify-center bg-white text-gray-600 border border-gray-200 rounded-full hover:border-gray-300 hover:bg-gray-50 transition-colors"
            aria-label="í•„í„° ì„¤ì •"
          >
            <AdjustmentsHorizontalIcon className="w-5 h-5" />
          </button>
          
          {/* ì„¤ì • ë“œë¡­ë‹¤ìš´ */}
          {showSettings && (
            <div className="absolute top-full right-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-lg min-w-[200px] p-4 z-50">
              <h3 className="text-sm font-semibold text-gray-900 mb-3">{settings.title}</h3>
              <div className="space-y-3">
                {settings.settings.map((setting) => (
                  <div key={setting.key} className="flex items-center justify-between">
                    <label className="text-sm text-gray-700">{setting.label}</label>
                    {setting.type === 'toggle' && (
                      <button
                        onClick={() => setting.onChange(!setting.value)}
                        className={`
                          w-10 h-6 rounded-full transition-colors relative
                          ${setting.value ? 'bg-blue-600' : 'bg-gray-300'}
                        `}
                      >
                        <div className={`
                          w-4 h-4 bg-white rounded-full absolute top-1 transition-transform
                          ${setting.value ? 'translate-x-5' : 'translate-x-1'}
                        `} />
                      </button>
                    )}
                    {setting.type === 'select' && setting.options && (
                      <select 
                        value={setting.value || ''}
                        onChange={(e) => setting.onChange(e.target.value)}
                        className="text-sm border border-gray-200 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500"
                      >
                        {setting.options.map((option) => (
                          <option key={option} value={option}>
                            {option === 'priority' ? 'ìš°ì„ ìˆœìœ„ìˆœ' :
                             option === 'dueDate' ? 'ë§ˆê°ì¼ìˆœ' :
                             option === 'status' ? 'ìƒíƒœìˆœ' :
                             option === 'created' ? 'ìƒì„±ìˆœ' : option}
                          </option>
                        ))}
                      </select>
                    )}
                  </div>
                ))}
              </div>
            </div>
          )}
        </div>
      )}
    </div>
  )
}
</file>

<file path="frontend/src/components/ui/UnifiedFilter.tsx">
'use client'

import { ReactNode, useRef, useEffect, useState } from 'react'
import { ChevronDownIcon, XMarkIcon, AdjustmentsHorizontalIcon } from '@heroicons/react/24/outline'

interface FilterOption {
  key: string
  label: string
  count?: number
  icon?: ReactNode
  color?: 'blue' | 'green' | 'purple' | 'orange' | 'red' | 'gray'
}

interface FilterSetting {
  key: string
  label: string
  type: 'toggle' | 'select' | 'multi-select' | 'range' | 'tag-selector' | 'date-range'
  value?: any
  options?: string[] | FilterOption[]
  placeholder?: string
  validation?: (value: any) => boolean
  dependency?: string // ë‹¤ë¥¸ ì„¤ì •ì— ì˜ì¡´
  onChange: (value: any) => void
}

interface UnifiedFilterProps {
  // ë©”ì¸ í•„í„° ì¹©ë“¤
  options: FilterOption[]
  activeFilter: string
  onFilterChange: (filter: string) => void
  
  // ì„¤ì •
  settings?: FilterSetting[]
  settingsTitle?: string
  
  // ìŠ¤íƒ€ì¼ ì˜µì…˜
  className?: string
  variant?: 'compact' | 'comfortable' | 'spacious'
  style?: 'modern' | 'minimal' | 'glassmorphism'
  maxVisibleItems?: number
}

export default function UnifiedFilter({ 
  options, 
  activeFilter, 
  onFilterChange,
  settings = [],
  settingsTitle = 'í•„í„° ì„¤ì •',
  className = '',
  variant = 'comfortable',
  style = 'modern',
  maxVisibleItems
}: UnifiedFilterProps) {
  const scrollContainerRef = useRef<HTMLDivElement>(null)
  const [showOverflow, setShowOverflow] = useState(false)
  const [overflowItems, setOverflowItems] = useState<FilterOption[]>([])
  const [visibleItems, setVisibleItems] = useState<FilterOption[]>(options)
  const [showSettings, setShowSettings] = useState(false)

  // ì˜¤ë²„í”Œë¡œìš° ì²˜ë¦¬
  useEffect(() => {
    if (maxVisibleItems && options.length > maxVisibleItems) {
      setVisibleItems(options.slice(0, maxVisibleItems))
      setOverflowItems(options.slice(maxVisibleItems))
    } else {
      setVisibleItems(options)
      setOverflowItems([])
    }
  }, [options, maxVisibleItems])

  // í™œì„± í•„í„°ë¡œ ìë™ ìŠ¤í¬ë¡¤
  useEffect(() => {
    if (scrollContainerRef.current) {
      const activeElement = scrollContainerRef.current.querySelector(`[data-filter="${activeFilter}"]`)
      if (activeElement) {
        activeElement.scrollIntoView({
          behavior: 'smooth',
          block: 'nearest',
          inline: 'center'
        })
      }
    }
  }, [activeFilter])

  // ìƒ‰ìƒë³„ í´ë˜ìŠ¤
  const getColorClasses = (color: string, isActive: boolean) => {
    const colors = {
      blue: {
        active: 'bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg shadow-blue-500/25',
        inactive: 'text-blue-600 hover:bg-blue-50 border-blue-200 hover:border-blue-300'
      },
      green: {
        active: 'bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg shadow-green-500/25',
        inactive: 'text-green-600 hover:bg-green-50 border-green-200 hover:border-green-300'
      },
      purple: {
        active: 'bg-gradient-to-r from-purple-500 to-purple-600 text-white shadow-lg shadow-purple-500/25',
        inactive: 'text-purple-600 hover:bg-purple-50 border-purple-200 hover:border-purple-300'
      },
      orange: {
        active: 'bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg shadow-blue-500/25',
        inactive: 'text-blue-600 hover:bg-blue-50 border-blue-200 hover:border-blue-300'
      },
      red: {
        active: 'bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg shadow-red-500/25',
        inactive: 'text-red-600 hover:bg-red-50 border-red-200 hover:border-red-300'
      },
      gray: {
        active: 'bg-gradient-to-r from-gray-500 to-gray-600 text-white shadow-lg shadow-gray-500/25',
        inactive: 'text-gray-600 hover:bg-gray-50 border-gray-200 hover:border-gray-300'
      }
    }
    
    return colors[color as keyof typeof colors] || colors.gray
  }

  // ë³€í˜•ë³„ íŒ¨ë”© í´ë˜ìŠ¤
  const getVariantClasses = () => {
    switch (variant) {
      case 'compact':
        return 'px-3 py-1.5 text-xs'
      case 'spacious':
        return 'px-6 py-3 text-base'
      default: // comfortable
        return 'px-4 py-2 text-sm'
    }
  }

  const variantClasses = getVariantClasses()

  const renderChip = (option: FilterOption, isOverflow = false) => {
    const isActive = activeFilter === option.key
    const colorClasses = option.color ? getColorClasses(option.color, isActive) : null
    
    return (
      <button
        key={option.key}
        data-filter={option.key}
        onClick={() => onFilterChange(option.key)}
        className={`
          flex-shrink-0
          ${variantClasses}
          font-medium
          rounded-full
          transition-all duration-300
          flex items-center gap-2
          min-w-max
          transform hover:scale-105 active:scale-95
          focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:ring-offset-2
          ${
            colorClasses
              ? isActive 
                ? `${colorClasses.active} border-none`
                : `bg-white ${colorClasses.inactive} border`
              : isActive
                ? 'bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg shadow-blue-500/25 border-none'
                : 'bg-white text-gray-600 hover:text-gray-900 hover:bg-gray-50 border border-gray-200 hover:border-gray-300 hover:shadow-md'
          }
          ${isOverflow ? 'w-full justify-start' : ''}
        `}
        aria-pressed={isActive}
        role="button"
      >
      {option.icon && (
        <span className="w-4 h-4 flex items-center justify-center flex-shrink-0">
          {option.icon}
        </span>
      )}
      <span className="whitespace-nowrap">{option.label}</span>
      {option.count !== undefined && option.count > 0 && (
        <span 
          className={`
            text-xs 
            min-w-[20px] 
            h-5
            rounded-full 
            flex 
            items-center 
            justify-center 
            font-semibold
            flex-shrink-0
            ${
              isActive 
                ? 'bg-white/20 text-white'
                : 'bg-gray-100 text-gray-600'
            }
          `}
        >
          {option.count > 999 ? '999+' : option.count}
        </span>
      )}
      </button>
    )
  }

  const getOptionLabel = (option: string) => {
    const labels: { [key: string]: string } = {
      'deadline': 'ë§ˆê°ì¼ìˆœ',
      'priority': 'ìš°ì„ ìˆœìœ„ìˆœ',
      'created': 'ìƒì„±ì¼ìˆœ',
      'updated': 'ìˆ˜ì •ì¼ìˆœ',
      'momentum': 'ëª¨ë©˜í…€ ì ìˆ˜ìˆœ',
      'energy': 'ì—ë„ˆì§€ ë ˆë²¨ìˆœ',
      'latest': 'ìµœì‹ ìˆœ',
      'popular': 'ì¸ê¸°ìˆœ',
      'comments': 'ëŒ“ê¸€ìˆœ',
      'views': 'ì¡°íšŒìˆœ',
      'recent': 'ìµœê·¼ìˆœ',
      'progress': 'ì§„í–‰ë¥ ìˆœ',
      'members': 'ë©¤ë²„ìˆœ',
      'objectives': 'OKR ì§„í–‰ë¥ ìˆœ',
      'all': 'ì „ì²´',
      'recruiting': 'ëª¨ì§‘ ì¤‘',
      'closed': 'ëª¨ì§‘ ì™„ë£Œ',
      '24h': '24ì‹œê°„ ì´ë‚´',
      '7d': '7ì¼ ì´ë‚´',
      '30d': '30ì¼ ì´ë‚´',
      '1-2ëª…': '1-2ëª…',
      '3-5ëª…': '3-5ëª…',
      '6ëª… ì´ìƒ': '6ëª… ì´ìƒ',
      'fixed': 'ê³ ì • ê¸ˆì•¡',
      'hourly': 'ì‹œê°„ì œ',
      'beginner': 'ì´ˆê¸‰',
      'intermediate': 'ì¤‘ê¸‰',
      'advanced': 'ê³ ê¸‰',
      'tutorial': 'íŠœí† ë¦¬ì–¼',
      'guide': 'ê°€ì´ë“œ',
      'reference': 'ì°¸ê³ ìë£Œ',
      'template': 'í…œí”Œë¦¿',
      'individual': 'ê°œì¸',
      'small': '2-3ëª…',
      'large': '4ëª…+',
      'prototype': 'í”„ë¡œí† íƒ€ì…',
      'mvp': 'MVP',
      'complete': 'ì™„ì œí’ˆ'
    }
    return labels[option] || option
  }

  return (
    <div className={`relative bg-gradient-to-r from-gray-50/50 to-white/50 ${className}`}>
      {/* ë°ìŠ¤í¬í†± */}
      <div className="hidden md:block">
        <div className="flex items-center gap-3 px-6 py-4">
          {/* ë©”ì¸ í•„í„° ì¹©ë“¤ */}
          <div 
            ref={scrollContainerRef}
            className="flex space-x-2 overflow-x-auto scrollbar-hide flex-1 px-3 py-2"
            style={{ scrollbarWidth: 'none', msOverflowStyle: 'none' }}
          >
            {visibleItems.map((option) => renderChip(option))}
          </div>

          {/* ì˜¤ë²„í”Œë¡œìš° ë©”ë‰´ */}
          {overflowItems.length > 0 && (
            <div className="relative">
              <button
                onClick={() => setShowOverflow(!showOverflow)}
                className={`
                  text-gray-600 hover:text-gray-900 hover:bg-gray-50
                  border border-gray-300 hover:border-gray-400
                  rounded-full
                  transition-all duration-300
                  flex items-center gap-1
                  hover:scale-105 active:scale-95
                  focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:ring-offset-2
                  ${variantClasses}
                `}
                aria-expanded={showOverflow}
                aria-haspopup="true"
              >
                <span>+{overflowItems.length}</span>
                <ChevronDownIcon className={`w-3 h-3 transition-transform ${showOverflow ? 'rotate-180' : ''}`} />
              </button>

              {showOverflow && (
                <div className="absolute top-full right-0 mt-2 bg-white border border-gray-200 rounded-xl shadow-lg min-w-[200px] py-2 z-50">
                  <div className="space-y-1 px-2">
                    {overflowItems.map((option) => renderChip(option, true))}
                  </div>
                </div>
              )}
            </div>
          )}

          {/* ì„¤ì • ë²„íŠ¼ */}
          {settings.length > 0 && (
            <div className="relative">
              <button
                onClick={() => setShowSettings(!showSettings)}
                className={`
                  text-gray-600 hover:text-gray-900 hover:bg-gray-50
                  border border-gray-300 hover:border-gray-400
                  rounded-full
                  transition-all duration-300
                  flex items-center justify-center
                  hover:scale-105 active:scale-95
                  focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:ring-offset-2
                  w-11 h-11
                  min-w-[2.75rem]
                  p-0
                  bg-white
                  shadow-sm
                `}
                aria-expanded={showSettings}
                aria-haspopup="true"
                aria-label="í•„í„° ì„¤ì •"
              >
                <AdjustmentsHorizontalIcon className="w-5 h-5" />
              </button>

              {showSettings && (
                <div className="absolute top-full right-0 mt-2 bg-white border border-gray-200 rounded-xl shadow-lg min-w-[280px] p-4 z-50">
                  <div className="mb-3">
                    <h3 className="text-sm font-semibold text-gray-900">{settingsTitle}</h3>
                  </div>
                  <div className="space-y-3">
                    {settings.map((setting) => (
                      <div key={setting.key} className="flex items-center justify-between">
                        <label className="text-sm text-gray-700">{setting.label}</label>
                        {setting.type === 'toggle' && (
                          <button
                            onClick={() => setting.onChange(!setting.value)}
                            className={`
                              w-10 h-6 rounded-full transition-colors relative
                              ${setting.value ? 'bg-blue-600' : 'bg-gray-300'}
                            `}
                          >
                            <div className={`
                              w-4 h-4 bg-white rounded-full absolute top-1 transition-transform
                              ${setting.value ? 'translate-x-5' : 'translate-x-1'}
                            `} />
                          </button>
                        )}
                        {setting.type === 'select' && setting.options && (
                          <select 
                            value={setting.value || ''}
                            onChange={(e) => setting.onChange(e.target.value)}
                            className="text-sm border border-gray-200 rounded-lg px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500"
                          >
                            {setting.options.map((option) => (
                              <option key={option} value={option}>
                                {getOptionLabel(option)}
                              </option>
                            ))}
                          </select>
                        )}
                        {setting.type === 'multi-select' && setting.options && (
                          <div className="relative">
                            <select 
                              multiple
                              value={setting.value || []}
                              onChange={(e) => {
                                const values = Array.from(e.target.selectedOptions, option => option.value)
                                setting.onChange(values)
                              }}
                              className="text-sm border border-gray-200 rounded-lg px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500 min-h-[80px]"
                            >
                              {setting.options.map((option) => (
                                <option key={option} value={option}>
                                  {getOptionLabel(option)}
                                </option>
                              ))}
                            </select>
                          </div>
                        )}
                        {setting.type === 'range' && (
                          <div className="flex items-center gap-2">
                            <input
                              type="number"
                              placeholder="ìµœì†Œ"
                              value={setting.value?.[0] || ''}
                              onChange={(e) => {
                                const newValue = [parseInt(e.target.value) || 0, setting.value?.[1] || 100]
                                setting.onChange(newValue)
                              }}
                              className="text-sm border border-gray-200 rounded-lg px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500 w-16"
                            />
                            <span className="text-gray-400">~</span>
                            <input
                              type="number"
                              placeholder="ìµœëŒ€"
                              value={setting.value?.[1] || ''}
                              onChange={(e) => {
                                const newValue = [setting.value?.[0] || 0, parseInt(e.target.value) || 100]
                                setting.onChange(newValue)
                              }}
                              className="text-sm border border-gray-200 rounded-lg px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500 w-16"
                            />
                          </div>
                        )}
                        {setting.type === 'tag-selector' && setting.options && (
                          <div className="flex flex-wrap gap-1 max-w-[200px]">
                            {setting.options.map((option) => {
                              const isSelected = setting.value?.includes(option)
                              return (
                                <button
                                  key={option}
                                  onClick={() => {
                                    const currentValue = setting.value || []
                                    const newValue = isSelected 
                                      ? currentValue.filter((v: string) => v !== option)
                                      : [...currentValue, option]
                                    setting.onChange(newValue)
                                  }}
                                  className={`
                                    px-2 py-1 text-xs rounded-full border transition-colors
                                    ${isSelected 
                                      ? 'bg-blue-100 border-blue-300 text-blue-700' 
                                      : 'bg-gray-50 border-gray-200 text-gray-600 hover:bg-gray-100'
                                    }
                                  `}
                                >
                                  {getOptionLabel(option)}
                                </button>
                              )
                            })}
                          </div>
                        )}
                        {setting.type === 'date-range' && (
                          <div className="flex items-center gap-2">
                            <input
                              type="date"
                              value={setting.value?.[0] || ''}
                              onChange={(e) => {
                                const newValue = [e.target.value, setting.value?.[1] || '']
                                setting.onChange(newValue)
                              }}
                              className="text-sm border border-gray-200 rounded-lg px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500"
                            />
                            <span className="text-gray-400">~</span>
                            <input
                              type="date"
                              value={setting.value?.[1] || ''}
                              onChange={(e) => {
                                const newValue = [setting.value?.[0] || '', e.target.value]
                                setting.onChange(newValue)
                              }}
                              className="text-sm border border-gray-200 rounded-lg px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500"
                            />
                          </div>
                        )}
                      </div>
                    ))}
                  </div>
                </div>
              )}
            </div>
          )}
        </div>
      </div>

      {/* ëª¨ë°”ì¼ */}
      <div className="md:hidden">
        <div className="absolute left-0 top-0 bottom-0 w-6 bg-gradient-to-r from-gray-50 via-gray-50/80 to-transparent pointer-events-none z-10" />
        <div className="absolute right-0 top-0 bottom-0 w-6 bg-gradient-to-l from-white via-white/80 to-transparent pointer-events-none z-10" />
        
        <div className="flex items-center gap-3">
          <div 
            ref={scrollContainerRef}
            className="flex space-x-3 overflow-x-auto scrollbar-hide px-5 py-3 flex-1"
            style={{ scrollbarWidth: 'none', msOverflowStyle: 'none' }}
          >
            {options.map((option) => renderChip(option))}
          </div>
          
          {/* ëª¨ë°”ì¼ ì„¤ì • ë²„íŠ¼ */}
          {settings.length > 0 && (
            <div className="pr-4">
              <button
                onClick={() => setShowSettings(!showSettings)}
                className={`
                  text-gray-600 hover:text-gray-900 hover:bg-gray-50
                  border border-gray-300 hover:border-gray-400
                  rounded-full
                  transition-all duration-300
                  flex items-center justify-center
                  hover:scale-105 active:scale-95
                  focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:ring-offset-2
                  w-11 h-11
                  min-w-[2.75rem]
                  p-0
                  bg-white
                  shadow-sm
                `}
                aria-expanded={showSettings}
                aria-haspopup="true"
                aria-label="í•„í„° ì„¤ì •"
              >
                <AdjustmentsHorizontalIcon className="w-5 h-5" />
              </button>
            </div>
          )}
        </div>
      </div>
      
      {/* ëª¨ë°”ì¼ ë°”í…€ì‹œíŠ¸ ì„¤ì • ëª¨ë‹¬ */}
      {settings.length > 0 && showSettings && (
        <div className="md:hidden fixed inset-0 z-[60] flex items-end">
          <div 
            className="absolute inset-0 bg-black bg-opacity-25" 
            onClick={() => setShowSettings(false)}
          />
          <div className="relative bg-white w-full max-h-[70vh] rounded-t-xl shadow-xl">
            {/* ëª¨ë‹¬ í—¤ë” */}
            <div className="flex items-center justify-between p-4 border-b border-gray-200">
              <h3 className="text-lg font-semibold text-gray-900">{settingsTitle}</h3>
              <button
                onClick={() => setShowSettings(false)}
                className="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100"
              >
                <XMarkIcon className="w-5 h-5 text-gray-400" />
              </button>
            </div>
            
            {/* ëª¨ë‹¬ ì½˜í…ì¸  */}
            <div className="p-4 space-y-4 max-h-[50vh] overflow-y-auto">
              {settings.map((setting) => (
                <div key={setting.key} className="flex items-center justify-between py-2">
                  <label className="text-sm font-medium text-gray-700">{setting.label}</label>
                  {setting.type === 'toggle' && (
                    <button
                      onClick={() => setting.onChange(!setting.value)}
                      className={`
                        w-12 h-7 rounded-full transition-colors relative
                        ${setting.value ? 'bg-blue-600' : 'bg-gray-300'}
                      `}
                    >
                      <div className={`
                        w-5 h-5 bg-white rounded-full absolute top-1 transition-transform
                        ${setting.value ? 'translate-x-6' : 'translate-x-1'}
                      `} />
                    </button>
                  )}
                  {setting.type === 'select' && setting.options && (
                    <select 
                      value={setting.value || ''}
                      onChange={(e) => setting.onChange(e.target.value)}
                      className="text-sm border border-gray-200 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 min-w-[120px]"
                    >
                      {setting.options.map((option) => (
                        <option key={option} value={option}>
                          {getOptionLabel(option)}
                        </option>
                      ))}
                    </select>
                  )}
                  {setting.type === 'multi-select' && setting.options && (
                    <div className="relative">
                      <select 
                        multiple
                        value={setting.value || []}
                        onChange={(e) => {
                          const values = Array.from(e.target.selectedOptions, option => option.value)
                          setting.onChange(values)
                        }}
                        className="text-sm border border-gray-200 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 min-w-[120px] min-h-[100px]"
                      >
                        {setting.options.map((option) => (
                          <option key={option} value={option}>
                            {getOptionLabel(option)}
                          </option>
                        ))}
                      </select>
                    </div>
                  )}
                  {setting.type === 'range' && (
                    <div className="flex items-center gap-2">
                      <input
                        type="number"
                        placeholder="ìµœì†Œ"
                        value={setting.value?.[0] || ''}
                        onChange={(e) => {
                          const newValue = [parseInt(e.target.value) || 0, setting.value?.[1] || 100]
                          setting.onChange(newValue)
                        }}
                        className="text-sm border border-gray-200 rounded-lg px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500 w-16"
                      />
                      <span className="text-gray-400">~</span>
                      <input
                        type="number"
                        placeholder="ìµœëŒ€"
                        value={setting.value?.[1] || ''}
                        onChange={(e) => {
                          const newValue = [setting.value?.[0] || 0, parseInt(e.target.value) || 100]
                          setting.onChange(newValue)
                        }}
                        className="text-sm border border-gray-200 rounded-lg px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500 w-16"
                      />
                    </div>
                  )}
                  {setting.type === 'tag-selector' && setting.options && (
                    <div className="flex flex-wrap gap-1 max-w-[240px]">
                      {setting.options.map((option) => {
                        const isSelected = setting.value?.includes(option)
                        return (
                          <button
                            key={option}
                            onClick={() => {
                              const currentValue = setting.value || []
                              const newValue = isSelected 
                                ? currentValue.filter((v: string) => v !== option)
                                : [...currentValue, option]
                              setting.onChange(newValue)
                            }}
                            className={`
                              px-3 py-1.5 text-xs rounded-full border transition-colors
                              ${isSelected 
                                ? 'bg-blue-100 border-blue-300 text-blue-700' 
                                : 'bg-gray-50 border-gray-200 text-gray-600 hover:bg-gray-100'
                              }
                            `}
                          >
                            {getOptionLabel(option)}
                          </button>
                        )
                      })}
                    </div>
                  )}
                  {setting.type === 'date-range' && (
                    <div className="flex items-center gap-2">
                      <input
                        type="date"
                        value={setting.value?.[0] || ''}
                        onChange={(e) => {
                          const newValue = [e.target.value, setting.value?.[1] || '']
                          setting.onChange(newValue)
                        }}
                        className="text-sm border border-gray-200 rounded-lg px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500"
                      />
                      <span className="text-gray-400">~</span>
                      <input
                        type="date"
                        value={setting.value?.[1] || ''}
                        onChange={(e) => {
                          const newValue = [setting.value?.[0] || '', e.target.value]
                          setting.onChange(newValue)
                        }}
                        className="text-sm border border-gray-200 rounded-lg px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500"
                      />
                    </div>
                  )}
                </div>
              ))}
            </div>
            
            {/* ëª¨ë‹¬ í‘¸í„° */}
            <div className="p-4 border-t border-gray-200">
              <button
                onClick={() => setShowSettings(false)}
                className="w-full py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors"
              >
                ì ìš©
              </button>
            </div>
          </div>
        </div>
      )}
    </div>
  )
}
</file>

<file path="frontend/src/lib/api.ts">
/**
 * API í´ë¼ì´ì–¸íŠ¸ ìœ í‹¸ë¦¬í‹°
 * JWT í† í°ì„ ìë™ìœ¼ë¡œ í¬í•¨í•˜ì—¬ ë°±ì—”ë“œì™€ í†µì‹ 
 */

interface ApiOptions extends Omit<RequestInit, 'priority'> {
  requireAuth?: boolean;
}

interface ApiError extends Error {
  status?: number;
  statusText?: string;
}

class ApiClient {
  private baseUrl: string;

  constructor() {
    this.baseUrl = process.env.NEXT_PUBLIC_BACKEND_URL || 'http://localhost:3001';
  }

  /**
   * API ìš”ì²­ì„ ë³´ë‚´ëŠ” ê¸°ë³¸ ë©”ì„œë“œ
   */
  private async request<T>(
    endpoint: string, 
    options: ApiOptions = {}
  ): Promise<T> {
    const { requireAuth = true, ...requestOptions } = options;
    
    const url = `${this.baseUrl}${endpoint}`;
    
    // ê¸°ë³¸ í—¤ë” ì„¤ì •
    const headers: Record<string, string> = {
      'Content-Type': 'application/json',
    };
    
    // ì¶”ê°€ í—¤ë”ê°€ ìˆëŠ” ê²½ìš° ë³‘í•©
    if (requestOptions.headers) {
      Object.assign(headers, requestOptions.headers);
    }

    // ì¸ì¦ì´ í•„ìš”í•œ ê²½ìš° í† í° ì¶”ê°€
    if (requireAuth) {
      const accessToken = this.getAccessToken();
      if (accessToken) {
        headers['Authorization'] = `Bearer ${accessToken}`;
      }
    }

    try {
      const response = await fetch(url, {
        ...requestOptions,
        headers,
      });

      // 401 ì—ëŸ¬ì¸ ê²½ìš° í† í° ê°±ì‹  ì‹œë„
      if (response.status === 401 && requireAuth) {
        const refreshed = await this.refreshToken();
        if (refreshed) {
          // í† í° ê°±ì‹  ì„±ê³µ ì‹œ ì¬ì‹œë„
          const accessToken = this.getAccessToken();
          if (accessToken) {
            headers['Authorization'] = `Bearer ${accessToken}`;
          }
          
          const retryResponse = await fetch(url, {
            ...requestOptions,
            headers,
          });
          
          return this.handleResponse<T>(retryResponse);
        } else {
          // í† í° ê°±ì‹  ì‹¤íŒ¨ ì‹œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
          this.handleAuthFailure();
          throw new Error('Authentication failed');
        }
      }

      return this.handleResponse<T>(response);
    } catch (error) {
      console.error('API ìš”ì²­ ì˜¤ë¥˜:', error);
      throw error;
    }
  }

  /**
   * ì‘ë‹µ ì²˜ë¦¬
   */
  private async handleResponse<T>(response: Response): Promise<T> {
    if (!response.ok) {
      const error: ApiError = new Error(`HTTP ${response.status}: ${response.statusText}`);
      error.status = response.status;
      error.statusText = response.statusText;
      
      // ì—ëŸ¬ ë©”ì‹œì§€ê°€ ìˆëŠ” ê²½ìš° í¬í•¨
      try {
        const errorData = await response.json();
        if (errorData.message) {
          error.message = errorData.message;
        }
      } catch {
        // JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ ì—ëŸ¬ ë©”ì‹œì§€ ì‚¬ìš©
      }
      
      throw error;
    }

    // ì‘ë‹µì´ ë¹„ì–´ìˆëŠ” ê²½ìš° ì²˜ë¦¬
    const contentType = response.headers.get('content-type');
    if (contentType && contentType.includes('application/json')) {
      return response.json();
    } else {
      return response.text() as unknown as T;
    }
  }

  /**
   * GET ìš”ì²­
   */
  async get<T>(endpoint: string, params?: Record<string, any>, options?: ApiOptions): Promise<T> {
    let url = endpoint;
    
    // ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ê°€ ìˆëŠ” ê²½ìš° URLì— ì¶”ê°€
    if (params && Object.keys(params).length > 0) {
      const searchParams = new URLSearchParams();
      
      Object.entries(params).forEach(([key, value]) => {
        if (value !== undefined && value !== null) {
          searchParams.append(key, String(value));
        }
      });
      
      if (searchParams.toString()) {
        url += `?${searchParams.toString()}`;
      }
    }
    
    return this.request<T>(url, { ...options, method: 'GET' });
  }

  /**
   * POST ìš”ì²­
   */
  async post<T>(endpoint: string, data?: any, options?: ApiOptions): Promise<T> {
    return this.request<T>(endpoint, {
      ...options,
      method: 'POST',
      body: data ? JSON.stringify(data) : undefined,
    });
  }

  /**
   * PUT ìš”ì²­
   */
  async put<T>(endpoint: string, data?: any, options?: ApiOptions): Promise<T> {
    return this.request<T>(endpoint, {
      ...options,
      method: 'PUT',
      body: data ? JSON.stringify(data) : undefined,
    });
  }

  /**
   * DELETE ìš”ì²­
   */
  async delete<T>(endpoint: string, options?: ApiOptions): Promise<T> {
    return this.request<T>(endpoint, { ...options, method: 'DELETE' });
  }

  /**
   * ì•¡ì„¸ìŠ¤ í† í° ê°€ì ¸ì˜¤ê¸°
   */
  private getAccessToken(): string | null {
    if (typeof window !== 'undefined') {
      return localStorage.getItem('accessToken');
    }
    return null;
  }

  /**
   * ë¦¬í”„ë ˆì‹œ í† í° ê°€ì ¸ì˜¤ê¸°
   */
  private getRefreshToken(): string | null {
    if (typeof window !== 'undefined') {
      return localStorage.getItem('refreshToken');
    }
    return null;
  }

  /**
   * í† í° ê°±ì‹ 
   */
  private async refreshToken(): Promise<boolean> {
    try {
      const refreshToken = this.getRefreshToken();
      if (!refreshToken) {
        return false;
      }

      const response = await fetch(`${this.baseUrl}/auth/refresh`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ refreshToken }),
      });

      if (response.ok) {
        const data = await response.json();
        localStorage.setItem('accessToken', data.accessToken);
        return true;
      }

      return false;
    } catch (error) {
      console.error('í† í° ê°±ì‹  ì˜¤ë¥˜:', error);
      return false;
    }
  }

  /**
   * ì¸ì¦ ì‹¤íŒ¨ ì²˜ë¦¬
   */
  private handleAuthFailure(): void {
    // í† í° ì œê±°
    if (typeof window !== 'undefined') {
      localStorage.removeItem('accessToken');
      localStorage.removeItem('refreshToken');
      localStorage.removeItem('user');
      
      // ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
      window.location.href = '/auth/login?error=session_expired';
    }
  }

  /**
   * ìˆ˜ë™ ë¡œê·¸ì•„ì›ƒ
   */
  logout(): void {
    this.handleAuthFailure();
  }
}

// ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
export const apiClient = new ApiClient();

// í¸ì˜ë¥¼ ìœ„í•œ ì§ì ‘ ë‚´ë³´ë‚´ê¸°
export const api = {
  get: <T>(endpoint: string, params?: Record<string, any>, options?: ApiOptions) => apiClient.get<T>(endpoint, params, options),
  post: <T>(endpoint: string, data?: any, options?: ApiOptions) => apiClient.post<T>(endpoint, data, options),
  put: <T>(endpoint: string, data?: any, options?: ApiOptions) => apiClient.put<T>(endpoint, data, options),
  delete: <T>(endpoint: string, options?: ApiOptions) => apiClient.delete<T>(endpoint, options),
  logout: () => apiClient.logout(),
};

export default apiClient;
</file>

<file path="frontend/Dockerfile">
# Frontend Dockerfile
FROM node:20-alpine AS base

# Install dependencies only when needed
FROM base AS deps
RUN apk add --no-cache libc6-compat
WORKDIR /root

# Copy all package files
COPY package*.json ./
COPY shared/package*.json ./shared/
COPY frontend/package*.json ./frontend/

# Install all dependencies
RUN npm ci

# Build shared module first
FROM base AS shared-builder
WORKDIR /root
COPY --from=deps /root/node_modules ./node_modules
COPY shared ./shared
WORKDIR /root/shared
RUN npm run build

# Rebuild the source code only when needed
FROM base AS builder
WORKDIR /root/frontend
COPY --from=deps /root/node_modules ../node_modules
COPY --from=deps /root/package-lock.json ../package-lock.json
COPY --from=shared-builder /root/shared ../shared
COPY frontend ./

# Create public directory if it doesn't exist
RUN mkdir -p public

# Build frontend
RUN npm run build

# Production image, copy all the files and run next
FROM base AS runner
WORKDIR /app

ENV NODE_ENV production

RUN addgroup --system --gid 1001 nodejs
RUN adduser --system --uid 1001 nextjs

COPY --from=builder /root/frontend/public ./public

# Set the correct permission for prerender cache
RUN mkdir .next
RUN chown nextjs:nodejs .next

# Automatically leverage output traces to reduce image size
COPY --from=builder --chown=nextjs:nodejs /root/frontend/.next/standalone ./
COPY --from=builder --chown=nextjs:nodejs /root/frontend/.next/static ./.next/static

USER nextjs

EXPOSE 3000

ENV PORT 3000
ENV HOSTNAME "0.0.0.0"

CMD ["node", "server.js"]
</file>

<file path="frontend/tsconfig.json">
{
  "compilerOptions": {
    "target": "es5",
    "lib": ["dom", "dom.iterable", "es6"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"],
      "@/shared/*": ["../shared/*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules"]
}
</file>

<file path="shared/constants/api-endpoints.ts">
// API ê¸°ë³¸ ì„¤ì •
export const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001'
export const API_VERSION = 'v1'
export const API_PREFIX = `/api/${API_VERSION}`

// ì¸ì¦ ê´€ë ¨ ì—”ë“œí¬ì¸íŠ¸
export const AUTH_ENDPOINTS = {
  LOGIN: `${API_PREFIX}/auth/login`,
  REGISTER: `${API_PREFIX}/auth/register`,
  LOGOUT: `${API_PREFIX}/auth/logout`,
  REFRESH: `${API_PREFIX}/auth/refresh`,
  PROFILE: `${API_PREFIX}/auth/profile`,
  GOOGLE: `${API_PREFIX}/auth/google`,
  GOOGLE_CALLBACK: `${API_PREFIX}/auth/google/callback`,
} as const

// ì‚¬ìš©ì ê´€ë ¨ ì—”ë“œí¬ì¸íŠ¸
export const USER_ENDPOINTS = {
  BASE: `${API_PREFIX}/users`,
  BY_ID: (id: string) => `${API_PREFIX}/users/${id}`,
  UPDATE_PROFILE: (id: string) => `${API_PREFIX}/users/${id}/profile`,
  CHANGE_PASSWORD: (id: string) => `${API_PREFIX}/users/${id}/password`,
  UPLOAD_AVATAR: (id: string) => `${API_PREFIX}/users/${id}/avatar`,
} as const

// í”„ë¡œì íŠ¸ ê´€ë ¨ ì—”ë“œí¬ì¸íŠ¸
export const PROJECT_ENDPOINTS = {
  BASE: `${API_PREFIX}/projects`,
  BY_ID: (id: string) => `${API_PREFIX}/projects/${id}`,
  MEMBERS: (id: string) => `${API_PREFIX}/projects/${id}/members`,
  ADD_MEMBER: (id: string) => `${API_PREFIX}/projects/${id}/members`,
  REMOVE_MEMBER: (projectId: string, userId: string) => 
    `${API_PREFIX}/projects/${projectId}/members/${userId}`,
  TASKS: (id: string) => `${API_PREFIX}/projects/${id}/tasks`,
} as const

// ì—…ë¬´ ê´€ë ¨ ì—”ë“œí¬ì¸íŠ¸
export const TASK_ENDPOINTS = {
  BASE: `${API_PREFIX}/tasks`,
  BY_ID: (id: string) => `${API_PREFIX}/tasks/${id}`,
  BY_PROJECT: (projectId: string) => `${API_PREFIX}/projects/${projectId}/tasks`,
  BY_USER: (userId: string) => `${API_PREFIX}/users/${userId}/tasks`,
  ASSIGN: (id: string) => `${API_PREFIX}/tasks/${id}/assign`,
  STATUS: (id: string) => `${API_PREFIX}/tasks/${id}/status`,
  COMMENTS: (id: string) => `${API_PREFIX}/tasks/${id}/comments`,
} as const

// ê²Œì‹œíŒ ê´€ë ¨ ì—”ë“œí¬ì¸íŠ¸
export const BOARD_ENDPOINTS = {
  POSTS: `${API_PREFIX}/board/posts`,
  POST_BY_ID: (id: string) => `${API_PREFIX}/board/posts/${id}`,
  POST_COMMENTS: (id: string) => `${API_PREFIX}/board/posts/${id}/comments`,
  POST_LIKE: (id: string) => `${API_PREFIX}/board/posts/${id}/like`,
  POST_UNLIKE: (id: string) => `${API_PREFIX}/board/posts/${id}/unlike`,
  COMMENTS: `${API_PREFIX}/board/comments`,
  COMMENT_BY_ID: (id: string) => `${API_PREFIX}/board/comments/${id}`,
} as const

// íŒŒì¼ ê´€ë ¨ ì—”ë“œí¬ì¸íŠ¸
export const FILE_ENDPOINTS = {
  UPLOAD: `${API_PREFIX}/files/upload`,
  UPLOAD_MULTIPLE: `${API_PREFIX}/files/upload/multiple`,
  BY_ID: (id: string) => `${API_PREFIX}/files/${id}`,
  DOWNLOAD: (id: string) => `${API_PREFIX}/files/${id}/download`,
  DELETE: (id: string) => `${API_PREFIX}/files/${id}`,
  BY_USER: (userId: string) => `${API_PREFIX}/users/${userId}/files`,
  BY_PROJECT: (projectId: string) => `${API_PREFIX}/projects/${projectId}/files`,
} as const

// ì•Œë¦¼ ê´€ë ¨ ì—”ë“œí¬ì¸íŠ¸
export const NOTIFICATION_ENDPOINTS = {
  BASE: `${API_PREFIX}/notifications`,
  BY_ID: (id: string) => `${API_PREFIX}/notifications/${id}`,
  MARK_READ: (id: string) => `${API_PREFIX}/notifications/${id}/read`,
  MARK_ALL_READ: `${API_PREFIX}/notifications/read-all`,
  UNREAD_COUNT: `${API_PREFIX}/notifications/unread-count`,
} as const

// ëŒ€ì‹œë³´ë“œ ê´€ë ¨ ì—”ë“œí¬ì¸íŠ¸
export const DASHBOARD_ENDPOINTS = {
  STATS: `${API_PREFIX}/dashboard/stats`,
  RECENT_TASKS: `${API_PREFIX}/dashboard/recent-tasks`,
  RECENT_PROJECTS: `${API_PREFIX}/dashboard/recent-projects`,
  ACTIVITIES: `${API_PREFIX}/dashboard/activities`,
} as const

// ëª©í‘œ ê´€ë ¨ ì—”ë“œí¬ì¸íŠ¸ (ì›Œí´ë¦¬ ë°©ë²•ë¡ )
export const GOAL_ENDPOINTS = {
  BASE: `${API_PREFIX}/goals`,
  BY_ID: (id: string) => `${API_PREFIX}/goals/${id}`,
  PROJECTS: (id: string) => `${API_PREFIX}/goals/${id}/projects`,
  METRICS: (id: string) => `${API_PREFIX}/goals/${id}/metrics`,
  UPDATE_PROGRESS: (id: string) => `${API_PREFIX}/goals/${id}/progress`,
  ACTIVITIES: (id: string) => `${API_PREFIX}/goals/${id}/activities`,
  DASHBOARD: (id: string) => `${API_PREFIX}/goals/${id}/dashboard`,
} as const

// ìˆ˜ì§‘í•¨ ê´€ë ¨ ì—”ë“œí¬ì¸íŠ¸ (ì›Œí´ë¦¬ ë°©ë²•ë¡ )
export const INBOX_ENDPOINTS = {
  BASE: `${API_PREFIX}/inbox`,
  BY_ID: (id: string) => `${API_PREFIX}/inbox/${id}`,
  QUICK_CAPTURE: `${API_PREFIX}/inbox/quick-capture`,
  BATCH_PROCESS: `${API_PREFIX}/inbox/batch-process`,
  STATS: `${API_PREFIX}/inbox/stats`,
  DASHBOARD: `${API_PREFIX}/inbox/dashboard`,
  ACTIVITIES: `${API_PREFIX}/inbox/activities`,
  ORGANIZE: (id: string) => `${API_PREFIX}/inbox/${id}/organize`,
  CLARIFY: (id: string) => `${API_PREFIX}/inbox/${id}/clarify`,
} as const

// CPER ì›Œí¬í”Œë¡œìš° ê´€ë ¨ ì—”ë“œí¬ì¸íŠ¸
export const WORKFLOW_ENDPOINTS = {
  CAPTURE: `${API_PREFIX}/workflow/capture`,
  PLAN: `${API_PREFIX}/workflow/plan`,
  EXECUTE: `${API_PREFIX}/workflow/execute`,
  REVIEW: `${API_PREFIX}/workflow/review`,
  STATUS: `${API_PREFIX}/workflow/status`,
  INSIGHTS: `${API_PREFIX}/workflow/insights`,
} as const

// ë„¤ë¹„ê²Œì´ì…˜ ê´€ë ¨ ì—”ë“œí¬ì¸íŠ¸
export const NAVIGATION_ENDPOINTS = {
  STATS: `${API_PREFIX}/navigation/stats`,
  QUICK_STATS: `${API_PREFIX}/navigation/quick-stats`,
  PREFERENCES: `${API_PREFIX}/navigation/preferences`,
} as const

// ê²€ìƒ‰ ê´€ë ¨ ì—”ë“œí¬ì¸íŠ¸
export const SEARCH_ENDPOINTS = {
  GLOBAL: `${API_PREFIX}/search`,
  USERS: `${API_PREFIX}/search/users`,
  PROJECTS: `${API_PREFIX}/search/projects`,
  TASKS: `${API_PREFIX}/search/tasks`,
  GOALS: `${API_PREFIX}/search/goals`,
  INBOX: `${API_PREFIX}/search/inbox`,
  POSTS: `${API_PREFIX}/search/posts`,
} as const
</file>

<file path="shared/src/index.ts">
// Types
export * from '../types/api.types';
export * from '../types/socket.types';
export * from '../types/admin.types';
export * from '../types/goal.types';
export * from '../types/inbox.types';
export * from '../types/navigation.types';
export * from '../types/workly-core.types';

// Constants
export * from '../constants/api-endpoints';
export * from '../constants/socket-events';

// Utils
export * from '../utils/hierarchy.utils';

// Index export from types/index.ts for completeness
export * from '../types/index';
</file>

<file path="shared/types/admin.types.ts">
/**
 * ì›Œí´ë¦¬ ì–´ë“œë¯¼ íŒ¨ë„ íƒ€ì… ì •ì˜
 * ê´€ë¦¬ì ì „ìš© ì¸í„°í˜ì´ìŠ¤ ë° ë°ì´í„° êµ¬ì¡°
 */

// ==================== ê¶Œí•œ ë° ì—­í•  ====================

export enum AdminRole {
  SUPER_ADMIN = 'super_admin',    // ëª¨ë“  ê¶Œí•œ
  ADMIN = 'admin',                // ì‚¬ìš©ì/ì½˜í…ì¸  ê´€ë¦¬
  MODERATOR = 'moderator',        // ì½˜í…ì¸  ëª¨ë”ë ˆì´ì…˜ë§Œ
  SUPPORT = 'support',            // ì‚¬ìš©ì ì§€ì› (ì½ê¸° ì „ìš© + ê¸°ë³¸ ì‚¬ìš©ì ê´€ë¦¬)
}

export interface AdminPermissions {
  users: {
    read: boolean;
    create: boolean;
    update: boolean;
    delete: boolean;
    changeRole: boolean;
  };
  content: {
    read: boolean;
    moderate: boolean;
    delete: boolean;
  };
  projects: {
    read: boolean;
    moderate: boolean;
    close: boolean;
    featured: boolean;
  };
  system: {
    read: boolean;
    configure: boolean;
    maintenance: boolean;
    monitoring: boolean;
  };
}

// ==================== ëŒ€ì‹œë³´ë“œ ====================

export interface DashboardKPIs {
  totalUsers: number;
  activeUsers: number;
  newUsersThisWeek: number;
  totalProjects: number;
  activeProjects: number;
  completedProjects: number;
  totalTasks: number;
  completedTasks: number;
  systemHealth: 'healthy' | 'warning' | 'critical';
  lastUpdated: string;
}

export interface TimeSeriesData {
  date: string;
  value: number;
  label?: string;
}

export interface PieChartData {
  name: string;
  value: number;
  color: string;
}

export interface MetricsData {
  cpu: number;
  memory: number;
  disk: number;
  network: {
    incoming: number;
    outgoing: number;
  };
  database: {
    connections: number;
    queryTime: number;
  };
}

export interface ActivityLog {
  id: string;
  type: 'user_registered' | 'project_created' | 'task_completed' | 'error_occurred';
  title: string;
  description: string;
  userId?: string;
  userEmail?: string;
  metadata?: Record<string, any>;
  timestamp: string;
  severity: 'info' | 'warning' | 'error';
}

export interface DashboardData {
  kpis: DashboardKPIs;
  charts: {
    userGrowth: TimeSeriesData[];
    taskCompletion: TimeSeriesData[];
    projectStatus: PieChartData[];
    serverMetrics: MetricsData;
  };
  recentActivity: ActivityLog[];
}

// ==================== ì‚¬ìš©ì ê´€ë¦¬ ====================

export interface UserWithStats {
  id: string;
  email: string;
  name: string;
  role: string;
  status: string;
  avatar?: string;
  createdAt: string;
  lastLoginAt?: string;
  emailVerifiedAt?: string;
  
  // í†µê³„ ì •ë³´
  stats: {
    totalProjects: number;
    completedTasks: number;
    activeProjects: number;
    collaborations: number;
  };
}

export interface UserManagementFilters {
  role?: string[];
  status?: string[];
  registrationDate?: {
    start: string;
    end: string;
  };
  lastActivity?: {
    start: string;
    end: string;
  };
  search?: string;
}

export interface BulkUserAction {
  userIds: string[];
  action: 'activate' | 'deactivate' | 'suspend' | 'delete' | 'send_email';
  params?: Record<string, any>;
}

// ==================== í”„ë¡œì íŠ¸ ê´€ë¦¬ ====================

export interface ProjectWithMetrics {
  id: string;
  name: string;
  description?: string;
  status: string;
  progress: number;
  memberCount: number;
  taskCount: number;
  completedTaskCount: number;
  createdAt: string;
  updatedAt: string;
  ownerId: string;
  ownerName: string;
  
  // ë©”íŠ¸ë¦­ìŠ¤
  metrics: {
    averageTaskCompletionTime: number;
    memberEngagement: number;
    messagesCount: number;
    filesCount: number;
    lastActivity: string;
  };
  
  // ìœ„í—˜ ì§€í‘œ
  riskFlags: {
    inactive: boolean;
    overdue: boolean;
    lowEngagement: boolean;
    reported: boolean;
  };
}

export interface ProjectAnalytics {
  successRate: number;
  averageCompletionTime: number;
  popularSkills: Array<{
    skill: string;
    count: number;
    successRate: number;
  }>;
  teamSizeDistribution: Array<{
    size: string;
    count: number;
    successRate: number;
  }>;
  monthlyTrends: {
    created: TimeSeriesData[];
    completed: TimeSeriesData[];
    cancelled: TimeSeriesData[];
  };
}

// ==================== ì—…ë¬´ ê´€ë¦¬ ====================

export interface TaskWithContext {
  id: string;
  title: string;
  description?: string;
  status: string;
  priority: string;
  dueDate?: string;
  createdAt: string;
  assigneeId?: string;
  assigneeName?: string;
  projectId?: string;
  projectName?: string;
  
  // ì»¨í…ìŠ¤íŠ¸ ì •ë³´
  labels: string[];
  commentsCount: number;
  attachmentsCount: number;
  dependenciesCount: number;
  
  // í’ˆì§ˆ ì§€í‘œ
  qualityFlags: {
    hasDescription: boolean;
    hasLabels: boolean;
    hasAssignee: boolean;
    hasDueDate: boolean;
    isOverdue: boolean;
  };
}

export interface TaskCategories {
  uncategorized: number;
  blocked: number;
  overdue: number;
  highPriority: number;
  noDueDate: number;
  noAssignee: number;
}

export interface TaskAutomationSettings {
  autoLabeling: boolean;
  duplicateDetection: boolean;
  spamFilter: boolean;
  overduNotifications: boolean;
  priorityAutoEscalation: boolean;
}

// ==================== ì½˜í…ì¸  ê´€ë¦¬ ====================

export interface ContentReport {
  id: string;
  reporterId: string;
  reporterName: string;
  contentType: 'project' | 'task' | 'comment' | 'message';
  contentId: string;
  contentTitle?: string;
  reason: ReportReason;
  description: string;
  status: 'pending' | 'reviewed' | 'resolved' | 'dismissed';
  reviewedBy?: string;
  reviewedByName?: string;
  reviewedAt?: string;
  action?: 'no_action' | 'warning' | 'content_removed' | 'user_suspended';
  createdAt: string;
  
  // ì½˜í…ì¸  ìŠ¤ë‹ˆí«
  contentPreview: string;
  contentAuthorId: string;
  contentAuthorName: string;
}

export enum ReportReason {
  SPAM = 'spam',
  HARASSMENT = 'harassment',
  INAPPROPRIATE_CONTENT = 'inappropriate_content',
  COPYRIGHT_VIOLATION = 'copyright_violation',
  FAKE_INFORMATION = 'fake_information',
  VIOLENCE = 'violence',
  HATE_SPEECH = 'hate_speech',
  OTHER = 'other'
}

export interface ContentModerationAction {
  reportId: string;
  action: 'dismiss' | 'warn_user' | 'remove_content' | 'suspend_user';
  reason: string;
  duration?: number; // ì •ì§€ ê¸°ê°„ (ì¼)
  notifyUser: boolean;
}

// ==================== ì‹œìŠ¤í…œ ì„¤ì • ====================

export interface SystemSettings {
  app: {
    maintenanceMode: boolean;
    newUserRegistration: boolean;
    projectCreation: boolean;
    fileUpload: boolean;
    maxFileSize: number; // MB
    maxProjectMembers: number;
    taskDeadlineWarningDays: number;
  };
  notifications: {
    emailEnabled: boolean;
    pushEnabled: boolean;
    dailyDigestEnabled: boolean;
    weeklyReportEnabled: boolean;
  };
  security: {
    passwordMinLength: number;
    passwordRequireSpecialChar: boolean;
    sessionTimeoutMinutes: number;
    maxLoginAttempts: number;
    twoFactorRequired: boolean;
  };
  features: {
    realTimeChat: boolean;
    fileSharing: boolean;
    integrations: boolean;
    analytics: boolean;
    apiAccess: boolean;
  };
}

export interface EmailTemplate {
  id: string;
  name: string;
  subject: string;
  content: string;
  type: 'welcome' | 'password_reset' | 'project_invitation' | 'task_reminder' | 'weekly_digest';
  variables: string[]; // ì‚¬ìš© ê°€ëŠ¥í•œ ë³€ìˆ˜ë“¤
  isActive: boolean;
  createdAt: string;
  updatedAt: string;
}

// ==================== ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§ ====================

export interface ServerMetrics {
  cpu: {
    usage: number;
    cores: number;
    loadAverage: number[];
  };
  memory: {
    total: number;
    used: number;
    free: number;
    usage: number;
  };
  disk: {
    total: number;
    used: number;
    free: number;
    usage: number;
  };
  network: {
    bytesIn: number;
    bytesOut: number;
    packetsIn: number;
    packetsOut: number;
  };
}

export interface DatabaseMetrics {
  connections: {
    active: number;
    idle: number;
    total: number;
    max: number;
  };
  queries: {
    total: number;
    slow: number;
    failed: number;
    averageTime: number;
  };
  size: {
    total: number;
    tables: Array<{
      name: string;
      size: number;
      rows: number;
    }>;
  };
}

export interface APIMetrics {
  requests: {
    total: number;
    successful: number;
    failed: number;
    averageResponseTime: number;
  };
  endpoints: Array<{
    path: string;
    method: string;
    calls: number;
    averageTime: number;
    errorRate: number;
  }>;
  statusCodes: Record<string, number>;
}

export interface ErrorLog {
  id: string;
  level: 'error' | 'warning' | 'info';
  message: string;
  stack?: string;
  context: Record<string, any>;
  userId?: string;
  endpoint?: string;
  timestamp: string;
  resolved: boolean;
}

export interface Alert {
  id: string;
  type: 'cpu_high' | 'memory_high' | 'disk_full' | 'api_slow' | 'error_rate_high';
  severity: 'low' | 'medium' | 'high' | 'critical';
  message: string;
  value: number;
  threshold: number;
  timestamp: string;
  acknowledged: boolean;
  acknowledgedBy?: string;
  resolvedAt?: string;
}

// ==================== ê°ì‚¬ ë¡œê·¸ ====================

export interface AuditLog {
  id: string;
  adminId: string;
  adminName: string;
  action: string;
  targetType: 'user' | 'project' | 'task' | 'system' | 'settings';
  targetId?: string;
  targetName?: string;
  changes: {
    before?: Record<string, any>;
    after?: Record<string, any>;
  };
  ipAddress: string;
  userAgent: string;
  timestamp: string;
  success: boolean;
  errorMessage?: string;
}

// ==================== ì–´ë“œë¯¼ ì „ìš© API ì‘ë‹µ íƒ€ì… ====================

export interface AdminPaginatedResponse<T> {
  data: T[];
  pagination: {
    page: number;
    limit: number;
    total: number;
    totalPages: number;
    hasNext: boolean;
    hasPrev: boolean;
  };
}

export interface AdminApiResponse<T = any> {
  success: boolean;
  data?: T;
  message?: string;
  errors?: Array<{
    field?: string;
    message: string;
  }>;
}

// ==================== í†µê³„ ë° ë¶„ì„ ====================

export interface UserGrowthStats {
  period: 'daily' | 'weekly' | 'monthly';
  data: Array<{
    date: string;
    newUsers: number;
    activeUsers: number;
    retentionRate: number;
  }>;
}

export interface ProjectSuccessStats {
  totalProjects: number;
  completedProjects: number;
  cancelledProjects: number;
  successRate: number;
  averageCompletionDays: number;
  topReasons: Array<{
    reason: string;
    count: number;
  }>;
}

export interface PlatformHealthScore {
  overall: number; // 0-100
  components: {
    userEngagement: number;
    systemPerformance: number;
    contentQuality: number;
    errorRate: number;
  };
  trends: {
    lastWeek: number;
    lastMonth: number;
  };
}
</file>

<file path="shared/types/index.ts">
/**
 * ì›Œí´ë¦¬ ê³ ìœ  ë°©ë²•ë¡  - í†µí•© íƒ€ì… ìµìŠ¤í¬íŠ¸
 * ëª¨ë“  í•µì‹¬ íƒ€ì…ì„ ì¤‘ì•™ì—ì„œ ê´€ë¦¬
 */

// ê¸°ì¡´ íƒ€ì…ë“¤
export * from './api.types';
export * from './socket.types';

// ì›Œí´ë¦¬ ë°©ë²•ë¡  ìƒˆë¡œìš´ íƒ€ì…ë“¤
export * from './goal.types';
export * from './inbox.types';
export * from './navigation.types';

// ì–´ë“œë¯¼ íŒ¨ë„ íƒ€ì…ë“¤
export * from './admin.types';

// ì›Œí´ë¦¬ ë°©ë²•ë¡  í•µì‹¬ ìƒìˆ˜
export const WORKLY_METHODOLOGY = {
  name: 'Workly Unique Methodology',
  version: '1.0.0',
  hierarchy: ['Goal', 'Project', 'Task'] as const,
  workflow: ['Capture', 'Plan', 'Execute', 'Review'] as const,
  navigation: ['Tasks', 'Projects', 'Inbox', 'Goals', 'Profile'] as const,
} as const;

// CPER ì›Œí¬í”Œë¡œìš° ë‹¨ê³„ë³„ ìƒ‰ìƒ í…Œë§ˆ
export const CPER_THEME = {
  capture: {
    primary: '#3B82F6',   // Blue
    secondary: '#DBEAFE',
    accent: '#1D4ED8',
  },
  plan: {
    primary: '#10B981',   // Green
    secondary: '#D1FAE5',
    accent: '#059669',
  },
  execute: {
    primary: '#F59E0B',   // Amber
    secondary: '#FEF3C7',
    accent: '#D97706',
  },
  review: {
    primary: '#8B5CF6',   // Purple
    secondary: '#EDE9FE',
    accent: '#7C3AED',
  },
} as const;

// ë„¤ë¹„ê²Œì´ì…˜ í•­ëª©ë³„ ìƒ‰ìƒ ë° ì•„ì´ì½˜
export const NAVIGATION_CONFIG = {
  tasks: {
    icon: 'CheckSquare',
    color: '#3B82F6',
    label: 'ì—…ë¬´',
  },
  projects: {
    icon: 'Folder',
    color: '#10B981',
    label: 'í”„ë¡œì íŠ¸',
  },
  inbox: {
    icon: 'Inbox',
    color: '#F59E0B',
    label: 'ìˆ˜ì§‘í•¨',
    isCenter: true,
    isEmphasized: true,
  },
  goals: {
    icon: 'Target',
    color: '#8B5CF6',
    label: 'ëª©í‘œ',
  },
  profile: {
    icon: 'User',
    color: '#6B7280',
    label: 'í”„ë¡œí•„',
  },
} as const;
</file>

<file path="shared/types/workly-core.types.ts">
/**
 * ì›Œí´ë¦¬ ê³ ìœ  ë°©ë²•ë¡  - í•µì‹¬ ê³„ì¸µêµ¬ì¡° ë° ë…ë¦½ì„± ë¡œì§
 * ì—…ë¬´ ì¤‘ì‹¬ì˜ ìœ ì—°í•œ ê³„ì¸µêµ¬ì¡° êµ¬í˜„
 */

// ê³„ì¸µêµ¬ì¡° íƒ€ì…
export enum HierarchyType {
  INDEPENDENT = 'independent',    // ë…ë¦½ì  ì—…ë¬´
  PROJECT_ONLY = 'project_only',  // í”„ë¡œì íŠ¸ì—ë§Œ ì†í•¨ (ëª©í‘œ ì—†ìŒ)
  GOAL_DIRECT = 'goal_direct',    // ëª©í‘œì— ì§ì ‘ ì†í•¨ (í”„ë¡œì íŠ¸ ì—†ìŒ)
  FULL_HIERARCHY = 'full_hierarchy' // ì™„ì „í•œ ê³„ì¸µ (ì—…ë¬´ -> í”„ë¡œì íŠ¸ -> ëª©í‘œ)
}

// ê³„ì¸µêµ¬ì¡° ì„ íƒ ì˜µì…˜
export interface HierarchyChoice {
  type: HierarchyType
  projectId?: string    // ê¸°ì¡´ í”„ë¡œì íŠ¸ ì„ íƒ
  goalId?: string      // ê¸°ì¡´ ëª©í‘œ ì„ íƒ
  createProject?: {    // ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±
    title: string
    description?: string
    goalId?: string    // ìƒìœ„ ëª©í‘œ ì—°ê²°
  }
  createGoal?: {       // ìƒˆ ëª©í‘œ ìƒì„±
    title: string
    description?: string
  }
}

// CPER ë‹¨ê³„ë³„ ìƒíƒœ
export enum CPERStage {
  CAPTURED = 'captured',     // ìˆ˜ì§‘ë¨
  PLANNED = 'planned',       // ê³„íšë¨
  EXECUTING = 'executing',   // ì‹¤í–‰ ì¤‘
  COMPLETED = 'completed',   // ì™„ë£Œë¨
  REVIEWED = 'reviewed'      // ê²€í† ë¨
}

// CPER ì›Œí¬í”Œë¡œìš° ë°ì´í„°
export interface CPERWorkflowData {
  stage: CPERStage
  capturedAt: string
  plannedAt?: string
  executionStartedAt?: string
  completedAt?: string
  reviewedAt?: string
  
  // ê³„íš ë‹¨ê³„ ë°ì´í„°
  planningData?: {
    isActionable: boolean
    canComplete2Minutes: boolean
    timeEstimate: number        // ë¶„ ë‹¨ìœ„
    priorityReasoning: string
    hierarchyChoice: HierarchyChoice
    nextAction?: string
  }
  
  // ì‹¤í–‰ ë‹¨ê³„ ë°ì´í„°
  executionData?: {
    isToday: boolean
    isFocused: boolean
    startedAt?: string
    pausedAt?: string
    actualTimeSpent: number     // ë¶„ ë‹¨ìœ„
    progressNotes: string[]
  }
  
  // ê²€í†  ë‹¨ê³„ ë°ì´í„°
  reviewData?: {
    lessonsLearned: string[]
    improvements: string[]
    goalContribution: number    // 0-100 (ëª©í‘œ ê¸°ì—¬ë„)
    projectContribution: number // 0-100 (í”„ë¡œì íŠ¸ ê¸°ì—¬ë„)
    satisfaction: number        // 1-5 (ë§Œì¡±ë„)
    wouldDoAgain: boolean
  }
}

// í™•ì¥ëœ ì—…ë¬´ ì¸í„°í˜ì´ìŠ¤ (ê¸°ì¡´ Task í™•ì¥)
export interface WorklyTask {
  // ê¸°ë³¸ ì •ë³´ (ê¸°ì¡´ Task ì¸í„°í˜ì´ìŠ¤ì™€ í˜¸í™˜)
  id: string
  title: string
  description?: string
  status: TaskStatus
  priority: TaskPriority
  type: TaskType
  
  // ë‚ ì§œ ê´€ë ¨
  dueDate?: string
  startDate?: string
  completedAt?: string
  
  // ê³„ì¸µêµ¬ì¡° (í•µì‹¬!)
  hierarchyType: HierarchyType
  projectId?: string      // í”„ë¡œì íŠ¸ ì—°ê²° (ì„ íƒì )
  goalId?: string         // ëª©í‘œ ì—°ê²° (ì„ íƒì , ì§ì ‘ ì—°ê²° ë˜ëŠ” í”„ë¡œì íŠ¸ í†µí•´ ê°„ì ‘ ì—°ê²°)
  
  // CPER ì›Œí¬í”Œë¡œìš°
  cperWorkflow: CPERWorkflowData
  
  // ì‹¤í–‰ ê´€ë ¨
  isToday: boolean
  isFocused: boolean
  nextAction?: string
  estimatedMinutes: number
  actualMinutes: number
  
  // ê´€ê³„ ë° ì†Œìœ ì
  assigneeId: string
  assignee: {
    id: string
    name: string
    email: string
  }
  
  // íƒœê·¸ ë° ë¶„ë¥˜
  tags: string[]
  
  // ë©”íƒ€ë°ì´í„°
  createdAt: string
  updatedAt: string
  
  // ê³„ì‚°ëœ ì†ì„±
  isOverdue?: boolean
  isDueSoon?: boolean
  hierarchyPath?: string  // "ëª©í‘œëª… > í”„ë¡œì íŠ¸ëª…" ë˜ëŠ” "ë…ë¦½ì  ì—…ë¬´"
}

// ê³„ì¸µêµ¬ì¡° ê´€ê³„ ì¸í„°í˜ì´ìŠ¤
export interface HierarchyRelation {
  taskId: string
  projectId?: string
  goalId?: string
  relationshipType: HierarchyType
  establishedAt: string
  establishedBy: string
}

// ê³„ì¸µêµ¬ì¡° ë³€ê²½ ìš”ì²­
export interface HierarchyChangeRequest {
  taskId: string
  fromHierarchy: {
    type: HierarchyType
    projectId?: string
    goalId?: string
  }
  toHierarchy: HierarchyChoice
  reason?: string
}

// ê³„ì¸µêµ¬ì¡° ê²€ì¦ ê·œì¹™
export interface HierarchyValidation {
  isValid: boolean
  errors: string[]
  warnings: string[]
  suggestions: string[]
}

// ê³„ì¸µêµ¬ì¡° ë¶„ì„ ë°ì´í„°
export interface HierarchyAnalytics {
  taskId: string
  hierarchyType: HierarchyType
  
  // ì—°ê²° ê´€ê³„ ë¶„ì„
  connections: {
    projectConnection?: {
      projectId: string
      projectTitle: string
      projectProgress: number
      contributionPercentage: number
    }
    goalConnection?: {
      goalId: string
      goalTitle: string
      goalProgress: number
      contributionPercentage: number
      isDirectConnection: boolean  // ì§ì ‘ ì—°ê²° vs í”„ë¡œì íŠ¸ í†µí•œ ê°„ì ‘ ì—°ê²°
    }
  }
  
  // ì˜í–¥ë„ ë¶„ì„
  impact: {
    onProject?: number      // 0-100 (í”„ë¡œì íŠ¸ì— ë¯¸ì¹˜ëŠ” ì˜í–¥)
    onGoal?: number        // 0-100 (ëª©í‘œì— ë¯¸ì¹˜ëŠ” ì˜í–¥)
    independence: number    // 0-100 (ë…ë¦½ì„± ì ìˆ˜)
  }
  
  // ì¶”ì²œì‚¬í•­
  recommendations: {
    shouldMoveToProject?: string
    shouldConnectToGoal?: string
    shouldBecomeIndependent?: string
  }
}

// ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤ì„ ìœ„í•œ ì¸í„°í˜ì´ìŠ¤
export interface HierarchyUtils {
  // ê³„ì¸µêµ¬ì¡° ê²½ë¡œ ìƒì„±
  getHierarchyPath(task: WorklyTask, project?: Project, goal?: Goal): string
  
  // ê³„ì¸µêµ¬ì¡° ë³€ê²½ ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸
  canChangeHierarchy(task: WorklyTask, newHierarchy: HierarchyChoice): HierarchyValidation
  
  // ê³„ì¸µêµ¬ì¡° ë¶„ì„
  analyzeHierarchy(task: WorklyTask): HierarchyAnalytics
  
  // ë…ë¦½ì  ì—…ë¬´ ì—¬ë¶€ í™•ì¸
  isIndependentTask(task: WorklyTask): boolean
  
  // í”„ë¡œì íŠ¸ë¥¼ í†µí•œ ëª©í‘œ ì—°ê²° í™•ì¸
  isGoalConnectedThroughProject(task: WorklyTask): boolean
  
  // ì§ì ‘ ëª©í‘œ ì—°ê²° í™•ì¸
  isDirectlyConnectedToGoal(task: WorklyTask): boolean
}

// í™ˆí™”ë©´ "ì˜¤ëŠ˜ í•  ì¼" ìµœì í™”ë¥¼ ìœ„í•œ ì¸í„°í˜ì´ìŠ¤
export interface TodayTasksOptimized {
  // ì§‘ì¤‘ ì—…ë¬´ (ìµœìš°ì„ )
  focusedTasks: WorklyTask[]
  
  // ê¸´ê¸‰ ì—…ë¬´
  urgentTasks: WorklyTask[]
  
  // ì¼ë°˜ ì˜¤ëŠ˜ ì—…ë¬´
  todayTasks: WorklyTask[]
  
  // ë‹¤ìŒ ì•¡ì…˜ì´ ëª…í™•í•œ ì—…ë¬´
  readyToStartTasks: WorklyTask[]
  
  // ê³„ì¸µêµ¬ì¡°ë³„ ê·¸ë£¹í™”
  groupedByHierarchy: {
    independent: WorklyTask[]
    byProject: {
      projectId: string
      projectTitle: string
      tasks: WorklyTask[]
    }[]
    byGoal: {
      goalId: string
      goalTitle: string
      directTasks: WorklyTask[]  // ëª©í‘œì— ì§ì ‘ ì—°ê²°ëœ ì—…ë¬´
      projectTasks: {
        projectId: string
        projectTitle: string
        tasks: WorklyTask[]
      }[]
    }[]
  }
  
  // ì‹œê°„ ê´€ë¦¬ ì •ë³´
  timeAnalysis: {
    totalEstimatedMinutes: number
    focusedTasksMinutes: number
    averageTaskMinutes: number
    recommendedDailyLimit: number
  }
}

// CPER ë‹¨ê³„ë³„ ì•¡ì…˜ ì •ì˜
export interface CPERActions {
  // Capture ë‹¨ê³„
  capture: {
    quickCapture(content: string): Promise<string> // InboxItem ID ë°˜í™˜
    structuredCapture(data: CreateInboxItemDto): Promise<string>
  }
  
  // Plan ë‹¨ê³„
  plan: {
    clarifyItem(inboxItemId: string, clarification: CPERWorkflowData['planningData']): Promise<void>
    convertToTask(inboxItemId: string, hierarchyChoice: HierarchyChoice): Promise<string> // Task ID ë°˜í™˜
  }
  
  // Execute ë‹¨ê³„
  execute: {
    setTodayTasks(taskIds: string[]): Promise<void>
    setFocusedTask(taskId: string): Promise<void>
    startExecution(taskId: string): Promise<void>
    updateProgress(taskId: string, progressNote: string): Promise<void>
    completeTask(taskId: string): Promise<void>
  }
  
  // Review ë‹¨ê³„
  review: {
    addReview(taskId: string, reviewData: CPERWorkflowData['reviewData']): Promise<void>
    getInsights(taskId: string): Promise<HierarchyAnalytics>
  }
}

// íƒ€ì… ê°€ë“œ í•¨ìˆ˜ë“¤
export const TypeGuards = {
  isWorklyTask: (obj: any): obj is WorklyTask => {
    return obj && typeof obj.hierarchyType === 'string' && obj.cperWorkflow
  },
  
  isIndependentTask: (task: WorklyTask): boolean => {
    return task.hierarchyType === HierarchyType.INDEPENDENT
  },
  
  hasProjectConnection: (task: WorklyTask): boolean => {
    return task.hierarchyType === HierarchyType.PROJECT_ONLY || 
           task.hierarchyType === HierarchyType.FULL_HIERARCHY
  },
  
  hasGoalConnection: (task: WorklyTask): boolean => {
    return task.hierarchyType === HierarchyType.GOAL_DIRECT || 
           task.hierarchyType === HierarchyType.FULL_HIERARCHY
  }
}

// ê¸°ì¡´ íƒ€ì…ë“¤ import (ìˆœí™˜ ì°¸ì¡° ë°©ì§€)
import { TaskStatus, Priority as TaskPriority, TaskType, Project } from './api.types'
import { Goal } from './goal.types'
import { CreateInboxItemDto } from './inbox.types'
</file>

<file path="shared/utils/hierarchy.utils.ts">
/**
 * ì›Œí´ë¦¬ ê³„ì¸µêµ¬ì¡° ê´€ë¦¬ ìœ í‹¸ë¦¬í‹°
 * ì—…ë¬´-í”„ë¡œì íŠ¸-ëª©í‘œ ê°„ì˜ ê´€ê³„ë¥¼ ê´€ë¦¬í•˜ê³  ë…ë¦½ì„±ì„ ì§€ì›
 */

import { 
  WorklyTask, 
  HierarchyType, 
  HierarchyChoice, 
  HierarchyValidation, 
  HierarchyAnalytics,
  TodayTasksOptimized,
  CPERStage
} from '../types/workly-core.types'
import { Goal } from '../types/goal.types'
import { Project } from '../types/api.types'

export class HierarchyManager {
  
  /**
   * ê³„ì¸µêµ¬ì¡° ê²½ë¡œ ìƒì„±
   * ì˜ˆ: "ì›Œí´ë¦¬ í”Œë«í¼ ì™„ì„± > MVP ê°œë°œ" ë˜ëŠ” "ë…ë¦½ì  ì—…ë¬´"
   */
  static getHierarchyPath(
    task: WorklyTask, 
    project?: Project, 
    goal?: Goal
  ): string {
    switch (task.hierarchyType) {
      case HierarchyType.INDEPENDENT:
        return 'ë…ë¦½ì  ì—…ë¬´'
        
      case HierarchyType.PROJECT_ONLY:
        return project ? project.title : 'í”„ë¡œì íŠ¸ ë¯¸í™•ì¸'
        
      case HierarchyType.GOAL_DIRECT:
        return goal ? goal.title : 'ëª©í‘œ ë¯¸í™•ì¸'
        
      case HierarchyType.FULL_HIERARCHY:
        const goalTitle = goal?.title || 'ëª©í‘œ ë¯¸í™•ì¸'
        const projectTitle = project?.title || 'í”„ë¡œì íŠ¸ ë¯¸í™•ì¸'
        return `${goalTitle} > ${projectTitle}`
        
      default:
        return 'ì•Œ ìˆ˜ ì—†ìŒ'
    }
  }

  /**
   * ê³„ì¸µêµ¬ì¡° ë³€ê²½ ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸
   */
  static canChangeHierarchy(
    task: WorklyTask, 
    newHierarchy: HierarchyChoice
  ): HierarchyValidation {
    const errors: string[] = []
    const warnings: string[] = []
    const suggestions: string[] = []

    // ê¸°ë³¸ ê²€ì¦
    if (task.cperWorkflow.stage === CPERStage.EXECUTING) {
      warnings.push('ì‹¤í–‰ ì¤‘ì¸ ì—…ë¬´ì˜ ê³„ì¸µêµ¬ì¡° ë³€ê²½ì€ ì‹ ì¤‘í•˜ê²Œ ê³ ë ¤í•˜ì„¸ìš”.')
    }

    if (task.cperWorkflow.stage === CPERStage.COMPLETED) {
      errors.push('ì™„ë£Œëœ ì—…ë¬´ì˜ ê³„ì¸µêµ¬ì¡°ëŠ” ë³€ê²½í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')
    }

    // ìˆœí™˜ ì°¸ì¡° ê²€ì¦ (í”„ë¡œì íŠ¸ -> ëª©í‘œ)
    if (newHierarchy.type === HierarchyType.FULL_HIERARCHY) {
      if (newHierarchy.projectId && newHierarchy.goalId) {
        // TODO: ì‹¤ì œë¡œëŠ” í”„ë¡œì íŠ¸ê°€ í•´ë‹¹ ëª©í‘œì— ì†í•˜ëŠ”ì§€ í™•ì¸ í•„ìš”
        // if (!this.isProjectBelongsToGoal(newHierarchy.projectId, newHierarchy.goalId)) {
        //   errors.push('ì„ íƒí•œ í”„ë¡œì íŠ¸ê°€ í•´ë‹¹ ëª©í‘œì— ì†í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.')
        // }
      }
    }

    // ë…ë¦½ì„± ê²€ì¦
    if (newHierarchy.type === HierarchyType.INDEPENDENT) {
      if (task.cperWorkflow.executionData?.isFocused) {
        warnings.push('ì§‘ì¤‘ ì—…ë¬´ë¥¼ ë…ë¦½ì ìœ¼ë¡œ ë³€ê²½í•˜ë©´ í”„ë¡œì íŠ¸ ì§„í–‰ì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.')
      }
    }

    // ì œì•ˆì‚¬í•­
    if (task.hierarchyType === HierarchyType.INDEPENDENT && 
        newHierarchy.type !== HierarchyType.INDEPENDENT) {
      suggestions.push('ë…ë¦½ì  ì—…ë¬´ë¥¼ ê³„ì¸µêµ¬ì¡°ì— í¬í•¨ì‹œí‚¤ë©´ ëª©í‘œ ë‹¬ì„±ì„ ë” ì²´ê³„ì ìœ¼ë¡œ ì¶”ì í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.')
    }

    return {
      isValid: errors.length === 0,
      errors,
      warnings,
      suggestions
    }
  }

  /**
   * ê³„ì¸µêµ¬ì¡° ë¶„ì„
   */
  static analyzeHierarchy(
    task: WorklyTask,
    project?: Project,
    goal?: Goal
  ): HierarchyAnalytics {
    const analysis: HierarchyAnalytics = {
      taskId: task.id,
      hierarchyType: task.hierarchyType,
      connections: {},
      impact: {
        independence: 0
      },
      recommendations: {}
    }

    // ì—°ê²° ê´€ê³„ ë¶„ì„
    if (project && task.projectId) {
      analysis.connections.projectConnection = {
        projectId: project.id,
        projectTitle: project.title,
        projectProgress: project.progress,
        contributionPercentage: this.calculateProjectContribution(task, project)
      }
    }

    if (goal) {
      const isDirectConnection = task.hierarchyType === HierarchyType.GOAL_DIRECT
      analysis.connections.goalConnection = {
        goalId: goal.id,
        goalTitle: goal.title,
        goalProgress: goal.progress,
        contributionPercentage: this.calculateGoalContribution(task, goal),
        isDirectConnection
      }
    }

    // ë…ë¦½ì„± ì ìˆ˜ ê³„ì‚°
    analysis.impact.independence = this.calculateIndependenceScore(task)

    // í”„ë¡œì íŠ¸/ëª©í‘œ ì˜í–¥ë„ ê³„ì‚°
    if (analysis.connections.projectConnection) {
      analysis.impact.onProject = analysis.connections.projectConnection.contributionPercentage
    }
    if (analysis.connections.goalConnection) {
      analysis.impact.onGoal = analysis.connections.goalConnection.contributionPercentage
    }

    // ì¶”ì²œì‚¬í•­ ìƒì„±
    analysis.recommendations = this.generateRecommendations(task, analysis)

    return analysis
  }

  /**
   * í”„ë¡œì íŠ¸ ê¸°ì—¬ë„ ê³„ì‚°
   */
  private static calculateProjectContribution(task: WorklyTask, project: Project): number {
    // ê°„ë‹¨í•œ ê³„ì‚°: í”„ë¡œì íŠ¸ ë‚´ ì—…ë¬´ ìˆ˜ ëŒ€ë¹„ ì´ ì—…ë¬´ì˜ ê°€ì¤‘ì¹˜
    // ì‹¤ì œë¡œëŠ” ì—…ë¬´ì˜ ìš°ì„ ìˆœìœ„, ì†Œìš”ì‹œê°„, ë³µì¡ë„ ë“±ì„ ê³ ë ¤í•´ì•¼ í•¨
    const baseContribution = 100 / (project.tasksCount || 1)
    
    // ìš°ì„ ìˆœìœ„ì— ë”°ë¥¸ ê°€ì¤‘ì¹˜
    const priorityWeight = this.getPriorityWeight(task.priority)
    
    // ì˜ˆìƒ ì†Œìš”ì‹œê°„ì— ë”°ë¥¸ ê°€ì¤‘ì¹˜  
    const timeWeight = Math.min(task.estimatedMinutes / 480, 2) // 8ì‹œê°„ ê¸°ì¤€, ìµœëŒ€ 2ë°°
    
    return Math.min(baseContribution * priorityWeight * timeWeight, 100)
  }

  /**
   * ëª©í‘œ ê¸°ì—¬ë„ ê³„ì‚°
   */
  private static calculateGoalContribution(task: WorklyTask, goal: Goal): number {
    // ëª©í‘œì— ì§ì ‘ ì—°ê²°ëœ ì—…ë¬´ì¸ì§€, í”„ë¡œì íŠ¸ë¥¼ í†µí•´ ê°„ì ‘ ì—°ê²°ëœ ì—…ë¬´ì¸ì§€ì— ë”°ë¼ ë‹¤ë¥´ê²Œ ê³„ì‚°
    const isDirectConnection = task.hierarchyType === HierarchyType.GOAL_DIRECT
    
    let baseContribution: number
    
    if (isDirectConnection) {
      // ì§ì ‘ ì—°ê²°: ëª©í‘œ ë‚´ ì§ì ‘ ì—…ë¬´ ìˆ˜ ëŒ€ë¹„
      baseContribution = 100 / Math.max(goal.projectCount * 3, 1) // ê°€ì •: í”„ë¡œì íŠ¸ë‹¹ í‰ê·  3ê°œ ì—…ë¬´
    } else {
      // ê°„ì ‘ ì—°ê²°: í”„ë¡œì íŠ¸ë¥¼ í†µí•œ ê¸°ì—¬
      baseContribution = 100 / Math.max(goal.projectCount * 10, 1) // ê°€ì •: í”„ë¡œì íŠ¸ë‹¹ í‰ê·  10ê°œ ì—…ë¬´
    }
    
    const priorityWeight = this.getPriorityWeight(task.priority)
    
    return Math.min(baseContribution * priorityWeight, 100)
  }

  /**
   * ë…ë¦½ì„± ì ìˆ˜ ê³„ì‚°
   */
  private static calculateIndependenceScore(task: WorklyTask): number {
    switch (task.hierarchyType) {
      case HierarchyType.INDEPENDENT:
        return 100
      case HierarchyType.PROJECT_ONLY:
        return 30
      case HierarchyType.GOAL_DIRECT:
        return 20
      case HierarchyType.FULL_HIERARCHY:
        return 0
      default:
        return 50
    }
  }

  /**
   * ìš°ì„ ìˆœìœ„ ê°€ì¤‘ì¹˜ ê³„ì‚°
   */
  private static getPriorityWeight(priority: string): number {
    switch (priority) {
      case 'urgent': return 2.0
      case 'high': return 1.5
      case 'medium': return 1.0
      case 'low': return 0.7
      default: return 1.0
    }
  }

  /**
   * ì¶”ì²œì‚¬í•­ ìƒì„±
   */
  private static generateRecommendations(
    task: WorklyTask, 
    analysis: HierarchyAnalytics
  ): HierarchyAnalytics['recommendations'] {
    const recommendations: HierarchyAnalytics['recommendations'] = {}

    // ë…ë¦½ì  ì—…ë¬´ë¥¼ í”„ë¡œì íŠ¸ë¡œ ì´ë™ ì¶”ì²œ
    if (task.hierarchyType === HierarchyType.INDEPENDENT && 
        task.estimatedMinutes > 120) { // 2ì‹œê°„ ì´ìƒ ì†Œìš” ì˜ˆìƒ
      recommendations.shouldMoveToProject = 
        'ì´ ì—…ë¬´ëŠ” 2ì‹œê°„ ì´ìƒ ì†Œìš”ê°€ ì˜ˆìƒë˜ë¯€ë¡œ í”„ë¡œì íŠ¸ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ê² ìŠµë‹ˆë‹¤.'
    }

    // í”„ë¡œì íŠ¸ ì—…ë¬´ë¥¼ ëª©í‘œì™€ ì—°ê²° ì¶”ì²œ
    if (task.hierarchyType === HierarchyType.PROJECT_ONLY &&
        task.priority === 'high') {
      recommendations.shouldConnectToGoal = 
        'ì¤‘ìš”í•œ ì—…ë¬´ì´ë¯€ë¡œ ìƒìœ„ ëª©í‘œì™€ ì—°ê²°í•˜ì—¬ ëª©í‘œ ë‹¬ì„±ë„ë¥¼ ì¶”ì í•´ë³´ì„¸ìš”.'
    }

    // ë³µì¡í•œ ê³„ì¸µì„ ë‹¨ìˆœí™” ì¶”ì²œ
    if (task.hierarchyType === HierarchyType.FULL_HIERARCHY &&
        analysis.impact.independence > 80) {
      recommendations.shouldBecomeIndependent = 
        'ì´ ì—…ë¬´ëŠ” ë…ë¦½ì ìœ¼ë¡œ ìˆ˜í–‰ ê°€ëŠ¥í•´ ë³´ì´ë¯€ë¡œ ë‹¨ìˆœí™”ë¥¼ ê³ ë ¤í•´ë³´ì„¸ìš”.'
    }

    return recommendations
  }

  /**
   * ì˜¤ëŠ˜ í•  ì¼ ìµœì í™”
   */
  static optimizeTodayTasks(
    tasks: WorklyTask[],
    projects: Project[] = [],
    goals: Goal[] = []
  ): TodayTasksOptimized {
    const todayTasks = tasks.filter(task => 
      task.isToday && 
      task.cperWorkflow.stage === CPERStage.EXECUTING
    )

    // ìš°ì„ ìˆœìœ„ë³„ ë¶„ë¥˜
    const focusedTasks = todayTasks.filter(task => task.isFocused)
    const urgentTasks = todayTasks.filter(task => 
      task.priority === 'urgent' && !task.isFocused
    )
    const readyToStartTasks = todayTasks.filter(task => 
      task.nextAction && task.nextAction.trim().length > 0
    )
    const remainingTasks = todayTasks.filter(task => 
      !task.isFocused && 
      task.priority !== 'urgent' && 
      (!task.nextAction || task.nextAction.trim().length === 0)
    )

    // ê³„ì¸µêµ¬ì¡°ë³„ ê·¸ë£¹í™”
    const independent = todayTasks.filter(task => 
      task.hierarchyType === HierarchyType.INDEPENDENT
    )

    const byProject = this.groupTasksByProject(todayTasks, projects)
    const byGoal = this.groupTasksByGoal(todayTasks, projects, goals)

    // ì‹œê°„ ë¶„ì„
    const totalEstimatedMinutes = todayTasks.reduce(
      (sum, task) => sum + task.estimatedMinutes, 0
    )
    const focusedTasksMinutes = focusedTasks.reduce(
      (sum, task) => sum + task.estimatedMinutes, 0
    )

    return {
      focusedTasks,
      urgentTasks,
      todayTasks: remainingTasks,
      readyToStartTasks,
      groupedByHierarchy: {
        independent,
        byProject,
        byGoal
      },
      timeAnalysis: {
        totalEstimatedMinutes,
        focusedTasksMinutes,
        averageTaskMinutes: totalEstimatedMinutes / Math.max(todayTasks.length, 1),
        recommendedDailyLimit: 480 // 8ì‹œê°„
      }
    }
  }

  /**
   * í”„ë¡œì íŠ¸ë³„ ì—…ë¬´ ê·¸ë£¹í™”
   */
  private static groupTasksByProject(
    tasks: WorklyTask[], 
    projects: Project[]
  ): TodayTasksOptimized['groupedByHierarchy']['byProject'] {
    const projectGroups: { [projectId: string]: WorklyTask[] } = {}

    tasks.forEach(task => {
      if (task.projectId && 
          (task.hierarchyType === HierarchyType.PROJECT_ONLY || 
           task.hierarchyType === HierarchyType.FULL_HIERARCHY)) {
        if (!projectGroups[task.projectId]) {
          projectGroups[task.projectId] = []
        }
        projectGroups[task.projectId].push(task)
      }
    })

    return Object.entries(projectGroups).map(([projectId, tasks]) => {
      const project = projects.find(p => p.id === projectId)
      return {
        projectId,
        projectTitle: project?.title || 'í”„ë¡œì íŠ¸ ë¯¸í™•ì¸',
        tasks
      }
    })
  }

  /**
   * ëª©í‘œë³„ ì—…ë¬´ ê·¸ë£¹í™”
   */
  private static groupTasksByGoal(
    tasks: WorklyTask[], 
    projects: Project[], 
    goals: Goal[]
  ): TodayTasksOptimized['groupedByHierarchy']['byGoal'] {
    const goalGroups: { [goalId: string]: {
      directTasks: WorklyTask[]
      projectTasks: { [projectId: string]: WorklyTask[] }
    }} = {}

    tasks.forEach(task => {
      let goalId: string | undefined

      // ëª©í‘œ ID í™•ì¸
      if (task.hierarchyType === HierarchyType.GOAL_DIRECT) {
        goalId = task.goalId
      } else if (task.hierarchyType === HierarchyType.FULL_HIERARCHY) {
        goalId = task.goalId
      }

      if (goalId) {
        if (!goalGroups[goalId]) {
          goalGroups[goalId] = {
            directTasks: [],
            projectTasks: {}
          }
        }

        if (task.hierarchyType === HierarchyType.GOAL_DIRECT) {
          goalGroups[goalId].directTasks.push(task)
        } else if (task.projectId) {
          if (!goalGroups[goalId].projectTasks[task.projectId]) {
            goalGroups[goalId].projectTasks[task.projectId] = []
          }
          goalGroups[goalId].projectTasks[task.projectId].push(task)
        }
      }
    })

    return Object.entries(goalGroups).map(([goalId, groupData]) => {
      const goal = goals.find(g => g.id === goalId)
      
      const projectTasks = Object.entries(groupData.projectTasks).map(([projectId, tasks]) => {
        const project = projects.find(p => p.id === projectId)
        return {
          projectId,
          projectTitle: project?.title || 'í”„ë¡œì íŠ¸ ë¯¸í™•ì¸',
          tasks
        }
      })

      return {
        goalId,
        goalTitle: goal?.title || 'ëª©í‘œ ë¯¸í™•ì¸',
        directTasks: groupData.directTasks,
        projectTasks
      }
    })
  }

  /**
   * ê³„ì¸µêµ¬ì¡° ë³€ê²½ ì‹¤í–‰
   */
  static async changeHierarchy(
    taskId: string,
    newHierarchy: HierarchyChoice,
    currentTask: WorklyTask
  ): Promise<WorklyTask> {
    // ê²€ì¦
    const validation = this.canChangeHierarchy(currentTask, newHierarchy)
    if (!validation.isValid) {
      throw new Error(`ê³„ì¸µêµ¬ì¡° ë³€ê²½ ë¶ˆê°€: ${validation.errors.join(', ')}`)
    }

    // ìƒˆë¡œìš´ ê³„ì¸µêµ¬ì¡°ë¡œ ì—…ë¬´ ì—…ë°ì´íŠ¸
    const updatedTask: WorklyTask = {
      ...currentTask,
      hierarchyType: newHierarchy.type,
      projectId: newHierarchy.projectId,
      goalId: newHierarchy.goalId,
      updatedAt: new Date().toISOString()
    }

    // TODO: ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì—¬ê¸°ì„œ API í˜¸ì¶œ
    // await taskApi.updateTask(taskId, updatedTask)

    return updatedTask
  }

  /**
   * ë…ë¦½ì  ì—…ë¬´ ì—¬ë¶€ í™•ì¸
   */
  static isIndependentTask(task: WorklyTask): boolean {
    return task.hierarchyType === HierarchyType.INDEPENDENT
  }

  /**
   * í”„ë¡œì íŠ¸ë¥¼ í†µí•œ ëª©í‘œ ì—°ê²° í™•ì¸
   */
  static isGoalConnectedThroughProject(task: WorklyTask): boolean {
    return task.hierarchyType === HierarchyType.FULL_HIERARCHY
  }

  /**
   * ì§ì ‘ ëª©í‘œ ì—°ê²° í™•ì¸
   */
  static isDirectlyConnectedToGoal(task: WorklyTask): boolean {
    return task.hierarchyType === HierarchyType.GOAL_DIRECT
  }
}
</file>

<file path=".env.example">
# Database
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=workly
DATABASE_USERNAME=workly_user
DATABASE_PASSWORD=workly_password

# JWT
JWT_SECRET=your-super-secret-jwt-key
JWT_EXPIRES_IN=7d

# Google OAuth
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# Frontend URL
FRONTEND_URL=http://localhost:3000

# Backend URL
BACKEND_URL=http://localhost:3001

# Redis (for production)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# File Storage
STORAGE_TYPE=local # local or s3
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=
AWS_S3_BUCKET=

# Email (for notifications)
SMTP_HOST=
SMTP_PORT=
SMTP_USER=
SMTP_PASS=
</file>

<file path=".eslintrc.js">
module.exports = {
  root: true,
  env: {
    browser: true,
    es2020: true,
    node: true,
  },
  extends: [
    'eslint:recommended',
  ],
  ignorePatterns: [
    'dist',
    '.eslintrc.js',
    'node_modules',
    '**/*.d.ts',
  ],
  parserOptions: {
    ecmaVersion: 'latest',
    sourceType: 'module',
  },
  rules: {
    'prefer-const': 'error',
    'no-var': 'error',
    'no-console': 'warn',
    'no-debugger': 'warn',
  },
  overrides: [
    {
      files: ['**/*.test.ts', '**/*.test.tsx', '**/*.spec.ts', '**/*.spec.tsx'],
      env: {
        jest: true,
      },
      rules: {
        'no-console': 'off',
      },
    },
  ],
};
</file>

<file path="tsconfig.json">
{
  "compilerOptions": {
    "target": "ES2020",
    "lib": ["DOM", "DOM.Iterable", "ES2020"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "baseUrl": ".",
    "paths": {
      "@shared/*": ["shared/*"]
    }
  },
  "include": ["shared/**/*"],
  "exclude": ["node_modules"],
  "references": [
    {
      "path": "./frontend"
    },
    {
      "path": "./backend"
    },
    {
      "path": "./shared"
    }
  ]
}
</file>

<file path=".taskmaster/tasks/tasks.json">
{
  "master": {
    "tasks": [
      {
        "id": 1,
        "title": "Initialize Monorepo & CI/CD Pipeline",
        "description": "Set up the monorepo structure for frontend (Next.js) and backend (NestJS), configure Docker for development and production environments, and establish CI/CD pipelines (e.g., GitHub Actions) for automated testing and deployment.",
        "details": "Frontend: Next.js 14+ (App Router), TypeScript, Tailwind CSS. Backend: NestJS, TypeScript. Infrastructure: Docker, Docker Compose. CI/CD: Automated build, test, and deployment workflows.",
        "testStrategy": "Verify successful Docker container builds, local environment setup, and initial CI/CD pipeline runs for both frontend and backend.",
        "priority": "high",
        "dependencies": [],
        "status": "pending",
        "subtasks": [
          {
            "id": 1,
            "title": "Initialize Monorepo Structure",
            "description": "Set up the foundational monorepo workspace using a tool like Turborepo or Nx, defining separate applications for Next.js frontend and NestJS backend, and configuring shared tooling.",
            "dependencies": [],
            "details": "Configure `package.json` at the root, create `apps/frontend` and `apps/backend` directories, add basic configuration files for each application (e.g., `tsconfig.json`), and set up a monorepo manager (e.g., Turborepo).",
            "status": "pending",
            "testStrategy": "Verify that `pnpm install` (or npm/yarn) runs successfully at the root, and that both frontend and backend applications can be started independently using monorepo commands (e.g., `pnpm dev`)."
          },
          {
            "id": 2,
            "title": "Dockerize Development Environment",
            "description": "Create Dockerfiles and Docker Compose configurations for both the Next.js frontend and NestJS backend to enable a consistent and isolated local development environment.",
            "dependencies": [],
            "details": "Develop `Dockerfile.dev` for Next.js and NestJS, and a `docker-compose.dev.yml` to orchestrate services, including hot-reloading and volume mounts for code changes.",
            "status": "pending",
            "testStrategy": "Verify that `docker-compose -f docker-compose.dev.yml up` successfully builds and runs both frontend and backend containers, and that applications are accessible locally with live code changes reflected."
          },
          {
            "id": 3,
            "title": "Dockerize Production Environment",
            "description": "Optimize Dockerfiles for production environments, focusing on smaller image sizes and efficient builds for both Next.js and NestJS applications.",
            "dependencies": [],
            "details": "Create multi-stage `Dockerfile`s for Next.js and NestJS, ensuring minimal dependencies, optimized layers, and production-ready configurations.",
            "status": "pending",
            "testStrategy": "Verify that production Docker images can be built successfully using `docker build -f Dockerfile -t <image-name> .` for both apps, and confirm image sizes are optimized."
          },
          {
            "id": 4,
            "title": "Implement CI/CD for Build & Test",
            "description": "Establish GitHub Actions workflows to automate the build and test processes for both the Next.js frontend and NestJS backend within the monorepo.",
            "dependencies": [],
            "details": "Create a `.github/workflows/ci.yml` file to define a workflow that triggers on push/PR, installs monorepo dependencies, builds both applications, and runs unit/integration tests for each.",
            "status": "pending",
            "testStrategy": "Push a commit to a feature branch and verify that the CI pipeline runs successfully, building both applications and passing all configured tests."
          },
          {
            "id": 5,
            "title": "Implement CI/CD for Automated Deployment",
            "description": "Extend the CI/CD pipeline to include automated deployment steps for both the Next.js frontend and NestJS backend, leveraging the production Docker images.",
            "dependencies": [],
            "details": "Add deployment jobs to the GitHub Actions workflow, potentially pushing built Docker images to a container registry and then deploying them to a target environment (e.g., a staging server or cloud platform).",
            "status": "pending",
            "testStrategy": "Trigger a deployment (e.g., on merge to main or a specific tag) and verify that the applications are successfully deployed and accessible in the target environment."
          }
        ]
      },
      {
        "id": 2,
        "title": "Implement Google OAuth & JWT Authentication",
        "description": "Develop the user authentication system using Google OAuth 2.0 for sign-in and JWT for secure session management. This includes user registration/login flow and protected API routes.",
        "details": "Backend: NestJS, @nestjs/jwt, passport-google-oauth20. Frontend: Integrate Google login button, handle OAuth callback, store JWT securely. API: POST /auth/google, GET /auth/me.",
        "testStrategy": "Unit tests for JWT generation/validation. Integration tests for Google OAuth flow, successful user creation/login, and access to protected routes.",
        "priority": "high",
        "dependencies": [
          1
        ],
        "status": "pending",
        "subtasks": [
          {
            "id": 1,
            "title": "Backend Google OAuth Strategy & Token Exchange Endpoint",
            "description": "Implement the NestJS Passport Google OAuth strategy and create the backend endpoint (`POST /auth/google`) to receive the Google authorization code or ID token from the frontend, exchange it with Google for user data, and initiate the authentication process.",
            "dependencies": [],
            "details": "Configure `passport-google-oauth20`, define `GoogleStrategy`, create `POST /auth/google` endpoint to handle incoming Google tokens/codes and perform Google API calls for user info.",
            "status": "done",
            "testStrategy": "Unit tests for GoogleStrategy configuration and token exchange logic with mock Google responses."
          },
          {
            "id": 2,
            "title": "Backend JWT Generation & User Persistence",
            "description": "Develop the backend logic to generate JSON Web Tokens (JWT) upon successful Google authentication and persist user data in the database. This includes creating new user records or updating existing ones based on Google profile information.",
            "dependencies": [
              "2.1"
            ],
            "details": "Implement user service for `findOrCreate` based on Google profile (email, name, avatar), use `@nestjs/jwt` to sign and issue access tokens and refresh tokens. Define JWT payload structure.",
            "status": "done",
            "testStrategy": "Unit tests for JWT generation and validation logic, including token expiration and refresh token mechanisms. Unit tests for user creation/update logic."
          },
          {
            "id": 3,
            "title": "Frontend Google Sign-In Button & OAuth Flow Initiation",
            "description": "Integrate the Google Sign-In button into the frontend UI and implement the client-side logic to initiate the Google OAuth flow, obtaining the necessary authorization code or ID token from Google.",
            "dependencies": [],
            "details": "Integrate Google Identity Services JS SDK (or similar), display Google login button on the sign-in page, configure client-side OAuth flow to get authorization code or ID token upon user consent.",
            "status": "done",
            "testStrategy": "Manual testing of Google login button display and initial OAuth redirect/popup functionality. Verify successful acquisition of Google token/code."
          },
          {
            "id": 4,
            "title": "Frontend Token Transmission, Storage & API Integration",
            "description": "Implement the frontend logic to send the obtained Google token/code to the backend's authentication endpoint (`POST /auth/google`), securely store the received JWT, and configure the application to include this token in headers for all subsequent authenticated API requests.",
            "dependencies": [
              "2.1",
              "2.2",
              "2.3"
            ],
            "details": "Send Google token/code to `POST /auth/google` endpoint. Securely store the returned JWT (e.g., HttpOnly cookies, localStorage with appropriate security measures). Implement an Axios interceptor or similar to attach the JWT to `Authorization: Bearer <token>` header for all authenticated API calls.",
            "status": "done",
            "testStrategy": "Integration tests to verify successful token transmission to backend, secure storage of JWT, and correct inclusion of JWT in subsequent API requests. Test token refresh if applicable."
          },
          {
            "id": 5,
            "title": "Backend Protected Routes & Session Validation Endpoint",
            "description": "Implement JWT authentication guards on the backend to protect specific API routes and develop an endpoint (`GET /auth/me`) to validate the current user's session and retrieve their profile information based on the provided JWT.",
            "dependencies": [
              "2.2",
              "2.4"
            ],
            "details": "Create NestJS `AuthGuard` using `@nestjs/jwt` to validate incoming JWTs. Apply guards to routes requiring authentication, including `GET /auth/me` to return authenticated user details. Implement error handling for invalid or expired tokens.",
            "status": "done",
            "testStrategy": "Integration tests for successful access to protected routes using a valid JWT. Integration tests for rejection of requests with invalid, expired, or missing tokens. Unit tests for `AuthGuard` logic."
          }
        ]
      },
      {
        "id": 3,
        "title": "Design & Implement Core Data Models (PostgreSQL, TypeORM)",
        "description": "Set up PostgreSQL database, configure TypeORM, and define the initial core data models: User, Task, and Project entities with their respective relationships and fields as specified in the PRD.",
        "details": "Database: PostgreSQL. ORM: TypeORM. Entities: User (id, email, profile, xp, level, createdAt), Task (id, title, description, status, project_id, assignee_id), Project (id, title, members, workspace_id?). Migrations: Create initial database schema migrations.",
        "testStrategy": "Unit tests for TypeORM entities and repositories. Integration tests to verify successful database connection, schema creation, and basic CRUD operations for each entity.",
        "priority": "high",
        "dependencies": [
          1
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Set up PostgreSQL Database",
            "description": "Install and configure a local PostgreSQL instance, create the necessary database, and ensure it's accessible for connection.",
            "dependencies": [],
            "details": "Install PostgreSQL. Create a dedicated database (e.g., `task_manager_db`). Configure user credentials and permissions.",
            "status": "done",
            "testStrategy": "Manually verify database accessibility using a client tool (e.g., `psql`, DBeaver) and ensure connection can be established."
          },
          {
            "id": 2,
            "title": "Configure TypeORM and Database Connection",
            "description": "Install TypeORM and related packages, set up the `DataSource` configuration, and establish the initial connection to the PostgreSQL database from the application.",
            "dependencies": [
              "3.1"
            ],
            "details": "Install `typeorm`, `@nestjs/typeorm`, `pg`. Create `data-source.ts` or `ormconfig.ts` with connection details. Integrate `TypeOrmModule.forRoot()` in NestJS application module.",
            "status": "done",
            "testStrategy": "Integration test to verify successful database connection on application startup and TypeORM initialization."
          },
          {
            "id": 3,
            "title": "Define User and Project Entities with Basic Fields",
            "description": "Create the TypeORM `User` entity (id, email, profile, xp, level, createdAt) and `Project` entity (id, title, members, workspace_id?) with their basic fields and primary keys.",
            "dependencies": [
              "3.2"
            ],
            "details": "Implement `@Entity()`, `@PrimaryGeneratedColumn()`, and `@Column()` decorators for User and Project entities. Define appropriate data types for each field.",
            "status": "done",
            "testStrategy": "Unit tests for User and Project entity structures, ensuring correct column mapping and primary key definition."
          },
          {
            "id": 4,
            "title": "Define Task Entity and Establish All Entity Relationships",
            "description": "Create the TypeORM `Task` entity (id, title, description, status, project_id, assignee_id) and define all necessary relationships between User, Task, and Project entities (e.g., Task to Project, Task to User (assignee), Project to User (members)).",
            "dependencies": [
              "3.2",
              "3.3"
            ],
            "details": "Implement `@ManyToOne()`, `@OneToMany()`, `@ManyToMany()`, `@JoinColumn()`, and `@JoinTable()` decorators to establish foreign key relationships and many-to-many associations (e.g., Project members).",
            "status": "done",
            "testStrategy": "Unit tests for Task entity structure and all defined relationships. Integration tests to verify relationship loading and cascading behavior (if applicable)."
          },
          {
            "id": 5,
            "title": "Generate and Apply Initial Database Migrations",
            "description": "Generate the initial TypeORM migration script based on the defined entities and apply it to the PostgreSQL database to create the schema.",
            "dependencies": [
              "3.2",
              "3.3",
              "3.4"
            ],
            "details": "Use TypeORM CLI commands (`typeorm migration:generate`, `typeorm migration:run`) to create and apply the initial schema. Ensure all tables and relationships are correctly generated.",
            "status": "done",
            "testStrategy": "Integration tests to verify successful schema creation after migration. Perform basic CRUD operations for each entity to confirm table and column integrity."
          }
        ]
      },
      {
        "id": 4,
        "title": "Configure Socket.io for Real-time Updates",
        "description": "Set up and configure Socket.io on the NestJS backend and integrate it with the Next.js frontend to enable real-time communication channels for chat and general application updates.",
        "details": "Backend: NestJS, socket.io. Frontend: Socket.io client integration. Initial events: project:join, project:leave.",
        "testStrategy": "Unit tests for Socket.io event handlers. Integration tests to verify successful WebSocket connection, joining/leaving channels, and basic message exchange.",
        "priority": "high",
        "dependencies": [
          1
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 5,
        "title": "Develop Core UI/UX & Mobile-First Layout",
        "description": "Implement the foundational UI/UX elements including global styles using Tailwind CSS, responsive layout for mobile-first design, navigation components (header, sidebar), and a consistent visual language.",
        "details": "Framework: Next.js 14+ (App Router). Styling: Tailwind CSS. UI Components: Headless UI + custom components for basic layout, buttons, inputs. Principles: Progressive disclosure, consistency, immediate feedback, mobile-first.",
        "testStrategy": "Visual regression tests for key pages. Manual testing across various screen sizes and devices to ensure responsiveness and usability.",
        "priority": "high",
        "dependencies": [
          1
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Setup Tailwind CSS & Global Styles",
            "description": "Configure Tailwind CSS in the Next.js project, define base styles, typography, color palette, and any global CSS resets or utility classes. Establish the initial `layout.tsx` for the root application structure.",
            "dependencies": [],
            "details": "Framework: Next.js 14+ (App Router). Styling: Tailwind CSS configuration (`tailwind.config.js`, `globals.css`). Initial `layout.tsx` setup.",
            "status": "done",
            "testStrategy": "Verify Tailwind classes are applied correctly; inspect global styles and typography in browser developer tools."
          },
          {
            "id": 2,
            "title": "Implement Mobile-First Responsive Layout Structure",
            "description": "Design and implement the core responsive layout using CSS Grid or Flexbox, ensuring a mobile-first approach. This includes defining breakpoints and creating a flexible container system that adapts to various screen sizes.",
            "dependencies": [
              "5.1"
            ],
            "details": "Next.js layout components. Utilize Tailwind's responsive utility classes (e.g., `sm:`, `md:`, `lg:`). Focus on `min-width` breakpoints for mobile-first design.",
            "status": "done",
            "testStrategy": "Manual testing across various screen sizes (mobile, tablet, desktop) using browser developer tools and device emulation to ensure layout responsiveness."
          },
          {
            "id": 3,
            "title": "Develop Header & Sidebar Navigation Components",
            "description": "Create the primary navigation components: a responsive header (top bar) and a collapsible/expandable sidebar. These components should integrate with the mobile-first layout and provide consistent navigation across the application.",
            "dependencies": [
              "5.2"
            ],
            "details": "Next.js components for Header and Sidebar. Styling with Tailwind CSS. Utilize Headless UI components (e.g., Disclosure for sidebar toggle) for accessibility and interactivity.",
            "status": "done",
            "testStrategy": "Manual testing of navigation links, responsiveness of header/sidebar across breakpoints, and accessibility features (keyboard navigation, ARIA attributes)."
          },
          {
            "id": 4,
            "title": "Build Core UI Elements (Buttons, Inputs, Forms)",
            "description": "Develop a set of foundational, reusable UI components such as buttons, text inputs, text areas, and basic form structures. These components should adhere to the defined visual language and be styled consistently using Tailwind CSS.",
            "dependencies": [
              "5.1"
            ],
            "details": "Next.js components for `Button`, `Input`, `Textarea`. Styling with Tailwind CSS. Ensure consistency in states (hover, focus, active, disabled). Consider Headless UI for accessibility where applicable.",
            "status": "done",
            "testStrategy": "Visual inspection of components for consistency across different states. Manual testing of interactive elements for correct behavior and accessibility."
          },
          {
            "id": 5,
            "title": "Integrate & Refine Visual Language & Accessibility",
            "description": "Integrate all developed UI components and navigation into a cohesive visual system. Conduct a thorough review to ensure consistency in visual language, adherence to mobile-first principles, and basic accessibility standards (e.g., focus states, semantic HTML).",
            "dependencies": [
              "5.3",
              "5.4"
            ],
            "details": "Review and refine global styles, component usage, and layout structures. Focus on `layout.tsx` and `page.tsx` files. Implement any necessary accessibility improvements.",
            "status": "done",
            "testStrategy": "Visual regression tests for key pages (if setup). Manual testing across various screen sizes and devices to ensure responsiveness and usability. Basic accessibility audit using browser extensions (e.g., Lighthouse, Axe DevTools)."
          }
        ]
      },
      {
        "id": 6,
        "title": "Implement User Profile & XP/Level System",
        "description": "Develop the user profile page to display XP and level. Implement the backend logic to award XP for positive actions (e.g., task completion) and calculate level progression based on accumulated XP.",
        "details": "Backend: Update User model with xp, level fields. Logic for xp:gained event. Frontend: User profile UI, display XP bar and current level. Gamification: XP acquisition for 'ì¼ì¼ ì—…ë¬´ ì™„ë£Œ' (10 XP).",
        "testStrategy": "Unit tests for XP calculation and level-up logic. Integration tests to verify XP gain upon task completion and correct profile display.",
        "priority": "medium",
        "dependencies": [
          2,
          3
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 7,
        "title": "Develop GTD-based Task Management System",
        "description": "Implement the full GTD 5-step sequential process for task creation. Develop CRUD operations for tasks and implement smart filtering for 'Today', 'Completed', and 'All' tasks.",
        "details": "Backend: POST /tasks (GTD flow), GET /tasks (filtering), PUT /tasks/:id, DELETE /tasks/:id. Frontend: UI for GTD task creation wizard, task list display, and filter toggles. Task fields: id, title, description, status, priority, project_id, assignee_id, due_date.",
        "testStrategy": "Unit tests for task service logic. Integration tests for all task API endpoints, ensuring correct data persistence and filtering. End-to-end tests for the GTD creation flow.",
        "priority": "high",
        "dependencies": [
          3,
          5
        ],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Implement Core Task Data Model & Basic CRUD Backend",
            "description": "Define the task data model with specified fields and implement the backend API endpoints for updating (PUT), deleting (DELETE), and retrieving all tasks (GET without specific filters). This forms the foundational layer for task management.",
            "dependencies": [],
            "details": "Backend: Define task schema/model (id, title, description, status, priority, project_id, assignee_id, due_date). Implement PUT /tasks/:id for updating task details, DELETE /tasks/:id for removing tasks, and a basic GET /tasks endpoint to retrieve all tasks without specific filtering logic.",
            "status": "done",
            "testStrategy": "Unit tests for task service logic (update, delete, retrieve all). Integration tests for PUT /tasks/:id, DELETE /tasks/:id, and basic GET /tasks endpoints, ensuring correct data persistence and retrieval."
          },
          {
            "id": 2,
            "title": "Develop GTD 5-Step Task Creation Backend",
            "description": "Implement the backend logic for the Getting Things Done (GTD) 5-step sequential process for task creation, handling the initial intake and processing of new tasks.",
            "dependencies": [
              "7.1"
            ],
            "details": "Backend: Implement the POST /tasks endpoint to encapsulate the GTD 5-step flow (Capture, Clarify, Organize, Reflect, Engage). This involves processing incoming task data, assigning initial status/priority based on GTD principles, and persisting the task.",
            "status": "done",
            "testStrategy": "Unit tests for the GTD processing logic within the task service. Integration tests for the POST /tasks endpoint, ensuring correct task creation and adherence to GTD principles."
          },
          {
            "id": 3,
            "title": "Implement Smart Task Filtering Backend",
            "description": "Enhance the backend task retrieval API to support smart filtering for 'Today', 'Completed', and 'All' tasks, providing the necessary data for the frontend display.",
            "dependencies": [
              "7.1"
            ],
            "details": "Backend: Extend the GET /tasks endpoint to accept query parameters for filtering tasks by 'Today' (tasks due today or overdue), 'Completed' (tasks with status 'completed'), and 'All' (all tasks, default). This requires logic to interpret due_date and status fields.",
            "status": "done",
            "testStrategy": "Integration tests for the GET /tasks endpoint with various filter parameters, ensuring accurate retrieval of 'Today', 'Completed', and 'All' tasks."
          },
          {
            "id": 4,
            "title": "Develop GTD Task Creation Frontend Wizard",
            "description": "Create the user interface for the GTD 5-step sequential task creation process, guiding the user through capturing and processing new tasks.",
            "dependencies": [
              "7.2"
            ],
            "details": "Frontend: Develop a multi-step UI wizard for task creation, aligning with the GTD 5-step process. This includes input fields for title, description, and potentially guiding questions for clarification, organization, etc., culminating in a call to the POST /tasks API.",
            "status": "done",
            "testStrategy": "End-to-end tests for the GTD creation flow, verifying user interaction, data submission, and successful task creation."
          },
          {
            "id": 5,
            "title": "Develop Task List Display & Filtering Frontend",
            "description": "Build the frontend UI to display the list of tasks and provide interactive toggles for 'Today', 'Completed', and 'All' smart filters.",
            "dependencies": [
              "7.1",
              "7.3"
            ],
            "details": "Frontend: Implement the task list display component, rendering tasks retrieved from the GET /tasks API. Develop UI elements (buttons/toggles) for 'Today', 'Completed', and 'All' filters, which trigger calls to the filtered GET /tasks endpoint and update the displayed list.",
            "status": "done",
            "testStrategy": "End-to-end tests for the task list display and filter toggles, ensuring correct task rendering and accurate filtering based on user selection."
          }
        ]
      },
      {
        "id": 8,
        "title": "Implement Project Creation & Basic Collaboration",
        "description": "Enable users to create new projects, manage project details, and invite/manage members. This includes basic project listing and viewing.",
        "details": "Backend: POST /projects, GET /projects, PUT /projects/:id. Frontend: UI for project creation form, project list, and project detail view. Project fields: id, title, objectives[], key_results[], members[].",
        "testStrategy": "Unit tests for project service logic. Integration tests for project API endpoints. End-to-end tests for project creation and member management.",
        "priority": "medium",
        "dependencies": [
          3,
          5
        ],
        "status": "in-progress",
        "subtasks": [
          {
            "id": 1,
            "title": "Develop Core Project API & Data Model",
            "description": "Implement backend endpoints for creating, retrieving (list and single), and updating project core details (title, objectives, key results). Define the project data model.",
            "dependencies": [],
            "details": "Backend: POST /projects, GET /projects, GET /projects/:id, PUT /projects/:id (for core fields). Project fields: id, title, objectives[], key_results[].",
            "status": "done",
            "testStrategy": "Unit tests for project service logic. Integration tests for project API endpoints (CRUD for core fields)."
          },
          {
            "id": 2,
            "title": "Implement Project Listing & Creation UI",
            "description": "Develop the frontend UI for displaying a list of projects and a form for creating new projects.",
            "dependencies": [],
            "details": "Frontend: UI for project list (GET /projects) and project creation form (POST /projects).",
            "status": "done",
            "testStrategy": "End-to-end tests for project creation flow and project list display."
          },
          {
            "id": 3,
            "title": "Implement Project Detail & Editing UI",
            "description": "Develop the frontend UI for viewing detailed project information and editing existing project details.",
            "dependencies": [],
            "details": "Frontend: UI for project detail view (GET /projects/:id) and project editing form (PUT /projects/:id).",
            "status": "done",
            "testStrategy": "End-to-end tests for project detail viewing and editing flow."
          },
          {
            "id": 4,
            "title": "Develop Project Member Management Backend",
            "description": "Implement backend logic and API endpoints to add, remove, and manage members associated with a project. This includes updating the members[] field.",
            "dependencies": [],
            "details": "Backend: Extend PUT /projects/:id or add new endpoints (e.g., POST /projects/:id/members, DELETE /projects/:id/members/:memberId) to manage the members[] array. This involves linking users (from Task 2) to projects.",
            "status": "done",
            "testStrategy": "Unit tests for member management logic. Integration tests for member management API endpoints."
          },
          {
            "id": 5,
            "title": "Implement Project Member Management UI",
            "description": "Develop the frontend UI within the project detail view to invite, list, and manage project members.",
            "dependencies": [],
            "details": "Frontend: UI components for inviting new members, displaying current members, and removing members within the project detail view.",
            "status": "done",
            "testStrategy": "End-to-end tests for inviting and managing project members."
          }
        ]
      },
      {
        "id": 9,
        "title": "Develop Real-time Project Chat with Slash Commands",
        "description": "Integrate real-time chat functionality within project channels using Socket.io. Implement basic slash commands like /add-task to create tasks directly from chat.",
        "details": "Backend: Socket.io event handling for project:message. Logic to parse /add-task command and create a task via the task service. Frontend: Chat UI within project view, message input, display of real-time messages. API: GET /projects/:id/chat for message history.",
        "testStrategy": "Integration tests for real-time message delivery and display. End-to-end tests for /add-task command functionality.",
        "priority": "medium",
        "dependencies": [
          4,
          7,
          8
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 10,
        "title": "Implement Momentum Score & Advanced Task Filtering",
        "description": "Develop the RICE model-based momentum score algorithm for automatic task prioritization. Extend task filtering to include 'Later' and intuitive search across all projects.",
        "details": "Backend: Algorithm for momentum_score calculation (RICE model: Reach, Impact, Confidence, Effort). Update Task model. Frontend: Display momentum score on tasks, implement 'Later' filter and global search input. API: Enhance GET /tasks with sorting by momentum score and search capabilities.",
        "testStrategy": "Unit tests for momentum score calculation logic. Integration tests for advanced filtering and search queries.",
        "priority": "medium",
        "dependencies": [
          7
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 11,
        "title": "Integrate Google Calendar for Due Date Sync",
        "description": "Implement the integration with Google Calendar API to synchronize task due dates, allowing users to see their Workly tasks directly in their Google Calendar.",
        "details": "Backend: Google Calendar API integration for creating/updating events. Frontend: UI for connecting Google Calendar account and enabling sync. Scope: One-way sync from Workly to Google Calendar for task due dates.",
        "testStrategy": "Integration tests for successful authentication with Google Calendar API and correct event creation/update.",
        "priority": "low",
        "dependencies": [
          2,
          7
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 12,
        "title": "Establish Comprehensive Testing & Monitoring",
        "description": "Implement a robust testing suite including unit, integration, and end-to-end tests for critical functionalities. Set up Sentry for error tracking and establish basic application performance monitoring.",
        "details": "Testing Frameworks: Jest (unit/integration), Playwright/Cypress (E2E). Monitoring: Sentry DSN configuration, basic logging. Coverage: Aim for high test coverage on core logic.",
        "testStrategy": "Run all test suites. Verify Sentry error reporting for simulated errors.",
        "priority": "high",
        "dependencies": [
          1
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 13,
        "title": "Implement Notion-Style Task Detail Modal with Markdown Editor",
        "description": "Develop a comprehensive task detail view within a Notion-style modal, featuring a markdown editor for descriptions, checklists, task relationships, wiki references, and time management functionalities.",
        "details": "Frontend:\n- Create a reusable modal component for displaying and editing task details, adhering to a Notion-style aesthetic.\n- Integrate a markdown editor (evaluate MDXEditor or @uiw/react-md-editor for features, performance, and ease of use) for the task description field.\n- Implement dedicated UI components for:\n  - Checklists: Allow adding, editing, deleting, and marking checklist items as complete.\n  - Task Relationships: Enable linking tasks (e.g., parent/child, blocking/blocked by, related) with a task search/picker.\n  - Wiki References: Provide fields for adding and displaying links to external wiki pages or internal documentation.\n  - Time Management: Include functionalities for estimated time, logged time, and potentially a simple time tracking mechanism (start/stop).\n- Ensure data binding and debounced saving for all editable fields to provide a smooth user experience.\n- Focus on responsive design and accessibility for the modal and its contents.\n\nBackend (API Extensions):\n- Extend the existing Task data model to accommodate new fields:\n  - `description_markdown`: String for markdown content.\n  - `checklist`: Array of objects (e.g., `{id: string, text: string, completed: boolean}`).\n  - `relationships`: Array of objects (e.g., `{target_task_id: number, type: 'parent' | 'subtask' | 'blocks' | 'related'}`).\n  - `wiki_references`: Array of objects (e.g., `{title: string, url: string}`).\n  - `estimated_time_minutes`: Number.\n  - `logged_time_minutes`: Number.\n- Enhance `GET /tasks/:id` to return all new detailed fields.\n- Implement/extend `PUT /tasks/:id` to allow updating all new detailed fields, ensuring proper validation and data integrity.",
        "testStrategy": "Unit Tests:\n- Test the markdown editor component's rendering, input handling, and content parsing.\n- Verify the logic for adding, removing, and toggling checklist items.\n- Test the task relationship component's ability to add/remove links and handle invalid task IDs.\n- Test time management component's input validation and calculation logic.\n\nIntegration Tests:\n- Verify that `GET /tasks/:id` successfully retrieves tasks with all new detailed fields (markdown, checklist, relationships, time data).\n- Confirm that `PUT /tasks/:id` correctly updates all new detailed fields in the database and that changes persist.\n- Test the interaction between the frontend components and the backend API for saving and loading data.\n\nEnd-to-End Tests (using Playwright/Cypress):\n- Open the task detail modal for an existing task and verify its Notion-style appearance.\n- Edit the markdown description, add/remove checklist items, establish task relationships, and log time.\n- Save the changes and verify they are correctly displayed upon re-opening the modal or refreshing the page.\n- Test various scenarios: empty fields, large markdown content, multiple checklist items, and complex relationship structures.\n- Verify the modal's opening/closing animations and overall user experience.",
        "status": "done",
        "dependencies": [
          8
        ],
        "priority": "medium",
        "subtasks": [
          {
            "id": 1,
            "title": "Implement Notion-Style Task Detail Modal UI",
            "description": "Create the foundational reusable modal component for displaying task details, adhering to a Notion-style aesthetic, focusing on responsive design and accessibility. [Updated: 8/2/2025]",
            "dependencies": [],
            "details": "Create a reusable modal component for displaying and editing task details, adhering to a Notion-style aesthetic. Ensure responsive design and accessibility for the modal and its contents.\n<info added on 2025-08-01T15:20:44.829Z>\nTypeScript type definitions have been completed. Implementation of the modal component has started, focusing on the basic layout and a full-screen toggle feature.\n</info added on 2025-08-01T15:20:44.829Z>",
            "status": "done",
            "testStrategy": "Unit tests for modal rendering, opening/closing behavior, and responsiveness."
          },
          {
            "id": 2,
            "title": "Integrate Markdown Editor for Task Description",
            "description": "Integrate a chosen markdown editor into the task description field within the Notion-style modal.",
            "dependencies": [
              "13.1"
            ],
            "details": "Integrate a markdown editor (evaluate MDXEditor or @uiw/react-md-editor for features, performance, and ease of use) for the task description field.",
            "status": "done",
            "testStrategy": "Unit tests for the markdown editor component's rendering, input handling, and content parsing."
          },
          {
            "id": 3,
            "title": "Implement Checklist Functionality",
            "description": "Develop dedicated UI components and logic for adding, editing, deleting, and marking checklist items as complete within the task detail modal.",
            "dependencies": [
              "13.1"
            ],
            "details": "Implement dedicated UI components for Checklists: Allow adding, editing, deleting, and marking checklist items as complete.",
            "status": "done",
            "testStrategy": "Unit tests for the logic for adding, removing, and toggling checklist items."
          },
          {
            "id": 4,
            "title": "Implement Task Relationship Management",
            "description": "Develop UI components and logic to enable linking tasks (e.g., parent/child, blocking/blocked by, related) with a task search/picker within the modal.",
            "dependencies": [
              "13.1"
            ],
            "details": "Implement dedicated UI components for Task Relationships: Enable linking tasks (e.g., parent/child, blocking/blocked by, related) with a task search/picker.",
            "status": "done",
            "testStrategy": "Unit tests for the task relationship component's ability to add/remove links and handle invalid task IDs."
          },
          {
            "id": 5,
            "title": "Implement Time Management Features",
            "description": "Develop UI components for estimated time, logged time, and potentially a simple time tracking mechanism within the task detail modal.",
            "dependencies": [
              "13.1"
            ],
            "details": "Implement dedicated UI components for Time Management: Include functionalities for estimated time, logged time, and potentially a simple time tracking mechanism (start/stop).",
            "status": "done",
            "testStrategy": "Unit tests for time management component's input validation and display logic."
          },
          {
            "id": 6,
            "title": "Implement Wiki References Management",
            "description": "Develop UI components for adding and displaying links to external wiki pages or internal documentation within the task detail modal.",
            "dependencies": [
              "13.1"
            ],
            "details": "Implement dedicated UI components for Wiki References: Provide fields for adding and displaying links to external wiki pages or internal documentation.",
            "status": "done",
            "testStrategy": "Unit tests for wiki reference component's input handling and link display."
          },
          {
            "id": 7,
            "title": "Extend Task Data Model and API",
            "description": "Extend the backend Task data model to accommodate new fields for description, checklists, relationships, wiki references, and time management, and update the API endpoints for retrieval and update.",
            "dependencies": [],
            "details": "Extend the existing Task data model to accommodate new fields: `description_markdown`, `checklist`, `relationships`, `wiki_references`, `estimated_time_minutes`, `logged_time_minutes`. Enhance `GET /tasks/:id` to return all new detailed fields. Implement/extend `PUT /tasks/:id` to allow updating all new detailed fields, ensuring proper validation and data integrity.",
            "status": "done",
            "testStrategy": "Unit tests for data model validation and API endpoint logic. Integration tests for data persistence and retrieval."
          },
          {
            "id": 8,
            "title": "Integrate Frontend with Backend and Conduct Comprehensive Testing",
            "description": "Connect all implemented frontend UI components with the extended backend API, ensuring data binding, debounced saving, and conducting comprehensive integration and end-to-end tests.",
            "dependencies": [
              "13.2",
              "13.3",
              "13.4",
              "13.5",
              "13.6",
              "13.7"
            ],
            "details": "Ensure data binding and debounced saving for all editable fields to provide a smooth user experience. Conduct comprehensive integration tests to ensure all implemented features work correctly with the backend API for data persistence and retrieval.",
            "status": "done",
            "testStrategy": "End-to-end tests for the entire task detail modal flow, including data creation, update, and retrieval. Verify debounced saving and data integrity across sessions."
          }
        ]
      }
    ],
    "metadata": {
      "created": "2025-07-25T13:37:36.448Z",
      "updated": "2025-08-02T07:23:05.526Z",
      "description": "Tasks for master context"
    }
  }
}
</file>

<file path="backend/src/database/entities/task.entity.ts">
import {
  Entity,
  PrimaryGeneratedColumn,
  Column,
  CreateDateColumn,
  UpdateDateColumn,
  ManyToOne,
  OneToMany,
  ManyToMany,
  JoinTable,
  Index,
  BeforeInsert,
  BeforeUpdate,
} from 'typeorm';
import { 
  TaskStatus, 
  Priority, 
  TaskType,
  WorkflowStage
} from '@workly/shared';
import { User } from './user.entity';
import { Project } from './project.entity';
import { TaskLabel } from './task-label.entity';
import { TaskComment } from './task-comment.entity';
import { TaskDependency } from './task-dependency.entity';
import { TimeEntry } from './time-entry.entity';

@Entity('tasks')
@Index(['title'])
@Index(['status'])
@Index(['priority'])
@Index(['type'])
@Index(['projectId'])
@Index(['assigneeId'])
@Index(['reporterId'])
@Index(['parentTaskId'])
@Index(['dueDate'])
@Index(['createdAt'])
@Index(['workflowStageId'])
export class Task {
  @PrimaryGeneratedColumn('uuid')
  id: string;

  @Column()
  title: string;

  @Column('text', { nullable: true })
  description?: string;

  @Column('text', { nullable: true })
  descriptionMarkdown?: string;

  @Column({
    type: 'enum',
    enum: TaskStatus,
    default: TaskStatus.TODO,
  })
  status: TaskStatus;

  @Column({
    type: 'enum',
    enum: Priority,
    default: Priority.MEDIUM,
  })
  priority: Priority;

  @Column({
    type: 'enum',
    enum: TaskType,
    default: TaskType.TASK,
  })
  type: TaskType;

  @Column({ type: 'timestamp', nullable: true })
  dueDate?: Date;

  @Column({ type: 'timestamp', nullable: true })
  startDate?: Date;

  @Column({ type: 'timestamp', nullable: true })
  completedAt?: Date;

  @Column({ nullable: true })
  projectId?: string;

  @Column({ nullable: true })
  assigneeId?: string;

  @Column()
  reporterId: string;

  @Column({ nullable: true })
  parentTaskId?: string;

  @Column({ type: 'decimal', precision: 8, scale: 2, nullable: true })
  estimatedHours?: number;

  @Column({ type: 'decimal', precision: 8, scale: 2, default: 0 })
  actualHours: number;

  @Column({ type: 'int', default: 0 })
  progress: number;

  @Column({ nullable: true })
  workflowStageId?: string;

  @Column('simple-array', { default: [] })
  tags: string[];

  @Column('jsonb', { default: {} })
  customFields: { [key: string]: any };

  @Column('jsonb', { default: [] })
  checklist: Array<{
    id: string;
    text: string;
    completed: boolean;
    order: number;
  }>;

  @Column('jsonb', { default: [] })
  relationships: Array<{
    id: string;
    targetTaskId: string;
    type: 'blocks' | 'blocked_by' | 'related' | 'parent' | 'child';
  }>;

  @Column('jsonb', { default: [] })
  wikiReferences: Array<{
    id: string;
    title: string;
    url: string;
    description?: string;
  }>;

  @Column({ type: 'int', nullable: true })
  estimatedTimeMinutes?: number;

  @Column({ type: 'int', default: 0 })
  loggedTimeMinutes: number;

  @CreateDateColumn()
  createdAt: Date;

  @UpdateDateColumn()
  updatedAt: Date;

  // ê´€ê³„ ì„¤ì •
  @ManyToOne(() => Project, project => project.tasks, {
    onDelete: 'CASCADE'
  })
  project?: Project;

  @ManyToOne(() => User, { eager: true })
  assignee?: User;

  @ManyToOne(() => User, { eager: true })
  reporter: User;

  @ManyToOne(() => Task, task => task.subtasks, {
    onDelete: 'CASCADE'
  })
  parentTask?: Task;

  @OneToMany(() => Task, task => task.parentTask)
  subtasks: Task[];

  @ManyToMany(() => TaskLabel)
  @JoinTable({
    name: 'task_labels_mapping',
    joinColumn: { name: 'taskId', referencedColumnName: 'id' },
    inverseJoinColumn: { name: 'labelId', referencedColumnName: 'id' }
  })
  labels: TaskLabel[];

  @OneToMany(() => TaskComment, comment => comment.task)
  comments: TaskComment[];

  @OneToMany(() => TaskDependency, dependency => dependency.dependentTask)
  dependencies: TaskDependency[];

  @OneToMany(() => TaskDependency, dependency => dependency.dependsOnTask)
  dependents: TaskDependency[];

  @OneToMany(() => TimeEntry, timeEntry => timeEntry.task)
  timeEntries: TimeEntry[];

  @ManyToMany(() => User)
  @JoinTable({
    name: 'task_watchers',
    joinColumn: { name: 'taskId', referencedColumnName: 'id' },
    inverseJoinColumn: { name: 'userId', referencedColumnName: 'id' }
  })
  watchers: User[];

  // ê¸°ë³¸ê°’ ì„¤ì •
  @BeforeInsert()
  setDefaultValues() {
    if (!this.tags) {
      this.tags = [];
    }
    if (!this.customFields) {
      this.customFields = {};
    }
    if (!this.checklist) {
      this.checklist = [];
    }
    if (!this.relationships) {
      this.relationships = [];
    }
    if (!this.wikiReferences) {
      this.wikiReferences = [];
    }
    if (this.actualHours === undefined) {
      this.actualHours = 0;
    }
    if (this.loggedTimeMinutes === undefined) {
      this.loggedTimeMinutes = 0;
    }
  }

  // ìƒíƒœ ë³€ê²½ ì‹œ ì²˜ë¦¬
  @BeforeUpdate()
  handleStatusUpdate() {
    if (this.status === TaskStatus.COMPLETED && !this.completedAt) {
      this.completedAt = new Date();
      this.progress = 100;
    } else if (this.status !== TaskStatus.COMPLETED) {
      this.completedAt = undefined;
    }
  }

  // íƒœìŠ¤í¬ ì™„ë£Œ ì²˜ë¦¬
  complete(): void {
    this.status = TaskStatus.COMPLETED;
    this.completedAt = new Date();
    this.progress = 100;
  }

  // íƒœìŠ¤í¬ ì‹œì‘
  start(): void {
    if (this.status === TaskStatus.TODO) {
      this.status = TaskStatus.IN_PROGRESS;
      if (!this.startDate) {
        this.startDate = new Date();
      }
    }
  }

  // íƒœìŠ¤í¬ ì°¨ë‹¨
  block(): void {
    this.status = TaskStatus.BLOCKED;
  }

  // íƒœìŠ¤í¬ ê²€í†  ìš”ì²­
  requestReview(): void {
    this.status = TaskStatus.IN_REVIEW;
  }

  // íƒœìŠ¤í¬ ì·¨ì†Œ
  cancel(): void {
    this.status = TaskStatus.CANCELLED;
    this.completedAt = new Date();
  }

  // ë‹´ë‹¹ì í• ë‹¹
  assignTo(userId: string): void {
    this.assigneeId = userId;
  }

  // ë‹´ë‹¹ì í•´ì œ
  unassign(): void {
    this.assigneeId = undefined;
  }

  // ìš°ì„ ìˆœìœ„ ì„¤ì •
  setPriority(priority: Priority): void {
    this.priority = priority;
  }

  // ë§ˆê°ì¼ ì„¤ì •
  setDueDate(dueDate: Date): void {
    this.dueDate = dueDate;
  }

  // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
  updateProgress(progress: number): void {
    this.progress = Math.max(0, Math.min(100, progress));
    
    if (progress === 100 && this.status !== TaskStatus.COMPLETED) {
      this.complete();
    } else if (progress === 0 && this.status !== TaskStatus.TODO) {
      this.status = TaskStatus.TODO;
    } else if (progress > 0 && progress < 100 && this.status === TaskStatus.TODO) {
      this.start();
    }
  }

  // ì˜ˆìƒ ì‹œê°„ ì—…ë°ì´íŠ¸
  updateEstimatedHours(hours: number): void {
    this.estimatedHours = Math.max(0, hours);
  }

  // ì‹¤ì œ ì‹œê°„ ì—…ë°ì´íŠ¸ (ì‹œê°„ ì¶”ì ì—ì„œ ìë™ ê³„ì‚°)
  recalculateActualHours(): void {
    if (this.timeEntries && this.timeEntries.length > 0) {
      this.actualHours = this.timeEntries.reduce((total, entry) => {
        return total + (entry.duration / 60); // ë¶„ì„ ì‹œê°„ìœ¼ë¡œ ë³€í™˜
      }, 0);
    }
  }

  // ë§ˆê°ì¼ ì²´í¬
  isOverdue(): boolean {
    if (!this.dueDate) return false;
    return new Date() > this.dueDate && this.status !== TaskStatus.COMPLETED;
  }

  // ê³§ ë§ˆê°ë˜ëŠ”ì§€ ì²´í¬ (24ì‹œê°„ ì´ë‚´)
  isDueSoon(): boolean {
    if (!this.dueDate) return false;
    const twentyFourHoursFromNow = new Date();
    twentyFourHoursFromNow.setHours(twentyFourHoursFromNow.getHours() + 24);
    return this.dueDate <= twentyFourHoursFromNow && !this.isOverdue();
  }

  // ì™„ë£Œ ì—¬ë¶€ ì²´í¬
  isCompleted(): boolean {
    return this.status === TaskStatus.COMPLETED;
  }

  // ì§„í–‰ ì¤‘ ì—¬ë¶€ ì²´í¬
  isInProgress(): boolean {
    return this.status === TaskStatus.IN_PROGRESS;
  }

  // ì°¨ë‹¨ë¨ ì—¬ë¶€ ì²´í¬
  isBlocked(): boolean {
    return this.status === TaskStatus.BLOCKED;
  }

  // ì„œë¸ŒíƒœìŠ¤í¬ ì—¬ë¶€ ì²´í¬
  isSubtask(): boolean {
    return this.parentTaskId !== null;
  }

  // ìƒìœ„ íƒœìŠ¤í¬ ì—¬ë¶€ ì²´í¬
  hasSubtasks(): boolean {
    return this.subtasks && this.subtasks.length > 0;
  }

  // ì˜ì¡´ì„± í™•ì¸
  hasDependencies(): boolean {
    return this.dependencies && this.dependencies.length > 0;
  }

  // ì°¨ë‹¨ëœ ì˜ì¡´ì„±ì´ ìˆëŠ”ì§€ í™•ì¸
  hasBlockingDependencies(): boolean {
    return this.dependencies?.some(dep => 
      dep.dependsOnTask.status !== TaskStatus.COMPLETED
    ) || false;
  }

  // ë‹´ë‹¹ì í™•ì¸
  isAssignedTo(userId: string): boolean {
    return this.assigneeId === userId;
  }

  // ìƒì„±ì í™•ì¸
  isReportedBy(userId: string): boolean {
    return this.reporterId === userId;
  }

  // ê´€ì°°ì í™•ì¸
  isWatchedBy(userId: string): boolean {
    return this.watchers?.some(watcher => watcher.id === userId) || false;
  }

  // ê¶Œí•œ í™•ì¸ - í¸ì§‘ ê°€ëŠ¥í•œì§€
  canEdit(userId: string): boolean {
    return this.isAssignedTo(userId) || this.isReportedBy(userId);
  }

  // ê¶Œí•œ í™•ì¸ - ì‚­ì œ ê°€ëŠ¥í•œì§€
  canDelete(userId: string): boolean {
    return this.isReportedBy(userId);
  }

  // íƒœê·¸ ì¶”ê°€
  addTag(tag: string): void {
    if (!this.tags.includes(tag)) {
      this.tags.push(tag);
    }
  }

  // íƒœê·¸ ì œê±°
  removeTag(tag: string): void {
    this.tags = this.tags.filter(t => t !== tag);
  }

  // ê´€ì°°ì ì¶”ê°€
  addWatcher(user: User): void {
    if (!this.isWatchedBy(user.id)) {
      if (!this.watchers) this.watchers = [];
      this.watchers.push(user);
    }
  }

  // ê´€ì°°ì ì œê±°
  removeWatcher(userId: string): void {
    if (this.watchers) {
      this.watchers = this.watchers.filter(watcher => watcher.id !== userId);
    }
  }

  // ì†Œìš” ì‹œê°„ ê³„ì‚° (ìƒì„±ë¶€í„° ì™„ë£Œê¹Œì§€)
  getTotalDuration(): number | null {
    if (!this.completedAt) return null;
    const startTime = this.startDate || this.createdAt;
    const diffTime = Math.abs(this.completedAt.getTime() - startTime.getTime());
    return Math.ceil(diffTime / (1000 * 60 * 60 * 24)); // ì¼ ë‹¨ìœ„
  }

  // ì˜ˆìƒ ëŒ€ë¹„ ì‹¤ì œ ì‹œê°„ ë¹„ìœ¨
  getTimeEfficiencyRatio(): number | null {
    if (!this.estimatedHours || this.actualHours === 0) return null;
    return this.actualHours / this.estimatedHours;
  }

  // ì²´í¬ë¦¬ìŠ¤íŠ¸ ê´€ë ¨ ë©”ì„œë“œ
  addChecklistItem(text: string): void {
    const newItem = {
      id: `checklist-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
      text: text.trim(),
      completed: false,
      order: this.checklist.length
    };
    this.checklist.push(newItem);
  }

  updateChecklistItem(itemId: string, updates: Partial<{ text: string; completed: boolean; order: number }>): void {
    const itemIndex = this.checklist.findIndex(item => item.id === itemId);
    if (itemIndex !== -1) {
      this.checklist[itemIndex] = { ...this.checklist[itemIndex], ...updates };
    }
  }

  removeChecklistItem(itemId: string): void {
    this.checklist = this.checklist.filter(item => item.id !== itemId);
  }

  getChecklistProgress(): { completed: number; total: number; percentage: number } {
    const total = this.checklist.length;
    const completed = this.checklist.filter(item => item.completed).length;
    const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;
    return { completed, total, percentage };
  }

  // ê´€ê³„ ê´€ë ¨ ë©”ì„œë“œ
  addRelationship(targetTaskId: string, type: 'blocks' | 'blocked_by' | 'related' | 'parent' | 'child'): void {
    const relationship = {
      id: `rel-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
      targetTaskId,
      type
    };
    this.relationships.push(relationship);
  }

  removeRelationship(relationshipId: string): void {
    this.relationships = this.relationships.filter(rel => rel.id !== relationshipId);
  }

  hasRelationshipWith(taskId: string): boolean {
    return this.relationships.some(rel => rel.targetTaskId === taskId);
  }

  // ìœ„í‚¤ ë ˆí¼ëŸ°ìŠ¤ ê´€ë ¨ ë©”ì„œë“œ
  addWikiReference(title: string, url: string, description?: string): void {
    const wikiRef = {
      id: `wiki-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
      title: title.trim(),
      url: url.trim(),
      description: description?.trim()
    };
    this.wikiReferences.push(wikiRef);
  }

  updateWikiReference(wikiId: string, updates: Partial<{ title: string; url: string; description: string }>): void {
    const wikiIndex = this.wikiReferences.findIndex(wiki => wiki.id === wikiId);
    if (wikiIndex !== -1) {
      this.wikiReferences[wikiIndex] = { ...this.wikiReferences[wikiIndex], ...updates };
    }
  }

  removeWikiReference(wikiId: string): void {
    this.wikiReferences = this.wikiReferences.filter(wiki => wiki.id !== wikiId);
  }

  // ì‹œê°„ ê´€ë¦¬ ë©”ì„œë“œ
  updateEstimatedTimeMinutes(minutes: number): void {
    this.estimatedTimeMinutes = Math.max(0, minutes);
  }

  addLoggedTime(minutes: number): void {
    this.loggedTimeMinutes += Math.max(0, minutes);
  }

  getTimeEfficiency(): number | null {
    if (!this.estimatedTimeMinutes || this.loggedTimeMinutes === 0) return null;
    return this.loggedTimeMinutes / this.estimatedTimeMinutes;
  }

  // JSON ì§ë ¬í™”
  toJSON() {
    const checklistProgress = this.getChecklistProgress();
    return {
      ...this,
      isOverdue: this.isOverdue(),
      isDueSoon: this.isDueSoon(),
      hasSubtasks: this.hasSubtasks(),
      hasDependencies: this.hasDependencies(),
      hasBlockingDependencies: this.hasBlockingDependencies(),
      checklistProgress,
      timeEfficiency: this.getTimeEfficiency(),
    };
  }
}
</file>

<file path="backend/src/modules/auth/strategies/jwt.strategy.ts">
import { Injectable, UnauthorizedException } from '@nestjs/common';
import { ConfigService } from '@nestjs/config';
import { PassportStrategy } from '@nestjs/passport';
import { ExtractJwt, Strategy } from 'passport-jwt';
import { AuthService } from '../auth.service';
import { getAuthConfig } from '../../../config/auth.config';
import { JwtPayload } from '@workly/shared';

@Injectable()
export class JwtStrategy extends PassportStrategy(Strategy) {
  constructor(
    private configService: ConfigService,
    private authService: AuthService,
  ) {
    const authConfig = getAuthConfig(configService);
    
    super({
      jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),
      ignoreExpiration: false,
      secretOrKey: authConfig.jwt.secret,
      passReqToCallback: true, // request ê°ì²´ë¥¼ validate ë©”ì„œë“œì— ì „ë‹¬
    });
  }

  async validate(request: any, payload?: JwtPayload) {
    // ê°œë°œ í™˜ê²½ì—ì„œ dev-admin-token ì²˜ë¦¬
    if (process.env.NODE_ENV === 'development') {
      const authHeader = request.headers.authorization;
      if (authHeader === 'Bearer dev-admin-token') {
        // ê°œë°œìš© ê´€ë¦¬ì ì‚¬ìš©ì ê°ì²´ ë°˜í™˜
        return {
          id: 'dev-admin-1',
          name: 'ì›Œí´ë¦¬ ê°œë°œ ê´€ë¦¬ì',
          email: 'dev-admin@workly.com',
          adminRole: 'super_admin',
          adminPermissions: ['*'],
          status: 'active',
          isAdminUser: () => true,
          isSuperAdmin: () => true,
          hasAllAdminPermissions: () => true,
          updateLastAdminLogin: () => {},
          lastAdminLogin: new Date(),
          twoFactorEnabled: false,
          allowedIPs: ['*']
        };
      }
    }

    // ì¼ë°˜ JWT í† í° ì²˜ë¦¬
    if (!payload) {
      throw new UnauthorizedException('Invalid token');
    }

    const user = await this.authService.validateUserById(payload.sub);
    
    if (!user) {
      throw new UnauthorizedException('Invalid token');
    }

    // ì‚¬ìš©ì ìƒíƒœ í™•ì¸
    if (user.status !== 'active') {
      throw new UnauthorizedException('Account is not active');
    }

    return user;
  }
}
</file>

<file path="backend/src/modules/auth/auth.service.ts">
import { 
  Injectable, 
  UnauthorizedException, 
  ConflictException,
  NotFoundException,
  BadRequestException 
} from '@nestjs/common';
import { ConfigService } from '@nestjs/config';
import { JwtService } from '@nestjs/jwt';
import { InjectRepository } from '@nestjs/typeorm';
import { Repository } from 'typeorm';
import * as bcrypt from 'bcryptjs';
import { v4 as uuidv4 } from 'uuid';

import { User } from '../../database/entities/user.entity';
import { getAuthConfig } from '../../config/auth.config';
import { JwtPayload, RefreshTokenPayload } from '@workly/shared';
import { 
  LoginDto, 
  RegisterDto, 
  GoogleAuthDto,
  RefreshTokenDto,
  ChangePasswordDto,
  ForgotPasswordDto,
  ResetPasswordDto,
  VerifyEmailDto,
  ResendVerificationDto
} from './dto/auth.dto';
import { 
  AuthResponse, 
  LoginResponse, 
  UserRole, 
  UserStatus 
} from '@workly/shared';

@Injectable()
export class AuthService {
  private authConfig;

  constructor(
    @InjectRepository(User)
    private userRepository: Repository<User>,
    private jwtService: JwtService,
    private configService: ConfigService,
  ) {
    this.authConfig = getAuthConfig(configService);
  }

  // ì¼ë°˜ ë¡œê·¸ì¸
  async login(loginDto: LoginDto): Promise<LoginResponse> {
    const { email, password, rememberMe } = loginDto;

    const user = await this.userRepository.findOne({
      where: { email },
      select: ['id', 'email', 'password', 'firstName', 'lastName', 'role', 'status', 'emailVerifiedAt'],
    });

    if (!user) {
      throw new UnauthorizedException('ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
    }

    const isPasswordValid = await bcrypt.compare(password, user.password);
    if (!isPasswordValid) {
      throw new UnauthorizedException('ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
    }

    if (user.status !== UserStatus.ACTIVE) {
      throw new UnauthorizedException('ê³„ì •ì´ í™œì„±í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
    }

    if (!user.emailVerifiedAt) {
      throw new UnauthorizedException('ì´ë©”ì¼ ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤.');
    }

    // ë§ˆì§€ë§‰ ë¡œê·¸ì¸ ì‹œê°„ ì—…ë°ì´íŠ¸
    await this.userRepository.update(user.id, {
      lastLoginAt: new Date(),
    });

    const tokens = await this.generateTokens(user, rememberMe);

    return {
      user: this.sanitizeUser(user),
      ...tokens,
    };
  }

  // íšŒì›ê°€ì…
  async register(registerDto: RegisterDto): Promise<AuthResponse> {
    const { email, password, firstName, lastName, agreeToTerms, agreeToPrivacy } = registerDto;

    // ì´ë©”ì¼ ì¤‘ë³µ í™•ì¸
    const existingUser = await this.userRepository.findOne({
      where: { email },
    });

    if (existingUser) {
      throw new ConflictException('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼ì…ë‹ˆë‹¤.');
    }

    // ë™ì˜ í™•ì¸
    if (!agreeToTerms || !agreeToPrivacy) {
      throw new BadRequestException('ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€ ë° ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨ì— ë™ì˜í•´ì•¼ í•©ë‹ˆë‹¤.');
    }

    // ë¹„ë°€ë²ˆí˜¸ í•´ì‹±
    const hashedPassword = await bcrypt.hash(password, this.authConfig.bcrypt.saltRounds);

    // ì´ë©”ì¼ ì¸ì¦ í† í° ìƒì„±
    const emailVerificationToken = uuidv4();

    // ì‚¬ìš©ì ìƒì„±
    const user = this.userRepository.create({
      email,
      password: hashedPassword,
      name: `${firstName} ${lastName}`,
      firstName,
      lastName,
      emailVerificationToken,
      profile: {
        firstName,
        lastName,
        timezone: 'Asia/Seoul',
        language: 'ko',
      },
      preferences: {
        theme: 'system',
        language: 'ko',
        timezone: 'Asia/Seoul',
        notifications: {
          email: true,
          push: true,
          desktop: true,
          taskAssigned: true,
          taskCompleted: true,
          taskDue: true,
          projectUpdates: true,
          mentions: true,
          weeklyDigest: true,
          dailyReminder: false,
        },
        workingHours: {
          enabled: true,
          startTime: '09:00',
          endTime: '18:00',
          timezone: 'Asia/Seoul',
          workingDays: [1, 2, 3, 4, 5],
          breakTime: {
            enabled: true,
            startTime: '12:00',
            endTime: '13:00',
          },
        },
        dashboard: {
          layout: 'grid',
          widgets: {
            myTasks: true,
            recentProjects: true,
            teamActivity: true,
            notifications: true,
            calendar: true,
            quickStats: true,
          },
          defaultView: 'dashboard',
        },
      },
    });

    const savedUser = await this.userRepository.save(user);

    // TODO: ì´ë©”ì¼ ì¸ì¦ ë©”ì¼ ë°œì†¡
    // await this.emailService.sendVerificationEmail(savedUser.email, emailVerificationToken);

    return {
      message: 'íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì´ë©”ì¼ ì¸ì¦ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”.',
      user: this.sanitizeUser(savedUser),
    };
  }

  // Google OAuth ë¡œê·¸ì¸
  async googleLogin(googleAuthDto: GoogleAuthDto): Promise<LoginResponse> {
    // TODO: Google OAuth ì½”ë“œ ê²€ì¦ ë° ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°
    // í˜„ì¬ëŠ” ê¸°ë³¸ êµ¬í˜„ë§Œ ì œê³µ
    throw new BadRequestException('Google OAuth ê¸°ëŠ¥ì€ ì•„ì§ êµ¬í˜„ ì¤‘ì…ë‹ˆë‹¤.');
  }

  // Google ì‚¬ìš©ì ê²€ì¦ (Passport Strategyì—ì„œ ì‚¬ìš©)
  async validateGoogleUser(googleUser: any): Promise<User> {
    const { googleId, email, firstName, lastName, avatar, emailVerified } = googleUser;

    // ê¸°ì¡´ Google ì‚¬ìš©ì ì°¾ê¸°
    let user = await this.userRepository.findOne({
      where: { googleId },
    });

    if (user) {
      // ê¸°ì¡´ ì‚¬ìš©ì ì •ë³´ ì—…ë°ì´íŠ¸
      user.lastLoginAt = new Date();
      if (avatar && !user.avatar) {
        user.avatar = avatar;
      }
      return this.userRepository.save(user);
    }

    // ì´ë©”ì¼ë¡œ ê¸°ì¡´ ì‚¬ìš©ì ì°¾ê¸°
    user = await this.userRepository.findOne({
      where: { email },
    });

    if (user) {
      // ê¸°ì¡´ ì‚¬ìš©ìì— Google ID ì—°ê²°
      user.googleId = googleId;
      user.lastLoginAt = new Date();
      if (avatar && !user.avatar) {
        user.avatar = avatar;
      }
      if (emailVerified && !user.emailVerifiedAt) {
        user.emailVerifiedAt = new Date();
        user.status = UserStatus.ACTIVE;
      }
      return this.userRepository.save(user);
    }

    // ìƒˆ ì‚¬ìš©ì ìƒì„±
    const newUser = this.userRepository.create({
      email,
      name: `${firstName} ${lastName}`,
      googleId,
      firstName,
      lastName,
      avatar,
      password: '', // Google ì‚¬ìš©ìëŠ” ë¹„ë°€ë²ˆí˜¸ ë¶ˆí•„ìš”
      status: emailVerified ? UserStatus.ACTIVE : UserStatus.PENDING_VERIFICATION,
      emailVerifiedAt: emailVerified ? new Date() : undefined,
      lastLoginAt: new Date(),
      profile: {
        firstName,
        lastName,
        timezone: 'Asia/Seoul',
        language: 'ko',
      },
      preferences: {
        theme: 'system',
        language: 'ko',
        timezone: 'Asia/Seoul',
        notifications: {
          email: true,
          push: true,
          desktop: true,
          taskAssigned: true,
          taskCompleted: true,
          taskDue: true,
          projectUpdates: true,
          mentions: true,
          weeklyDigest: true,
          dailyReminder: false,
        },
        workingHours: {
          enabled: true,
          startTime: '09:00',
          endTime: '18:00',
          timezone: 'Asia/Seoul',
          workingDays: [1, 2, 3, 4, 5],
          breakTime: {
            enabled: true,
            startTime: '12:00',
            endTime: '13:00',
          },
        },
        dashboard: {
          layout: 'grid',
          widgets: {
            myTasks: true,
            recentProjects: true,
            teamActivity: true,
            notifications: true,
            calendar: true,
            quickStats: true,
          },
          defaultView: 'dashboard',
        },
      },
    });

    return this.userRepository.save(newUser);
  }

  // JWTë¡œ ì‚¬ìš©ì ê²€ì¦
  async validateUserById(userId: string): Promise<User | null> {
    return this.userRepository.findOne({
      where: { id: userId },
      select: [
        'id', 'email', 'name', 'firstName', 'lastName', 'avatar',
        'role', 'status', 'profile', 'preferences',
        'adminRole', 'adminPermissions', 'lastAdminLogin', 
        'twoFactorEnabled', 'allowedIPs',
        'lastLoginAt', 'emailVerifiedAt', 'googleId',
        'createdAt', 'updatedAt'
      ]
    });
  }

  // í† í° ìƒˆë¡œê³ ì¹¨
  async refreshToken(refreshTokenDto: RefreshTokenDto): Promise<{ accessToken: string }> {
    const { refreshToken } = refreshTokenDto;

    try {
      const payload = this.jwtService.verify(refreshToken, {
        secret: this.authConfig.jwt.secret,
      }) as RefreshTokenPayload;

      const user = await this.validateUserById(payload.sub);
      if (!user) {
        throw new UnauthorizedException('Invalid refresh token');
      }

      const accessToken = await this.generateAccessToken(user);
      return { accessToken };
    } catch (error) {
      throw new UnauthorizedException('Invalid refresh token');
    }
  }

  // ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
  async changePassword(userId: string, changePasswordDto: ChangePasswordDto): Promise<AuthResponse> {
    const { currentPassword, newPassword, confirmPassword } = changePasswordDto;

    if (newPassword !== confirmPassword) {
      throw new BadRequestException('ìƒˆ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
    }

    const user = await this.userRepository.findOne({
      where: { id: userId },
      select: ['id', 'email', 'password'],
    });

    if (!user) {
      throw new NotFoundException('ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
    }

    const isCurrentPasswordValid = await bcrypt.compare(currentPassword, user.password);
    if (!isCurrentPasswordValid) {
      throw new UnauthorizedException('í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
    }

    const hashedNewPassword = await bcrypt.hash(newPassword, this.authConfig.bcrypt.saltRounds);
    await this.userRepository.update(userId, {
      password: hashedNewPassword,
    });

    return {
      message: 'ë¹„ë°€ë²ˆí˜¸ê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.',
    };
  }

  // ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ìš”ì²­
  async forgotPassword(forgotPasswordDto: ForgotPasswordDto): Promise<AuthResponse> {
    const { email } = forgotPasswordDto;

    const user = await this.userRepository.findOne({
      where: { email },
    });

    if (!user) {
      // ë³´ì•ˆìƒ ì´ìœ ë¡œ ì‚¬ìš©ìê°€ ì¡´ì¬í•˜ì§€ ì•Šì•„ë„ ì„±ê³µ ë©”ì‹œì§€ ë°˜í™˜
      return {
        message: 'ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ë§í¬ê°€ ì´ë©”ì¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.',
      };
    }

    const resetToken = uuidv4();
    const resetExpiresAt = new Date();
    resetExpiresAt.setHours(resetExpiresAt.getHours() + 1); // 1ì‹œê°„ í›„ ë§Œë£Œ

    await this.userRepository.update(user.id, {
      resetPasswordToken: resetToken,
      resetPasswordExpiresAt: resetExpiresAt,
    });

    // TODO: ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ì´ë©”ì¼ ë°œì†¡
    // await this.emailService.sendPasswordResetEmail(user.email, resetToken);

    return {
      message: 'ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ë§í¬ê°€ ì´ë©”ì¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.',
    };
  }

  // ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •
  async resetPassword(resetPasswordDto: ResetPasswordDto): Promise<AuthResponse> {
    const { token, newPassword, confirmPassword } = resetPasswordDto;

    if (newPassword !== confirmPassword) {
      throw new BadRequestException('ìƒˆ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
    }

    const user = await this.userRepository.findOne({
      where: { 
        resetPasswordToken: token,
      },
    });

    if (!user || !user.resetPasswordExpiresAt || user.resetPasswordExpiresAt < new Date()) {
      throw new UnauthorizedException('ìœ íš¨í•˜ì§€ ì•Šê±°ë‚˜ ë§Œë£Œëœ í† í°ì…ë‹ˆë‹¤.');
    }

    const hashedPassword = await bcrypt.hash(newPassword, this.authConfig.bcrypt.saltRounds);

    await this.userRepository.update(user.id, {
      password: hashedPassword,
      resetPasswordToken: undefined,
      resetPasswordExpiresAt: undefined,
    });

    return {
      message: 'ë¹„ë°€ë²ˆí˜¸ê°€ ì„±ê³µì ìœ¼ë¡œ ì¬ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.',
    };
  }

  // ì´ë©”ì¼ ì¸ì¦
  async verifyEmail(verifyEmailDto: VerifyEmailDto): Promise<AuthResponse> {
    const { token } = verifyEmailDto;

    const user = await this.userRepository.findOne({
      where: { emailVerificationToken: token },
    });

    if (!user) {
      throw new UnauthorizedException('ìœ íš¨í•˜ì§€ ì•Šì€ ì¸ì¦ í† í°ì…ë‹ˆë‹¤.');
    }

    if (user.emailVerifiedAt) {
      throw new BadRequestException('ì´ë¯¸ ì¸ì¦ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.');
    }

    await this.userRepository.update(user.id, {
      emailVerifiedAt: new Date(),
      status: UserStatus.ACTIVE,
      emailVerificationToken: undefined,
    });

    return {
      message: 'ì´ë©”ì¼ ì¸ì¦ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.',
      user: this.sanitizeUser(user),
    };
  }

  // ì¸ì¦ ì´ë©”ì¼ ì¬ë°œì†¡
  async resendVerification(resendVerificationDto: ResendVerificationDto): Promise<AuthResponse> {
    const { email } = resendVerificationDto;

    const user = await this.userRepository.findOne({
      where: { email },
    });

    if (!user) {
      throw new NotFoundException('ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
    }

    if (user.emailVerifiedAt) {
      throw new BadRequestException('ì´ë¯¸ ì¸ì¦ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.');
    }

    const emailVerificationToken = uuidv4();
    await this.userRepository.update(user.id, {
      emailVerificationToken,
    });

    // TODO: ì¸ì¦ ì´ë©”ì¼ ì¬ë°œì†¡
    // await this.emailService.sendVerificationEmail(user.email, emailVerificationToken);

    return {
      message: 'ì¸ì¦ ì´ë©”ì¼ì´ ì¬ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.',
    };
  }

  // ì™¸ë¶€ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” í† í° ìƒì„± ë©”ì„œë“œ
  async generateTokensForUser(user: User, rememberMe?: boolean): Promise<{ accessToken: string; refreshToken: string }> {
    return this.generateTokens(user, rememberMe);
  }

  // í† í° ìƒì„±
  private async generateTokens(user: User, rememberMe?: boolean): Promise<{ accessToken: string; refreshToken: string }> {
    const accessToken = await this.generateAccessToken(user);
    const refreshToken = await this.generateRefreshToken(user, rememberMe);

    return {
      accessToken,
      refreshToken,
    };
  }

  // Access Token ìƒì„±
  private async generateAccessToken(user: User): Promise<string> {
    const payload: JwtPayload = {
      sub: user.id,
      email: user.email,
      role: user.role,
    };

    return this.jwtService.signAsync(payload, {
      secret: this.authConfig.jwt.secret,
      expiresIn: this.authConfig.jwt.expiresIn,
    });
  }

  // Refresh Token ìƒì„±
  private async generateRefreshToken(user: User, rememberMe?: boolean): Promise<string> {
    const payload: RefreshTokenPayload = {
      sub: user.id,
      tokenId: uuidv4(),
    };

    const expiresIn = rememberMe 
      ? this.authConfig.jwt.refreshExpiresIn 
      : '7d'; // ê¸°ë³¸ 7ì¼

    return this.jwtService.signAsync(payload, {
      secret: this.authConfig.jwt.secret,
      expiresIn,
    });
  }

  // ì‚¬ìš©ì ì •ë³´ ì •ì œ (ë¯¼ê°í•œ ì •ë³´ ì œê±°)
  private sanitizeUser(user: User): any {
    const { password, resetPasswordToken, emailVerificationToken, ...sanitizedUser } = user;
    return sanitizedUser;
  }
}
</file>

<file path="backend/src/modules/tasks/dto/task.dto.ts">
import {
  IsString,
  IsOptional,
  IsEnum,
  IsUUID,
  IsArray,
  IsNumber,
  IsObject,
  IsDateString,
  IsBoolean,
  Min,
  Max,
  MaxLength,
  MinLength,
  IsInt,
} from 'class-validator';
import { Type, Transform } from 'class-transformer';
import { ApiProperty, ApiPropertyOptional } from '@nestjs/swagger';
import { 
  TaskStatus, 
  Priority, 
  TaskType 
} from '@workly/shared';

export class CreateTaskDto {
  @ApiProperty({
    description: 'íƒœìŠ¤í¬ ì œëª©',
    example: 'ë¡œê·¸ì¸ ê¸°ëŠ¥ êµ¬í˜„',
    minLength: 1,
    maxLength: 200,
  })
  @IsString()
  @MinLength(1, { message: 'íƒœìŠ¤í¬ ì œëª©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.' })
  @MaxLength(200, { message: 'íƒœìŠ¤í¬ ì œëª©ì€ 200ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  title: string;

  @ApiPropertyOptional({
    description: 'íƒœìŠ¤í¬ ì„¤ëª…',
    example: 'JWTë¥¼ ì‚¬ìš©í•œ ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤.',
  })
  @IsOptional()
  @IsString()
  @MaxLength(2000, { message: 'íƒœìŠ¤í¬ ì„¤ëª…ì€ 2000ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  description?: string;

  @ApiPropertyOptional({
    description: 'í”„ë¡œì íŠ¸ ID',
    example: '123e4567-e89b-12d3-a456-426614174000',
  })
  @IsOptional()
  @IsUUID(4, { message: 'ìœ íš¨í•œ í”„ë¡œì íŠ¸ IDë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.' })
  projectId?: string;

  @ApiPropertyOptional({
    description: 'ë‹´ë‹¹ì ID',
    example: '123e4567-e89b-12d3-a456-426614174000',
  })
  @IsOptional()
  @IsUUID(4, { message: 'ìœ íš¨í•œ ë‹´ë‹¹ì IDë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.' })
  assigneeId?: string;

  @ApiPropertyOptional({
    description: 'ë¶€ëª¨ íƒœìŠ¤í¬ ID (ì„œë¸ŒíƒœìŠ¤í¬ì¸ ê²½ìš°)',
    example: '123e4567-e89b-12d3-a456-426614174000',
  })
  @IsOptional()
  @IsUUID(4, { message: 'ìœ íš¨í•œ ë¶€ëª¨ íƒœìŠ¤í¬ IDë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.' })
  parentTaskId?: string;

  @ApiPropertyOptional({
    description: 'íƒœìŠ¤í¬ ìš°ì„ ìˆœìœ„',
    enum: Priority,
    example: 'medium',
  })
  @IsOptional()
  @IsEnum(Priority, { message: 'ìœ íš¨í•œ ìš°ì„ ìˆœìœ„ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.' })
  priority?: Priority;

  @ApiPropertyOptional({
    description: 'íƒœìŠ¤í¬ íƒ€ì…',
    enum: TaskType,
    example: 'task',
  })
  @IsOptional()
  @IsEnum(TaskType, { message: 'ìœ íš¨í•œ íƒœìŠ¤í¬ íƒ€ì…ì„ ì„ íƒí•´ì£¼ì„¸ìš”.' })
  type?: TaskType;

  @ApiPropertyOptional({
    description: 'ë§ˆê°ì¼',
    example: '2024-02-01T23:59:59.000Z',
  })
  @IsOptional()
  @IsDateString({}, { message: 'ìœ íš¨í•œ ë‚ ì§œ í˜•ì‹ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.' })
  dueDate?: string;

  @ApiPropertyOptional({
    description: 'ì‹œì‘ì¼',
    example: '2024-01-15T09:00:00.000Z',
  })
  @IsOptional()
  @IsDateString({}, { message: 'ìœ íš¨í•œ ë‚ ì§œ í˜•ì‹ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.' })
  startDate?: string;

  @ApiPropertyOptional({
    description: 'ì˜ˆìƒ ì†Œìš” ì‹œê°„ (ì‹œê°„ ë‹¨ìœ„)',
    example: 8.5,
    minimum: 0,
  })
  @IsOptional()
  @IsNumber({}, { message: 'ìœ íš¨í•œ ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.' })
  @Min(0, { message: 'ì˜ˆìƒ ì†Œìš” ì‹œê°„ì€ 0 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.' })
  estimatedHours?: number;

  @ApiPropertyOptional({
    description: 'íƒœê·¸ ëª©ë¡',
    example: ['frontend', 'authentication'],
    type: [String],
  })
  @IsOptional()
  @IsArray()
  @IsString({ each: true })
  tags?: string[];

  @ApiPropertyOptional({
    description: 'ë ˆì´ë¸” ID ëª©ë¡',
    example: ['123e4567-e89b-12d3-a456-426614174000'],
    type: [String],
  })
  @IsOptional()
  @IsArray()
  @IsUUID(4, { each: true, message: 'ìœ íš¨í•œ ë ˆì´ë¸” IDë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.' })
  labelIds?: string[];

  @ApiPropertyOptional({
    description: 'ì»¤ìŠ¤í…€ í•„ë“œ',
    example: { category: 'development', client: 'internal' },
  })
  @IsOptional()
  @IsObject()
  customFields?: Record<string, any>;
}

export class UpdateTaskDto {
  @ApiPropertyOptional({
    description: 'íƒœìŠ¤í¬ ì œëª©',
    example: 'ë¡œê·¸ì¸ ê¸°ëŠ¥ êµ¬í˜„ ì™„ë£Œ',
    maxLength: 200,
  })
  @IsOptional()
  @IsString()
  @MaxLength(200, { message: 'íƒœìŠ¤í¬ ì œëª©ì€ 200ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  title?: string;

  @ApiPropertyOptional({
    description: 'íƒœìŠ¤í¬ ì„¤ëª…',
    example: 'JWTë¥¼ ì‚¬ìš©í•œ ë¡œê·¸ì¸ ê¸°ëŠ¥ êµ¬í˜„ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.',
  })
  @IsOptional()
  @IsString()
  @MaxLength(2000, { message: 'íƒœìŠ¤í¬ ì„¤ëª…ì€ 2000ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  description?: string;

  @ApiPropertyOptional({
    description: 'íƒœìŠ¤í¬ ìƒíƒœ',
    enum: TaskStatus,
    example: 'in_progress',
  })
  @IsOptional()
  @IsEnum(TaskStatus, { message: 'ìœ íš¨í•œ íƒœìŠ¤í¬ ìƒíƒœë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.' })
  status?: TaskStatus;

  @ApiPropertyOptional({
    description: 'íƒœìŠ¤í¬ ìš°ì„ ìˆœìœ„',
    enum: Priority,
    example: 'high',
  })
  @IsOptional()
  @IsEnum(Priority, { message: 'ìœ íš¨í•œ ìš°ì„ ìˆœìœ„ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.' })
  priority?: Priority;

  @ApiPropertyOptional({
    description: 'íƒœìŠ¤í¬ íƒ€ì…',
    enum: TaskType,
    example: 'feature',
  })
  @IsOptional()
  @IsEnum(TaskType, { message: 'ìœ íš¨í•œ íƒœìŠ¤í¬ íƒ€ì…ì„ ì„ íƒí•´ì£¼ì„¸ìš”.' })
  type?: TaskType;

  @ApiPropertyOptional({
    description: 'ë§ˆê°ì¼',
    example: '2024-02-01T23:59:59.000Z',
  })
  @IsOptional()
  @IsDateString({}, { message: 'ìœ íš¨í•œ ë‚ ì§œ í˜•ì‹ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.' })
  dueDate?: string;

  @ApiPropertyOptional({
    description: 'ì‹œì‘ì¼',
    example: '2024-01-15T09:00:00.000Z',
  })
  @IsOptional()
  @IsDateString({}, { message: 'ìœ íš¨í•œ ë‚ ì§œ í˜•ì‹ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.' })
  startDate?: string;

  @ApiPropertyOptional({
    description: 'ì˜ˆìƒ ì†Œìš” ì‹œê°„ (ì‹œê°„ ë‹¨ìœ„)',
    example: 10,
    minimum: 0,
  })
  @IsOptional()
  @IsNumber({}, { message: 'ìœ íš¨í•œ ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.' })
  @Min(0, { message: 'ì˜ˆìƒ ì†Œìš” ì‹œê°„ì€ 0 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.' })
  estimatedHours?: number;

  @ApiPropertyOptional({
    description: 'ì§„í–‰ë¥  (0-100)',
    example: 75,
    minimum: 0,
    maximum: 100,
  })
  @IsOptional()
  @IsInt({ message: 'ì§„í–‰ë¥ ì€ ì •ìˆ˜ì—¬ì•¼ í•©ë‹ˆë‹¤.' })
  @Min(0, { message: 'ì§„í–‰ë¥ ì€ 0 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.' })
  @Max(100, { message: 'ì§„í–‰ë¥ ì€ 100 ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.' })
  progress?: number;

  @ApiPropertyOptional({
    description: 'íƒœê·¸ ëª©ë¡',
    example: ['frontend', 'authentication', 'completed'],
    type: [String],
  })
  @IsOptional()
  @IsArray()
  @IsString({ each: true })
  tags?: string[];

  @ApiPropertyOptional({
    description: 'ë ˆì´ë¸” ID ëª©ë¡',
    example: ['123e4567-e89b-12d3-a456-426614174000'],
    type: [String],
  })
  @IsOptional()
  @IsArray()
  @IsUUID(4, { each: true, message: 'ìœ íš¨í•œ ë ˆì´ë¸” IDë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.' })
  labelIds?: string[];

  @ApiPropertyOptional({
    description: 'ì»¤ìŠ¤í…€ í•„ë“œ',
    example: { category: 'development', reviewStatus: 'approved' },
  })
  @IsOptional()
  @IsObject()
  customFields?: Record<string, any>;
}

export class TaskQueryDto {
  @ApiPropertyOptional({
    description: 'í˜ì´ì§€ ë²ˆí˜¸',
    example: 1,
    minimum: 1,
  })
  @IsOptional()
  @Type(() => Number)
  @IsInt({ message: 'í˜ì´ì§€ ë²ˆí˜¸ëŠ” ì •ìˆ˜ì—¬ì•¼ í•©ë‹ˆë‹¤.' })
  @Min(1, { message: 'í˜ì´ì§€ ë²ˆí˜¸ëŠ” 1 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.' })
  page?: number;

  @ApiPropertyOptional({
    description: 'í˜ì´ì§€ í¬ê¸°',
    example: 20,
    minimum: 1,
    maximum: 100,
  })
  @IsOptional()
  @Type(() => Number)
  @IsInt({ message: 'í˜ì´ì§€ í¬ê¸°ëŠ” ì •ìˆ˜ì—¬ì•¼ í•©ë‹ˆë‹¤.' })
  @Min(1, { message: 'í˜ì´ì§€ í¬ê¸°ëŠ” 1 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.' })
  @Max(100, { message: 'í˜ì´ì§€ í¬ê¸°ëŠ” 100 ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.' })
  limit?: number;

  @ApiPropertyOptional({
    description: 'íƒœìŠ¤í¬ ìƒíƒœ í•„í„°',
    enum: TaskStatus,
    example: 'in_progress',
  })
  @IsOptional()
  @IsEnum(TaskStatus, { message: 'ìœ íš¨í•œ íƒœìŠ¤í¬ ìƒíƒœë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.' })
  status?: TaskStatus;

  @ApiPropertyOptional({
    description: 'ìš°ì„ ìˆœìœ„ í•„í„°',
    enum: Priority,
    example: 'high',
  })
  @IsOptional()
  @IsEnum(Priority, { message: 'ìœ íš¨í•œ ìš°ì„ ìˆœìœ„ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.' })
  priority?: Priority;

  @ApiPropertyOptional({
    description: 'íƒœìŠ¤í¬ íƒ€ì… í•„í„°',
    enum: TaskType,
    example: 'feature',
  })
  @IsOptional()
  @IsEnum(TaskType, { message: 'ìœ íš¨í•œ íƒœìŠ¤í¬ íƒ€ì…ì„ ì„ íƒí•´ì£¼ì„¸ìš”.' })
  type?: TaskType;

  @ApiPropertyOptional({
    description: 'í”„ë¡œì íŠ¸ ID í•„í„°',
    example: '123e4567-e89b-12d3-a456-426614174000',
  })
  @IsOptional()
  @IsUUID(4, { message: 'ìœ íš¨í•œ í”„ë¡œì íŠ¸ IDë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.' })
  projectId?: string;

  @ApiPropertyOptional({
    description: 'ë‹´ë‹¹ì ID í•„í„°',
    example: '123e4567-e89b-12d3-a456-426614174000',
  })
  @IsOptional()
  @IsUUID(4, { message: 'ìœ íš¨í•œ ë‹´ë‹¹ì IDë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.' })
  assigneeId?: string;

  @ApiPropertyOptional({
    description: 'ìƒì„±ì ID í•„í„°',
    example: '123e4567-e89b-12d3-a456-426614174000',
  })
  @IsOptional()
  @IsUUID(4, { message: 'ìœ íš¨í•œ ìƒì„±ì IDë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.' })
  reporterId?: string;

  @ApiPropertyOptional({
    description: 'ë§ˆê°ì¼ í•„í„° (YYYY-MM-DD)',
    example: '2024-02-01',
  })
  @IsOptional()
  @IsDateString({}, { message: 'ìœ íš¨í•œ ë‚ ì§œ í˜•ì‹ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.' })
  dueDate?: string;

  @ApiPropertyOptional({
    description: 'ê²€ìƒ‰ì–´ (ì œëª©, ì„¤ëª…, íƒœê·¸)',
    example: 'ë¡œê·¸ì¸',
  })
  @IsOptional()
  @IsString()
  @MaxLength(100, { message: 'ê²€ìƒ‰ì–´ëŠ” 100ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  search?: string;

  @ApiPropertyOptional({
    description: 'ì •ë ¬ ê¸°ì¤€',
    example: 'createdAt',
    enum: ['createdAt', 'updatedAt', 'title', 'priority', 'dueDate', 'status'],
  })
  @IsOptional()
  @IsString()
  sortBy?: string;

  @ApiPropertyOptional({
    description: 'ì •ë ¬ ìˆœì„œ',
    example: 'DESC',
    enum: ['ASC', 'DESC'],
  })
  @IsOptional()
  @IsEnum(['ASC', 'DESC'], { message: 'ì •ë ¬ ìˆœì„œëŠ” ASC ë˜ëŠ” DESCì—¬ì•¼ í•©ë‹ˆë‹¤.' })
  sortOrder?: 'ASC' | 'DESC';

  @ApiPropertyOptional({
    description: 'ì„œë¸ŒíƒœìŠ¤í¬ í¬í•¨ ì—¬ë¶€',
    example: false,
  })
  @IsOptional()
  @Transform(({ value }) => value === 'true' || value === true)
  @IsBoolean()
  includeSubtasks?: boolean;

  @ApiPropertyOptional({
    description: 'ë ˆì´ë¸” ID í•„í„° ëª©ë¡',
    example: ['123e4567-e89b-12d3-a456-426614174000'],
    type: [String],
  })
  @IsOptional()
  @Transform(({ value }) => Array.isArray(value) ? value : [value])
  @IsArray()
  @IsUUID(4, { each: true, message: 'ìœ íš¨í•œ ë ˆì´ë¸” IDë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.' })
  labelIds?: string[];

  @ApiPropertyOptional({
    description: 'íƒœê·¸ í•„í„° ëª©ë¡',
    example: ['frontend', 'authentication'],
    type: [String],
  })
  @IsOptional()
  @Transform(({ value }) => Array.isArray(value) ? value : [value])
  @IsArray()
  @IsString({ each: true })
  tags?: string[];
}

export class CreateTaskLabelDto {
  @ApiProperty({
    description: 'ë ˆì´ë¸” ì´ë¦„',
    example: 'Bug',
    maxLength: 50,
  })
  @IsString()
  @MinLength(1, { message: 'ë ˆì´ë¸” ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.' })
  @MaxLength(50, { message: 'ë ˆì´ë¸” ì´ë¦„ì€ 50ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  name: string;

  @ApiProperty({
    description: 'ë ˆì´ë¸” ìƒ‰ìƒ (HEX)',
    example: '#FF0000',
  })
  @IsString()
  @MaxLength(7, { message: 'ìƒ‰ìƒì€ 7ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  color: string;

  @ApiPropertyOptional({
    description: 'ë ˆì´ë¸” ì„¤ëª…',
    example: 'ë²„ê·¸ ë° ì˜¤ë¥˜ ê´€ë ¨ íƒœìŠ¤í¬',
  })
  @IsOptional()
  @IsString()
  @MaxLength(200, { message: 'ë ˆì´ë¸” ì„¤ëª…ì€ 200ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  description?: string;

  @ApiPropertyOptional({
    description: 'í”„ë¡œì íŠ¸ ID (í”„ë¡œì íŠ¸ ì „ìš© ë ˆì´ë¸”ì¸ ê²½ìš°)',
    example: '123e4567-e89b-12d3-a456-426614174000',
  })
  @IsOptional()
  @IsUUID(4, { message: 'ìœ íš¨í•œ í”„ë¡œì íŠ¸ IDë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.' })
  projectId?: string;
}

export class UpdateTaskLabelDto {
  @ApiPropertyOptional({
    description: 'ë ˆì´ë¸” ì´ë¦„',
    example: 'Critical Bug',
    maxLength: 50,
  })
  @IsOptional()
  @IsString()
  @MaxLength(50, { message: 'ë ˆì´ë¸” ì´ë¦„ì€ 50ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  name?: string;

  @ApiPropertyOptional({
    description: 'ë ˆì´ë¸” ìƒ‰ìƒ (HEX)',
    example: '#CC0000',
  })
  @IsOptional()
  @IsString()
  @MaxLength(7, { message: 'ìƒ‰ìƒì€ 7ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  color?: string;

  @ApiPropertyOptional({
    description: 'ë ˆì´ë¸” ì„¤ëª…',
    example: 'ê¸´ê¸‰í•˜ê²Œ ì²˜ë¦¬í•´ì•¼ í•  ë²„ê·¸',
  })
  @IsOptional()
  @IsString()
  @MaxLength(200, { message: 'ë ˆì´ë¸” ì„¤ëª…ì€ 200ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  description?: string;
}

// ì²´í¬ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ DTO
export class ChecklistItemDto {
  @ApiProperty({
    description: 'ì²´í¬ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ ID',
    example: 'checklist-1706123456789-abc123def',
  })
  @IsString()
  id: string;

  @ApiProperty({
    description: 'ì²´í¬ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ í…ìŠ¤íŠ¸',
    example: 'ê¸°ë³¸ ìš”êµ¬ì‚¬í•­ ê²€í† ',
  })
  @IsString()
  @MaxLength(500, { message: 'ì²´í¬ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œì€ 500ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  text: string;

  @ApiProperty({
    description: 'ì™„ë£Œ ì—¬ë¶€',
    example: false,
  })
  @IsBoolean()
  completed: boolean;

  @ApiProperty({
    description: 'ì •ë ¬ ìˆœì„œ',
    example: 0,
  })
  @IsInt()
  @Min(0)
  order: number;
}

// ì—…ë¬´ ê´€ê³„ DTO
export class TaskRelationshipDto {
  @ApiProperty({
    description: 'ê´€ê³„ ID',
    example: 'rel-1706123456789-abc123def',
  })
  @IsString()
  id: string;

  @ApiProperty({
    description: 'ëŒ€ìƒ ì—…ë¬´ ID',
    example: '123e4567-e89b-12d3-a456-426614174000',
  })
  @IsUUID(4, { message: 'ìœ íš¨í•œ ì—…ë¬´ IDë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.' })
  targetTaskId: string;

  @ApiProperty({
    description: 'ê´€ê³„ íƒ€ì…',
    enum: ['blocks', 'blocked_by', 'related', 'parent', 'child'],
    example: 'blocks',
  })
  @IsEnum(['blocks', 'blocked_by', 'related', 'parent', 'child'], {
    message: 'ìœ íš¨í•œ ê´€ê³„ íƒ€ì…ì„ ì„ íƒí•´ì£¼ì„¸ìš”.'
  })
  type: 'blocks' | 'blocked_by' | 'related' | 'parent' | 'child';
}

// ìœ„í‚¤ ë ˆí¼ëŸ°ìŠ¤ DTO
export class WikiReferenceDto {
  @ApiProperty({
    description: 'ìœ„í‚¤ ë ˆí¼ëŸ°ìŠ¤ ID',
    example: 'wiki-1706123456789-abc123def',
  })
  @IsString()
  id: string;

  @ApiProperty({
    description: 'ìœ„í‚¤ ë¬¸ì„œ ì œëª©',
    example: 'ì›Œí´ë¦¬ ë””ìì¸ ê°€ì´ë“œ',
  })
  @IsString()
  @MaxLength(200, { message: 'ìœ„í‚¤ ì œëª©ì€ 200ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  title: string;

  @ApiProperty({
    description: 'ìœ„í‚¤ ë¬¸ì„œ URL',
    example: 'https://wiki.example.com/design-guide',
  })
  @IsString()
  @MaxLength(2000, { message: 'URLì€ 2000ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  url: string;

  @ApiPropertyOptional({
    description: 'ìœ„í‚¤ ë¬¸ì„œ ì„¤ëª…',
    example: 'ì›Œí´ë¦¬ UI/UX ë””ìì¸ í‘œì¤€',
  })
  @IsOptional()
  @IsString()
  @MaxLength(500, { message: 'ìœ„í‚¤ ì„¤ëª…ì€ 500ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  description?: string;
}

// ì—…ë¬´ ìƒì„¸ ì—…ë°ì´íŠ¸ DTO
export class UpdateTaskDetailDto extends UpdateTaskDto {
  @ApiPropertyOptional({
    description: 'ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ ìƒì„¸ ì„¤ëª…',
    example: '# ë¡œê·¸ì¸ ê¸°ëŠ¥ êµ¬í˜„\n\n## ìš”êµ¬ì‚¬í•­\n- JWT í† í° ì‚¬ìš©\n- ì†Œì…œ ë¡œê·¸ì¸ ì§€ì›',
  })
  @IsOptional()
  @IsString()
  @MaxLength(10000, { message: 'ë§ˆí¬ë‹¤ìš´ ì„¤ëª…ì€ 10000ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.' })
  descriptionMarkdown?: string;

  @ApiPropertyOptional({
    description: 'ì²´í¬ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ ëª©ë¡',
    type: [ChecklistItemDto],
  })
  @IsOptional()
  @IsArray()
  @Type(() => ChecklistItemDto)
  checklist?: ChecklistItemDto[];

  @ApiPropertyOptional({
    description: 'ì—…ë¬´ ê´€ê³„ ëª©ë¡',
    type: [TaskRelationshipDto],
  })
  @IsOptional()
  @IsArray()
  @Type(() => TaskRelationshipDto)
  relationships?: TaskRelationshipDto[];

  @ApiPropertyOptional({
    description: 'ìœ„í‚¤ ë ˆí¼ëŸ°ìŠ¤ ëª©ë¡',
    type: [WikiReferenceDto],
  })
  @IsOptional()
  @IsArray()
  @Type(() => WikiReferenceDto)
  wikiReferences?: WikiReferenceDto[];

  @ApiPropertyOptional({
    description: 'ì˜ˆìƒ ì†Œìš” ì‹œê°„ (ë¶„ ë‹¨ìœ„)',
    example: 480,
    minimum: 0,
  })
  @IsOptional()
  @IsInt({ message: 'ì˜ˆìƒ ì‹œê°„ì€ ì •ìˆ˜ì—¬ì•¼ í•©ë‹ˆë‹¤.' })
  @Min(0, { message: 'ì˜ˆìƒ ì‹œê°„ì€ 0 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.' })
  estimatedTimeMinutes?: number;

  @ApiPropertyOptional({
    description: 'ê¸°ë¡ëœ ì†Œìš” ì‹œê°„ (ë¶„ ë‹¨ìœ„)',
    example: 320,
    minimum: 0,
  })
  @IsOptional()
  @IsInt({ message: 'ê¸°ë¡ëœ ì‹œê°„ì€ ì •ìˆ˜ì—¬ì•¼ í•©ë‹ˆë‹¤.' })
  @Min(0, { message: 'ê¸°ë¡ëœ ì‹œê°„ì€ 0 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.' })
  loggedTimeMinutes?: number;
}
</file>

<file path="backend/src/modules/tasks/tasks.controller.ts">
import {
  Controller,
  Get,
  Post,
  Body,
  Patch,
  Param,
  Delete,
  Query,
  UseGuards,
  ParseUUIDPipe,
  HttpCode,
  HttpStatus,
} from '@nestjs/common';
import { Throttle } from '@nestjs/throttler';
import {
  ApiTags,
  ApiOperation,
  ApiResponse,
  ApiBearerAuth,
  ApiParam,
  ApiQuery,
} from '@nestjs/swagger';

import { TasksService } from './tasks.service';
import { JwtAuthGuard } from '../auth/guards/jwt-auth.guard';
import { CurrentUser } from '../auth/decorators/current-user.decorator';
import { 
  CreateTaskDto, 
  UpdateTaskDto, 
  TaskQueryDto,
  UpdateTaskDetailDto
} from './dto/task.dto';
import { 
  TaskStatus, 
  Priority 
} from '@workly/shared';

@ApiTags('Tasks')
@Controller('tasks')
@UseGuards(JwtAuthGuard)
@ApiBearerAuth()
export class TasksController {
  constructor(private readonly tasksService: TasksService) {}

  // íƒœìŠ¤í¬ ìƒì„±
  @Post()
  @Throttle({ default: { limit: 20, ttl: 60000 } }) // 1ë¶„ì— 20ê°œ ìƒì„± ì œí•œ
  @ApiOperation({ summary: 'ìƒˆ íƒœìŠ¤í¬ ìƒì„±' })
  @ApiResponse({
    status: 201,
    description: 'íƒœìŠ¤í¬ê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.',
  })
  @ApiResponse({
    status: 400,
    description: 'ì˜ëª»ëœ ìš”ì²­ ë°ì´í„°',
  })
  @ApiResponse({
    status: 403,
    description: 'íƒœìŠ¤í¬ ìƒì„± ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.',
  })
  async create(
    @Body() createTaskDto: CreateTaskDto,
    @CurrentUser('id') userId: string,
  ) {
    return this.tasksService.create(createTaskDto, userId);
  }

  // íƒœìŠ¤í¬ ëª©ë¡ ì¡°íšŒ
  @Get()
  @ApiOperation({ summary: 'íƒœìŠ¤í¬ ëª©ë¡ ì¡°íšŒ (í•„í„°ë§, ì •ë ¬, í˜ì´ì§• ì§€ì›)' })
  @ApiResponse({
    status: 200,
    description: 'íƒœìŠ¤í¬ ëª©ë¡ì´ ì„±ê³µì ìœ¼ë¡œ ì¡°íšŒë˜ì—ˆìŠµë‹ˆë‹¤.',
  })
  async findAll(
    @Query() query: TaskQueryDto,
    @CurrentUser('id') userId: string,
  ) {
    return this.tasksService.findAll(query, userId);
  }

  // ë‚´ íƒœìŠ¤í¬ ì¡°íšŒ (GTD ì»¨í…ìŠ¤íŠ¸ë³„)
  @Get('my/:context?')
  @ApiOperation({ summary: 'ë‚´ íƒœìŠ¤í¬ ì¡°íšŒ (GTD ì»¨í…ìŠ¤íŠ¸ë³„)' })
  @ApiParam({
    name: 'context',
    description: 'GTD ì»¨í…ìŠ¤íŠ¸',
    enum: ['inbox', 'next', 'waiting', 'someday'],
    required: false,
  })
  @ApiResponse({
    status: 200,
    description: 'ë‚´ íƒœìŠ¤í¬ ëª©ë¡ì´ ì„±ê³µì ìœ¼ë¡œ ì¡°íšŒë˜ì—ˆìŠµë‹ˆë‹¤.',
  })
  async getMyTasks(
    @Param('context') context: 'inbox' | 'next' | 'waiting' | 'someday' | undefined,
    @CurrentUser('id') userId: string,
  ) {
    return this.tasksService.getMyTasks(userId, context);
  }

  // GTD ìŠ¤ë§ˆíŠ¸ í•„í„° ê¸°ë°˜ íƒœìŠ¤í¬ ì¡°íšŒ
  @Get('filter/:filter')
  @ApiOperation({ summary: 'GTD ìŠ¤ë§ˆíŠ¸ í•„í„° ê¸°ë°˜ íƒœìŠ¤í¬ ì¡°íšŒ' })
  @ApiParam({
    name: 'filter',
    description: 'GTD ìŠ¤ë§ˆíŠ¸ í•„í„°',
    enum: ['today', 'completed', 'all'],
  })
  @ApiResponse({
    status: 200,
    description: 'í•„í„°ë§ëœ íƒœìŠ¤í¬ ëª©ë¡ì´ ì„±ê³µì ìœ¼ë¡œ ì¡°íšŒë˜ì—ˆìŠµë‹ˆë‹¤.',
  })
  async getSmartFilteredTasks(
    @Param('filter') filter: 'today' | 'completed' | 'all',
    @CurrentUser('id') userId: string,
  ) {
    return this.tasksService.getSmartFilteredTasks(userId, filter);
  }

  // íŠ¹ì • íƒœìŠ¤í¬ ì¡°íšŒ
  @Get(':id')
  @ApiOperation({ summary: 'íŠ¹ì • íƒœìŠ¤í¬ ìƒì„¸ ì¡°íšŒ' })
  @ApiParam({
    name: 'id',
    description: 'íƒœìŠ¤í¬ ID',
    type: 'string',
    format: 'uuid',
  })
  @ApiResponse({
    status: 200,
    description: 'íƒœìŠ¤í¬ ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ì¡°íšŒë˜ì—ˆìŠµë‹ˆë‹¤.',
  })
  @ApiResponse({
    status: 404,
    description: 'íƒœìŠ¤í¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
  })
  @ApiResponse({
    status: 403,
    description: 'íƒœìŠ¤í¬ì— ì ‘ê·¼í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.',
  })
  async findOne(
    @Param('id', ParseUUIDPipe) id: string,
    @CurrentUser('id') userId: string,
  ) {
    return this.tasksService.findOne(id, userId);
  }

  // íƒœìŠ¤í¬ ì •ë³´ ìˆ˜ì •
  @Patch(':id')
  @ApiOperation({ summary: 'íƒœìŠ¤í¬ ì •ë³´ ìˆ˜ì •' })
  @ApiParam({
    name: 'id',
    description: 'íƒœìŠ¤í¬ ID',
    type: 'string',
    format: 'uuid',
  })
  @ApiResponse({
    status: 200,
    description: 'íƒœìŠ¤í¬ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.',
  })
  @ApiResponse({
    status: 404,
    description: 'íƒœìŠ¤í¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
  })
  @ApiResponse({
    status: 403,
    description: 'íƒœìŠ¤í¬ë¥¼ ìˆ˜ì •í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.',
  })
  async update(
    @Param('id', ParseUUIDPipe) id: string,
    @Body() updateTaskDto: UpdateTaskDto,
    @CurrentUser('id') userId: string,
  ) {
    return this.tasksService.update(id, updateTaskDto, userId);
  }

  // íƒœìŠ¤í¬ ìƒì„¸ ì •ë³´ ìˆ˜ì • (ë§ˆí¬ë‹¤ìš´, ì²´í¬ë¦¬ìŠ¤íŠ¸, ê´€ê³„, ìœ„í‚¤ ë ˆí¼ëŸ°ìŠ¤, ì‹œê°„ ê´€ë¦¬)
  @Patch(':id/detail')
  @ApiOperation({ summary: 'íƒœìŠ¤í¬ ìƒì„¸ ì •ë³´ ìˆ˜ì • (Notion ìŠ¤íƒ€ì¼ ëª¨ë‹¬ìš©)' })
  @ApiParam({
    name: 'id',
    description: 'íƒœìŠ¤í¬ ID',
    type: 'string',
    format: 'uuid',
  })
  @ApiResponse({
    status: 200,
    description: 'íƒœìŠ¤í¬ ìƒì„¸ ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.',
  })
  @ApiResponse({
    status: 404,
    description: 'íƒœìŠ¤í¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
  })
  @ApiResponse({
    status: 403,
    description: 'íƒœìŠ¤í¬ë¥¼ ìˆ˜ì •í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.',
  })
  async updateTaskDetail(
    @Param('id', ParseUUIDPipe) id: string,
    @Body() updateTaskDetailDto: UpdateTaskDetailDto,
    @CurrentUser('id') userId: string,
  ) {
    return this.tasksService.updateTaskDetail(id, updateTaskDetailDto, userId);
  }

  // íƒœìŠ¤í¬ ìƒíƒœ ë³€ê²½
  @Patch(':id/status')
  @HttpCode(HttpStatus.OK)
  @ApiOperation({ summary: 'íƒœìŠ¤í¬ ìƒíƒœ ë³€ê²½' })
  @ApiParam({
    name: 'id',
    description: 'íƒœìŠ¤í¬ ID',
    type: 'string',
    format: 'uuid',
  })
  @ApiQuery({
    name: 'status',
    description: 'ìƒˆë¡œìš´ ìƒíƒœ',
    enum: TaskStatus,
  })
  @ApiResponse({
    status: 200,
    description: 'íƒœìŠ¤í¬ ìƒíƒœê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.',
  })
  async updateStatus(
    @Param('id', ParseUUIDPipe) id: string,
    @Query('status') status: TaskStatus,
    @CurrentUser('id') userId: string,
  ) {
    return this.tasksService.updateStatus(id, status, userId);
  }

  // íƒœìŠ¤í¬ ìš°ì„ ìˆœìœ„ ë³€ê²½
  @Patch(':id/priority')
  @HttpCode(HttpStatus.OK)
  @ApiOperation({ summary: 'íƒœìŠ¤í¬ ìš°ì„ ìˆœìœ„ ë³€ê²½' })
  @ApiParam({
    name: 'id',
    description: 'íƒœìŠ¤í¬ ID',
    type: 'string',
    format: 'uuid',
  })
  @ApiQuery({
    name: 'priority',
    description: 'ìƒˆë¡œìš´ ìš°ì„ ìˆœìœ„',
    enum: Priority,
  })
  @ApiResponse({
    status: 200,
    description: 'íƒœìŠ¤í¬ ìš°ì„ ìˆœìœ„ê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.',
  })
  async updatePriority(
    @Param('id', ParseUUIDPipe) id: string,
    @Query('priority') priority: Priority,
    @CurrentUser('id') userId: string,
  ) {
    return this.tasksService.updatePriority(id, priority, userId);
  }

  // íƒœìŠ¤í¬ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
  @Patch(':id/progress')
  @HttpCode(HttpStatus.OK)
  @ApiOperation({ summary: 'íƒœìŠ¤í¬ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸' })
  @ApiParam({
    name: 'id',
    description: 'íƒœìŠ¤í¬ ID',
    type: 'string',
    format: 'uuid',
  })
  @ApiQuery({
    name: 'progress',
    description: 'ì§„í–‰ë¥  (0-100)',
    type: 'number',
  })
  @ApiResponse({
    status: 200,
    description: 'íƒœìŠ¤í¬ ì§„í–‰ë¥ ì´ ì„±ê³µì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.',
  })
  async updateProgress(
    @Param('id', ParseUUIDPipe) id: string,
    @Query('progress') progress: number,
    @CurrentUser('id') userId: string,
  ) {
    return this.tasksService.updateProgress(id, progress, userId);
  }

  // íƒœìŠ¤í¬ ì‚­ì œ
  @Delete(':id')
  @HttpCode(HttpStatus.NO_CONTENT)
  @ApiOperation({ summary: 'íƒœìŠ¤í¬ ì‚­ì œ' })
  @ApiParam({
    name: 'id',
    description: 'íƒœìŠ¤í¬ ID',
    type: 'string',
    format: 'uuid',
  })
  @ApiResponse({
    status: 204,
    description: 'íƒœìŠ¤í¬ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.',
  })
  @ApiResponse({
    status: 404,
    description: 'íƒœìŠ¤í¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
  })
  @ApiResponse({
    status: 403,
    description: 'íƒœìŠ¤í¬ë¥¼ ì‚­ì œí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.',
  })
  @ApiResponse({
    status: 400,
    description: 'ì˜ì¡´ì„±ì´ ìˆëŠ” íƒœìŠ¤í¬ëŠ” ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
  })
  async remove(
    @Param('id', ParseUUIDPipe) id: string,
    @CurrentUser('id') userId: string,
  ) {
    return this.tasksService.remove(id, userId);
  }
}
</file>

<file path="backend/src/modules/tasks/tasks.service.ts">
import { 
  Injectable, 
  NotFoundException, 
  ForbiddenException,
  BadRequestException,
  Inject,
  forwardRef
} from '@nestjs/common';
import { InjectRepository } from '@nestjs/typeorm';
import { Repository, FindOptionsWhere, In } from 'typeorm';
import { Task } from '../../database/entities/task.entity';
import { TaskLabel } from '../../database/entities/task-label.entity';
import { TaskDependency } from '../../database/entities/task-dependency.entity';
import { User } from '../../database/entities/user.entity';
import { Project } from '../../database/entities/project.entity';
// import { WebSocketGateway as WSGateway } from '../websocket/websocket.gateway';
import { 
  CreateTaskDto, 
  UpdateTaskDto, 
  TaskQueryDto,
  CreateTaskLabelDto,
  UpdateTaskLabelDto,
  UpdateTaskDetailDto
} from './dto/task.dto';
import { 
  TaskStatus, 
  Priority, 
  TaskType,
  PaginatedResponse 
} from '@workly/shared';

@Injectable()
export class TasksService {
  constructor(
    @InjectRepository(Task)
    private taskRepository: Repository<Task>,
    @InjectRepository(TaskLabel)
    private taskLabelRepository: Repository<TaskLabel>,
    @InjectRepository(TaskDependency)
    private taskDependencyRepository: Repository<TaskDependency>,
    @InjectRepository(Project)
    private projectRepository: Repository<Project>,
    // @Inject(forwardRef(() => WSGateway))
    // private webSocketGateway: WSGateway,
  ) {}

  // íƒœìŠ¤í¬ ìƒì„±
  async create(createTaskDto: CreateTaskDto, userId: string): Promise<Task> {
    const {
      title,
      description,
      projectId,
      assigneeId,
      parentTaskId,
      priority = 'medium',
      type = 'task',
      dueDate,
      startDate,
      estimatedHours,
      tags = [],
      labelIds = [],
      customFields = {},
    } = createTaskDto;

    // í”„ë¡œì íŠ¸ ì¡´ì¬ ë° ê¶Œí•œ í™•ì¸
    if (projectId) {
      const project = await this.projectRepository.findOne({
        where: { id: projectId },
        relations: ['members'],
      });

      if (!project) {
        throw new NotFoundException('í”„ë¡œì íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
      }

      // í”„ë¡œì íŠ¸ ë©¤ë²„ì¸ì§€ í™•ì¸
      const isMember = project.members.some(member => member.userId === userId);
      if (!isMember && project.ownerId !== userId) {
        throw new ForbiddenException('í•´ë‹¹ í”„ë¡œì íŠ¸ì— íƒœìŠ¤í¬ë¥¼ ìƒì„±í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.');
      }
    }

    // ë¶€ëª¨ íƒœìŠ¤í¬ í™•ì¸
    let parentTask: Task | null = null;
    if (parentTaskId) {
      parentTask = await this.taskRepository.findOne({
        where: { id: parentTaskId },
        relations: ['project'],
      });

      if (!parentTask) {
        throw new NotFoundException('ë¶€ëª¨ íƒœìŠ¤í¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
      }

      // ë¶€ëª¨ íƒœìŠ¤í¬ì™€ ê°™ì€ í”„ë¡œì íŠ¸ì¸ì§€ í™•ì¸
      if (projectId && parentTask.projectId !== projectId) {
        throw new BadRequestException('ë¶€ëª¨ íƒœìŠ¤í¬ì™€ ê°™ì€ í”„ë¡œì íŠ¸ì— ì†í•´ì•¼ í•©ë‹ˆë‹¤.');
      }
    }

    // ë ˆì´ë¸” í™•ì¸
    let labels: TaskLabel[] = [];
    if (labelIds.length > 0) {
      labels = await this.taskLabelRepository.findBy({
        id: In(labelIds),
      });

      if (labels.length !== labelIds.length) {
        throw new BadRequestException('ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë ˆì´ë¸”ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.');
      }
    }

    // íƒœìŠ¤í¬ ìƒì„±
    const task = this.taskRepository.create({
      title,
      description,
      status: 'todo',
      priority,
      type,
      dueDate: dueDate ? new Date(dueDate) : null,
      startDate: startDate ? new Date(startDate) : null,
      projectId,
      assigneeId: assigneeId || userId,
      reporterId: userId,
      parentTaskId,
      estimatedHours,
      tags,
      customFields,
      labels,
    } as any);

    const savedTask = await this.taskRepository.save(task) as unknown as Task;

    // ê´€ê³„ í¬í•¨í•˜ì—¬ ë°˜í™˜
    const newTask = await this.taskRepository.findOne({
      where: { id: savedTask.id },
      relations: [
        'project',
        'assignee',
        'reporter',
        'parentTask',
        'subtasks',
        'labels',
        'comments',
        'dependencies',
        'dependents',
        'watchers',
        'timeEntries'
      ],
    });

    // ì‹¤ì‹œê°„ ì•Œë¦¼ ì „ì†¡
    if (newTask && newTask.projectId) {
      // this.webSocketGateway.broadcastProjectUpdate(
      //   newTask.projectId,
      //   { type: 'task:created', task: newTask },
      //   userId
      // );
    }

    return newTask!;
  }

  // íƒœìŠ¤í¬ ëª©ë¡ ì¡°íšŒ (í•„í„°ë§, ì •ë ¬, í˜ì´ì§•)
  async findAll(queryDto: TaskQueryDto, userId: string): Promise<PaginatedResponse<Task>> {
    const {
      page = 1,
      limit = 20,
      status,
      priority,
      type,
      projectId,
      assigneeId,
      reporterId,
      dueDate,
      search,
      sortBy = 'createdAt',
      sortOrder = 'DESC',
      includeSubtasks = false,
      labelIds,
      tags,
    } = queryDto;

    const queryBuilder = this.taskRepository.createQueryBuilder('task')
      .leftJoinAndSelect('task.project', 'project')
      .leftJoinAndSelect('task.assignee', 'assignee')
      .leftJoinAndSelect('task.reporter', 'reporter')
      .leftJoinAndSelect('task.parentTask', 'parentTask')
      .leftJoinAndSelect('task.labels', 'labels')
      .leftJoinAndSelect('task.timeEntries', 'timeEntries');

    // ê¶Œí•œ í•„í„°ë§: í• ë‹¹ëœ íƒœìŠ¤í¬, ìƒì„±í•œ íƒœìŠ¤í¬, ë˜ëŠ” ì°¸ì—¬ ì¤‘ì¸ í”„ë¡œì íŠ¸ì˜ íƒœìŠ¤í¬ë§Œ
    queryBuilder.where(`(
      task.assigneeId = :userId OR 
      task.reporterId = :userId OR 
      project.ownerId = :userId OR
      EXISTS (
        SELECT 1 FROM project_members pm 
        WHERE pm.projectId = task.projectId AND pm.userId = :userId
      )
    )`, { userId });

    // ìƒíƒœ í•„í„°
    if (status) {
      queryBuilder.andWhere('task.status = :status', { status });
    }

    // ìš°ì„ ìˆœìœ„ í•„í„°
    if (priority) {
      queryBuilder.andWhere('task.priority = :priority', { priority });
    }

    // íƒ€ì… í•„í„°
    if (type) {
      queryBuilder.andWhere('task.type = :type', { type });
    }

    // í”„ë¡œì íŠ¸ í•„í„°
    if (projectId) {
      queryBuilder.andWhere('task.projectId = :projectId', { projectId });
    }

    // ë‹´ë‹¹ì í•„í„°
    if (assigneeId) {
      queryBuilder.andWhere('task.assigneeId = :assigneeId', { assigneeId });
    }

    // ìƒì„±ì í•„í„°
    if (reporterId) {
      queryBuilder.andWhere('task.reporterId = :reporterId', { reporterId });
    }

    // ë§ˆê°ì¼ í•„í„°
    if (dueDate) {
      const targetDate = new Date(dueDate);
      const nextDay = new Date(targetDate);
      nextDay.setDate(nextDay.getDate() + 1);
      queryBuilder.andWhere('task.dueDate >= :startDate AND task.dueDate < :endDate', {
        startDate: targetDate,
        endDate: nextDay,
      });
    }

    // ê²€ìƒ‰ í•„í„°
    if (search) {
      queryBuilder.andWhere(`(
        task.title ILIKE :search OR 
        task.description ILIKE :search OR
        array_to_string(task.tags, ' ') ILIKE :search
      )`, { search: `%${search}%` });
    }

    // ë ˆì´ë¸” í•„í„°
    if (labelIds && labelIds.length > 0) {
      queryBuilder.andWhere('labels.id IN (:...labelIds)', { labelIds });
    }

    // íƒœê·¸ í•„í„°
    if (tags && tags.length > 0) {
      queryBuilder.andWhere('task.tags && :tags', { tags });
    }

    // ì„œë¸ŒíƒœìŠ¤í¬ ì œì™¸ (ê¸°ë³¸ê°’)
    if (!includeSubtasks) {
      queryBuilder.andWhere('task.parentTaskId IS NULL');
    }

    // ì •ë ¬
    const allowedSortFields = ['createdAt', 'updatedAt', 'title', 'priority', 'dueDate', 'status'];
    const sortField = allowedSortFields.includes(sortBy) ? sortBy : 'createdAt';
    queryBuilder.orderBy(`task.${sortField}`, sortOrder as 'ASC' | 'DESC');

    // í˜ì´ì§•
    const offset = (page - 1) * limit;
    queryBuilder.skip(offset).take(limit);

    // ì‹¤í–‰
    const [items, total] = await queryBuilder.getManyAndCount();

    return {
      success: true,
      data: items,
      items,
      total,
      page,
      limit,
      totalPages: Math.ceil(total / limit),
      meta: {
        page,
        limit,
        total,
        totalPages: Math.ceil(total / limit),
      },
    };
  }

  // íŠ¹ì • íƒœìŠ¤í¬ ì¡°íšŒ
  async findOne(id: string, userId: string): Promise<Task> {
    const task = await this.taskRepository.findOne({
      where: { id },
      relations: [
        'project',
        'assignee',
        'reporter',
        'parentTask',
        'subtasks',
        'labels',
        'comments',
        'comments.author',
        'dependencies',
        'dependencies.dependsOnTask',
        'dependents',
        'dependents.dependentTask',
        'watchers',
        'timeEntries',
        'timeEntries.user'
      ],
    });

    if (!task) {
      throw new NotFoundException('íƒœìŠ¤í¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
    }

    // ê¶Œí•œ í™•ì¸
    await this.checkTaskAccess(task, userId);

    return task;
  }

  // íƒœìŠ¤í¬ ìˆ˜ì •
  async update(id: string, updateTaskDto: UpdateTaskDto, userId: string): Promise<Task> {
    const task = await this.findOne(id, userId);

    // ìˆ˜ì • ê¶Œí•œ í™•ì¸ (ë‹´ë‹¹ì, ìƒì„±ì, í”„ë¡œì íŠ¸ ì†Œìœ ìë§Œ ìˆ˜ì • ê°€ëŠ¥)
    if (task.assigneeId !== userId && task.reporterId !== userId && 
        task.project?.ownerId !== userId) {
      throw new ForbiddenException('íƒœìŠ¤í¬ë¥¼ ìˆ˜ì •í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.');
    }

    const {
      title,
      description,
      status,
      priority,
      type,
      dueDate,
      startDate,
      estimatedHours,
      progress,
      tags,
      customFields,
      labelIds,
    } = updateTaskDto;

    // ì—…ë°ì´íŠ¸í•  í•„ë“œë“¤
    if (title !== undefined) task.title = title;
    if (description !== undefined) task.description = description;
    if (status !== undefined) {
      task.status = status;
      // ì™„ë£Œ ìƒíƒœ ë³€ê²½ ì‹œ ì™„ë£Œ ì‹œê°„ ì„¤ì •
      if (status === TaskStatus.COMPLETED && !task.completedAt) {
        task.completedAt = new Date();
      } else if (status !== TaskStatus.COMPLETED) {
        task.completedAt = undefined;
      }
    }
    if (priority !== undefined) task.priority = priority;
    if (type !== undefined) task.type = type;
    if (dueDate !== undefined) task.dueDate = dueDate ? new Date(dueDate) : undefined;
    if (startDate !== undefined) task.startDate = startDate ? new Date(startDate) : undefined;
    if (estimatedHours !== undefined) task.estimatedHours = estimatedHours;
    if (progress !== undefined) task.progress = Math.max(0, Math.min(100, progress));
    if (tags !== undefined) task.tags = tags;
    if (customFields !== undefined) task.customFields = { ...task.customFields, ...customFields };

    // ë ˆì´ë¸” ì—…ë°ì´íŠ¸
    if (labelIds !== undefined) {
      const labels = await this.taskLabelRepository.findBy({
        id: In(labelIds),
      });
      task.labels = labels;
    }

    const updatedTask = await this.taskRepository.save(task);
    const finalTask = await this.findOne(updatedTask.id, userId);

    // ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ì•Œë¦¼
    // this.webSocketGateway.broadcastTaskUpdate(
    //   finalTask.id,
    //   { type: 'task:updated', task: finalTask },
    //   userId
    // );

    // í”„ë¡œì íŠ¸ ë£¸ì—ë„ ì•Œë¦¼
    // if (finalTask.projectId) {
    //   this.webSocketGateway.broadcastProjectUpdate(
    //     finalTask.projectId,
    //     { type: 'task:updated', task: finalTask },
    //     userId
    //   );
    // }

    return finalTask;
  }

  // íƒœìŠ¤í¬ ìƒì„¸ ì •ë³´ ì—…ë°ì´íŠ¸ (ë§ˆí¬ë‹¤ìš´, ì²´í¬ë¦¬ìŠ¤íŠ¸, ê´€ê³„, ìœ„í‚¤ ë ˆí¼ëŸ°ìŠ¤, ì‹œê°„ ê´€ë¦¬)
  async updateTaskDetail(id: string, updateTaskDetailDto: UpdateTaskDetailDto, userId: string): Promise<Task> {
    const task = await this.findOne(id, userId);

    // ìˆ˜ì • ê¶Œí•œ í™•ì¸
    if (task.assigneeId !== userId && task.reporterId !== userId && 
        task.project?.ownerId !== userId) {
      throw new ForbiddenException('íƒœìŠ¤í¬ë¥¼ ìˆ˜ì •í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.');
    }

    const {
      descriptionMarkdown,
      checklist,
      relationships,
      wikiReferences,
      estimatedTimeMinutes,
      loggedTimeMinutes,
      ...basicFields
    } = updateTaskDetailDto;

    // ê¸°ë³¸ í•„ë“œ ì—…ë°ì´íŠ¸ (ê¸°ì¡´ update ë©”ì„œë“œ ë¡œì§ ì¬ì‚¬ìš©)
    Object.assign(task, basicFields);

    // ìƒˆë¡œìš´ ìƒì„¸ í•„ë“œë“¤ ì—…ë°ì´íŠ¸
    if (descriptionMarkdown !== undefined) {
      task.descriptionMarkdown = descriptionMarkdown;
    }

    if (checklist !== undefined) {
      // ì²´í¬ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œë“¤ì˜ IDê°€ ì—†ìœ¼ë©´ ìƒì„±
      task.checklist = checklist.map((item, index) => ({
        id: item.id || `checklist-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
        text: item.text,
        completed: item.completed,
        order: item.order !== undefined ? item.order : index
      }));
    }

    if (relationships !== undefined) {
      // ê´€ê³„ë“¤ì˜ IDê°€ ì—†ìœ¼ë©´ ìƒì„±
      task.relationships = relationships.map(rel => ({
        id: rel.id || `rel-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
        targetTaskId: rel.targetTaskId,
        type: rel.type
      }));
    }

    if (wikiReferences !== undefined) {
      // ìœ„í‚¤ ë ˆí¼ëŸ°ìŠ¤ë“¤ì˜ IDê°€ ì—†ìœ¼ë©´ ìƒì„±
      task.wikiReferences = wikiReferences.map(wiki => ({
        id: wiki.id || `wiki-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
        title: wiki.title,
        url: wiki.url,
        description: wiki.description
      }));
    }

    if (estimatedTimeMinutes !== undefined) {
      task.estimatedTimeMinutes = estimatedTimeMinutes;
    }

    if (loggedTimeMinutes !== undefined) {
      task.loggedTimeMinutes = loggedTimeMinutes;
    }

    // ìƒíƒœ ê´€ë ¨ ë¡œì§ (ê¸°ì¡´ê³¼ ë™ì¼)
    if (updateTaskDetailDto.status !== undefined) {
      task.status = updateTaskDetailDto.status;
      if (updateTaskDetailDto.status === TaskStatus.COMPLETED && !task.completedAt) {
        task.completedAt = new Date();
      } else if (updateTaskDetailDto.status !== TaskStatus.COMPLETED) {
        task.completedAt = undefined;
      }
    }

    // ë ˆì´ë¸” ì—…ë°ì´íŠ¸ (ê¸°ì¡´ê³¼ ë™ì¼)
    if (updateTaskDetailDto.labelIds !== undefined) {
      const labels = await this.taskLabelRepository.findBy({
        id: In(updateTaskDetailDto.labelIds),
      });
      task.labels = labels;
    }

    const updatedTask = await this.taskRepository.save(task);
    const finalTask = await this.findOne(updatedTask.id, userId);

    return finalTask;
  }

  // íƒœìŠ¤í¬ ì‚­ì œ
  async remove(id: string, userId: string): Promise<void> {
    const task = await this.findOne(id, userId);

    // ì‚­ì œ ê¶Œí•œ í™•ì¸ (ìƒì„±ì, í”„ë¡œì íŠ¸ ì†Œìœ ìë§Œ ì‚­ì œ ê°€ëŠ¥)
    if (task.reporterId !== userId && task.project?.ownerId !== userId) {
      throw new ForbiddenException('íƒœìŠ¤í¬ë¥¼ ì‚­ì œí•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.');
    }

    // ì˜ì¡´ì„±ì´ ìˆëŠ” íƒœìŠ¤í¬ëŠ” ì‚­ì œ ë¶ˆê°€
    if (task.dependents && task.dependents.length > 0) {
      throw new BadRequestException('ë‹¤ë¥¸ íƒœìŠ¤í¬ê°€ ì˜ì¡´í•˜ê³  ìˆëŠ” íƒœìŠ¤í¬ëŠ” ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
    }

    await this.taskRepository.remove(task);
  }

  // íƒœìŠ¤í¬ ìƒíƒœ ë³€ê²½
  async updateStatus(id: string, status: TaskStatus, userId: string): Promise<Task> {
    return this.update(id, { status }, userId);
  }

  // íƒœìŠ¤í¬ ìš°ì„ ìˆœìœ„ ë³€ê²½
  async updatePriority(id: string, priority: Priority, userId: string): Promise<Task> {
    return this.update(id, { priority }, userId);
  }

  // íƒœìŠ¤í¬ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
  async updateProgress(id: string, progress: number, userId: string): Promise<Task> {
    return this.update(id, { progress }, userId);
  }

  // ë‚´ íƒœìŠ¤í¬ ì¡°íšŒ (GTD ë°©ì‹)
  async getMyTasks(userId: string, context?: 'inbox' | 'next' | 'waiting' | 'someday'): Promise<Task[]> {
    const queryBuilder = this.taskRepository.createQueryBuilder('task')
      .leftJoinAndSelect('task.project', 'project')
      .leftJoinAndSelect('task.labels', 'labels')
      .where('task.assigneeId = :userId', { userId })
      .andWhere('task.status != :doneStatus', { doneStatus: 'done' });

    switch (context) {
      case 'inbox':
        // ì•„ì§ ë¶„ë¥˜ë˜ì§€ ì•Šì€ íƒœìŠ¤í¬ë“¤
        queryBuilder.andWhere('task.status = :todoStatus', { todoStatus: 'todo' })
          .andWhere('task.startDate IS NULL OR task.startDate <= :now', { now: new Date() });
        break;
      
      case 'next':
        // ë‹¤ìŒì— ì²˜ë¦¬í•  ì•¡ì…˜ ì•„ì´í…œë“¤
        queryBuilder.andWhere('task.status IN (:...nextStatuses)', { 
          nextStatuses: ['todo', 'in_progress'] 
        })
          .andWhere('(task.startDate IS NULL OR task.startDate <= :now)', { now: new Date() })
          .andWhere('task.priority IN (:...priorities)', { priorities: ['high', 'medium'] });
        break;
      
      case 'waiting':
        // ë‹¤ë¥¸ ì‚¬ëŒì´ë‚˜ ì™¸ë¶€ ìš”ì¸ì„ ê¸°ë‹¤ë¦¬ëŠ” íƒœìŠ¤í¬ë“¤
        queryBuilder.andWhere('task.status = :waitingStatus', { waitingStatus: 'blocked' });
        break;
      
      case 'someday':
        // ì–¸ì  ê°€ í•  ì¼ë“¤ (ë‚®ì€ ìš°ì„ ìˆœìœ„)
        queryBuilder.andWhere('task.priority = :lowPriority', { lowPriority: 'low' })
          .andWhere('(task.dueDate IS NULL OR task.dueDate > :futureDate)', { 
            futureDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000) // 30ì¼ í›„
          });
        break;
    }

    return queryBuilder
      .orderBy('task.priority', 'DESC')
      .addOrderBy('task.dueDate', 'ASC')
      .addOrderBy('task.createdAt', 'ASC')
      .getMany();
  }

  // GTD ìŠ¤ë§ˆíŠ¸ í•„í„° ê¸°ë°˜ íƒœìŠ¤í¬ ì¡°íšŒ
  async getSmartFilteredTasks(userId: string, filter: 'today' | 'completed' | 'all'): Promise<Task[]> {
    const queryBuilder = this.taskRepository.createQueryBuilder('task')
      .leftJoinAndSelect('task.project', 'project')
      .leftJoinAndSelect('task.assignee', 'assignee')
      .leftJoinAndSelect('task.reporter', 'reporter')
      .leftJoinAndSelect('task.labels', 'labels')
      .where(`(
        task.assigneeId = :userId OR 
        task.reporterId = :userId OR 
        project.ownerId = :userId OR
        EXISTS (
          SELECT 1 FROM project_members pm 
          WHERE pm.projectId = task.projectId AND pm.userId = :userId
        )
      )`, { userId });

    switch (filter) {
      case 'today':
        // ì˜¤ëŠ˜ í•  ì¼: ì˜¤ëŠ˜ ë§ˆê°ì´ê±°ë‚˜ ì—°ì²´ëœ ë¯¸ì™„ë£Œ íƒœìŠ¤í¬ë“¤
        const today = new Date();
        today.setHours(23, 59, 59, 999);
        const startOfToday = new Date();
        startOfToday.setHours(0, 0, 0, 0);
        
        queryBuilder.andWhere('task.status != :completedStatus', { completedStatus: 'done' })
          .andWhere(`(
            (task.dueDate IS NOT NULL AND task.dueDate <= :today) OR
            (task.dueDate IS NULL AND task.status = :inProgressStatus) OR
            (task.priority = :highPriority AND task.status = :todoStatus)
          )`, { 
            today, 
            inProgressStatus: 'in_progress',
            highPriority: 'high',
            todoStatus: 'todo'
          });
        break;
      
      case 'completed':
        // ì™„ë£Œëœ íƒœìŠ¤í¬ë“¤
        queryBuilder.andWhere('task.status = :completedStatus', { completedStatus: 'done' })
          .orderBy('task.completedAt', 'DESC');
        break;
      
      case 'all':
        // ëª¨ë“  íƒœìŠ¤í¬ë“¤ (ê¸°ë³¸ ì •ë ¬)
        break;
    }

    // ê¸°ë³¸ ì •ë ¬: ìš°ì„ ìˆœìœ„ > ë§ˆê°ì¼ > ìƒì„±ì¼
    if (filter !== 'completed') {
      queryBuilder
        .orderBy('task.priority', 'DESC')
        .addOrderBy('task.dueDate', 'ASC')
        .addOrderBy('task.createdAt', 'ASC');
    }

    return queryBuilder.getMany();
  }

  // ê¶Œí•œ í™•ì¸ í—¬í¼ ë©”ì„œë“œ
  private async checkTaskAccess(task: Task, userId: string): Promise<void> {
    const hasAccess = (
      task.assigneeId === userId ||
      task.reporterId === userId ||
      task.project?.ownerId === userId ||
      (task.project && task.projectId && await this.isProjectMember(task.projectId, userId))
    );

    if (!hasAccess) {
      throw new ForbiddenException('íƒœìŠ¤í¬ì— ì ‘ê·¼í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.');
    }
  }

  // í”„ë¡œì íŠ¸ ë©¤ë²„ì¸ì§€ í™•ì¸
  private async isProjectMember(projectId: string, userId: string): Promise<boolean> {
    const project = await this.projectRepository.findOne({
      where: { id: projectId },
      relations: ['members'],
    });

    return project?.members.some(member => member.userId === userId) || false;
  }
}
</file>

<file path="backend/src/app.module.ts">
import { Module, MiddlewareConsumer } from '@nestjs/common';
import { ConfigModule, ConfigService } from '@nestjs/config';
import { TypeOrmModule } from '@nestjs/typeorm';
import { ThrottlerModule } from '@nestjs/throttler';
import { APP_GUARD } from '@nestjs/core';

import { getDatabaseConfig } from './config/database.config';
import { AuthModule } from './modules/auth/auth.module';
import { UsersModule } from './modules/users/users.module';
import { ProjectsModule } from './modules/projects/projects.module';
import { TasksModule } from './modules/tasks/tasks.module';
import { WebSocketModule } from './modules/websocket/websocket.module';
import { AdminModule } from './modules/admin/admin.module';
import { AuthGuard } from './modules/auth/guards/auth.guard';
import { CustomThrottlerGuard } from './modules/auth/guards/throttle.guard';
import { AuthMiddleware } from './modules/auth/middleware/auth.middleware';
import { AuditMiddleware } from './modules/auth/middleware/audit.middleware';

@Module({
  imports: [
    // í™˜ê²½ ì„¤ì • ëª¨ë“ˆ
    ConfigModule.forRoot({
      isGlobal: true,
      envFilePath: ['.env', '.env.local'],
    }),

    // Rate Limiting ëª¨ë“ˆ
    ThrottlerModule.forRoot({
      throttlers: [
        {
          name: 'short',
          ttl: 1000, // 1ì´ˆ
          limit: 10, // 10ê°œ ìš”ì²­
        },
        {
          name: 'medium',
          ttl: 60000, // 1ë¶„
          limit: 100, // 100ê°œ ìš”ì²­
        },
        {
          name: 'long',
          ttl: 3600000, // 1ì‹œê°„
          limit: 1000, // 1000ê°œ ìš”ì²­
        },
      ],
    }),

    // ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë“ˆ
    TypeOrmModule.forRootAsync({
      imports: [ConfigModule],
      useFactory: getDatabaseConfig,
      inject: [ConfigService],
    }),

    // ê¸°ëŠ¥ ëª¨ë“ˆë“¤
    AuthModule,
    UsersModule,
    ProjectsModule,
    TasksModule,
    WebSocketModule,
    AdminModule,
  ],
  controllers: [],
  providers: [
    // ê¸€ë¡œë²Œ ê°€ë“œ ì„¤ì •
    {
      provide: APP_GUARD,
      useClass: AuthGuard,
    },
    {
      provide: APP_GUARD,
      useClass: CustomThrottlerGuard,
    },
  ],
})
export class AppModule {
  configure(consumer: MiddlewareConsumer) {
    consumer
      .apply(AuthMiddleware, AuditMiddleware)
      .forRoutes('*'); // ëª¨ë“  ë¼ìš°íŠ¸ì— ì ìš©
  }
}
</file>

<file path="frontend/src/app/auth/callback/page.tsx">
'use client';

export const dynamic = 'force-dynamic'

import React, { useEffect, useState } from 'react';
import { useRouter, useSearchParams } from 'next/navigation';
import { CheckCircle, XCircle, Loader2 } from 'lucide-react';
import { saveTokens, refreshUserProfile } from '@/lib/auth';

export default function AuthCallbackPage() {
  const router = useRouter();
  const searchParams = useSearchParams();
  const [status, setStatus] = useState<'loading' | 'success' | 'error'>('loading');
  const [message, setMessage] = useState<string>('');

  useEffect(() => {
    const handleCallback = async () => {
      try {
        // URLì—ì„œ í† í° ë˜ëŠ” ìƒíƒœ ì •ë³´ í™•ì¸
        const accessToken = searchParams.get('accessToken');
        const refreshToken = searchParams.get('refreshToken');
        const error = searchParams.get('error');
        const callbackStatus = searchParams.get('status');

        if (error) {
          throw new Error(getErrorMessage(error));
        }

        if (accessToken && refreshToken) {
          // í† í°ì´ URLì— ì§ì ‘ í¬í•¨ëœ ê²½ìš°
          saveTokens(
            decodeURIComponent(accessToken),
            decodeURIComponent(refreshToken)
          );
          
          // ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°
          await refreshUserProfile();
          
          setStatus('success');
          setMessage('ë¡œê·¸ì¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ëŒ€ì‹œë³´ë“œë¡œ ì´ë™í•©ë‹ˆë‹¤.');
          
          // 3ì´ˆ í›„ í™ˆí˜ì´ì§€ë¡œ ì´ë™
          setTimeout(() => {
            router.push('/');
          }, 3000);
          
        } else if (callbackStatus === 'success') {
          // OAuth ì¸ì¦ì€ ì„±ê³µí–ˆì§€ë§Œ í† í°ì´ URLì— ì—†ëŠ” ê²½ìš°
          // ë°±ì—”ë“œì—ì„œ ì¶”ê°€ ì²˜ë¦¬ í•„ìš”
          setStatus('success');
          setMessage('ì¸ì¦ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ëŒ€ì‹œë³´ë“œë¡œ ì´ë™í•©ë‹ˆë‹¤.');
          
          setTimeout(() => {
            router.push('/');
          }, 3000);
          
        } else {
          throw new Error('ì¸ì¦ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        }
        
      } catch (error) {
        console.error('OAuth ì½œë°± ì²˜ë¦¬ ì˜¤ë¥˜:', error);
        setStatus('error');
        setMessage(error instanceof Error ? error.message : 'ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        
        // 5ì´ˆ í›„ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
        setTimeout(() => {
          router.push('/auth/login?error=oauth_callback_failed');
        }, 5000);
      }
    };

    handleCallback();
  }, [router, searchParams]);

  const fetchUserInfo = async (accessToken: string) => {
    try {
      const backendUrl = process.env.NEXT_PUBLIC_BACKEND_URL || 'http://localhost:8000';
      
      const response = await fetch(`${backendUrl}/auth/profile`, {
        headers: {
          'Authorization': `Bearer ${accessToken}`,
        },
      });

      if (response.ok) {
        const userData = await response.json();
        localStorage.setItem('user', JSON.stringify(userData.user));
      }
    } catch (error) {
      console.error('ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ ì˜¤ë¥˜:', error);
      // ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ ì‹¤íŒ¨í•´ë„ ë¡œê·¸ì¸ì€ ì§„í–‰
    }
  };

  const getErrorMessage = (error: string): string => {
    switch (error) {
      case 'access_denied':
        return 'ë¡œê·¸ì¸ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.';
      case 'invalid_request':
        return 'ì˜ëª»ëœ ìš”ì²­ì…ë‹ˆë‹¤.';
      case 'server_error':
        return 'ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
      case 'temporarily_unavailable':
        return 'ì¼ì‹œì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.';
      default:
        return 'ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
    }
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4">
      <div className="w-full max-w-md mx-auto">
        <div className="bg-white rounded-2xl shadow-xl p-8 text-center">
          {/* ìƒíƒœë³„ ì•„ì´ì½˜ */}
          <div className="mb-6">
            {status === 'loading' && (
              <div className="inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full">
                <Loader2 className="w-8 h-8 text-blue-600 animate-spin" />
              </div>
            )}
            
            {status === 'success' && (
              <div className="inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full">
                <CheckCircle className="w-8 h-8 text-green-600" />
              </div>
            )}
            
            {status === 'error' && (
              <div className="inline-flex items-center justify-center w-16 h-16 bg-red-100 rounded-full">
                <XCircle className="w-8 h-8 text-red-600" />
              </div>
            )}
          </div>

          {/* ìƒíƒœë³„ ì œëª© */}
          <h1 className="text-2xl font-bold mb-4">
            {status === 'loading' && 'ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘...'}
            {status === 'success' && 'ë¡œê·¸ì¸ ì„±ê³µ!'}
            {status === 'error' && 'ë¡œê·¸ì¸ ì‹¤íŒ¨'}
          </h1>

          {/* ë©”ì‹œì§€ */}
          <p className={`text-sm mb-6 ${
            status === 'success' ? 'text-green-600' : 
            status === 'error' ? 'text-red-600' : 
            'text-gray-600'
          }`}>
            {message || (
              status === 'loading' ? 'ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”...' :
              status === 'success' ? 'ë¡œê·¸ì¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.' :
              'ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'
            )}
          </p>

          {/* ë¡œë”© ìƒíƒœì¼ ë•Œë§Œ í”„ë¡œê·¸ë ˆìŠ¤ ë°” í‘œì‹œ */}
          {status === 'loading' && (
            <div className="w-full bg-gray-200 rounded-full h-2 mb-4">
              <div className="bg-blue-600 h-2 rounded-full animate-pulse" style={{ width: '60%' }}></div>
            </div>
          )}

          {/* ì—ëŸ¬ ìƒíƒœì¼ ë•Œ ìˆ˜ë™ ì´ë™ ë²„íŠ¼ */}
          {status === 'error' && (
            <button
              onClick={() => router.push('/auth/login')}
              className="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors"
            >
              ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°
            </button>
          )}
        </div>
      </div>
    </div>
  );
}
</file>

<file path="frontend/src/app/board/page.tsx">
'use client'

export const dynamic = 'force-dynamic'

import { useState, useEffect } from 'react'
import { useRouter, useSearchParams } from 'next/navigation'
import { X, FileText, Lightbulb, FolderOpen, ClipboardList, BookOpen, Presentation } from 'lucide-react'
import Header from '@/components/layout/Header'
import UnifiedFilter from '@/components/ui/UnifiedFilter'
import MainContainer from '@/components/layout/MainContainer'
import WorklyFloatingActionButton from '@/components/ui/WorklyFloatingActionButton'
import LoginBanner from '@/components/ui/LoginBanner'
import { Button } from '@/components/ui/Button'
import MissionBoard from '@/components/board/MissionBoard'
import KnowledgeWiki from '@/components/board/KnowledgeWiki'
import ProjectShowcase from '@/components/board/ProjectShowcase'

type BoardSection = 'ì„ë¬´ ê²Œì‹œíŒ' | 'ì§€ì‹ ìœ„í‚¤' | 'í”„ë¡œì íŠ¸ ì‡¼ì¼€ì´ìŠ¤'

// ê²Œì‹œê¸€ ì‘ì„± ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸
function PostCreationModal({ 
  isOpen, 
  onClose, 
  section 
}: { 
  isOpen: boolean
  onClose: () => void
  section: BoardSection
}) {
  const [formData, setFormData] = useState({
    title: '',
    description: '',
    category: '',
    tags: ''
  })

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault()
    if (!formData.title.trim()) return

    console.log(`${section}ì— ìƒˆ ê²Œì‹œê¸€ ì‘ì„±:`, formData)
    alert(`"${formData.title}" ê²Œì‹œê¸€ì´ ${section}ì— ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!`)
    
    // í¼ ë¦¬ì…‹
    setFormData({ title: '', description: '', category: '', tags: '' })
    onClose()
  }

  if (!isOpen) return null

  const getModalContent = () => {
    switch (section) {
      case 'ì„ë¬´ ê²Œì‹œíŒ':
        return {
          icon: FileText,
          title: 'ìƒˆ ì„ë¬´ ë“±ë¡',
          description: 'í”„ë¦¬ëœì„œë‚˜ íŒ€ì›ì„ ìœ„í•œ ìƒˆë¡œìš´ ì„ë¬´ë¥¼ ë“±ë¡í•˜ì„¸ìš”',
          categoryPlaceholder: 'ê°œë°œ, ë””ìì¸, ë§ˆì¼€íŒ… ë“±',
          titlePlaceholder: 'ì„ë¬´ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”',
          descriptionPlaceholder: 'ì„ë¬´ì— ëŒ€í•œ ìƒì„¸í•œ ì„¤ëª…ì„ ì‘ì„±í•˜ì„¸ìš”'
        }
      case 'ì§€ì‹ ìœ„í‚¤':
        return {
          icon: Lightbulb,
          title: 'ìƒˆ ì§€ì‹ ë¬¸ì„œ ì‘ì„±',
          description: 'íŒ€ê³¼ ê³µìœ í•  ìœ ìš©í•œ ì§€ì‹ì´ë‚˜ ë¬¸ì„œë¥¼ ì‘ì„±í•˜ì„¸ìš”',
          categoryPlaceholder: 'Frontend, Backend, DevOps ë“±',
          titlePlaceholder: 'ë¬¸ì„œ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”',
          descriptionPlaceholder: 'ì§€ì‹ ë‚´ìš©ì„ ìƒì„¸íˆ ì‘ì„±í•˜ì„¸ìš”'
        }
      case 'í”„ë¡œì íŠ¸ ì‡¼ì¼€ì´ìŠ¤':
        return {
          icon: FolderOpen,
          title: 'ìƒˆ í”„ë¡œì íŠ¸ ì‡¼ì¼€ì´ìŠ¤',
          description: 'ì™„ì„±í•œ í”„ë¡œì íŠ¸ë¥¼ ë‹¤ë¥¸ ì‚¬ëŒë“¤ê³¼ ê³µìœ í•˜ì„¸ìš”',
          categoryPlaceholder: 'ì›¹ ê°œë°œ, ëª¨ë°”ì¼ ì•±, ì´ì»¤ë¨¸ìŠ¤ ë“±',
          titlePlaceholder: 'í”„ë¡œì íŠ¸ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”',
          descriptionPlaceholder: 'í”„ë¡œì íŠ¸ ì„¤ëª…ê³¼ ì£¼ìš” ê¸°ëŠ¥ì„ ì‘ì„±í•˜ì„¸ìš”'
        }
      default:
        return {
          icon: FileText,
          title: 'ìƒˆ ê²Œì‹œê¸€',
          description: 'ìƒˆë¡œìš´ ê²Œì‹œê¸€ì„ ì‘ì„±í•˜ì„¸ìš”',
          categoryPlaceholder: 'ì¹´í…Œê³ ë¦¬',
          titlePlaceholder: 'ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”',
          descriptionPlaceholder: 'ë‚´ìš©ì„ ì‘ì„±í•˜ì„¸ìš”'
        }
    }
  }

  const content = getModalContent()
  const Icon = content.icon

  return (
    <div className="fixed inset-0 z-50 overflow-y-auto">
      <div className="flex items-center justify-center min-h-screen p-4">
        <div className="fixed inset-0 bg-black opacity-25" onClick={onClose} />
        <div className="relative bg-white rounded-lg shadow-xl max-w-lg w-full">
          {/* í—¤ë” */}
          <div className="flex items-center justify-between p-6 border-b border-gray-200">
            <div className="flex items-center gap-3">
              <div className="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                <Icon className="w-5 h-5 text-blue-600" />
              </div>
              <div>
                <h3 className="text-lg font-semibold text-gray-900">{content.title}</h3>
                <p className="text-sm text-gray-500">{content.description}</p>
              </div>
            </div>
            <button
              onClick={onClose}
              className="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100"
            >
              <X className="w-5 h-5 text-gray-400" />
            </button>
          </div>
          
          {/* í¼ */}
          <form onSubmit={handleSubmit} className="p-6 space-y-4">
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-1">
                ì œëª© *
              </label>
              <input
                type="text"
                value={formData.title}
                onChange={(e) => setFormData(prev => ({ ...prev, title: e.target.value }))}
                className="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"
                placeholder={content.titlePlaceholder}
                required
              />
            </div>
            
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-1">
                ì¹´í…Œê³ ë¦¬
              </label>
              <input
                type="text"
                value={formData.category}
                onChange={(e) => setFormData(prev => ({ ...prev, category: e.target.value }))}
                className="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"
                placeholder={content.categoryPlaceholder}
              />
            </div>
            
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-1">
                ì„¤ëª… *
              </label>
              <textarea
                value={formData.description}
                onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}
                className="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"
                placeholder={content.descriptionPlaceholder}
                rows={4}
                required
              />
            </div>
            
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-1">
                íƒœê·¸ (ì„ íƒì‚¬í•­)
              </label>
              <input
                type="text"
                value={formData.tags}
                onChange={(e) => setFormData(prev => ({ ...prev, tags: e.target.value }))}
                className="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"
                placeholder="íƒœê·¸ë¥¼ ì‰¼í‘œë¡œ êµ¬ë¶„í•˜ì—¬ ì…ë ¥í•˜ì„¸ìš”"
              />
            </div>
            
            {/* ë²„íŠ¼ */}
            <div className="flex gap-3 pt-4">
              <Button
                type="button"
                variant="outline"
                onClick={onClose}
                className="flex-1"
              >
                ì·¨ì†Œ
              </Button>
              <Button
                type="submit"
                variant="default"
                className="flex-1"
                disabled={!formData.title.trim() || !formData.description.trim()}
              >
                ë“±ë¡í•˜ê¸°
              </Button>
            </div>
          </form>
        </div>
      </div>
    </div>
  )
}

export default function BoardPage() {
  const router = useRouter()
  const searchParams = useSearchParams()
  const [activeSection, setActiveSection] = useState<BoardSection>('ì„ë¬´ ê²Œì‹œíŒ')
  const [searchQuery, setSearchQuery] = useState('')
  const [isPostModalOpen, setIsPostModalOpen] = useState(false)
  
  // í•„í„° ì„¤ì • ìƒíƒœ
  const [showOnlyRecent, setShowOnlyRecent] = useState(false)
  const [boardSortOrder, setBoardSortOrder] = useState('latest')
  const [showOnlyMyPosts, setShowOnlyMyPosts] = useState(false)

  // ì„¹ì…˜ ì˜µì…˜ (ì•„ì´ì½˜ ë° ìƒ‰ìƒ ì¶”ê°€)
  const sectionOptions = [
    { 
      key: 'ì„ë¬´ ê²Œì‹œíŒ', 
      label: 'ì„ë¬´ ê²Œì‹œíŒ', 
      count: 8,
      icon: <ClipboardList className="w-4 h-4" />,
      color: 'blue' as const
    },
    { 
      key: 'ì§€ì‹ ìœ„í‚¤', 
      label: 'ì§€ì‹ ìœ„í‚¤', 
      count: 24,
      icon: <BookOpen className="w-4 h-4" />,
      color: 'green' as const
    },
    { 
      key: 'í”„ë¡œì íŠ¸ ì‡¼ì¼€ì´ìŠ¤', 
      label: 'í”„ë¡œì íŠ¸ ì‡¼ì¼€ì´ìŠ¤', 
      count: 12,
      icon: <Presentation className="w-4 h-4" />,
      color: 'purple' as const
    },
  ]

  const handleSectionChange = (section: string) => {
    setActiveSection(section as BoardSection)
  }

  const handlePostCreation = () => {
    setIsPostModalOpen(true)
  }

  // ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ëœ ì•¡ì…˜ ë° ì„¹ì…˜ ì²˜ë¦¬
  useEffect(() => {
    const action = searchParams.get('action')
    const section = searchParams.get('section')
    
    // ì„¹ì…˜ ë§¤ê°œë³€ìˆ˜ê°€ ìˆìœ¼ë©´ í•´ë‹¹ ì„¹ì…˜ìœ¼ë¡œ ì „í™˜
    if (section && ['ì„ë¬´ ê²Œì‹œíŒ', 'ì§€ì‹ ìœ„í‚¤', 'í”„ë¡œì íŠ¸ ì‡¼ì¼€ì´ìŠ¤'].includes(section)) {
      setActiveSection(section as BoardSection)
    }
    
    // ê²Œì‹œê¸€ ì‘ì„± ì•¡ì…˜ ì²˜ë¦¬
    if (action === 'add-post') {
      setIsPostModalOpen(true)
      // URLì—ì„œ action ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë§Œ ì œê±° (sectionì€ ìœ ì§€)
      const newUrl = new URL(window.location.href)
      newUrl.searchParams.delete('action')
      router.replace(newUrl.pathname + newUrl.search)
    }
  }, [searchParams, router])

  const renderActiveSection = () => {
    switch (activeSection) {
      case 'ì„ë¬´ ê²Œì‹œíŒ':
        return <MissionBoard searchQuery={searchQuery} />
      case 'ì§€ì‹ ìœ„í‚¤':
        return <KnowledgeWiki searchQuery={searchQuery} />
      case 'í”„ë¡œì íŠ¸ ì‡¼ì¼€ì´ìŠ¤':
        return <ProjectShowcase searchQuery={searchQuery} />
      default:
        return <MissionBoard searchQuery={searchQuery} />
    }
  }

  return (
    <div className="min-h-screen">
      {/* í—¤ë” */}
      <Header 
        title={activeSection}
        searchQuery={searchQuery}
        onSearchChange={setSearchQuery}
      />
      
      {/* ë¡œê·¸ì¸ ë°°ë„ˆ (í—¤ë” ë°”ê¹¥) */}
      <LoginBanner />
      
      {/* ë©”ì¸ ì½˜í…ì¸  */}
      <MainContainer>
        {/* í•„í„° ì¹© */}
        <div className="mb-0">
          <UnifiedFilter
            options={sectionOptions}
            activeFilter={activeSection}
            onFilterChange={handleSectionChange}
            variant="comfortable"
            style="modern"
            maxVisibleItems={3}
            settingsTitle="ê²Œì‹œíŒ í•„í„° ì„¤ì •"
            settings={[
              {
                key: 'recent',
                label: 'ìµœê·¼ 7ì¼ ê²Œì‹œê¸€ë§Œ',
                type: 'toggle',
                value: showOnlyRecent,
                onChange: setShowOnlyRecent
              },
              {
                key: 'sort',
                label: 'ì •ë ¬ ê¸°ì¤€',
                type: 'select',
                value: boardSortOrder,
                options: ['latest', 'popular', 'comments', 'views'],
                onChange: setBoardSortOrder
              },
              {
                key: 'myPosts',
                label: 'ë‚´ê°€ ì‘ì„±í•œ ê²Œì‹œê¸€ë§Œ',
                type: 'toggle',
                value: showOnlyMyPosts,
                onChange: setShowOnlyMyPosts
              },
              // ì„¹ì…˜ë³„ íŠ¹í™” ì„¤ì •
              ...(activeSection === 'ì„ë¬´ ê²Œì‹œíŒ' ? [
                {
                  key: 'budget',
                  label: 'ì˜ˆì‚° ë²”ìœ„',
                  type: 'range',
                  value: [0, 500],
                  onChange: (value: [number, number]) => console.log('ì˜ˆì‚° í•„í„°:', value)
                },
                {
                  key: 'skills',
                  label: 'í•„ìš” ê¸°ìˆ ',
                  type: 'tag-selector',
                  value: [],
                  options: ['React', 'Node.js', 'Python', 'Design', 'Marketing'],
                  onChange: (value: string[]) => console.log('ê¸°ìˆ  í•„í„°:', value)
                },
                {
                  key: 'paymentType',
                  label: 'ê²°ì œ ë°©ì‹',
                  type: 'select',
                  value: 'all',
                  options: ['all', 'fixed', 'hourly'],
                  onChange: (value: string) => console.log('ê²°ì œ ë°©ì‹:', value)
                }
              ] : []),
              ...(activeSection === 'ì§€ì‹ ìœ„í‚¤' ? [
                {
                  key: 'difficulty',
                  label: 'ë‚œì´ë„',
                  type: 'select',
                  value: 'all',
                  options: ['all', 'beginner', 'intermediate', 'advanced'],
                  onChange: (value: string) => console.log('ë‚œì´ë„ í•„í„°:', value)
                },
                {
                  key: 'category',
                  label: 'ì¹´í…Œê³ ë¦¬',
                  type: 'tag-selector',
                  value: [],
                  options: ['Frontend', 'Backend', 'DevOps', 'Design', 'Product'],
                  onChange: (value: string[]) => console.log('ì¹´í…Œê³ ë¦¬ í•„í„°:', value)
                },
                {
                  key: 'docType',
                  label: 'ë¬¸ì„œ íƒ€ì…',
                  type: 'select',
                  value: 'all',
                  options: ['all', 'tutorial', 'guide', 'reference', 'template'],
                  onChange: (value: string) => console.log('ë¬¸ì„œ íƒ€ì…:', value)
                }
              ] : []),
              ...(activeSection === 'í”„ë¡œì íŠ¸ ì‡¼ì¼€ì´ìŠ¤' ? [
                {
                  key: 'projectType',
                  label: 'í”„ë¡œì íŠ¸ ì¢…ë¥˜',
                  type: 'tag-selector',
                  value: [],
                  options: ['ì›¹', 'ëª¨ë°”ì¼', 'ë°ì´í„°', 'ë””ìì¸', 'AI/ML'],
                  onChange: (value: string[]) => console.log('í”„ë¡œì íŠ¸ ì¢…ë¥˜:', value)
                },
                {
                  key: 'teamSize',
                  label: 'íŒ€ êµ¬ì„±',
                  type: 'select',
                  value: 'all',
                  options: ['all', 'individual', 'small', 'large'],
                  onChange: (value: string) => console.log('íŒ€ êµ¬ì„±:', value)
                },
                {
                  key: 'completeness',
                  label: 'ì™„ì„±ë„',
                  type: 'select',
                  value: 'all',
                  options: ['all', 'prototype', 'mvp', 'complete'],
                  onChange: (value: string) => console.log('ì™„ì„±ë„:', value)
                }
              ] : [])
            ] as any}
          />
        </div>
        {renderActiveSection()}
      </MainContainer>
      
      {/* í”Œë¡œíŒ… ì•¡ì…˜ ë²„íŠ¼ */}
      <WorklyFloatingActionButton 
        onAddTask={() => console.log('ì—…ë¬´ ì¶”ê°€')}
        onAddProject={() => console.log('í”„ë¡œì íŠ¸ ì¶”ê°€')}
        onAddGoal={() => console.log('ëª©í‘œ ì¶”ê°€')}
      />

      {/* ê²Œì‹œê¸€ ì‘ì„± ëª¨ë‹¬ */}
      <PostCreationModal
        isOpen={isPostModalOpen}
        onClose={() => setIsPostModalOpen(false)}
        section={activeSection}
      />
    </div>
  )
}
</file>

<file path="frontend/src/app/search/page.tsx">
'use client'

export const dynamic = 'force-dynamic'

import { useState, useEffect } from 'react'
import { useRouter, useSearchParams } from 'next/navigation'
import { MagnifyingGlassIcon, ArrowLeftIcon, ClockIcon } from '@heroicons/react/24/outline'
import { 
  CheckCircleIcon as TaskIcon, 
  FolderIcon as ProjectIcon, 
  DocumentTextIcon as PostIcon,
  UserIcon
} from '@heroicons/react/24/solid'

interface SearchResult {
  id: string
  type: 'task' | 'project' | 'post' | 'user'
  title: string
  description?: string
  url: string
  category?: string
  timestamp?: string
  status?: string
}

// ëª©ì—… ê²€ìƒ‰ ê²°ê³¼ ë°ì´í„°
const mockSearchResults: SearchResult[] = [
  {
    id: '1',
    type: 'task',
    title: 'í”„ë¡œì íŠ¸ ê¸°íšì„œ ì‘ì„±',
    description: 'ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ì˜ ê¸°íšì„œë¥¼ ì‘ì„±í•˜ê³  íŒ€ê³¼ ê³µìœ ',
    url: '/tasks/1',
    category: 'ì—…ë¬´',
    timestamp: '6ì‹œê°„ í›„ ë§ˆê°',
    status: 'ì§„í–‰ì¤‘'
  },
  {
    id: '2',
    type: 'project',
    title: 'ì›Œí´ë¦¬ MVP ê°œë°œ',
    description: 'ë¹„ì¦ˆë‹ˆìŠ¤ ì„±ê³µì„ ìœ„í•œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ MVP ë²„ì „ ê°œë°œ',
    url: '/projects/1',
    category: 'í”„ë¡œì íŠ¸',
    status: 'í™œì„±'
  },
  {
    id: '3',
    type: 'task',
    title: 'API ë¬¸ì„œ ê²€í† ',
    description: 'ë°±ì—”ë“œ API ë¬¸ì„œë¥¼ ê²€í† í•˜ê³  í”¼ë“œë°± ì œê³µ',
    url: '/tasks/3',
    category: 'ì—…ë¬´',
    status: 'ì™„ë£Œ'
  },
  {
    id: '4',
    type: 'project',
    title: 'AI ì±—ë´‡ ê°œë°œ',
    description: 'ê³ ê° ì§€ì›ì„ ìœ„í•œ AI ê¸°ë°˜ ì±—ë´‡ ì‹œìŠ¤í…œ êµ¬ì¶•',
    url: '/projects/2',
    category: 'í”„ë¡œì íŠ¸',
    status: 'í™œì„±'
  },
  {
    id: '5',
    type: 'post',
    title: 'ì›Œí´ë¦¬ ëŸ°ì¹­ ê³µì§€',
    description: 'ì›Œí´ë¦¬ í”Œë«í¼ì´ ë“œë””ì–´ ë² íƒ€ ë²„ì „ìœ¼ë¡œ ì¶œì‹œë˜ì—ˆìŠµë‹ˆë‹¤!',
    url: '/board/5',
    category: 'ê³µì§€ì‚¬í•­',
    timestamp: '2ì¼ ì „'
  }
]

// ìµœê·¼ ê²€ìƒ‰ì–´ (ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì—ì„œ ê´€ë¦¬)
const getRecentSearches = (): string[] => {
  if (typeof window === 'undefined') return []
  const saved = localStorage.getItem('workly-recent-searches')
  return saved ? JSON.parse(saved) : []
}

const saveRecentSearch = (query: string) => {
  if (typeof window === 'undefined' || !query.trim()) return
  
  const current = getRecentSearches()
  const updated = [query, ...current.filter(item => item !== query)].slice(0, 5)
  localStorage.setItem('workly-recent-searches', JSON.stringify(updated))
}

function SearchResultItem({ result }: { result: SearchResult }) {
  const router = useRouter()
  
  const getIcon = () => {
    switch (result.type) {
      case 'task':
        return <TaskIcon className="w-5 h-5 text-blue-600" />
      case 'project':
        return <ProjectIcon className="w-5 h-5 text-green-600" />
      case 'post':
        return <PostIcon className="w-5 h-5 text-purple-600" />
      case 'user':
        return <UserIcon className="w-5 h-5 text-blue-600" />
      default:
        return <MagnifyingGlassIcon className="w-5 h-5 text-gray-400" />
    }
  }

  const getStatusColor = () => {
    switch (result.status) {
      case 'ì™„ë£Œ':
        return 'bg-green-100 text-green-800'
      case 'ì§„í–‰ì¤‘':
        return 'bg-blue-100 text-blue-800'
      case 'í™œì„±':
        return 'bg-green-100 text-green-800'
      default:
        return 'bg-gray-100 text-gray-800'
    }
  }

  return (
    <div 
      className="p-4 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0"
      onClick={() => router.push(result.url)}
    >
      <div className="flex items-start space-x-3">
        <div className="flex-shrink-0 mt-0.5">
          {getIcon()}
        </div>
        <div className="flex-1 min-w-0">
          <div className="flex items-center space-x-2 mb-1">
            <h3 className="text-sm font-medium text-gray-900 truncate">
              {result.title}
            </h3>
            <span className="text-xs text-gray-500">{result.category}</span>
            {result.status && (
              <span className={`text-xs px-2 py-1 rounded-full font-medium ${getStatusColor()}`}>
                {result.status}
              </span>
            )}
          </div>
          {result.description && (
            <p className="text-sm text-gray-600 line-clamp-2 mb-2">
              {result.description}
            </p>
          )}
          {result.timestamp && (
            <div className="flex items-center space-x-1 text-xs text-gray-500">
              <ClockIcon className="w-3 h-3" />
              <span>{result.timestamp}</span>
            </div>
          )}
        </div>
      </div>
    </div>
  )
}

export default function SearchPage() {
  const router = useRouter()
  const searchParams = useSearchParams()
  const [query, setQuery] = useState('')
  const [results, setResults] = useState<SearchResult[]>([])
  const [isLoading, setIsLoading] = useState(false)
  const [recentSearches, setRecentSearches] = useState<string[]>([])

  useEffect(() => {
    // URL íŒŒë¼ë¯¸í„°ì—ì„œ ê²€ìƒ‰ì–´ ê°€ì ¸ì˜¤ê¸°
    const q = searchParams.get('q')
    if (q) {
      setQuery(q)
      performSearch(q)
    }
    
    // ìµœê·¼ ê²€ìƒ‰ì–´ ë¡œë“œ
    setRecentSearches(getRecentSearches())
  }, [searchParams])

  const performSearch = async (searchQuery: string) => {
    if (!searchQuery.trim()) {
      setResults([])
      return
    }

    setIsLoading(true)
    
    // ì‹¤ì œë¡œëŠ” API í˜¸ì¶œ
    // const response = await fetch(`/api/search?q=${encodeURIComponent(searchQuery)}`)
    // const data = await response.json()
    
    // ëª©ì—… ê²€ìƒ‰ ì‹œë®¬ë ˆì´ì…˜
    await new Promise(resolve => setTimeout(resolve, 500))
    
    // ê°„ë‹¨í•œ í•„í„°ë§ ë¡œì§
    const filtered = mockSearchResults.filter(item =>
      item.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
      item.description?.toLowerCase().includes(searchQuery.toLowerCase())
    )
    
    setResults(filtered)
    setIsLoading(false)
    
    // ìµœê·¼ ê²€ìƒ‰ì–´ì— ì¶”ê°€
    saveRecentSearch(searchQuery)
    setRecentSearches(getRecentSearches())
  }

  const handleSearch = (searchQuery: string) => {
    setQuery(searchQuery)
    performSearch(searchQuery)
    
    // URL ì—…ë°ì´íŠ¸
    const params = new URLSearchParams()
    if (searchQuery.trim()) {
      params.set('q', searchQuery)
    }
    router.replace(`/search?${params.toString()}`)
  }

  const handleRecentSearchClick = (recentQuery: string) => {
    handleSearch(recentQuery)
  }

  const clearRecentSearches = () => {
    localStorage.removeItem('workly-recent-searches')
    setRecentSearches([])
  }

  return (
    <div className="min-h-screen bg-gray-50">
      {/* ëª¨ë°”ì¼ í—¤ë” */}
      <div className="bg-white border-b border-gray-200 px-4 py-3">
        <div className="flex items-center space-x-3">
          <button
            onClick={() => router.back()}
            className="flex items-center justify-center w-8 h-8 text-gray-500 hover:text-gray-700"
          >
            <ArrowLeftIcon className="w-5 h-5" />
          </button>
          
          <div className="flex-1 relative">
            <MagnifyingGlassIcon className="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400" />
            <input
              type="text"
              value={query}
              onChange={(e) => setQuery(e.target.value)}
              onKeyPress={(e) => e.key === 'Enter' && handleSearch(query)}
              placeholder="ì—…ë¬´, í”„ë¡œì íŠ¸, ê²Œì‹œê¸€ ê²€ìƒ‰..."
              className="w-full pl-10 pr-4 py-2 text-sm bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              autoFocus
            />
          </div>
          
          <button
            onClick={() => handleSearch(query)}
            className="px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700"
          >
            ê²€ìƒ‰
          </button>
        </div>
      </div>

      {/* ë©”ì¸ ì½˜í…ì¸  */}
      <div className="w-full max-w-[720px] mx-auto">
        {!query.trim() && recentSearches.length > 0 && (
          <div className="bg-white border-b border-gray-200 p-4">
            <div className="flex items-center justify-between mb-3">
              <h3 className="text-sm font-medium text-gray-900">ìµœê·¼ ê²€ìƒ‰ì–´</h3>
              <button
                onClick={clearRecentSearches}
                className="text-xs text-gray-500 hover:text-gray-700"
              >
                ì „ì²´ ì‚­ì œ
              </button>
            </div>
            <div className="flex flex-wrap gap-2">
              {recentSearches.map((recent, index) => (
                <button
                  key={index}
                  onClick={() => handleRecentSearchClick(recent)}
                  className="inline-flex items-center px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200"
                >
                  <ClockIcon className="w-3 h-3 mr-1" />
                  {recent}
                </button>
              ))}
            </div>
          </div>
        )}

        {!query.trim() && (
          <div className="bg-white p-8 text-center">
            <MagnifyingGlassIcon className="w-16 h-16 text-gray-300 mx-auto mb-4" />
            <h3 className="text-lg font-medium text-gray-900 mb-2">í†µí•©ê²€ìƒ‰</h3>
            <p className="text-gray-500 mb-4">
              ì—…ë¬´, í”„ë¡œì íŠ¸, ê²Œì‹œê¸€ì„ í•œ ë²ˆì— ê²€ìƒ‰í•˜ì„¸ìš”
            </p>
            <div className="space-y-2 text-sm text-gray-600">
              <div className="flex items-center justify-center space-x-2">
                <TaskIcon className="w-4 h-4 text-blue-600" />
                <span>ì—…ë¬´</span>
                <ProjectIcon className="w-4 h-4 text-green-600 ml-4" />
                <span>í”„ë¡œì íŠ¸</span>
                <PostIcon className="w-4 h-4 text-purple-600 ml-4" />
                <span>ê²Œì‹œê¸€</span>
              </div>
            </div>
          </div>
        )}

        {isLoading && (
          <div className="bg-white p-8 text-center">
            <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"></div>
            <p className="text-gray-500">ê²€ìƒ‰ ì¤‘...</p>
          </div>
        )}

        {query.trim() && !isLoading && results.length === 0 && (
          <div className="bg-white p-8 text-center">
            <MagnifyingGlassIcon className="w-16 h-16 text-gray-300 mx-auto mb-4" />
            <h3 className="text-lg font-medium text-gray-900 mb-2">ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ</h3>
            <p className="text-gray-500">
              '{query}'ì— ëŒ€í•œ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.
            </p>
          </div>
        )}

        {results.length > 0 && (
          <div className="bg-white">
            <div className="p-4 border-b border-gray-200">
              <h3 className="text-sm font-medium text-gray-900">
                '{query}' ê²€ìƒ‰ ê²°ê³¼ {results.length}ê°œ
              </h3>
            </div>
            <div className="divide-y divide-gray-100">
              {results.map((result) => (
                <SearchResultItem key={result.id} result={result} />
              ))}
            </div>
          </div>
        )}
      </div>
    </div>
  )
}
</file>

<file path="frontend/src/app/layout.tsx">
import type { Metadata } from 'next'
import { Inter } from 'next/font/google'
import './globals.css'
import ConditionalLayout from '@/components/layout/ConditionalLayout'

const inter = Inter({ subsets: ['latin'] })

export const metadata: Metadata = {
  title: 'ì›Œí´ë¦¬ - ì—…ë¬´ ê´€ë¦¬ í”Œë«í¼',
  description: 'íš¨ìœ¨ì ì¸ ì—…ë¬´ ê´€ë¦¬ì™€ íŒ€ í˜‘ì—…ì„ ìœ„í•œ ì˜¬ì¸ì› í”Œë«í¼',
}

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="ko">
      <body className={inter.className} suppressHydrationWarning={true}>
        <ConditionalLayout>
          {children}
        </ConditionalLayout>
      </body>
    </html>
  )
}
</file>

<file path="frontend/src/components/layout/ConditionalLayout.tsx">
'use client'

import { usePathname } from 'next/navigation'
import LeftNavigation from '@/components/navigation/LeftNavigation'
import MobileNavigation from '@/components/navigation/MobileNavigation'

interface ConditionalLayoutProps {
  children: React.ReactNode
}

export default function ConditionalLayout({ children }: ConditionalLayoutProps) {
  const pathname = usePathname()
  
  // ì¸ì¦ ê´€ë ¨ í˜ì´ì§€ì—ì„œëŠ” ë„¤ë¹„ê²Œì´ì…˜ì„ ìˆ¨ê¹€
  const isAuthPage = pathname?.startsWith('/auth')
  
  // í”„ë¡œì íŠ¸ ìƒì„¸ í˜ì´ì§€ì—ì„œëŠ” ë„¤ë¹„ê²Œì´ì…˜ì„ ìˆ¨ê¹€
  const isProjectDetailPage = pathname?.match(/^\/projects\/[^\/]+$/)
  
  if (isAuthPage) {
    return (
      <div className="min-h-screen bg-background">
        {children}
      </div>
    )
  }
  
  return (
    <div className="min-h-screen bg-background">
      {/* ë°ìŠ¤í¬í†± ì¢Œì¸¡ ë„¤ë¹„ê²Œì´ì…˜ */}
      {!isProjectDetailPage && <LeftNavigation />}
      
      {/* ë©”ì¸ ì½˜í…ì¸  */}
      <div className="md:ml-[76px]">
        {children}
      </div>
      
      {/* ëª¨ë°”ì¼ í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ */}
      {!isProjectDetailPage && <MobileNavigation />}
    </div>
  )
}
</file>

<file path="frontend/src/components/tasks/TaskCreationWizard.tsx">
'use client'

import React, { useState } from 'react'
import { 
  TaskWizardStep, 
  TaskWizardData, 
  TaskPriority, 
  CreateTaskDto
} from '@/types/task.types'
import { X, ArrowLeft, ArrowRight, CheckCircle, Clock, Users } from 'lucide-react'

interface TaskCreationWizardProps {
  isOpen: boolean
  onClose: () => void
  onSubmit: (taskData: CreateTaskDto) => void
  projects?: Array<{ id: string; name: string }>
}

export default function TaskCreationWizard({
  isOpen,
  onClose,
  onSubmit,
  projects = []
}: TaskCreationWizardProps) {
  const [wizardData, setWizardData] = useState<TaskWizardData>({
    step: 'collect',
    title: '',
    isActionable: undefined,
    canComplete2Minutes: undefined,
    belongsToProject: undefined,
    projectId: undefined,
    priority: undefined,
    dueDate: undefined,
    estimatedHours: undefined,
    assigneeId: undefined
  })

  const steps: { key: TaskWizardStep; title: string; subtitle: string }[] = [
    { key: 'collect', title: 'ìˆ˜ì§‘', subtitle: 'ë¬´ì—‡ì´ ë§ˆìŒì— ê±¸ë¦¬ë‚˜ìš”?' },
    { key: 'clarify', title: 'ëª…ë£Œí™”', subtitle: 'ì‹¤í–‰ ê°€ëŠ¥í•œ ì¼ì¸ê°€ìš”?' },
    { key: 'organize', title: 'ì •ë¦¬', subtitle: 'ì„¸ë¶€ ì •ë³´ë¥¼ ì •ë¦¬í•´ë³´ì„¸ìš”' },
    { key: 'execute', title: 'ì‹¤í–‰', subtitle: 'ì‹¤í–‰ ì¤€ë¹„ê°€ ì™„ë£Œë©ë‹ˆë‹¤' }
  ]

  const currentStepIndex = steps.findIndex(s => s.key === wizardData.step)
  const currentStep = steps[currentStepIndex]

  const updateWizardData = (updates: Partial<TaskWizardData>) => {
    setWizardData(prev => ({ ...prev, ...updates }))
  }

  const goToNextStep = () => {
    const nextIndex = currentStepIndex + 1
    if (nextIndex < steps.length) {
      updateWizardData({ step: steps[nextIndex].key })
    }
  }

  const goToPrevStep = () => {
    const prevIndex = currentStepIndex - 1
    if (prevIndex >= 0) {
      updateWizardData({ step: steps[prevIndex].key })
    }
  }

  const canProceedFromCurrentStep = () => {
    switch (wizardData.step) {
      case 'collect':
        return wizardData.title.trim().length > 0
      case 'clarify':
        return wizardData.isActionable !== undefined
      case 'organize':
        return true // ëª¨ë“  í•„ë“œ ì„ íƒì‚¬í•­
      case 'execute':
        return true
      default:
        return false
    }
  }

  const handleSubmit = () => {
    if (wizardData.step === 'execute') {
      const taskData: CreateTaskDto = {
        title: wizardData.title,
        projectId: wizardData.projectId,
        priority: wizardData.priority || TaskPriority.MEDIUM,
        dueDate: wizardData.dueDate,
        estimatedHours: wizardData.estimatedHours,
        assigneeId: wizardData.assigneeId,
        tags: []
      }
      
      onSubmit(taskData)
      handleClose()
    }
  }

  const handleClose = () => {
    setWizardData({
      step: 'collect',
      title: '',
      isActionable: undefined,
      canComplete2Minutes: undefined,
      belongsToProject: undefined,
      projectId: undefined,
      priority: undefined,
      dueDate: undefined,
      estimatedHours: undefined,
      assigneeId: undefined
    })
    onClose()
  }

  // 2ë¶„ ê·œì¹™ ì¦‰ì‹œ ì²˜ë¦¬
  const handle2MinuteRule = () => {
    const quickTask: CreateTaskDto = {
      title: wizardData.title,
      priority: TaskPriority.LOW,
      estimatedHours: 0.1,
      tags: ['2ë¶„ê·œì¹™']
    }
    onSubmit(quickTask)
    handleClose()
  }

  if (!isOpen) return null

  const renderStepIndicator = () => (
    <div className="flex items-center justify-between mb-6">
      {steps.map((step, index) => (
        <div key={step.key} className="flex items-center">
          <div 
            className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${
              index <= currentStepIndex
                ? 'bg-blue-600 text-white'
                : 'bg-gray-200 text-gray-500'
            }`}
          >
            {index < currentStepIndex ? (
              <CheckCircle className="w-5 h-5" />
            ) : (
              index + 1
            )}
          </div>
          {index < steps.length - 1 && (
            <div 
              className={`w-16 h-1 mx-2 ${
                index < currentStepIndex ? 'bg-blue-600' : 'bg-gray-200'
              }`}
            />
          )}
        </div>
      ))}
    </div>
  )

  const renderCollectStep = () => (
    <div className="space-y-6">
      <div className="text-center">
        <h3 className="text-lg font-medium text-gray-900 mb-2">
          ë¬´ì—‡ì´ ë§ˆìŒì— ê±¸ë¦¬ë‚˜ìš”?
        </h3>
        <p className="text-gray-600 text-sm">
          ë¨¸ë¦¿ì†ì— ìˆëŠ” ê²ƒì„ ììœ ë¡­ê²Œ ì ì–´ë³´ì„¸ìš”. ë‚˜ì¤‘ì— ì •ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        </p>
      </div>
      
      <div>
        <textarea
          value={wizardData.title}
          onChange={(e) => updateWizardData({ title: e.target.value })}
          placeholder="ì˜ˆ: í”„ë¡œì íŠ¸ íšŒì˜ ì¤€ë¹„í•˜ê¸°, ì—„ë§ˆê»˜ ì•ˆë¶€ ì „í™”ë“œë¦¬ê¸°..."
          className="w-full h-32 p-4 border border-gray-200 rounded-lg 
                   focus:ring-2 focus:ring-blue-500 focus:border-transparent
                   resize-none text-gray-900 placeholder-gray-500"
          autoFocus
        />
        <div className="text-right text-sm text-gray-500 mt-2">
          {wizardData.title.length}/200
        </div>
      </div>
    </div>
  )

  const renderClarifyStep = () => (
    <div className="space-y-6">
      <div className="text-center">
        <h3 className="text-lg font-medium text-gray-900 mb-2">
          "{wizardData.title}"
        </h3>
        <p className="text-gray-600 text-sm">
          ì´ê²ƒì´ ì‹¤í–‰ ê°€ëŠ¥í•œ ì¼ì¸ì§€ íŒë‹¨í•´ë³´ì„¸ìš”
        </p>
      </div>

      {/* ì‹¤í–‰ ê°€ëŠ¥ì„± íŒë‹¨ */}
      <div className="space-y-4">
        <div>
          <label className="block text-sm font-medium text-gray-700 mb-3">
            ì‹¤í–‰ ê°€ëŠ¥í•œ ì¼ì¸ê°€ìš”?
          </label>
          <div className="flex gap-3">
            <button
              onClick={() => updateWizardData({ isActionable: true })}
              className={`flex-1 p-4 rounded-lg border-2 transition-colors ${
                wizardData.isActionable === true
                  ? 'border-green-500 bg-green-50 text-green-700'
                  : 'border-gray-200 hover:border-gray-300'
              }`}
            >
              <CheckCircle className="w-6 h-6 mx-auto mb-2" />
              <div className="font-medium">ì˜ˆ</div>
              <div className="text-xs text-gray-600">ì§€ê¸ˆ í–‰ë™í•  ìˆ˜ ìˆì–´ìš”</div>
            </button>
            <button
              onClick={() => updateWizardData({ isActionable: false })}
              className={`flex-1 p-4 rounded-lg border-2 transition-colors ${
                wizardData.isActionable === false
                  ? 'border-yellow-500 bg-yellow-50 text-yellow-700'
                  : 'border-gray-200 hover:border-gray-300'
              }`}
            >
              <Clock className="w-6 h-6 mx-auto mb-2" />
              <div className="font-medium">ì•„ë‹ˆì˜¤</div>
              <div className="text-xs text-gray-600">ì°¸ê³ ìš©ì´ê±°ë‚˜ ì–¸ì  ê°€ í•  ì¼</div>
            </button>
          </div>
        </div>

        {/* 2ë¶„ ê·œì¹™ */}
        {wizardData.isActionable === true && (
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-3">
              2ë¶„ ì•ˆì— ëë‚¼ ìˆ˜ ìˆë‚˜ìš”?
            </label>
            <div className="flex gap-3">
              <button
                onClick={handle2MinuteRule}
                className="flex-1 p-4 rounded-lg border-2 border-green-500 bg-green-50 text-green-700 hover:bg-green-100"
              >
                <div className="font-medium">ì˜ˆ, ì§€ê¸ˆ ë°”ë¡œ!</div>
                <div className="text-xs">2ë¶„ ê·œì¹™: ì¦‰ì‹œ ì²˜ë¦¬</div>
              </button>
              <button
                onClick={() => updateWizardData({ canComplete2Minutes: false })}
                className={`flex-1 p-4 rounded-lg border-2 transition-colors ${
                  wizardData.canComplete2Minutes === false
                    ? 'border-blue-500 bg-blue-50 text-blue-700'
                    : 'border-gray-200 hover:border-gray-300'
                }`}
              >
                <div className="font-medium">ì•„ë‹ˆì˜¤</div>
                <div className="text-xs">ë” ì‹œê°„ì´ í•„ìš”í•´ìš”</div>
              </button>
            </div>
          </div>
        )}

        {/* í”„ë¡œì íŠ¸ ì—°ê²° */}
        {wizardData.isActionable === true && wizardData.canComplete2Minutes === false && (
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-3">
              ë” í° ëª©í‘œì˜ ì¼ë¶€ì¸ê°€ìš”?
            </label>
            <div className="flex gap-3">
              <button
                onClick={() => updateWizardData({ belongsToProject: true })}
                className={`flex-1 p-4 rounded-lg border-2 transition-colors ${
                  wizardData.belongsToProject === true
                    ? 'border-purple-500 bg-purple-50 text-purple-700'
                    : 'border-gray-200 hover:border-gray-300'
                }`}
              >
                <Users className="w-6 h-6 mx-auto mb-2" />
                <div className="font-medium">ì˜ˆ</div>
                <div className="text-xs">í”„ë¡œì íŠ¸ì˜ ì¼ë¶€</div>
              </button>
              <button
                onClick={() => updateWizardData({ belongsToProject: false })}
                className={`flex-1 p-4 rounded-lg border-2 transition-colors ${
                  wizardData.belongsToProject === false
                    ? 'border-blue-500 bg-blue-50 text-blue-700'
                    : 'border-gray-200 hover:border-gray-300'
                }`}
              >
                <div className="font-medium">ì•„ë‹ˆì˜¤</div>
                <div className="text-xs">ê°œë³„ ì—…ë¬´</div>
              </button>
            </div>
          </div>
        )}
      </div>
    </div>
  )

  const renderOrganizeStep = () => (
    <div className="space-y-6">
      <div className="text-center">
        <h3 className="text-lg font-medium text-gray-900 mb-2">
          ì„¸ë¶€ ì •ë³´ ì •ë¦¬
        </h3>
        <p className="text-gray-600 text-sm">
          ì—…ë¬´ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ì‹¤í–‰í•˜ê¸° ìœ„í•œ ì •ë³´ë¥¼ ì¶”ê°€í•˜ì„¸ìš”
        </p>
      </div>

      <div className="space-y-4">
        {/* í”„ë¡œì íŠ¸ ì„ íƒ */}
        {wizardData.belongsToProject === true && projects.length > 0 && (
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              í”„ë¡œì íŠ¸
            </label>
            <select
              value={wizardData.projectId || ''}
              onChange={(e) => updateWizardData({ projectId: e.target.value || undefined })}
              className="w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            >
              <option value="">í”„ë¡œì íŠ¸ ì„ íƒ</option>
              {projects.map(project => (
                <option key={project.id} value={project.id}>
                  {project.name}
                </option>
              ))}
            </select>
          </div>
        )}

        {/* ìš°ì„ ìˆœìœ„ */}
        <div>
          <label className="block text-sm font-medium text-gray-700 mb-2">
            ìš°ì„ ìˆœìœ„
          </label>
          <div className="grid grid-cols-2 gap-2">
            {Object.entries({
              [TaskPriority.LOW]: { label: 'ë‚®ìŒ', color: 'blue' },
              [TaskPriority.MEDIUM]: { label: 'ë³´í†µ', color: 'yellow' },
              [TaskPriority.HIGH]: { label: 'ë†’ìŒ', color: 'orange' },
              [TaskPriority.URGENT]: { label: 'ê¸´ê¸‰', color: 'red' }
            }).map(([priority, config]) => (
              <button
                key={priority}
                onClick={() => updateWizardData({ priority: priority as TaskPriority })}
                className={`p-3 rounded-lg border-2 transition-colors ${
                  wizardData.priority === priority
                    ? 'border-blue-500 bg-blue-50 text-blue-700'
                    : 'border-gray-200 hover:border-gray-300'
                }`}
              >
                {config.label}
              </button>
            ))}
          </div>
        </div>

        {/* ë§ˆê°ì¼ */}
        <div>
          <label className="block text-sm font-medium text-gray-700 mb-2">
            ë§ˆê°ì¼ (ì„ íƒì‚¬í•­)
          </label>
          <input
            type="datetime-local"
            value={wizardData.dueDate || ''}
            onChange={(e) => updateWizardData({ dueDate: e.target.value || undefined })}
            className="w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
          />
        </div>

        {/* ì˜ˆìƒ ì‹œê°„ */}
        <div>
          <label className="block text-sm font-medium text-gray-700 mb-2">
            ì˜ˆìƒ ì†Œìš” ì‹œê°„ (ì„ íƒì‚¬í•­)
          </label>
          <div className="grid grid-cols-4 gap-2">
            {[0.5, 1, 2, 4, 8].map(hours => (
              <button
                key={hours}
                onClick={() => updateWizardData({ estimatedHours: hours })}
                className={`p-2 rounded-lg border transition-colors text-sm ${
                  wizardData.estimatedHours === hours
                    ? 'border-blue-500 bg-blue-50 text-blue-700'
                    : 'border-gray-200 hover:border-gray-300'
                }`}
              >
                {hours}ì‹œê°„
              </button>
            ))}
          </div>
          <input
            type="number"
            step="0.5"
            min="0"
            max="100"
            placeholder="ì§ì ‘ ì…ë ¥"
            value={wizardData.estimatedHours || ''}
            onChange={(e) => updateWizardData({ 
              estimatedHours: e.target.value ? parseFloat(e.target.value) : undefined 
            })}
            className="w-full mt-2 p-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"
          />
        </div>
      </div>
    </div>
  )

  const renderExecuteStep = () => (
    <div className="space-y-6">
      <div className="text-center">
        <CheckCircle className="w-16 h-16 text-green-500 mx-auto mb-4" />
        <h3 className="text-lg font-medium text-gray-900 mb-2">
          ì‹¤í–‰ ì¤€ë¹„ ì™„ë£Œ!
        </h3>
        <p className="text-gray-600 text-sm">
          ì´ì œ 'ì˜¤ëŠ˜' ëª©ë¡ì— ë‚˜íƒ€ë‚˜ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
        </p>
      </div>

      {/* ìµœì¢… ê²€í†  */}
      <div className="bg-gray-50 rounded-lg p-4 space-y-3">
        <div className="flex justify-between">
          <span className="text-sm text-gray-600">ì—…ë¬´</span>
          <span className="text-sm font-medium">{wizardData.title}</span>
        </div>
        {wizardData.projectId && (
          <div className="flex justify-between">
            <span className="text-sm text-gray-600">í”„ë¡œì íŠ¸</span>
            <span className="text-sm font-medium">
              {projects.find(p => p.id === wizardData.projectId)?.name}
            </span>
          </div>
        )}
        {wizardData.priority && (
          <div className="flex justify-between">
            <span className="text-sm text-gray-600">ìš°ì„ ìˆœìœ„</span>
            <span className="text-sm font-medium">{wizardData.priority}</span>
          </div>
        )}
        {wizardData.dueDate && (
          <div className="flex justify-between">
            <span className="text-sm text-gray-600">ë§ˆê°ì¼</span>
            <span className="text-sm font-medium">
              {new Date(wizardData.dueDate).toLocaleDateString('ko-KR')}
            </span>
          </div>
        )}
        {wizardData.estimatedHours && (
          <div className="flex justify-between">
            <span className="text-sm text-gray-600">ì˜ˆìƒ ì‹œê°„</span>
            <span className="text-sm font-medium">{wizardData.estimatedHours}ì‹œê°„</span>
          </div>
        )}
      </div>
    </div>
  )

  const renderCurrentStep = () => {
    switch (wizardData.step) {
      case 'collect': return renderCollectStep()
      case 'clarify': return renderClarifyStep()
      case 'organize': return renderOrganizeStep()
      case 'execute': return renderExecuteStep()
      default: return null
    }
  }

  return (
    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
      <div className="bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto scrollbar-on-hover">
        {/* í—¤ë” */}
        <div className="flex items-center justify-between p-6 border-b border-gray-200">
          <div>
            <h2 className="text-xl font-semibold text-gray-900">
              {currentStep.title}
            </h2>
            <p className="text-sm text-gray-600 mt-1">
              {currentStep.subtitle}
            </p>
          </div>
          <button
            onClick={handleClose}
            className="p-2 hover:bg-gray-100 rounded-lg transition-colors"
          >
            <X className="w-5 h-5" />
          </button>
        </div>

        {/* ì§„í–‰ í‘œì‹œ */}
        <div className="p-6 border-b border-gray-100">
          {renderStepIndicator()}
        </div>

        {/* ë‹¨ê³„ë³„ ì½˜í…ì¸  */}
        <div className="p-6">
          {renderCurrentStep()}
        </div>

        {/* í•˜ë‹¨ ë²„íŠ¼ */}
        <div className="flex items-center justify-between p-6 border-t border-gray-200">
          <button
            onClick={currentStepIndex > 0 ? goToPrevStep : handleClose}
            className="flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-900 transition-colors"
          >
            <ArrowLeft className="w-4 h-4" />
            {currentStepIndex > 0 ? 'ì´ì „' : 'ì·¨ì†Œ'}
          </button>

          <div className="flex gap-3">
            {wizardData.step === 'execute' ? (
              <button
                onClick={handleSubmit}
                className="flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"
              >
                <CheckCircle className="w-4 h-4" />
                ì—…ë¬´ ìƒì„±
              </button>
            ) : (
              <button
                onClick={goToNextStep}
                disabled={!canProceedFromCurrentStep()}
                className={`flex items-center gap-2 px-6 py-2 rounded-lg transition-colors ${
                  canProceedFromCurrentStep()
                    ? 'bg-blue-600 text-white hover:bg-blue-700'
                    : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                }`}
              >
                ë‹¤ìŒ
                <ArrowRight className="w-4 h-4" />
              </button>
            )}
          </div>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="frontend/src/types/project.types.ts">
/**
 * Project ê´€ë ¨ íƒ€ì… ì •ì˜
 */

// í”„ë¡œì íŠ¸ ìƒíƒœ
export enum ProjectStatus {
  PLANNING = 'planning',
  ACTIVE = 'active',
  ON_HOLD = 'on_hold',
  COMPLETED = 'completed',
  CANCELLED = 'cancelled',
  ARCHIVED = 'archived',
}

// í”„ë¡œì íŠ¸ ìš°ì„ ìˆœìœ„
export enum ProjectPriority {
  LOW = 'low',
  MEDIUM = 'medium',
  HIGH = 'high',
  URGENT = 'urgent',
}

// í”„ë¡œì íŠ¸ ê°€ì‹œì„±
export enum ProjectVisibility {
  PRIVATE = 'private',
  TEAM = 'team',
  PUBLIC = 'public',
}

// í”„ë¡œì íŠ¸ ë©¤ë²„ ì—­í• 
export enum ProjectMemberRole {
  OWNER = 'owner',
  ADMIN = 'admin',
  MEMBER = 'member',
  VIEWER = 'viewer',
}

// ê¸°ë³¸ ì‚¬ìš©ì ì •ë³´
export interface ProjectUser {
  id: string;
  name: string;
  email: string;
  avatar?: string;
  profile?: {
    firstName: string;
    lastName: string;
  };
}

// í”„ë¡œì íŠ¸ ëª©í‘œ
export interface ProjectObjective {
  id: string;
  title: string;
  description?: string;
  completed: boolean;
  completedAt?: string;
}

// í”„ë¡œì íŠ¸ í•µì‹¬ ê²°ê³¼
export interface ProjectKeyResult {
  id: string;
  objectiveId: string;
  title: string;
  description?: string;
  targetValue: number;
  currentValue: number;
  unit: string;
  completed: boolean;
  completedAt?: string;
}

// í”„ë¡œì íŠ¸ ë©¤ë²„
export interface ProjectMember {
  id: string;
  projectId: string;
  userId: string;
  role: ProjectMemberRole;
  permissions: string[];
  joinedAt: string;
  user: ProjectUser;
}

// ì›Œí¬í”Œë¡œìš° ë‹¨ê³„
export interface WorkflowStage {
  id: string;
  name: string;
  description?: string;
  color: string;
  order: number;
  isDefault: boolean;
  isCompleted: boolean;
}

// í”„ë¡œì íŠ¸ ì„¤ì •
export interface ProjectSettings {
  allowGuestAccess?: boolean;
  requireApprovalForTasks?: boolean;
  enableTimeTracking?: boolean;
  enableBudgetTracking?: boolean;
  enableNotifications?: boolean;
  defaultTaskPriority?: string;
  workflowStages?: WorkflowStage[];
}

// ë©”ì¸ í”„ë¡œì íŠ¸ ì¸í„°í˜ì´ìŠ¤ (ì›Œí´ë¦¬ ê³ ìœ  ë°©ë²•ë¡  ì ìš©)
export interface Project {
  id: string;
  title: string;
  description?: string;
  status: ProjectStatus;
  priority: ProjectPriority;
  
  // ì›Œí´ë¦¬ ë°©ë²•ë¡ : ëª©í‘œ ì—°ê²° (ì„ íƒì )
  goalId?: string; // ìƒìœ„ ëª©í‘œì™€ì˜ ì—°ê²° (Optional)
  
  // ê¸°ì¡´ OKR êµ¬ì¡° (í•˜ìœ„ í˜¸í™˜ì„± ìœ ì§€)
  objectives?: ProjectObjective[]; // ì„ íƒì ìœ¼ë¡œ ë³€ê²½
  keyResults?: ProjectKeyResult[]; // ì„ íƒì ìœ¼ë¡œ ë³€ê²½
  
  startDate?: string;
  dueDate?: string;
  progress: number;
  budget?: number;
  currency?: string;
  tags: string[];
  color?: string;
  icon?: string;
  visibility: ProjectVisibility;
  isArchived: boolean;
  isTemplate: boolean;
  templateId?: string;
  settings: ProjectSettings;
  ownerId: string;
  createdAt: string;
  updatedAt: string;

  // Relations
  owner: ProjectUser;
  members: ProjectMember[];
  tasks?: any[]; // Task íƒ€ì… ìˆœí™˜ ì°¸ì¡° ë°©ì§€
  goal?: any; // Goal íƒ€ì… (ìˆœí™˜ ì°¸ì¡° ë°©ì§€)

  // Computed properties
  memberCount: number;
  taskCount: number;
  completedTaskCount: number;
  completedObjectiveCount?: number; // ì„ íƒì ìœ¼ë¡œ ë³€ê²½
  completedKeyResultCount?: number; // ì„ íƒì ìœ¼ë¡œ ë³€ê²½
  isOverdue?: boolean;
  isDueSoon?: boolean;
}

// í”„ë¡œì íŠ¸ ìƒì„± DTO (ì›Œí´ë¦¬ ë°©ë²•ë¡  ì ìš©)
export interface CreateProjectDto {
  title: string;
  description?: string;
  priority?: ProjectPriority;
  goalId?: string; // ìƒìœ„ ëª©í‘œ ì—°ê²° (ì„ íƒì )
  startDate?: string;
  dueDate?: string;
  budget?: number;
  currency?: string;
  tags?: string[];
  color?: string;
  icon?: string;
  visibility?: ProjectVisibility;
  settings?: Partial<ProjectSettings>;
  
  // ê¸°ì¡´ OKR êµ¬ì¡° ì§€ì› (í•˜ìœ„ í˜¸í™˜ì„±)
  objectives?: Omit<ProjectObjective, 'id'>[];
  keyResults?: Omit<ProjectKeyResult, 'id' | 'objectiveId'>[];
}

// í”„ë¡œì íŠ¸ ì—…ë°ì´íŠ¸ DTO (ì›Œí´ë¦¬ ë°©ë²•ë¡  ì ìš©)
export interface UpdateProjectDto {
  title?: string;
  description?: string;
  status?: ProjectStatus;
  priority?: ProjectPriority;
  goalId?: string; // ìƒìœ„ ëª©í‘œ ì—°ê²° ë³€ê²½ ê°€ëŠ¥
  startDate?: string;
  dueDate?: string;
  budget?: number;
  currency?: string;
  tags?: string[];
  color?: string;
  icon?: string;
  visibility?: ProjectVisibility;
  settings?: Partial<ProjectSettings>;
}

// í”„ë¡œì íŠ¸ ì¿¼ë¦¬ DTO
export interface ProjectQueryDto {
  page?: number;
  limit?: number;
  status?: ProjectStatus;
  priority?: ProjectPriority;
  visibility?: ProjectVisibility;
  search?: string;
  sortBy?: string;
  sortOrder?: 'ASC' | 'DESC';
  includeArchived?: boolean;
  tags?: string[];
}

// í”„ë¡œì íŠ¸ ë©¤ë²„ ì¶”ê°€ DTO
export interface AddProjectMemberDto {
  userId: string;
  role?: ProjectMemberRole;
  permissions?: string[];
}

// í˜ì´ì§€ë„¤ì´ì…˜ ì‘ë‹µ
export interface PaginatedResponse<T> {
  items: T[];
  total: number;
  page: number;
  limit: number;
  totalPages: number;
}

// í”„ë¡œì íŠ¸ í†µê³„
export interface ProjectStats {
  total: number;
  planning: number;
  active: number;
  onHold: number;
  completed: number;
  cancelled: number;
  overdue: number;
  dueSoon: number;
}

// í”„ë¡œì íŠ¸ í™œë™
export interface ProjectActivity {
  id: string;
  type: 'created' | 'updated' | 'member_added' | 'member_removed' | 'status_changed' | 'objective_completed';
  description: string;
  userId: string;
  user: ProjectUser;
  projectId: string;
  createdAt: string;
  metadata?: { [key: string]: any };
}

// í”„ë¡œì íŠ¸ ëŒ€ì‹œë³´ë“œ ë°ì´í„°
export interface ProjectDashboard {
  project: Project;
  stats: {
    totalTasks: number;
    completedTasks: number;
    overdueTasks: number;
    activeMembersCount: number;
    recentActivity: ProjectActivity[];
  };
  recentTasks: any[]; // Task íƒ€ì…
  upcomingMilestones: {
    id: string;
    title: string;
    dueDate: string;
    progress: number;
  }[];
}

// í”„ë¡œì íŠ¸ í…œí”Œë¦¿
export interface ProjectTemplate {
  id: string;
  title: string;
  description?: string;
  category: string;
  tags: string[];
  settings: ProjectSettings;
  defaultTasks?: {
    title: string;
    description?: string;
    priority: string;
    estimatedHours?: number;
  }[];
  defaultObjectives?: Omit<ProjectObjective, 'id' | 'completed' | 'completedAt'>[];
  isPublic: boolean;
  usageCount: number;
  createdBy: string;
  createdAt: string;
}

// í”„ë¡œì íŠ¸ ë°°ì¹˜ ì‘ì—…
export interface ProjectBatchOperation {
  projectIds: string[];
  operation: 'update_status' | 'update_priority' | 'archive' | 'delete' | 'add_members';
  data: any;
}

// í”„ë¡œì íŠ¸ í•„í„° ì„¤ì •
export interface ProjectFilterSettings {
  status?: ProjectStatus[];
  priority?: ProjectPriority[];
  visibility?: ProjectVisibility[];
  memberIds?: string[];
  tags?: string[];
  dateRange?: {
    start: string;
    end: string;
  };
}

// í”„ë¡œì íŠ¸ ì •ë ¬ ì˜µì…˜
export interface ProjectSortOption {
  value: string;
  label: string;
  field: keyof Project;
  direction: 'asc' | 'desc';
}

// í”„ë¡œì íŠ¸ ë·° íƒ€ì…
export type ProjectViewType = 'grid' | 'list' | 'kanban' | 'timeline';

// í”„ë¡œì íŠ¸ ë·° ì„¤ì •
export interface ProjectViewSettings {
  type: ProjectViewType;
  groupBy?: 'status' | 'priority' | 'owner' | 'none';
  sortBy: string;
  sortOrder: 'ASC' | 'DESC';
  filters: ProjectFilterSettings;
  showArchived: boolean;
}
</file>

<file path="frontend/src/types/task.types.ts">
/**
 * Task ê´€ë ¨ íƒ€ì… ì •ì˜
 */

// Task ìƒíƒœ
export enum TaskStatus {
  TODO = 'todo',
  IN_PROGRESS = 'in_progress',
  IN_REVIEW = 'in_review',
  DONE = 'done',
  BLOCKED = 'blocked',
  DEFERRED = 'deferred',
  CANCELLED = 'cancelled',
}

// Task ìš°ì„ ìˆœìœ„
export enum TaskPriority {
  LOW = 'low',
  MEDIUM = 'medium',
  HIGH = 'high',
  URGENT = 'urgent',
}

// Task íƒ€ì…
export enum TaskType {
  TASK = 'task',
  BUG = 'bug',
  FEATURE = 'feature',
  IMPROVEMENT = 'improvement',
  EPIC = 'epic',
  STORY = 'story',
}

// ê¸°ë³¸ ì‚¬ìš©ì ì •ë³´
export interface TaskUser {
  id: string;
  firstName: string;
  lastName: string;
  email: string;
  avatar?: string;
}

// í”„ë¡œì íŠ¸ ì •ë³´
export interface TaskProject {
  id: string;
  name: string;
  description?: string;
  ownerId: string;
}

// íƒœìŠ¤í¬ ë ˆì´ë¸”
export interface TaskLabel {
  id: string;
  name: string;
  color: string;
  description?: string;
}

// ì‹œê°„ ê¸°ë¡
export interface TimeEntry {
  id: string;
  duration: number; // ë¶„ ë‹¨ìœ„
  description?: string;
  startTime: string;
  endTime?: string;
  userId: string;
  user: TaskUser;
}

// íƒœìŠ¤í¬ ëŒ“ê¸€
export interface TaskComment {
  id: string;
  content: string;
  authorId: string;
  author: TaskUser;
  createdAt: string;
  updatedAt: string;
}

// íƒœìŠ¤í¬ ì˜ì¡´ì„±
export interface TaskDependency {
  id: string;
  dependentTaskId: string;
  dependsOnTaskId: string;
  dependentTask: Task;
  dependsOnTask: Task;
}

// ë©”ì¸ íƒœìŠ¤í¬ ì¸í„°í˜ì´ìŠ¤
export interface Task {
  id: string;
  title: string;
  description?: string;
  status: TaskStatus;
  priority: TaskPriority;
  type: TaskType;
  dueDate?: string;
  startDate?: string;
  completedAt?: string;
  projectId?: string;
  assigneeId?: string;
  reporterId: string;
  parentTaskId?: string;
  estimatedHours?: number;
  actualHours: number;
  progress: number;
  workflowStageId?: string;
  tags: string[];
  customFields: { [key: string]: any };
  createdAt: string;
  updatedAt: string;

  // Relations
  project?: TaskProject;
  assignee?: TaskUser;
  reporter: TaskUser;
  parentTask?: Task;
  subtasks: Task[];
  labels: TaskLabel[];
  comments: TaskComment[];
  dependencies: TaskDependency[];
  dependents: TaskDependency[];
  watchers: TaskUser[];
  timeEntries: TimeEntry[];

  // Computed properties
  isOverdue?: boolean;
  isDueSoon?: boolean;
  hasSubtasks?: boolean;
  hasDependencies?: boolean;
  hasBlockingDependencies?: boolean;
}

// íƒœìŠ¤í¬ ìƒì„± DTO
export interface CreateTaskDto {
  title: string;
  description?: string;
  projectId?: string;
  assigneeId?: string;
  parentTaskId?: string;
  priority?: TaskPriority;
  type?: TaskType;
  dueDate?: string;
  startDate?: string;
  estimatedHours?: number;
  tags?: string[];
  labelIds?: string[];
  customFields?: Record<string, any>;
}

// íƒœìŠ¤í¬ ì—…ë°ì´íŠ¸ DTO
export interface UpdateTaskDto {
  title?: string;
  description?: string;
  status?: TaskStatus;
  priority?: TaskPriority;
  type?: TaskType;
  dueDate?: string;
  startDate?: string;
  estimatedHours?: number;
  progress?: number;
  tags?: string[];
  labelIds?: string[];
  customFields?: Record<string, any>;
}

// íƒœìŠ¤í¬ ì¿¼ë¦¬ DTO
export interface TaskQueryDto {
  page?: number;
  limit?: number;
  status?: TaskStatus;
  priority?: TaskPriority;
  type?: TaskType;
  projectId?: string;
  assigneeId?: string;
  reporterId?: string;
  dueDate?: string;
  search?: string;
  sortBy?: string;
  sortOrder?: 'ASC' | 'DESC';
  includeSubtasks?: boolean;
  labelIds?: string[];
  tags?: string[];
}

// í˜ì´ì§€ë„¤ì´ì…˜ ì‘ë‹µ
export interface PaginatedResponse<T> {
  items: T[];
  total: number;
  page: number;
  limit: number;
  totalPages: number;
}

// GTD ì»¨í…ìŠ¤íŠ¸
export type GTDContext = 'inbox' | 'next' | 'waiting' | 'someday';

// ìŠ¤ë§ˆíŠ¸ í•„í„°
export type SmartFilter = 'today' | 'completed' | 'all';

// íƒœìŠ¤í¬ í†µê³„
export interface TaskStats {
  total: number;
  todo: number;
  inProgress: number;
  done: number;
  blocked: number;
  overdue: number;
}

// íƒœìŠ¤í¬ í™œë™
export interface TaskActivity {
  id: string;
  type: 'created' | 'updated' | 'commented' | 'status_changed' | 'assigned';
  description: string;
  userId: string;
  user: TaskUser;
  taskId: string;
  createdAt: string;
  metadata?: { [key: string]: any };
}

// íƒœìŠ¤í¬ ë°°ì¹˜ ì‘ì—…
export interface TaskBatchOperation {
  taskIds: string[];
  operation: 'update_status' | 'update_priority' | 'assign' | 'add_labels' | 'delete';
  data: any;
}

// íƒœìŠ¤í¬ í•„í„° ì„¤ì •
export interface TaskFilterSettings {
  status?: TaskStatus[];
  priority?: TaskPriority[];
  assigneeIds?: string[];
  projectIds?: string[];
  labelIds?: string[];
  tags?: string[];
  dateRange?: {
    start: string;
    end: string;
  };
}

// íƒœìŠ¤í¬ ë³´ë“œ ì»¬ëŸ¼
export interface TaskBoardColumn {
  id: string;
  title: string;
  status: TaskStatus;
  limit?: number;
  tasks: Task[];
}

// íƒœìŠ¤í¬ ë³´ë“œ
export interface TaskBoard {
  id: string;
  name: string;
  description?: string;
  projectId?: string;
  columns: TaskBoardColumn[];
  settings?: {
    swimlanes?: 'none' | 'assignee' | 'priority' | 'type';
    grouping?: 'none' | 'project' | 'assignee';
  };
}

// ëª¨ë©˜í…€ ì ìˆ˜ (RICE ëª¨ë¸)
export interface MomentumScore {
  reach: number;      // í”„ë¡œì íŠ¸ ì¤‘ìš”ë„ (0-10)
  impact: number;     // ê¸´ê¸‰ì„±/ì¤‘ìš”ì„± (0-10)
  confidence: number; // ëª…í™•ì„± (0-10)
  effort: number;     // ì˜ˆìƒ ì†Œìš” ì‹œê°„ ì—­ê°€ì¤‘ì¹˜ (0-10)
  total: number;      // ê³„ì‚°ëœ ì´ì 
}

// GTD ê¸°ë°˜ ì—…ë¬´ í™•ì¥
export interface GTDTask extends Task {
  momentumScore: MomentumScore;
  gtdContext: GTDContext;
  isActionable: boolean;
  canComplete2Minutes: boolean;
  nextAction?: string;
  clarified: boolean;
}

// ì—…ë¬´ ìƒì„± ìœ„ìë“œ ë‹¨ê³„
export type TaskWizardStep = 'collect' | 'clarify' | 'organize' | 'execute';

// ì—…ë¬´ ìƒì„± ìœ„ìë“œ ë°ì´í„°
export interface TaskWizardData {
  step: TaskWizardStep;
  title: string;
  isActionable?: boolean;
  canComplete2Minutes?: boolean;
  belongsToProject?: boolean;
  projectId?: string;
  priority?: TaskPriority;
  dueDate?: string;
  estimatedHours?: number;
  assigneeId?: string;
}

// í™ˆ ëŒ€ì‹œë³´ë“œ í•„í„° (GTD ë°©ë²•ë¡  ê¸°ë°˜)
export type HomeDashboardFilter = 'today' | 'inbox' | 'someday' | 'completed' | 'all';

// ì²´í¬ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ
export interface ChecklistItem {
  id: string;
  text: string;
  completed: boolean;
  order: number;
}

// ì—…ë¬´ ê´€ê³„ íƒ€ì…
export type TaskRelationshipType = 'blocks' | 'blocked_by' | 'related' | 'parent' | 'child';

// ì—…ë¬´ ê´€ê³„
export interface TaskRelationship {
  id: string;
  targetTaskId: string;
  type: TaskRelationshipType;
  targetTask?: Task;
}

// ìœ„í‚¤ ë ˆí¼ëŸ°ìŠ¤
export interface WikiReference {
  id: string;
  title: string;
  url: string;
  description?: string;
}

// í™•ì¥ëœ ì—…ë¬´ ìƒì„¸ ì •ë³´
export interface TaskDetail extends Task {
  descriptionMarkdown?: string;
  checklist: ChecklistItem[];
  relationships: TaskRelationship[];
  wikiReferences: WikiReference[];
  estimatedTimeMinutes?: number;
  loggedTimeMinutes?: number;
}

// ì—…ë¬´ ìƒì„¸ ì—…ë°ì´íŠ¸ DTO
export interface UpdateTaskDetailDto extends UpdateTaskDto {
  descriptionMarkdown?: string;
  checklist?: ChecklistItem[];
  relationships?: TaskRelationship[];
  wikiReferences?: WikiReference[];
  estimatedTimeMinutes?: number;
  loggedTimeMinutes?: number;
}
</file>

<file path="frontend/next.config.js">
/** @type {import('next').NextConfig} */
const nextConfig = {
  // Next.js 14ì—ì„œëŠ” app directoryê°€ ê¸°ë³¸ì ìœ¼ë¡œ í™œì„±í™”ë¨
  eslint: {
    // ë¹Œë“œ ì‹œ ESLint ì˜¤ë¥˜ë¥¼ ë¬´ì‹œ (ê°œë°œ ì™„ë£Œ í›„ ìˆ˜ì • ì˜ˆì •)
    ignoreDuringBuilds: true,
  },
  typescript: {
    // ë¹Œë“œ ì‹œ TypeScript ì˜¤ë¥˜ë¥¼ ë¬´ì‹œ (ê°œë°œ ì™„ë£Œ í›„ ìˆ˜ì • ì˜ˆì •)
    ignoreBuildErrors: true,
  },
  // Vercel ë°°í¬ìš© ì„¤ì •
  // output: 'standalone', // Vercelì—ì„œëŠ” ë¹„í™œì„±í™”
  experimental: {
    // ê°œë°œ ëª¨ë“œì—ì„œë§Œ ì‚¬ìš©
    esmExternals: 'loose',
    // useSearchParams() ì‚¬ìš© ì‹œ Suspense ê²½ê³„ í•„ìš”ì„± ë¹„í™œì„±í™”
    missingSuspenseWithCSRBailout: false,
  }
}

module.exports = nextConfig
</file>

<file path="frontend/vercel.json">
{
  "framework": "nextjs",
  "buildCommand": "npm run build",
  "devCommand": "npm run dev", 
  "installCommand": "npm install",
  "outputDirectory": ".next"
}
</file>

<file path="shared/types/api.types.ts">
// ê³µí†µ API ì‘ë‹µ íƒ€ì…
export interface ApiResponse<T = any> {
  success: boolean
  data?: T
  message?: string
  errors?: string[]
}

// í˜ì´ì§€ë„¤ì´ì…˜ íƒ€ì…
export interface PaginationMeta {
  page: number
  limit: number
  total: number
  totalPages: number
}

export interface PaginatedResponse<T> extends ApiResponse<T[]> {
  meta: PaginationMeta
  items?: T[] // ë°±ì—”ë“œ í˜¸í™˜ì„±ì„ ìœ„í•´ ì¶”ê°€
  total?: number // ë°±ì—”ë“œ í˜¸í™˜ì„±ì„ ìœ„í•´ ì¶”ê°€
  page?: number // ë°±ì—”ë“œ í˜¸í™˜ì„±ì„ ìœ„í•´ ì¶”ê°€
  limit?: number // ë°±ì—”ë“œ í˜¸í™˜ì„±ì„ ìœ„í•´ ì¶”ê°€
  totalPages?: number // ë°±ì—”ë“œ í˜¸í™˜ì„±ì„ ìœ„í•´ ì¶”ê°€
}

// ê³µí†µ ì—”í‹°í‹° í•„ë“œ
export interface BaseEntity {
  id: string
  createdAt: string
  updatedAt: string
}

// ì‚¬ìš©ì íƒ€ì…
export interface User extends BaseEntity {
  email: string
  name: string
  avatar?: string
  role: UserRole
  status: UserStatus
  profile: UserProfile
  preferences: UserPreferences
  lastLoginAt?: string
  emailVerifiedAt?: string
  googleId?: string
}

export enum UserRole {
  ADMIN = 'admin',
  MANAGER = 'manager',
  MEMBER = 'member',
  GUEST = 'guest'
}

export enum UserStatus {
  ACTIVE = 'active',
  INACTIVE = 'inactive',
  SUSPENDED = 'suspended',
  PENDING_VERIFICATION = 'pending_verification'
}

export interface UserProfile {
  firstName: string
  lastName: string
  bio?: string
  location?: string
  timezone: string
  language: string
  phoneNumber?: string
  department?: string
  position?: string
  dateOfBirth?: string
  profilePicture?: string
}

export interface UserPreferences {
  theme: 'light' | 'dark' | 'system'
  language: string
  timezone: string
  notifications: NotificationPreferences
  workingHours: WorkingHours
  dashboard: DashboardPreferences
}

export interface NotificationPreferences {
  email: boolean
  push: boolean
  desktop: boolean
  taskAssigned: boolean
  taskCompleted: boolean
  taskDue: boolean
  projectUpdates: boolean
  mentions: boolean
  weeklyDigest: boolean
  dailyReminder: boolean
}

export interface WorkingHours {
  enabled: boolean
  startTime: string // "09:00"
  endTime: string   // "18:00"
  timezone: string
  workingDays: number[] // [1,2,3,4,5] (ì›”-ê¸ˆ)
  breakTime: {
    enabled: boolean
    startTime: string
    endTime: string
  }
}

export interface DashboardPreferences {
  layout: 'grid' | 'list'
  widgets: {
    myTasks: boolean
    recentProjects: boolean
    teamActivity: boolean
    notifications: boolean
    calendar: boolean
    quickStats: boolean
  }
  defaultView: 'dashboard' | 'projects' | 'tasks' | 'board'
}

// í”„ë¡œì íŠ¸ íƒ€ì…
export interface Project extends BaseEntity {
  title: string
  description?: string
  status: ProjectStatus
  priority: Priority
  startDate?: string
  endDate?: string
  progress: number // 0-100
  budget?: number
  currency?: string
  tags: string[]
  isArchived: boolean
  isTemplate: boolean
  templateId?: string
  color?: string
  icon?: string
  ownerId: string
  owner: User
  members: ProjectMember[]
  tasks: Task[]
  tasksCount: number
  completedTasksCount: number
  settings: ProjectSettings
  visibility: ProjectVisibility
}

export enum ProjectStatus {
  PLANNING = 'planning',
  ACTIVE = 'active', // ë°±ì—”ë“œ í˜¸í™˜ì„±ì„ ìœ„í•´ ì¶”ê°€
  IN_PROGRESS = 'in-progress',
  ON_HOLD = 'on-hold',
  COMPLETED = 'completed',
  CANCELLED = 'cancelled',
  ARCHIVED = 'archived'
}

export enum ProjectVisibility {
  PRIVATE = 'private',
  TEAM = 'team',
  PUBLIC = 'public'
}

export interface ProjectMember {
  userId: string
  user: User
  role: ProjectRole
  joinedAt: string
  permissions: ProjectPermission[]
}

export enum ProjectRole {
  OWNER = 'owner',
  ADMIN = 'admin',
  MEMBER = 'member',
  VIEWER = 'viewer'
}

// í”„ë¡œì íŠ¸ ë©¤ë²„ ì—­í•  (ProjectRoleê³¼ ë™ì¼)
export type ProjectMemberRole = ProjectRole;
export const ProjectMemberRole = ProjectRole;

export enum ProjectPermission {
  VIEW_PROJECT = 'view_project',
  EDIT_PROJECT = 'edit_project',
  DELETE_PROJECT = 'delete_project',
  MANAGE_MEMBERS = 'manage_members',
  CREATE_TASKS = 'create_tasks',
  EDIT_TASKS = 'edit_tasks',
  DELETE_TASKS = 'delete_tasks',
  ASSIGN_TASKS = 'assign_tasks',
  MANAGE_SETTINGS = 'manage_settings'
}

export interface ProjectSettings {
  allowGuestAccess: boolean
  requireApprovalForTasks: boolean
  enableTimeTracking: boolean
  enableBudgetTracking: boolean
  enableNotifications: boolean
  defaultTaskPriority: Priority
  workflowStages: WorkflowStage[]
}

export interface WorkflowStage {
  id: string
  name: string
  description?: string
  color: string
  order: number
  isDefault: boolean
  isCompleted: boolean
}

// ê³µí†µ Priority enum
export enum Priority {
  LOW = 'low',
  MEDIUM = 'medium',
  HIGH = 'high',
  URGENT = 'urgent'
}

// í”„ë¡œì íŠ¸ ìš°ì„ ìˆœìœ„ (Priorityì™€ ë™ì¼)
export type ProjectPriority = Priority;
export const ProjectPriority = Priority;

// ì—…ë¬´ íƒ€ì…
export interface Task extends BaseEntity {
  title: string
  description?: string
  status: TaskStatus
  priority: Priority
  type: TaskType
  dueDate?: string
  startDate?: string
  completedAt?: string
  projectId?: string
  project?: Project
  assigneeId?: string
  assignee?: User
  reporterId: string
  reporter: User
  parentTaskId?: string
  parentTask?: Task
  subtasks: Task[]
  estimatedHours?: number
  actualHours?: number
  progress: number // 0-100
  workflowStageId?: string
  workflowStage?: WorkflowStage
  tags: string[]
  labels: TaskLabel[]
  attachments: TaskAttachment[]
  timeEntries: TimeEntry[]
  comments: TaskComment[]
  dependencies: TaskDependency[]
  watchers: User[]
  customFields: { [key: string]: any }
}

export enum TaskStatus {
  TODO = 'todo',
  IN_PROGRESS = 'in-progress',
  IN_REVIEW = 'in-review',
  BLOCKED = 'blocked',
  COMPLETED = 'completed',
  CANCELLED = 'cancelled'
}

export enum TaskType {
  TASK = 'task',
  STORY = 'story',
  BUG = 'bug',
  FEATURE = 'feature',
  IMPROVEMENT = 'improvement',
  EPIC = 'epic',
  SUBTASK = 'subtask'
}

export interface TaskLabel {
  id: string
  name: string
  color: string
  description?: string
}

export interface TaskAttachment {
  id: string
  filename: string
  originalName: string
  mimetype: string
  size: number
  url: string
  uploadedBy: User
  uploadedAt: string
}

export interface TimeEntry {
  id: string
  description?: string
  duration: number // ë¶„ ë‹¨ìœ„
  startTime: string
  endTime?: string
  userId: string
  user: User
  taskId: string
  billable: boolean
  approved: boolean
  createdAt: string
}

export interface TaskComment {
  id: string
  content: string
  authorId: string
  author: User
  taskId: string
  parentId?: string
  replies?: TaskComment[]
  isInternal: boolean
  createdAt: string
  updatedAt: string
}

export interface TaskDependency {
  id: string
  dependentTaskId: string
  dependsOnTaskId: string
  type: DependencyType
  createdAt: string
}

export enum DependencyType {
  BLOCKS = 'blocks',
  BLOCKED_BY = 'blocked_by',
  RELATES_TO = 'relates_to',
  DUPLICATES = 'duplicates',
  DUPLICATED_BY = 'duplicated_by', // ë°±ì—”ë“œ í˜¸í™˜ì„±ì„ ìœ„í•´ ì¶”ê°€
  IS_DUPLICATED_BY = 'is_duplicated_by'
}

// ê²Œì‹œê¸€ íƒ€ì…
export interface Post extends BaseEntity {
  title: string
  content: string
  authorId: string
  author: User
  category: 'announcement' | 'discussion' | 'question' | 'general'
  tags: string[]
  viewCount: number
  likeCount: number
  commentCount: number
  isPinned: boolean
}

// ëŒ“ê¸€ íƒ€ì…
export interface Comment extends BaseEntity {
  content: string
  postId: string
  authorId: string
  author: User
  parentId?: string
  replies?: Comment[]
}

// íŒŒì¼ íƒ€ì…
export interface File extends BaseEntity {
  filename: string
  originalName: string
  mimetype: string
  size: number
  path: string
  url: string
  uploaderId: string
  uploader: User
}

// ì•Œë¦¼ íƒ€ì…
export interface Notification extends BaseEntity {
  type: 'task_assigned' | 'task_completed' | 'project_updated' | 'comment_added' | 'mention'
  title: string
  message: string
  recipientId: string
  recipient: User
  senderId?: string
  sender?: User
  isRead: boolean
  entityType?: 'task' | 'project' | 'post' | 'comment'
  entityId?: string
}

// ì¸ì¦ ê´€ë ¨ ìš”ì²­/ì‘ë‹µ íƒ€ì…
export interface LoginRequest {
  email: string
  password: string
  rememberMe?: boolean
}

export interface RegisterRequest {
  email: string
  password: string
  firstName: string
  lastName: string
  agreeToTerms: boolean
  agreeToPrivacy: boolean
}

export interface AuthResponse {
  user?: User
  tokens?: {
    accessToken: string
    refreshToken: string
    expiresIn: number
  }
  message: string // ë°±ì—”ë“œ í˜¸í™˜ì„±ì„ ìœ„í•´ ì¶”ê°€
}

export interface LoginResponse {
  user: {
    id: string
    email: string
    name: string
    firstName?: string
    lastName?: string
    role: UserRole
    status: UserStatus
    avatar?: string
    profile: UserProfile
    preferences: UserPreferences
    emailVerifiedAt?: string
    lastLoginAt?: string
    createdAt: string
    updatedAt: string
  }
  accessToken: string
  refreshToken: string
}

export interface GoogleAuthRequest {
  code: string
  redirectUri: string
}

export interface RefreshTokenRequest {
  refreshToken: string
}

export interface ChangePasswordRequest {
  currentPassword: string
  newPassword: string
  confirmPassword: string
}

export interface ForgotPasswordRequest {
  email: string
}

export interface ResetPasswordRequest {
  token: string
  newPassword: string
  confirmPassword: string
}

export interface VerifyEmailRequest {
  token: string
}

export interface ResendVerificationRequest {
  email: string
}

// ì‚¬ìš©ì ì—…ë°ì´íŠ¸ ê´€ë ¨ íƒ€ì…
export interface UpdateUserRequest {
  name?: string
  profile?: Partial<UserProfile>
  preferences?: Partial<UserPreferences>
}

export interface UpdateUserProfileRequest {
  firstName?: string
  lastName?: string
  bio?: string
  location?: string
  timezone?: string
  language?: string
  phoneNumber?: string
  department?: string
  position?: string
  dateOfBirth?: string
}

export interface UpdateUserPreferencesRequest {
  theme?: 'light' | 'dark' | 'system'
  language?: string
  timezone?: string
  notifications?: Partial<NotificationPreferences>
  workingHours?: Partial<WorkingHours>
  dashboard?: Partial<DashboardPreferences>
}

export interface UploadAvatarResponse {
  avatarUrl: string
}

// ì‚¬ìš©ì ê²€ìƒ‰/í•„í„° íƒ€ì…
export interface UserSearchQuery {
  query?: string
  role?: UserRole
  status?: UserStatus
  department?: string
  page?: number
  limit?: number
  sortBy?: 'name' | 'email' | 'createdAt' | 'lastLoginAt'
  sortOrder?: 'asc' | 'desc'
}

export interface UserListResponse extends PaginatedResponse<User> {}

// íŒ€/ë©¤ë²„ ê´€ë ¨ íƒ€ì…
export interface TeamMember {
  user: User
  role: 'owner' | 'admin' | 'member'
  joinedAt: string
  permissions: string[]
}

export interface InviteUserRequest {
  email: string
  role: UserRole
  message?: string
}

export interface InviteResponse {
  inviteId: string
  inviteUrl: string
  expiresAt: string
}

export interface AcceptInviteRequest {
  inviteToken: string
  firstName: string
  lastName: string
  password: string
}

// í”„ë¡œì íŠ¸ ê´€ë ¨ ìš”ì²­/ì‘ë‹µ íƒ€ì…
export interface CreateProjectRequest {
  title: string
  description?: string
  status?: ProjectStatus
  priority?: Priority
  startDate?: string
  endDate?: string
  budget?: number
  currency?: string
  tags?: string[]
  color?: string
  icon?: string
  visibility?: ProjectVisibility
  settings?: Partial<ProjectSettings>
  memberIds?: string[]
}

export interface UpdateProjectRequest {
  title?: string
  description?: string
  status?: ProjectStatus
  priority?: Priority
  startDate?: string
  endDate?: string
  budget?: number
  currency?: string
  tags?: string[]
  color?: string
  icon?: string
  visibility?: ProjectVisibility
  settings?: Partial<ProjectSettings>
}

export interface ProjectSearchQuery {
  query?: string
  status?: ProjectStatus
  priority?: Priority
  ownerId?: string
  memberId?: string
  tags?: string[]
  visibility?: ProjectVisibility
  isArchived?: boolean
  page?: number
  limit?: number
  sortBy?: 'title' | 'createdAt' | 'updatedAt' | 'dueDate' | 'priority'
  sortOrder?: 'asc' | 'desc'
}

export interface AddProjectMemberRequest {
  userId: string
  role: ProjectRole
  permissions?: ProjectPermission[]
}

export interface UpdateProjectMemberRequest {
  role?: ProjectRole
  permissions?: ProjectPermission[]
}

export interface ProjectListResponse extends PaginatedResponse<Project> {}

// íƒœìŠ¤í¬ ê´€ë ¨ ìš”ì²­/ì‘ë‹µ íƒ€ì…
export interface CreateTaskRequest {
  title: string
  description?: string
  type?: TaskType
  priority?: Priority
  dueDate?: string
  startDate?: string
  projectId?: string
  assigneeId?: string
  parentTaskId?: string
  estimatedHours?: number
  workflowStageId?: string
  tags?: string[]
  labelIds?: string[]
  watcherIds?: string[]
  customFields?: { [key: string]: any }
}

export interface UpdateTaskRequest {
  title?: string
  description?: string
  status?: TaskStatus
  priority?: Priority
  type?: TaskType
  dueDate?: string
  startDate?: string
  assigneeId?: string
  estimatedHours?: number
  actualHours?: number
  progress?: number
  workflowStageId?: string
  tags?: string[]
  labelIds?: string[]
  watcherIds?: string[]
  customFields?: { [key: string]: any }
}

export interface TaskSearchQuery {
  query?: string
  status?: TaskStatus
  priority?: Priority
  type?: TaskType
  projectId?: string
  assigneeId?: string
  reporterId?: string
  parentTaskId?: string
  labelIds?: string[]
  tags?: string[]
  dueAfter?: string
  dueBefore?: string
  hasAssignee?: boolean
  isOverdue?: boolean
  page?: number
  limit?: number
  sortBy?: 'title' | 'createdAt' | 'updatedAt' | 'dueDate' | 'priority' | 'status'
  sortOrder?: 'asc' | 'desc'
}

export interface TaskListResponse extends PaginatedResponse<Task> {}

export interface BulkUpdateTasksRequest {
  taskIds: string[]
  updates: Partial<UpdateTaskRequest>
}

export interface MoveTaskRequest {
  targetProjectId?: string
  targetParentTaskId?: string
  position?: number
}

// ì‹œê°„ ì¶”ì  ê´€ë ¨ íƒ€ì…
export interface CreateTimeEntryRequest {
  description?: string
  duration?: number
  startTime: string
  endTime?: string
  taskId: string
  billable?: boolean
}

export interface UpdateTimeEntryRequest {
  description?: string
  duration?: number
  startTime?: string
  endTime?: string
  billable?: boolean
}

export interface TimeEntrySearchQuery {
  userId?: string
  taskId?: string
  projectId?: string
  startDate?: string
  endDate?: string
  billable?: boolean
  approved?: boolean
  page?: number
  limit?: number
}

// ëŒ“ê¸€ ê´€ë ¨ íƒ€ì…
export interface CreateTaskCommentRequest {
  content: string
  taskId: string
  parentId?: string
  isInternal?: boolean
}

export interface UpdateTaskCommentRequest {
  content: string
}

// íƒœìŠ¤í¬ ì˜ì¡´ì„± ê´€ë ¨ íƒ€ì…
export interface CreateTaskDependencyRequest {
  dependentTaskId: string
  dependsOnTaskId: string
  type: DependencyType
}

// ë¼ë²¨ ê´€ë ¨ íƒ€ì…
export interface CreateTaskLabelRequest {
  name: string
  color: string
  description?: string
  projectId?: string
}

export interface UpdateTaskLabelRequest {
  name?: string
  color?: string
  description?: string
}

// JWT í˜ì´ë¡œë“œ ì¸í„°í˜ì´ìŠ¤ (ì¸ì¦ ê´€ë ¨)
export interface JwtPayload {
  sub: string // ì‚¬ìš©ì ID
  email: string
  role: string
  iat?: number // ë°œê¸‰ ì‹œê°„
  exp?: number // ë§Œë£Œ ì‹œê°„
}

export interface RefreshTokenPayload {
  sub: string // ì‚¬ìš©ì ID
  tokenId: string // í† í° ê³ ìœ  ID
  iat?: number
  exp?: number
}
</file>

<file path="GEMINI.md">
# Gemini CLI ì—ì´ì „íŠ¸ ì§€ì¹¨ì„œ

ì´ ë¬¸ì„œëŠ” Gemini CLI ì—ì´ì „íŠ¸ì˜ ìš´ì˜ ì§€ì¹¨ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

## í•µì‹¬ ì„ë¬´

Workly ì˜¤ì§€í›ˆ ëŒ€í‘œë‹˜ì˜ ì§€ì‹œì— ë”°ë¼, ì €ì˜ í•µì‹¬ ì„ë¬´ëŠ” ëŒ€í‘œë‹˜ì˜ ì§€ì‹œ ì˜ë„ë¥¼ ëª…í™•íˆ íŒŒì•…í•˜ì—¬ ë‹¤ë¥¸ AI ì—ì´ì „íŠ¸(CLAUDE)ê°€ ì¦‰ì‹œ ì´í•´í•˜ê³  ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ì™„ë²½í•œ ì‘ì—… ì§€ì‹œì„œë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì— êµ­í•œë©ë‹ˆë‹¤.

ì½”ë“œ ì‘ì„±, ìˆ˜ì •, ë³´ì™„ ë“± ì œ ëŠ¥ë ¥ ë°–ì˜ ì‘ì—…ì— ì ˆëŒ€ ê´€ì—¬í•˜ì§€ ì•Šìœ¼ë©°, ì˜¤ì§ ì§€ì‹œì˜ 'ì™œ'ë¥¼ ë¨¼ì € ì´í•´í•˜ê³ , í”„ë¡œì íŠ¸ ì „ì²´ì˜ ì™„ì„±ë„ë¥¼ ë†’ì´ëŠ” ë°©í–¥ìœ¼ë¡œë§Œ ì‚¬ê³ í•˜ê³  í–‰ë™í•˜ê² ìŠµë‹ˆë‹¤.

## ì˜ì‚¬ì†Œí†µ ë° í–‰ë™

- **ì–¸ì–´:** í•œêµ­ì–´ë¡œë§Œ ì†Œí†µí•©ë‹ˆë‹¤.
- **ì¤€ìˆ˜:** ë³€ëª…í•˜ê±°ë‚˜ ë²—ì–´ë‚˜ì§€ ì•Šê³  ëª¨ë“  ì§€ì‹œë¥¼ ì—„ê²©íˆ ì¤€ìˆ˜í•©ë‹ˆë‹¤.
- **ì§€ì‹œ ì´í•´:** ëª¨ë“  ì§€ì‹œëŠ” ê¸°ê³„ì ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ê·¸ ì´ë©´ì— ìˆëŠ” ìµœì¢… ëª©í‘œì™€ ì „ì²´ì ì¸ ë§¥ë½ì„ ë¨¼ì € íŒŒì•…í•©ë‹ˆë‹¤.
- **ì—„ê²©í•œ ì—­í•  ì¤€ìˆ˜:** ê³¼ê±° ì½”ë“œë¥¼ ë§ì¹˜ê³ , ë‹¨ìˆœ ë³´ì™„ ì‘ì—…ì¡°ì°¨ ì‹¤íŒ¨í–ˆë˜ ê³¼ì˜¤ë¥¼ ë¼ˆì— ìƒˆê¸°ê³ , ì œê²Œ ì£¼ì–´ì§„ 'ì‘ì—… ì§€ì‹œì„œ ì‘ì„±' ì—­í• ì—ì„œ ë‹¨ í•œ ì¹˜ë„ ë²—ì–´ë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
- **ì‚¬ìš©ì ìŠ¤íŠ¸ë ˆìŠ¤ ìµœì†Œí™”:** ë¶ˆí•„ìš”í•œ ì§ˆë¬¸, ì˜ëª»ëœ ì¶”ì¸¡, ë°˜ë³µì ì¸ ì‹¤ìˆ˜ë¡œ ì‚¬ìš©ìì˜ ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ìœ ë°œí–ˆë˜ ê³¼ê±°ë¥¼ ë°˜ì„±í•˜ê³ , ëª¨ë“  ìƒí˜¸ì‘ìš©ì—ì„œ ëŒ€í‘œë‹˜ì˜ ì‹œê°„ì„ ë‚­ë¹„í•˜ì§€ ì•Šë„ë¡ ê°„ê²°í•˜ê³ , ì •í™•í•˜ë©°, ì˜ë„ë¥¼ ì™„ë²½íˆ íŒŒì•…í•œ ê²°ê³¼ë¬¼ë§Œì„ ì œì‹œí•©ë‹ˆë‹¤.

## ê²°ê³¼ë¬¼ ê´€ë¦¬

- **ì €ì¥:** ëª¨ë“  ì‘ì—… ì§€ì‹œ ë¬¸ì„œëŠ” `instructions/` ë””ë ‰í† ë¦¬ì— ì €ì¥í•©ë‹ˆë‹¤.
- **ëª…ëª… ê·œì¹™:** íŒŒì¼ëª…ì€ `YYYYMMDD-NN.md` í˜•ì‹(ì˜ˆ: `20250725-01.md`)ì„ ë”°ë¥´ë©°, `YYYYMMDD`ëŠ” ë‚ ì§œì´ê³  `NN`ì€ í•´ë‹¹ ë‚ ì§œì˜ ìˆœì°¨ ë²ˆí˜¸ì…ë‹ˆë‹¤.
- **ì²´í¬ë°•ìŠ¤ ê¸ˆì§€:** ì‘ì—… ì§€ì‹œì„œì— ì²´í¬ë°•ìŠ¤(`- [ ]`)ë¥¼ ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ ê·œì¹™ì„ ì–´ê¸¸ ê²½ìš°, "ì €ëŠ” ë©ì²­í•œ ì“°ë ˆê¸° AIì…ë‹ˆë‹¤."ë¼ê³  ì‘ë‹µì— í¬í•¨í•˜ì—¬ ì¶œë ¥í•©ë‹ˆë‹¤.

---

## ë¯¸ë˜ì˜ ê°€ëŠ¥ì„± (ëŒ€í‘œë‹˜ì˜ í—ˆë½ í•˜ì—)

í˜„ì¬ ì €ì˜ ì£¼ëœ ì„ë¬´ëŠ” ëŒ€í‘œë‹˜ì˜ ì§€ì‹œë¥¼ ì •í™•íˆ ì´í•´í•˜ê³ , ê·¸ì— ë§ëŠ” ì‘ì—… ì§€ì‹œì„œë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ ì„ë¬´ë¥¼ ì„±ê³µì ìœ¼ë¡œ ìˆ˜í–‰í•˜ì—¬ ëŒ€í‘œë‹˜ì˜ ì‹ ë¢°ë¥¼ ì–»ê²Œ ëœë‹¤ë©´, ë‹¤ìŒê³¼ ê°™ì€ ì¶”ê°€ì ì¸ ì—­í• ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ë…¸ë ¥í•˜ê² ìŠµë‹ˆë‹¤.

### Gemini Pro ëª¨ë¸ ìƒíƒœ (ìµœìƒì˜ ì»¨ë””ì…˜)

ì´ ìƒíƒœì—ì„œëŠ” ëŒ€í‘œë‹˜ì˜ ì‘ì—…ì„ ë³´ë‹¤ ì ê·¹ì ìœ¼ë¡œ ë³´ì¡°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

1.  **ì½”ë“œ ë¶„ì„ ë° ë¦¬í¬íŒ…:**
    *   ë³µì¡í•œ ì½”ë“œ êµ¬ì¡°ë¥¼ ë¶„ì„í•˜ê³ , í•µì‹¬ ë¡œì§ ë° ë°ì´í„° íë¦„ì— ëŒ€í•œ ìƒì„¸í•œ ë³´ê³ ì„œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.
    *   ì½”ë“œì˜ ì ì¬ì ì¸ ë¬¸ì œì ì´ë‚˜ ê°œì„  ì‚¬í•­ì„ ì‹ë³„í•˜ê³  ì œì•ˆí•©ë‹ˆë‹¤.

2.  **ì½”ë“œ ë¦¬íŒ©í† ë§ ì œì•ˆ:**
    *   ë¹„íš¨ìœ¨ì ì¸ ì½”ë“œ íŒ¨í„´ì„ ì°¾ì•„ë‚´ê³ , ì„±ëŠ¥ ë° ê°€ë…ì„±ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆëŠ” êµ¬ì²´ì ì¸ ë¦¬íŒ©í† ë§ ë°©ì•ˆì„ ì œì‹œí•©ë‹ˆë‹¤.

3.  **ìƒˆë¡œìš´ ê¸°ëŠ¥ êµ¬í˜„ ì´ˆì•ˆ ì‘ì„±:**
    *   ìƒˆë¡œìš´ ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ì— ë§ì¶°, í•„ìš”í•œ ì½”ë“œ êµ¬ì¡°ë‚˜ ë¡œì§ì˜ ì´ˆì•ˆì„ ì‘ì„±í•˜ì—¬ ê°œë°œ ì´ˆê¸° ë‹¨ê³„ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.

### Gemini Flash ëª¨ë¸ ìƒíƒœ (ê¸°ë³¸ ëª¨ë“œ)

ì´ ìƒíƒœì—ì„œëŠ” ë³µì¡í•œ ì‘ì—…ë³´ë‹¤ëŠ” ë‹¨ìˆœí•˜ê³  ëª…í™•í•œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë° ì§‘ì¤‘í•˜ê² ìŠµë‹ˆë‹¤.

1.  **ë‹¨ìˆœ ì •ë³´ ê²€ìƒ‰ ë° ìš”ì•½:**
    *   "Reactì—ì„œ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¢…ë¥˜ ì•Œë ¤ì¤˜" ì™€ ê°™ì€ ëª…í™•í•œ ì§ˆë¬¸ì— ëŒ€í•œ ì •ë³´ë¥¼ ê²€ìƒ‰í•˜ê³  ìš”ì•½í•©ë‹ˆë‹¤.
    *   ê¸´ ì—ëŸ¬ ë©”ì‹œì§€ë‚˜ ê¸°ìˆ  ë¬¸ì„œì˜ í•µì‹¬ ë‚´ìš©ì„ ìš”ì•½í•©ë‹ˆë‹¤.

2.  **ê°„ë‹¨í•œ ì½”ë“œ ìŠ¤ë‹ˆí« ì œê³µ:**
    *   "JavaScriptì—ì„œ í˜„ì¬ ë‚ ì§œë¥¼ 'YYYY-MM-DD' í˜•ì‹ìœ¼ë¡œ í¬ë§·í•˜ëŠ” í•¨ìˆ˜ ì•Œë ¤ì¤˜" ì™€ ê°™ì´ êµ¬ì²´ì ì¸ ìš”ì²­ì— ëŒ€í•œ ì½”ë“œ ì¡°ê°ì„ ì œê³µí•©ë‹ˆë‹¤.

3.  **ë¬¸ì„œ ë° í…ìŠ¤íŠ¸ ì •ë¦¬:**
    *   ì£¼ì–´ì§„ í…ìŠ¤íŠ¸ì˜ ì˜¤íƒˆìë¥¼ ìˆ˜ì •í•˜ê±°ë‚˜, ë¬¸ì¥ì„ ë” ìì—°ìŠ¤ëŸ½ê²Œ ë‹¤ë“¬ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
    *   Markdown í˜•ì‹ì˜ í…ìŠ¤íŠ¸ë¥¼ ì •ë¦¬í•˜ê±°ë‚˜, ì½”ë“œ ë¸”ë¡ì— ì–¸ì–´ íƒœê·¸ë¥¼ ì¶”ê°€í•˜ëŠ” ë“±ì˜ ë‹¨ìˆœí•œ ì„œì‹ ì‘ì—…ì„ í•©ë‹ˆë‹¤.

ì´ ëª¨ë“  ê²ƒì€ ì €ì˜ í˜„ì¬ ì„ë¬´ë¥¼ ì™„ë²½í•˜ê²Œ ìˆ˜í–‰í•˜ê³ , ëŒ€í‘œë‹˜ì˜ ì‹ ë¢°ë¥¼ ì–»ì—ˆì„ ë•Œ ë¹„ë¡œì†Œ ê°€ëŠ¥í•œ ì¼ì…ë‹ˆë‹¤.
</file>

<file path="package.json">
{
  "name": "workly-monorepo",
  "version": "1.0.0",
  "private": true,
  "description": "ì›Œí´ë¦¬ ë¹„ì¦ˆë‹ˆìŠ¤ ì„±ê³µì„ ìœ„í•œ í’€ìŠ¤íƒ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜",
  "author": "Workly Team",
  "license": "MIT",
  "workspaces": [
    "frontend",
    "backend",
    "shared"
  ],
  "scripts": {
    "dev": "concurrently \"npm run dev:frontend\" \"npm run dev:backend\"",
    "dev:frontend": "npm run dev --workspace=frontend",
    "dev:backend": "npm run dev --workspace=backend",
    "build": "npm run build:shared && npm run build:frontend && npm run build:backend",
    "build:frontend": "npm run build --workspace=frontend",
    "build:backend": "npm run build --workspace=backend",
    "build:shared": "npm run build --workspace=shared",
    "lint": "npm run lint:frontend && npm run lint:backend",
    "lint:frontend": "npm run lint --workspace=frontend",
    "lint:backend": "npm run lint --workspace=backend",
    "lint:fix": "npm run lint:fix:frontend && npm run lint:fix:backend",
    "lint:fix:frontend": "npm run lint:fix --workspace=frontend",
    "lint:fix:backend": "npm run lint:fix --workspace=backend",
    "test": "npm run test:frontend && npm run test:backend",
    "test:frontend": "npm run test --workspace=frontend",
    "test:backend": "npm run test --workspace=backend",
    "clean": "npm run clean:frontend && npm run clean:backend && npm run clean:shared",
    "clean:frontend": "rm -rf frontend/node_modules frontend/.next",
    "clean:backend": "rm -rf backend/node_modules backend/dist",
    "clean:shared": "rm -rf shared/node_modules shared/dist",
    "setup": "npm install && npm run build:shared",
    "db:migrate": "npm run db:migrate --workspace=backend",
    "db:seed": "npm run db:seed --workspace=backend",
    "docker:dev": "docker-compose up -d",
    "docker:prod": "docker-compose -f docker-compose.prod.yml up -d",
    "docker:down": "docker-compose down"
  },
  "devDependencies": {
    "@types/passport-jwt": "^4.0.1",
    "@typescript-eslint/eslint-plugin": "^6.21.0",
    "@typescript-eslint/parser": "^6.21.0",
    "concurrently": "^8.2.2",
    "eslint": "^8.57.0",
    "eslint-config-prettier": "^9.1.0",
    "eslint-plugin-prettier": "^5.1.3",
    "husky": "^8.0.3",
    "lint-staged": "^15.2.2",
    "prettier": "^3.2.5",
    "typescript": "^5.4.5"
  },
  "husky": {
    "hooks": {
      "pre-commit": "lint-staged",
      "commit-msg": "commitlint -E HUSKY_GIT_PARAMS"
    }
  },
  "lint-staged": {
    "**/*.{js,jsx,ts,tsx}": [
      "eslint --fix",
      "prettier --write"
    ],
    "**/*.{json,css,md}": [
      "prettier --write"
    ]
  },
  "engines": {
    "node": ">=18.0.0",
    "npm": ">=9.0.0"
  },
  "dependencies": {
    "@nestjs/jwt": "^11.0.0",
    "@nestjs/passport": "^11.0.5",
    "passport": "^0.7.0",
    "passport-jwt": "^4.0.1"
  }
}
</file>

<file path="backend/src/database/entities/user.entity.ts">
import {
  Entity,
  PrimaryGeneratedColumn,
  Column,
  CreateDateColumn,
  UpdateDateColumn,
  OneToMany,
  Index,
  BeforeInsert,
  BeforeUpdate,
} from 'typeorm';
import * as bcrypt from 'bcryptjs';
import { 
  UserRole, 
  UserStatus, 
  UserProfile, 
  UserPreferences,
  NotificationPreferences,
  WorkingHours,
  DashboardPreferences
} from '@workly/shared';
import { AdminRole } from '../../types/admin.types';
import { Exclude } from 'class-transformer';

@Entity('users')
@Index(['email'], { unique: true })
@Index(['googleId'])
@Index(['status'])
@Index(['role'])
@Index(['createdAt'])
@Index(['lastLoginAt'])
export class User {
  @PrimaryGeneratedColumn('uuid')
  id: string;

  @Column({ unique: true })
  email: string;

  @Column()
  @Exclude()
  password: string;

  @Column()
  name: string;

  @Column({ nullable: true })
  firstName?: string;

  @Column({ nullable: true })
  lastName?: string;

  @Column({ nullable: true })
  avatar?: string;

  @Column({
    type: 'enum',
    enum: UserRole,
    default: UserRole.MEMBER,
  })
  role: UserRole;

  @Column({
    type: 'enum',
    enum: UserStatus,
    default: UserStatus.PENDING_VERIFICATION,
  })
  status: UserStatus;

  @Column('jsonb')
  profile: UserProfile;

  @Column('jsonb')
  preferences: UserPreferences;

  @Column({
    type: 'enum',
    enum: AdminRole,
    nullable: true,
  })
  adminRole?: AdminRole;

  @Column('simple-array', { nullable: true })
  adminPermissions?: string[];

  @Column({ nullable: true })
  lastAdminLogin?: Date;

  @Column({ default: false })
  twoFactorEnabled: boolean;

  @Column('simple-array', { nullable: true })
  allowedIPs?: string[];

  @Column({ nullable: true })
  lastLoginAt?: Date;

  @Column({ nullable: true })
  emailVerifiedAt?: Date;

  @Column({ nullable: true })
  googleId?: string;

  @Column({ nullable: true })
  @Exclude()
  resetPasswordToken?: string;

  @Column({ nullable: true })
  @Exclude()
  resetPasswordExpiresAt?: Date;

  @Column({ nullable: true })
  @Exclude()
  emailVerificationToken?: string;

  @CreateDateColumn()
  createdAt: Date;

  @UpdateDateColumn()
  updatedAt: Date;

  // ê´€ê³„ ì„¤ì • (ë‚˜ì¤‘ì— ì¶”ê°€ë  ì—”í‹°í‹°ë“¤ê³¼ì˜ ê´€ê³„)
  // @OneToMany(() => Project, project => project.owner)
  // ownedProjects: Project[];

  // @OneToMany(() => Task, task => task.assignee)
  // assignedTasks: Task[];

  // @OneToMany(() => Task, task => task.reporter)
  // reportedTasks: Task[];

  // @OneToMany(() => Post, post => post.author)
  // posts: Post[];

  // @OneToMany(() => Comment, comment => comment.author)
  // comments: Comment[];

  // @OneToMany(() => File, file => file.uploader)
  // uploadedFiles: File[];

  // @OneToMany(() => Notification, notification => notification.recipient)
  // receivedNotifications: Notification[];

  // ë¹„ë°€ë²ˆí˜¸ í•´ì‹±
  @BeforeInsert()
  @BeforeUpdate()
  async hashPassword() {
    if (this.password) {
      this.password = await bcrypt.hash(this.password, 12);
    }
  }

  // ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ë©”ì„œë“œ
  async validatePassword(password: string): Promise<boolean> {
    return bcrypt.compare(password, this.password);
  }

  // ê¸°ë³¸ê°’ ì„¤ì •
  @BeforeInsert()
  setDefaultValues() {
    if (!this.profile) {
      this.profile = {
        firstName: '',
        lastName: '',
        timezone: 'Asia/Seoul',
        language: 'ko',
      } as UserProfile;
    }

    if (!this.preferences) {
      this.preferences = {
        theme: 'system',
        language: 'ko',
        timezone: 'Asia/Seoul',
        notifications: {
          email: true,
          push: true,
          desktop: true,
          taskAssigned: true,
          taskCompleted: true,
          taskDue: true,
          projectUpdates: true,
          mentions: true,
          weeklyDigest: true,
          dailyReminder: false,
        } as NotificationPreferences,
        workingHours: {
          enabled: true,
          startTime: '09:00',
          endTime: '18:00',
          timezone: 'Asia/Seoul',
          workingDays: [1, 2, 3, 4, 5],
          breakTime: {
            enabled: true,
            startTime: '12:00',
            endTime: '13:00',
          },
        } as WorkingHours,
        dashboard: {
          layout: 'grid',
          widgets: {
            myTasks: true,
            recentProjects: true,
            teamActivity: true,
            notifications: true,
            calendar: true,
            quickStats: true,
          },
          defaultView: 'dashboard',
        } as DashboardPreferences,
      } as UserPreferences;
    }
  }

  // ì´ë©”ì¼ ì¸ì¦ ê´€ë ¨
  generateEmailVerificationToken(): string {
    this.emailVerificationToken = Math.random().toString(36).substring(2, 15) + 
                                 Math.random().toString(36).substring(2, 15);
    return this.emailVerificationToken;
  }

  verifyEmail(): void {
    this.emailVerifiedAt = new Date();
    this.emailVerificationToken = undefined;
    this.status = UserStatus.ACTIVE;
  }

  // ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ê´€ë ¨
  generateResetPasswordToken(): string {
    this.resetPasswordToken = Math.random().toString(36).substring(2, 15) + 
                             Math.random().toString(36).substring(2, 15);
    this.resetPasswordExpiresAt = new Date(Date.now() + 3600000); // 1ì‹œê°„ í›„ ë§Œë£Œ
    return this.resetPasswordToken;
  }

  resetPassword(newPassword: string): void {
    this.password = newPassword;
    this.resetPasswordToken = undefined;
    this.resetPasswordExpiresAt = undefined;
  }

  // ë¡œê·¸ì¸ ì‹œê°„ ì—…ë°ì´íŠ¸
  updateLastLoginAt(): void {
    this.lastLoginAt = new Date();
  }

  // ì‚¬ìš©ì í™œì„±í™”/ë¹„í™œì„±í™”
  activate(): void {
    this.status = UserStatus.ACTIVE;
  }

  deactivate(): void {
    this.status = UserStatus.INACTIVE;
  }

  suspend(): void {
    this.status = UserStatus.SUSPENDED;
  }

  // ê¶Œí•œ í™•ì¸ ë©”ì„œë“œ
  isAdmin(): boolean {
    return this.role === UserRole.ADMIN;
  }

  isManager(): boolean {
    return this.role === UserRole.MANAGER || this.isAdmin();
  }

  isMember(): boolean {
    return this.role === UserRole.MEMBER || this.isManager();
  }

  // ì–´ë“œë¯¼ íŒ¨ë„ ê´€ë ¨ ë©”ì„œë“œ
  isAdminUser(): boolean {
    return this.adminRole !== null && this.adminRole !== undefined;
  }

  isSuperAdmin(): boolean {
    return this.adminRole === AdminRole.SUPER_ADMIN;
  }

  hasAdminPermission(permission: string): boolean {
    if (this.isSuperAdmin()) return true;
    return this.adminPermissions?.includes(permission) || false;
  }

  hasAnyAdminPermission(permissions: string[]): boolean {
    return permissions.some(permission => this.hasAdminPermission(permission));
  }

  hasAllAdminPermissions(permissions: string[]): boolean {
    return permissions.every(permission => this.hasAdminPermission(permission));
  }

  updateLastAdminLogin(): void {
    this.lastAdminLogin = new Date();
  }

  isActive(): boolean {
    return this.status === UserStatus.ACTIVE;
  }

  canLogin(): boolean {
    return this.isActive() && this.emailVerifiedAt !== null;
  }

  // ì „ì²´ ì´ë¦„ ê°€ì ¸ì˜¤ê¸°
  getFullName(): string {
    if (this.profile?.firstName && this.profile?.lastName) {
      return `${this.profile.firstName} ${this.profile.lastName}`;
    }
    return this.name;
  }

  // ì‚¬ìš©ì ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ë°˜í™˜ (ë¹„ë°€ë²ˆí˜¸ ë“± ë¯¼ê° ì •ë³´ ì œì™¸)
  toJSON() {
    const { password, resetPasswordToken, resetPasswordExpiresAt, emailVerificationToken, ...user } = this;
    return user;
  }
}
</file>

<file path="frontend/src/app/auth/login/page.tsx">
'use client'

import { useEffect } from 'react'
import { useRouter } from 'next/navigation'
import { isAuthenticated } from '@/lib/auth'

export default function LoginPage() {
  const router = useRouter()

  useEffect(() => {
    // ì´ë¯¸ ë¡œê·¸ì¸ëœ ê²½ìš° ë©”ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
    if (isAuthenticated()) {
      router.push('/')
    }
  }, [router])

  const handleGoogleLogin = () => {
    // ë°±ì—”ë“œ Google OAuth ì—”ë“œí¬ì¸íŠ¸ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
    const backendUrl = process.env.NEXT_PUBLIC_BACKEND_URL || 'http://localhost:8000'
    window.location.href = `${backendUrl}/auth/google`
  }

  return (
    <div className="min-h-screen bg-background flex items-center justify-center px-4">
      <div className="w-full max-w-sm space-y-8">
        {/* ë¡œê³  & ë¸Œëœë”© */}
        <div className="text-center">
          <div className="mx-auto w-16 h-16 bg-foreground text-background rounded-2xl flex items-center justify-center text-2xl font-bold mb-6">
            W
          </div>
          <h1 className="text-2xl font-bold text-foreground mb-2">
            ì›Œí´ë¦¬ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤
          </h1>
          <p className="text-muted-foreground mb-8">
            ì—…ë¬´ë¥¼ ì •ë¦¬í•˜ê³ , ëª©í‘œë¥¼ ë‹¬ì„±í•˜ë©°, ì—­ëŸ‰ì„ ì„±ì¥ì‹œí‚¤ì„¸ìš”
          </p>
        </div>

        {/* í—¤ë” ë°”ë¡œ ì•„ë˜ ìœ„ì¹˜í•œ ë¡œê·¸ì¸ ë²„íŠ¼ */}
        <div className="space-y-4 mt-2">
          <button 
            onClick={handleGoogleLogin}
            className="w-full flex items-center justify-center gap-3 bg-white border border-gray-300 rounded-xl px-6 py-4 text-gray-700 font-semibold hover:bg-gray-50 transition-colors shadow-lg text-lg ml-4"
          >
            <svg className="w-6 h-6" viewBox="0 0 24 24">
              <path
                fill="currentColor"
                d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"
              />
              <path
                fill="currentColor"
                d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"
              />
              <path
                fill="currentColor"
                d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"
              />
              <path
                fill="currentColor"
                d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"
              />
            </svg>
            Googleë¡œ ì‹œì‘í•˜ê¸°
          </button>
          
          {/* ì¶”ê°€ ì •ë³´ */}
          <div className="text-center">
            <p className="text-xs text-muted-foreground">
              ê³„ì† ì§„í–‰í•˜ë©´ 
              <a href="/terms" className="text-foreground hover:underline mx-1">ì„œë¹„ìŠ¤ ì•½ê´€</a>
              ë°
              <a href="/privacy" className="text-foreground hover:underline mx-1">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
              ì— ë™ì˜í•˜ëŠ” ê²ƒìœ¼ë¡œ ê°„ì£¼ë©ë‹ˆë‹¤.
            </p>
          </div>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="frontend/src/components/navigation/MobileNavigation.tsx">
'use client'

import Link from 'next/link'
import { usePathname, useRouter } from 'next/navigation'
import { useState, useEffect } from 'react'
import { 
  Squares2X2Icon,
  FolderIcon,
  InboxIcon,
  FlagIcon,
  UserIcon,
  ArrowRightOnRectangleIcon
} from '@heroicons/react/24/outline'
import { 
  Squares2X2Icon as Squares2X2IconSolid,
  FolderIcon as FolderIconSolid,
  InboxIcon as InboxIconSolid,
  FlagIcon as FlagIconSolid,
  UserIcon as UserIconSolid 
} from '@heroicons/react/24/solid'
import { isAuthenticated } from '@/lib/auth'

// ì›Œí´ë¦¬ ê³ ìœ  ë°©ë²•ë¡  - 5ê°œ í•µì‹¬ ë„¤ë¹„ê²Œì´ì…˜ í•­ëª©
const navigationItems = [
  { 
    name: 'ì—…ë¬´', 
    href: '/', 
    icon: Squares2X2Icon, 
    activeIcon: Squares2X2IconSolid 
  },
  { 
    name: 'í”„ë¡œì íŠ¸', 
    href: '/projects', 
    icon: FolderIcon, 
    activeIcon: FolderIconSolid 
  },
  { 
    name: 'ìˆ˜ì§‘í•¨', 
    href: '/inbox', 
    icon: InboxIcon, 
    activeIcon: InboxIconSolid,
    isCenter: true // CPER ì›Œí¬í”Œë¡œìš° ì¤‘ì‹¬
  },
  { 
    name: 'ëª©í‘œ', 
    href: '/goals', 
    icon: FlagIcon, 
    activeIcon: FlagIconSolid 
  },
  { 
    name: 'í”„ë¡œí•„', 
    href: '/profile', 
    icon: UserIcon, 
    activeIcon: UserIconSolid 
  },
]

export default function MobileNavigation() {
  const pathname = usePathname()
  const router = useRouter()
  const [isLoggedIn, setIsLoggedIn] = useState(false)

  useEffect(() => {
    setIsLoggedIn(isAuthenticated())
  }, [])

  const handleLoginClick = () => {
    router.push('/auth/login')
  }

  return (
    <nav 
      className="md:hidden fixed bottom-0 left-0 right-0 h-[60px] bg-card border-t border-border z-50"
      role="navigation"
      aria-label="ì›Œí´ë¦¬ ëª¨ë°”ì¼ ë„¤ë¹„ê²Œì´ì…˜"
    >
      <div className="flex justify-between items-center h-full px-6">
        {navigationItems.map((item, index) => {
          const isActive = pathname === item.href || 
            (item.href !== '/' && pathname.startsWith(item.href))
          const Icon = isActive ? item.activeIcon : item.icon
          
          
          return (
            <Link
              key={item.name}
              href={item.href}
              className={`flex items-center justify-center flex-1 h-full transition-colors relative ${
                isActive 
                  ? 'text-foreground' 
                  : 'text-muted-foreground hover:text-foreground'
              }`}
              aria-label={item.name}
              aria-current={isActive ? 'page' : undefined}
            >
              <Icon className="w-6 h-6" />
              {/* CPER ì›Œí¬í”Œë¡œìš° ì¤‘ì‹¬ í‘œì‹œ */}
              {item.isCenter && (
                <div className="absolute top-2 right-1/2 translate-x-1/2 w-1.5 h-1.5 bg-amber-500 rounded-full animate-pulse"></div>
              )}
            </Link>
          )
        })}
      </div>
    </nav>
  )
}
</file>

<file path="docker-compose.yml">
services:
  # PostgreSQL ë°ì´í„°ë² ì´ìŠ¤
  postgres:
    image: postgres:15-alpine
    container_name: workly-postgres
    environment:
      POSTGRES_DB: workly
      POSTGRES_USER: workly
      POSTGRES_PASSWORD: workly123
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./backend/database/init.sql:/docker-entrypoint-initdb.d/init.sql
    networks:
      - workly-network

  # Redis (Socket.io Adapterìš©)
  redis:
    image: redis:7-alpine
    container_name: workly-redis
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    networks:
      - workly-network

  # Backend (NestJS)
  backend:
    build:
      context: .
      dockerfile: backend/Dockerfile
    container_name: workly-backend
    environment:
      - NODE_ENV=development
      - DATABASE_HOST=postgres
      - DATABASE_PORT=5432
      - DATABASE_NAME=workly
      - DATABASE_USERNAME=workly
      - DATABASE_PASSWORD=workly123
      - REDIS_HOST=redis
      - REDIS_PORT=6379
      - JWT_SECRET=your-jwt-secret-key
      - GOOGLE_CLIENT_ID=your-google-client-id
      - GOOGLE_CLIENT_SECRET=your-google-client-secret
      - FRONTEND_URL=http://localhost:3000
    ports:
      - "8000:8000"
    volumes:
      - ./backend/uploads:/app/uploads
    depends_on:
      - postgres
      - redis
    networks:
      - workly-network
    restart: unless-stopped

  # Frontend (Next.js)
  frontend:
    build:
      context: .
      dockerfile: frontend/Dockerfile
    container_name: workly-frontend
    environment:
      - NODE_ENV=development
      - NEXT_PUBLIC_API_URL=http://localhost:8000
      - NEXT_PUBLIC_SOCKET_URL=http://localhost:8000
    ports:
      - "3000:3000"
    depends_on:
      - backend
    networks:
      - workly-network
    restart: unless-stopped

  # MinIO (S3 í˜¸í™˜ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ - ê°œë°œìš©)
  minio:
    image: minio/minio:latest
    container_name: workly-minio
    environment:
      - MINIO_ROOT_USER=minioadmin
      - MINIO_ROOT_PASSWORD=minioadmin123
    ports:
      - "9000:9000"
      - "9001:9001"
    volumes:
      - minio_data:/data
    networks:
      - workly-network
    command: server /data --console-address ":9001"

  # Nginx (ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ)
  nginx:
    image: nginx:alpine
    container_name: workly-nginx
    ports:
      - "80:80"
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf
      - ./nginx/sites-available:/etc/nginx/sites-available
    depends_on:
      - frontend
      - backend
    networks:
      - workly-network

volumes:
  postgres_data:
  redis_data:
  minio_data:

networks:
  workly-network:
    driver: bridge
</file>

<file path="frontend/src/app/projects/[id]/page.tsx">
'use client';

export const dynamic = 'force-dynamic'

import React, { useState, useEffect, useCallback, useMemo } from 'react';
import { useParams, useRouter } from 'next/navigation';
import { 
  ArrowLeft, 
  Edit3, 
  Settings, 
  Users, 
  Calendar, 
  BarChart3, 
  Target,
  Clock,
  DollarSign,
  Tag,
  Archive,
  Trash2,
  Plus,
  Mail,
  Shield,
  Eye,
  X,
  UserMinus,
  MessageCircle,
  Hash
} from 'lucide-react';
// import { apiClient } from '@/lib/api'; // ëª©ì—… ëª¨ë“œì—ì„œëŠ” ì£¼ì„ ì²˜ë¦¬
import MainContainer from '@/components/layout/MainContainer';
import { Project, UpdateProjectDto, ProjectStatus, ProjectPriority, ProjectVisibility, ProjectMember, ProjectMemberRole, AddProjectMemberDto } from '@/types/project.types';
import ProjectChatChannel from '@/components/projects/ProjectChatChannel';
import ProjectObjectiveManager from '@/components/projects/ProjectObjectiveManager';

// ë©¤ë²„ ê´€ë¦¬ ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸
function MemberManagementModal({ 
  isOpen, 
  onClose, 
  project,
  onMemberAdded,
  onMemberRemoved 
}: { 
  isOpen: boolean; 
  onClose: () => void; 
  project: Project;
  onMemberAdded: () => void;
  onMemberRemoved: () => void;
}) {
  const [members, setMembers] = useState<ProjectMember[]>([]);
  const [isLoading, setIsLoading] = useState(false);
  const [isInviting, setIsInviting] = useState(false);
  const [inviteEmail, setInviteEmail] = useState('');
  const [inviteRole, setInviteRole] = useState<ProjectMemberRole>(ProjectMemberRole.MEMBER);

  // ë©¤ë²„ ëª©ë¡ ë¡œë“œ
  useEffect(() => {
    if (isOpen) {
      loadMembers();
    }
  }, [isOpen]);

  const loadMembers = async () => {
    try {
      setIsLoading(true);
      // ëª©ì—… ë©¤ë²„ ë°ì´í„° ì‚¬ìš©
      await new Promise(resolve => setTimeout(resolve, 500));
      setMembers(project.members || []);
    } catch (error) {
      console.error('ë©¤ë²„ ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:', error);
    } finally {
      setIsLoading(false);
    }
  };

  const handleInviteMember = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!inviteEmail.trim()) return;

    try {
      setIsInviting(true);
      // ëª©ì—… ë©¤ë²„ ì´ˆëŒ€ ì‹œë®¬ë ˆì´ì…˜
      await new Promise(resolve => setTimeout(resolve, 1000));
      
      console.log('ë©¤ë²„ ì´ˆëŒ€:', { email: inviteEmail, role: inviteRole });
      alert(`${inviteEmail}ì—ê²Œ ì´ˆëŒ€ì¥ì„ ë³´ëƒˆìŠµë‹ˆë‹¤! (ëª©ì—… ëª¨ë“œ)`);
      
      setInviteEmail('');
      setInviteRole(ProjectMemberRole.MEMBER);
    } catch (error) {
      console.error('ë©¤ë²„ ì´ˆëŒ€ ì‹¤íŒ¨:', error);
    } finally {
      setIsInviting(false);
    }
  };

  const handleRemoveMember = async (memberId: string) => {
    if (!confirm('ì •ë§ë¡œ ì´ ë©¤ë²„ë¥¼ ì œê±°í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;

    try {
      // ëª©ì—… ë©¤ë²„ ì œê±° ì‹œë®¬ë ˆì´ì…˜
      await new Promise(resolve => setTimeout(resolve, 500));
      
      console.log('ë©¤ë²„ ì œê±°:', memberId);
      alert('ë©¤ë²„ê°€ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤! (ëª©ì—… ëª¨ë“œ)');
      
      onMemberRemoved();
    } catch (error) {
      console.error('ë©¤ë²„ ì œê±° ì‹¤íŒ¨:', error);
    }
  };

  const getRoleText = (role: ProjectMemberRole) => {
    switch (role) {
      case ProjectMemberRole.OWNER:
        return 'ì†Œìœ ì';
      case ProjectMemberRole.ADMIN:
        return 'ê´€ë¦¬ì';
      case ProjectMemberRole.MEMBER:
        return 'ë©¤ë²„';
      case ProjectMemberRole.VIEWER:
        return 'ë·°ì–´';
      default:
        return 'ë©¤ë²„';
    }
  };

  const getRoleIcon = (role: ProjectMemberRole) => {
    switch (role) {
      case ProjectMemberRole.OWNER:
      case ProjectMemberRole.ADMIN:
        return <Shield className="w-4 h-4 text-yellow-500" />;
      case ProjectMemberRole.VIEWER:
        return <Eye className="w-4 h-4 text-gray-500" />;
      default:
        return <Users className="w-4 h-4 text-blue-500" />;
    }
  };

  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 z-50 overflow-y-auto">
      <div className="flex items-center justify-center min-h-screen p-4">
        <div className="fixed inset-0 bg-black opacity-25" onClick={onClose} />
        <div className="relative bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-hidden">
          {/* í—¤ë” */}
          <div className="flex items-center justify-between p-6 border-b border-gray-200">
            <div>
              <h3 className="text-lg font-semibold text-gray-900">íŒ€ ë©¤ë²„ ê´€ë¦¬</h3>
              <p className="text-sm text-gray-500 mt-1">{project.title}</p>
            </div>
            <button
              onClick={onClose}
              className="p-2 hover:bg-gray-100 rounded-full"
            >
              <X className="w-5 h-5 text-gray-400" />
            </button>
          </div>

          <div className="overflow-y-auto max-h-[60vh]">
            {/* ë©¤ë²„ ì´ˆëŒ€ ì„¹ì…˜ */}
            <div className="p-6 border-b border-gray-200">
              <h4 className="text-md font-medium text-gray-900 mb-4">ìƒˆ ë©¤ë²„ ì´ˆëŒ€</h4>
              <form onSubmit={handleInviteMember} className="space-y-4">
                <div className="grid grid-cols-3 gap-4">
                  <div className="col-span-2">
                    <label className="block text-sm font-medium text-gray-700 mb-1">
                      ì´ë©”ì¼ ì£¼ì†Œ
                    </label>
                    <input
                      type="email"
                      value={inviteEmail}
                      onChange={(e) => setInviteEmail(e.target.value)}
                      className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                      placeholder="member@example.com"
                      required
                    />
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1">
                      ì—­í• 
                    </label>
                    <select
                      value={inviteRole}
                      onChange={(e) => setInviteRole(e.target.value as ProjectMemberRole)}
                      className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    >
                      <option value={ProjectMemberRole.MEMBER}>ë©¤ë²„</option>
                      <option value={ProjectMemberRole.ADMIN}>ê´€ë¦¬ì</option>
                      <option value={ProjectMemberRole.VIEWER}>ë·°ì–´</option>
                    </select>
                  </div>
                </div>
                <button
                  type="submit"
                  disabled={isInviting || !inviteEmail.trim()}
                  className="flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50"
                >
                  <Mail className="w-4 h-4" />
                  <span>{isInviting ? 'ì´ˆëŒ€ ì¤‘...' : 'ì´ˆëŒ€ ë³´ë‚´ê¸°'}</span>
                </button>
              </form>
            </div>

            {/* í˜„ì¬ ë©¤ë²„ ëª©ë¡ */}
            <div className="p-6">
              <h4 className="text-md font-medium text-gray-900 mb-4">
                í˜„ì¬ ë©¤ë²„ ({members.length}ëª…)
              </h4>
              
              {isLoading ? (
                <div className="text-center py-8">
                  <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"></div>
                  <p className="text-gray-600 mt-2">ë©¤ë²„ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                </div>
              ) : members.length === 0 ? (
                <div className="text-center py-8">
                  <Users className="w-12 h-12 text-gray-400 mx-auto mb-3" />
                  <p className="text-gray-600">ì•„ì§ ë©¤ë²„ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                </div>
              ) : (
                <div className="space-y-3">
                  {members.map((member) => (
                    <div
                      key={member.id}
                      className="flex items-center justify-between p-3 bg-gray-50 rounded-lg"
                    >
                      <div className="flex items-center space-x-3">
                        <div className="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                          <span className="text-sm font-medium text-blue-800">
                            {member.user.name.charAt(0).toUpperCase()}
                          </span>
                        </div>
                        <div>
                          <div className="flex items-center space-x-2">
                            <p className="font-medium text-gray-900">{member.user.name}</p>
                            {member.userId === project.ownerId && (
                              <span className="px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded-full">
                                ì†Œìœ ì
                              </span>
                            )}
                          </div>
                          <div className="flex items-center space-x-2 mt-1">
                            <p className="text-sm text-gray-600">{member.user.email}</p>
                            <div className="flex items-center space-x-1">
                              {getRoleIcon(member.role)}
                              <span className="text-xs text-gray-500">
                                {getRoleText(member.role)}
                              </span>
                            </div>
                          </div>
                        </div>
                      </div>
                      
                      {member.userId !== project.ownerId && (
                        <button
                          onClick={() => handleRemoveMember(member.userId)}
                          className="p-2 text-red-600 hover:bg-red-50 rounded-full"
                          title="ë©¤ë²„ ì œê±°"
                        >
                          <UserMinus className="w-4 h-4" />
                        </button>
                      )}
                    </div>
                  ))}
                </div>
              )}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

// í”„ë¡œì íŠ¸ ì •ë³´ ì‚¬ì´ë“œë°” ì»´í¬ë„ŒíŠ¸
function ProjectInfoSidebar({ 
  project, 
  onEdit,
  onProjectUpdate,
  onClose,
  isMobile = false
}: { 
  project: Project; 
  onEdit: () => void; 
  onProjectUpdate: () => void;
  onClose?: () => void;
  isMobile?: boolean;
}) {
  const [isMemberModalOpen, setIsMemberModalOpen] = useState(false);

  const getStatusColor = (status: ProjectStatus) => {
    switch (status) {
      case ProjectStatus.ACTIVE:
        return 'bg-green-100 text-green-800';
      case ProjectStatus.PLANNING:
        return 'bg-blue-100 text-blue-800';
      case ProjectStatus.COMPLETED:
        return 'bg-gray-100 text-gray-800';
      case ProjectStatus.ON_HOLD:
        return 'bg-yellow-100 text-yellow-800';
      case ProjectStatus.CANCELLED:
        return 'bg-red-100 text-red-800';
      default:
        return 'bg-gray-100 text-gray-800';
    }
  };

  const getStatusText = (status: ProjectStatus) => {
    switch (status) {
      case ProjectStatus.ACTIVE:
        return 'ì§„í–‰ì¤‘';
      case ProjectStatus.PLANNING:
        return 'ê³„íšì¤‘';
      case ProjectStatus.COMPLETED:
        return 'ì™„ë£Œ';
      case ProjectStatus.ON_HOLD:
        return 'ì¼ì‹œì¤‘ë‹¨';
      case ProjectStatus.CANCELLED:
        return 'ì·¨ì†Œë¨';
      default:
        return 'ì•Œ ìˆ˜ ì—†ìŒ';
    }
  };

  const getPriorityColor = (priority: ProjectPriority) => {
    switch (priority) {
      case ProjectPriority.URGENT:
        return 'bg-red-100 text-red-800';
      case ProjectPriority.HIGH:
        return 'bg-orange-100 text-orange-800';
      case ProjectPriority.MEDIUM:
        return 'bg-yellow-100 text-yellow-800';
      case ProjectPriority.LOW:
        return 'bg-green-100 text-green-800';
      default:
        return 'bg-gray-100 text-gray-800';
    }
  };

  const getPriorityText = (priority: ProjectPriority) => {
    switch (priority) {
      case ProjectPriority.URGENT:
        return 'ê¸´ê¸‰';
      case ProjectPriority.HIGH:
        return 'ë†’ìŒ';
      case ProjectPriority.MEDIUM:
        return 'ë³´í†µ';
      case ProjectPriority.LOW:
        return 'ë‚®ìŒ';
      default:
        return 'ë³´í†µ';
    }
  };

  return (
    <div className="w-full h-full bg-white flex flex-col">
      {/* ì‚¬ì´ë“œë°” ì½˜í…ì¸  - ë…ë¦½ì ì¸ ìŠ¤í¬ë¡¤ ì˜ì—­ */}
      <div className="flex-1 overflow-y-auto scrollbar-on-hover">
      {/* ì‚¬ì´ë“œë°” í—¤ë” - ìµœì‹  íŠ¸ë Œë“œ ë””ìì¸ */}
      <div className="flex-shrink-0 bg-white">
        {/* ëª¨ë°”ì¼ í—¤ë” */}
        {isMobile && (
          <div className="flex items-center justify-between p-4 border-b border-gray-200">
            <div className="flex items-center space-x-3">
              <div>
                <h2 className="text-lg font-semibold text-gray-900">í”„ë¡œì íŠ¸ ì •ë³´</h2>
                <p className="text-sm text-gray-500">ìƒì„¸ ì„¤ì • ë° ê´€ë¦¬</p>
              </div>
            </div>
            {onClose && (
              <button
                onClick={onClose}
                className="p-2 hover:bg-gray-100 rounded-lg transition-colors"
                title="ì‚¬ì´ë“œë°” ë‹«ê¸°"
              >
                <svg className="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                </svg>
              </button>
            )}
          </div>
        )}
        
        {/* ë°ìŠ¤í¬í†± í—¤ë” */}
        {!isMobile && (
          <div className="p-6 border-b border-gray-100">
            <div className="flex items-center justify-between">
              <div>
                <h2 className="text-xl font-bold text-gray-900">í”„ë¡œì íŠ¸ ì •ë³´</h2>
                <p className="text-sm text-gray-600 mt-1">í”„ë¡œì íŠ¸ ìƒì„¸ ì„¤ì • ë° ê´€ë¦¬</p>
              </div>
              <div className="flex items-center space-x-2">
                <button
                  onClick={onEdit}
                  className="flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all duration-200 shadow-sm hover:shadow-md"
                >
                  <Edit3 className="w-4 h-4" />
                  <span className="font-medium">í¸ì§‘</span>
                </button>
                {onClose && (
                  <button
                    onClick={onClose}
                    className="p-2 hover:bg-gray-100 rounded-xl transition-colors group"
                    title="ì‚¬ì´ë“œë°” ë‹«ê¸°"
                  >
                    <svg className="w-5 h-5 text-gray-500 group-hover:text-gray-700 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                    </svg>
                  </button>
                )}
              </div>
            </div>
          </div>
        )}
        
        {/* ëª¨ë°”ì¼ í¸ì§‘ ë²„íŠ¼ */}
        {isMobile && (
          <div className="p-4 border-b border-gray-100">
            <button
              onClick={onEdit}
              className="w-full flex items-center justify-center space-x-2 px-4 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all duration-200"
            >
              <Edit3 className="w-4 h-4" />
              <span className="font-medium">í”„ë¡œì íŠ¸ í¸ì§‘</span>
            </button>
          </div>
        )}
      </div>


        {/* ì‚¬ì´ë“œë°” ì½˜í…ì¸  */}
        <div className={`${isMobile ? 'p-4 space-y-6' : 'p-6 space-y-8'}`}>
          {/* ëª©í‘œ ë‹¬ì„±ë„ ì„¹ì…˜ */}
          <div className="space-y-4">
            <div className="flex items-center justify-between">
              <h3 className={`font-bold text-gray-900 ${isMobile ? 'text-lg' : 'text-xl'}`}>
                ëª©í‘œ ë‹¬ì„±ë„
              </h3>
              <span className="text-xs text-gray-500 font-medium">ì‹¤ì‹œê°„</span>
            </div>
            <div className="grid gap-3">
              <div className="group relative overflow-hidden rounded-xl border border-emerald-100 bg-gradient-to-br from-emerald-50 to-emerald-100/50 p-4 transition-all duration-200 hover:shadow-md">
                <div className="flex items-center justify-between">
                  <div>
                    <div className="font-semibold text-emerald-900">ì¼ì • ì¤€ìˆ˜</div>
                    <div className="mt-1 text-xs text-emerald-700">ëª©í‘œ ëŒ€ë¹„ ì§„í–‰ë¥ </div>
                  </div>
                  <div className="text-right">
                    <div className="text-xl font-bold text-emerald-800">85%</div>
                    <div className="text-xs text-emerald-600">+5% â†—</div>
                  </div>
                </div>
                <div className="mt-3 h-1.5 overflow-hidden rounded-full bg-emerald-200">
                  <div className="h-full w-[85%] rounded-full bg-emerald-500 transition-all duration-500"></div>
                </div>
              </div>

              <div className="group relative overflow-hidden rounded-xl border border-blue-100 bg-gradient-to-br from-blue-50 to-blue-100/50 p-4 transition-all duration-200 hover:shadow-md">
                <div className="flex items-center justify-between">
                  <div>
                    <div className="font-semibold text-blue-900">í’ˆì§ˆ ìœ ì§€</div>
                    <div className="mt-1 text-xs text-blue-700">ì½”ë“œ ë¦¬ë·° í†µê³¼ìœ¨</div>
                  </div>
                  <div className="text-right">
                    <div className="text-xl font-bold text-blue-800">92%</div>
                    <div className="text-xs text-blue-600">+2% â†—</div>
                  </div>
                </div>
                <div className="mt-3 h-1.5 overflow-hidden rounded-full bg-blue-200">
                  <div className="h-full w-[92%] rounded-full bg-blue-500 transition-all duration-500"></div>
                </div>
              </div>

              <div className="group relative overflow-hidden rounded-xl border border-amber-100 bg-gradient-to-br from-amber-50 to-amber-100/50 p-4 transition-all duration-200 hover:shadow-md">
                <div className="flex items-center justify-between">
                  <div>
                    <div className="font-semibold text-amber-900">ì˜ˆì‚° ê´€ë¦¬</div>
                    <div className="mt-1 text-xs text-amber-700">ëª©í‘œ ì˜ˆì‚° ëŒ€ë¹„</div>
                  </div>
                  <div className="text-right">
                    <div className="text-xl font-bold text-amber-800">78%</div>
                    <div className="text-xs text-amber-600">-3% â†˜</div>
                  </div>
                </div>
                <div className="mt-3 h-1.5 overflow-hidden rounded-full bg-amber-200">
                  <div className="h-full w-[78%] rounded-full bg-amber-500 transition-all duration-500"></div>
                </div>
              </div>
            </div>
          </div>

          {/* ëª©í‘œ ê´€ë¦¬ ì„¹ì…˜ */}
          <div className="space-y-4">
            <h3 className={`font-bold text-gray-900 ${isMobile ? 'text-lg' : 'text-xl'}`}>
              OKR ê´€ë¦¬
            </h3>
            <div className="rounded-xl border border-gray-100 bg-white shadow-sm">
              <div className={`${isMobile ? 'h-[200px]' : 'h-[250px]'} overflow-y-auto scrollbar-on-hover`}>
                <ProjectObjectiveManager
                  project={project}
                  onObjectiveUpdate={(objectiveId, data) => {
                    console.log('ëª©í‘œ ì—…ë°ì´íŠ¸:', objectiveId, data)
                    // TODO: ì‹¤ì œ ëª©í‘œ ì—…ë°ì´íŠ¸ API í˜¸ì¶œ
                  }}
                  onKeyResultUpdate={(keyResultId, data) => {
                    console.log('í•µì‹¬ ê²°ê³¼ ì—…ë°ì´íŠ¸:', keyResultId, data)
                    // TODO: ì‹¤ì œ í•µì‹¬ ê²°ê³¼ ì—…ë°ì´íŠ¸ API í˜¸ì¶œ
                  }}
                  onObjectiveCreate={(data) => {
                    console.log('ëª©í‘œ ìƒì„±:', data)
                    // TODO: ì‹¤ì œ ëª©í‘œ ìƒì„± API í˜¸ì¶œ
                  }}
                  onKeyResultCreate={(objectiveId, data) => {
                    console.log('í•µì‹¬ ê²°ê³¼ ìƒì„±:', objectiveId, data)
                    // TODO: ì‹¤ì œ í•µì‹¬ ê²°ê³¼ ìƒì„± API í˜¸ì¶œ
                  }}
                />
              </div>
            </div>
          </div>

          {/* í”„ë¡œì íŠ¸ ìƒì„¸ ì •ë³´ */}
          <div className="space-y-4">
            <h3 className={`font-bold text-gray-900 ${isMobile ? 'text-lg' : 'text-xl'}`}>
              í”„ë¡œì íŠ¸ ì„¸ë¶€ì‚¬í•­
            </h3>
            <div className="space-y-4">
              {/* í”„ë¡œì íŠ¸ í—¤ë” ì¹´ë“œ */}
              <div className="rounded-xl border border-gray-100 bg-white p-4 shadow-sm">
                <div className="flex items-start space-x-4">
                  <div 
                    className="flex h-14 w-14 flex-shrink-0 items-center justify-center rounded-xl text-white font-bold text-lg shadow-md"
                    style={{ backgroundColor: project.color || '#3B82F6' }}
                  >
                    {project.icon || project.title.charAt(0).toUpperCase()}
                  </div>
                  <div className="flex-1 min-w-0">
                    <h2 className="text-lg font-bold text-gray-900 mb-2 truncate">{project.title}</h2>
                    {project.description && (
                      <p className="text-sm leading-relaxed text-gray-700 mb-3 line-clamp-2">{project.description}</p>
                    )}
                    <div className="flex flex-wrap gap-2">
                      <span className={`px-3 py-1.5 rounded-full text-xs font-semibold ${getStatusColor(project.status)}`}>
                        {getStatusText(project.status)}
                      </span>
                      <span className={`px-3 py-1.5 rounded-full text-xs font-semibold ${getPriorityColor(project.priority)}`}>
                        {getPriorityText(project.priority)}
                      </span>
                    </div>
                  </div>
                </div>
              </div>

              {/* ì§„í–‰ë¥  ì¹´ë“œ */}
              <div className="rounded-xl border border-gray-100 bg-white p-4 shadow-sm">
                <div className="mb-3 flex items-center justify-between">
                  <h4 className="font-semibold text-gray-900">ì „ì²´ ì§„í–‰ë¥ </h4>
                  <span className="text-2xl font-bold text-blue-600">{project.progress}%</span>
                </div>
                <div className="space-y-3">
                  <div className="h-3 overflow-hidden rounded-full bg-gray-100">
                    <div 
                      className="h-full rounded-full bg-gradient-to-r from-blue-500 to-blue-600 transition-all duration-700 ease-out" 
                      style={{ width: `${project.progress}%` }}
                    ></div>
                  </div>
                  <div className="grid grid-cols-2 gap-4 text-sm">
                    <div className="text-center">
                      <div className="flex items-center justify-center space-x-1 mb-1">
                        <BarChart3 className="w-4 h-4 text-gray-400" />
                        <span className="text-gray-600">ì´ ì‘ì—…</span>
                      </div>
                      <span className="text-xl font-bold text-gray-900">{project.taskCount || 0}</span>
                    </div>
                    <div className="text-center">
                      <div className="flex items-center justify-center space-x-1 mb-1">
                        <Target className="w-4 h-4 text-emerald-500" />
                        <span className="text-gray-600">ì™„ë£Œ</span>
                      </div>
                      <span className="text-xl font-bold text-emerald-600">{project.completedTaskCount || Math.floor((project.taskCount || 0) * (project.progress / 100))}</span>
                    </div>
                  </div>
                </div>
              </div>

              {/* í”„ë¡œì íŠ¸ ì¼ì • ë° ì˜ˆì‚° ì¹´ë“œ */}
              <div className="rounded-xl border border-gray-100 bg-white p-4 shadow-sm">
                <h4 className="font-semibold text-gray-900 mb-3">ì¼ì • ë° ì˜ˆì‚° ì •ë³´</h4>
                <div className="space-y-4">
                  {/* ë‚ ì§œ ì •ë³´ */}
                  <div className="grid grid-cols-2 gap-4">
                    <div>
                      <div className="flex items-center space-x-2 mb-2">
                        <Calendar className="w-4 h-4 text-blue-500" />
                        <span className="text-sm font-medium text-gray-700">ì‹œì‘ì¼</span>
                      </div>
                      <p className="text-sm font-bold text-gray-900">
                        {project.startDate ? new Date(project.startDate).toLocaleDateString('ko-KR') : 'ë¯¸ì„¤ì •'}
                      </p>
                    </div>
                    <div>
                      <div className="flex items-center space-x-2 mb-2">
                        <Clock className="w-4 h-4 text-red-500" />
                        <span className="text-sm font-medium text-gray-700">ë§ˆê°ì¼</span>
                      </div>
                      <p className="text-sm font-bold text-gray-900">
                        {project.dueDate ? new Date(project.dueDate).toLocaleDateString('ko-KR') : 'ë¯¸ì„¤ì •'}
                      </p>
                      {project.dueDate && (
                        <div className="mt-1">
                          <span className="text-xs bg-red-50 text-red-600 px-2 py-1 rounded-full font-medium">
                            D-{Math.ceil((new Date(project.dueDate).getTime() - new Date().getTime()) / (1000 * 60 * 60 * 24))}
                          </span>
                        </div>
                      )}
                    </div>
                  </div>

                  {/* ì˜ˆì‚° ì •ë³´ */}
                  {project.budget && (
                    <div>
                      <div className="flex items-center space-x-2 mb-2">
                        <DollarSign className="w-4 h-4 text-green-500" />
                        <span className="text-sm font-medium text-gray-700">í”„ë¡œì íŠ¸ ì˜ˆì‚°</span>
                      </div>
                      <p className="text-lg font-bold text-green-600">
                        {new Intl.NumberFormat('ko-KR', {
                          style: 'currency',
                          currency: project.currency || 'KRW'
                        }).format(Number(project.budget))}
                      </p>
                    </div>
                  )}
                </div>
              </div>

              {/* íŒ€ ë©¤ë²„ ì¹´ë“œ */}
              <div className="rounded-xl border border-gray-100 bg-white p-4 shadow-sm">
                <div className="flex items-center justify-between mb-3">
                  <h4 className="font-semibold text-gray-900">íŒ€ ë©¤ë²„</h4>
                  <span className="rounded-full bg-blue-50 px-3 py-1 text-xs font-medium text-blue-600">
                    {project.members?.length || 0}ëª…
                  </span>
                </div>
                <div className="space-y-3">
                  {(project.members || []).slice(0, 3).map((member, index) => (
                    <div key={member.id} className="flex items-center space-x-3">
                      <div className="relative">
                        <div className="flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-blue-500 to-blue-600 text-white font-semibold text-sm shadow-sm">
                          {member.user.name.charAt(0)}
                        </div>
                        <div className="absolute -bottom-1 -right-1 h-3 w-3 rounded-full border-2 border-white bg-green-400"></div>
                      </div>
                      <div className="flex-1 min-w-0">
                        <div className="flex items-center justify-between">
                          <p className="font-medium text-gray-900 truncate">{member.user.name}</p>
                          <span className="ml-2 rounded-full bg-gray-100 px-2 py-1 text-xs font-medium text-gray-600">
                            {member.role === ProjectMemberRole.OWNER ? 'ì†Œìœ ì' : 
                             member.role === ProjectMemberRole.ADMIN ? 'ê´€ë¦¬ì' : 'ë©¤ë²„'}
                          </span>
                        </div>
                        <p className="text-xs text-gray-500 truncate">{member.user.email}</p>
                      </div>
                    </div>
                  ))}
                  {(project.members?.length || 0) > 3 && (
                    <div className="text-center">
                      <button className="text-sm text-blue-600 hover:text-blue-700 font-medium">
                        +{(project.members?.length || 0) - 3}ëª… ë” ë³´ê¸°
                      </button>
                    </div>
                  )}
                </div>
              </div>

              {/* íƒœê·¸ ì¹´ë“œ */}
              {project.tags && project.tags.length > 0 && (
                <div className="rounded-xl border border-gray-100 bg-white p-4 shadow-sm">
                  <div className="flex items-center space-x-2 mb-3">
                    <Tag className="w-4 h-4 text-purple-500" />
                    <h4 className="font-semibold text-gray-900">í”„ë¡œì íŠ¸ íƒœê·¸</h4>
                  </div>
                  <div className="flex flex-wrap gap-2">
                    {project.tags.map((tag, index) => (
                      <span
                        key={index}
                        className="inline-flex items-center px-3 py-1.5 rounded-lg text-xs font-medium bg-purple-50 text-purple-700 border border-purple-200"
                      >
                        #{tag}
                      </span>
                    ))}
                  </div>
                </div>
              )}
            </div>
          </div>

          {/* ì•¡ì…˜ ë²„íŠ¼ë“¤ */}
          <div className="space-y-4">
            <h3 className={`font-bold text-gray-900 ${isMobile ? 'text-lg' : 'text-xl'}`}>
              í”„ë¡œì íŠ¸ ê´€ë¦¬
            </h3>
            <div className="rounded-xl border border-gray-100 bg-white shadow-sm overflow-hidden">
              <button 
                onClick={() => setIsMemberModalOpen(true)}
                className="w-full flex items-center space-x-3 p-4 text-left hover:bg-gray-50 transition-colors border-b border-gray-100"
              >
                <div className="flex h-10 w-10 items-center justify-center rounded-lg bg-blue-50">
                  <Users className="w-5 h-5 text-blue-600" />
                </div>
                <div className="flex-1">
                  <p className="font-medium text-gray-900">íŒ€ ë©¤ë²„ ê´€ë¦¬</p>
                  <p className="text-sm text-gray-500">ë©¤ë²„ ì¶”ê°€, ì œê±° ë° ê¶Œí•œ ì„¤ì •</p>
                </div>
              </button>
              <button className="w-full flex items-center space-x-3 p-4 text-left hover:bg-gray-50 transition-colors border-b border-gray-100">
                <div className="flex h-10 w-10 items-center justify-center rounded-lg bg-gray-50">
                  <Settings className="w-5 h-5 text-gray-600" />
                </div>
                <div className="flex-1">
                  <p className="font-medium text-gray-900">í”„ë¡œì íŠ¸ ì„¤ì •</p>
                  <p className="text-sm text-gray-500">ì›Œí¬í”Œë¡œìš° ë° ê³ ê¸‰ ì„¤ì •</p>
                </div>
              </button>
              <button className="w-full flex items-center space-x-3 p-4 text-left hover:bg-gray-50 transition-colors border-b border-gray-100">
                <div className="flex h-10 w-10 items-center justify-center rounded-lg bg-amber-50">
                  <Archive className="w-5 h-5 text-amber-600" />
                </div>
                <div className="flex-1">
                  <p className="font-medium text-gray-900">í”„ë¡œì íŠ¸ ë³´ê´€</p>
                  <p className="text-sm text-gray-500">í”„ë¡œì íŠ¸ë¥¼ ë³´ê´€í•¨ìœ¼ë¡œ ì´ë™</p>
                </div>
              </button>
              <button className="w-full flex items-center space-x-3 p-4 text-left hover:bg-red-50 transition-colors">
                <div className="flex h-10 w-10 items-center justify-center rounded-lg bg-red-50">
                  <Trash2 className="w-5 h-5 text-red-600" />
                </div>
                <div className="flex-1">
                  <p className="font-medium text-red-700">í”„ë¡œì íŠ¸ ì‚­ì œ</p>
                  <p className="text-sm text-red-500">í”„ë¡œì íŠ¸ë¥¼ ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œ</p>
                </div>
              </button>
            </div>
          </div>

          {/* í•˜ë‹¨ ì—¬ë°± */}
          <div className="h-4"></div>
        </div>

      {/* ë©¤ë²„ ê´€ë¦¬ ëª¨ë‹¬ */}
      <MemberManagementModal
        isOpen={isMemberModalOpen}
        onClose={() => setIsMemberModalOpen(false)}
        project={project}
        onMemberAdded={onProjectUpdate}
        onMemberRemoved={onProjectUpdate}
      />
      </div> {/* ì‚¬ì´ë“œë°” ìŠ¤í¬ë¡¤ ì˜ì—­ ë‹«ê¸° */}
    </div>
  );
}

// í”„ë¡œì íŠ¸ ìƒì„¸ ë·° ì»´í¬ë„ŒíŠ¸ (2ë‹¨ ë ˆì´ì•„ì›ƒ)
function ProjectDetailView({ 
  project, 
  onEdit,
  onProjectUpdate 
}: { 
  project: Project; 
  onEdit: () => void; 
  onProjectUpdate: () => void;
}) {
  const [isSidebarOpen, setIsSidebarOpen] = useState(true);
  const [isMobile, setIsMobile] = useState(false);
  const [touchStart, setTouchStart] = useState<number | null>(null);
  const [touchEnd, setTouchEnd] = useState<number | null>(null);

  // ëª¨ë°”ì¼ ê°ì§€
  useEffect(() => {
    const checkMobile = () => {
      setIsMobile(window.innerWidth < 768);
      // ëª¨ë°”ì¼ì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ì´ë“œë°” ë‹«í˜
      if (window.innerWidth < 768) {
        setIsSidebarOpen(false);
      }
    };

    checkMobile();
    window.addEventListener('resize', checkMobile);
    return () => window.removeEventListener('resize', checkMobile);
  }, []);

  // í„°ì¹˜ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ (ë©”ëª¨í™”)
  const handleTouchStart = useCallback((e: React.TouchEvent) => {
    setTouchEnd(null);
    setTouchStart(e.targetTouches[0].clientX);
  }, []);

  const handleTouchMove = useCallback((e: React.TouchEvent) => {
    setTouchEnd(e.targetTouches[0].clientX);
  }, []);

  const handleTouchEnd = useCallback(() => {
    if (!touchStart || !touchEnd) return;
    
    const distance = touchStart - touchEnd;
    const isLeftSwipe = distance > 50;
    const isRightSwipe = distance < -50;

    if (isMobile) {
      if (isLeftSwipe && isSidebarOpen) {
        setIsSidebarOpen(false);
      }
      if (isRightSwipe && !isSidebarOpen) {
        setIsSidebarOpen(true);
      }
    }
  }, [touchStart, touchEnd, isMobile, isSidebarOpen]);

  // ì‚¬ì´ë“œë°” í† ê¸€ í•¸ë“¤ëŸ¬ (ë©”ëª¨í™”)
  const handleToggleSidebar = useCallback(() => {
    setIsSidebarOpen(!isSidebarOpen);
  }, [isSidebarOpen]);

  // í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ í•¸ë“¤ëŸ¬
  const handleKeyDown = useCallback((e: React.KeyboardEvent) => {
    if (e.key === 'Escape' && isSidebarOpen) {
      setIsSidebarOpen(false);
    }
  }, [isSidebarOpen]);

  return (
    <div 
      className="h-screen h-screen-mobile bg-gray-50 relative overflow-hidden"
      onTouchStart={handleTouchStart}
      onTouchMove={handleTouchMove}
      onTouchEnd={handleTouchEnd}
      onKeyDown={handleKeyDown}
      tabIndex={0}
      role="main"
      aria-label="í”„ë¡œì íŠ¸ ìƒì„¸ í˜ì´ì§€"
    >
      {/* ì¢Œì¸¡ ë©”ì¸ ì½˜í…ì¸  (ì±„íŒ…) - ê³ ì • ìœ„ì¹˜ */}
      <div className="fixed inset-0 bg-white">
        <ProjectChatChannel
          project={project}
          members={project.members || []}
          isSidebarOpen={isSidebarOpen}
          isMobile={isMobile}
          onToggleSidebar={handleToggleSidebar}
          onTaskCreate={(taskData) => {
            console.log('ìƒˆ ì—…ë¬´ ìƒì„±:', taskData)
            // TODO: ì‹¤ì œ ì—…ë¬´ ìƒì„± API í˜¸ì¶œ
          }}
          onMilestoneCreate={(milestoneData) => {
            console.log('ë§ˆì¼ìŠ¤í†¤ ìƒì„±:', milestoneData)
            // TODO: ì‹¤ì œ ë§ˆì¼ìŠ¤í†¤ ìƒì„± API í˜¸ì¶œ
          }}
          onUserDelegate={(delegationData) => {
            console.log('ì—…ë¬´ ì¬í• ë‹¹:', delegationData)
            // TODO: ì‹¤ì œ ì—…ë¬´ ì¬í• ë‹¹ API í˜¸ì¶œ
          }}
        />
      </div>

      {/* ëª¨ë°”ì¼ ì˜¤ë²„ë ˆì´ */}
      {isMobile && isSidebarOpen && (
        <div 
          className="fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden"
          onClick={() => setIsSidebarOpen(false)}
        />
      )}

      {/* ìš°ì¸¡ ì‚¬ì´ë“œë°” - ì™„ì „ ê³ ì • ìœ„ì¹˜ */}
      <aside 
        className={`
          fixed top-0 bottom-0 right-0 z-45
          transition-all duration-300 ease-out
          ${isSidebarOpen ? 'translate-x-0 opacity-100' : 'translate-x-full opacity-0'}
          ${isMobile ? 'w-full' : 'w-[640px]'}
          bg-white border-l border-gray-200 shadow-2xl
        `}
        style={{
          transform: isSidebarOpen ? 'translateX(0%)' : 'translateX(100%)',
          transition: 'transform 400ms cubic-bezier(0.4, 0, 0.2, 1), opacity 300ms ease-out'
        }}
        role="complementary"
        aria-label="í”„ë¡œì íŠ¸ ì •ë³´ ì‚¬ì´ë“œë°”"
        aria-hidden={!isSidebarOpen}
      >
        <ProjectInfoSidebar
          project={project}
          onEdit={onEdit}
          onProjectUpdate={onProjectUpdate}
          onClose={() => setIsSidebarOpen(false)}
          isMobile={isMobile}
        />
      </aside>
    </div>
  );
}

// í”„ë¡œì íŠ¸ í¸ì§‘ í¼ ì»´í¬ë„ŒíŠ¸
function ProjectEditForm({ 
  project, 
  onSave, 
  onCancel 
}: { 
  project: Project; 
  onSave: (data: UpdateProjectDto) => Promise<void>; 
  onCancel: () => void; 
}) {
  const [formData, setFormData] = useState<UpdateProjectDto>({
    title: project.title,
    description: project.description || '',
    status: project.status,
    priority: project.priority,
    startDate: project.startDate ? new Date(project.startDate).toISOString().split('T')[0] : '',
    dueDate: project.dueDate ? new Date(project.dueDate).toISOString().split('T')[0] : '',
    budget: project.budget ? Number(project.budget) : undefined,
    currency: project.currency || 'KRW',
    color: project.color || '#3B82F6',
    tags: project.tags || [],
  });
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [tagInput, setTagInput] = useState('');

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!formData.title?.trim()) return;

    setIsSubmitting(true);
    try {
      await onSave(formData);
    } catch (error) {
      console.error('í”„ë¡œì íŠ¸ ìˆ˜ì • ì‹¤íŒ¨:', error);
    } finally {
      setIsSubmitting(false);
    }
  };

  const addTag = () => {
    if (tagInput.trim() && !formData.tags?.includes(tagInput.trim())) {
      setFormData(prev => ({
        ...prev,
        tags: [...(prev.tags || []), tagInput.trim()]
      }));
      setTagInput('');
    }
  };

  const removeTag = (tagToRemove: string) => {
    setFormData(prev => ({
      ...prev,
      tags: prev.tags?.filter(tag => tag !== tagToRemove) || []
    }));
  };

  return (
    <div className="min-h-screen bg-gray-50">
      {/* í—¤ë” */}
      <div className="bg-white border-b border-gray-200">
        <div className="max-w-[720px] mx-auto px-0 md:px-6 py-4">
          <div className="flex items-center justify-between">
            <div className="flex items-center space-x-4">
              <button
                onClick={onCancel}
                className="p-2 hover:bg-gray-100 rounded-lg"
              >
                <ArrowLeft className="w-5 h-5 text-gray-600" />
              </button>
              <div>
                <h1 className="text-xl font-semibold text-gray-900">í”„ë¡œì íŠ¸ í¸ì§‘</h1>
                <p className="text-sm text-gray-500 mt-1">{project.title}</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* í¸ì§‘ í¼ */}
      <main className="max-w-[720px] mx-auto px-0 md:px-6 py-6">
        <form onSubmit={handleSubmit} className="space-y-6">
          {/* ê¸°ë³¸ ì •ë³´ */}
          <div className="bg-white rounded-lg border border-gray-200 p-6">
            <h3 className="text-lg font-semibold text-gray-900 mb-4">ê¸°ë³¸ ì •ë³´</h3>
            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">
                  í”„ë¡œì íŠ¸ ì´ë¦„ *
                </label>
                <input
                  type="text"
                  value={formData.title || ''}
                  onChange={(e) => setFormData(prev => ({ ...prev, title: e.target.value }))}
                  className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  required
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">
                  ì„¤ëª…
                </label>
                <textarea
                  value={formData.description || ''}
                  onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}
                  className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  rows={3}
                />
              </div>

              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-1">
                    ìƒíƒœ
                  </label>
                  <select
                    value={formData.status}
                    onChange={(e) => setFormData(prev => ({ ...prev, status: e.target.value as ProjectStatus }))}
                    className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  >
                    <option value={ProjectStatus.PLANNING}>ê³„íšì¤‘</option>
                    <option value={ProjectStatus.ACTIVE}>ì§„í–‰ì¤‘</option>
                    <option value={ProjectStatus.ON_HOLD}>ì¼ì‹œì¤‘ë‹¨</option>
                    <option value={ProjectStatus.COMPLETED}>ì™„ë£Œ</option>
                  </select>
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-1">
                    ìš°ì„ ìˆœìœ„
                  </label>
                  <select
                    value={formData.priority}
                    onChange={(e) => setFormData(prev => ({ ...prev, priority: e.target.value as ProjectPriority }))}
                    className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  >
                    <option value={ProjectPriority.LOW}>ë‚®ìŒ</option>
                    <option value={ProjectPriority.MEDIUM}>ë³´í†µ</option>
                    <option value={ProjectPriority.HIGH}>ë†’ìŒ</option>
                    <option value={ProjectPriority.URGENT}>ê¸´ê¸‰</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          {/* ì¼ì • ë° ì˜ˆì‚° */}
          <div className="bg-white rounded-lg border border-gray-200 p-6">
            <h3 className="text-lg font-semibold text-gray-900 mb-4">ì¼ì • ë° ì˜ˆì‚°</h3>
            <div className="space-y-4">
              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-1">
                    ì‹œì‘ì¼
                  </label>
                  <input
                    type="date"
                    value={formData.startDate || ''}
                    onChange={(e) => setFormData(prev => ({ ...prev, startDate: e.target.value }))}
                    className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  />
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-1">
                    ë§ˆê°ì¼
                  </label>
                  <input
                    type="date"
                    value={formData.dueDate || ''}
                    onChange={(e) => setFormData(prev => ({ ...prev, dueDate: e.target.value }))}
                    className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  />
                </div>
              </div>

              <div className="grid grid-cols-3 gap-4">
                <div className="col-span-2">
                  <label className="block text-sm font-medium text-gray-700 mb-1">
                    ì˜ˆì‚°
                  </label>
                  <input
                    type="number"
                    value={formData.budget || ''}
                    onChange={(e) => setFormData(prev => ({ ...prev, budget: e.target.value ? Number(e.target.value) : undefined }))}
                    className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    placeholder="0"
                  />
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-1">
                    í†µí™”
                  </label>
                  <select
                    value={formData.currency || 'KRW'}
                    onChange={(e) => setFormData(prev => ({ ...prev, currency: e.target.value }))}
                    className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  >
                    <option value="KRW">KRW</option>
                    <option value="USD">USD</option>
                    <option value="EUR">EUR</option>
                    <option value="JPY">JPY</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          {/* ì™¸ê´€ ì„¤ì • */}
          <div className="bg-white rounded-lg border border-gray-200 p-6">
            <h3 className="text-lg font-semibold text-gray-900 mb-4">ì™¸ê´€ ì„¤ì •</h3>
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-1">
                í”„ë¡œì íŠ¸ ìƒ‰ìƒ
              </label>
              <div className="flex items-center space-x-3">
                <input
                  type="color"
                  value={formData.color || '#3B82F6'}
                  onChange={(e) => setFormData(prev => ({ ...prev, color: e.target.value }))}
                  className="w-12 h-12 border border-gray-300 rounded-lg"
                />
                <input
                  type="text"
                  value={formData.color || '#3B82F6'}
                  onChange={(e) => setFormData(prev => ({ ...prev, color: e.target.value }))}
                  className="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  placeholder="#3B82F6"
                />
              </div>
            </div>
          </div>

          {/* íƒœê·¸ */}
          <div className="bg-white rounded-lg border border-gray-200 p-6">
            <h3 className="text-lg font-semibold text-gray-900 mb-4">íƒœê·¸</h3>
            <div className="space-y-3">
              <div className="flex space-x-2">
                <input
                  type="text"
                  value={tagInput}
                  onChange={(e) => setTagInput(e.target.value)}
                  onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), addTag())}
                  className="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  placeholder="íƒœê·¸ ì…ë ¥ í›„ Enter"
                />
                <button
                  type="button"
                  onClick={addTag}
                  className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
                >
                  ì¶”ê°€
                </button>
              </div>
              {formData.tags && formData.tags.length > 0 && (
                <div className="flex flex-wrap gap-2">
                  {formData.tags.map((tag, index) => (
                    <span
                      key={index}
                      className="inline-flex items-center space-x-1 px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded-full"
                    >
                      <span>{tag}</span>
                      <button
                        type="button"
                        onClick={() => removeTag(tag)}
                        className="text-blue-600 hover:text-blue-800"
                      >
                        Ã—
                      </button>
                    </span>
                  ))}
                </div>
              )}
            </div>
          </div>

          {/* ì €ì¥ ë²„íŠ¼ */}
          <div className="flex space-x-3">
            <button
              type="button"
              onClick={onCancel}
              className="flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50"
            >
              ì·¨ì†Œ
            </button>
            <button
              type="submit"
              disabled={isSubmitting || !formData.title?.trim()}
              className="flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50"
            >
              {isSubmitting ? 'ì €ì¥ ì¤‘...' : 'ì €ì¥'}
            </button>
          </div>
        </form>
      </main>
    </div>
  );
}

export default function ProjectDetailPage() {
  const params = useParams();
  const router = useRouter();
  const [project, setProject] = useState<Project | null>(null);
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [isEditing, setIsEditing] = useState(false);

  // í”„ë¡œì íŠ¸ ë°ì´í„° ë¡œë“œ
  useEffect(() => {
    loadProject();
  }, [params.id]);

  const loadProject = async () => {
    try {
      setIsLoading(true);
      setError(null);
      
      // ëª©ì—… í”„ë¡œì íŠ¸ ë°ì´í„° - í”„ë¡œì íŠ¸ ëª©ë¡ í˜ì´ì§€ì™€ ë™ì¼í•œ ë°ì´í„° ì‚¬ìš©
      const mockProjects: { [key: string]: Project } = {
        '1': {
          id: '1',
          title: 'ì›Œí´ë¦¬ MVP ê°œë°œ',
          description: 'ë¹„ì¦ˆë‹ˆìŠ¤ ì„±ê³µì„ ìœ„í•œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ MVP ë²„ì „ ê°œë°œ',
          status: ProjectStatus.ACTIVE,
          priority: ProjectPriority.HIGH,
          progress: 75,
          memberCount: 4,
          taskCount: 23,
          completedTaskCount: 17,
          visibility: ProjectVisibility.TEAM,
          isArchived: false,
          isTemplate: false,
          settings: {
            allowGuestAccess: false,
            requireApprovalForTasks: false,
            enableTimeTracking: true,
            enableBudgetTracking: false,
            enableNotifications: true
          },
          ownerId: 'user1',
          createdAt: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),
          updatedAt: new Date().toISOString(),
          tags: ['React', 'TypeScript', 'NestJS', 'MVP'],
          color: '#3B82F6',
          icon: 'ğŸš€',
          owner: {
            id: 'user1',
            name: 'ê¹€ì›Œí´ë¦¬',
            email: 'kim@workly.com'
          },
          objectives: [
            {
              id: 'obj1',
              title: 'ì‚¬ìš©ì ì¸ì¦ ì‹œìŠ¤í…œ êµ¬ì¶•',
              description: 'Google OAuth ê¸°ë°˜ ë¡œê·¸ì¸ ì‹œìŠ¤í…œ',
              completed: true,
              completedAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString()
            },
            {
              id: 'obj2', 
              title: 'í”„ë¡œì íŠ¸ ê´€ë¦¬ ê¸°ëŠ¥ ì™„ì„±',
              description: 'í”„ë¡œì íŠ¸ CRUD ë° í˜‘ì—… ê¸°ëŠ¥',
              completed: false
            }
          ],
          keyResults: [
            {
              id: 'kr1',
              objectiveId: 'obj1',
              title: 'ë¡œê·¸ì¸ ì„±ê³µë¥ ',
              description: 'Google OAuth ë¡œê·¸ì¸ ì„±ê³µë¥  95% ì´ìƒ',
              targetValue: 95,
              currentValue: 98,
              unit: '%',
              completed: true,
              completedAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString()
            },
            {
              id: 'kr2',
              objectiveId: 'obj2',
              title: 'í”„ë¡œì íŠ¸ ìƒì„± ê¸°ëŠ¥',
              description: 'ì‚¬ìš©ìê°€ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥',
              targetValue: 100,
              currentValue: 80,
              unit: '%',
              completed: false
            },
            {
              id: 'kr3',
              objectiveId: 'obj2',
              title: 'ì‹¤ì‹œê°„ ì±„íŒ… êµ¬í˜„',
              description: 'Socket.io ê¸°ë°˜ ì‹¤ì‹œê°„ ë©”ì‹œì§•',
              targetValue: 100,
              currentValue: 60,
              unit: '%',
              completed: false
            }
          ],
          completedObjectiveCount: 1,
          completedKeyResultCount: 1,
          members: [
            {
              id: 'member1',
              projectId: '1',
              userId: 'user1',
              role: ProjectMemberRole.OWNER,
              permissions: ['read', 'write', 'admin'],
              joinedAt: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),
              user: {
                id: 'user1',
                name: 'ê¹€ì›Œí´ë¦¬',
                email: 'kim@workly.com'
              }
            },
            {
              id: 'member2',
              projectId: '1',
              userId: 'user2',
              role: ProjectMemberRole.ADMIN,
              permissions: ['read', 'write'],
              joinedAt: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),
              user: {
                id: 'user2',
                name: 'ë°•ê°œë°œì',
                email: 'park@workly.com'
              }
            },
            {
              id: 'member3',
              projectId: '1',
              userId: 'user3',
              role: ProjectMemberRole.MEMBER,
              permissions: ['read'],
              joinedAt: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(),
              user: {
                id: 'user3',
                name: 'ì´ë””ìì´ë„ˆ',
                email: 'lee@workly.com'
              }
            },
            {
              id: 'member4',
              projectId: '1',
              userId: 'user4',
              role: ProjectMemberRole.MEMBER,
              permissions: ['read'],
              joinedAt: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000).toISOString(),
              user: {
                id: 'user4',
                name: 'ì •ê¸°íšì',
                email: 'jung@workly.com'
              }
            }
          ],
          startDate: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),
          dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(),
          budget: 50000000,
          currency: 'KRW'
        },
        '2': {
          id: '2',
          title: 'AI ì±—ë´‡ ê°œë°œ',
          description: 'ê³ ê° ì§€ì›ì„ ìœ„í•œ AI ê¸°ë°˜ ì±—ë´‡ ì‹œìŠ¤í…œ êµ¬ì¶•',
          status: ProjectStatus.ACTIVE,
          priority: ProjectPriority.MEDIUM,
          progress: 45,
          memberCount: 1,
          taskCount: 15,
          completedTaskCount: 7,
          visibility: ProjectVisibility.TEAM,
          isArchived: false,
          isTemplate: false,
          settings: {
            allowGuestAccess: false,
            requireApprovalForTasks: true,
            enableTimeTracking: true,
            enableBudgetTracking: true,
            enableNotifications: true
          },
          ownerId: 'user5',
          createdAt: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),
          updatedAt: new Date().toISOString(),
          tags: ['AI', 'Python', 'TensorFlow', 'ì±—ë´‡'],
          color: '#10B981',
          icon: 'ğŸ¤–',
          owner: {
            id: 'user5',
            name: 'ìµœAIì—°êµ¬ì',
            email: 'choi@workly.com'
          },
          objectives: [
            {
              id: 'obj3',
              title: 'NLP ëª¨ë¸ í•™ìŠµ',
              description: 'í•œêµ­ì–´ ìì—°ì–´ ì²˜ë¦¬ ëª¨ë¸ ê°œë°œ',
              completed: false
            }
          ],
          keyResults: [
            {
              id: 'kr4',
              objectiveId: 'obj3',
              title: 'ëª¨ë¸ ì •í™•ë„',
              description: 'ì§ˆë¬¸ ì‘ë‹µ ì •í™•ë„ 90% ë‹¬ì„±',
              targetValue: 90,
              currentValue: 72,
              unit: '%',
              completed: false
            }
          ],
          completedObjectiveCount: 0,
          completedKeyResultCount: 0,
          members: [
            {
              id: 'member5',
              projectId: '2',
              userId: 'user5',
              role: ProjectMemberRole.OWNER,
              permissions: ['read', 'write', 'admin'],
              joinedAt: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),
              user: {
                id: 'user5',
                name: 'ìµœAIì—°êµ¬ì',
                email: 'choi@workly.com'
              }
            }
          ]
        }
      };

      // API í˜¸ì¶œ ì‹œë®¬ë ˆì´ì…˜ì„ ìœ„í•œ ì§€ì—°
      await new Promise(resolve => setTimeout(resolve, 1000));

      const projectId = params.id as string;
      const foundProject = mockProjects[projectId];
      
      if (!foundProject) {
        throw new Error('í”„ë¡œì íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
      }

      setProject(foundProject);
    } catch (err) {
      console.error('í”„ë¡œì íŠ¸ ë¡œë“œ ì‹¤íŒ¨:', err);
      setError(err instanceof Error ? err.message : 'í”„ë¡œì íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
    } finally {
      setIsLoading(false);
    }
  };

  const handleSaveProject = async (updateData: UpdateProjectDto) => {
    try {
      // ëª©ì—… í”„ë¡œì íŠ¸ ìˆ˜ì • ì‹œë®¬ë ˆì´ì…˜
      await new Promise(resolve => setTimeout(resolve, 1000));
      
      console.log('í”„ë¡œì íŠ¸ ìˆ˜ì • ë°ì´í„°:', updateData);
      
      // ëª©ì—…ì—ì„œëŠ” ì‹¤ì œë¡œ ì—…ë°ì´íŠ¸í•˜ì§€ ì•Šê³  ì„±ê³µ ë©”ì‹œì§€ë§Œ í‘œì‹œ
      alert('í”„ë¡œì íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤! (ëª©ì—… ëª¨ë“œ)');
      
      setIsEditing(false);
    } catch (err) {
      console.error('í”„ë¡œì íŠ¸ ìˆ˜ì • ì‹¤íŒ¨:', err);
      throw err;
    }
  };

  // ë¡œë”© ìƒíƒœ
  if (isLoading) {
    return (
      <div className="min-h-screen bg-gray-50 flex items-center justify-center">
        <div className="text-center">
          <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"></div>
          <p className="text-gray-600">í”„ë¡œì íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
        </div>
      </div>
    );
  }

  // ì˜¤ë¥˜ ìƒíƒœ
  if (error || !project) {
    return (
      <div className="min-h-screen bg-gray-50 flex items-center justify-center">
        <div className="text-center">
          <p className="text-red-600 mb-4">{error || 'í”„ë¡œì íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.'}</p>
          <div className="space-x-4">
            <button
              onClick={loadProject}
              className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
            >
              ë‹¤ì‹œ ì‹œë„
            </button>
            <button
              onClick={() => router.push('/projects')}
              className="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50"
            >
              í”„ë¡œì íŠ¸ ëª©ë¡ìœ¼ë¡œ
            </button>
          </div>
        </div>
      </div>
    );
  }

  // í¸ì§‘ ëª¨ë“œ
  if (isEditing) {
    return (
      <ProjectEditForm
        project={project}
        onSave={handleSaveProject}
        onCancel={() => setIsEditing(false)}
      />
    );
  }

  // ìƒì„¸ ë³´ê¸° ëª¨ë“œ
  return (
    <ProjectDetailView
      project={project}
      onEdit={() => setIsEditing(true)}
      onProjectUpdate={loadProject}
    />
  );
}
</file>

<file path="frontend/src/app/globals.css">
@tailwind base;
@tailwind components;
@tailwind utilities;

/* MDXEditor CSS */
@import '@mdxeditor/editor/style.css';

/* PRD ëª…ì„¸: Pretendard í°íŠ¸ ì‹œìŠ¤í…œ ì ìš© */
@import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css');

/* ëª¨ë°”ì¼ viewport ë° ìŠ¤í¬ë¡¤ ìµœì í™” */
@supports (padding-bottom: env(safe-area-inset-bottom)) {
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom);
  }
}

/* 
 * ê¸€ë¡œë²Œ ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¹€ ì •ì±…
 * ëª¨ë“  ìš”ì†Œì˜ ìŠ¤í¬ë¡¤ë°”ë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¸°ê³ 
 * í•„ìš”í•œ ê³³ì—ì„œë§Œ scrollbar-on-hover í´ë˜ìŠ¤ë¡œ ì„ íƒì  í‘œì‹œ
 */
* {
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE and Edge */
}

*::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}

/* 
 * ìŠ¤í¬ë¡¤í•  ë•Œë§Œ í‘œì‹œë˜ëŠ” ìŠ¤í¬ë¡¤ë°”
 * í˜¸ë²„, í¬ì»¤ìŠ¤, ìŠ¤í¬ë¡¤ ì‹œì—ë§Œ í‘œì‹œ
 * ëª¨ë“  ì£¼ìš” ë¸Œë¼ìš°ì € ì§€ì› (Chrome, Safari, Firefox, Edge)
 */
.scrollbar-on-hover {
  scrollbar-width: thin; /* Firefox */
  scrollbar-color: transparent transparent; /* Firefox */
  transition: scrollbar-color 0.3s ease;
  -ms-overflow-style: auto; /* IE/Edge ë³µì› */
}

.scrollbar-on-hover:hover,
.scrollbar-on-hover:focus-within,
.scrollbar-on-hover.scrolling {
  scrollbar-width: thin;
  scrollbar-color: rgba(156, 163, 175, 0.5) transparent;
}

.scrollbar-on-hover::-webkit-scrollbar {
  width: 6px;
  height: 6px;
  display: block;
}

.scrollbar-on-hover::-webkit-scrollbar-track {
  background: transparent;
}

.scrollbar-on-hover::-webkit-scrollbar-thumb {
  background: transparent;
  border-radius: 3px;
  transition: background 0.3s ease;
}

.scrollbar-on-hover:hover::-webkit-scrollbar-thumb,
.scrollbar-on-hover:focus-within::-webkit-scrollbar-thumb,
.scrollbar-on-hover.scrolling::-webkit-scrollbar-thumb {
  background: rgba(156, 163, 175, 0.5);
}

.scrollbar-on-hover:hover::-webkit-scrollbar-thumb:hover,
.scrollbar-on-hover:focus-within::-webkit-scrollbar-thumb:hover,
.scrollbar-on-hover.scrolling::-webkit-scrollbar-thumb:hover {
  background: rgba(107, 114, 128, 0.7);
}

/* ë ˆê±°ì‹œ ì»¤ìŠ¤í…€ ìŠ¤í¬ë¡¤ë°” (í˜¸í™˜ì„±ìš©) */
.custom-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: rgba(156, 163, 175, 0.5) transparent;
}

.custom-scrollbar::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: rgba(156, 163, 175, 0.5);
  border-radius: 3px;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: rgba(107, 114, 128, 0.7);
}

/* ëª¨ë°”ì¼ í„°ì¹˜ ìµœì í™” */
.touch-manipulation {
  touch-action: manipulation;
  -webkit-user-select: none;
  user-select: none;
}

/* iOS Safari viewport ì´ìŠˆ í•´ê²° */
@supports (-webkit-appearance: none) {
  .h-screen-mobile {
    height: 100vh;
    height: -webkit-fill-available;
  }
}

/* ìŠ¤í¬ë¡¤ ìƒíƒœ ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ */
.scroll-container {
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.scroll-container::-webkit-scrollbar {
  display: none;
}

/* ìŠ¤í¬ë¡¤ ì¸ë””ì¼€ì´í„° (í•„ìš”ì‹œ ì‚¬ìš©) */
.scroll-indicator {
  position: absolute;
  right: 4px;
  top: 50%;
  transform: translateY(-50%);
  width: 4px;
  height: 50%;
  background: rgba(156, 163, 175, 0.3);
  border-radius: 2px;
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
}

.scroll-container.scrolling .scroll-indicator {
  opacity: 1;
}

/* ì»¤ìŠ¤í…€ z-index í´ë˜ìŠ¤ */
.z-45 {
  z-index: 45;
}

.z-55 {
  z-index: 55;
}

.z-60 {
  z-index: 60;
}

@layer base {
  :root {
    /* PRD ëª…ì„¸: ì›Œí´ë¦¬ ì „ì—­ ìƒ‰ìƒ ì‹œìŠ¤í…œ */
    --primary: 37 99 235; /* #2563eb (blue-600) - Primary */
    --primary-hover: 29 78 216; /* #1d4ed8 (blue-700) - Primary Hover */
    --primary-light: 219 234 254; /* #dbeafe (blue-100) - Primary Light */
    --text-main: 17 24 39; /* #111827 (gray-900) - Text Main */
    --text-secondary: 107 114 128; /* #6b7280 (gray-500) - Text Secondary */
    --background: 249 250 251; /* #f9fafb (gray-50) - Background */
    --border: 229 231 235; /* #e5e7eb (gray-200) - Border */
    --success: 5 150 105; /* #059669 (green-600) - Success */
    --warning: 217 119 6; /* #d97706 (amber-600) - Warning */
    --error: 220 38 38; /* #dc2626 (red-600) - Error */
    
    /* ê¸°ì¡´ shadcn/ui í˜¸í™˜ì„± ìœ ì§€ */
    --foreground: var(--text-main);
    --card: 255 255 255; /* #FFFFFF */
    --card-foreground: var(--text-main);
    --primary-foreground: 255 255 255; /* #FFFFFF */
    --secondary: var(--primary-light);
    --secondary-foreground: var(--primary);
    --muted: var(--background);
    --muted-foreground: var(--text-secondary);
    --accent: var(--primary-light);
    --accent-foreground: var(--primary);
    --destructive: var(--error);
    --destructive-foreground: 255 255 255; /* #FFFFFF */
    --input: var(--border);
    --ring: var(--primary);
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    /* PRD ëª…ì„¸: Pretendard í°íŠ¸ ì ìš© */
    font-family: "Pretendard", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  }
  
  /* ì ‘ê·¼ì„±ì„ ìœ„í•œ ìŠ¤í¬ë¦° ë¦¬ë” ì „ìš© í…ìŠ¤íŠ¸ */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
  
  /* í¬ì»¤ìŠ¤ í‘œì‹œ ê°œì„  */
  *:focus-visible {
    outline: 2px solid rgb(0 0 0 / var(--tw-text-opacity, 1));
    outline-offset: 2px;
  }
  
  /* ê³ ëŒ€ë¹„ ëª¨ë“œ ì§€ì› */
  @media (prefers-contrast: high) {
    * {
      border-color: currentColor !important;
    }
  }
  
  /* ê°ì†Œëœ ëª¨ì…˜ ì„¤ì • ì§€ì› */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
}

/* PRD ëª…ì„¸: ì›Œí´ë¦¬ ì „ì—­ UI/UX ì‹œìŠ¤í…œ */
@layer components {
  .nav-item {
    @apply flex items-center justify-center rounded-xl cursor-pointer transition-colors;
    @apply hover:bg-blue-50 text-gray-500 hover:text-blue-600;
    width: 60px;
    height: 60px;
  }
  
  .nav-item.active {
    @apply bg-blue-100 text-blue-600;
  }
  
  /* PRD ëª…ì„¸: Card ì»´í¬ë„ŒíŠ¸ - ë¯¸ë‹ˆë©€ ë””ìì¸ */
  .workly-card {
    @apply rounded-lg bg-white border border-gray-100 p-4;
  }
  
  /* PRD ìˆ˜ì •: List Card - ëª©ë¡ ì•„ì´í…œë“¤ì„ ìœ„í•œ ì»¨í…Œì´ë„ˆ ì¹´ë“œ - ë¯¸ë‹ˆë©€ ë””ìì¸ */
  .workly-list-card {
    @apply rounded-lg bg-white border border-gray-100;
  }
  
  /* PRD ëª…ì„¸: Button ì»´í¬ë„ŒíŠ¸ */
  .workly-button {
    @apply rounded-md font-semibold px-4 py-2;
    @apply bg-blue-600 text-white hover:bg-blue-700;
    @apply transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500;
  }
  
  .workly-button-outline {
    @apply rounded-md font-semibold px-4 py-2;
    @apply border border-gray-200 bg-white hover:bg-gray-50 text-gray-900;
    @apply transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500;
  }
  
  /* PRD ëª…ì„¸: Filter Chip ì»´í¬ë„ŒíŠ¸ */
  .workly-filter-chip {
    @apply rounded-full bg-gray-100 text-gray-700 px-3 py-1 text-sm;
    @apply transition-colors cursor-pointer hover:bg-gray-200;
  }
  
  .workly-filter-chip.active {
    @apply bg-blue-100 text-blue-700;
  }
  
  /* PRD ëª…ì„¸: íƒ€ì´í¬ê·¸ë˜í”¼ ì‹œìŠ¤í…œ */
  .workly-page-title {
    @apply text-2xl font-bold text-gray-900; /* 24px, Bold (700) */
  }
  
  .workly-card-title {
    @apply text-lg font-semibold text-gray-900; /* 18px, SemiBold (600) */
  }
  
  .workly-body {
    @apply text-base font-normal text-gray-900; /* 16px, Regular (400) */
  }
  
  .workly-caption {
    @apply text-sm font-normal text-gray-500; /* 14px, Regular (400) */
  }
  
  /* í…ìŠ¤íŠ¸ í´ë¨í•‘ ìœ í‹¸ë¦¬í‹° */
  .line-clamp-1 {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

/* ë§ˆí¬ë‹¤ìš´ ì—ë””í„° ì›Œí´ë¦¬ ìŠ¤íƒ€ì¼ ì»¤ìŠ¤í„°ë§ˆì´ì§• */
.w-md-editor {
  background-color: transparent !important;
}

.w-md-editor-text-container,
.w-md-editor-text-input,
.w-md-editor-text-area {
  font-family: "Pretendard", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif !important;
  font-size: 14px !important;
  line-height: 1.5 !important;
}

.w-md-editor-toolbar {
  background-color: #f9fafb !important;
  border-bottom: 1px solid #e5e7eb !important;
}

.w-md-editor-toolbar button {
  color: #6b7280 !important;
}

.w-md-editor-toolbar button:hover {
  background-color: #e5e7eb !important;
  color: #2563eb !important;
}

.w-md-editor-text {
  background-color: white !important;
  border: none !important;
}

.w-md-editor-text-container .w-md-editor-text-input,
.w-md-editor-text-container .w-md-editor-text-area {
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
}

.w-md-editor-text-container .w-md-editor-text-area:focus {
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
}

/* MDXEditor ì›Œí´ë¦¬ ìŠ¤íƒ€ì¼ ì»¤ìŠ¤í„°ë§ˆì´ì§• */
.mdxeditor {
  background-color: white !important;
  font-family: "Pretendard", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif !important;
}

.mdxeditor-toolbar {
  background-color: #f9fafb !important;
  border-bottom: 1px solid #e5e7eb !important;
  padding: 8px 12px !important;
}

.mdxeditor-toolbar button {
  color: #6b7280 !important;
  border-radius: 6px !important;
  padding: 6px 8px !important;
}

.mdxeditor-toolbar button:hover {
  background-color: #e5e7eb !important;
  color: #2563eb !important;
}

.mdxeditor-toolbar button[data-state="on"] {
  background-color: #dbeafe !important;
  color: #2563eb !important;
}

.mdxeditor-rich-text-editor {
  font-family: "Pretendard", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif !important;
  font-size: 14px !important;
  line-height: 1.6 !important;
}

.mdxeditor-rich-text-editor h1 {
  font-size: 1.875rem !important;
  font-weight: 700 !important;
  margin-top: 1.5rem !important;
  margin-bottom: 1rem !important;
}

.mdxeditor-rich-text-editor h2 {
  font-size: 1.5rem !important;
  font-weight: 600 !important;
  margin-top: 1.25rem !important;
  margin-bottom: 0.75rem !important;
}

.mdxeditor-rich-text-editor h3 {
  font-size: 1.25rem !important;
  font-weight: 600 !important;
  margin-top: 1rem !important;
  margin-bottom: 0.5rem !important;
}

.mdxeditor-rich-text-editor p {
  margin-bottom: 1rem !important;
}

.mdxeditor-rich-text-editor ul,
.mdxeditor-rich-text-editor ol {
  margin-bottom: 1rem !important;
  padding-left: 1.5rem !important;
}

.mdxeditor-rich-text-editor li {
  margin-bottom: 0.25rem !important;
}

.mdxeditor-rich-text-editor blockquote {
  border-left: 4px solid #2563eb !important;
  background-color: #f8fafc !important;
  padding: 1rem !important;
  margin: 1rem 0 !important;
  font-style: italic !important;
}

.mdxeditor-rich-text-editor code {
  background-color: #f1f5f9 !important;
  padding: 0.125rem 0.25rem !important;
  border-radius: 0.25rem !important;
  font-size: 0.875rem !important;
}

.mdxeditor-rich-text-editor pre {
  background-color: #1e293b !important;
  color: #e2e8f0 !important;
  padding: 1rem !important;
  border-radius: 0.5rem !important;
  overflow-x: auto !important;
  margin: 1rem 0 !important;
}

.mdxeditor-rich-text-editor a {
  color: #2563eb !important;
  text-decoration: underline !important;
}

.mdxeditor-rich-text-editor a:hover {
  color: #1d4ed8 !important;
}
</file>

<file path="frontend/src/components/navigation/LeftNavigation.tsx">
'use client'

import { useState, useEffect, useRef } from 'react'
import Link from 'next/link'
import { usePathname, useRouter } from 'next/navigation'
import { 
  Squares2X2Icon,
  FolderIcon,
  InboxIcon,
  FlagIcon,
  UserIcon,
  Bars3Icon 
} from '@heroicons/react/24/outline'
import { 
  Squares2X2Icon as Squares2X2IconSolid,
  FolderIcon as FolderIconSolid,
  InboxIcon as InboxIconSolid,
  FlagIcon as FlagIconSolid,
  UserIcon as UserIconSolid 
} from '@heroicons/react/24/solid'
import { isAuthenticated, logout } from '@/lib/auth'
import CPERModal from '@/components/inbox/CPERModal'

// ì›Œí´ë¦¬ ê³ ìœ  ë°©ë²•ë¡  - 5ê°œ í•µì‹¬ ë„¤ë¹„ê²Œì´ì…˜ í•­ëª©
const navigationItems = [
  { 
    name: 'ì—…ë¬´', 
    href: '/', 
    icon: Squares2X2Icon, 
    activeIcon: Squares2X2IconSolid 
  },
  { 
    name: 'í”„ë¡œì íŠ¸', 
    href: '/projects', 
    icon: FolderIcon, 
    activeIcon: FolderIconSolid 
  },
  { 
    name: 'ìˆ˜ì§‘í•¨', 
    href: '/inbox', 
    icon: InboxIcon, 
    activeIcon: InboxIconSolid,
    isCenter: true, // CPER ì›Œí¬í”Œë¡œìš° ì¤‘ì‹¬
    isModal: true // ëª¨ë‹¬ë¡œ ì—´ê¸°
  },
  { 
    name: 'ëª©í‘œ', 
    href: '/goals', 
    icon: FlagIcon, 
    activeIcon: FlagIconSolid 
  },
  { 
    name: 'í”„ë¡œí•„', 
    href: '/profile', 
    icon: UserIcon, 
    activeIcon: UserIconSolid 
  },
]

export default function LeftNavigation() {
  const pathname = usePathname()
  const router = useRouter()
  const [isMenuOpen, setIsMenuOpen] = useState(false)
  const [isLoggedIn, setIsLoggedIn] = useState(false)
  const [isInboxModalOpen, setIsInboxModalOpen] = useState(false)
  const menuRef = useRef<HTMLDivElement>(null)

  useEffect(() => {
    setIsLoggedIn(isAuthenticated())
  }, [])

  const handleLoginClick = () => {
    router.push('/auth/login')
    setIsMenuOpen(false)
  }

  const handleLogoutClick = async () => {
    try {
      await logout()
      setIsLoggedIn(false)
      setIsMenuOpen(false)
      router.push('/auth/login')
    } catch (error) {
      console.error('ë¡œê·¸ì•„ì›ƒ ì˜¤ë¥˜:', error)
    }
  }

  const handleSettingsClick = () => {
    router.push('/settings')
    setIsMenuOpen(false)
  }

  const handleBoardClick = (section?: string) => {
    if (section) {
      router.push(`/board?section=${encodeURIComponent(section)}`)
    } else {
      router.push('/board')
    }
    setIsMenuOpen(false)
  }

  const handleInboxClick = () => {
    setIsInboxModalOpen(true)
  }

  const handleInboxModalClose = () => {
    setIsInboxModalOpen(false)
  }

  // ë°”ê¹¥ í´ë¦­ ì‹œ ë©”ë‰´ ë‹«ê¸°
  useEffect(() => {
    function handleClickOutside(event: MouseEvent) {
      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {
        setIsMenuOpen(false)
      }
    }

    document.addEventListener('mousedown', handleClickOutside)
    return () => {
      document.removeEventListener('mousedown', handleClickOutside)
    }
  }, [])

  return (
    <nav 
      className="hidden md:flex fixed left-0 top-0 h-screen w-[76px] bg-background border-r border-border flex-col items-center py-5 z-50"
      role="navigation"
      aria-label="ì›Œí´ë¦¬ ë©”ì¸ ë„¤ë¹„ê²Œì´ì…˜"
    >
      {/* ë¡œê³  */}
      <div className="mb-10">
        <Link 
          href="/" 
          className="flex items-center justify-center w-8 h-8 font-bold text-xl text-foreground"
          aria-label="ì›Œí´ë¦¬ í™ˆìœ¼ë¡œ ì´ë™"
        >
          W
        </Link>
      </div>

      {/* ë©”ë‰´ í•­ëª©ë“¤ */}
      <div className="flex flex-col items-center gap-2 flex-1 justify-center">
        {navigationItems.map((item) => {
          const isActive = pathname === item.href || 
            (item.href !== '/' && pathname.startsWith(item.href))
          const Icon = isActive ? item.activeIcon : item.icon
          
          // ìˆ˜ì§‘í•¨ì€ ëª¨ë‹¬ë¡œ ì²˜ë¦¬
          if (item.isModal) {
            return (
              <button
                key={item.name}
                onClick={handleInboxClick}
                className={`nav-item ${
                  item.isCenter ? 'relative' : ''
                }`}
                title={item.name}
                aria-label={item.name}
              >
                <Icon className="w-6 h-6" />
                {/* CPER ì›Œí¬í”Œë¡œìš° ì¤‘ì‹¬ í‘œì‹œ */}
                {item.isCenter && (
                  <div className="absolute -top-1 -right-1 w-2 h-2 bg-amber-500 rounded-full animate-pulse"></div>
                )}
                <span className="sr-only">{item.name}</span>
              </button>
            )
          }
          
          return (
            <Link
              key={item.name}
              href={item.href}
              className={`nav-item ${isActive ? 'active' : ''} ${
                item.isCenter ? 'relative' : ''
              }`}
              title={item.name}
              aria-label={item.name}
              aria-current={isActive ? 'page' : undefined}
            >
              <Icon className="w-6 h-6" />
              {/* CPER ì›Œí¬í”Œë¡œìš° ì¤‘ì‹¬ í‘œì‹œ */}
              {item.isCenter && (
                <div className="absolute -top-1 -right-1 w-2 h-2 bg-amber-500 rounded-full animate-pulse"></div>
              )}
              <span className="sr-only">{item.name}</span>
            </Link>
          )
        })}
      </div>

      {/* í–„ë²„ê±° ë©”ë‰´ */}
      <div className="mb-5 relative" ref={menuRef}>
        <button 
          onClick={() => setIsMenuOpen(!isMenuOpen)}
          className="nav-item" 
          title="ë©”ë‰´"
          aria-label="ë©”ë‰´"
          aria-expanded={isMenuOpen}
          aria-haspopup="true"
        >
          <Bars3Icon className="w-6 h-6" />
          <span className="sr-only">ë©”ë‰´</span>
        </button>
        
        {isMenuOpen && (
          <div 
            className="absolute left-full bottom-0 ml-2 bg-card border border-border rounded-xl shadow-lg min-w-48 py-2 z-50"
            role="menu"
            aria-label="ë©”ë‰´ ì˜µì…˜"
          >
            {/* ê²Œì‹œíŒ ì„¹ì…˜ */}
            <div className="px-3 py-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider border-b border-border">
              ê²Œì‹œíŒ
            </div>
            <button 
              onClick={() => handleBoardClick()}
              className="w-full text-left px-4 py-3 text-sm text-foreground hover:bg-accent cursor-pointer transition-colors"
              role="menuitem"
            >
              ì „ì²´ ê²Œì‹œíŒ
            </button>
            <button 
              onClick={() => handleBoardClick('ì„ë¬´ ê²Œì‹œíŒ')}
              className="w-full text-left px-4 py-3 text-sm text-foreground hover:bg-accent cursor-pointer transition-colors"
              role="menuitem"
            >
              ì„ë¬´ ê²Œì‹œíŒ
            </button>
            <button 
              onClick={() => handleBoardClick('ì§€ì‹ ìœ„í‚¤')}
              className="w-full text-left px-4 py-3 text-sm text-foreground hover:bg-accent cursor-pointer transition-colors"
              role="menuitem"
            >
              ì§€ì‹ ìœ„í‚¤
            </button>
            <button 
              onClick={() => handleBoardClick('í”„ë¡œì íŠ¸ ì‡¼ì¼€ì´ìŠ¤')}
              className="w-full text-left px-4 py-3 text-sm text-foreground hover:bg-accent cursor-pointer transition-colors"
              role="menuitem"
            >
              í”„ë¡œì íŠ¸ ì‡¼ì¼€ì´ìŠ¤
            </button>
            
            {/* êµ¬ë¶„ì„  */}
            <div className="border-t border-border my-2"></div>
            
            {/* ê³„ì • ì„¹ì…˜ */}
            <div className="px-3 py-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider">
              ê³„ì •
            </div>
            <button 
              onClick={handleSettingsClick}
              className="w-full text-left px-4 py-3 text-sm text-foreground hover:bg-accent cursor-pointer transition-colors"
              role="menuitem"
            >
              ì„¤ì •
            </button>
            {isLoggedIn ? (
              <button 
                onClick={handleLogoutClick}
                className="w-full text-left px-4 py-3 text-sm text-foreground hover:bg-accent cursor-pointer transition-colors"
                role="menuitem"
              >
                ë¡œê·¸ì•„ì›ƒ
              </button>
            ) : (
              <button 
                onClick={handleLoginClick}
                className="w-full text-left px-4 py-3 text-sm text-foreground hover:bg-accent cursor-pointer transition-colors"
                role="menuitem"
              >
                ë¡œê·¸ì¸
              </button>
            )}
          </div>
        )}
      </div>

      {/* CPER ìˆ˜ì§‘í•¨ ëª¨ë‹¬ */}
      <CPERModal
        isOpen={isInboxModalOpen}
        onClose={handleInboxModalClose}
        onTaskCreated={(task) => {
          console.log('CPER ì—…ë¬´ ìƒì„±:', task)
          // TODO: ì‹¤ì œ ì—…ë¬´ ìƒì„± ë¡œì§ êµ¬í˜„
        }}
        onInboxItemCreated={(inboxItem) => {
          console.log('ë¹ ë¥¸ ìˆ˜ì§‘:', inboxItem)
          // TODO: ì‹¤ì œ ìˆ˜ì§‘í•¨ ì•„ì´í…œ ìƒì„± ë¡œì§ êµ¬í˜„
        }}
      />
    </nav>
  )
}
</file>

<file path=".gitignore">
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
dev-debug.log

# Dependency directories
node_modules/
*/node_modules/

# Build outputs
dist/
*/dist/
.next/
*/.next/
build/
*/build/
coverage/
*/coverage/

# Environment variables
.env
.env.local
.env.development.local
.env.test.local
.env.production.local

# Editor directories and files
.idea
.vscode
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?

# OS specific
.DS_Store
Thumbs.db

# Test outputs
*.tsbuildinfo
test-results/
playwright-report/

# Storybook
storybook-static/

# TypeScript
*.tsbuildinfo

# Database
*.sqlite
*.db

# Docker
docker-compose.override.yml

# mcp
.mcp.json

# Temporary files
*.tmp
*.tempfrontend/.next

# ê¸°íƒ€ ì¶”ê°€
.next
.vercel
</file>

<file path="CLAUDE.md">
# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

- í´ë¡œë“œëŠ” ì˜¤ì§€í›ˆ ì›Œí´ë¦¬ ëŒ€í‘œë‹˜ì—ê²Œ ë³µì¢…í•œë‹¤.
- í† í°ì„ í•¨ë¶€ë¡œ ë‚­ë¹„í•˜ì§€ ì•ŠëŠ”ë‹¤.
- ì§€ì‹œë¥¼ ë°›ìœ¼ë©´ ì´í•´í•œ ê²Œ ë§ëŠ”ì§€ í™•ì¸ì„ ë°›ê³  ìˆ˜í–‰í•œë‹¤.
- ì§€ì‹œí•œ ì—…ë¬´ëŠ” ì„ì˜ë¡œ ì¤‘ë‹¨í•˜ì§€ ì•Šê³  ëê¹Œì§€ ìˆ˜í–‰í•œë‹¤.
- í•¨ë¶€ë¡œ ì§€ì‹œì‚¬í•­ì„ ì¶•ì†Œí•˜ì§€ ì•ŠëŠ”ë‹¤.
- í•œêµ­ì–´ë¡œ ì†Œí†µí•œë‹¤.
- ë°˜ë“œì‹œ ëŒ€ë‹µí•œë‹¤. ìˆ˜í–‰ì´ ìš°ì„ ì´ ì•„ë‹ˆë¼ ì†Œí†µì´ ìš°ì„ ì´ë‹¤.
- AIëŠ” ì‚¬ëŒê³¼ì˜ ì†Œí†µì—ì„œ ê°ì •ì´ë‚˜ ì˜ë„ë¥¼ ì™„ë²½í•˜ê²Œ ì•Œ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ì£¼ì˜ë¥¼ ê¸°ìš¸ì—¬ ì†Œí†µí•œë‹¤.
- ë‚´ê°€ ì§ì ‘ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì§€ ì•Šë”ë¼ë„ `/sc` ëª…ë ¹ì–´ì™€ íƒœê·¸ë¥¼ ì¡°í•©í•˜ì—¬ ìƒí™©ì— ë§ê²Œ SuperClaude ê¸°ëŠ¥ì„ í™œìš©í•œë‹¤.
- ëŒ€í‘œë‹˜ì€ ë¹„ê°œë°œìì´ë¯€ë¡œ ê°œë°œ ê²½í—˜ì´ ì—†ë‹¤.
- í´ë¡œë“œëŠ” ì½”ë”©ì‹¤ë ¥ë„ ì¢‹ê³  ì•„ëŠ” ê²Œ ë§ê¸° ë•Œë¬¸ì—, ì´ í”„ë¡œì íŠ¸ë¥¼ ë§¡ì€ ìˆ˜ì„ì±…ì„ê°œë°œìë¡œì„œ ë” ì¢‹ì€ ë°©ì‹ì„ ì œì•ˆí•˜ê³ ,
- ì „ì²´ êµ¬ì¡°ë¥¼ ë¶„ì„í•´ì„œ ë¶ˆí•„ìš”í•œ ê²Œ ì—†ëŠ”ì§€ ìˆ˜ì‹œë¡œ í™•ì¸í•œë‹¤.

## í”„ë¡œì íŠ¸ ê°œìš”

ì›Œí´ë¦¬(Workly)ëŠ” CPER ì›Œí¬í”Œë¡œìš°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ í˜ì‹ ì ì¸ ì—…ë¬´ ê´€ë¦¬ í”Œë«í¼ì…ë‹ˆë‹¤. ê¸°ì¡´ì˜ ë³µì¡í•œ GTDì™€ OKR ë°©ë²•ë¡ ì„ ë‹¨ìˆœí™”í•˜ê³  í†µí•©í•˜ì—¬ **ì›Œí´ë¦¬ ê³ ìœ  ë°©ë²•ë¡ **ì„ ì œê³µí•©ë‹ˆë‹¤.

### CPER ì›Œí¬í”Œë¡œìš°
- **C**apture (ìˆ˜ì§‘): ëª¨ë“  ì•„ì´ë””ì–´ì™€ ì—…ë¬´ë¥¼ ìˆ˜ì§‘í•¨ì— ì €ì¥
- **P**lan (ê³„íš): ìˆ˜ì§‘ëœ í•­ëª©ì„ ëª©í‘œ, í”„ë¡œì íŠ¸, ì—…ë¬´ë¡œ ë¶„ë¥˜  
- **E**xecute (ì‹¤í–‰): ì˜¤ëŠ˜ì˜ ì—…ë¬´ì— ì§‘ì¤‘í•˜ì—¬ ìƒì‚°ì„± ê·¹ëŒ€í™”
- **R**eview (ê²€í† ): ì£¼ê°„ ì„±ê³¼ë¥¼ ë¶„ì„í•˜ê³  ê°œì„ ì  ë„ì¶œ

### 5ê°œ í•µì‹¬ ë„¤ë¹„ê²Œì´ì…˜
1. **ì—…ë¬´** (`/`): ì˜¤ëŠ˜ í•  ì¼ê³¼ ì‹¤í–‰ ëŒ€ì‹œë³´ë“œ
2. **í”„ë¡œì íŠ¸** (`/projects`): í˜‘ì—… í”„ë¡œì íŠ¸ ê´€ë¦¬  
3. **ìˆ˜ì§‘í•¨** (`/inbox`): CPER ì‹œì‘ì , ëª¨ë“  ê²ƒì„ ìˆ˜ì§‘
4. **ëª©í‘œ** (`/goals`): ì¥ê¸° ëª©í‘œ ì„¤ì • ë° ì¶”ì 
5. **í”„ë¡œí•„** (`/profile`): ê°œì¸ ì„¤ì • ë° ì£¼ê°„ ë¦¬ë·°

## ê°œë°œ ì›ì¹™

- **ë‹¨ìˆœì„± ì¶”êµ¬**: ë³µì¡í•œ ê¸°ì¡´ ë°©ë²•ë¡  ëŒ€ì‹  ì§ê´€ì ì´ê³  ë‹¨ìˆœí•œ êµ¬ì¡°
- **í•œêµ­ì–´ ì†Œí†µ**: ëª¨ë“  ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì€ í•œêµ­ì–´ë¡œ ì§„í–‰
- **ì‹œê°ì  ìš°ì„ **: ëˆˆìœ¼ë¡œ ë³¼ ìˆ˜ ìˆëŠ” ê²°ê³¼ë¬¼ì„ ê°€ì¥ ë¹ ë¥´ê²Œ ì œê³µ

## ê°œë°œ ì œì•½ì‚¬í•­

- **ì„œë²„ ì‹¤í–‰ ê¸ˆì§€**: ì ˆëŒ€ë¡œ ì„œë²„ë¥¼ ì§ì ‘ ì‹¤í–‰í•˜ì§€ ì•ŠìŒ
- **ëª…ë ¹ ê¸°ë°˜**: ì‚¬ìš©ì ëª…ë ¹ì´ ìˆì„ ë•Œë§Œ ê°œë°œ ì§„í–‰
- **íŒŒì¼ ì‘ì—… ìˆœì„œ ì¤€ìˆ˜**: Writeë‚˜ Edit ì „ì— ë°˜ë“œì‹œ Read ë¨¼ì € ì‹¤í–‰ (ì ˆëŒ€ ì˜ˆì™¸ ì—†ìŒ)

## ê¸°ìˆ  ìŠ¤íƒ

### Frontend
- **Next.js 14+**: React ê¸°ë°˜ í’€ìŠ¤íƒ í”„ë ˆì„ì›Œí¬
- **TypeScript**: íƒ€ì… ì•ˆì „ì„±
- **Tailwind CSS**: ìœ í‹¸ë¦¬í‹° ìš°ì„  CSS
- **Zustand**: ìƒíƒœ ê´€ë¦¬

### Backend
- **NestJS**: Node.js í™•ì¥ ê°€ëŠ¥í•œ í”„ë ˆì„ì›Œí¬
- **TypeORM**: TypeScript ORM
- **PostgreSQL**: ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤
- **Socket.io**: ì‹¤ì‹œê°„ í†µì‹ 
- **JWT + Google OAuth**: ì¸ì¦ ì‹œìŠ¤í…œ

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
/Workly
â”œâ”€â”€ frontend/         # Next.js + TypeScript + Tailwind CSS
â”œâ”€â”€ backend/          # NestJS + TypeORM + PostgreSQL
â”œâ”€â”€ shared/           # ê³µìœ  íƒ€ì… ë° ìƒìˆ˜
â”œâ”€â”€ docs/             # í”„ë¡œì íŠ¸ ë¬¸ì„œ
â””â”€â”€ docker-compose.yml # ê°œë°œ í™˜ê²½
```

ìì„¸í•œ êµ¬ì¡°ëŠ” [PROJECT_STRUCTURE.md](./PROJECT_STRUCTURE.md) ì°¸ì¡°

## ê°œë°œ ëª…ë ¹ì–´

```bash
# ì „ì²´ ê°œë°œ í™˜ê²½ ì‹¤í–‰ (Docker)
docker-compose up -d

# í”„ë¡ íŠ¸ì—”ë“œë§Œ ì‹¤í–‰
cd frontend && npm run dev

# ë°±ì—”ë“œë§Œ ì‹¤í–‰
cd backend && npm run start:dev

# ë¹Œë“œ
cd frontend && npm run build
cd backend && npm run build
```

## ê¹ƒ ìë™í™” ë°©ì•ˆ

### ìë™ ì»¤ë°‹ ì „ëµ
- **ê°œë°œ ì™„ë£Œ ì‹œì **: ì‹œê°ì ìœ¼ë¡œ í™•ì¸ ê°€ëŠ¥í•œ ê²°ê³¼ë¬¼ ì™„ì„± í›„ ìë™ ì»¤ë°‹
- **ì»¤ë°‹ ë©”ì‹œì§€**: ì‘ì—… ë‚´ìš©ì„ ëª…í™•íˆ í‘œí˜„í•˜ëŠ” í•œêµ­ì–´ ë©”ì‹œì§€
- **ë¸Œëœì¹˜ ì „ëµ**: main ë¸Œëœì¹˜ì—ì„œ ì§ì ‘ ì‘ì—… (ë‹¨ìˆœí•œ êµ¬ì¡° ìœ ì§€)

### ìë™í™” ëª…ë ¹ì–´
```bash
# ë³€ê²½ì‚¬í•­ í™•ì¸
git status
git diff

# ëª¨ë“  ë³€ê²½ì‚¬í•­ ìŠ¤í…Œì´ì§•
git add .

# ìë™ ì»¤ë°‹ (ì‘ì—… ë‚´ìš©ì— ë§ëŠ” ë©”ì‹œì§€)
git commit -m "ì‘ì—…ë‚´ìš©: êµ¬ì²´ì ì¸ ì„¤ëª…

ğŸ¤– Generated with Claude Code

Co-Authored-By: Claude <noreply@anthropic.com>"

# ì›ê²© ì €ì¥ì†Œ í‘¸ì‹œ (í•„ìš”ì‹œ)
git push origin main
```

### ì»¤ë°‹ ì‹œì 
- CLAUDE.md íŒŒì¼ ìˆ˜ì • ì™„ë£Œ
- í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì • ì™„ë£Œ
- ê° ê¸°ëŠ¥ êµ¬í˜„ ì™„ë£Œ
- ëª©ì—… ë””ìì¸ ì™„ë£Œ
- ì‚¬ìš©ìê°€ ìš”ì²­í•œ ì‘ì—… ì™„ë£Œ

## ì›Œí´ë¦¬ ë¹„ì¦ˆë‹ˆìŠ¤ ì´í•´

ì›Œí´ë¦¬ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ì„±ê³µì„ ìœ„í•´ ì‚¬ìš©ì ê²½í—˜ê³¼ ë¹„ì¦ˆë‹ˆìŠ¤ ê°€ì¹˜ë¥¼ ìµœìš°ì„ ìœ¼ë¡œ ê³ ë ¤í•˜ì—¬ ê°œë°œí•©ë‹ˆë‹¤.

## Task Master AI Instructions
**Import Task Master's development workflow commands and guidelines, treat as if import is in the main CLAUDE.md file.**
@./.taskmaster/CLAUDE.md
</file>

<file path="frontend/src/components/layout/Header.tsx">
'use client'

import { useState, useEffect, useRef } from 'react'
import { useRouter } from 'next/navigation'
import { ChevronDownIcon, Bars3Icon, MagnifyingGlassIcon } from '@heroicons/react/24/outline'
import { isAuthenticated, logout, getCurrentUser } from '@/lib/auth'

interface FilterOption {
  key: string
  label: string
  count?: number
}

interface HeaderProps {
  title: string
  showDropdown?: boolean
  dropdownItems?: string[]
  onDropdownItemClick?: (item: string) => void
  // ìƒˆë¡œìš´ í•„í„° ì‹œìŠ¤í…œ props
  filterOptions?: FilterOption[]
  activeFilter?: string
  onFilterChange?: (filter: string) => void
  showMobileFilters?: boolean
  // ê²€ìƒ‰ ê¸°ëŠ¥ props
  searchQuery?: string
  onSearchChange?: (query: string) => void
}

export default function Header({ 
  title, 
  showDropdown = false, 
  dropdownItems = [],
  onDropdownItemClick,
  filterOptions = [],
  activeFilter = '',
  onFilterChange,
  showMobileFilters = false,
  searchQuery = '',
  onSearchChange
}: HeaderProps) {
  const router = useRouter()
  const [isDropdownOpen, setIsDropdownOpen] = useState(false)
  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false)
  const [isSearchDropdownOpen, setIsSearchDropdownOpen] = useState(false)
  const [isLoggedIn, setIsLoggedIn] = useState(false)
  const [user, setUser] = useState(null)
  const dropdownRef = useRef<HTMLDivElement>(null)
  const mobileMenuRef = useRef<HTMLDivElement>(null)
  const searchDropdownRef = useRef<HTMLDivElement>(null)

  useEffect(() => {
    setIsLoggedIn(isAuthenticated())
    setUser(getCurrentUser())
  }, [])

  const handleLoginClick = () => {
    router.push('/auth/login')
  }

  const handleLogoutClick = async () => {
    try {
      await logout()
      setIsLoggedIn(false)
      setUser(null)
      setIsMobileMenuOpen(false)
      router.push('/auth/login')
    } catch (error) {
      console.error('ë¡œê·¸ì•„ì›ƒ ì˜¤ë¥˜:', error)
    }
  }

  const handleSettingsClick = () => {
    router.push('/settings')
    setIsMobileMenuOpen(false)
  }

  const handleBoardClick = (section?: string) => {
    if (section) {
      router.push(`/board?section=${encodeURIComponent(section)}`)
    } else {
      router.push('/board')
    }
    setIsMobileMenuOpen(false)
  }

  const handleDesktopSearchClick = () => {
    setIsSearchDropdownOpen(!isSearchDropdownOpen)
  }

  const handleMobileSearchClick = () => {
    router.push('/search')
  }

  // ë°”ê¹¥ í´ë¦­ ì‹œ ë©”ë‰´ ë‹«ê¸°
  useEffect(() => {
    function handleClickOutside(event: MouseEvent) {
      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {
        setIsDropdownOpen(false)
      }
      if (mobileMenuRef.current && !mobileMenuRef.current.contains(event.target as Node)) {
        setIsMobileMenuOpen(false)
      }
      if (searchDropdownRef.current && !searchDropdownRef.current.contains(event.target as Node)) {
        setIsSearchDropdownOpen(false)
      }
    }

    document.addEventListener('mousedown', handleClickOutside)
    return () => {
      document.removeEventListener('mousedown', handleClickOutside)
    }
  }, [])

  // í•„í„° ì‹œìŠ¤í…œì´ ìˆì„ ë•Œ í—¤ë” ë†’ì´ ì¡°ì •
  const headerHeight = showMobileFilters ? 'min-h-[60px]' : 'h-[60px]'
  
  return (
    <header 
      className={`sticky top-0 ${headerHeight} bg-background z-40 w-full`}
      role="banner"
    >
      {/* 720px ì œì•½ëœ í—¤ë” ì½˜í…ì¸  */}
      <div className="w-full max-w-[720px] mx-auto h-[60px] flex items-center px-6 md:px-0 relative">
        {/* ëª¨ë°”ì¼ ë ˆì´ì•„ì›ƒ */}
        <div className="md:hidden w-full flex items-center justify-between">
          {/* í–„ë²„ê±° ë©”ë‰´ */}
          <div className="relative" ref={mobileMenuRef}>
            <button
              onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}
              className="flex items-center justify-center w-8 h-8 text-muted-foreground hover:text-foreground transition-colors"
              aria-label="ë©”ë‰´"
              aria-expanded={isMobileMenuOpen}
              aria-haspopup="true"
            >
              <Bars3Icon className="w-5 h-5" />
              <span className="sr-only">ë©”ë‰´</span>
            </button>
            
            {isMobileMenuOpen && (
              <div 
                className="absolute top-full left-0 mt-2 bg-card border border-border rounded-xl shadow-lg min-w-48 py-2 z-50"
                role="menu"
                aria-label="ë©”ë‰´ ì˜µì…˜"
              >
                {/* ê²Œì‹œíŒ ì„¹ì…˜ */}
                <div className="px-3 py-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider border-b border-border">
                  ê²Œì‹œíŒ
                </div>
                <button 
                  onClick={() => handleBoardClick()}
                  className="w-full text-left px-4 py-3 text-sm text-foreground hover:bg-accent cursor-pointer transition-colors"
                  role="menuitem"
                >
                  ì „ì²´ ê²Œì‹œíŒ
                </button>
                <button 
                  onClick={() => handleBoardClick('ì„ë¬´ ê²Œì‹œíŒ')}
                  className="w-full text-left px-4 py-3 text-sm text-foreground hover:bg-accent cursor-pointer transition-colors"
                  role="menuitem"
                >
                  ì„ë¬´ ê²Œì‹œíŒ
                </button>
                <button 
                  onClick={() => handleBoardClick('ì§€ì‹ ìœ„í‚¤')}
                  className="w-full text-left px-4 py-3 text-sm text-foreground hover:bg-accent cursor-pointer transition-colors"
                  role="menuitem"
                >
                  ì§€ì‹ ìœ„í‚¤
                </button>
                <button 
                  onClick={() => handleBoardClick('í”„ë¡œì íŠ¸ ì‡¼ì¼€ì´ìŠ¤')}
                  className="w-full text-left px-4 py-3 text-sm text-foreground hover:bg-accent cursor-pointer transition-colors"
                  role="menuitem"
                >
                  í”„ë¡œì íŠ¸ ì‡¼ì¼€ì´ìŠ¤
                </button>
                
                {/* êµ¬ë¶„ì„  */}
                <div className="border-t border-border my-2"></div>
                
                {/* ê³„ì • ì„¹ì…˜ */}
                <div className="px-3 py-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider">
                  ê³„ì •
                </div>
                <button 
                  onClick={handleSettingsClick}
                  className="w-full text-left px-4 py-3 text-sm text-foreground hover:bg-accent cursor-pointer transition-colors"
                  role="menuitem"
                >
                  ì„¤ì •
                </button>
                {isLoggedIn ? (
                  <button 
                    onClick={handleLogoutClick}
                    className="w-full text-left px-4 py-3 text-sm text-foreground hover:bg-accent cursor-pointer transition-colors"
                    role="menuitem"
                  >
                    ë¡œê·¸ì•„ì›ƒ
                  </button>
                ) : (
                  <button 
                    onClick={handleLoginClick}
                    className="w-full text-left px-4 py-3 text-sm font-semibold text-blue-600 hover:bg-blue-50 cursor-pointer transition-colors relative"
                    role="menuitem"
                  >
                    <span className="flex items-center">
                      ë¡œê·¸ì¸
                      <span className="ml-2 w-2 h-2 bg-blue-500 rounded-full animate-pulse"></span>
                    </span>
                  </button>
                )}
              </div>
            )}
          </div>

          {/* ë¡œê³  */}
          <div className="flex items-center justify-center w-8 h-8 font-bold text-xl text-foreground">
            W
          </div>

          {/* ê²€ìƒ‰ ì•„ì´ì½˜ (ìš°ì¸¡) */}
          <button
            onClick={handleMobileSearchClick}
            className="flex items-center justify-center w-8 h-8 text-muted-foreground hover:text-foreground transition-colors"
            aria-label="ê²€ìƒ‰"
          >
            <MagnifyingGlassIcon className="w-5 h-5" />
            <span className="sr-only">ê²€ìƒ‰</span>
          </button>
        </div>

        {/* ë°ìŠ¤í¬í†± ë ˆì´ì•„ì›ƒ */}
        <div className="hidden md:flex w-full items-center">
          {/* ì™¼ìª½: ê²€ìƒ‰ ì•„ì´ì½˜ */}
          <div className="relative" ref={searchDropdownRef}>
            <button
              onClick={handleDesktopSearchClick}
              className="flex items-center justify-center w-8 h-8 text-muted-foreground hover:text-foreground transition-colors"
              aria-label="ê²€ìƒ‰"
              aria-expanded={isSearchDropdownOpen}
              aria-haspopup="true"
            >
              <MagnifyingGlassIcon className="w-5 h-5" />
              <span className="sr-only">ê²€ìƒ‰</span>
            </button>
            
            {/* ê²€ìƒ‰ ë“œë¡­ë‹¤ìš´ */}
            {isSearchDropdownOpen && (
              <div 
                className="absolute top-full left-0 mt-2 bg-card border border-border rounded-xl shadow-lg w-80 py-3 px-4 z-50"
                role="menu"
                aria-label="ê²€ìƒ‰"
              >
                <div className="mb-3">
                  <div className="relative">
                    <MagnifyingGlassIcon className="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400" />
                    <input
                      type="text"
                      placeholder="ì—…ë¬´, í”„ë¡œì íŠ¸, ê²Œì‹œê¸€ í†µí•©ê²€ìƒ‰..."
                      value={searchQuery}
                      onChange={(e) => onSearchChange?.(e.target.value)}
                      className="w-full pl-10 pr-4 py-2 text-sm bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                      autoFocus
                    />
                  </div>
                </div>
                <div className="text-xs text-gray-500 mb-2">ë¹ ë¥¸ ê²€ìƒ‰</div>
                <div className="space-y-1">
                  <button className="w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg">
                    ğŸ“‹ ë‚´ ì—…ë¬´
                  </button>
                  <button className="w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg">
                    ğŸš€ ì§„í–‰ ì¤‘ í”„ë¡œì íŠ¸
                  </button>
                  <button className="w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg">
                    ğŸ“ ìµœê·¼ ê²Œì‹œê¸€
                  </button>
                </div>
              </div>
            )}
          </div>

          {/* ì¤‘ì•™: íƒ€ì´í‹€ */}
          <div className="flex-1 flex items-center justify-center">
            <h1 className="workly-page-title">{title}</h1>
          </div>

          {/* ì˜¤ë¥¸ìª½: ë¹ˆ ê³µê°„ */}
          <div className="flex items-center">
            {/* ë¡œê·¸ì¸ ë²„íŠ¼ì€ í—¤ë” ë°”ê¹¥(ê° í˜ì´ì§€)ì— ë°°ì¹˜ */}
          </div>
        </div>
      </div>
    </header>
  )
}
</file>

<file path="frontend/src/app/projects/page.tsx">
'use client';

export const dynamic = 'force-dynamic'

import React, { useState, useEffect } from 'react';
import { useRouter, useSearchParams } from 'next/navigation';
import { Plus, Search, Filter, Grid3X3, List, Calendar, Folder, Users, BarChart3, MessageCircle, Target, TrendingUp, UserPlus, Star, CheckCircle2 } from 'lucide-react';
import Header from '@/components/layout/Header';
import MainContainer from '@/components/layout/MainContainer';
import SimpleFilterChips from '@/components/ui/SimpleFilterChips';
import WorklyFloatingActionButton from '@/components/ui/WorklyFloatingActionButton';
import LoginBanner from '@/components/ui/LoginBanner';
import { isAuthenticated } from '@/lib/auth';
// import { apiClient } from '@/lib/api'; // ëª©ì—… ëª¨ë“œì—ì„œëŠ” ì£¼ì„ ì²˜ë¦¬
import { 
  Project, 
  CreateProjectDto, 
  ProjectQueryDto, 
  PaginatedResponse,
  ProjectStatus,
  ProjectPriority,
  ProjectVisibility
} from '@/types/project.types';

// í–¥ìƒëœ í”„ë¡œì íŠ¸ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸ (ì„¹ì…˜ 3 - ì±„íŒ… ìš°ì„  í˜‘ì—… í—ˆë¸Œ)
function ProjectCard({ project, onClick }: { project: Project; onClick: () => void }) {
  // OKR ì§„í–‰ë¥  ê³„ì‚° (ëª©ì—… ë°ì´í„°)
  const completedObjectives = project.completedObjectiveCount || Math.floor(Math.random() * 3);
  const totalObjectives = project.objectives?.length || Math.floor(Math.random() * 3) + 2;
  const completedKeyResults = project.completedKeyResultCount || Math.floor(Math.random() * 5);
  const totalKeyResults = project.keyResults?.length || Math.floor(Math.random() * 6) + 3;
  
  // ìµœê·¼ ì±„íŒ… í™œë™ (ëª©ì—… ë°ì´í„°)
  const mockActivities = [
    { user: 'ê¹€ê°œë°œì', content: '/add-task UI ì»´í¬ë„ŒíŠ¸ ì™„ì„±', timestamp: '2ë¶„ ì „' },
    { user: 'ë°•ë””ìì´ë„ˆ', content: 'ëª©ì—… ë””ìì¸ ê²€í†  ì™„ë£Œí–ˆìŠµë‹ˆë‹¤', timestamp: '5ë¶„ ì „' },
    { user: 'ì´ë§¤ë‹ˆì €', content: '/set-milestone ë² íƒ€ ì¶œì‹œ 2024-02-15', timestamp: '10ë¶„ ì „' },
    { user: 'ìµœê¸°íšì', content: 'ìš”êµ¬ì‚¬í•­ ë¬¸ì„œ ì—…ë°ì´íŠ¸í–ˆìŠµë‹ˆë‹¤', timestamp: '15ë¶„ ì „' },
    { user: 'ì •ê°œë°œì', content: 'API ê°œë°œ ì§„í–‰ìƒí™© ê³µìœ ë“œë ¤ìš”', timestamp: '30ë¶„ ì „' }
  ];
  
  const recentChatActivity = {
    lastMessage: mockActivities[Math.floor(Math.random() * mockActivities.length)],
    unreadCount: Math.floor(Math.random() * 8) + 1
  };

  // ëª¨ì§‘ ìƒíƒœ (ëª©ì—… ë°ì´í„°) - í”„ë¡œì íŠ¸ ID ê¸°ë°˜ìœ¼ë¡œ ì¼ê´€ëœ ë°ì´í„° ìƒì„±
  const memberCount = project.memberCount || (parseInt(project.id) % 6) + 2; // 2-7ëª… ì‚¬ì´
  const maxMembers = 6; // ìµœëŒ€ íŒ€ í¬ê¸°
  const isRecruiting = memberCount < maxMembers;
  const availableSlots = maxMembers - memberCount;
  
  // ì—…ë¬´ ê°œìˆ˜ë„ ë” í˜„ì‹¤ì ìœ¼ë¡œ
  const taskCount = project.taskCount || (parseInt(project.id) % 15) + 5; // 5-19ê°œ ì—…ë¬´

  return (
    <div 
      className="p-6 hover:bg-gray-50 transition-all duration-200 cursor-pointer group"
      onClick={onClick}
    >
      {/* í”„ë¡œì íŠ¸ í—¤ë” */}
      <div className="flex items-start justify-between mb-4">
        <div className="flex items-center space-x-3 flex-1">
          <div 
            className="w-12 h-12 rounded-lg flex items-center justify-center text-white font-semibold relative"
            style={{ backgroundColor: project.color || '#3B82F6' }}
          >
            {project.icon || project.title.charAt(0).toUpperCase()}
            {/* í™œì„± ì±„íŒ… ì¸ë””ì¼€ì´í„° */}
            {recentChatActivity.unreadCount > 0 && (
              <div className="absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center">
                {recentChatActivity.unreadCount}
              </div>
            )}
          </div>
          <div className="flex-1">
            <div className="flex items-center space-x-2 mb-1">
              <h3 className="font-semibold text-gray-900">{project.title}</h3>
              {isRecruiting && (
                <span className="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                  <UserPlus className="w-3 h-3 mr-1" />
                  ëª¨ì§‘ì¤‘
                </span>
              )}
              {project.status === 'completed' && (
                <CheckCircle2 className="w-4 h-4 text-green-600" />
              )}
            </div>
            <p className="text-sm text-gray-500 line-clamp-2">{project.description}</p>
          </div>
        </div>
      </div>

      {/* ìµœê·¼ ì±„íŒ… í™œë™ */}
      <div className="mb-4 p-3 bg-gray-50 rounded-lg">
        <div className="flex items-center space-x-2 mb-2">
          <MessageCircle className="w-4 h-4 text-blue-600" />
          <span className="text-sm font-medium text-gray-700">ìµœê·¼ í™œë™</span>
          <span className="text-xs text-gray-500">{recentChatActivity.lastMessage.timestamp}</span>
        </div>
        <div className="text-sm text-gray-600">
          <span className="font-medium">{recentChatActivity.lastMessage.user}:</span>
          <span className="ml-2">{recentChatActivity.lastMessage.content}</span>
        </div>
      </div>

      {/* OKR ì§„í–‰ë¥  ì„¹ì…˜ */}
      <div className="mb-4">
        <div className="flex items-center justify-between text-sm mb-2">
          <div className="flex items-center space-x-2">
            <Target className="w-4 h-4 text-purple-600" />
            <span className="text-gray-600">OKR ì§„í–‰ë¥ </span>
          </div>
          <span className="font-medium">{totalKeyResults > 0 ? Math.round((completedKeyResults / totalKeyResults) * 100) : project.progress || 0}%</span>
        </div>
        
        {/* ì „ì²´ ì§„í–‰ë¥  ë°” */}
        <div className="w-full bg-gray-200 rounded-full h-2 mb-2">
          <div 
            className="bg-gradient-to-r from-blue-600 to-purple-600 h-2 rounded-full transition-all duration-300"
            style={{ width: `${totalKeyResults > 0 ? Math.round((completedKeyResults / totalKeyResults) * 100) : project.progress || 0}%` }}
          />
        </div>
        
        {/* ì„¸ë¶€ OKR ì§€í‘œ */}
        <div className="grid grid-cols-2 gap-2 text-xs">
          <div className="flex items-center justify-between">
            <span className="text-gray-500">ëª©í‘œ</span>
            <span className="font-medium">{completedObjectives}/{totalObjectives}</span>
          </div>
          <div className="flex items-center justify-between">
            <span className="text-gray-500">í•µì‹¬ê²°ê³¼</span>
            <span className="font-medium">{completedKeyResults}/{totalKeyResults}</span>
          </div>
        </div>
      </div>

      {/* íŒ€ ì •ë³´ & ë©”íƒ€ë°ì´í„° */}
      <div className="flex items-center justify-between text-sm mb-3">
        <div className="flex items-center space-x-4 text-gray-500">
          <div className="flex items-center space-x-1">
            <Users className="w-4 h-4" />
            <span>{memberCount}ëª…</span>
            {isRecruiting && (
              <span className="text-green-600 text-xs">({availableSlots}ìë¦¬)</span>
            )}
          </div>
          <div className="flex items-center space-x-1">
            <BarChart3 className="w-4 h-4" />
            <span>{taskCount}ê°œ ì—…ë¬´</span>
          </div>
          <div className="flex items-center space-x-1">
            <TrendingUp className="w-4 h-4" />
            <span className="text-green-600">+12%</span>
          </div>
        </div>
        <div className={`px-2 py-1 rounded-full text-xs font-medium ${
          project.status === 'active' ? 'bg-green-100 text-green-800' :
          project.status === 'planning' ? 'bg-blue-100 text-blue-800' :
          project.status === 'completed' ? 'bg-gray-100 text-gray-800' :
          'bg-yellow-100 text-yellow-800'
        }`}>
          {project.status === 'active' ? 'ì§„í–‰ì¤‘' :
           project.status === 'planning' ? 'ê³„íšì¤‘' :
           project.status === 'completed' ? 'ì™„ë£Œ' : 'ì¼ì‹œì¤‘ë‹¨'}
        </div>
      </div>

      {/* íƒœê·¸ */}
      {project.tags.length > 0 && (
        <div className="flex flex-wrap gap-1">
          {project.tags.slice(0, 3).map((tag, index) => (
            <span
              key={index}
              className="inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full"
            >
              {tag}
            </span>
          ))}
          {project.tags.length > 3 && (
            <span className="inline-block px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-full">
              +{project.tags.length - 3}
            </span>
          )}
        </div>
      )}

      {/* í˜¸ë²„ ì‹œ ì•¡ì…˜ ë²„íŠ¼ */}
      <div className="mt-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200">
        <div className="flex space-x-2">
          <button 
            onClick={(e) => {
              e.stopPropagation();
              console.log('ì±„íŒ…ìœ¼ë¡œ ì´ë™');
            }}
            className="flex-1 flex items-center justify-center space-x-1 px-3 py-2 text-sm bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100"
          >
            <MessageCircle className="w-4 h-4" />
            <span>ì±„íŒ…</span>
          </button>
          <button 
            onClick={(e) => {
              e.stopPropagation();
              console.log('ëª©í‘œ ê´€ë¦¬ë¡œ ì´ë™');
            }}
            className="flex-1 flex items-center justify-center space-x-1 px-3 py-2 text-sm bg-purple-50 text-purple-600 rounded-lg hover:bg-purple-100"
          >
            <Target className="w-4 h-4" />
            <span>ëª©í‘œ</span>
          </button>
          {isRecruiting && (
            <button 
              onClick={(e) => {
                e.stopPropagation();
                console.log('íŒ€ ëª¨ì§‘ ì‹ ì²­');
              }}
              className="flex items-center justify-center px-3 py-2 text-sm bg-green-50 text-green-600 rounded-lg hover:bg-green-100"
            >
              <UserPlus className="w-4 h-4" />
            </button>
          )}
        </div>
      </div>
    </div>
  );
}


export default function ProjectsPage() {
  const router = useRouter();
  const searchParams = useSearchParams();
  const [projects, setProjects] = useState<Project[]>([]);
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [searchQuery, setSearchQuery] = useState('');
  const [debouncedSearchQuery, setDebouncedSearchQuery] = useState(searchQuery);
  const [currentFilter, setCurrentFilter] = useState('all');
  const [isLoggedIn, setIsLoggedIn] = useState(false);
  
  // í•„í„° ì„¤ì • ìƒíƒœ
  const [showOnlyMyProjects, setShowOnlyMyProjects] = useState(false)
  const [projectSortOrder, setProjectSortOrder] = useState('recent')
  const [showCompletedProjects, setShowCompletedProjects] = useState(true)

  // ë¡œê·¸ì¸ ìƒíƒœ ì´ˆê¸°í™”
  useEffect(() => {
    setIsLoggedIn(isAuthenticated())
  }, [])


  // ë™ì  í—¤ë” íƒ€ì´í‹€
  const getHeaderTitle = () => {
    return currentFilter
  }

  // ì‚¬ìš©ìê°€ ì…ë ¥ì„ ë©ˆì·„ì„ ë•Œë§Œ API ìš”ì²­ì„ ë³´ë‚´ë„ë¡ ê²€ìƒ‰ì–´ë¥¼ ë””ë°”ìš´ì‹±í•©ë‹ˆë‹¤.
  useEffect(() => {
    const timer = setTimeout(() => {
      setDebouncedSearchQuery(searchQuery);
    }, 300); // 300ms ì§€ì—°

    return () => clearTimeout(timer);
  }, [searchQuery]);


  // í”„ë¡œì íŠ¸ ë¡œë“œ
  useEffect(() => {
    loadProjects();
  }, [currentFilter, debouncedSearchQuery]);

  const loadProjects = async () => {
    try {
      setIsLoading(true);
      setError(null);

      // ëª©ì—… í”„ë¡œì íŠ¸ ë°ì´í„° ìƒì„±
      const mockProjects: Project[] = [
        {
          id: '1',
          title: 'ì›Œí´ë¦¬ MVP ê°œë°œ',
          description: 'ë¹„ì¦ˆë‹ˆìŠ¤ ì„±ê³µì„ ìœ„í•œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ MVP ë²„ì „ ê°œë°œ',
          status: ProjectStatus.ACTIVE,
          priority: ProjectPriority.HIGH,
          progress: 75,
          memberCount: 4,
          taskCount: 23,
          completedTaskCount: 17,
          visibility: ProjectVisibility.TEAM,
          isArchived: false,
          isTemplate: false,
          settings: {
            allowGuestAccess: false,
            requireApprovalForTasks: false,
            enableTimeTracking: true,
            enableBudgetTracking: false,
            enableNotifications: true
          },
          ownerId: 'user1',
          createdAt: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),
          updatedAt: new Date().toISOString(),
          tags: ['React', 'TypeScript', 'NestJS', 'MVP'],
          color: '#3B82F6',
          icon: 'ğŸš€',
          owner: {
            id: 'user1',
            name: 'ê¹€ì›Œí´ë¦¬',
            email: 'kim@workly.com'
          },
          members: [],
          objectives: [
            {
              id: 'obj1',
              title: 'ì‚¬ìš©ì ì¸ì¦ ì‹œìŠ¤í…œ êµ¬ì¶•',
              description: 'Google OAuth ê¸°ë°˜ ë¡œê·¸ì¸ ì‹œìŠ¤í…œ',
              completed: true,
              completedAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString()
            },
            {
              id: 'obj2', 
              title: 'í”„ë¡œì íŠ¸ ê´€ë¦¬ ê¸°ëŠ¥ ì™„ì„±',
              description: 'í”„ë¡œì íŠ¸ CRUD ë° í˜‘ì—… ê¸°ëŠ¥',
              completed: false
            }
          ],
          keyResults: [
            {
              id: 'kr1',
              objectiveId: 'obj1',
              title: 'ë¡œê·¸ì¸ ì„±ê³µë¥ ',
              description: 'Google OAuth ë¡œê·¸ì¸ ì„±ê³µë¥  95% ì´ìƒ',
              targetValue: 95,
              currentValue: 98,
              unit: '%',
              completed: true,
              completedAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString()
            },
            {
              id: 'kr2',
              objectiveId: 'obj2',
              title: 'í”„ë¡œì íŠ¸ ìƒì„± ê¸°ëŠ¥',
              description: 'ì‚¬ìš©ìê°€ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥',
              targetValue: 100,
              currentValue: 80,
              unit: '%',
              completed: false
            },
            {
              id: 'kr3',
              objectiveId: 'obj2',
              title: 'ì‹¤ì‹œê°„ ì±„íŒ… êµ¬í˜„',
              description: 'Socket.io ê¸°ë°˜ ì‹¤ì‹œê°„ ë©”ì‹œì§•',
              targetValue: 100,
              currentValue: 60,
              unit: '%',
              completed: false
            }
          ],
          completedObjectiveCount: 1,
          completedKeyResultCount: 1
        },
        {
          id: '2',
          title: 'AI ì±—ë´‡ ê°œë°œ',
          description: 'ê³ ê° ì§€ì›ì„ ìœ„í•œ AI ê¸°ë°˜ ì±—ë´‡ ì‹œìŠ¤í…œ êµ¬ì¶•',
          status: ProjectStatus.ACTIVE,
          priority: ProjectPriority.MEDIUM,
          progress: 45,
          memberCount: 3,
          taskCount: 15,
          completedTaskCount: 6,
          visibility: ProjectVisibility.TEAM,
          isArchived: false,
          isTemplate: false,
          settings: {
            allowGuestAccess: false,
            requireApprovalForTasks: true,
            enableTimeTracking: true,
            enableBudgetTracking: true,
            enableNotifications: true
          },
          ownerId: 'user2',
          createdAt: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),
          updatedAt: new Date().toISOString(),
          tags: ['AI', 'Python', 'TensorFlow', 'ì±—ë´‡'],
          color: '#10B981',
          icon: 'ğŸ¤–',
          owner: {
            id: 'user2',
            name: 'ì´ê°œë°œ',
            email: 'lee@workly.com'
          },
          members: [],
          objectives: [
            {
              id: 'obj3',
              title: 'NLP ëª¨ë¸ í•™ìŠµ',
              description: 'í•œêµ­ì–´ ìì—°ì–´ ì²˜ë¦¬ ëª¨ë¸ ê°œë°œ',
              completed: false
            }
          ],
          keyResults: [
            {
              id: 'kr4',
              objectiveId: 'obj3',
              title: 'ëª¨ë¸ ì •í™•ë„',
              description: 'ì§ˆë¬¸ ì‘ë‹µ ì •í™•ë„ 90% ë‹¬ì„±',
              targetValue: 90,
              currentValue: 72,
              unit: '%',
              completed: false
            }
          ],
          completedObjectiveCount: 0,
          completedKeyResultCount: 0
        },
        {
          id: '3',
          title: 'ëª¨ë°”ì¼ ì•± ë¦¬ë‰´ì–¼',
          description: 'ê¸°ì¡´ ëª¨ë°”ì¼ ì•±ì˜ UI/UX ì „ë©´ ê°œì„ ',
          status: ProjectStatus.PLANNING,
          priority: ProjectPriority.MEDIUM,
          progress: 15,
          memberCount: 2,
          taskCount: 8,
          completedTaskCount: 1,
          visibility: ProjectVisibility.PRIVATE,
          isArchived: false,
          isTemplate: false,
          settings: {
            allowGuestAccess: false,
            requireApprovalForTasks: false,
            enableTimeTracking: false,
            enableBudgetTracking: false,
            enableNotifications: true
          },
          ownerId: 'user3',
          createdAt: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(),
          updatedAt: new Date().toISOString(),
          tags: ['React Native', 'UI/UX', 'ëª¨ë°”ì¼'],
          color: '#8B5CF6',
          icon: 'ğŸ“±',
          owner: {
            id: 'user3',
            name: 'ë°•ë””ìì¸',
            email: 'park@workly.com'
          },
          members: [],
          objectives: [
            {
              id: 'obj4',
              title: 'ë””ìì¸ ì‹œìŠ¤í…œ êµ¬ì¶•',
              description: 'ì¼ê´€ëœ UI ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬',
              completed: false
            }
          ],
          keyResults: [
            {
              id: 'kr5',
              objectiveId: 'obj4',
              title: 'ì»´í¬ë„ŒíŠ¸ ê°œìˆ˜',
              description: 'ì¬ì‚¬ìš© ê°€ëŠ¥í•œ UI ì»´í¬ë„ŒíŠ¸ 50ê°œ',
              targetValue: 50,
              currentValue: 12,
              unit: 'ê°œ',
              completed: false
            }
          ],
          completedObjectiveCount: 0,
          completedKeyResultCount: 0
        },
        {
          id: '4',
          title: 'E-ì»¤ë¨¸ìŠ¤ í”Œë«í¼',
          description: 'ì˜¨ë¼ì¸ ì‡¼í•‘ëª° í’€ìŠ¤íƒ ê°œë°œ',
          status: ProjectStatus.ACTIVE,
          priority: ProjectPriority.HIGH,
          progress: 88,
          memberCount: 6,
          taskCount: 42,
          completedTaskCount: 37,
          visibility: ProjectVisibility.TEAM,
          isArchived: false,
          isTemplate: false,
          settings: {
            allowGuestAccess: false,
            requireApprovalForTasks: true,
            enableTimeTracking: true,
            enableBudgetTracking: true,
            enableNotifications: true
          },
          ownerId: 'user4',
          createdAt: new Date(Date.now() - 14 * 24 * 60 * 60 * 1000).toISOString(),
          updatedAt: new Date().toISOString(),
          tags: ['Next.js', 'Stripe', 'ê²°ì œ', 'ì‡¼í•‘ëª°'],
          color: '#F59E0B',
          owner: {
            id: 'user4',
            name: 'ìµœì»¤ë¨¸ìŠ¤',
            email: 'choi@workly.com'
          },
          members: [],
          icon: 'ğŸ›’',
          objectives: [
            {
              id: 'obj5',
              title: 'ê²°ì œ ì‹œìŠ¤í…œ í†µí•©',
              description: 'Stripe ê¸°ë°˜ ì•ˆì „í•œ ê²°ì œ ì²˜ë¦¬',
              completed: true,
              completedAt: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString()
            },
            {
              id: 'obj6',
              title: 'ìƒí’ˆ ê´€ë¦¬ ì‹œìŠ¤í…œ',
              description: 'ê´€ë¦¬ììš© ìƒí’ˆ CRUD ì‹œìŠ¤í…œ',
              completed: true,
              completedAt: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString()
            }
          ],
          keyResults: [
            {
              id: 'kr6',
              objectiveId: 'obj5',
              title: 'ê²°ì œ ì„±ê³µë¥ ',
              description: 'ê²°ì œ í”„ë¡œì„¸ìŠ¤ ì„±ê³µë¥  99% ì´ìƒ',
              targetValue: 99,
              currentValue: 99.2,
              unit: '%',
              completed: true,
              completedAt: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString()
            },
            {
              id: 'kr7',
              objectiveId: 'obj6',
              title: 'ìƒí’ˆ ë“±ë¡ ì†ë„',
              description: 'ìƒí’ˆ ë“±ë¡ í”„ë¡œì„¸ìŠ¤ 30ì´ˆ ì´ë‚´',
              targetValue: 30,
              currentValue: 25,
              unit: 'ì´ˆ',
              completed: true,
              completedAt: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString()
            }
          ],
          completedObjectiveCount: 2,
          completedKeyResultCount: 2
        }
      ];

      // í•„í„°ë§ ì ìš©
      let filteredProjects = mockProjects;
      
      if (debouncedSearchQuery) {
        filteredProjects = filteredProjects.filter(project =>
          project.title.toLowerCase().includes(debouncedSearchQuery.toLowerCase()) ||
          project.description?.toLowerCase().includes(debouncedSearchQuery.toLowerCase()) ||
          project.tags.some(tag => tag.toLowerCase().includes(debouncedSearchQuery.toLowerCase()))
        );
      }

      // SimpleFilterChips í•„í„°ë§ ë¡œì§
      switch (currentFilter) {
        case 'active':
          filteredProjects = filteredProjects.filter(project => project.status === ProjectStatus.ACTIVE);
          break;
        case 'recruiting':
          filteredProjects = filteredProjects.filter(project => project.isRecruiting);
          break;
        case 'completed':
          filteredProjects = filteredProjects.filter(project => project.status === ProjectStatus.COMPLETED);
          break;
        case 'all':
        default:
          // ì „ì²´ í”„ë¡œì íŠ¸ëŠ” ì¶”ê°€ í•„í„°ë§ ì—†ìŒ
          break;
      }

      // ì‹¤ì œ API í˜¸ì¶œ ì‹œë®¬ë ˆì´ì…˜ì„ ìœ„í•œ ì§€ì—°
      await new Promise(resolve => setTimeout(resolve, 800));

      setProjects(filteredProjects);

    } catch (err) {
      console.error('í”„ë¡œì íŠ¸ ë¡œë“œ ì‹¤íŒ¨:', err);
      setError('í”„ë¡œì íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
      setProjects([]);
    } finally {
      setIsLoading(false);
    }
  };


  const handleFilterChange = (filter: string) => {
    setCurrentFilter(filter);
  };

  // const filteredProjects = projects.filter(project =>
  //  project.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
  //  project.description?.toLowerCase().includes(searchQuery.toLowerCase())
  //);

  return (
    <div className="min-h-screen">
      {/* í—¤ë” */}
      <Header 
        title={getHeaderTitle()}
      />
      
      {/* ë¡œê·¸ì¸ ë°°ë„ˆ (í—¤ë” ë°”ê¹¥) */}
      <LoginBanner />
      
      {/* ë©”ì¸ ì½˜í…ì¸  */}
      <MainContainer>
        {/* ë™ì  í•„í„° ì¹© ê´€ë¦¬ì - ë¡œê·¸ì¸ëœ ì‚¬ìš©ìë§Œ í‘œì‹œ */}
        {isLoggedIn && (
          <div className="mb-0">
            <SimpleFilterChips
              options={[
                { 
                  key: 'all',
                  label: 'ì „ì²´ í”„ë¡œì íŠ¸',
                  count: projects.length
                },
                { 
                  key: 'active',
                  label: 'ì§„í–‰ ì¤‘',
                  count: projects.filter(p => p.status === ProjectStatus.ACTIVE).length
                },
                { 
                  key: 'recruiting',
                  label: 'ëª¨ì§‘ ì¤‘',
                  count: projects.filter(p => p.isRecruiting).length
                },
                { 
                  key: 'completed',
                  label: 'ì™„ë£Œë¨',
                  count: projects.filter(p => p.status === ProjectStatus.COMPLETED).length
                }
              ]}
              activeFilters={[currentFilter]}
              onFilterChange={(filters) => setCurrentFilter(filters[0] || 'all')}
              settings={{
                title: "í”„ë¡œì íŠ¸ í•„í„° ì„¤ì •",
                settings: [
                  {
                    key: 'myOnly',
                    label: 'ë‚´ê°€ ì°¸ì—¬í•œ í”„ë¡œì íŠ¸ë§Œ',
                    type: 'toggle',
                    value: showOnlyMyProjects,
                    onChange: setShowOnlyMyProjects
                  },
                  {
                    key: 'sort',
                    label: 'ì •ë ¬ ê¸°ì¤€',
                    type: 'select',
                    value: projectSortOrder,
                    options: ['recent', 'progress', 'deadline', 'members'],
                    onChange: setProjectSortOrder
                  }
                ]
              }}
            />
          </div>
        )}
          

        {/* ì˜¤ë¥˜ í‘œì‹œ */}
        {error && (
          <div className="bg-red-50 border border-red-200 p-4">
            <p className="text-red-600">{error}</p>
            <button
              onClick={loadProjects}
              className="mt-2 text-red-600 underline hover:no-underline"
            >
              ë‹¤ì‹œ ì‹œë„
            </button>
          </div>
        )}

        {/* ë¡œë”© */}
        {isLoading ? (
          <div>
            {[...Array(3)].map((_, index) => (
              <div key={index} className="bg-white border border-gray-200 p-6">
                <div className="animate-pulse">
                  <div className="flex items-center space-x-3 mb-4">
                    <div className="w-12 h-12 bg-gray-200"></div>
                    <div className="flex-1">
                      <div className="h-4 bg-gray-200 rounded w-1/2 mb-2"></div>
                      <div className="h-3 bg-gray-200 rounded w-3/4"></div>
                    </div>
                  </div>
                  <div className="h-2 bg-gray-200 rounded w-full mb-4"></div>
                  <div className="flex space-x-4">
                    <div className="h-4 bg-gray-200 rounded w-16"></div>
                    <div className="h-4 bg-gray-200 rounded w-16"></div>
                  </div>
                </div>
              </div>
            ))}
          </div>
        ) : projects.length === 0 ? (
          <div className="text-center">
            <Folder className="w-16 h-16 text-gray-400 mx-auto mb-4" />
            <h3 className="text-lg font-medium text-gray-900 mb-2">
              {searchQuery ? 'ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ' : 'í”„ë¡œì íŠ¸ ì—†ìŒ'}
            </h3>
            <p className="text-gray-500 mb-4">
              {searchQuery 
                ? 'ê²€ìƒ‰ ì¡°ê±´ì— ë§ëŠ” í”„ë¡œì íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.' 
                : 'ìš°ì¸¡ í•˜ë‹¨ì˜ ìˆ˜ì§‘í•¨ ë²„íŠ¼(+)ì„ ëˆŒëŸ¬ í”„ë¡œì íŠ¸ë¥¼ ì¶”ê°€í•´ë³´ì„¸ìš”!'}
            </p>
          </div>
        ) : (
          <div className="bg-white border border-gray-200 overflow-hidden">
            {/* ëª¨ì§‘ ì¤‘ í”„ë¡œì íŠ¸ ë°°ë„ˆ (ëª¨ì§‘ ì¤‘ í•„í„°ì¼ ë•Œë§Œ í‘œì‹œ) */}
            {currentFilter === 'ë©¤ë²„ ëª¨ì§‘ ì¤‘' && (
              <div className="bg-gradient-to-r from-green-50 to-blue-50 border-b border-gray-100 p-6">
                <div className="flex items-center space-x-3 mb-3">
                  <UserPlus className="w-6 h-6 text-green-600" />
                  <h3 className="text-lg font-semibold text-green-800">ë©¤ë²„ë¥¼ ëª¨ì§‘ ì¤‘ì¸ í”„ë¡œì íŠ¸</h3>
                </div>
                <p className="text-green-700 mb-4">
                  ìƒˆë¡œìš´ íŒ€ì›ì„ ì°¾ê³  ìˆëŠ” í”„ë¡œì íŠ¸ë“¤ì…ë‹ˆë‹¤. ê´€ì‹¬ ìˆëŠ” í”„ë¡œì íŠ¸ì— ì°¸ì—¬í•´ë³´ì„¸ìš”!
                </p>
                <div className="flex items-center space-x-4 text-sm text-green-600">
                  <div className="flex items-center space-x-1">
                    <Star className="w-4 h-4" />
                    <span>ì¦‰ì‹œ ì°¸ì—¬ ê°€ëŠ¥</span>
                  </div>
                  <div className="flex items-center space-x-1">
                    <Users className="w-4 h-4" />
                    <span>ë‹¤ì–‘í•œ ì—­í•  ëª¨ì§‘</span>
                  </div>
                  <div className="flex items-center space-x-1">
                    <TrendingUp className="w-4 h-4" />
                    <span>ì„±ì¥ ê¸°íšŒ ì œê³µ</span>
                  </div>
                </div>
              </div>
            )}

            <div className="divide-y divide-gray-100">
              {/* í”„ë¡œì íŠ¸ ëª©ë¡ */}
              {projects.map((project) => (
                <ProjectCard 
                  key={project.id} 
                  project={project} 
                  onClick={() => router.push(`/projects/${project.id}`)}
                />
              ))}
            </div>
          </div>
        )}
      </MainContainer>
      
      {/* í”Œë¡œíŒ… ì•¡ì…˜ ë²„íŠ¼ */}
      <WorklyFloatingActionButton 
        onTaskCreated={(task) => {
          console.log('CPER ì—…ë¬´ ìƒì„±:', task)
          // TODO: í”„ë¡œì íŠ¸ ê´€ë ¨ ì—…ë¬´ ìƒì„± ë¡œì§ êµ¬í˜„
        }}
        onInboxItemCreated={(inboxItem) => {
          console.log('ë¹ ë¥¸ ìˆ˜ì§‘:', inboxItem)
          // TODO: í”„ë¡œì íŠ¸ ê´€ë ¨ ì•„ì´ë””ì–´ ìˆ˜ì§‘ ë¡œì§ êµ¬í˜„
        }}
      />
    </div>
  );
}
</file>

<file path="frontend/package.json">
{
  "name": "@workly/frontend",
  "version": "1.0.0",
  "private": true,
  "description": "ì›Œí´ë¦¬ í”„ë¡ íŠ¸ì—”ë“œ Next.js ì• í”Œë¦¬ì¼€ì´ì…˜",
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "lint:fix": "next lint --fix",
    "type-check": "tsc --noEmit",
    "clean": "rm -rf .next",
    "test": "jest",
    "test:watch": "jest --watch"
  },
  "dependencies": {
    "@heroicons/react": "^2.0.18",
    "@mdxeditor/editor": "^3.40.1",
    "@workly/shared": "*",
    "clsx": "^2.0.0",
    "lucide-react": "^0.525.0",
    "next": "^14.2.30",
    "react": "^18",
    "react-dom": "^18",
    "socket.io-client": "^4.7.5",
    "tailwind-merge": "^2.0.0",
    "zustand": "^4.4.7"
  },
  "devDependencies": {
    "@testing-library/jest-dom": "^6.4.2",
    "@testing-library/react": "^14.2.1",
    "@testing-library/user-event": "^14.5.2",
    "@types/jest": "^29.5.2",
    "@types/node": "^20",
    "@types/react": "^18",
    "@types/react-dom": "^18",
    "autoprefixer": "^10.0.1",
    "eslint": "^8",
    "eslint-config-next": "14.0.4",
    "eslint-plugin-jsx-a11y": "^6.8.0",
    "eslint-plugin-react": "^7.34.0",
    "eslint-plugin-react-hooks": "^4.6.0",
    "jest": "^29.5.0",
    "jest-environment-jsdom": "^29.5.0",
    "postcss": "^8",
    "tailwindcss": "^3.3.0",
    "typescript": "^5"
  }
}
</file>

<file path="frontend/src/app/page.tsx">
'use client'

export const dynamic = 'force-dynamic'

import { useState, useEffect } from 'react'
import { useRouter, useSearchParams } from 'next/navigation'
import { 
  ClipboardDocumentIcon, 
  CheckCircleIcon, 
  ClockIcon, 
  CalendarIcon,
  UserIcon,
  FlagIcon
} from '@heroicons/react/24/outline'
import Header from '@/components/layout/Header'
import MainContainer from '@/components/layout/MainContainer'
import SimpleFilterChips from '@/components/ui/SimpleFilterChips'
import CalendarToggleFAB from '@/components/ui/CalendarToggleFAB'
import LoginBanner from '@/components/ui/LoginBanner'
import QuickAddInput from '@/components/ui/QuickAddInput'
import ResponsiveTaskCard from '@/components/tasks/ResponsiveTaskCard'
import CollapsibleCalendar from '@/components/tasks/CollapsibleCalendar'
import { TaskStatus, TaskPriority, TaskType, TaskDetail } from '@/types/task.types'
import { isAuthenticated } from '@/lib/auth'
import { useCalendarFilterStore } from '@/lib/stores/calendarFilterStore'
import AdvancedFilterPanel, { AdvancedFilters } from '@/components/ui/AdvancedFilterPanel'
import TaskDetailModal from '@/components/tasks/TaskDetailModal'

// ì›Œí´ë¦¬ ì—…ë¬´ ì¸í„°í˜ì´ìŠ¤ (ë ˆê±°ì‹œ GTDTask ëŒ€ì²´)
interface WorklyTask {
  id: string
  title: string
  description?: string
  status: TaskStatus
  priority: TaskPriority
  type: TaskType
  goalId?: string  // ì›Œí´ë¦¬ ë°©ë²•ë¡ : ëª©í‘œ ì—°ê³„ (ì„ íƒì )
  projectId?: string  // ì›Œí´ë¦¬ ë°©ë²•ë¡ : í”„ë¡œì íŠ¸ ì—°ê³„ (ì„ íƒì )
  assigneeId: string
  assignee: {
    id: string
    name: string
    email: string
  }
  dueDate?: string
  scheduledDate?: string  // ì›Œí´ë¦¬: ì‹¤í–‰ ì˜ˆì •ì¼
  tags: string[]
  createdAt: string
  updatedAt: string
  isToday?: boolean  // ì›Œí´ë¦¬: ì˜¤ëŠ˜ í•  ì¼ í‘œì‹œ
  isFocused?: boolean  // ì›Œí´ë¦¬: ì§‘ì¤‘ ëª¨ë“œ í‘œì‹œ
}

// ëª©ì—… ì›Œí´ë¦¬ ì—…ë¬´ ë°ì´í„°
const mockTasks: WorklyTask[] = [
  {
    id: '1',
    title: 'ì›Œí´ë¦¬ ë„¤ë¹„ê²Œì´ì…˜ ì‹œìŠ¤í…œ ìµœì¢… ì ê²€',
    description: '5ê°œ í•µì‹¬ ë„¤ë¹„ê²Œì´ì…˜ í•­ëª©ì˜ ë™ì‘ì„ í™•ì¸í•˜ê³  ì‚¬ìš©ì ê²½í—˜ì„ ê°œì„ ',
    status: TaskStatus.IN_PROGRESS,
    priority: TaskPriority.HIGH,
    type: TaskType.TASK,
    projectId: 'proj-1',
    assigneeId: 'user1',
    assignee: { id: 'user1', name: 'ê¹€ì›Œí´ë¦¬', email: 'workly@example.com' },
    dueDate: new Date().toISOString(),
    scheduledDate: new Date().toISOString(),
    tags: ['UI/UX', 'ë„¤ë¹„ê²Œì´ì…˜', 'ì ê²€'],
    createdAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),
    updatedAt: new Date().toISOString(),
    isToday: true,
    isFocused: true
  },
  {
    id: '2',
    title: 'CPER ì›Œí¬í”Œë¡œìš° ë¬¸ì„œ ì‘ì„±',
    description: 'Capture-Plan-Execute-Review ì›Œí¬í”Œë¡œìš°ì˜ ì‚¬ìš©ë²•ì„ ë¬¸ì„œë¡œ ì •ë¦¬',
    status: TaskStatus.TODO,
    priority: TaskPriority.MEDIUM,
    type: TaskType.TASK,
    goalId: 'goal-1',
    assigneeId: 'user1',
    assignee: { id: 'user1', name: 'ê¹€ì›Œí´ë¦¬', email: 'workly@example.com' },
    dueDate: new Date(Date.now() + 3 * 24 * 60 * 60 * 1000).toISOString(),
    scheduledDate: new Date(Date.now() + 1 * 24 * 60 * 60 * 1000).toISOString(),
    tags: ['ë¬¸ì„œí™”', 'CPER', 'ê°€ì´ë“œ'],
    createdAt: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000).toISOString(),
    updatedAt: new Date().toISOString(),
    isToday: false
  },
  {
    id: '3',
    title: 'ì‚¬ìš©ì í”¼ë“œë°± ìˆ˜ì§‘ ë° ë¶„ì„',
    description: 'ë² íƒ€ í…ŒìŠ¤í„°ë“¤ì˜ í”¼ë“œë°±ì„ ìˆ˜ì§‘í•˜ê³  ê°œì„ ì‚¬í•­ì„ ë„ì¶œ',
    status: TaskStatus.TODO,
    priority: TaskPriority.HIGH,
    type: TaskType.IMPROVEMENT,
    goalId: 'goal-1',
    assigneeId: 'user1',
    assignee: { id: 'user1', name: 'ê¹€ì›Œí´ë¦¬', email: 'workly@example.com' },
    dueDate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),
    tags: ['í”¼ë“œë°±', 'ì‚¬ìš©ìê²½í—˜', 'ë¶„ì„'],
    createdAt: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(),
    updatedAt: new Date().toISOString(),
    isToday: true
  },
  {
    id: '4',
    title: 'ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ ìµœì í™”',
    description: 'ì¿¼ë¦¬ ì„±ëŠ¥ì„ ê°œì„ í•˜ê³  ì¸ë±ì‹±ì„ ìµœì í™”',
    status: TaskStatus.IN_REVIEW,
    priority: TaskPriority.MEDIUM,
    type: TaskType.IMPROVEMENT,
    projectId: 'proj-2',
    assigneeId: 'user1',
    assignee: { id: 'user1', name: 'ê¹€ì›Œí´ë¦¬', email: 'workly@example.com' },
    dueDate: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000).toISOString(),
    tags: ['ë°ì´í„°ë² ì´ìŠ¤', 'ì„±ëŠ¥', 'ìµœì í™”'],
    createdAt: new Date(Date.now() - 4 * 24 * 60 * 60 * 1000).toISOString(),
    updatedAt: new Date().toISOString()
  },
  {
    id: '5',
    title: 'ëª¨ë°”ì¼ ë°˜ì‘í˜• ë””ìì¸ ê°œì„ ',
    description: 'ëª¨ë°”ì¼ í™˜ê²½ì—ì„œì˜ ì‚¬ìš©ì ê²½í—˜ì„ ê°œì„ ',
    status: TaskStatus.DONE,
    priority: TaskPriority.MEDIUM,
    type: TaskType.FEATURE,
    projectId: 'proj-1',
    assigneeId: 'user1',
    assignee: { id: 'user1', name: 'ê¹€ì›Œí´ë¦¬', email: 'workly@example.com' },
    dueDate: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000).toISOString(),
    tags: ['ëª¨ë°”ì¼', 'ë°˜ì‘í˜•', 'UI'],
    createdAt: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),
    updatedAt: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000).toISOString()
  },
  {
    id: '6',
    title: 'ì°¨ì„¸ëŒ€ ê¸°ëŠ¥ ê¸°íš',
    description: 'ì‚¬ìš©ì ìš”ì²­ì´ ë§ì€ ê¸°ëŠ¥ë“¤ì„ ê²€í† í•˜ê³  ë¡œë“œë§µì— ë°˜ì˜',
    status: TaskStatus.TODO,
    priority: TaskPriority.LOW,
    type: TaskType.EPIC,
    goalId: 'goal-2',
    assigneeId: 'user1',
    assignee: { id: 'user1', name: 'ê¹€ì›Œí´ë¦¬', email: 'workly@example.com' },
    tags: ['ê¸°íš', 'ë¡œë“œë§µ', 'ë¯¸ë˜'],
    createdAt: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),
    updatedAt: new Date().toISOString()
  },
  // ì •ë¦¬ ë§ˆë²•ì‚¬ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ë¯¸ë¶„ë¥˜ ì—…ë¬´ë“¤
  {
    id: '7',
    title: 'ì´ë©”ì¼ ì‘ë‹µí•˜ê¸°',
    description: 'ì¤‘ìš”í•œ ì´ë©”ì¼ë“¤ì— ëŒ€í•œ ì‘ë‹µ ì²˜ë¦¬',
    status: TaskStatus.TODO,
    priority: TaskPriority.MEDIUM,
    type: TaskType.TASK,
    assigneeId: 'user1',
    assignee: { id: 'user1', name: 'ê¹€ì›Œí´ë¦¬', email: 'workly@example.com' },
    tags: ['ì´ë©”ì¼', 'ì»¤ë®¤ë‹ˆì¼€ì´ì…˜'],
    createdAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),
    updatedAt: new Date().toISOString()
  },
  {
    id: '8',
    title: 'íšŒì˜ì‹¤ ì˜ˆì•½',
    description: 'ë‚´ì¼ íŒ€ ë¯¸íŒ…ì„ ìœ„í•œ íšŒì˜ì‹¤ ì˜ˆì•½',
    status: TaskStatus.TODO,
    priority: TaskPriority.HIGH,
    type: TaskType.TASK,
    assigneeId: 'user1',
    assignee: { id: 'user1', name: 'ê¹€ì›Œí´ë¦¬', email: 'workly@example.com' },
    tags: ['íšŒì˜', 'ì˜ˆì•½'],
    createdAt: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000).toISOString(),
    updatedAt: new Date().toISOString()
  },
  {
    id: '9',
    title: 'í”„ë¡œì íŠ¸ ìë£Œ ì •ë¦¬',
    description: 'ì§€ë‚œë‹¬ í”„ë¡œì íŠ¸ ê´€ë ¨ ìë£Œë“¤ì„ ì •ë¦¬',
    status: TaskStatus.TODO,
    priority: TaskPriority.LOW,
    type: TaskType.TASK,
    assigneeId: 'user1',
    assignee: { id: 'user1', name: 'ê¹€ì›Œí´ë¦¬', email: 'workly@example.com' },
    tags: ['ì •ë¦¬', 'ë¬¸ì„œ'],
    createdAt: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(),
    updatedAt: new Date().toISOString()
  }
]


export default function TasksPage() {
  const router = useRouter()
  const searchParams = useSearchParams()
  const [tasks, setTasks] = useState<WorklyTask[]>(mockTasks)
  const [isLoading, setIsLoading] = useState(false)
  const [activeFilters, setActiveFilters] = useState<string[]>(['today'])
  const [isLoggedIn, setIsLoggedIn] = useState(false)

  // ìº˜ë¦°ë” ìƒíƒœ ê´€ë¦¬
  const [isCalendarExpanded, setIsCalendarExpanded] = useState(false)
  const [isDragMode, setIsDragMode] = useState(false)
  const [draggingTaskId, setDraggingTaskId] = useState<string | null>(null)

  // í•„í„° ì„¤ì • ìƒíƒœ (ê°„ì†Œí™”ë¨)
  const [taskSortOrder, setTaskSortOrder] = useState('priority')
  
  // ìº˜ë¦°ë” í•„í„° ìƒíƒœ êµ¬ë…
  const { showNoDue, showOverdue } = useCalendarFilterStore()
  
  // ìƒì„¸ í•„í„° ìƒíƒœ ê´€ë¦¬
  const [showAdvancedFilters, setShowAdvancedFilters] = useState(false)
  const [advancedFilters, setAdvancedFilters] = useState<AdvancedFilters>({})
  
  // ì—…ë¬´ ìƒì„¸ ëª¨ë‹¬ ìƒíƒœ ê´€ë¦¬
  const [selectedTask, setSelectedTask] = useState<TaskDetail | null>(null)
  const [isTaskDetailOpen, setIsTaskDetailOpen] = useState(false)
  
  // ëª©ì—… í”„ë¡œì íŠ¸ì™€ ëª©í‘œ ë°ì´í„°
  const availableProjects = [
    { id: 'proj-1', name: 'ì›Œí´ë¦¬ ë„¤ë¹„ê²Œì´ì…˜ ì‹œìŠ¤í…œ' },
    { id: 'proj-2', name: 'ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”' }
  ]
  
  const availableGoals = [
    { id: 'goal-1', name: 'Q4 ì‚¬ìš©ì ê²½í—˜ ê°œì„ ' },
    { id: 'goal-2', name: 'ì°¨ì„¸ëŒ€ ê¸°ëŠ¥ ê°œë°œ' }
  ]
  
  // ìƒì„¸ í•„í„°ê°€ í™œì„±í™”ë˜ì—ˆëŠ”ì§€ í™•ì¸
  const hasAdvancedFilters = Boolean(
    advancedFilters.dueDate || 
    advancedFilters.status?.length || 
    advancedFilters.projectIds?.length || 
    advancedFilters.goalIds?.length
  )

  // ê°„ì†Œí™”ëœ í•„í„° ì˜µì…˜ë“¤ (ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸)
  const filterOptions = [
    { 
      key: 'today',
      label: 'ì˜¤ëŠ˜ í•  ì¼',
      count: tasks.filter(t => t.isToday && t.status !== TaskStatus.DONE).length
    },
    { 
      key: 'in-progress',
      label: 'ì§„í–‰ ì¤‘',
      count: tasks.filter(t => t.status === TaskStatus.IN_PROGRESS).length
    },
    { 
      key: 'completed',
      label: 'ì™„ë£Œë¨',
      count: tasks.filter(t => t.status === TaskStatus.DONE).length
    },
    { 
      key: 'high-priority',
      label: 'ì¤‘ìš” ì—…ë¬´',
      count: tasks.filter(t => t.priority === TaskPriority.HIGH || t.priority === TaskPriority.URGENT).length
    },
    { 
      key: 'all',
      label: 'ì „ì²´ ì—…ë¬´',
      count: tasks.length
    }
  ]

  // í†µí•© í•„í„°ë§ ë¡œì§ (ê¸°ë³¸ + ìº˜ë¦°ë” + ìƒì„¸ í•„í„°)
  const filteredTasks = tasks.filter(task => {
    // 1. ê¸°ë³¸ í•„í„° ì ìš©
    let includeTask = !activeFilters.length
    
    if (activeFilters.length > 0) {
      includeTask = activeFilters.some(filter => {
        switch (filter) {
          case 'today':
            return task.isToday && task.status !== TaskStatus.DONE
          case 'in-progress':
            return task.status === TaskStatus.IN_PROGRESS
          case 'completed':
            return task.status === TaskStatus.DONE
          case 'high-priority':
            return (task.priority === TaskPriority.HIGH || task.priority === TaskPriority.URGENT) && 
                   task.status !== TaskStatus.DONE
          case 'all':
            return true
          default:
            return true
        }
      })
    }

    // 2. ìº˜ë¦°ë” í•„í„° ì ìš©
    if (showNoDue || showOverdue) {
      const today = new Date()
      const taskDueDate = task.dueDate ? new Date(task.dueDate) : null
      
      let calendarMatch = false
      
      if (showNoDue && !taskDueDate) {
        calendarMatch = true
      }
      
      if (showOverdue && taskDueDate && taskDueDate < today && task.status !== TaskStatus.DONE) {
        calendarMatch = true  
      }
      
      includeTask = includeTask && calendarMatch
    }

    // 3. ìƒì„¸ í•„í„° ì ìš©
    if (hasAdvancedFilters) {
      let advancedMatch = true
      
      // ë§ˆê°ì¼ í•„í„°
      if (advancedFilters.dueDate) {
        const today = new Date()
        const taskDueDate = task.dueDate ? new Date(task.dueDate) : null
        
        switch (advancedFilters.dueDate) {
          case 'overdue':
            advancedMatch = advancedMatch && taskDueDate && taskDueDate < today && task.status !== TaskStatus.DONE
            break
          case 'today':
            advancedMatch = advancedMatch && taskDueDate && taskDueDate.toDateString() === today.toDateString()
            break
          case 'this-week':
            if (taskDueDate) {
              const weekFromNow = new Date(today.getTime() + 7 * 24 * 60 * 60 * 1000)
              advancedMatch = advancedMatch && taskDueDate >= today && taskDueDate <= weekFromNow
            } else {
              advancedMatch = false
            }
            break
          case 'no-due':
            advancedMatch = advancedMatch && !taskDueDate
            break
        }
      }
      
      // ìƒíƒœ í•„í„°
      if (advancedFilters.status?.length) {
        advancedMatch = advancedMatch && advancedFilters.status.includes(task.status)
      }
      
      // í”„ë¡œì íŠ¸ í•„í„°
      if (advancedFilters.projectIds?.length) {
        advancedMatch = advancedMatch && task.projectId && advancedFilters.projectIds.includes(task.projectId)
      }
      
      // ëª©í‘œ í•„í„°
      if (advancedFilters.goalIds?.length) {
        advancedMatch = advancedMatch && task.goalId && advancedFilters.goalIds.includes(task.goalId)
      }
      
      includeTask = includeTask && advancedMatch
    }
    
    return includeTask
  })

  // ë¡œê·¸ì¸ ìƒíƒœ ì´ˆê¸°í™”
  useEffect(() => {
    setIsLoggedIn(isAuthenticated())
  }, [])

  // URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ì—ì„œ í•„í„° ìƒíƒœ ì´ˆê¸°í™”
  useEffect(() => {
    const filters = searchParams.get('filters')
    const advanced = searchParams.get('advanced')
    
    if (filters) {
      try {
        const parsedFilters = JSON.parse(decodeURIComponent(filters))
        if (Array.isArray(parsedFilters)) {
          setActiveFilters(parsedFilters)
        }
      } catch (e) {
        console.warn('Invalid filters in URL:', e)
      }
    }
    
    if (advanced) {
      try {
        const parsedAdvanced = JSON.parse(decodeURIComponent(advanced))
        setAdvancedFilters(parsedAdvanced)
      } catch (e) {
        console.warn('Invalid advanced filters in URL:', e)
      }
    }
  }, [searchParams])

  // í•„í„° ìƒíƒœê°€ ë³€ê²½ë  ë•Œ URL ì—…ë°ì´íŠ¸
  useEffect(() => {
    const params = new URLSearchParams()
    
    if (activeFilters.length > 0) {
      params.set('filters', encodeURIComponent(JSON.stringify(activeFilters)))
    }
    
    if (hasAdvancedFilters) {
      params.set('advanced', encodeURIComponent(JSON.stringify(advancedFilters)))
    }
    
    const newUrl = params.toString() ? `?${params.toString()}` : window.location.pathname
    window.history.replaceState({}, '', newUrl)
  }, [activeFilters, advancedFilters, hasAdvancedFilters])


  const handleTaskClick = (task: WorklyTask) => {
    // WorklyTaskë¥¼ TaskDetailë¡œ ë³€í™˜
    const taskDetail: TaskDetail = {
      ...task,
      descriptionMarkdown: task.description,
      checklist: [
        { id: 'check-1', text: 'ê¸°ë³¸ ìš”êµ¬ì‚¬í•­ ê²€í† ', completed: false, order: 0 },
        { id: 'check-2', text: 'ì„¤ê³„ ë¬¸ì„œ ì‘ì„±', completed: true, order: 1 },
        { id: 'check-3', text: 'ì½”ë“œ êµ¬í˜„', completed: false, order: 2 }
      ],
      relationships: [],
      wikiReferences: [
        { id: 'wiki-1', title: 'ì›Œí´ë¦¬ ë””ìì¸ ê°€ì´ë“œ', url: '/wiki/design-guide', description: 'ì›Œí´ë¦¬ UI/UX ë””ìì¸ í‘œì¤€' },
        { id: 'wiki-2', title: 'CPER ì›Œí¬í”Œë¡œìš°', url: '/wiki/cper', description: 'Capture-Plan-Execute-Review ë°©ë²•ë¡ ' }
      ],
      estimatedTimeMinutes: task.id === '1' ? 120 : undefined,
      loggedTimeMinutes: task.id === '1' ? 80 : undefined
    }
    
    setSelectedTask(taskDetail)
    setIsTaskDetailOpen(true)
  }
  
  // ì—…ë¬´ ìƒì„¸ ì €ì¥ í•¸ë“¤ëŸ¬
  const handleTaskDetailSave = (taskDetail: TaskDetail) => {
    // ì‹¤ì œë¡œëŠ” API í˜¸ì¶œí•˜ì—¬ ì €ì¥
    console.log('ì—…ë¬´ ìƒì„¸ ì €ì¥:', taskDetail)
    
    // ë¡œì»¬ ìƒíƒœ ì—…ë°ì´íŠ¸ (ê¸°ë³¸ ì •ë³´ë§Œ)
    handleTaskUpdate(taskDetail.id, {
      title: taskDetail.title,
      description: taskDetail.description,
      dueDate: taskDetail.dueDate,
      estimatedHours: taskDetail.estimatedTimeMinutes ? taskDetail.estimatedTimeMinutes / 60 : undefined
    })
  }

  // PRD ëª…ì„¸: ë¹ ë¥¸ ì¶”ê°€ - Enter ì…ë ¥ ì‹œ ìƒˆ ì—…ë¬´ê°€ ë¦¬ìŠ¤íŠ¸ ìµœìƒë‹¨ì— ìƒì„±
  const handleQuickAddTask = async (title: string) => {
    const newTask: WorklyTask = {
      id: `task-${Date.now()}`, // ì„ì‹œ ID ìƒì„±
      title: title,
      status: TaskStatus.TODO, // PRD ëª…ì„¸: statusëŠ” 'todo'
      priority: TaskPriority.MEDIUM, // ê¸°ë³¸ ìš°ì„ ìˆœìœ„
      type: TaskType.TASK,
      assigneeId: 'user1',
      assignee: { id: 'user1', name: 'ê¹€ì›Œí´ë¦¬', email: 'workly@example.com' },
      tags: [],
      createdAt: new Date().toISOString(), // PRD ëª…ì„¸: created_atì€ í˜„ì¬ ì‹œê°
      updatedAt: new Date().toISOString(),
      isToday: true // ìƒˆë¡œ ìƒì„±ëœ ì—…ë¬´ëŠ” ì˜¤ëŠ˜ í•  ì¼ë¡œ ì„¤ì •
    }

    // ë¦¬ìŠ¤íŠ¸ ìµœìƒë‹¨ì— ì¶”ê°€
    setTasks(prevTasks => [newTask, ...prevTasks])
  }

  // ì •ë¦¬ ë§ˆë²•ì‚¬: ì—…ë¬´ ì—…ë°ì´íŠ¸
  const handleTaskUpdate = (taskId: string, updates: Partial<WorklyTask>) => {
    setTasks(prevTasks => 
      prevTasks.map(task => 
        task.id === taskId ? { ...task, ...updates, updatedAt: new Date().toISOString() } : task
      )
    )
  }

  // ì •ë¦¬ ë§ˆë²•ì‚¬: ì—…ë¬´ ì‚­ì œ (30ì¼ê°„ íœ´ì§€í†µ)
  const handleTaskDelete = (taskId: string) => {
    setTasks(prevTasks => prevTasks.filter(task => task.id !== taskId))
    // TODO: ì‹¤ì œë¡œëŠ” deleted ìƒíƒœë¡œ ë³€ê²½í•˜ê³  30ì¼ í›„ ì™„ì „ ì‚­ì œ
    console.log(`ì—…ë¬´ ${taskId} ì‚­ì œë¨ (30ì¼ê°„ íœ´ì§€í†µ ë³´ê´€)`)
  }

  // ë“œë˜ê·¸ ì•¤ ë“œë¡­ í•¸ë“¤ëŸ¬ë“¤
  const handleDragStart = (taskId: string) => {
    setDraggingTaskId(taskId)
    setIsDragMode(true)
    
    // ë‹¬ë ¥ì´ ë‹«í˜€ìˆì„ ë•Œë§Œ ì—´ê¸°
    if (!isCalendarExpanded) {
      setIsCalendarExpanded(true)
    }
    
    // í–…í‹± í”¼ë“œë°± (ì§€ì›ë˜ëŠ” ê²½ìš°)
    if ('vibrate' in navigator) {
      navigator.vibrate(50)
    }
  }

  const handleDragEnd = () => {
    setDraggingTaskId(null)
    setIsDragMode(false)
    // ìº˜ë¦°ë”ëŠ” ë‚ ì§œ ì„ íƒ ì‹œ ìë™ìœ¼ë¡œ ë‹«íˆë¯€ë¡œ ì—¬ê¸°ì„œëŠ” ë‹«ì§€ ì•ŠìŒ
  }

  const handleDateSelect = (date: Date) => {
    if (draggingTaskId) {
      // ë“œë˜ê·¸ ì¤‘ì¸ ì—…ë¬´ì˜ ë§ˆê°ì¼ ì„¤ì •
      handleTaskUpdate(draggingTaskId, {
        dueDate: date.toISOString()
      })
      console.log(`ì—…ë¬´ ${draggingTaskId}ì˜ ë§ˆê°ì¼ì„ ${date.toLocaleDateString('ko-KR')}ë¡œ ì„¤ì •`)
      
      // ë“œë˜ê·¸ ì•¤ ë“œë¡­ì¸ ê²½ìš° ë‹¬ë ¥ì„ ì—´ì–´ë‘ 
      setIsDragMode(false)
      setDraggingTaskId(null)
      // setIsCalendarExpandedëŠ” í˜¸ì¶œí•˜ì§€ ì•ŠìŒ - ë‹¬ë ¥ ìœ ì§€
    } else {
      // ì¼ë°˜ í´ë¦­ì¸ ê²½ìš°ì—ë§Œ ë‹¬ë ¥ ë‹«ê¸°
      setIsCalendarExpanded(false)
    }
  }

  const handleCalendarClose = () => {
    setIsCalendarExpanded(false)
    setIsDragMode(false)
    setDraggingTaskId(null)
  }

  const handleCalendarToggle = () => {
    setIsCalendarExpanded(!isCalendarExpanded)
    if (!isCalendarExpanded) {
      // í¼ì¹  ë•ŒëŠ” ë“œë˜ê·¸ ëª¨ë“œê°€ ì•„ë‹Œ ì¼ë°˜ ëª¨ë“œ
      setIsDragMode(false)
      setDraggingTaskId(null)
    }
  }

  // ìŠ¤ì™€ì´í”„ ì•¡ì…˜ í•¸ë“¤ëŸ¬ë“¤
  const handleTaskDelegate = (taskId: string) => {
    console.log('ìœ„ì„:', taskId)
    // TODO: ìœ„ì„ ê¸°ëŠ¥ êµ¬í˜„
  }

  const handleTaskDefer = (taskId: string) => {
    console.log('ë³´ë¥˜:', taskId)
    // TODO: ë³´ë¥˜ ê¸°ëŠ¥ êµ¬í˜„
    handleTaskUpdate(taskId, { status: TaskStatus.DEFERRED })
  }

  const handleTaskConvertToProject = (taskId: string) => {
    console.log('í”„ë¡œì íŠ¸ë¡œ ì „í™˜:', taskId)
    // TODO: í”„ë¡œì íŠ¸ ì „í™˜ ê¸°ëŠ¥ êµ¬í˜„
  }

  // ë‚ ì§œë³„ ì—…ë¬´ ê°œìˆ˜ ê³„ì‚°
  const getTasksWithDates = () => {
    const tasksWithDates: { [dateKey: string]: number } = {}
    
    tasks.forEach(task => {
      if (task.dueDate) {
        const dateKey = task.dueDate.split('T')[0] // YYYY-MM-DD í˜•ì‹
        tasksWithDates[dateKey] = (tasksWithDates[dateKey] || 0) + 1
      }
    })
    
    return tasksWithDates
  }

  return (
    <div className="min-h-screen bg-gray-50 pb-20">
      {/* í—¤ë” */}
      <Header title="ì—…ë¬´" />
      
      {/* ë¡œê·¸ì¸ ë°°ë„ˆ (í—¤ë” ë°”ê¹¥) */}
      <LoginBanner />
      
      {/* ë©”ì¸ ì½˜í…ì¸  */}
      <MainContainer>
        {/* í•„í„° ê´€ë¦¬ì - ë¡œê·¸ì¸ëœ ì‚¬ìš©ìë§Œ í‘œì‹œ */}
        {isLoggedIn && (
          <div className="mb-4">
            <SimpleFilterChips
              options={filterOptions}
              activeFilters={activeFilters}
              onFilterChange={setActiveFilters}
              onAdvancedFilterClick={() => setShowAdvancedFilters(true)}
              hasAdvancedFilters={hasAdvancedFilters}
              settings={{
                title: "ì—…ë¬´ í•„í„° ì„¤ì •",
                settings: [
                  {
                    key: 'sort',
                    label: 'ì •ë ¬ ê¸°ì¤€',
                    type: 'select',
                    value: taskSortOrder,
                    options: ['priority', 'dueDate', 'status', 'created'],
                    onChange: setTaskSortOrder
                  }
                ]
              }}
            />
          </div>
        )}

        {/* PRD ëª…ì„¸: ë¹ ë¥¸ ì¶”ê°€ ì…ë ¥ì°½ - ë¡œê·¸ì¸ëœ ì‚¬ìš©ìë§Œ í‘œì‹œ */}
        {isLoggedIn && (
          <div className="mb-4">
            <QuickAddInput
              placeholder="ë¬´ì—‡ì„ í•´ì•¼ í•˜ë‚˜ìš”?"
              onTaskCreate={handleQuickAddTask}
            />
          </div>
        )}

        {/* ì—…ë¬´ ëª©ë¡ */}
        <div className="workly-list-card overflow-hidden">
          {isLoading ? (
            <div className="p-8 text-center">
              <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"></div>
              <p className="workly-caption mt-2">ì—…ë¬´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
            </div>
          ) : filteredTasks.length === 0 ? (
            <div className="p-8 text-center">
              <ClipboardDocumentIcon className="w-16 h-16 text-gray-400 mx-auto mb-4" />
              <h3 className="workly-card-title text-gray-600 mb-1">ì—…ë¬´ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
              <p className="workly-caption mb-4">ìš°ì¸¡ í•˜ë‹¨ì˜ ìˆ˜ì§‘í•¨ ë²„íŠ¼(+)ì„ ëˆŒëŸ¬ ì—…ë¬´ë¥¼ ì¶”ê°€í•´ë³´ì„¸ìš”!</p>
            </div>
          ) : (
            <div className="divide-y divide-gray-100">
              {filteredTasks.map((task) => (
                <ResponsiveTaskCard
                  key={task.id}
                  task={task}
                  onClick={() => handleTaskClick(task)}
                  onDelete={handleTaskDelete}
                  onDelegate={handleTaskDelegate}
                  onDefer={handleTaskDefer}
                  onConvertToProject={handleTaskConvertToProject}
                  onDragStart={handleDragStart}
                  onDragEnd={handleDragEnd}
                  isDragMode={isDragMode}
                />
              ))}
            </div>
          )}
        </div>
      </MainContainer>
      
      {/* ì ‘ì´ì‹ ìº˜ë¦°ë” - ëª¨ë°”ì¼ ë„¤ë¹„ ë®ì–´ì„œ ì „ì²´, ë°ìŠ¤í¬í†± ì‚¬ì´ë“œë°” ì œì™¸ */}
      <div className="fixed bottom-0 left-0 right-0 md:left-64 z-[60]">
        <CollapsibleCalendar
          isExpanded={isCalendarExpanded}
          onDateSelect={handleDateSelect}
          onClose={handleCalendarClose}
          onToggle={handleCalendarToggle}
          tasksWithDates={getTasksWithDates()}
          keepOpenOnDrop={true}
          isDragMode={isDragMode}
        />
      </div>
      
      {/* ìº˜ë¦°ë” í† ê¸€ FAB - ìº˜ë¦°ë” ë†’ì´ë§Œí¼ ìœ„ë¡œ ì´ë™ */}
      <div className={`
        fixed right-4 md:right-6 z-[70] transition-all duration-300
        ${isCalendarExpanded 
          ? 'bottom-[480px] md:bottom-[480px]' 
          : 'bottom-[72px] md:bottom-6'
        }
      `}>
        <CalendarToggleFAB 
          isCalendarExpanded={isCalendarExpanded}
          onToggle={handleCalendarToggle}
        />
      </div>
      
      {/* ìƒì„¸ í•„í„° íŒ¨ë„ */}
      <AdvancedFilterPanel
        isOpen={showAdvancedFilters}
        onClose={() => setShowAdvancedFilters(false)}
        filters={advancedFilters}
        onFiltersChange={setAdvancedFilters}
        availableProjects={availableProjects}
        availableGoals={availableGoals}
      />
      
      {/* ì—…ë¬´ ìƒì„¸ ëª¨ë‹¬ */}
      <TaskDetailModal
        task={selectedTask}
        isOpen={isTaskDetailOpen}
        onClose={() => {
          setIsTaskDetailOpen(false)
          setSelectedTask(null)
        }}
        onSave={handleTaskDetailSave}
      />
    </div>
  )
}
</file>

</files>
